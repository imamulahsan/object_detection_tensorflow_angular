var qce=Object.create;var bb=Object.defineProperty,Kce=Object.defineProperties,Xce=Object.getOwnPropertyDescriptor,Yce=Object.getOwnPropertyDescriptors,Zce=Object.getOwnPropertyNames,QB=Object.getOwnPropertySymbols,Qce=Object.getPrototypeOf,ez=Object.prototype.hasOwnProperty,Jce=Object.prototype.propertyIsEnumerable;var JB=(n,t,e)=>t in n?bb(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e,Ge=(n,t)=>{for(var e in t||={})ez.call(t,e)&&JB(n,e,t[e]);if(QB)for(var e of QB(t))Jce.call(t,e)&&JB(n,e,t[e]);return n},lr=(n,t)=>Kce(n,Yce(t));var F=(n,t)=>()=>(n&&(t=n(n=0)),t);var hs=(n,t)=>()=>(t||n((t={exports:{}}).exports,t),t.exports),_t=(n,t)=>{for(var e in t)bb(n,e,{get:t[e],enumerable:!0})},tz=(n,t,e,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of Zce(t))!ez.call(n,o)&&o!==e&&bb(n,o,{get:()=>t[o],enumerable:!(r=Xce(t,o))||r.enumerable});return n};var ad=(n,t,e)=>(e=n!=null?qce(Qce(n)):{},tz(t||!n||!n.__esModule?bb(e,"default",{value:n,enumerable:!0}):e,n)),nz=n=>tz(bb({},"__esModule",{value:!0}),n);var ee=(n,t,e)=>new Promise((r,o)=>{var s=l=>{try{a(e.next(l))}catch(c){o(c)}},i=l=>{try{a(e.throw(l))}catch(c){o(c)}},a=l=>l.done?r(l.value):Promise.resolve(l.value).then(s,i);a((e=e.apply(n,t)).next())});function Is(n){throw new Error(`'${n}' not yet implemented or not found in the registry. This kernel may not be supported by the tfjs backend you have chosen`)}var ef,cl,gM=F(()=>{"use strict";ef=class{constructor(t,e){this.backend=t,this.dataMover=e,this.data=new WeakMap,this.dataIdsCount=0}get(t){return this.data.has(t)||this.dataMover.moveData(this.backend,t),this.data.get(t)}set(t,e){this.dataIdsCount++,this.data.set(t,e)}has(t){return this.data.has(t)}delete(t){return this.dataIdsCount--,this.data.delete(t)}numDataIds(){return this.dataIdsCount}},cl=class{refCount(t){return Is("refCount")}incRef(t){return Is("incRef")}timerAvailable(){return!0}time(t){return Is("time")}read(t){return Is("read")}readSync(t){return Is("readSync")}readToGPU(t,e){return Is("readToGPU")}numDataIds(){return Is("numDataIds")}disposeData(t,e){return Is("disposeData")}write(t,e,r){return Is("write")}move(t,e,r,o,s){return Is("move")}createTensorFromGPUData(t,e,r){return Is("createTensorFromGPUData")}memory(){return Is("memory")}floatPrecision(){return Is("floatPrecision")}epsilon(){return this.floatPrecision()===32?1e-7:1e-4}dispose(){return Is("dispose")}}});function UH(n){let t=n.length,e=0;for(;t>0;)e=Math.random()*t|0,t--,bT(n,t,e)}function hTe(n,t){if(n.length!==t.length)throw new Error(`Array sizes must match to be shuffled together First array length was ${n.length}Second array length was ${t.length}`);let e=n.length,r=0;for(;e>0;)r=Math.random()*e|0,e--,bT(n,e,r),bT(t,e,r)}function _x(n,t,e){return Math.max(n,Math.min(t,e))}function mTe(n){return n%2===0?n:n+1}function bT(n,t,e){let r=n[t];n[t]=n[e],n[e]=r}function gTe(n){let t=0;for(let e=0;e<n.length;e++)t+=n[e];return t}function xTe(n,t){let e=Math.random();return t*e+(1-e)*n}function yTe(n,t){let e=0;for(let r=0;r<n.length;r++){let o=Number(n[r])-Number(t[r]);e+=o*o}return e}function O(n,t){if(!n)throw new Error(typeof t=="string"?t:t())}function En(n,t,e=""){O(Ro(n,t),()=>e+` Shapes ${n} and ${t} must match`)}function qs(n){O(n!=null,()=>"The input to the tensor constructor must be a non-null value.")}function yt(n){if(n.length===0)return 1;let t=n[0];for(let e=1;e<n.length;e++)t*=n[e];return t}function bTe(n){return n.length===0}function xM(n,t){if(n===t)return!0;if(n==null||t==null||n.length!==t.length)return!1;for(let e=0;e<n.length;e++)if(n[e]!==null&&t[e]!==null&&n[e]!==t[e])return!1;return!0}function Ro(n,t){if(n===t)return!0;if(n==null||t==null||n.length!==t.length)return!1;for(let e=0;e<n.length;e++)if(n[e]!==t[e])return!1;return!0}function Gc(n){return n%1===0}function vTe(n){if(Math.tanh!=null)return Math.tanh(n);if(n===1/0)return 1;if(n===-1/0)return-1;{let t=Math.exp(2*n);return(t-1)/(t+1)}}function wTe(n){let t=Math.ceil(Math.sqrt(n));return[t,Math.ceil(n/t)]}function CTe(n){let t=new Uint32Array(n);for(let e=0;e<n;++e)t[e]=e;return UH(t),t}function jd(n,t){return t<=n.length?n:n+" ".repeat(t-n.length)}function ITe(n,t=o=>0,e,r){return new Promise((o,s)=>{let i=0,a=()=>{if(n()){o();return}i++;let l=t(i);if(e!=null&&i>=e){s();return}r!=null?r(a,l):setTimeout(a,l)};a()})}function STe(n,t){let e=1,r=-1;for(let s=0;s<n.length;++s)if(n[s]>=0)e*=n[s];else if(n[s]===-1){if(r!==-1)throw Error(`Shapes can only have 1 implicit size. Found -1 at dim ${r} and dim ${s}`);r=s}else if(n[s]<0)throw Error(`Shapes can not be < 0. Found ${n[s]} at dim ${s}`);if(r===-1){if(t>0&&t!==e)throw Error(`Size(${t}) must match the product of shape ${n}`);return n}if(e===0)throw Error(`Cannot infer the missing size in [${n}] when there are 0 elements`);if(t%e!==0)throw Error(`The implicit shape can't be a fractional number. Got ${t} / ${e}`);let o=n.slice();return o[r]=t/e,o}function yr(n,t){let e=t.length;return n=n==null?t.map((r,o)=>o):[].concat(n),O(n.every(r=>r>=-e&&r<e),()=>`All values in axis param must be in range [-${e}, ${e}) but got axis ${n}`),O(n.every(r=>Gc(r)),()=>`All values in axis param must be integers but got axis ${n}`),n.map(r=>r<0?e+r:r)}function yM(n,t){let e=[],r=[],o=t!=null&&Array.isArray(t)&&t.length===0,s=t==null||o?null:yr(t,n).sort(),i=0;for(let a=0;a<n.length;++a){if(s!=null){if(s[i]===a&&n[a]!==1)throw new Error(`Can't squeeze axis ${a} since its dim '${n[a]}' is not 1`);(s[i]==null||s[i]>a)&&n[a]===1&&(e.push(n[a]),r.push(a)),s[i]<=a&&i++}n[a]!==1&&(e.push(n[a]),r.push(a))}return{newShape:e,keptDims:r}}function bM(n,t){return vT(n,t)}function vT(n,t){let e=null;if(n==null||n==="float32")e=new Float32Array(t);else if(n==="int32")e=new Int32Array(t);else if(n==="bool")e=new Uint8Array(t);else if(n==="string")e=new Array(t);else throw new Error(`Unknown data type ${n}`);return e}function vM(n,t){for(let e=0;e<n.length;e++){let r=n[e];if(isNaN(r)||!isFinite(r))throw Error(`A tensor of type ${t} being uploaded contains ${r}.`)}}function wM(n){return n==="bool"||n==="complex64"||n==="float32"||n==="int32"||n==="string"}function TTe(n,t){return!(t==="complex64"||t==="float32"&&n!=="complex64"||t==="int32"&&n!=="float32"&&n!=="complex64"||t==="bool"&&n==="bool")}function Ax(n){if(n==="float32"||n==="int32")return 4;if(n==="complex64")return 8;if(n==="bool")return 1;throw new Error(`Unknown dtype ${n}`)}function CM(n){if(n==null)return 0;let t=0;return n.forEach(e=>t+=e.length),t}function Yi(n){return typeof n=="string"||n instanceof String}function jH(n){return typeof n=="boolean"}function GH(n){return typeof n=="number"}function tf(n){return Array.isArray(n)?tf(n[0]):n instanceof Float32Array?"float32":n instanceof Int32Array||n instanceof Uint8Array||n instanceof Uint8ClampedArray?"int32":GH(n)?"float32":Yi(n)?"string":jH(n)?"bool":"float32"}function ul(n){return!!(n&&n.constructor&&n.call&&n.apply)}function Rx(n,t){for(let e=t;e<n;++e)if(n%e===0)return e;return n}function pl(n){let t=n.length;if(t<2)return[];let e=new Array(t-1);e[t-2]=n[t-1];for(let r=t-3;r>=0;--r)e[r]=e[r+1]*n[r+1];return e}function WH(n,t,e,r=!1){let o=new Array;if(t.length===1){let s=t[0]*(r?2:1);for(let i=0;i<s;i++)o[i]=e[n+i]}else{let s=t[0],i=t.slice(1),a=i.reduce((l,c)=>l*c)*(r?2:1);for(let l=0;l<s;l++)o[l]=WH(n+l*a,i,e,r)}return o}function Ud(n,t,e=!1){if(n.length===0)return t[0];let r=n.reduce((o,s)=>o*s)*(e?2:1);if(r===0)return[];if(r!==t.length)throw new Error(`[${n}] does not match the input size ${t.length}${e?" for a complex tensor":""}.`);return WH(0,n,t,e)}function ETe(n,t){if(Array.isArray(n))return n;if(t==="float32")return n instanceof Float32Array?n:new Float32Array(n);if(t==="int32")return n instanceof Int32Array?n:new Int32Array(n);if(t==="bool"||t==="string")return Uint8Array.from(new Int32Array(n));throw new Error(`Unknown dtype ${t}`)}function Hv(n,t){let e=Mx(n,t);for(let r=0;r<e.length;r++)e[r]=1;return e}function Mx(n,t){if(t==null||t==="float32"||t==="complex64")return new Float32Array(n);if(t==="int32")return new Int32Array(n);if(t==="bool")return new Uint8Array(n);throw new Error(`Unknown data type ${t}`)}function NTe(n,t){let e=n.reduce((r,o)=>r*o,1);if(t==null||t==="float32")return Ud(n,new Float32Array(e));if(t==="int32")return Ud(n,new Int32Array(e));if(t==="bool")return Ud(n,new Uint8Array(e));throw new Error(`Unknown data type ${t}`)}function Bn(n){n.forEach(t=>{O(Number.isInteger(t)&&t>=0,()=>`Tensor must have a shape comprised of positive integers but got shape [${n}].`)})}function DTe(n,t,e){if(t===0)return 0;if(t===1)return n[0];let r=n[n.length-1];for(let o=0;o<n.length-1;++o)r+=e[o]*n[o];return r}function kTe(n,t,e){if(t===0)return[];if(t===1)return[n];let r=new Array(t);for(let o=0;o<r.length-1;++o)r[o]=Math.floor(n/e[o]),n-=r[o]*e[o];return r[r.length-1]=n,r}function Gd(n){return n&&n.then&&typeof n.then=="function"}var Or=F(()=>{"use strict";});function ATe(n){let t={};return n.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(e,...r)=>(RTe(t,r[0],r[1]),r.join("="))),t}function RTe(n,t,e){n[decodeURIComponent(t)]=decodeURIComponent(e||"")}function MTe(n,t){let e=t.toLowerCase();return e==="true"||e==="false"?e==="true":`${+e}`===e?+e:t}function Y(){return wT}function qH(n){wT=n}var HH,Ox,wT,qr=F(()=>{"use strict";Or();HH="tfjsflags",Ox=class{constructor(t){this.global=t,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=ATe,this.populateURLFlags()}setPlatform(t,e){this.platform!=null&&(Y().getBool("IS_TEST")||Y().getBool("PROD")||console.warn(`Platform ${this.platformName} has already been set. Overwriting the platform with ${t}.`)),this.platformName=t,this.platform=e}registerFlag(t,e,r){if(this.flagRegistry[t]={evaluationFn:e,setHook:r},this.urlFlags[t]!=null){let o=this.urlFlags[t];Y().getBool("IS_TEST")||Y().getBool("PROD")||console.warn(`Setting feature override from URL ${t}: ${o}.`),this.set(t,o)}}getAsync(t){return ee(this,null,function*(){return t in this.flags?this.flags[t]:(this.flags[t]=yield this.evaluateFlag(t),this.flags[t])})}get(t){if(t in this.flags)return this.flags[t];let e=this.evaluateFlag(t);if(Gd(e))throw new Error(`Flag ${t} cannot be synchronously evaluated. Please use getAsync() instead.`);return this.flags[t]=e,this.flags[t]}getNumber(t){return this.get(t)}getBool(t){return this.get(t)}getString(t){return this.get(t)}getFlags(){return this.flags}get features(){return this.flags}set(t,e){if(this.flagRegistry[t]==null)throw new Error(`Cannot set flag ${t} as it has not been registered.`);this.flags[t]=e,this.flagRegistry[t].setHook!=null&&this.flagRegistry[t].setHook(e)}evaluateFlag(t){if(this.flagRegistry[t]==null)throw new Error(`Cannot evaluate flag '${t}': no evaluation function found.`);return this.flagRegistry[t].evaluationFn()}setFlags(t){this.flags=Object.assign({},t)}reset(){this.flags={},this.urlFlags={},this.populateURLFlags()}populateURLFlags(){if(typeof this.global>"u"||typeof this.global.location>"u"||typeof this.global.location.search>"u")return;let t=this.getQueryParams(this.global.location.search);HH in t&&t[HH].split(",").forEach(r=>{let[o,s]=r.split(":");this.urlFlags[o]=MTe(o,s)})}};wT=null});function SM(){if(IM==null){let n;if(typeof window<"u")n=window;else if(typeof global<"u")n=global;else if(typeof process<"u")n=process;else if(typeof self<"u")n=self;else throw new Error("Could not find a global object");IM=n}return IM}function OTe(){let n=SM();return n._tfGlobals==null&&(n._tfGlobals=new Map),n._tfGlobals}function qv(n,t){let e=OTe();if(e.has(n))return e.get(n);{let r=t();return e.set(n,r),e.get(n)}}var IM,CT=F(()=>{"use strict";});var Wc,fl,dl,gi,Hc,Wd,Hd,qc,Kc,hl,ml,gl,xl,yl,Xc,qd,Yc,Kd,Zc,Qc,Xd,nf,TM,Yd,Zi,bl,vl,Zd,Jc,eu,tu,Qd,nu,ru,Jd,eh,wl,Cl,th,ou,nh,rh,oh,su,sh,ih,ah,iu,Fx,Px,$x,Il,lh,Sl,ch,Tl,rf,El,au,Nl,uh,ph,fh,Dl,kl,lu,cu,dh,of,_l,Qi,hh,mh,Al,Rl,Ml,uu,sf,af,gh,Ol,Fl,lf,cf,uf,FTe,EM,PTe,pu,xh,$Te,fu,Pl,du,yh,hu,bh,vh,mu,gu,$l,xu,Ll,wh,Bl,yu,pf,Ch,Ih,Sh,bu,vu,wu,Cu,LTe,zl,Iu,Su,Th,Eh,Nh,Dh,kh,Vl,Ul,Tu,Eu,_h,Nu,Ah,jl,Du,Gl,Wl,Rh,Mh,Oh,ku,Hl,_u,ql,Kl,Xl,Yl,Zl,Ql,Au,Ru,Mu,Ou,Fh,Ph,$h,Lh,Bh,Jl,zh,ff,Vh,Uh,jh,Gh,ec,tc,nc,Ji,Wh,Hh,ea,qh,Fu,Pu,BTe,$u,rc,Lx,Kh,df,hf,mf,G=F(()=>{"use strict";Wc="Abs",fl="Acos",dl="Acosh",gi="Add",Hc="AddN",Wd="All",Hd="Any",qc="ArgMax",Kc="ArgMin",hl="Asin",ml="Asinh",gl="Atan",xl="Atanh",yl="Atan2",Xc="AvgPool",qd="AvgPoolGrad",Yc="AvgPool3D",Kd="AvgPool3DGrad",Zc="BatchMatMul",Qc="BatchToSpaceND",Xd="Bincount",nf="BitwiseAnd",TM="BroadcastTo",Yd="BroadcastArgs",Zi="Cast",bl="Ceil",vl="ClipByValue",Zd="Complex",Jc="ComplexAbs",eu="Concat",tu="Conv2D",Qd="Conv2DBackpropFilter",nu="Conv2DBackpropInput",ru="Conv3D",Jd="Conv3DBackpropFilterV2",eh="Conv3DBackpropInputV2",wl="Cos",Cl="Cosh",th="Cumprod",ou="Cumsum",nh="CropAndResize",rh="DenseBincount",oh="DepthToSpace",su="DepthwiseConv2dNative",sh="DepthwiseConv2dNativeBackpropFilter",ih="DepthwiseConv2dNativeBackpropInput",ah="Diag",iu="Dilation2D",Fx="Dilation2DBackpropInput",Px="Dilation2DBackpropFilter",$x="Draw",Il="RealDiv",lh="Einsum",Sl="Elu",ch="EluGrad",Tl="Erf",rf="Equal",El="Exp",au="ExpandDims",Nl="Expm1",uh="FFT",ph="Fill",fh="FlipLeftRight",Dl="Floor",kl="FloorDiv",lu="FusedBatchNorm",cu="GatherV2",dh="GatherNd",of="Greater",_l="GreaterEqual",Qi="Identity",hh="IFFT",mh="Imag",Al="IsFinite",Rl="IsInf",Ml="IsNan",uu="LeakyRelu",sf="Less",af="LessEqual",gh="LinSpace",Ol="Log",Fl="Log1p",lf="LogicalAnd",cf="LogicalNot",uf="LogicalOr",FTe="LogicalXor",EM="LogSoftmax",PTe="LowerBound",pu="LRN",xh="LRNGrad",$Te="MatrixBandPart",fu="Max",Pl="Maximum",du="MaxPool",yh="MaxPoolGrad",hu="MaxPool3D",bh="MaxPool3DGrad",vh="MaxPoolWithArgmax",mu="Mean",gu="Min",$l="Minimum",xu="MirrorPad",Ll="Mod",wh="Multinomial",Bl="Multiply",yu="Neg",pf="NotEqual",Ch="NonMaxSuppressionV3",Ih="NonMaxSuppressionV4",Sh="NonMaxSuppressionV5",bu="OnesLike",vu="OneHot",wu="Pack",Cu="PadV2",LTe="Pool",zl="Pow",Iu="Prelu",Su="Prod",Th="RaggedGather",Eh="RaggedRange",Nh="RaggedTensorToTensor",Dh="Range",kh="Real",Vl="Reciprocal",Ul="Relu",Tu="Reshape",Eu="ResizeNearestNeighbor",_h="ResizeNearestNeighborGrad",Nu="ResizeBilinear",Ah="ResizeBilinearGrad",jl="Relu6",Du="Reverse",Gl="Round",Wl="Rsqrt",Rh="ScatterNd",Mh="TensorScatterUpdate",Oh="SearchSorted",ku="Select",Hl="Selu",_u="Slice",ql="Sin",Kl="Sinh",Xl="Sign",Yl="Sigmoid",Zl="Softplus",Ql="Sqrt",Au="Sum",Ru="SpaceToBatchND",Mu="SplitV",Ou="Softmax",Fh="SparseFillEmptyRows",Ph="SparseReshape",$h="SparseSegmentMean",Lh="SparseSegmentSum",Bh="SparseToDense",Jl="SquaredDifference",zh="Square",ff="StaticRegexReplace",Vh="StridedSlice",Uh="StringNGrams",jh="StringSplit",Gh="StringToHashBucketFast",ec="Sub",tc="Tan",nc="Tanh",Ji="Tile",Wh="TopK",Hh="Transform",ea="Transpose",qh="Unique",Fu="Unpack",Pu="UnsortedSegmentSum",BTe="UpperBound",$u="ZerosLike",rc="Step",Lx="FromPixels",Kh="RotateWithOffset",df="_FusedMatMul",hf="FusedConv2D",mf="FusedDepthwiseConv2D"});function oc(...n){Y().getBool("IS_TEST")||Y().getBool("PROD")||console.warn(...n)}function zTe(...n){Y().getBool("IS_TEST")||Y().getBool("PROD")||console.log(...n)}var IT=F(()=>{"use strict";qr();});function Xh(n,t){let e=DM(n,t);return Bx.get(e)}function ST(n){return Kv.get(n)}function Xv(n){let t=Bx.entries(),e=[];for(;;){let{done:r,value:o}=t.next();if(r)break;let[s,i]=o,[a]=s.split("_");a===n&&e.push(i)}return e}function zx(n){let{kernelName:t,backendName:e}=n,r=DM(t,e);Bx.has(r)&&oc(`The kernel '${t}' for backend '${e}' is already registered`),Bx.set(r,n)}function NM(n){let{kernelName:t}=n;Kv.has(t)&&Y().getBool("DEBUG")&&oc(`Overriding the gradient for '${t}'`),Kv.set(t,n)}function VTe(n,t){let e=DM(n,t);if(!Bx.has(e))throw new Error(`The kernel '${n}' for backend '${t}' is not registered`);Bx.delete(e)}function UTe(n){if(!Kv.has(n))throw new Error(`The gradient '${n}' for backend is not registered`);Kv.delete(n)}function jTe(n,t){Xv(n).forEach(r=>{let o=Object.assign({},r,{backendName:t});zx(o)})}function DM(n,t){return`${t}_${n}`}var Bx,Kv,Yv=F(()=>{"use strict";qr();CT();IT();Bx=qv("kernelRegistry",()=>new Map),Kv=qv("gradRegistry",()=>new Map)});function TT(n){return n instanceof Float32Array||n instanceof Int32Array||n instanceof Uint8Array||n instanceof Uint8ClampedArray}var kM=F(()=>{"use strict";});var s5=hs((uXe,o5)=>{"use strict";o5.exports=Kn;var xi=null;try{xi=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function Kn(n,t,e){this.low=n|0,this.high=t|0,this.unsigned=!!e}Kn.prototype.__isLong__;Object.defineProperty(Kn.prototype,"__isLong__",{value:!0});function Ts(n){return(n&&n.__isLong__)===!0}Kn.isLong=Ts;var XH={},YH={};function Zh(n,t){var e,r,o;return t?(n>>>=0,(o=0<=n&&n<256)&&(r=YH[n],r)?r:(e=Xn(n,(n|0)<0?-1:0,!0),o&&(YH[n]=e),e)):(n|=0,(o=-128<=n&&n<128)&&(r=XH[n],r)?r:(e=Xn(n,n<0?-1:0,!1),o&&(XH[n]=e),e))}Kn.fromInt=Zh;function yi(n,t){if(isNaN(n))return t?Yh:bi;if(t){if(n<0)return Yh;if(n>=e5)return r5}else{if(n<=-QH)return Ss;if(n+1>=QH)return n5}return n<0?yi(-n,t).neg():Xn(n%Ux|0,n/Ux|0,t)}Kn.fromNumber=yi;function Xn(n,t,e){return new Kn(n,t,e)}Kn.fromBits=Xn;var ET=Math.pow;function AM(n,t,e){if(n.length===0)throw Error("empty string");if(n==="NaN"||n==="Infinity"||n==="+Infinity"||n==="-Infinity")return bi;if(typeof t=="number"?(e=t,t=!1):t=!!t,e=e||10,e<2||36<e)throw RangeError("radix");var r;if((r=n.indexOf("-"))>0)throw Error("interior hyphen");if(r===0)return AM(n.substring(1),t,e).neg();for(var o=yi(ET(e,8)),s=bi,i=0;i<n.length;i+=8){var a=Math.min(8,n.length-i),l=parseInt(n.substring(i,i+a),e);if(a<8){var c=yi(ET(e,a));s=s.mul(c).add(yi(l))}else s=s.mul(o),s=s.add(yi(l))}return s.unsigned=t,s}Kn.fromString=AM;function ta(n,t){return typeof n=="number"?yi(n,t):typeof n=="string"?AM(n,t):Xn(n.low,n.high,typeof t=="boolean"?t:n.unsigned)}Kn.fromValue=ta;var ZH=65536,GTe=1<<24,Ux=ZH*ZH,e5=Ux*Ux,QH=e5/2,JH=Zh(GTe),bi=Zh(0);Kn.ZERO=bi;var Yh=Zh(0,!0);Kn.UZERO=Yh;var Vx=Zh(1);Kn.ONE=Vx;var t5=Zh(1,!0);Kn.UONE=t5;var _M=Zh(-1);Kn.NEG_ONE=_M;var n5=Xn(-1,2147483647,!1);Kn.MAX_VALUE=n5;var r5=Xn(-1,-1,!0);Kn.MAX_UNSIGNED_VALUE=r5;var Ss=Xn(0,-2147483648,!1);Kn.MIN_VALUE=Ss;var Ae=Kn.prototype;Ae.toInt=function(){return this.unsigned?this.low>>>0:this.low};Ae.toNumber=function(){return this.unsigned?(this.high>>>0)*Ux+(this.low>>>0):this.high*Ux+(this.low>>>0)};Ae.toString=function(t){if(t=t||10,t<2||36<t)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(Ss)){var e=yi(t),r=this.div(e),o=r.mul(e).sub(this);return r.toString(t)+o.toInt().toString(t)}else return"-"+this.neg().toString(t);for(var s=yi(ET(t,6),this.unsigned),i=this,a="";;){var l=i.div(s),c=i.sub(l.mul(s)).toInt()>>>0,u=c.toString(t);if(i=l,i.isZero())return u+a;for(;u.length<6;)u="0"+u;a=""+u+a}};Ae.getHighBits=function(){return this.high};Ae.getHighBitsUnsigned=function(){return this.high>>>0};Ae.getLowBits=function(){return this.low};Ae.getLowBitsUnsigned=function(){return this.low>>>0};Ae.getNumBitsAbs=function(){if(this.isNegative())return this.eq(Ss)?64:this.neg().getNumBitsAbs();for(var t=this.high!=0?this.high:this.low,e=31;e>0&&!(t&1<<e);e--);return this.high!=0?e+33:e+1};Ae.isZero=function(){return this.high===0&&this.low===0};Ae.eqz=Ae.isZero;Ae.isNegative=function(){return!this.unsigned&&this.high<0};Ae.isPositive=function(){return this.unsigned||this.high>=0};Ae.isOdd=function(){return(this.low&1)===1};Ae.isEven=function(){return(this.low&1)===0};Ae.equals=function(t){return Ts(t)||(t=ta(t)),this.unsigned!==t.unsigned&&this.high>>>31===1&&t.high>>>31===1?!1:this.high===t.high&&this.low===t.low};Ae.eq=Ae.equals;Ae.notEquals=function(t){return!this.eq(t)};Ae.neq=Ae.notEquals;Ae.ne=Ae.notEquals;Ae.lessThan=function(t){return this.comp(t)<0};Ae.lt=Ae.lessThan;Ae.lessThanOrEqual=function(t){return this.comp(t)<=0};Ae.lte=Ae.lessThanOrEqual;Ae.le=Ae.lessThanOrEqual;Ae.greaterThan=function(t){return this.comp(t)>0};Ae.gt=Ae.greaterThan;Ae.greaterThanOrEqual=function(t){return this.comp(t)>=0};Ae.gte=Ae.greaterThanOrEqual;Ae.ge=Ae.greaterThanOrEqual;Ae.compare=function(t){if(Ts(t)||(t=ta(t)),this.eq(t))return 0;var e=this.isNegative(),r=t.isNegative();return e&&!r?-1:!e&&r?1:this.unsigned?t.high>>>0>this.high>>>0||t.high===this.high&&t.low>>>0>this.low>>>0?-1:1:this.sub(t).isNegative()?-1:1};Ae.comp=Ae.compare;Ae.negate=function(){return!this.unsigned&&this.eq(Ss)?Ss:this.not().add(Vx)};Ae.neg=Ae.negate;Ae.add=function(t){Ts(t)||(t=ta(t));var e=this.high>>>16,r=this.high&65535,o=this.low>>>16,s=this.low&65535,i=t.high>>>16,a=t.high&65535,l=t.low>>>16,c=t.low&65535,u=0,p=0,f=0,d=0;return d+=s+c,f+=d>>>16,d&=65535,f+=o+l,p+=f>>>16,f&=65535,p+=r+a,u+=p>>>16,p&=65535,u+=e+i,u&=65535,Xn(f<<16|d,u<<16|p,this.unsigned)};Ae.subtract=function(t){return Ts(t)||(t=ta(t)),this.add(t.neg())};Ae.sub=Ae.subtract;Ae.multiply=function(t){if(this.isZero())return bi;if(Ts(t)||(t=ta(t)),xi){var e=xi.mul(this.low,this.high,t.low,t.high);return Xn(e,xi.get_high(),this.unsigned)}if(t.isZero())return bi;if(this.eq(Ss))return t.isOdd()?Ss:bi;if(t.eq(Ss))return this.isOdd()?Ss:bi;if(this.isNegative())return t.isNegative()?this.neg().mul(t.neg()):this.neg().mul(t).neg();if(t.isNegative())return this.mul(t.neg()).neg();if(this.lt(JH)&&t.lt(JH))return yi(this.toNumber()*t.toNumber(),this.unsigned);var r=this.high>>>16,o=this.high&65535,s=this.low>>>16,i=this.low&65535,a=t.high>>>16,l=t.high&65535,c=t.low>>>16,u=t.low&65535,p=0,f=0,d=0,h=0;return h+=i*u,d+=h>>>16,h&=65535,d+=s*u,f+=d>>>16,d&=65535,d+=i*c,f+=d>>>16,d&=65535,f+=o*u,p+=f>>>16,f&=65535,f+=s*c,p+=f>>>16,f&=65535,f+=i*l,p+=f>>>16,f&=65535,p+=r*u+o*c+s*l+i*a,p&=65535,Xn(d<<16|h,p<<16|f,this.unsigned)};Ae.mul=Ae.multiply;Ae.divide=function(t){if(Ts(t)||(t=ta(t)),t.isZero())throw Error("division by zero");if(xi){if(!this.unsigned&&this.high===-2147483648&&t.low===-1&&t.high===-1)return this;var e=(this.unsigned?xi.div_u:xi.div_s)(this.low,this.high,t.low,t.high);return Xn(e,xi.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?Yh:bi;var r,o,s;if(this.unsigned){if(t.unsigned||(t=t.toUnsigned()),t.gt(this))return Yh;if(t.gt(this.shru(1)))return t5;s=Yh}else{if(this.eq(Ss)){if(t.eq(Vx)||t.eq(_M))return Ss;if(t.eq(Ss))return Vx;var i=this.shr(1);return r=i.div(t).shl(1),r.eq(bi)?t.isNegative()?Vx:_M:(o=this.sub(t.mul(r)),s=r.add(o.div(t)),s)}else if(t.eq(Ss))return this.unsigned?Yh:bi;if(this.isNegative())return t.isNegative()?this.neg().div(t.neg()):this.neg().div(t).neg();if(t.isNegative())return this.div(t.neg()).neg();s=bi}for(o=this;o.gte(t);){r=Math.max(1,Math.floor(o.toNumber()/t.toNumber()));for(var a=Math.ceil(Math.log(r)/Math.LN2),l=a<=48?1:ET(2,a-48),c=yi(r),u=c.mul(t);u.isNegative()||u.gt(o);)r-=l,c=yi(r,this.unsigned),u=c.mul(t);c.isZero()&&(c=Vx),s=s.add(c),o=o.sub(u)}return s};Ae.div=Ae.divide;Ae.modulo=function(t){if(Ts(t)||(t=ta(t)),xi){var e=(this.unsigned?xi.rem_u:xi.rem_s)(this.low,this.high,t.low,t.high);return Xn(e,xi.get_high(),this.unsigned)}return this.sub(this.div(t).mul(t))};Ae.mod=Ae.modulo;Ae.rem=Ae.modulo;Ae.not=function(){return Xn(~this.low,~this.high,this.unsigned)};Ae.and=function(t){return Ts(t)||(t=ta(t)),Xn(this.low&t.low,this.high&t.high,this.unsigned)};Ae.or=function(t){return Ts(t)||(t=ta(t)),Xn(this.low|t.low,this.high|t.high,this.unsigned)};Ae.xor=function(t){return Ts(t)||(t=ta(t)),Xn(this.low^t.low,this.high^t.high,this.unsigned)};Ae.shiftLeft=function(t){return Ts(t)&&(t=t.toInt()),(t&=63)===0?this:t<32?Xn(this.low<<t,this.high<<t|this.low>>>32-t,this.unsigned):Xn(0,this.low<<t-32,this.unsigned)};Ae.shl=Ae.shiftLeft;Ae.shiftRight=function(t){return Ts(t)&&(t=t.toInt()),(t&=63)===0?this:t<32?Xn(this.low>>>t|this.high<<32-t,this.high>>t,this.unsigned):Xn(this.high>>t-32,this.high>=0?0:-1,this.unsigned)};Ae.shr=Ae.shiftRight;Ae.shiftRightUnsigned=function(t){if(Ts(t)&&(t=t.toInt()),t&=63,t===0)return this;var e=this.high;if(t<32){var r=this.low;return Xn(r>>>t|e<<32-t,e>>>t,this.unsigned)}else return t===32?Xn(e,0,this.unsigned):Xn(e>>>t-32,0,this.unsigned)};Ae.shru=Ae.shiftRightUnsigned;Ae.shr_u=Ae.shiftRightUnsigned;Ae.toSigned=function(){return this.unsigned?Xn(this.low,this.high,!1):this};Ae.toUnsigned=function(){return this.unsigned?this:Xn(this.low,this.high,!0)};Ae.toBytes=function(t){return t?this.toBytesLE():this.toBytesBE()};Ae.toBytesLE=function(){var t=this.high,e=this.low;return[e&255,e>>>8&255,e>>>16&255,e>>>24,t&255,t>>>8&255,t>>>16&255,t>>>24]};Ae.toBytesBE=function(){var t=this.high,e=this.low;return[t>>>24,t>>>16&255,t>>>8&255,t&255,e>>>24,e>>>16&255,e>>>8&255,e&255]};Kn.fromBytes=function(t,e,r){return r?Kn.fromBytesLE(t,e):Kn.fromBytesBE(t,e)};Kn.fromBytesLE=function(t,e){return new Kn(t[0]|t[1]<<8|t[2]<<16|t[3]<<24,t[4]|t[5]<<8|t[6]<<16|t[7]<<24,e)};Kn.fromBytesBE=function(t,e){return new Kn(t[4]<<24|t[5]<<16|t[6]<<8|t[7],t[0]<<24|t[1]<<16|t[2]<<8|t[3],e)}});function Zv(n){return Jh.fromString(n,!0,16)}function RM(n){return n.xor(n.shru(47))}function l5(n,t,e){let r=n.slice(t,t+e);return Jh.fromBytes(Array.from(r),!0,!0)}function zn(n,t){return l5(n,t,8)}function i5(n,t){return l5(n,t,4)}function Kr(n,t){return t===0?n:n.shru(t).or(n.shl(64-t))}function gf(n,t,e=Zv("9ddfea08eb382d69")){let r=n.xor(t).mul(e);r=r.xor(r.shru(47));let o=t.xor(r).mul(e);return o=o.xor(o.shru(47)),o=o.mul(e),o}function WTe(n,t,e,r,o,s){o=o.add(n),s=Kr(s.add(o).add(r),21);let i=o;return o=o.add(t),o=o.add(e),s=s.add(Kr(o,44)),[o.add(r),s.add(i)]}function NT(n,t,e,r){return WTe(zn(n,t),zn(n,t+8),zn(n,t+16),zn(n,t+24),e,r)}function HTe(n,t=n.length){if(t>=8){let e=Mo.add(t*2),r=zn(n,0).add(Mo),o=zn(n,t-8),s=Kr(o,37).mul(e).add(r),i=Kr(r,25).add(o).mul(e);return gf(s,i,e)}if(t>=4){let e=Mo.add(t*2),r=i5(n,0);return gf(r.shl(3).add(t),i5(n,t-4),e)}if(t>0){let e=n[0],r=n[t>>1],o=n[t-1],s=e+(r<<8),i=t+(o<<2);return RM(Mo.mul(s).xor(a5.mul(i))).mul(Mo)}return Mo}function qTe(n,t=n.length){let e=Mo.add(t*2),r=zn(n,0).mul(Qh),o=zn(n,8),s=zn(n,t-8).mul(e),i=zn(n,t-16).mul(Mo);return gf(Kr(r.add(o),43).add(Kr(s,30)).add(i),r.add(Kr(o.add(Mo),18)).add(s),e)}function KTe(n,t=n.length){let e=Mo.add(t*2),r=zn(n,0).mul(Mo),o=zn(n,8),s=zn(n,t-8).mul(e),i=zn(n,t-16).mul(Mo),a=Kr(r.add(o),43).add(Kr(s,30)).add(i),l=gf(a,r.add(Kr(o.add(Mo),18)).add(s),e),c=zn(n,16).mul(e),u=zn(n,24),p=a.add(zn(n,t-32)).mul(e),f=l.add(zn(n,t-24)).mul(e);return gf(Kr(c.add(u),43).add(Kr(p,30)).add(f),c.add(Kr(u.add(r),18)).add(p),e)}function XTe(n,t=n.length){let e=Jh.fromNumber(81,!0);if(t<=32)return t<=16?HTe(n,t):qTe(n,t);if(t<=64)return KTe(n,t);let r=e,o=e.mul(Qh).add(113),s=RM(o.mul(Mo).add(113)).mul(Mo),i=[Jh.UZERO,Jh.UZERO],a=[Jh.UZERO,Jh.UZERO];r=r.mul(Mo).add(zn(n,0));let l=0,c=(t-1>>6)*64,u=c+(t-1&63)-63;do r=Kr(r.add(o).add(i[0]).add(zn(n,l+8)),37).mul(Qh),o=Kr(o.add(i[1]).add(zn(n,l+48)),42).mul(Qh),r=r.xor(a[1]),o=o.add(i[0]).add(zn(n,l+40)),s=Kr(s.add(a[0]),33).mul(Qh),i=NT(n,l,i[1].mul(Qh),r.add(a[0])),a=NT(n,l+32,s.add(a[1]),o.add(zn(n,l+16))),[s,r]=[r,s],l+=64;while(l!==c);let p=Qh.add(s.and(255).shl(1));return l=u,a[0]=a[0].add(t-1&63),i[0]=i[0].add(a[0]),a[0]=a[0].add(i[0]),r=Kr(r.add(o).add(i[0]).add(zn(n,l+8)),37).mul(p),o=Kr(o.add(i[1]).add(zn(n,l+48)),42).mul(p),r=r.xor(a[1].mul(9)),o=o.add(i[0].mul(9).add(zn(n,l+40))),s=Kr(s.add(a[0]),33).mul(p),i=NT(n,l,i[1].mul(p),r.add(a[0])),a=NT(n,l+32,s.add(a[1]),o.add(zn(n,l+16))),[s,r]=[r,s],gf(gf(i[0],a[0],p).add(RM(o).mul(a5)).add(s),gf(i[1],a[1],p).add(r),p)}var MM,Jh,a5,Qh,Mo,c5=F(()=>{"use strict";MM=ad(s5());Jh=MM.default||MM;a5=Zv("c3a5c85c97cb3127"),Qh=Zv("b492b66fbe98f273"),Mo=Zv("9ae16a3b2f90404f")});var C={};_t(C,{arraysEqual:()=>Ro,arraysEqualWithNull:()=>xM,assert:()=>O,assertNonNegativeIntegerDimensions:()=>Bn,assertNonNull:()=>qs,assertShapesMatch:()=>En,bytesFromStringArray:()=>CM,bytesPerElement:()=>Ax,checkConversionForErrors:()=>vM,clamp:()=>_x,computeStrides:()=>pl,convertBackendValuesAndArrayBuffer:()=>ETe,createScalarValue:()=>YTe,createShuffledIndices:()=>CTe,decodeString:()=>Gx,distSquared:()=>yTe,encodeString:()=>xf,fetch:()=>QTe,fingerPrint64:()=>XTe,flatten:()=>na,getArrayFromDType:()=>vT,getTypedArrayFromDType:()=>bM,hasEncodingLoss:()=>TTe,hexToLong:()=>Zv,indexToLoc:()=>kTe,inferDtype:()=>tf,inferFromImplicitShape:()=>STe,isBoolean:()=>jH,isFunction:()=>ul,isInt:()=>Gc,isNumber:()=>GH,isPromise:()=>Gd,isScalarShape:()=>bTe,isString:()=>Yi,isTypedArray:()=>ir,isValidDtype:()=>wM,locToIndex:()=>DTe,makeOnesTypedArray:()=>Hv,makeZerosNestedTypedArray:()=>NTe,makeZerosTypedArray:()=>Mx,nearestDivisor:()=>Rx,nearestLargerEven:()=>mTe,now:()=>em,parseAxisParam:()=>yr,randUniform:()=>xTe,repeatedTry:()=>ITe,rightPad:()=>jd,shuffle:()=>UH,shuffleCombo:()=>hTe,sizeFromShape:()=>yt,sizeToSquarishShape:()=>wTe,squeezeShape:()=>yM,sum:()=>gTe,swap:()=>bT,tanh:()=>vTe,toNestedArray:()=>Ud,toTypedArray:()=>jx});function YTe(n,t){return t==="string"?xf(n):jx([n],t)}function ZTe(n,t){return n instanceof Float32Array&&t==="float32"||n instanceof Int32Array&&t==="int32"||n instanceof Uint8Array&&t==="bool"}function jx(n,t){if(t==="string")throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(n)&&(n=na(n)),Y().getBool("DEBUG")&&vM(n,t),ZTe(n,t))return n;if(t==null||t==="float32"||t==="complex64")return new Float32Array(n);if(t==="int32")return new Int32Array(n);if(t==="bool"){let e=new Uint8Array(n.length);for(let r=0;r<e.length;++r)Math.round(n[r])!==0&&(e[r]=1);return e}else throw new Error(`Unknown data type ${t}`)}function em(){return Y().platform.now()}function QTe(n,t){return Y().platform.fetch(n,t)}function xf(n,t="utf-8"){return t=t||"utf-8",Y().platform.encode(n,t)}function Gx(n,t="utf-8"){return t=t||"utf-8",Y().platform.decode(n,t)}function ir(n){return Y().platform.isTypedArray!=null?Y().platform.isTypedArray(n):TT(n)}function na(n,t=[],e=!1){if(t==null&&(t=[]),typeof n=="boolean"||typeof n=="number"||typeof n=="string"||Gd(n)||n==null||ir(n)&&e)t.push(n);else if(Array.isArray(n)||ir(n))for(let r=0;r<n.length;++r)na(n[r],t,e);else{let r=-1;for(let o of Object.keys(n))/^([1-9]+[0-9]*|0)$/.test(o)&&(r=Math.max(r,Number(o)));for(let o=0;o<=r;o++)na(n[o],t,e)}return t}var ce=F(()=>{"use strict";qr();kM();Or();Or();c5();});function JTe(n,t,e){if(t!=="float32")return!1;for(let r=0;r<n.length;r++){let o=n[r];if(isNaN(o)||!isFinite(o))return console.warn(`Found ${o} in the result of '${e}'`),!0}return!1}var DT,OM,u5=F(()=>{"use strict";qr();ce();DT=class{constructor(t,e){this.backendTimer=t,this.logger=e,e==null&&(this.logger=new OM)}profileKernel(t,e,r){let o,s=()=>{o=r()},i,a=em();if(this.backendTimer.timerAvailable())i=this.backendTimer.time(s);else{s();for(let c of o)c.dataSync();i=Promise.resolve({kernelMs:em()-a})}if(Y().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(let c=0;c<o.length;c++){let u=o[c];u.data().then(p=>{JTe(p,u.dtype,t)})}return{kernelName:t,outputs:o,inputs:e,timeMs:i.then(c=>c.kernelMs),extraInfo:i.then(c=>c.getExtraProfileInfo!=null?c.getExtraProfileInfo():"")}}logKernelProfile(t){let{kernelName:e,outputs:r,timeMs:o,inputs:s,extraInfo:i}=t;r.forEach(a=>{Promise.all([a.data(),o,i]).then(l=>{this.logger.logKernelProfile(e,a,l[0],l[1],s,l[2])})})}};OM=class{logKernelProfile(t,e,r,o,s,i){let a=typeof o=="number"?jd(`${o}ms`,9):o.error,l=jd(t,25),c=e.rank,u=e.size,p=jd(e.shape.toString(),14),f="";for(let d in s){let h=s[d];if(h!=null){let m=h.shape||e.shape,g=m.length;f+=`${d}: ${g}D ${g>0?m:""} `}}console.log(`%c${l}	%c${a}	%c${c}D ${p}	%c${u}	%c${f}	%c${i}`,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}}});function p5(n,t,e){let r={},o={};for(let l=0;l<t.length;l++)r[t[l].id]=!0;for(let l=0;l<n.length;l++){let c=n[l],u=c.inputs;for(let p in u){let f=u[p],d=!1;for(let h=0;h<t.length;h++)if(r[f.id]){c.outputs.forEach(m=>r[m.id]=!0),d=!0,o[c.id]=!0;break}if(d)break}}let s={};s[e.id]=!0;let i={};for(let l=n.length-1;l>=0;l--){let c=n[l],u=c.inputs;for(let p=0;p<c.outputs.length;p++)if(s[c.outputs[p].id]){for(let f in u)s[u[f].id]=!0,i[c.id]=!0;break}}let a=[];for(let l=0;l<n.length;l++){let c=n[l];if(o[c.id]&&i[c.id]){let u={};for(let f in c.inputs){let d=c.inputs[f];r[d.id]&&(u[f]=d)}let p=Object.assign({},c);p.inputs=u,p.outputs=c.outputs,a.push(p)}}return a}function f5(n,t,e,r){for(let o=t.length-1;o>=0;o--){let s=t[o],i=[];if(s.outputs.forEach(l=>{let c=n[l.id];c!=null?i.push(c):i.push(null)}),s.gradient==null)throw new Error(`Cannot compute gradient: gradient function not found for ${s.kernelName}.`);let a=s.gradient(i);for(let l in s.inputs){if(!(l in a))throw new Error(`Cannot backprop through input ${l}. Available gradients found: ${Object.keys(a)}.`);let c=e(()=>a[l]());if(c.dtype!=="float32")throw new Error(`Error in gradient for op ${s.kernelName}. The gradient of input ${l} must have 'float32' dtype, but has '${c.dtype}'`);let u=s.inputs[l];if(!Ro(c.shape,u.shape))throw new Error(`Error in gradient for op ${s.kernelName}. The gradient of input '${l}' has shape '${c.shape}', which does not match the shape of the input '${u.shape}'`);if(n[u.id]==null)n[u.id]=c;else{let p=n[u.id];n[u.id]=r(p,c),p.dispose()}}}}var d5=F(()=>{"use strict";ce();});function m5(n,t,e,r){let o=pl(t),s=e1e(n,t,e,o),i=t.length,a=kT(n,t,e,o,s),l=["Tensor"];return r&&(l.push(`  dtype: ${e}`),l.push(`  rank: ${i}`),l.push(`  shape: [${t}]`),l.push("  values:")),l.push(a.map(c=>"    "+c).join(`
`)),l.join(`
`)}function e1e(n,t,e,r){let o=yt(t),s=r[r.length-1],i=new Array(s).fill(0),a=t.length,l=e==="complex64"?e0(n):n;if(a>1)for(let c=0;c<o/s;c++){let u=c*s;for(let p=0;p<s;p++)i[p]=Math.max(i[p],Jv(l[u+p],0,e).length)}return i}function Jv(n,t,e){let r;return Array.isArray(n)?r=`${parseFloat(n[0].toFixed(FM))} + ${parseFloat(n[1].toFixed(FM))}j`:Yi(n)?r=`'${n}'`:e==="bool"?r=g5(n):r=parseFloat(n.toFixed(FM)).toString(),jd(r,t)}function g5(n){return n===0?"false":"true"}function kT(n,t,e,r,o,s=!0){let i=e==="complex64"?2:1,a=t[0],l=t.length;if(l===0){if(e==="complex64"){let m=e0(n);return[Jv(m[0],0,e)]}return e==="bool"?[g5(n[0])]:[n[0].toString()]}if(l===1){if(a>h5){let g=Qv*i,x=Array.from(n.slice(0,g)),b=Array.from(n.slice((a-Qv)*i,a*i));return e==="complex64"&&(x=e0(x),b=e0(b)),["["+x.map((w,v)=>Jv(w,o[v],e)).join(", ")+", ..., "+b.map((w,v)=>Jv(w,o[a-Qv+v],e)).join(", ")+"]"]}return["["+(e==="complex64"?e0(n):Array.from(n)).map((g,x)=>Jv(g,o[x],e)).join(", ")+"]"]}let c=t.slice(1),u=r.slice(1),p=r[0]*i,f=[];if(a>h5){for(let m=0;m<Qv;m++){let g=m*p,x=g+p;f.push(...kT(n.slice(g,x),c,e,u,o,!1))}f.push("...");for(let m=a-Qv;m<a;m++){let g=m*p,x=g+p;f.push(...kT(n.slice(g,x),c,e,u,o,m===a-1))}}else for(let m=0;m<a;m++){let g=m*p,x=g+p;f.push(...kT(n.slice(g,x),c,e,u,o,m===a-1))}let d=l===2?",":"";f[0]="["+(a>0?f[0]+d:"");for(let m=1;m<f.length-1;m++)f[m]=" "+f[m]+d;let h=`,
`;for(let m=2;m<l;m++)h+=`
`;return f[f.length-1]=" "+f[f.length-1]+"]"+(s?"":h),f}function e0(n){let t=[];for(let e=0;e<n.length;e+=2)t.push([n[e],n[e+1]]);return t}var h5,Qv,FM,x5=F(()=>{"use strict";ce();h5=20,Qv=3,FM=7});function y5(n){ra=n}function b5(n){Wx=n}function v5(n){t1e=n}function U(){return qv("Tensor",()=>tt)}var Pt,ra,Wx,t1e,tt,sc,ue=F(()=>{"use strict";CT();x5();ce();ce();Pt=class{constructor(t,e,r){if(this.dtype=e,this.shape=t.slice(),this.size=yt(t),r!=null){let o=r.length;O(o===this.size,()=>`Length of values '${o}' does not match the size inferred by the shape '${this.size}'.`)}if(e==="complex64")throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=r||vT(e,this.size),this.strides=pl(t)}set(t,...e){e.length===0&&(e=[0]),O(e.length===this.rank,()=>`The number of provided coordinates (${e.length}) must match the rank (${this.rank})`);let r=this.locToIndex(e);this.values[r]=t}get(...t){t.length===0&&(t=[0]);let e=0;for(let o of t){if(o<0||o>=this.shape[e]){let s=`Requested out of range element at ${t}.   Buffer shape=${this.shape}`;throw new Error(s)}e++}let r=t[t.length-1];for(let o=0;o<t.length-1;++o)r+=this.strides[o]*t[o];return this.values[r]}locToIndex(t){if(this.rank===0)return 0;if(this.rank===1)return t[0];let e=t[t.length-1];for(let r=0;r<t.length-1;++r)e+=this.strides[r]*t[r];return e}indexToLoc(t){if(this.rank===0)return[];if(this.rank===1)return[t];let e=new Array(this.shape.length);for(let r=0;r<e.length-1;++r)e[r]=Math.floor(t/this.strides[r]),t-=e[r]*this.strides[r];return e[e.length-1]=t,e}get rank(){return this.shape.length}toTensor(){return ra().makeTensor(this.values,this.shape,this.dtype)}},ra=null,Wx=null,t1e=null;tt=class{constructor(t,e,r,o){this.kept=!1,this.isDisposedInternal=!1,this.shape=t.slice(),this.dtype=e||"float32",this.size=yt(t),this.strides=pl(t),this.dataId=r,this.id=o,this.rankType=this.rank<5?this.rank.toString():"higher"}get rank(){return this.shape.length}buffer(){return ee(this,null,function*(){let t=yield this.data();return Wx.buffer(this.shape,this.dtype,t)})}bufferSync(){return Wx.buffer(this.shape,this.dtype,this.dataSync())}array(){return ee(this,null,function*(){let t=yield this.data();return Ud(this.shape,t,this.dtype==="complex64")})}arraySync(){return Ud(this.shape,this.dataSync(),this.dtype==="complex64")}data(){return ee(this,null,function*(){this.throwIfDisposed();let t=ra().read(this.dataId);if(this.dtype==="string"){let e=yield t;try{return e.map(r=>Gx(r))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}}return t})}dataToGPU(t){return this.throwIfDisposed(),ra().readToGPU(this.dataId,t)}dataSync(){this.throwIfDisposed();let t=ra().readSync(this.dataId);if(this.dtype==="string")try{return t.map(e=>Gx(e))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return t}bytes(){return ee(this,null,function*(){this.throwIfDisposed();let t=yield ra().read(this.dataId);return this.dtype==="string"?t:new Uint8Array(t.buffer)})}dispose(){this.isDisposed||(this.kerasMask&&this.kerasMask.dispose(),ra().disposeTensor(this),this.isDisposedInternal=!0)}get isDisposed(){return this.isDisposedInternal}throwIfDisposed(){if(this.isDisposed)throw new Error("Tensor is disposed.")}print(t=!1){return Wx.print(this,t)}clone(){return this.throwIfDisposed(),Wx.clone(this)}toString(t=!1){let e=this.dataSync();return m5(e,this.shape,this.dtype,t)}cast(t){return this.throwIfDisposed(),Wx.cast(this,t)}variable(t=!0,e,r){return this.throwIfDisposed(),ra().makeVariable(this,t,e,r)}};Object.defineProperty(tt,Symbol.hasInstance,{value:n=>!!n&&n.data!=null&&n.dataSync!=null&&n.throwIfDisposed!=null});U();sc=class extends tt{constructor(t,e,r,o){super(t.shape,t.dtype,t.dataId,o),this.trainable=e,this.name=r}assign(t){if(t.dtype!==this.dtype)throw new Error(`dtype of the new value (${t.dtype}) and previous value (${this.dtype}) must match`);if(!Ro(t.shape,this.shape))throw new Error(`shape of the new value (${t.shape}) and previous value (${this.shape}) must match`);ra().disposeTensor(this),this.dataId=t.dataId,ra().incRef(this,null)}dispose(){ra().disposeVariable(this),this.isDisposedInternal=!0}};Object.defineProperty(sc,Symbol.hasInstance,{value:n=>n instanceof tt&&n.assign!=null&&n.assign instanceof Function})});function ar(n,t){if(n==="string"||t==="string"){if(n==="string"&&t==="string")return"string";throw new Error(`Can not upcast ${n} with ${t}`)}return n1e[n][t]}function yf(n){return ar(n,"int32")}function _T(n){return n!=null&&typeof n=="object"&&"texture"in n&&n.texture instanceof WebGLTexture}function AT(n){return typeof GPUBuffer<"u"&&n!=null&&typeof n=="object"&&"buffer"in n&&n.buffer instanceof GPUBuffer}var PM,w5,C5,I5,S5,n1e,Hx=F(()=>{"use strict";PM=function(n){return n.R0="R0",n.R1="R1",n.R2="R2",n.R3="R3",n.R4="R4",n.R5="R5",n.R6="R6",n}(PM||{}),w5=function(n){return n.float32="float32",n.int32="int32",n.bool="int32",n.complex64="complex64",n}(w5||{}),C5=function(n){return n.float32="float32",n.int32="int32",n.bool="bool",n.complex64="complex64",n}(C5||{}),I5=function(n){return n.float32="float32",n.int32="float32",n.bool="float32",n.complex64="complex64",n}(I5||{}),S5=function(n){return n.float32="complex64",n.int32="complex64",n.bool="complex64",n.complex64="complex64",n}(S5||{}),n1e={float32:I5,int32:w5,bool:C5,complex64:S5}});var RT={};_t(RT,{assertTypesMatch:()=>$M,getTensorsInContainer:()=>t0,isTensorInList:()=>r1e,makeTypesMatch:()=>bt});function bt(n,t){if(n.dtype===t.dtype)return[n,t];let e=ar(n.dtype,t.dtype);return[n.cast(e),t.cast(e)]}function $M(n,t){O(n.dtype===t.dtype,()=>`The dtypes of the first(${n.dtype}) and second(${t.dtype}) input must match`)}function r1e(n,t){return t.some(e=>e.id===n.id)}function t0(n){let t=[];return T5(n,t,new Set),t}function T5(n,t,e){if(n==null)return;if(n instanceof tt){t.push(n);return}if(!o1e(n))return;let r=n;for(let o in r){let s=r[o];e.has(s)||(e.add(s),T5(s,t,e))}}function o1e(n){return Array.isArray(n)||typeof n=="object"}var Vn=F(()=>{"use strict";ue();Hx();ce();});function LM(n){return n.kernelName!=null}function i1e(n){let t=Hv(yt(n),"float32");return R.makeTensor(t,n,"float32")}function BM(){let n=SM();if(n._tfengine==null){let t=new Ox(n);n._tfengine=new s1e(t)}return qH(n._tfengine.ENV),y5(()=>n._tfengine),n._tfengine}function a1e(n,t){let e={a:n,b:t};return R.runKernel(gi,e)}var MT,s1e,R,oe=F(()=>{"use strict";gM();qr();CT();G();Yv();IT();u5();d5();ue();Vn();ce();ce();MT=class{constructor(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map(t=>t.name)))}}}dispose(){for(let t in this.registeredVariables)this.registeredVariables[t].dispose()}},s1e=(()=>{class n{constructor(e){this.ENV=e,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new MT}ready(){return ee(this,null,function*(){if(this.pendingBackendInit!=null)return this.pendingBackendInit.then(()=>{});if(this.backendInstance!=null)return;let e=this.getSortedBackends();for(let r=0;r<e.length;r++){let o=e[r];if(yield this.initializeBackend(o).success){yield this.setBackend(o);return}}throw new Error("Could not initialize any backends, all backend initializations failed.")})}get backend(){if(this.pendingBackendInit!=null)throw new Error(`Backend '${this.backendName}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);if(this.backendInstance==null){let{name:e,asyncInit:r}=this.initializeBackendsAndReturnBest();if(r)throw new Error(`The highest priority backend '${e}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);this.setBackend(e)}return this.backendInstance}backendNames(){return Object.keys(this.registryFactory)}findBackend(e){if(!(e in this.registry))if(e in this.registryFactory){let{asyncInit:r}=this.initializeBackend(e);if(r)return null}else return null;return this.registry[e]}findBackendFactory(e){return e in this.registryFactory?this.registryFactory[e].factory:null}registerBackend(e,r,o=1){return e in this.registryFactory?(oc(`${e} backend was already registered. Reusing existing backend factory.`),!1):(this.registryFactory[e]={factory:r,priority:o},!0)}setBackend(e){return ee(this,null,function*(){if(this.registryFactory[e]==null)throw new Error(`Backend name '${e}' not found in registry`);if(this.backendName=e,this.registry[e]==null){this.backendInstance=null;let{success:r,asyncInit:o}=this.initializeBackend(e);if(!(o?yield r:r))return!1}return this.backendInstance=this.registry[e],this.setupRegisteredKernels(),this.profiler=new DT(this.backendInstance),!0})}setupRegisteredKernels(){Xv(this.backendName).forEach(r=>{r.setupFunc!=null&&r.setupFunc(this.backendInstance)})}disposeRegisteredKernels(e){Xv(e).forEach(o=>{o.disposeFunc!=null&&o.disposeFunc(this.registry[e])})}initializeBackend(e){let r=this.registryFactory[e];if(r==null)throw new Error(`Cannot initialize backend ${e}, no registration found.`);try{let o=r.factory();if(o&&!(o instanceof cl)&&typeof o.then=="function"){let s=++this.pendingBackendInitId,i=o.then(a=>s<this.pendingBackendInitId?!1:(this.registry[e]=a,this.pendingBackendInit=null,!0)).catch(a=>(s<this.pendingBackendInitId||(this.pendingBackendInit=null,oc(`Initialization of backend ${e} failed`),oc(a.stack||a.message)),!1));return this.pendingBackendInit=i,{success:i,asyncInit:!0}}else return this.registry[e]=o,{success:!0,asyncInit:!1}}catch(o){return oc(`Initialization of backend ${e} failed`),oc(o.stack||o.message),{success:!1,asyncInit:!1}}}removeBackend(e){if(!(e in this.registryFactory))throw new Error(`${e} backend not found in registry`);this.backendName===e&&this.pendingBackendInit!=null&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}getSortedBackends(){if(Object.keys(this.registryFactory).length===0)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((e,r)=>this.registryFactory[r].priority-this.registryFactory[e].priority)}initializeBackendsAndReturnBest(){let e=this.getSortedBackends();for(let r=0;r<e.length;r++){let o=e[r],{success:s,asyncInit:i}=this.initializeBackend(o);if(i||s)return{name:o,asyncInit:i}}throw new Error("Could not initialize any backends, all backend initializations failed.")}moveData(e,r){let o=this.state.tensorInfo.get(r),s=o.backend,i=this.readSync(r),a=s.refCount(r);s.disposeData(r,!0),o.backend=e,e.move(r,i,o.shape,o.dtype,a),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}tidy(e,r){let o=null;if(r==null){if(typeof e!="function")throw new Error("Please provide a function to tidy()");r=e}else{if(typeof e!="string"&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if(typeof r!="function")throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");o=e}let s;return this.scopedRun(()=>this.startScope(o),()=>this.endScope(s),()=>(s=r(),s instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),s))}scopedRun(e,r,o){e();try{let s=o();return r(),s}catch(s){throw r(),s}}nextTensorId(){return n.nextTensorId++}nextVariableId(){return n.nextVariableId++}clone(e){let r=R.runKernel(Qi,{x:e}),o={x:e},s=a=>({x:()=>{let l="float32",c={x:a},u={dtype:l};return R.runKernel(Zi,c,u)}}),i=[];return this.addTapeNode(this.state.activeScope.name,o,[r],s,i,{}),r}runKernel(e,r,o){if(this.backendName==null&&this.backend,!(Xh(e,this.backendName)!=null))throw new Error(`Kernel '${e}' not registered for backend '${this.backendName}'`);return this.runKernelFunc({kernelName:e,inputs:r,attrs:o})}shouldCheckForMemLeaks(){return this.ENV.getBool("IS_TEST")}checkKernelForMemLeak(e,r,o){let s=this.backend.numDataIds(),i=0;o.forEach(c=>{i+=c.dtype==="complex64"?3:1});let a=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],l=s-r-i-a;if(l>0)throw new Error(`Backend '${this.backendName}' has an internal memory leak (${l} data ids) after running '${e}'`)}runKernelFunc(e){let r,o=[],s=this.isTapeOn(),i=this.state.numBytes,a=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);let l;this.backendName==null&&this.backend;let c,u=LM(e)?e.kernelName:this.state.activeScope!=null?this.state.activeScope.name:"";if(LM(e)){let{kernelName:m,inputs:g,attrs:x}=e;this.backendName==null&&this.backend;let b=Xh(m,this.backendName);O(b!=null,()=>`Cannot find registered kernel '${m}' for backend '${this.backendName}'`),l=()=>{let w=this.backend.numDataIds();c=b.kernelFunc({inputs:g,attrs:x,backend:this.backend});let v=Array.isArray(c)?c:[c];this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(m,w,v);let S=v.map(k=>k.rank!=null?k:this.makeTensorFromTensorInfo(k));if(s){let k=this.getTensorsForGradient(m,g,S);o=this.saveTensorsForBackwardMode(k)}return S}}else{let{forwardFunc:m}=e,g=x=>{s&&(o=x.map(b=>this.keep(this.clone(b))))};l=()=>{let x=this.backend.numDataIds();c=this.tidy(()=>m(this.backend,g));let b=Array.isArray(c)?c:[c];return this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(u,x,b),b}}let{inputs:p,attrs:f}=e,d=LM(e)?null:e.backwardsFunc,h;return this.scopedRun(()=>this.state.kernelDepth++,()=>this.state.kernelDepth--,()=>{!this.ENV.getBool("DEBUG")&&!this.state.profiling?r=l():(h=this.profiler.profileKernel(u,p,()=>l()),this.ENV.getBool("DEBUG")&&this.profiler.logKernelProfile(h),r=h.outputs)}),s&&this.addTapeNode(u,p,r,d,o,f),this.state.profiling&&this.state.activeProfile.kernels.push({name:u,bytesAdded:this.state.numBytes-i,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-a,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(p).map(m=>p[m]!=null?p[m].shape:null),outputShapes:r.map(m=>m.shape),kernelTimeMs:h.timeMs,extraInfo:h.extraInfo}),Array.isArray(c)?r:r[0]}saveTensorsForBackwardMode(e){return e.map(o=>this.keep(this.clone(o)))}getTensorsForGradient(e,r,o){let s=ST(e);if(s!=null){let i=s.inputsToSave||[],a=s.outputsToSave||[],l;s.saveAllInputs?(O(Array.isArray(r),()=>"saveAllInputs is true, expected inputs to be an array."),l=Object.keys(r).map(u=>r[u])):l=i.map(u=>r[u]);let c=o.filter((u,p)=>a[p]);return l.concat(c)}return[]}makeTensor(e,r,o,s){if(e==null)throw new Error("Values passed to engine.makeTensor() are null");o=o||"float32",s=s||this.backend;let i=e;o==="string"&&Yi(e[0])&&(i=e.map(c=>xf(c)));let a=s.write(i,r,o),l=new tt(r,o,a,this.nextTensorId());if(this.trackTensor(l,s),o==="string"){let c=this.state.tensorInfo.get(a),u=CM(i);this.state.numBytes+=u-c.bytes,c.bytes=u}return l}makeTensorFromDataId(e,r,o,s){o=o||"float32";let i={dataId:e,shape:r,dtype:o};return this.makeTensorFromTensorInfo(i,s)}makeTensorFromTensorInfo(e,r){let{dataId:o,shape:s,dtype:i}=e,a=new tt(s,i,o,this.nextTensorId());return this.trackTensor(a,r),a}makeVariable(e,r=!0,o,s){o=o||this.nextVariableId().toString(),s!=null&&s!==e.dtype&&(e=e.cast(s));let i=new sc(e,r,o,this.nextTensorId());if(this.state.registeredVariables[i.name]!=null)throw new Error(`Variable with name ${i.name} was already registered`);return this.state.registeredVariables[i.name]=i,this.incRef(i,this.backend),i}trackTensor(e,r){this.state.numTensors++,e.dtype==="string"&&this.state.numStringTensors++;let o=0;e.dtype!=="complex64"&&e.dtype!=="string"&&(o=e.size*Ax(e.dtype)),this.state.numBytes+=o,this.state.tensorInfo.has(e.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(e.dataId,{backend:r||this.backend,dtype:e.dtype,shape:e.shape,bytes:o})),e instanceof sc||this.track(e)}incRef(e,r){this.trackTensor(e,r),this.backend.incRef(e.dataId)}removeDataId(e,r){this.state.tensorInfo.has(e)&&this.state.tensorInfo.get(e).backend===r&&(this.state.tensorInfo.delete(e),this.state.numDataBuffers--)}disposeTensor(e){if(!this.state.tensorInfo.has(e.dataId))return;let r=this.state.tensorInfo.get(e.dataId);if(this.state.numTensors--,e.dtype==="string"&&(this.state.numStringTensors--,this.state.numBytes-=r.bytes),e.dtype!=="complex64"&&e.dtype!=="string"){let o=e.size*Ax(e.dtype);this.state.numBytes-=o}r.backend.disposeData(e.dataId)&&this.removeDataId(e.dataId,r.backend)}disposeVariables(){for(let e in this.state.registeredVariables){let r=this.state.registeredVariables[e];this.disposeVariable(r)}}disposeVariable(e){this.disposeTensor(e),this.state.registeredVariables[e.name]!=null&&delete this.state.registeredVariables[e.name]}memory(){let e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,e.reasons==null&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e}profile(e){return ee(this,null,function*(){this.state.profiling=!0;let r=this.state.numBytes,o=this.state.numTensors;this.state.activeProfile.kernels=[],this.state.activeProfile.result=yield e(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max(...this.state.activeProfile.kernels.map(s=>s.totalBytesSnapshot)),this.state.activeProfile.newBytes=this.state.numBytes-r,this.state.activeProfile.newTensors=this.state.numTensors-o;for(let s of this.state.activeProfile.kernels)s.kernelTimeMs=yield s.kernelTimeMs,s.extraInfo=yield s.extraInfo;return this.state.activeProfile})}isTapeOn(){return this.state.gradientDepth>0&&this.state.kernelDepth===0}addTapeNode(e,r,o,s,i,a){let l={id:this.state.nextTapeNodeId++,kernelName:e,inputs:r,outputs:o,saved:i},c=ST(e);c!=null&&(s=c.gradFunc),s!=null&&(l.gradient=u=>(u=u.map((p,f)=>{if(p==null){let d=o[f],h=Mx(d.size,d.dtype);return this.makeTensor(h,d.shape,d.dtype)}return p}),s(u.length>1?u:u[0],i,a))),this.state.activeTape.push(l)}keep(e){return e.kept=!0,e}startTape(){this.state.gradientDepth===0&&(this.state.activeTape=[]),this.state.gradientDepth++}endTape(){this.state.gradientDepth--}startScope(e){let r={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(r.name=e),this.state.scopeStack.push(r),this.state.activeScope=r}endScope(e){let r=t0(e),o=new Set(r.map(i=>i.id));for(let i=0;i<this.state.activeScope.track.length;i++){let a=this.state.activeScope.track[i];!a.kept&&!o.has(a.id)&&a.dispose()}let s=this.state.scopeStack.pop();this.state.activeScope=this.state.scopeStack.length===0?null:this.state.scopeStack[this.state.scopeStack.length-1],r.forEach(i=>{!i.kept&&i.scopeId===s.id&&this.track(i)})}gradients(e,r,o,s=!1){if(O(r.length>0,()=>"gradients() received an empty list of xs."),o!=null&&o.dtype!=="float32")throw new Error(`dy must have 'float32' dtype, but has '${o.dtype}'`);let i=this.scopedRun(()=>this.startTape(),()=>this.endTape(),()=>this.tidy("forward",e));O(i instanceof tt,()=>"The result y returned by f() must be a tensor.");let a=p5(this.state.activeTape,r,i);if(!s&&a.length===0&&r.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",()=>{let l={};l[i.id]=o??i1e(i.shape),f5(l,a,u=>this.tidy(u),a1e);let c=r.map(u=>l[u.id]);return this.state.gradientDepth===0&&(this.state.activeTape.forEach(u=>{for(let p of u.saved)p.dispose()}),this.state.activeTape=null),{value:i,grads:c}})}customGrad(e){return O(ul(e),()=>"The f passed in customGrad(f) must be a function."),(...r)=>{O(r.every(l=>l instanceof tt),()=>"The args passed in customGrad(f)(x1, x2,...) must all be tensors");let o,s={};r.forEach((l,c)=>{s[c]=l});let i=(l,c)=>(o=e(...r,c),O(o.value instanceof tt,()=>"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"),O(ul(o.gradFunc),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."),o.value),a=(l,c)=>{let u=o.gradFunc(l,c),p=Array.isArray(u)?u:[u];O(p.length===r.length,()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."),O(p.every(d=>d instanceof tt),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors.");let f={};return p.forEach((d,h)=>{f[h]=()=>d}),f};return this.runKernelFunc({forwardFunc:i,backwardsFunc:a,inputs:s})}}readSync(e){return this.state.tensorInfo.get(e).backend.readSync(e)}read(e){return this.state.tensorInfo.get(e).backend.read(e)}readToGPU(e,r){return this.state.tensorInfo.get(e).backend.readToGPU(e,r)}time(e){return ee(this,null,function*(){let r=em(),o=yield this.backend.time(e);return o.wallMs=em()-r,o})}track(e){return this.state.activeScope!=null&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e}get registeredVariables(){return this.state.registeredVariables}reset(){this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new MT;for(let e in this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}}return n.nextTensorId=0,n.nextVariableId=0,n})();R=BM()});var Lu={};_t(Lu,{isBrowser:()=>VM,isMobile:()=>u1e,mockIsMobile:()=>c1e});function l1e(){return typeof navigator<"u"&&navigator!=null}function c1e(n){zM=n}function u1e(n){if(zM!==void 0)return zM;if(n||l1e()){if(n||(n=navigator),n.product==="ReactNative")return!0;let t=n.userAgent||n.vendor||(typeof window<"u"?window.opera:"");if(!t){let e=n;return e.userAgentData&&e.userAgentData.mobile}return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4))}return!1}function VM(){return typeof window<"u"&&window.document!=null||typeof WorkerGlobalScope<"u"}var zM,UM=F(()=>{"use strict";});var ns,qx=F(()=>{"use strict";oe();UM();qr();ns=Y();ns.registerFlag("DEBUG",()=>!1,n=>{n&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")});ns.registerFlag("IS_BROWSER",()=>VM());ns.registerFlag("IS_NODE",()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u");ns.registerFlag("IS_CHROME",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor));ns.registerFlag("IS_SAFARI",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Safari/.test(navigator.userAgent)&&/Apple/.test(navigator.vendor));ns.registerFlag("PROD",()=>!1);ns.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",()=>ns.getBool("DEBUG"));ns.registerFlag("DEPRECATION_WARNINGS_ENABLED",()=>!0);ns.registerFlag("IS_TEST",()=>!1);ns.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",()=>ns.getBool("DEBUG"));ns.registerFlag("WRAP_TO_IMAGEBITMAP",()=>!1);ns.registerFlag("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU",()=>!1);ns.registerFlag("USE_SETTIMEOUTCUSTOM",()=>!1)});function io(n,t){let e=n;if(ir(n))return t==="string"?[]:[n.length];if(_T(n)){let o=n.channels||"RGBA";return[n.height,n.width*o.length]}else if(AT(n))return[n.buffer.size/(t==null?4:Ax(t))];if(!Array.isArray(n))return[];let r=[];for(;Array.isArray(e)||ir(e)&&t!=="string";)r.push(e.length),e=e[0];return Array.isArray(n)&&Y().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&N5(n,r,[]),r}function N5(n,t,e){if(e=e||[],!Array.isArray(n)&&!ir(n)){O(t.length===0,()=>`Element arr[${e.join("][")}] is a primitive, but should be an array/TypedArray of ${t[0]} elements`);return}O(t.length>0,()=>`Element arr[${e.join("][")}] should be a primitive, but is an array of ${n.length} elements`),O(n.length===t[0],()=>`Element arr[${e.join("][")}] should have ${t[0]} elements, but has ${n.length} elements`);let r=t.slice(1);for(let o=0;o<n.length;++o)N5(n[o],r,e.concat(o))}function E5(n,t,e,r){if(n!=="string_or_numeric"){if(n==null)throw new Error("Expected dtype cannot be null.");if(n!=="numeric"&&n!==t||n==="numeric"&&t==="string")throw new Error(`Argument '${e}' passed to '${r}' must be ${n} tensor, but got ${t} tensor`)}}function T(n,t,e,r="numeric"){if(n instanceof U())return E5(r,n.dtype,t,e),n;let o=tf(n);if(o!=="string"&&["bool","int32","float32"].indexOf(r)>=0&&(o=r),E5(r,o,t,e),n==null||!ir(n)&&!Array.isArray(n)&&typeof n!="number"&&typeof n!="boolean"&&typeof n!="string"){let l=n==null?"null":n.constructor.name;throw new Error(`Argument '${t}' passed to '${e}' must be a Tensor or TensorLike, but got '${l}'`)}let s=io(n,o);!ir(n)&&!Array.isArray(n)&&(n=[n]);let a=o!=="string"?jx(n,o):na(n,[],!0);return R.makeTensor(a,s,o)}function Bu(n,t,e,r="numeric"){if(!Array.isArray(n))throw new Error(`Argument ${t} passed to ${e} must be a \`Tensor[]\` or \`TensorLike[]\``);return n.map((s,i)=>T(s,`${t}[${i}]`,e,r))}var J=F(()=>{"use strict";oe();qr();ue();Hx();ce();Or();});function _(n){let t=Object.keys(n);if(t.length!==1)throw new Error(`Please provide an object with a single key (operation name) mapping to a function. Got an object with ${t.length} keys.`);let e=t[0],r=n[e];e.endsWith("_")&&(e=e.substring(0,e.length-1)),e=e+OT;let o=(...s)=>{R.startScope(e);try{let i=r(...s);return Gd(i)&&console.error("Cannot return a Promise inside of tidy."),R.endScope(i),i}catch(i){throw R.endScope(null),i}};return Object.defineProperty(o,"name",{value:e,configurable:!0}),o}var OT,Z=F(()=>{"use strict";oe();ce();OT="__op"});function p1e(n,t){let e=T(n,"real","complex"),r=T(t,"imag","complex");En(e.shape,r.shape,`real and imag shapes, ${e.shape} and ${r.shape}, must match in call to tf.complex().`);let o={real:e,imag:r};return R.runKernel(Zd,o)}var Oo,bf=F(()=>{"use strict";oe();G();J();ce();Z();Oo=_({complex_:p1e})});function Fo(n,t,e,r){if(r==null)r=tf(n);else if(r==="complex64")throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(AT(n)||_T(n)){if(r!=="float32"&&r!=="int32")throw new Error(`Creating tensor from GPU data only supports 'float32'|'int32' dtype, while the dtype is ${r}.`);return R.backend.createTensorFromGPUData(n,t||e,r)}if(!ir(n)&&!Array.isArray(n)&&typeof n!="number"&&typeof n!="boolean"&&typeof n!="string")throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(t!=null){Bn(t);let o=yt(t),s=yt(e);O(o===s,()=>`Based on the provided shape, [${t}], the tensor should have ${o} values but has ${s}`);for(let i=0;i<e.length;++i){let a=e[i],l=i===e.length-1?a!==yt(t.slice(i)):!0;O(e[i]===t[i]||!l,()=>`Error creating a new Tensor. Inferred shape (${e}) does not match the provided shape (${t}). `)}}return!ir(n)&&!Array.isArray(n)&&(n=[n]),t=t||e,n=r!=="string"?jx(n,r):na(n,[],!0),R.makeTensor(n,t,r)}var zu=F(()=>{"use strict";oe();Hx();ce();});function Er(n,t,e){let r=io(n,e);return Fo(n,t,r,e)}var n0=F(()=>{"use strict";J();zu();});var Vu,jM=F(()=>{"use strict";Vu={float32:4,float16:2,int32:4,uint16:2,uint8:1,bool:1,complex64:8}});function f1e(n,t){let e=0,r=n.length;for(;e<=r;){let o=Math.floor((r-e)/2)+e,s=t(n[o]);if(s===0)return o;s<0?r=o:e=o+1}return-1}var ao,vf=F(()=>{"use strict";ce();ao=class n{static join(t){return new n(t).slice()}constructor(t){if(this.shards=[],this.previousShardIndex=0,t==null||(t instanceof Array||(t=[t]),t=t.map(r=>ir(r)?r.buffer:r),t.length===0))return;this.bufferUniformSize=t[0].byteLength;let e=0;for(let r=0;r<t.length;r++){let o=t[r];r!==t.length-1&&o.byteLength!==this.bufferUniformSize&&(this.bufferUniformSize=void 0);let s=e+o.byteLength;this.shards.push({buffer:o,start:e,end:s}),e=s}this.shards.length===0&&(this.byteLength=0),this.byteLength=this.shards[this.shards.length-1].end}slice(t=0,e=this.byteLength){if(this.shards.length===0)return new ArrayBuffer(0);if(t=isNaN(Number(t))?0:t,e=isNaN(Number(e))?0:e,t=Math.max(0,t),e=Math.min(this.byteLength,e),e<=t)return new ArrayBuffer(0);let r=this.findShardForByte(t);if(r===-1)throw new Error(`Could not find start shard for byte ${t}`);let o=e-t,s=new ArrayBuffer(o),i=new Uint8Array(s),a=0;for(let l=r;l<this.shards.length;l++){let c=this.shards[l],p=t+a-c.start,f=a,h=Math.min(e,c.end)-c.start,m=new Uint8Array(c.buffer,p,h-p);if(i.set(m,f),a+=m.length,e<c.end)break}return s}findShardForByte(t){if(this.shards.length===0||t<0||t>=this.byteLength)return-1;if(this.bufferUniformSize!=null)return this.previousShardIndex=Math.floor(t/this.bufferUniformSize),this.previousShardIndex;function e(o){return t<o.start?-1:t>=o.end?1:0}if(e(this.shards[this.previousShardIndex])===0)return this.previousShardIndex;let r=f1e(this.shards,e);return r===-1?-1:(this.previousShardIndex=r,this.previousShardIndex)}}});function d1e(){Y().set("PROD",!0)}function h1e(){Y().set("DEBUG",!0)}function m1e(){Y().set("DEPRECATION_WARNINGS_ENABLED",!1),console.warn("TensorFlow.js deprecation warnings have been disabled.")}function D5(n){Y().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(n+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}function g1e(){R.disposeVariables()}function Ks(){return R}function Kx(){return R.memory()}function x1e(n){return R.profile(n)}function K(n,t){return R.tidy(n,t)}function Be(n){t0(n).forEach(e=>e.dispose())}function yn(n){return R.keep(n)}function y1e(n){return R.time(n)}function FT(n){return R.setBackend(n)}function GM(){return R.ready()}function WM(){return R.backendName}function b1e(n){R.removeBackend(n)}function v1e(n){return R.findBackend(n)}function w1e(n){return R.findBackendFactory(n)}function r0(n,t,e=1){return R.registerBackend(n,t,e)}function o0(){return R.backend}function C1e(n,t){Y().setPlatform(n,t)}var Es=F(()=>{"use strict";oe();qr();ue();Vn();v5(D5)});function A5(n,t){return ee(this,null,function*(){let e=[],r=[],o=Array.isArray(n)?n.map(i=>i.name):Object.keys(n);for(let i=0;i<o.length;++i){let a=o[i],l=Array.isArray(n)?n[i].tensor:n[a];if(l.dtype!=="float32"&&l.dtype!=="int32"&&l.dtype!=="bool"&&l.dtype!=="string"&&l.dtype!=="complex64")throw new Error(`Unsupported dtype in weight '${a}': ${l.dtype}`);let c={name:a,shape:l.shape,dtype:l.dtype};if(l.dtype==="string"){let u=new Promise(p=>ee(this,null,function*(){let f=yield l.bytes(),d=f.reduce((g,x)=>g+x.length,0)+wf*f.length,h=new Uint8Array(d),m=0;for(let g=0;g<f.length;g++){let x=f[g],b=new Uint8Array(new Uint32Array([x.length]).buffer);h.set(b,m),m+=wf,h.set(x,m),m+=x.length}p(h)}));r.push(u)}else r.push(l.data());t!=null&&(c.group=t),e.push(c)}let s=yield Promise.all(r);return{data:T1e(s),specs:e}})}function PT(n,t){let e=new ao(n),r={},o=0;for(let s of t){let i=I1e(s,(a,l)=>e.slice(o+a,o+l));r[s.name]=R5(s,e.slice(o,o+i)),o+=i}return r}function I1e(n,t){let e=yt(n.shape),r;if("quantization"in n){let o=n.quantization;r=Vu[o.dtype]}else if(n.dtype==="string"){let o=0;for(let s=0;s<e;s++)o+=wf+new Uint32Array(t(o,o+wf))[0];return o}else r=Vu[n.dtype];return e*r}function S1e(n,t){return ee(this,null,function*(){let e=yt(n.shape),r;if("quantization"in n){let o=n.quantization;r=Vu[o.dtype]}else if(n.dtype==="string"){let o=0;for(let s=0;s<e;s++)o+=wf+new Uint32Array(yield t(o,o+wf))[0];return o}else r=Vu[n.dtype];return e*r})}function R5(n,t){let e=n.name,r=n.dtype,o=n.shape,s=yt(o),i,a=0;if("quantization"in n){let l=n.quantization;if(l.dtype==="uint8"||l.dtype==="uint16"){if(!("min"in l&&"scale"in l))throw new Error(`Weight ${n.name} with quantization ${l.dtype} doesn't have corresponding metadata min and scale.`)}else if(l.dtype==="float16"){if(r!=="float32")throw new Error(`Weight ${n.name} is quantized with ${l.dtype} which only supports weights of type float32 not ${r}.`)}else throw new Error(`Weight ${n.name} has unknown quantization dtype ${l.dtype}. Supported quantization dtypes are: 'uint8', 'uint16', and 'float16'.`);let c=Vu[l.dtype],u=l.dtype==="uint8"?new Uint8Array(t):new Uint16Array(t);if(r==="float32")if(l.dtype==="uint8"||l.dtype==="uint16"){i=new Float32Array(u.length);for(let p=0;p<u.length;p++){let f=u[p];i[p]=f*l.scale+l.min}}else if(l.dtype==="float16")i=k1e()(u);else throw new Error(`Unsupported quantization type ${l.dtype} for weight type float32.`);else if(r==="int32"){if(l.dtype!=="uint8"&&l.dtype!=="uint16")throw new Error(`Unsupported quantization type ${l.dtype} for weight type int32.`);i=new Int32Array(u.length);for(let p=0;p<u.length;p++){let f=u[p];i[p]=Math.round(f*l.scale+l.min)}}else throw new Error(`Unsupported dtype in weight '${e}': ${r}`);a+=s*c}else if(r==="string"){let l=yt(n.shape);i=[];for(let c=0;c<l;c++){let u=new Uint32Array(t.slice(a,a+wf))[0];a+=wf;let p=new Uint8Array(t.slice(a,a+u));i.push(p),a+=u}}else{let l=Vu[r];if(r==="float32")i=new Float32Array(t);else if(r==="int32")i=new Int32Array(t);else if(r==="bool")i=new Uint8Array(t);else if(r==="complex64"){i=new Float32Array(t);let c=new Float32Array(i.length/2),u=new Float32Array(i.length/2);for(let h=0;h<c.length;h++)c[h]=i[h*2],u[h]=i[h*2+1];let p=Er(c,o,"float32"),f=Er(u,o,"float32"),d=Oo(p,f);return p.dispose(),f.dispose(),d}else throw new Error(`Unsupported dtype in weight '${e}': ${r}`);a+=s*l}return Er(i,o,r)}function k5(n,t,e){return ee(this,null,function*(){let r=new Uint8Array(t);for(;r.byteLength<e;){let{done:o,value:s}=yield n.read();if(o&&s==null){let a=e-r.byteLength;throw new Error(`Reader is done but ${a} bytes are still expected`)}let i=new Uint8Array(r.length+s.byteLength);i.set(r,0),i.set(new Uint8Array(s),r.length),r=i}return r.buffer})}function $T(n,t){return ee(this,null,function*(){let e={},r=n.getReader(),o=new ArrayBuffer(0);for(let s of t){let i=yield S1e(s,(c,u)=>ee(this,null,function*(){return o=yield k5(r,o,u),o.slice(c,u)}));o=yield k5(r,o,i);let a=o.slice(0,i);o=o.slice(i);let l=R5(s,a);if(e[s.name]=l,WM()==="webgpu"){let c=o0();"uploadToGPU"in c&&yt(l.shape)>=Y().get("WEBGPU_CPU_HANDOFF_SIZE_THRESHOLD")&&c.uploadToGPU(l.dataId)}}return e})}function T1e(n){if(n===null)throw new Error(`Invalid input value: ${JSON.stringify(n)}`);let t=0,e=[];n.forEach(s=>{if(t+=s.byteLength,e.push(s.byteLength===s.buffer.byteLength?s:new s.constructor(s)),!(s instanceof Float32Array||s instanceof Int32Array||s instanceof Uint8Array))throw new Error(`Unsupported TypedArray subtype: ${s.constructor.name}`)});let r=new Uint8Array(t),o=0;return e.forEach(s=>{r.set(new Uint8Array(s.buffer),o),o+=s.byteLength}),r.buffer}function _5(n){return HM?Buffer.byteLength(n,"utf8"):new Blob([n]).size}function M5(n){if(HM)return Buffer.from(n).toString("base64");let t=new Uint8Array(n),e="";for(let r=0,o=t.length;r<o;r++)e+=String.fromCharCode(t[r]);return btoa(e)}function O5(n){if(HM){let r=Buffer.from(n,"base64");return r.buffer.slice(r.byteOffset,r.byteOffset+r.byteLength)}let t=atob(n),e=new Uint8Array(t.length);for(let r=0;r<t.length;++r)e.set([t.charCodeAt(r)],r);return e.buffer}function F5(n){return ao.join(n)}function qM(n){let t="/";for(n=n.trim();n.endsWith(t);)n=n.slice(0,n.length-1);let e=n.split(t);return e[e.length-1]}function LT(n,t){let e={modelTopology:n.modelTopology,format:n.format,generatedBy:n.generatedBy,convertedBy:n.convertedBy,weightsManifest:t};return n.signature!=null&&(e.signature=n.signature),n.userDefinedMetadata!=null&&(e.userDefinedMetadata=n.userDefinedMetadata),n.modelInitializer!=null&&(e.modelInitializer=n.modelInitializer),n.initializerSignature!=null&&(e.initializerSignature=n.initializerSignature),n.trainingConfig!=null&&(e.trainingConfig=n.trainingConfig),e}function KM(n,t,e){let r={modelTopology:n.modelTopology,format:n.format,generatedBy:n.generatedBy,convertedBy:n.convertedBy};if(n.trainingConfig!=null&&(r.trainingConfig=n.trainingConfig),n.weightsManifest!=null){if(!t)throw new Error("modelJSON has weightsManifest but weightSpecs is null");if(!e)throw new Error("modelJSON has weightsManifest but weightData is null");r.weightSpecs=t,r.weightData=e}return n.signature!=null&&(r.signature=n.signature),n.userDefinedMetadata!=null&&(r.userDefinedMetadata=n.userDefinedMetadata),n.modelInitializer!=null&&(r.modelInitializer=n.modelInitializer),n.initializerSignature!=null&&(r.initializerSignature=n.initializerSignature),r}function Xx(n,t){return ee(this,null,function*(){let e,r;return n.weightsManifest!=null&&([e,r]=yield t(n.weightsManifest)),KM(n,e,r)})}function ic(n){if(n.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:n.modelTopology==null?0:_5(JSON.stringify(n.modelTopology)),weightSpecsBytes:n.weightSpecs==null?0:_5(JSON.stringify(n.weightSpecs)),weightDataBytes:n.weightData==null?0:new ao(n.weightData).byteLength}}function s0(n){let t=[];for(let e of n)t.push(...e.weights);return t}function E1e(){let n=e=>{let r=e<<13,o=0;for(;!(r&8388608);)o-=8388608,r<<=1;return r&=-8388609,o+=947912704,r|o},t=new Uint32Array(2048);t[0]=0;for(let e=1;e<1024;e++)t[e]=n(e);for(let e=1024;e<2048;e++)t[e]=939524096+(e-1024<<13);return t}function N1e(){let n=new Uint32Array(64);n[0]=0,n[31]=1199570944,n[32]=2147483648,n[63]=3347054592;for(let t=1;t<31;t++)n[t]=t<<23;for(let t=33;t<63;t++)n[t]=2147483648+(t-32<<23);return n}function D1e(){let n=new Uint32Array(64);for(let t=0;t<64;t++)n[t]=1024;return n[0]=n[32]=0,n}function k1e(){let n=E1e(),t=N1e(),e=D1e();return r=>{let o=new ArrayBuffer(4*r.length),s=new Uint32Array(o);for(let i=0;i<r.length;i++){let a=r[i],l=n[e[a>>10]+(a&1023)]+t[a>>10];s[i]=l}return new Float32Array(o)}}var wf,HM,Cf=F(()=>{"use strict";bf();n0();ce();jM();vf();Es();qr();Es();wf=4;HM=typeof Buffer<"u"&&(typeof Blob>"u"||typeof atob>"u"||typeof btoa>"u")});var Fr,P5,$5,L5,B5,tm=F(()=>{"use strict";Fr=class n{constructor(){this.saveRouters=[],this.loadRouters=[]}static getInstance(){return n.instance==null&&(n.instance=new n),n.instance}static registerSaveRouter(t){n.getInstance().saveRouters.push(t)}static registerLoadRouter(t){n.getInstance().loadRouters.push(t)}static getSaveHandlers(t){return n.getHandlers(t,"save")}static getLoadHandlers(t,e){return n.getHandlers(t,"load",e)}static getHandlers(t,e,r){let o=[];return(e==="load"?n.getInstance().loadRouters:n.getInstance().saveRouters).forEach(i=>{let a=i(t,r);a!==null&&o.push(a)}),o}},P5=n=>Fr.registerSaveRouter(n),$5=n=>Fr.registerLoadRouter(n),L5=n=>Fr.getSaveHandlers(n),B5=(n,t)=>Fr.getLoadHandlers(n,t)});function z5(){if(!Y().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");let n=typeof window>"u"?self:window,t=n.indexedDB||n.mozIndexedDB||n.webkitIndexedDB||n.msIndexedDB||n.shimIndexedDB;if(t==null)throw new Error("The current browser does not appear to support IndexedDB.");return t}function ZM(n){let t=n.result;t.createObjectStore(nm,{keyPath:"modelPath"}),t.createObjectStore(If,{keyPath:"modelPath"})}function _1e(n){return new rm(n)}function A1e(n){return n.startsWith(rm.URL_SCHEME)?n.slice(rm.URL_SCHEME.length):n}var XM,YM,nm,If,rm,V5,BT,QM=F(()=>{"use strict";qx();qr();Cf();tm();vf();XM="tensorflowjs",YM=1,nm="models_store",If="model_info_store";rm=(()=>{class n{constructor(e){if(this.indexedDB=z5(),e==null||!e)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=e}save(e){return ee(this,null,function*(){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return this.databaseAction(this.modelPath,e)})}load(){return ee(this,null,function*(){return this.databaseAction(this.modelPath)})}databaseAction(e,r){return new Promise((o,s)=>{let i=this.indexedDB.open(XM,YM);i.onupgradeneeded=()=>ZM(i),i.onsuccess=()=>{let a=i.result;if(r==null){let l=a.transaction(nm,"readonly"),u=l.objectStore(nm).get(this.modelPath);u.onsuccess=()=>{if(u.result==null)return a.close(),s(new Error(`Cannot find model with path '${this.modelPath}' in IndexedDB.`));o(u.result.modelArtifacts)},u.onerror=p=>(a.close(),s(u.error)),l.oncomplete=()=>a.close()}else{r.weightData=ao.join(r.weightData);let l=ic(r),c=a.transaction(If,"readwrite"),u=c.objectStore(If),p;try{p=u.put({modelPath:this.modelPath,modelArtifactsInfo:l})}catch(d){return s(d)}let f;p.onsuccess=()=>{f=a.transaction(nm,"readwrite");let d=f.objectStore(nm),h;try{h=d.put({modelPath:this.modelPath,modelArtifacts:r,modelArtifactsInfo:l})}catch(m){return s(m)}h.onsuccess=()=>o({modelArtifactsInfo:l}),h.onerror=m=>{u=c.objectStore(If);let g=u.delete(this.modelPath);g.onsuccess=()=>(a.close(),s(h.error)),g.onerror=x=>(a.close(),s(h.error))}},p.onerror=d=>(a.close(),s(p.error)),c.oncomplete=()=>{f==null?a.close():f.oncomplete=()=>a.close()}}},i.onerror=a=>s(i.error)})}}return n.URL_SCHEME="indexeddb://",n})(),V5=n=>Y().getBool("IS_BROWSER")&&!Array.isArray(n)&&n.startsWith(rm.URL_SCHEME)?_1e(n.slice(rm.URL_SCHEME.length)):null;Fr.registerSaveRouter(V5);Fr.registerLoadRouter(V5);BT=class{constructor(){this.indexedDB=z5()}listModels(){return ee(this,null,function*(){return new Promise((t,e)=>{let r=this.indexedDB.open(XM,YM);r.onupgradeneeded=()=>ZM(r),r.onsuccess=()=>{let o=r.result,s=o.transaction(If,"readonly"),a=s.objectStore(If).getAll();a.onsuccess=()=>{let l={};for(let c of a.result)l[c.modelPath]=c.modelArtifactsInfo;t(l)},a.onerror=l=>(o.close(),e(a.error)),s.oncomplete=()=>o.close()},r.onerror=o=>e(r.error)})})}removeModel(t){return ee(this,null,function*(){return t=A1e(t),new Promise((e,r)=>{let o=this.indexedDB.open(XM,YM);o.onupgradeneeded=()=>ZM(o),o.onsuccess=()=>{let s=o.result,i=s.transaction(If,"readwrite"),a=i.objectStore(If),l=a.get(t),c;l.onsuccess=()=>{if(l.result==null)return s.close(),r(new Error(`Cannot find model with path '${t}' in IndexedDB.`));{let u=a.delete(t),p=()=>{c=s.transaction(nm,"readwrite");let d=c.objectStore(nm).delete(t);d.onsuccess=()=>e(l.result.modelArtifactsInfo),d.onerror=h=>r(l.error)};u.onsuccess=p,u.onerror=f=>(p(),s.close(),r(l.error))}},l.onerror=u=>(s.close(),r(l.error)),i.oncomplete=()=>{c==null?s.close():c.oncomplete=()=>s.close()}},o.onerror=s=>r(o.error)})})}}});function j5(n){return{info:[Yx,n,U5].join(Uu),topology:[Yx,n,R1e].join(Uu),weightSpecs:[Yx,n,M1e].join(Uu),weightData:[Yx,n,O1e].join(Uu),modelMetadata:[Yx,n,F1e].join(Uu)}}function G5(n){for(let t of Object.values(n))window.localStorage.removeItem(t)}function P1e(n){let t=n.split(Uu);if(t.length<3)throw new Error(`Invalid key format: ${n}`);return t.slice(1,t.length-1).join(Uu)}function $1e(n){return n.startsWith(om.URL_SCHEME)?n.slice(om.URL_SCHEME.length):n}function L1e(n){return new om(n)}var Uu,Yx,U5,R1e,M1e,O1e,F1e,om,W5,zT,JM=F(()=>{"use strict";qx();qr();ce();Cf();vf();tm();Uu="/",Yx="tensorflowjs_models",U5="info",R1e="model_topology",M1e="weight_specs",O1e="weight_data",F1e="model_metadata";om=(()=>{class n{constructor(e){if(!Y().getBool("IS_BROWSER")||typeof window>"u"||typeof window.localStorage>"u")throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,e==null||!e)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=e,this.keys=j5(this.modelPath)}save(e){return ee(this,null,function*(){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");{let r=JSON.stringify(e.modelTopology),o=JSON.stringify(e.weightSpecs),s=ic(e),i=ao.join(e.weightData);try{this.LS.setItem(this.keys.info,JSON.stringify(s)),this.LS.setItem(this.keys.topology,r),this.LS.setItem(this.keys.weightSpecs,o),this.LS.setItem(this.keys.weightData,M5(i));let a={format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,signature:e.signature!=null?e.signature:void 0,userDefinedMetadata:e.userDefinedMetadata!=null?e.userDefinedMetadata:void 0,modelInitializer:e.modelInitializer!=null?e.modelInitializer:void 0,initializerSignature:e.initializerSignature!=null?e.initializerSignature:void 0,trainingConfig:e.trainingConfig!=null?e.trainingConfig:void 0};return this.LS.setItem(this.keys.modelMetadata,JSON.stringify(a)),{modelArtifactsInfo:s}}catch{throw G5(this.keys),new Error(`Failed to save model '${this.modelPath}' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes=${s.modelTopologyBytes}, weightSpecsBytes=${s.weightSpecsBytes}, weightDataBytes=${s.weightDataBytes}.`)}}})}load(){return ee(this,null,function*(){let e=JSON.parse(this.LS.getItem(this.keys.info));if(e==null)throw new Error(`In local storage, there is no model with name '${this.modelPath}'`);if(e.modelTopologyType!=="JSON")throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");let r={},o=JSON.parse(this.LS.getItem(this.keys.topology));if(o==null)throw new Error(`In local storage, the topology of model '${this.modelPath}' is missing.`);r.modelTopology=o;let s=JSON.parse(this.LS.getItem(this.keys.weightSpecs));if(s==null)throw new Error(`In local storage, the weight specs of model '${this.modelPath}' are missing.`);r.weightSpecs=s;let i=this.LS.getItem(this.keys.modelMetadata);if(i!=null){let l=JSON.parse(i);r.format=l.format,r.generatedBy=l.generatedBy,r.convertedBy=l.convertedBy,l.signature!=null&&(r.signature=l.signature),l.userDefinedMetadata!=null&&(r.userDefinedMetadata=l.userDefinedMetadata),l.modelInitializer!=null&&(r.modelInitializer=l.modelInitializer),l.initializerSignature!=null&&(r.initializerSignature=l.initializerSignature),l.trainingConfig!=null&&(r.trainingConfig=l.trainingConfig)}let a=this.LS.getItem(this.keys.weightData);if(a==null)throw new Error(`In local storage, the binary weight values of model '${this.modelPath}' are missing.`);return r.weightData=O5(a),r})}}return n.URL_SCHEME="localstorage://",n})(),W5=n=>Y().getBool("IS_BROWSER")&&!Array.isArray(n)&&n.startsWith(om.URL_SCHEME)?L1e(n.slice(om.URL_SCHEME.length)):null;Fr.registerSaveRouter(W5);Fr.registerLoadRouter(W5);zT=class{constructor(){O(Y().getBool("IS_BROWSER"),()=>"Current environment is not a web browser"),O(typeof window>"u"||typeof window.localStorage<"u",()=>"Current browser does not appear to support localStorage"),this.LS=window.localStorage}listModels(){return ee(this,null,function*(){let t={},e=Yx+Uu,r=Uu+U5;for(let o=0;o<this.LS.length;++o){let s=this.LS.key(o);if(s.startsWith(e)&&s.endsWith(r)){let i=P1e(s);t[i]=JSON.parse(this.LS.getItem(s))}}return t})}removeModel(t){return ee(this,null,function*(){t=$1e(t);let e=j5(t);if(this.LS.getItem(e.info)==null)throw new Error(`Cannot find model at path '${t}'`);let r=JSON.parse(this.LS.getItem(e.info));return G5(e),r})}}});function VT(n){if(n.indexOf(Zx)===-1)throw new Error(`The url string provided does not contain a scheme. Supported schemes are: ${oa.getSchemes().join(",")}`);return{scheme:n.split(Zx)[0],path:n.split(Zx)[1]}}function H5(n,t,e=!1){return ee(this,null,function*(){O(n!==t,()=>`Old path and new path are the same: '${n}'`);let r=Fr.getLoadHandlers(n);O(r.length>0,()=>`Copying failed because no load handler is found for source URL ${n}.`),O(r.length<2,()=>`Copying failed because more than one (${r.length}) load handlers for source URL ${n}.`);let o=r[0],s=Fr.getSaveHandlers(t);O(s.length>0,()=>`Copying failed because no save handler is found for destination URL ${t}.`),O(s.length<2,()=>`Copying failed because more than one (${r.length}) save handlers for destination URL ${t}.`);let i=s[0],a=VT(n).scheme,l=VT(n).path,c=a===VT(n).scheme,u=yield o.load();e&&c&&(yield oa.getManager(a).removeModel(l));let p=yield i.save(u);return e&&!c&&(yield oa.getManager(a).removeModel(l)),p.modelArtifactsInfo})}function q5(){return ee(this,null,function*(){let n=oa.getSchemes(),t={};for(let e of n){let r=yield oa.getManager(e).listModels();for(let o in r){let s=e+Zx+o;t[s]=r[o]}}return t})}function K5(n){return ee(this,null,function*(){let t=VT(n);return oa.getManager(t.scheme).removeModel(t.path)})}function X5(n,t){return ee(this,null,function*(){return H5(n,t,!1)})}function Y5(n,t){return ee(this,null,function*(){return H5(n,t,!0)})}var Zx,oa,eO=F(()=>{"use strict";ce();tm();Zx="://",oa=class n{constructor(){this.managers={}}static getInstance(){return n.instance==null&&(n.instance=new n),n.instance}static registerManager(t,e){O(t!=null,()=>"scheme must not be undefined or null."),t.endsWith(Zx)&&(t=t.slice(0,t.indexOf(Zx))),O(t.length>0,()=>"scheme must not be an empty string.");let r=n.getInstance();O(r.managers[t]==null,()=>`A model store manager is already registered for scheme '${t}'.`),r.managers[t]=e}static getManager(t){let e=n.getInstance().managers[t];if(e==null)throw new Error(`Cannot find model manager for scheme '${t}'`);return e}static getSchemes(){return Object.keys(n.getInstance().managers)}}});var tO,Z5=F(()=>{"use strict";qx();qr();QM();JM();eO();kM();tO=class{constructor(){this.messageName="setTimeoutCustom",this.functionRefs=[],this.handledMessageCount=0,this.hasEventListener=!1}fetch(t,e){return fetch(t,e)}now(){return performance.now()}encode(t,e){if(e!=="utf-8"&&e!=="utf8")throw new Error(`Browser's encoder only supports utf-8, but got ${e}`);return this.textEncoder==null&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(t)}decode(t,e){return new TextDecoder(e).decode(t)}setTimeoutCustom(t,e){if(typeof window>"u"||!Y().getBool("USE_SETTIMEOUTCUSTOM")){setTimeout(t,e);return}this.functionRefs.push(t),setTimeout(()=>{window.postMessage({name:this.messageName,index:this.functionRefs.length-1},"*")},e),this.hasEventListener||(this.hasEventListener=!0,window.addEventListener("message",r=>{if(r.source===window&&r.data.name===this.messageName){r.stopPropagation();let o=this.functionRefs[r.data.index];o(),this.handledMessageCount++,this.handledMessageCount===this.functionRefs.length&&(this.functionRefs=[],this.handledMessageCount=0)}},!0))}isTypedArray(t){return TT(t)}};if(Y().get("IS_BROWSER")){Y().setPlatform("browser",new tO);try{oa.registerManager(om.URL_SCHEME,new zT)}catch{}try{oa.registerManager(rm.URL_SCHEME,new BT)}catch{}}});var J5=hs((Qx,Q5)=>{"use strict";var B1e=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},sm=B1e();Q5.exports=Qx=sm.fetch;sm.fetch&&(Qx.default=sm.fetch.bind(sm));Qx.Headers=sm.Headers;Qx.Request=sm.Request;Qx.Response=sm.Response});var e6=hs(()=>{"use strict"});var z1e,nO,rO,t6=F(()=>{"use strict";qr();z1e={importFetch:()=>J5()},rO=class{constructor(){this.util=e6(),this.textEncoder=new this.util.TextEncoder}fetch(t,e){return Y().global.fetch!=null?Y().global.fetch(t,e):(nO==null&&(nO=z1e.importFetch()),nO(t,e))}now(){let t=process.hrtime();return t[0]*1e3+t[1]/1e6}encode(t,e){if(e!=="utf-8"&&e!=="utf8")throw new Error(`Node built-in encoder only supports utf-8, but got ${e}`);return this.textEncoder.encode(t)}decode(t,e){return t.length===0?"":new this.util.TextDecoder(e).decode(t)}isTypedArray(t){return this.util.types.isFloat32Array(t)||this.util.types.isInt32Array(t)||this.util.types.isUint8Array(t)||this.util.types.isUint8ClampedArray(t)}};Y().get("IS_NODE")&&!Y().get("IS_BROWSER")&&Y().setPlatform("node",new rO)});function Pe(n,t="float32",e){return t=t||"float32",Bn(n),new Pt(n,t,e)}var ju=F(()=>{"use strict";ue();ce();});function V1e(n,t){let e=T(n,"x","cast");if(!wM(t))throw new Error(`Failed to cast to unknown dtype ${t}`);if(t==="string"&&e.dtype!=="string"||t!=="string"&&e.dtype==="string")throw new Error("Only strings can be casted to strings");let r={x:e},o={dtype:t};return R.runKernel(Zi,r,o)}var fe,vt=F(()=>{"use strict";oe();G();J();ce();Z();fe=_({cast_:V1e})});function U1e(n){let e={x:T(n,"x","clone","string_or_numeric")};return R.runKernel(Qi,e)}var wo,Jx=F(()=>{"use strict";oe();G();J();Z();wo=_({clone_:U1e})});function i0(n,t=!1){console.log(n.toString(t))}var oO=F(()=>{"use strict";});var j1e,n6=F(()=>{"use strict";oe();qx();Z5();t6();ju();vt();Jx();oO();ue();BM();j1e={buffer:Pe,cast:fe,clone:wo,print:i0};b5(j1e)});function G1e(n,t){let e=T(n,"a","add"),r=T(t,"b","add");[e,r]=bt(e,r);let o={a:e,b:r};return R.runKernel(gi,o)}var ae,Nn=F(()=>{"use strict";oe();G();Vn();J();Z();ae=_({add_:G1e})});function W1e(n,t){let e=T(n,"a","floorDiv"),r=T(t,"b","floorDiv");[e,r]=bt(e,r);let o={a:e,b:r};return R.runKernel(kl,o)}var im,UT=F(()=>{"use strict";oe();G();Vn();J();Z();im=_({floorDiv_:W1e})});function H1e(n,t){let e=T(n,"a","div"),r=T(t,"b","div");if([e,r]=bt(e,r),e.dtype==="int32"&&r.dtype==="int32")return im(e,r);let o={a:e,b:r},s={};return R.runKernel(Il,o,s)}var xe,Zt=F(()=>{"use strict";oe();G();Vn();J();UT();Z();xe=_({div_:H1e})});function q1e(n,t){let e=T(n,"a","mul"),r=T(t,"b","mul");[e,r]=bt(e,r);let o={a:e,b:r};return R.runKernel(Bl,o)}var B,Ue=F(()=>{"use strict";oe();G();Vn();J();Z();B=_({mul_:q1e})});function K1e(n){let t=T(n,"x","abs");if(t.dtype==="complex64"){let e={x:t};return R.runKernel(Jc,e)}else{let e={x:t};return R.runKernel(Wc,e)}}var fn,am=F(()=>{"use strict";oe();G();J();Z();fn=_({abs_:K1e})});function X1e(n){let e={x:T(n,"x","acos")};return R.runKernel(fl,e)}var a0,r6=F(()=>{"use strict";oe();G();J();Z();a0=_({acos_:X1e})});function Y1e(n){let e={x:T(n,"x","acosh")};return R.runKernel(dl,e)}var l0,o6=F(()=>{"use strict";oe();G();J();Z();l0=_({acosh_:Y1e})});function Z1e(n){O(Array.isArray(n),()=>"The argument passed to tf.addN() must be a list of tensors"),O(n.length>=1,()=>`Must pass at least one tensor to tf.addN(), but got ${n.length}`);let t=n.map((o,s)=>T(o,`tensors${s}`,"addN")),e=t[0];t.forEach(o=>{if(o.dtype!==e.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")}),t.forEach(o=>{if(!Ro(o.shape,e.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")});let r=t;return R.runKernel(Hc,r)}var sO,s6=F(()=>{"use strict";oe();G();J();ce();Z();sO=_({addN_:Z1e})});function Q1e(n,t=null,e=!1){let o={x:T(n,"x","all","bool")},s={axis:t,keepDims:e};return R.runKernel(Wd,o,s)}var lm,iO=F(()=>{"use strict";oe();G();J();Z();lm=_({all_:Q1e})});function J1e(n,t=null,e=!1){let o={x:T(n,"x","any","bool")},s={axis:t,keepDims:e};return R.runKernel(Hd,o,s)}var Sf,aO=F(()=>{"use strict";oe();G();J();Z();Sf=_({any_:J1e})});function eEe(n,t=0){let r={x:T(n,"x","argMax")},o={axis:t};return R.runKernel(qc,r,o)}var sa,lO=F(()=>{"use strict";oe();G();J();Z();sa=_({argMax_:eEe})});function tEe(n,t=0){let r={x:T(n,"x","argMin")},o={axis:t};return R.runKernel(Kc,r,o)}var c0,cO=F(()=>{"use strict";oe();G();J();Z();c0=_({argMin_:tEe})});function nEe(n){let e={x:T(n,"x","asin")};return R.runKernel(hl,e)}var u0,i6=F(()=>{"use strict";oe();G();J();Z();u0=_({asin_:nEe})});function rEe(n){let e={x:T(n,"x","asinh")};return R.runKernel(ml,e)}var p0,a6=F(()=>{"use strict";oe();G();J();Z();p0=_({asinh_:rEe})});function oEe(n){let e={x:T(n,"x","atan")};return R.runKernel(gl,e)}var f0,l6=F(()=>{"use strict";oe();G();J();Z();f0=_({atan_:oEe})});function sEe(n,t){let e=T(n,"a","atan2"),r=T(t,"b","atan2");[e,r]=bt(e,r);let o={a:e,b:r};return R.runKernel(yl,o)}var d0,uO=F(()=>{"use strict";oe();G();Vn();J();Z();d0=_({atan2_:sEe})});function iEe(n){let e={x:T(n,"x","atanh")};return R.runKernel(xl,e)}var h0,c6=F(()=>{"use strict";oe();G();J();Z();h0=_({atanh_:iEe})});function aEe(n,t,e,r,o="NHWC",s){let i=n[3],a=[...t,i],l=p6(o);return cm(n,a,e,s,r,null,null,l)}function fO(n,t,e,r,o,s,i="channelsLast"){let[a,l]=m0(t),c;if(i==="channelsLast")c=[a,l,n[3],n[3]];else if(i==="channelsFirst")c=[a,l,n[1],n[1]];else throw new Error(`Unknown dataFormat ${i}`);return cm(n,c,e,r,o,s,!1,i)}function lEe(n,t,e,r,o,s,i="NDHWC"){let[a,l,c]=pO(t),u,p;if(i==="NDHWC")p="channelsLast",u=[a,l,c,n[4],n[4]];else if(i==="NCDHW")p="channelsFirst",u=[a,l,c,n[1],n[1]];else throw new Error(`Unknown dataFormat ${i}`);return u6(n,u,e,r,o,!1,p,s)}function cm(n,t,e,r,o,s,i=!1,a="channelsLast"){let[l,c,u,p]=[-1,-1,-1,-1];if(a==="channelsLast")[l,c,u,p]=n;else if(a==="channelsFirst")[l,p,c,u]=n;else throw new Error(`Unknown dataFormat ${a}`);let[f,d,,h]=t,[m,g]=m0(e),[x,b]=m0(r),w=ey(f,x),v=ey(d,b),{padInfo:S,outHeight:k,outWidth:A}=pEe(o,c,u,m,g,w,v,s,a),$=i?h*p:h,L;return a==="channelsFirst"?L=[l,$,k,A]:a==="channelsLast"&&(L=[l,k,A,$]),{batchSize:l,dataFormat:a,inHeight:c,inWidth:u,inChannels:p,outHeight:k,outWidth:A,outChannels:$,padInfo:S,strideHeight:m,strideWidth:g,filterHeight:f,filterWidth:d,effectiveFilterHeight:w,effectiveFilterWidth:v,dilationHeight:x,dilationWidth:b,inShape:n,outShape:L,filterShape:t}}function u6(n,t,e,r,o,s=!1,i="channelsLast",a){let[l,c,u,p,f]=[-1,-1,-1,-1,-1];if(i==="channelsLast")[l,c,u,p,f]=n;else if(i==="channelsFirst")[l,f,c,u,p]=n;else throw new Error(`Unknown dataFormat ${i}`);let[d,h,m,,g]=t,[x,b,w]=pO(e),[v,S,k]=pO(r),A=ey(d,v),$=ey(h,S),L=ey(m,k),{padInfo:z,outDepth:W,outHeight:Q,outWidth:ne}=fEe(o,c,u,p,x,b,w,A,$,L,a),se=s?g*f:g,te;return i==="channelsFirst"?te=[l,se,W,Q,ne]:i==="channelsLast"&&(te=[l,W,Q,ne,se]),{batchSize:l,dataFormat:i,inDepth:c,inHeight:u,inWidth:p,inChannels:f,outDepth:W,outHeight:Q,outWidth:ne,outChannels:se,padInfo:z,strideDepth:x,strideHeight:b,strideWidth:w,filterDepth:d,filterHeight:h,filterWidth:m,effectiveFilterDepth:A,effectiveFilterHeight:$,effectiveFilterWidth:L,dilationDepth:v,dilationHeight:S,dilationWidth:k,inShape:n,outShape:te,filterShape:t}}function cEe(n,t,e,r,o){r==null&&(r=dO(n,t,e));let s=n[0],i=n[1],a=g0((s-t+2*r)/e+1,o),l=g0((i-t+2*r)/e+1,o);return[a,l]}function uEe(n,t,e,r,o,s){o==null&&(o=dO(n,t[0],r[0]));let i=[0,0,0,e];for(let a=0;a<3;a++)n[a]+2*o>=t[a]&&(i[a]=g0((n[a]-t[a]+2*o)/r[a]+1,s));return i}function dO(n,t,e,r=1){let o=ey(t,r);return Math.floor((n[0]*(e-1)-e+o)/2)}function m0(n){return typeof n=="number"?[n,n,n]:n.length===2?[n[0],n[1],1]:n}function pO(n){return typeof n=="number"?[n,n,n]:n}function ey(n,t){return t<=1?n:n+(n-1)*(t-1)}function pEe(n,t,e,r,o,s,i,a,l){let c,u,p;if(typeof n=="number"){c={top:n,bottom:n,left:n,right:n,type:n===0?"VALID":"NUMBER"};let d=cEe([t,e],s,r,n,a);u=d[0],p=d[1]}else if(n==="same"){u=Math.ceil(t/r),p=Math.ceil(e/o);let f=Math.max(0,(u-1)*r+s-t),d=Math.max(0,(p-1)*o+i-e),h=Math.floor(f/2),m=f-h,g=Math.floor(d/2),x=d-g;c={top:h,bottom:m,left:g,right:x,type:"SAME"}}else if(n==="valid")c={top:0,bottom:0,left:0,right:0,type:"VALID"},u=Math.ceil((t-s+1)/r),p=Math.ceil((e-i+1)/o);else if(typeof n=="object"){let f=l==="channelsLast"?n[1][0]:n[2][0],d=l==="channelsLast"?n[1][1]:n[2][1],h=l==="channelsLast"?n[2][0]:n[3][0],m=l==="channelsLast"?n[2][1]:n[3][1];c={top:f,bottom:d,left:h,right:m,type:f===0&&d===0&&h===0&&m===0?"VALID":"EXPLICIT"},u=g0((t-s+f+d)/r+1,a),p=g0((e-i+h+m)/o+1,a)}else throw Error(`Unknown padding parameter: ${n}`);return{padInfo:c,outHeight:u,outWidth:p}}function fEe(n,t,e,r,o,s,i,a,l,c,u){let p,f,d,h;if(n==="valid"&&(n=0),typeof n=="number"){p={top:n,bottom:n,left:n,right:n,front:n,back:n,type:n===0?"VALID":"NUMBER"};let g=uEe([t,e,r,1],[a,l,c],1,[o,s,i],n,u);f=g[0],d=g[1],h=g[2]}else if(n==="same"){f=Math.ceil(t/o),d=Math.ceil(e/s),h=Math.ceil(r/i);let m=(f-1)*o+a-t,g=(d-1)*s+l-e,x=(h-1)*i+c-r,b=Math.floor(m/2),w=m-b,v=Math.floor(g/2),S=g-v,k=Math.floor(x/2),A=x-k;p={top:v,bottom:S,left:k,right:A,front:b,back:w,type:"SAME"}}else throw Error(`Unknown padding parameter: ${n}`);return{padInfo:p,outDepth:f,outHeight:d,outWidth:h}}function g0(n,t){if(!t)return Math.trunc(n);switch(t){case"round":return Math.round(n);case"ceil":return Math.ceil(n);case"floor":return Math.floor(n);default:throw new Error(`Unknown roundingMode ${t}`)}}function Xs(n){let[t,e,r]=m0(n);return t===1&&e===1&&r===1}function Xr(n,t){return Xs(n)||Xs(t)}function ac(n){return m0(n).every(t=>t>0)}function p6(n){if(n==="NHWC")return"channelsLast";if(n==="NCHW")return"channelsFirst";throw new Error(`Unknown dataFormat ${n}`)}function dn(n,t,e){if(e!=null){if(typeof t=="string")throw Error(`Error in ${n}: pad must be an integer when using dimRoundingMode ${e} but got pad ${t}.`);if(typeof t=="number")O(Gc(t),()=>`Error in ${n}: pad must be an integer when using dimRoundingMode ${e} but got pad ${t}.`);else if(typeof t=="object")t.forEach(r=>{r.forEach(o=>{O(Gc(o),()=>`Error in ${n}: pad must be an integer when using dimRoundingMode ${e} but got pad ${o}.`)})});else throw Error(`Error in ${n}: Unknown padding parameter: ${t}`)}}var Nr=F(()=>{"use strict";ce();});function dEe(n,t){let r={x:T(n,"x","reshape","string_or_numeric")},o={shape:t};return R.runKernel(Tu,r,o)}var V,Oe=F(()=>{"use strict";oe();G();J();Z();V=_({reshape_:dEe})});function hEe(n,t,e,r,o){let s=T(n,"x","avgPool","float32"),i=1;O(Xr(e,i),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${e} and dilations '${i}'`);let a=s,l=!1;s.rank===3&&(l=!0,a=V(s,[1,s.shape[0],s.shape[1],s.shape[2]])),O(a.rank===4,()=>`Error in avgPool: x must be rank 4 but got rank ${a.rank}.`),dn("avgPool",r,o);let c={x:a},u={filterSize:t,strides:e,pad:r,dimRoundingMode:o},p=R.runKernel(Xc,c,u);return p=fe(p,s.dtype),l?V(p,[p.shape[1],p.shape[2],p.shape[3]]):p}var Gu,jT=F(()=>{"use strict";oe();G();J();ce();vt();Nr();Z();Oe();Gu=_({avgPool_:hEe})});function mEe(n,t,e,r,o,s="NDHWC"){let i=T(n,"x","avgPool3d","float32"),a=i,l=!1;i.rank===4&&(l=!0,a=V(i,[1,i.shape[0],i.shape[1],i.shape[2],i.shape[3]])),O(a.rank===5,()=>`Error in avgPool3d: x must be rank 5 but got rank ${a.rank}.`),O(s==="NDHWC",()=>`Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of ${s}`),O(typeof e=="number"&&e>0||Array.isArray(e)&&e[0]>0&&e[1]>0&&e[2]>0,()=>`Error in avgPool3d: Stride must be > 0, but got '${e}'`),dn("avgPool3d",r,o);let c={x:a},u={filterSize:t,strides:e,pad:r,dimRoundingMode:o,dataFormat:s},p=R.runKernel(Yc,c,u);return p=fe(p,a.dtype),l?V(p,[p.shape[1],p.shape[2],p.shape[3],p.shape[4]]):p}var x0,f6=F(()=>{"use strict";oe();G();J();ce();vt();Nr();Z();Oe();x0=_({avgPool3d_:mEe})});function gEe(n,t=0){O(n.length>=1,()=>"Pass at least one tensor to concat");let e=Bu(n,"tensors","concat","string_or_numeric");if(e[0].dtype==="complex64"&&e.forEach(s=>{if(s.dtype!=="complex64")throw new Error(`Cannot concatenate complex64 tensors with a tensor
          with dtype ${s.dtype}. `)}),e.length===1)return wo(e[0]);let r=e,o={axis:t};return R.runKernel(eu,r,o)}var Tt,Zs=F(()=>{"use strict";oe();G();J();ce();Jx();Z();Tt=_({concat_:gEe})});function xEe(n,t,e=!1,r=!1){let o=T(n,"a","matMul"),s=T(t,"b","matMul");[o,s]=bt(o,s);let i={a:o,b:s},a={transposeA:e,transposeB:r};return R.runKernel(Zc,i,a)}var st,ia=F(()=>{"use strict";oe();G();Vn();J();Z();st=_({matMul_:xEe})});function yEe(n){let e={x:T(n,"x","sigmoid","float32")};return R.runKernel(Yl,e)}var Pr,ty=F(()=>{"use strict";oe();G();J();Z();Pr=_({sigmoid_:yEe})});function bEe(n,t,e){let r=T(n,"x","slice","string_or_numeric");if(r.rank===0)throw new Error("Slicing scalar is not possible");let o={x:r},s={begin:t,size:e};return R.runKernel(_u,o,s)}var $e,rs=F(()=>{"use strict";oe();G();J();Z();$e=_({slice_:bEe})});function vEe(n){let e={x:T(n,"x","tanh","float32")};return R.runKernel(nc,e)}var vi,hO=F(()=>{"use strict";oe();G();J();Z();vi=_({tanh_:vEe})});function wEe(n,t,e,r,o,s){let i=T(n,"forgetBias","basicLSTMCell"),a=T(t,"lstmKernel","basicLSTMCell"),l=T(e,"lstmBias","basicLSTMCell"),c=T(r,"data","basicLSTMCell"),u=T(o,"c","basicLSTMCell"),p=T(s,"h","basicLSTMCell"),f=Tt([c,p],1),d=st(f,a),h=ae(d,l),m=h.shape[0],g=h.shape[1]/4,x=[m,g],b=$e(h,[0,0],x),w=$e(h,[0,g],x),v=$e(h,[0,g*2],x),S=$e(h,[0,g*3],x),k=ae(B(Pr(b),vi(w)),B(u,Pr(ae(i,v)))),A=B(vi(k),Pr(S));return[k,A]}var mO,d6=F(()=>{"use strict";J();Nn();Zs();ia();Ue();Z();ty();rs();hO();mO=_({basicLSTMCell_:wEe})});function CEe(n,t,e){let r=T(n,"x","batchToSpaceND"),o=t.reduce((a,l)=>a*l);O(r.rank>=1+t.length,()=>`input rank is ${r.rank} but should be > than blockShape.length ${t.length}`),O(e.length===t.length,()=>`crops.length is ${e.length} but should be equal to blockShape.length  ${t.length}`),O(r.shape[0]%o===0,()=>`input tensor batch is ${r.shape[0]} but is not divisible by the product of the elements of blockShape ${t.join(" * ")} === ${o}`);let s={x:r},i={blockShape:t,crops:e};return R.runKernel(Qc,s,i)}var Wu,y0=F(()=>{"use strict";oe();G();J();ce();Z();Wu=_({batchToSpaceND_:CEe})});function h6(n){let t;return n.rank===0||n.rank===1?t=V(n,[1,1,1,n.size]):n.rank===2?t=V(n,[1,1,n.shape[0],n.shape[1]]):n.rank===3?t=V(n,[1,n.shape[0],n.shape[1],n.shape[2]]):t=n,t}var m6=F(()=>{"use strict";Oe()});function IEe(n,t,e,r,o,s){s==null&&(s=.001);let i=T(n,"x","batchNorm"),a=T(t,"mean","batchNorm"),l=T(e,"variance","batchNorm"),c;o!=null&&(c=T(o,"scale","batchNorm"));let u;r!=null&&(u=T(r,"offset","batchNorm")),O(a.rank===l.rank,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),O(u==null||a.rank===u.rank,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),O(c==null||a.rank===c.rank,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");let f={x:h6(i),scale:c,offset:u,mean:a,variance:l},d={varianceEpsilon:s},h=R.runKernel(lu,f,d);return V(h,i.shape)}var aa,ny=F(()=>{"use strict";oe();G();J();ce();m6();Z();Oe();aa=_({batchNorm_:IEe})});function SEe(n,t,e,r,o,s){let i=T(n,"x","batchNorm"),a=T(t,"mean","batchNorm"),l=T(e,"variance","batchNorm"),c;o!=null&&(c=T(o,"scale","batchNorm"));let u;return r!=null&&(u=T(r,"offset","batchNorm")),O(i.rank===2,()=>`Error in batchNorm2D: x must be rank 2 but got rank ${i.rank}.`),O(a.rank===2||a.rank===1,()=>`Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank ${a.rank}.`),O(l.rank===2||l.rank===1,()=>`Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank ${l.rank}.`),c!=null&&O(c.rank===2||c.rank===1,()=>`Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank ${c.rank}.`),u!=null&&O(u.rank===2||u.rank===1,()=>`Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank ${u.rank}.`),aa(i,a,l,u,c,s)}var b0,g6=F(()=>{"use strict";J();ce();ny();Z();b0=_({batchNorm2d_:SEe})});function TEe(n,t,e,r,o,s){let i=T(n,"x","batchNorm"),a=T(t,"mean","batchNorm"),l=T(e,"variance","batchNorm"),c;o!=null&&(c=T(o,"scale","batchNorm"));let u;return r!=null&&(u=T(r,"offset","batchNorm")),O(i.rank===3,()=>`Error in batchNorm3D: x must be rank 3 but got rank ${i.rank}.`),O(a.rank===3||a.rank===1,()=>`Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank ${a.rank}.`),O(l.rank===3||l.rank===1,()=>`Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank ${l.rank}.`),c!=null&&O(c.rank===3||c.rank===1,()=>`Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank ${c.rank}.`),u!=null&&O(u.rank===3||u.rank===1,()=>`Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank ${u.rank}.`),aa(i,a,l,u,c,s)}var v0,x6=F(()=>{"use strict";J();ce();ny();Z();v0=_({batchNorm3d_:TEe})});function EEe(n,t,e,r,o,s){let i=T(n,"x","batchNorm"),a=T(t,"mean","batchNorm"),l=T(e,"variance","batchNorm"),c;o!=null&&(c=T(o,"scale","batchNorm"));let u;return r!=null&&(u=T(r,"offset","batchNorm")),O(i.rank===4,()=>`Error in batchNorm4D: x must be rank 4 but got rank ${i.rank}.`),O(a.rank===4||a.rank===1,()=>`Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank ${a.rank}.`),O(l.rank===4||l.rank===1,()=>`Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank ${l.rank}.`),c!=null&&O(c.rank===4||c.rank===1,()=>`Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank ${c.rank}.`),u!=null&&O(u.rank===4||u.rank===1,()=>`Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank ${u.rank}.`),aa(i,a,l,u,c,s)}var w0,y6=F(()=>{"use strict";J();ce();ny();Z();w0=_({batchNorm4d_:EEe})});function NEe(n,t,e){let r=T(n,"x","bincount"),o=T(t,"weights","bincount");O(r.dtype==="int32",()=>`Error in bincount: input dtype must be int32, but got ${r.dtype}`),O(e>=0,()=>`size must be non-negative, but got ${e}.`),O(o.size===r.size||o.size===0,()=>`Error in bincount: weights must have the same size as input or0-length, but got input shape: ${r.shape}, weights shape: ${o.shape}.`);let s={x:r,weights:o},i={size:e};return R.runKernel(Xd,s,i)}var C0,gO=F(()=>{"use strict";oe();G();J();ce();Z();C0=_({bincount_:NEe})});function DEe(n,t){let e=T(n,"x","bitwiseAnd"),r=T(t,"y","bitwiseAnd");if(!Ro(e.shape,r.shape))throw new Error(`BitwiseAnd: Tensors must have the same shape. x: ${e.shape}, y: ${r.shape}`);if(e.dtype!=="int32"||r.dtype!=="int32")throw new Error(`BitwiseAnd: Only supports 'int32' values in tensor, found type of x: ${e.dtype} and type of y: ${r.dtype}`);let o={a:e,b:r};return R.runKernel(nf,o)}var xO,b6=F(()=>{"use strict";oe();G();J();Or();Z();xO=_({bitwiseAnd_:DEe})});function kEe(n,t){let e=T(n,"s0","broadcastArgs","int32"),r=T(t,"s1","broadcastArgs","int32");if(e.rank!==1)throw new Error(`broadcastArgs(): first input must be a vector (rank=1). Has rank ${e.rank}`);if(r.rank!==1)throw new Error(`broadcastArgs(): second input must be a vector (rank=1). Has rank ${r.rank}`);let o={s0:e,s1:r};return R.runKernel(Yd,o)}var yO,v6=F(()=>{"use strict";oe();G();J();Z();yO=_({broadcastArgs_:kEe})});function _Ee(n,t){let e=T(n,"broadcastTo","x"),r=e.shape;if(Bn(t),t.length<e.rank)throw new Error(`broadcastTo(): shape.length=${t.length} < input.rank=${e.rank}.`);if(t.length>e.rank){let c=e.shape.slice();for(;c.length<t.length;)c.unshift(1);e=V(e,c)}let o=e.shape,s=Array.from(t);for(let c=t.length-1;c>=0;c--)if(o[c]===t[c])s[c]=1;else if(e.shape[c]!==1)throw new Error(`broadcastTo(): [${r}] cannot be broadcast to [${t}].`);if(s.map((c,u)=>c>1?u:-1).filter(c=>c>=0).length===0)return wo(e);let a={x:e},l={reps:s};return R.runKernel(Ji,a,l)}var la,GT=F(()=>{"use strict";oe();G();J();Or();Jx();Z();Oe();la=_({broadcastTo_:_Ee})});function AEe(n){let e={x:T(n,"x","ceil","float32")};return R.runKernel(bl,e)}var I0,w6=F(()=>{"use strict";oe();G();J();Z();I0=_({ceil_:AEe})});function Qs(n,t,e){Bn(n),e=e||tf(t);let r={shape:n,value:t,dtype:e};return R.runKernel(ph,{},r)}var ry=F(()=>{"use strict";oe();G();ce();Or();});function REe(n,t,e){let r=T(n,"x","clipByValue");if(O(t<=e,()=>`Error in clip: min (${t}) must be less than or equal to max (${e}).`),t===e)return Qs(r.shape,t,r.dtype);let o={x:r},s={clipValueMin:t,clipValueMax:e};return R.runKernel(vl,o,s)}var pr,C6=F(()=>{"use strict";oe();G();J();ce();ry();Z();pr=_({clipByValue_:REe})});function MEe(n){return Tt(n,0)}var S0,I6=F(()=>{"use strict";Zs();Z();S0=_({concat1d_:MEe})});function OEe(n,t){return Tt(n,t)}var T0,S6=F(()=>{"use strict";Zs();Z();T0=_({concat2d_:OEe})});function FEe(n,t){return Tt(n,t)}var E0,T6=F(()=>{"use strict";Zs();Z();E0=_({concat3d_:FEe})});function PEe(n,t){return Tt(n,t)}var N0,E6=F(()=>{"use strict";Zs();Z();N0=_({concat4d_:PEe})});function $Ee(n,t,e,r,o="NHWC",s=[1,1],i){let a=T(n,"x","conv2d","float32"),l=T(t,"filter","conv2d","float32"),c=a,u=!1;a.rank===3&&(u=!0,c=V(a,[1,a.shape[0],a.shape[1],a.shape[2]])),O(c.rank===4,()=>`Error in conv2d: input must be rank 4, but got rank ${c.rank}.`),O(l.rank===4,()=>`Error in conv2d: filter must be rank 4, but got rank ${l.rank}.`),dn("conv2d",r,i);let p=o==="NHWC"?c.shape[3]:c.shape[1];O(p===l.shape[2],()=>`Error in conv2d: depth of input (${p}) must match input depth for filter ${l.shape[2]}.`),O(Xr(e,s),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${e} and dilations '${s}'`),O(ac(s),()=>"Error in conv2D: Dilated rates should be larger than 0."),O(ac(e),()=>"Error in conv2D: Strides should be larger than 0.");let f={x:c,filter:l},d={strides:e,pad:r,dataFormat:o,dilations:s,dimRoundingMode:i},h=R.runKernel(tu,f,d);return u?V(h,[h.shape[1],h.shape[2],h.shape[3]]):h}var Po,um=F(()=>{"use strict";oe();G();J();ce();Nr();Z();Oe();Po=_({conv2d_:$Ee})});function LEe(n,t,e,r,o="NWC",s=1,i){let a=T(n,"x","conv1d"),l=T(t,"filter","conv1d"),c=a,u=!1;a.rank===2&&(u=!0,c=V(a,[1,a.shape[0],a.shape[1]])),O(c.rank===3,()=>`Error in conv1d: input must be rank 3, but got rank ${c.rank}.`),O(l.rank===3,()=>`Error in conv1d: filter must be rank 3, but got rank ${l.rank}.`),dn("conv1d",r,i),O(c.shape[2]===l.shape[1],()=>`Error in conv1d: depth of input (${c.shape[2]}) must match input depth for filter ${l.shape[1]}.`),O(Xr(e,s),()=>`Error in conv1D: Either stride or dilation must be 1. Got stride ${e} and dilation '${s}'`),O(ac(s),()=>"Error in conv1D: Dilated rates should be larger than 0."),O(ac(e),()=>"Error in conv1D: Stride should be larger than 0."),O(o==="NWC",()=>`Error in conv1d: got dataFormat of ${o} but only NWC is currently supported.`);let p=V(l,[1,l.shape[0],l.shape[1],l.shape[2]]),f=V(c,[c.shape[0],1,c.shape[1],c.shape[2]]),g=Po(f,p,[1,e],r,"NHWC",[1,s],i);return u?V(g,[g.shape[2],g.shape[3]]):V(g,[g.shape[0],g.shape[2],g.shape[3]])}var pm,bO=F(()=>{"use strict";J();ce();um();Nr();Z();Oe();pm=_({conv1d_:LEe})});function BEe(n,t,e,r,o,s="NHWC",i){O(n.length===t.rank,()=>`Length of inShape (${n.length}) and rank of dy (${t.rank}) must match`);let a=n,l=t,c=!1;t.rank===3&&(c=!0,l=V(t,[1,t.shape[0],t.shape[1],t.shape[2]]),a=[1,n[0],n[1],n[2]]),O(a.length===4,()=>`Error in conv2dDerInput: inShape must be length 4, but got length ${a.length}.`),O(l.rank===4,()=>`Error in conv2dDerInput: dy must be rank 4, but got rank ${l.rank}`),O(e.rank===4,()=>`Error in conv2dDerInput: filter must be rank 4, but got rank ${e.rank}`);let u=s==="NHWC"?a[3]:a[1],p=s==="NHWC"?l.shape[3]:l.shape[1];O(u===e.shape[2],()=>`Error in conv2dDerInput: depth of input (${u}) must match input depth for filter ${e.shape[2]}.`),O(p===e.shape[3],()=>`Error in conv2dDerInput: depth of output (${p}) must match output depth for filter ${e.shape[3]}.`),dn("conv2dDerInput",o,i);let f={dy:l,filter:e},d={strides:r,pad:o,dataFormat:s,dimRoundingMode:i,inputShape:a},h=R.runKernel(nu,f,d);return c?V(h,[h.shape[1],h.shape[2],h.shape[3]]):h}var oy,WT=F(()=>{"use strict";oe();G();ce();Nr();Z();Oe();oy=_({conv2DBackpropInput_:BEe})});function zEe(n,t,e,r,o,s){let i=T(n,"x","conv2dTranspose"),a=T(t,"filter","conv2dTranspose");return oy(e,i,a,r,o,"NHWC",s)}var fm,vO=F(()=>{"use strict";J();WT();Z();fm=_({conv2dTranspose_:zEe})});function VEe(n,t,e,r,o="NDHWC",s=[1,1,1]){let i=T(n,"x","conv3d"),a=T(t,"filter","conv3d"),l=i,c=!1;i.rank===4&&(c=!0,l=V(i,[1,i.shape[0],i.shape[1],i.shape[2],i.shape[3]])),O(l.rank===5,()=>`Error in conv3d: input must be rank 5, but got rank ${l.rank}.`),O(a.rank===5,()=>`Error in conv3d: filter must be rank 5, but got rank ${a.rank}.`),O(l.shape[4]===a.shape[3],()=>`Error in conv3d: depth of input (${l.shape[4]}) must match input depth for filter ${a.shape[3]}.`),O(Xr(e,s),()=>`Error in conv3D: Either strides or dilations must be 1. Got strides ${e} and dilations '${s}'`),O(o==="NDHWC",()=>`Error in conv3d: got dataFormat of ${o} but only NDHWC is currently supported.`),O(ac(s),()=>"Error in conv3D: Dilated rates should be larger than 0."),O(ac(e),()=>"Error in conv3D: Strides should be larger than 0.");let u={x:l,filter:a},p={strides:e,pad:r,dataFormat:o,dilations:s},f=R.runKernel(ru,u,p);return c?V(f,[f.shape[1],f.shape[2],f.shape[3],f.shape[4]]):f}var D0,N6=F(()=>{"use strict";oe();G();J();ce();Nr();Z();Oe();D0=_({conv3d_:VEe})});function UEe(n,t,e,r,o){O(n.length===t.rank,()=>`Length of inShape (${n.length}) and rank of dy (${t.rank}) must match`);let s=n,i=t,a=!1;t.rank===4&&(a=!0,i=V(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]]),s=[1,n[0],n[1],n[2],n[3]]);let l=s[4],c=i.shape[4];O(s.length===5,()=>`Error in conv3dDerInput: inShape must be length 5, but got length ${s.length}.`),O(i.rank===5,()=>`Error in conv3dDerInput: dy must be rank 5, but got rank ${i.rank}`),O(e.rank===5,()=>`Error in conv3dDerInput: filter must be rank 5, but got rank ${e.rank}`),O(l===e.shape[3],()=>`Error in conv3dDerInput: depth of input (${l}) must match input depth for filter ${e.shape[3]}.`),O(c===e.shape[4],()=>`Error in conv3dDerInput: depth of output (${c}) must match output depth for filter ${e.shape[4]}.`);let u={dy:i,filter:e},p={pad:o,strides:r,inputShape:s},f=R.runKernel(eh,u,p);return a?V(f,[f.shape[1],f.shape[2],f.shape[3],f.shape[4]]):f}var HT,wO=F(()=>{"use strict";oe();G();ce();Z();Oe();HT=_({conv3DBackpropInput_:UEe})});function jEe(n,t,e,r,o){let s=T(n,"x","conv3dTranspose"),i=T(t,"filter","conv3dTranspose");return HT(e,s,i,r,o)}var k0,D6=F(()=>{"use strict";J();wO();Z();k0=_({conv3dTranspose_:jEe})});function GEe(n){let e={x:T(n,"x","cos","float32")};return R.runKernel(wl,e)}var Hu,qT=F(()=>{"use strict";oe();G();J();Z();Hu=_({cos_:GEe})});function WEe(n){let e={x:T(n,"x","cosh","float32")};return R.runKernel(Cl,e)}var dm,CO=F(()=>{"use strict";oe();G();J();Z();dm=_({cosh_:WEe})});function HEe(n,t=0,e=!1,r=!1){let s={x:T(n,"x","cumprod")},i={axis:t,exclusive:e,reverse:r};return R.runKernel(th,s,i)}var Tf,KT=F(()=>{"use strict";oe();G();J();Z();Tf=_({cumprod_:HEe})});function qEe(n,t=0,e=!1,r=!1){let s={x:T(n,"x","cumsum")},i={axis:t,exclusive:e,reverse:r};return R.runKernel(ou,s,i)}var hm,XT=F(()=>{"use strict";oe();G();J();Z();hm=_({cumsum_:qEe})});function KEe(n,t,e,r=!1){let o=T(n,"x","denseBincount"),s=T(t,"weights","denseBincount");O(o.dtype==="int32",()=>`Error in denseBincount: input dtype must be int32, but got ${o.dtype}`),O(o.rank<=2,()=>`Error in denseBincount: input must be at most rank 2, but got rank ${o.rank}.`),O(e>=0,()=>`size must be non-negative, but got ${e}.`),O(s.size===o.size||s.size===0,()=>`Error in denseBincount: weights must have the same shape as x or 0-length, but got x shape: ${o.shape}, weights shape: ${s.shape}.`);let i={x:o,weights:s},a={size:e,binaryOutput:r};return R.runKernel(rh,i,a)}var sy,k6=F(()=>{"use strict";oe();G();J();ce();Z();sy=_({denseBincount_:KEe})});function XEe(n,t,e="NHWC"){let r=T(n,"x","depthToSpace","float32"),o=e==="NHWC"?r.shape[1]:r.shape[2],s=e==="NHWC"?r.shape[2]:r.shape[3],i=e==="NHWC"?r.shape[3]:r.shape[1];O(t>1,()=>`blockSize should be > 1 for depthToSpace, but was: ${t}`),O(o*t>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${o} and ${t}  for depthToSpace with input shape
    ${r.shape}`),O(s*t>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${s} and ${t} for depthToSpace with input shape
        ${r.shape}`),O(i%(t*t)===0,()=>`Dimension size must be evenly divisible by ${t*t} but is ${i} for depthToSpace with input shape ${r.shape}`);let a={x:r},l={blockSize:t,dataFormat:e};return R.runKernel(oh,a,l)}var _0,IO=F(()=>{"use strict";oe();G();J();ce();Z();_0=_({depthToSpace_:XEe})});function YEe(n,t,e,r,o="NHWC",s=[1,1],i){let a=T(n,"x","depthwiseConv2d","float32"),l=T(t,"filter","depthwiseConv2d","float32"),c=a,u=!1;a.rank===3&&(u=!0,c=V(a,[1,a.shape[0],a.shape[1],a.shape[2]])),O(c.rank===4,()=>`Error in depthwiseConv2d: input must be rank 4, but got rank ${c.rank}.`),O(l.rank===4,()=>`Error in depthwiseConv2d: filter must be rank 4, but got rank ${l.rank}.`);let p=o==="NHWC"?c.shape[3]:c.shape[1];O(p===l.shape[2],()=>`Error in depthwiseConv2d: number of input channels (${p}) must match the inChannels dimension in filter ${l.shape[2]}.`),dn("depthwiseConv2d",r,i);let f={x:c,filter:l},d={strides:e,pad:r,dataFormat:o,dilations:s,dimRoundingMode:i},h=R.runKernel(su,f,d);return u?V(h,[h.shape[1],h.shape[2],h.shape[3]]):h}var ca,A0=F(()=>{"use strict";oe();G();J();ce();Nr();Z();Oe();ca=_({depthwiseConv2d_:YEe})});function ZEe(n){let e={x:T(n,"x","diag")};return R.runKernel(ah,e)}var SO,_6=F(()=>{"use strict";oe();G();J();Z();SO=_({diag_:ZEe})});function QEe(n,t,e,r,o=[1,1],s="NHWC"){let i=T(n,"x","dilation2d"),a=T(t,"filter","dilation2d");O(i.rank===3||i.rank===4,()=>`Error in dilation2d: input must be rank 3 or 4, but got rank ${i.rank}.`),O(a.rank===3,()=>`Error in dilation2d: filter must be rank 3, but got rank ${a.rank}.`),O(s==="NHWC",()=>`Error in dilation2d: Only NHWC is currently supported, but got dataFormat of ${s}`);let l=i,c=!1;i.rank===3&&(l=V(i,[1,i.shape[0],i.shape[1],i.shape[2]]),c=!0),O(l.shape[3]===a.shape[2],()=>`Error in dilation2d:  input and filter must have the same depth: ${l.shape[3]} vs ${a.shape[2]}`);let u={x:l,filter:a},p={strides:e,pad:r,dilations:o},f=R.runKernel(iu,u,p);return c?V(f,[f.shape[1],f.shape[2],f.shape[3]]):f}var R0,TO=F(()=>{"use strict";oe();G();J();ce();Z();Oe();R0=_({dilation2d_:QEe})});var os={};_t(os,{assertAndGetBroadcastShape:()=>rt,getBroadcastDims:()=>A6,getReductionAxes:()=>nn});function A6(n,t){let e=n.length,r=[];for(let o=0;o<e;o++){let s=e-1-o,i=n[s]||1;(t[t.length-1-o]||1)>1&&i===1&&r.unshift(s)}return r}function nn(n,t){let e=[];for(let r=0;r<t.length;r++){let o=n[n.length-r-1],s=t.length-r-1,i=t[s];(o==null||o===1&&i>1)&&e.unshift(s)}return e}function rt(n,t){let e=Math.max(n.length,t.length),r=new Array(e);for(let o=0;o<e;o++){let s=n[n.length-o-1];s==null&&(s=1);let i=t[t.length-o-1];if(i==null&&(i=1),s===1)r[e-o-1]=i;else if(i===1)r[e-o-1]=s;else if(s!==i){let a=`Operands could not be broadcast together with shapes ${n} and ${t}.`;throw Error(a)}else r[e-o-1]=s}return r}var bn=F(()=>{"use strict";});function JEe(n,t){let e=T(n,"a","equal","string_or_numeric"),r=T(t,"b","equal","string_or_numeric");[e,r]=bt(e,r),rt(e.shape,r.shape);let o={a:e,b:r};return R.runKernel(rf,o)}var lo,M0=F(()=>{"use strict";oe();G();Vn();J();bn();Z();lo=_({equal_:JEe})});function eNe(n,t,e){let r=T(t,"a","where"),o=T(e,"b","where"),s=T(n,"condition","where","bool"),i=rt(rt(s.shape,r.shape),o.shape),a=la(s,i),l=la(r,i),c=la(o,i),u={condition:a,t:l,e:c};return R.runKernel(ku,u)}var rn,Js=F(()=>{"use strict";oe();G();J();GT();bn();Z();rn=_({where_:eNe})});function tNe(n){let e={x:T(n,"x","zerosLike")};return R.runKernel($u,e)}var ze,Dn=F(()=>{"use strict";oe();G();J();Z();ze=_({zerosLike_:tNe})});function nNe(n,t){let e=T(n,"a","div"),r=T(t,"b","div");[e,r]=bt(e,r);let o=xe(e,r),s=ze(o),i=lo(r,s);return rn(i,s,o)}var O0,EO=F(()=>{"use strict";Vn();J();Zt();M0();Z();Js();Dn();O0=_({divNoNan_:nNe})});function rNe(n,t){let e=T(n,"t1","dot"),r=T(t,"t2","dot");O((e.rank===1||e.rank===2)&&(r.rank===1||r.rank===2),()=>`Error in dot: inputs must all be rank 1 or 2, but got ranks ${e.rank} and ${r.rank}.`);let o=e.rank===1?e.size:e.shape[1],s=r.rank===1?r.size:r.shape[0];if(O(o===s,()=>`Error in dot: inner dimensions of inputs must match, but got ${o} and ${s}.`),e.rank===1&&r.rank===1){let i=V(e,[1,-1]),a=V(r,[-1,1]),l=st(i,a);return V(l,[])}else if(e.rank===1&&r.rank===2){let i=V(e,[1,-1]),a=V(r,[r.shape[0],r.shape[1]]),l=st(i,a);return V(l,[l.size])}else if(e.rank===2&&r.rank===1){let i=V(r,[-1,1]),a=st(e,i);return V(a,[a.size])}else{let i=V(r,[r.shape[0],r.shape[1]]);return st(e,i)}}var F0,NO=F(()=>{"use strict";J();ce();ia();Z();Oe();F0=_({dot_:rNe})});function oNe(n,...t){let e=t.map((o,s)=>T(o,`tensors${s}`,"einsum")),r={equation:n};return R.runKernel(lh,e,r)}var qu,DO=F(()=>{"use strict";oe();G();J();Z();qu=_({einsum_:oNe})});function sNe(n){let e={x:T(n,"x","elu","float32")};return R.runKernel(Sl,e)}var ua,YT=F(()=>{"use strict";oe();G();J();Z();ua=_({elu_:sNe})});function iNe(n,t){let e=T(n,"x","ensureShape","string_or_numeric");if(!xM(e.shape,t))throw new Error(`EnsureShape: Shape of tensor ${e.shape} is not compatible with expected shape ${t}`);return n}var kO,R6=F(()=>{"use strict";J();Or();Z();kO=_({ensureShape_:iNe})});function aNe(n){let t=T(n,"x","erf");O(t.dtype==="int32"||t.dtype==="float32",()=>"Input dtype must be `int32` or `float32`."),t.dtype==="int32"&&(t=fe(t,"float32"));let e={x:t};return R.runKernel(Tl,e)}var mm,M6=F(()=>{"use strict";oe();G();J();ce();vt();Z();mm=_({erf_:aNe})});function _O(n,t){for(let e=0;e<n.length;++e)if(n[n.length-e-1]!==t-1-e)return!1;return!0}function O6(n,t,e){let r=n.length+t.length,o=[],s=0,i=0;for(let a=0;a<r;a++)e.indexOf(a)===-1?o.push(n[s++]):o.push(t[i++]);return o}function AO(n,t){let e=[],r=n.length;for(let s=0;s<r;s++)t.indexOf(s)===-1&&e.push(n[s]);let o=t.map(s=>n[s]);return[e,o]}function wi(n,t){let e=t.map(r=>1);return O6(n,e,t)}function lNe(n,t,e){O(_O(t,e),()=>`${n} supports only inner-most axes for now. Got axes ${t} and rank-${e} input.`)}function RO(n,t){if(_O(n,t))return null;let e=[];for(let r=0;r<t;++r)n.indexOf(r)===-1&&e.push(r);return n.forEach(r=>e.push(r)),e}function P0(n){return n.map((t,e)=>[e,t]).sort((t,e)=>t[1]-e[1]).map(t=>t[0])}function cNe(n,t){let e=[];for(let r=t-n;r<t;++r)e.push(r);return e}var pa=F(()=>{"use strict";ce();});function uNe(n,t=null,e=!1){let o={x:T(n,"x","max")},s={reductionIndices:t,keepDims:e};return R.runKernel(fu,o,s)}var Dr,iy=F(()=>{"use strict";oe();G();J();Z();Dr=_({max_:uNe})});function pNe(n,t=null,e=!1){let o={x:T(n,"x","min")},s={axis:t,keepDims:e};return R.runKernel(gu,o,s)}var lc,ZT=F(()=>{"use strict";oe();G();J();Z();lc=_({min_:pNe})});function fNe(n,t){let e=T(n,"base","pow"),r=T(t,"exp","pow");[e,r]=bt(e,r);let o={a:e,b:r};return R.runKernel(zl,o)}var Yr,Ef=F(()=>{"use strict";oe();G();Vn();J();Z();Yr=_({pow_:fNe})});function Ie(n,t){if((ir(n)&&t!=="string"||Array.isArray(n))&&t!=="complex64")throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if(t==="string"&&ir(n)&&!(n instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return Fo(n,[],[],t)}var kn=F(()=>{"use strict";ce();zu();});function dNe(n){let e={x:T(n,"x","sqrt","float32")};return R.runKernel(Ql,e)}var qt,fa=F(()=>{"use strict";oe();G();J();Z();qt=_({sqrt_:dNe})});function hNe(n){let t=T(n,"x","square"),e={};return R.runKernel("Square",{x:t},e)}var lt,br=F(()=>{"use strict";oe();J();Z();lt=_({square_:hNe})});function mNe(n,t=null,e=!1){let r=T(n,"x","sum");r.dtype==="bool"&&(r=fe(r,"int32"));let o={x:r},s={axis:t,keepDims:e};return R.runKernel(Au,o,s)}var Ee,Jn=F(()=>{"use strict";oe();G();J();vt();Z();Ee=_({sum_:mNe})});function gNe(n,t="euclidean",e=null,r=!1){n=T(n,"x","norm");let o=F6(n,t,e),s=o.shape;if(r){let i=yr(e,n.shape);s=wi(o.shape,i)}return V(o,s)}function F6(n,t,e=null){if(n.rank===0)return fn(n);if(n.rank!==1&&e===null)return F6(V(n,[-1]),t,e);if(n.rank===1||typeof e=="number"||Array.isArray(e)&&e.length===1){if(t===1)return Ee(fn(n),e);if(t===1/0)return Dr(fn(n),e);if(t===-1/0)return lc(fn(n),e);if(t==="euclidean"||t===2)return qt(Ee(Yr(fn(n),Ie(2,"int32")),e));throw new Error(`Error in norm: invalid ord value: ${t}`)}if(Array.isArray(e)&&e.length===2){if(t===1)return Dr(Ee(fn(n),e[0]),e[1]-1);if(t===1/0)return Dr(Ee(fn(n),e[1]),e[0]);if(t===-1/0)return lc(Ee(fn(n),e[1]),e[0]);if(t==="fro"||t==="euclidean")return qt(Ee(lt(n),e));throw new Error(`Error in norm: invalid ord value: ${t}`)}throw new Error(`Error in norm: invalid axis: ${e}`)}var cc,$0=F(()=>{"use strict";J();ce();am();pa();iy();ZT();Z();Ef();Oe();kn();fa();br();Jn();cc=_({norm_:gNe})});function xNe(n,t=null,e=!1){return cc(n,"euclidean",t,e)}var L0,OO=F(()=>{"use strict";$0();Z();L0=_({euclideanNorm_:xNe})});function yNe(n){let e={x:T(n,"x","exp")};return R.runKernel(El,e)}var vn,uc=F(()=>{"use strict";oe();G();J();Z();vn=_({exp_:yNe})});function bNe(n,t=0){let e=T(n,"x","expandDims","string_or_numeric");O(t<=e.rank,()=>"Axis must be <= rank of the tensor");let r={input:e},o={dim:t};return R.runKernel(au,r,o)}var Cn,ay=F(()=>{"use strict";oe();G();J();ce();Z();Cn=_({expandDims_:bNe})});function vNe(n){let e={x:T(n,"x","expm1")};return R.runKernel(Nl,e)}var B0,P6=F(()=>{"use strict";oe();G();J();Z();B0=_({expm1_:vNe})});function wNe(n,t){let e=T(n,"x","tile","string_or_numeric");O(e.rank===t.length,()=>`Error in transpose: rank of input ${e.rank} must match length of reps ${t}.`);let r={x:e},o={reps:t};return R.runKernel(Ji,r,o)}var $r,ly=F(()=>{"use strict";oe();G();J();ce();Z();$r=_({tile_:wNe})});function CNe(n,t,e,r="float32"){t==null&&(t=n);let o=Pe([n,t],r),s=n<=t?n:t;for(let a=0;a<s;++a)o.set(1,a,a);let i=V(o.toTensor(),[n,t]);if(e==null)return i;if(e.length===1)return $r(Cn(i,0),[e[0],1,1]);if(e.length===2)return $r(Cn(Cn(i,0),0),[e[0],e[1],1,1]);if(e.length===3)return $r(Cn(Cn(Cn(i,0),0),0),[e[0],e[1],e[2],1,1]);throw new Error(`eye() currently supports only 1D and 2D batchShapes, but received ${e.length}D.`)}var Nf,FO=F(()=>{"use strict";ju();ay();Z();Oe();ly();Nf=_({eye_:CNe})});function INe(n){let e={x:T(n,"x","floor","float32")};return R.runKernel(Dl,e)}var da,QT=F(()=>{"use strict";oe();G();J();Z();da=_({floor_:INe})});function SNe(n,t,e=0,r=0){let o=T(n,"x","gather"),s=T(t,"indices","gather","int32"),i={x:o,indices:s},a={axis:e,batchDims:r};return R.runKernel(cu,i,a)}var ha,z0=F(()=>{"use strict";oe();G();J();Z();ha=_({gather_:SNe})});function TNe(n,t){let e=T(n,"a","greater","string_or_numeric"),r=T(t,"b","greater","string_or_numeric");[e,r]=bt(e,r),rt(e.shape,r.shape);let o={a:e,b:r};return R.runKernel(of,o)}var _n,pc=F(()=>{"use strict";oe();G();Vn();J();bn();Z();_n=_({greater_:TNe})});function ENe(n,t){let e=T(n,"a","greaterEqual","string_or_numeric"),r=T(t,"b","greaterEqual","string_or_numeric");[e,r]=bt(e,r),rt(e.shape,r.shape);let o={a:e,b:r};return R.runKernel(_l,o)}var Co,gm=F(()=>{"use strict";oe();G();Vn();J();bn();Z();Co=_({greaterEqual_:ENe})});function NNe(n){let e={input:T(n,"input","imag")};return R.runKernel(mh,e)}var Ku,V0=F(()=>{"use strict";oe();G();J();Z();Ku=_({imag_:NNe})});function DNe(n){let e={x:T(n,"x","isFinite")};return R.runKernel(Al,e)}var U0,$6=F(()=>{"use strict";oe();G();J();Z();U0=_({isFinite_:DNe})});function kNe(n){let e={x:T(n,"x","isInf")};return R.runKernel(Rl,e)}var j0,L6=F(()=>{"use strict";oe();G();J();Z();j0=_({isInf_:kNe})});function _Ne(n){let e={x:T(n,"x","isNaN")};return R.runKernel(Ml,e)}var G0,B6=F(()=>{"use strict";oe();G();J();Z();G0=_({isNaN_:_Ne})});function ANe(n,t=.2){let r={x:T(n,"x","leakyRelu")},o={alpha:t};return R.runKernel(uu,r,o)}var Xu,JT=F(()=>{"use strict";oe();G();J();Z();Xu=_({leakyRelu_:ANe})});function RNe(n,t){let e=T(n,"a","less","string_or_numeric"),r=T(t,"b","less","string_or_numeric");[e,r]=bt(e,r),rt(e.shape,r.shape);let o={a:e,b:r};return R.runKernel(sf,o)}var fc,W0=F(()=>{"use strict";oe();G();Vn();J();bn();Z();fc=_({less_:RNe})});function MNe(n,t){let e=T(n,"a","lessEqual","string_or_numeric"),r=T(t,"b","lessEqual","string_or_numeric");[e,r]=bt(e,r),rt(e.shape,r.shape);let o={a:e,b:r};return R.runKernel(af,o)}var ss,Df=F(()=>{"use strict";oe();G();Vn();J();bn();Z();ss=_({lessEqual_:MNe})});function PO(n,t,e){if(e<=0)throw new Error("The number of values should be positive.");let r={start:n,stop:t,num:e};return R.runKernel(gh,{},r)}var z6=F(()=>{"use strict";oe();G();});function ONe(n,t=5,e=1,r=1,o=.5){let s=T(n,"x","localResponseNormalization");O(s.rank===4||s.rank===3,()=>`Error in localResponseNormalization: x must be rank 3 or 4 but got
               rank ${s.rank}.`),O(Gc(t),()=>`Error in localResponseNormalization: depthRadius must be an integer but got depthRadius ${t}.`);let i=s,a=!1;s.rank===3&&(a=!0,i=V(s,[1,s.shape[0],s.shape[1],s.shape[2]]));let l={x:i},c={depthRadius:t,bias:e,alpha:r,beta:o},u=R.runKernel(pu,l,c);return a?V(u,[u.shape[1],u.shape[2],u.shape[3]]):u}var H0,$O=F(()=>{"use strict";oe();G();J();ce();Z();Oe();H0=_({localResponseNormalization_:ONe})});function FNe(n){let e={x:T(n,"x","log","float32")};return R.runKernel(Ol,e)}var kr,cy=F(()=>{"use strict";oe();G();J();Z();kr=_({log_:FNe})});function PNe(n){let e={x:T(n,"x","log1p")};return R.runKernel(Fl,e)}var Yu,LO=F(()=>{"use strict";oe();G();J();Z();Yu=_({log1p_:PNe})});function V6(n){return O(ul(n),()=>"The f passed in grad(f) must be a function"),(t,e)=>{let r=T(t,"x","tf.grad","string_or_numeric"),o=e!=null?T(e,"dy","tf.grad"):null;return R.tidy(()=>{let{value:s,grads:i}=R.gradients(()=>n(r),[r],o);return o!=null&&En(s.shape,o.shape,"The shape of dy passed in grad(f)(x, dy) must match the shape returned by f(x)"),e1(i),i[0]})}}function U6(n){return O(ul(n),()=>"The f passed in grads(f) must be a function"),(t,e)=>{O(Array.isArray(t),()=>"The args passed in grads(f)(args) must be an array of `Tensor`s or `TensorLike`s");let r=Bu(t,"args","tf.grads","string_or_numeric"),o=e!=null?T(e,"dy","tf.grads"):null;return R.tidy(()=>{let{value:s,grads:i}=R.gradients(()=>n(...r),r,o);return o!=null&&En(s.shape,o.shape,"The shape of dy passed in grads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),e1(i),i})}}function j6(n){return O(ul(n),()=>"The f passed in valueAndGrad(f) must be a function"),(t,e)=>{O(t instanceof tt,()=>"The x passed in valueAndGrad(f)(x) must be a tensor"),O(e==null||e instanceof tt,()=>"The dy passed in valueAndGrad(f)(x, dy) must be a tensor");let{grads:r,value:o}=R.gradients(()=>n(t),[t],e);return e1(r),{grad:r[0],value:o}}}function G6(n){return O(ul(n),()=>"The f passed in valueAndGrads(f) must be a function"),(t,e)=>{O(Array.isArray(t)&&t.every(o=>o instanceof tt),()=>"The args passed in valueAndGrads(f)(args) must be array of tensors"),O(e==null||e instanceof tt,()=>"The dy passed in valueAndGrads(f)(args, dy) must be a tensor");let r=R.gradients(()=>n(...t),t,e);return e!=null&&En(r.value.shape,e.shape,"The shape of dy passed in valueAndGrads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),e1(r.grads),r}}function q0(n,t){O(ul(n),()=>"The f passed in variableGrads(f) must be a function"),O(t==null||Array.isArray(t)&&t.every(c=>c instanceof sc),()=>"The varList passed in variableGrads(f, varList) must be an array of variables");let e=t!=null;if(!e){t=[];for(let c in R.registeredVariables)t.push(R.registeredVariables[c])}let r=e?t.filter(c=>!c.trainable):null,o=t.length;t=t.filter(c=>c.trainable),O(t.length>0,()=>`variableGrads() expects at least one of the input variables to be trainable, but none of the ${o} variables is trainable.`);let s=!0,{value:i,grads:a}=R.gradients(n,t,null,s);O(a.some(c=>c!=null),()=>"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."),O(i.rank===0,()=>`The f passed in variableGrads(f) must return a scalar, but it returned a rank-${i.rank} tensor`);let l={};return t.forEach((c,u)=>{a[u]!=null&&(l[c.name]=a[u])}),r?.forEach(c=>l[c.name]=null),{value:i,grads:l}}function Io(n){return R.customGrad(n)}function e1(n){if(n.filter(e=>e==null).length>0)throw new Error(`Cannot compute gradient of y=f(x) with respect to x. Make sure that
    the f you passed encloses all operations that lead from x to y.`)}var Zu=F(()=>{"use strict";oe();ue();J();ce();});function $Ne(n){let e={x:T(n,"x","neg")};return R.runKernel(yu,e)}var pt,Lr=F(()=>{"use strict";oe();G();J();Z();pt=_({neg_:$Ne})});function LNe(n){let e={x:T(n,"x","softplus")};return R.runKernel(Zl,e)}var Ci,BO=F(()=>{"use strict";oe();G();J();Z();Ci=_({softplus_:LNe})});function BNe(n){let t=T(n,"x","logSigmoid");return Io(r=>({value:pt(Ci(pt(r))),gradFunc:i=>B(i,Pr(pt(r)))}))(t)}var K0,W6=F(()=>{"use strict";Zu();J();Ue();Lr();Z();ty();BO();K0=_({logSigmoid_:BNe})});function zNe(n,t){let e=T(n,"a","sub"),r=T(t,"b","sub");[e,r]=bt(e,r);let o={a:e,b:r};return R.runKernel(ec,o)}var be,on=F(()=>{"use strict";oe();G();Vn();J();Z();be=_({sub_:zNe})});function VNe(n,t=-1){let e=T(n,"logits","logSoftmax");if(t===-1&&(t=e.rank-1),t!==e.rank-1)throw Error(`Log Softmax along a non-last dimension is not yet supported. Logits was rank ${e.rank} and axis was ${t}`);return Io((o,s)=>{let a=Dr(o,t,!0),l=be(o,a),c=be(fe(l,"float32"),kr(Ee(vn(l),t,!0)));return s([c]),{value:c,gradFunc:(p,f)=>{let[d]=f,h=!0,m=vn(d);return be(p,B(Ee(p,t,h),m))}}})(e)}var xm,H6=F(()=>{"use strict";Zu();J();vt();uc();cy();iy();Ue();Z();on();Jn();xm=_({logSoftmax_:VNe})});function UNe(n,t=null,e=!1){let r=T(n,"x","logSumExp"),o=yr(t,r.shape),s=Dr(r,o,!0),i=be(r,s),a=vn(i),l=Ee(a,o),c=kr(l),u=ae(V(s,c.shape),c);if(e){let p=wi(u.shape,o);return V(u,p)}return u}var Qu,t1=F(()=>{"use strict";J();ce();Nn();pa();uc();cy();iy();Z();Oe();on();Jn();Qu=_({logSumExp_:UNe})});function jNe(n,t){let e=T(n,"a","logicalAnd","bool"),r=T(t,"b","logicalAnd","bool");rt(e.shape,r.shape);let o={a:e,b:r};return R.runKernel(lf,o)}var Zr,ym=F(()=>{"use strict";oe();G();J();bn();Z();Zr=_({logicalAnd_:jNe})});function GNe(n){let e={x:T(n,"x","logicalNot","bool")};return R.runKernel(cf,e)}var Ju,X0=F(()=>{"use strict";oe();G();J();Z();Ju=_({logicalNot_:GNe})});function WNe(n,t){let e=T(n,"a","logicalOr","bool"),r=T(t,"b","logicalOr","bool");rt(e.shape,r.shape);let o={a:e,b:r};return R.runKernel(uf,o)}var bm,n1=F(()=>{"use strict";oe();G();J();bn();Z();bm=_({logicalOr_:WNe})});function HNe(n,t){let e=T(n,"a","logicalXor","bool"),r=T(t,"b","logicalXor","bool");return rt(e.shape,r.shape),Zr(bm(n,t),Ju(Zr(n,t)))}var Y0,zO=F(()=>{"use strict";J();bn();ym();X0();n1();Z();Y0=_({logicalXor_:HNe})});function qNe(n,t,e="left"){let r=T(n,"sortedSequence","searchSorted"),o=T(t,"values","searchSorted"),s=r.shape[r.shape.length-1],i=o.shape[o.shape.length-1],a=V(r,[-1,s]),l=V(o,[-1,i]);if(a.rank<2)throw new Error("Sorted input argument must be at least 2-dimensional");if(a.shape[0]!==l.shape[0])throw new Error("Leading dimension of 'sortedSequence' and 'values' must match.");if(yt(l.shape)>=r1)throw new Error(`values tensor size must less than ${r1}`);if(a.shape[1]>=r1)throw new Error(`trailing dim_size must less than ${r1} for int32 output type, was ${a.shape[1]}`);let c={sortedSequence:a,values:l},u={side:e};return R.runKernel(Oh,c,u)}var r1,uy,o1=F(()=>{"use strict";oe();G();J();Or();Z();Oe();r1=2147483648;uy=_({searchSorted_:qNe})});function VO(n,t){return uy(n,t,"left")}var q6=F(()=>{"use strict";o1();});function KNe(n,t,e,r,o){let s=T(n,"x","maxPool"),i=1,a=s,l=!1;s.rank===3&&(l=!0,a=V(s,[1,s.shape[0],s.shape[1],s.shape[2]])),O(a.rank===4,()=>`Error in maxPool: input must be rank 4 but got rank ${a.rank}.`),O(Xr(e,i),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${e} and dilations '${i}'`),dn("maxPool",r,o);let c={x:a},u={filterSize:t,strides:e,pad:r,dimRoundingMode:o},p=R.runKernel(du,c,u);return l?V(p,[p.shape[1],p.shape[2],p.shape[3]]):p}var ep,s1=F(()=>{"use strict";oe();G();J();ce();Nr();Z();Oe();ep=_({maxPool_:KNe})});function XNe(n,t=[1,1,1],e,r,o,s="NDHWC"){let i=T(n,"x","maxPool3d"),a=i,l=!1;i.rank===4&&(l=!0,a=V(i,[1,i.shape[0],i.shape[1],i.shape[2],i.shape[3]])),O(a.rank===5,()=>`Error in maxPool3d: x must be rank 5 but got rank ${a.rank}.`),O(s==="NDHWC",()=>`Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of ${s}`),dn("maxPool3d",r,o);let c={x:a},u={filterSize:t,strides:e,pad:r,dimRoundingMode:o,dataFormat:s},p=R.runKernel(hu,c,u);return l?V(p,[p.shape[1],p.shape[2],p.shape[3],p.shape[4]]):p}var Z0,K6=F(()=>{"use strict";oe();G();J();ce();Nr();Z();Oe();Z0=_({maxPool3d_:XNe})});function YNe(n,t,e,r,o=!1){let i={x:T(n,"x","maxPoolWithArgmax")},a={filterSize:t,strides:e,pad:r,includeBatchInIndex:o},l=R.runKernel(vh,i,a);return{result:l[0],indexes:l[1]}}var UO,X6=F(()=>{"use strict";oe();G();J();Z();UO=_({maxPoolWithArgmax_:YNe})});function ZNe(n,t){let e=T(n,"a","maximum"),r=T(t,"b","maximum");[e,r]=bt(e,r),e.dtype==="bool"&&(e=fe(e,"int32"),r=fe(r,"int32")),rt(e.shape,r.shape);let o={a:e,b:r};return R.runKernel(Pl,o)}var $o,Q0=F(()=>{"use strict";oe();G();Vn();J();bn();vt();Z();$o=_({maximum_:ZNe})});function QNe(n,t=null,e=!1){let o={x:T(n,"x","mean")},s={axis:t,keepDims:e};return R.runKernel(mu,o,s)}var sn,J0=F(()=>{"use strict";oe();G();J();Z();sn=_({mean_:QNe})});function Kt(n,t="float32"){if(Bn(n),t==="complex64"){let r=Kt(n,"float32"),o=Kt(n,"float32");return Oo(r,o)}let e=Mx(yt(n),t);return R.makeTensor(e,n,t)}var py=F(()=>{"use strict";oe();ce();bf();});function er(n,t="float32"){if(Bn(n),t==="complex64"){let r=er(n,"float32"),o=Kt(n,"float32");return Oo(r,o)}let e=Hv(yt(n),t);return R.makeTensor(e,n,t)}var vm=F(()=>{"use strict";oe();ce();Or();bf();py();});function jO(n,t,{indexing:e="xy"}={}){if(e!=="xy"&&e!=="ij")throw new TypeError(`${e} is not a valid third argument to meshgrid`);if(n===void 0)return[];let r=T(n,"x","meshgrid",n instanceof tt?n.dtype:"float32");if(t===void 0)return[r];let o=T(t,"y","meshgrid",t instanceof tt?t.dtype:"float32"),s=yt(r.shape),i=yt(o.shape);return e==="xy"?(r=V(r,[1,-1]),o=V(o,[-1,1]),[st(er([i,1],r.dtype),r),st(o,er([1,s],o.dtype))]):(r=V(r,[-1,1]),o=V(o,[1,-1]),[st(r,er([1,i],r.dtype)),st(er([s,1],o.dtype),o)])}var Y6=F(()=>{"use strict";ia();vm();Oe();ue();J();Or();});function JNe(n,t){let e=T(n,"a","minimum"),r=T(t,"b","minimum");[e,r]=bt(e,r),e.dtype==="bool"&&(e=fe(e,"int32"),r=fe(r,"int32")),rt(e.shape,r.shape);let o={a:e,b:r};return R.runKernel($l,o)}var Ns,ew=F(()=>{"use strict";oe();G();Vn();J();bn();vt();Z();Ns=_({minimum_:JNe})});function eDe(n,t,e){O(e==="reflect"||e==="symmetric",()=>`Invalid mode. Mode must be either reflect or symmetric. Got ${e}.`);let r=T(n,"x","mirrorPad");if(r.rank===0)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");O(t.length===r.rank,()=>`Padding doesn't match input. Must be ${r.rank}. Got ${t.length}.`);let o=e==="reflect"?1:0;for(let a=0;a<r.rank;a++)O(t[a].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),O(t[a][0]>=0&&t[a][0]<=r.shape[a]-o&&t[a][1]>=0&&t[a][1]<=r.shape[a]-o,()=>`Padding in dimension ${a} cannot be greater than or equal to ${r.shape[a]-o} or less than 0 for input of shape ${r.shape}`);let s={paddings:t,mode:e},i={x:r};return R.runKernel(xu,i,s)}var tw,GO=F(()=>{"use strict";oe();G();J();ce();Z();tw=_({mirrorPad_:eDe})});function tDe(n,t){let e=T(n,"a","mod"),r=T(t,"b","mod");[e,r]=bt(e,r);let o={a:e,b:r};return R.runKernel(Ll,o)}var nw,WO=F(()=>{"use strict";oe();G();Vn();J();Z();nw=_({mod_:tDe})});function nDe(n,t=null,e=!1){n=T(n,"x","moments");let r=yr(t,n.shape),o=sn(n,r,e),s=o.shape;e||(s=wi(o.shape,r));let i=lt(be(fe(n,"float32"),V(o,s))),a=sn(i,r,e);return{mean:o,variance:a}}var kf,Z6=F(()=>{"use strict";J();ce();pa();vt();J0();Z();Oe();br();on();kf=_({moments_:nDe})});function rDe(n,t,e,r){let o=T(t,"data","multiRNNCell"),s=Bu(e,"c","multiRNNCell"),i=Bu(r,"h","multiRNNCell"),a=o,l=[];for(let p=0;p<n.length;p++){let f=n[p](a,s[p],i[p]);l.push(f[0]),l.push(f[1]),a=f[1]}let c=[],u=[];for(let p=0;p<l.length;p+=2)c.push(l[p]),u.push(l[p+1]);return[c,u]}var HO,Q6=F(()=>{"use strict";J();Z();HO=_({multiRNNCell_:rDe})});function oDe(n,t,e,r=!1){let o=T(n,"logits","multinomial"),s=o.size,i=o.rank;if(s<2)throw new Error(`Error in multinomial: you need at least 2 outcomes, but got ${s}.`);if(i>2)throw new Error(`Rank of probabilities must be 1 or 2, but is ${i}`);e=e||Math.random();let l={logits:i===1?V(o,[1,-1]):o},c={numSamples:t,seed:e,normalized:r},u=R.runKernel(wh,l,c);return i===1?V(u,[u.size]):u}var qO,J6=F(()=>{"use strict";oe();G();J();Z();Oe();qO=_({multinomial_:oDe})});function sDe(n,t){let e=T(n,"a","notEqual","string_or_numeric"),r=T(t,"b","notEqual","string_or_numeric");[e,r]=bt(e,r),rt(e.shape,r.shape);let o={a:e,b:r};return R.runKernel(pf,o)}var Ii,i1=F(()=>{"use strict";oe();G();Vn();J();bn();Z();Ii=_({notEqual_:sDe})});function iDe(n,t,e=1,r=0,o="int32"){if(t<2)throw new Error(`Error in oneHot: depth must be >=2, but it is ${t}`);let i={indices:T(n,"indices","oneHot","int32")},a={dtype:o,depth:t,onValue:e,offValue:r};return R.runKernel(vu,i,a)}var ma,a1=F(()=>{"use strict";oe();G();J();Z();ma=_({oneHot_:iDe})});function aDe(n){let e={x:T(n,"x","onesLike")};return R.runKernel(bu,e)}var vr,e8=F(()=>{"use strict";oe();G();J();Z();vr=_({onesLike_:aDe})});function lDe(n,t){let e=T(n,"v1","outerProduct"),r=T(t,"v2","outerProduct");O(e.rank===1&&r.rank===1,()=>`Error in outerProduct: inputs must be rank 1, but got ranks ${e.rank} and ${r.rank}.`);let o=V(e,[-1,1]),s=V(r,[1,-1]);return st(o,s)}var KO,t8=F(()=>{"use strict";J();ce();ia();Z();Oe();KO=_({outerProduct_:lDe})});function cDe(n,t,e=0){let r=T(n,"x","pad");if(r.rank===0)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");let o={paddings:t,constantValue:e},s={x:r};return R.runKernel(Cu,s,o)}var So,_f=F(()=>{"use strict";oe();G();J();Z();So=_({pad_:cDe})});function uDe(n,t,e=0){return O(t.length===2,()=>"Invalid number of paddings. Must be length of 2."),So(n,[t],e)}var XO,n8=F(()=>{"use strict";ce();Z();_f();XO=_({pad1d_:uDe})});function pDe(n,t,e=0){return O(t.length===2&&t[0].length===2&&t[1].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),So(n,t,e)}var YO,r8=F(()=>{"use strict";ce();Z();_f();YO=_({pad2d_:pDe})});function fDe(n,t,e=0){return O(t.length===3&&t[0].length===2&&t[1].length===2&&t[2].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),So(n,t,e)}var ZO,o8=F(()=>{"use strict";ce();Z();_f();ZO=_({pad3d_:fDe})});function dDe(n,t,e=0){return O(t.length===4&&t[0].length===2&&t[1].length===2&&t[2].length===2&&t[3].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),So(n,t,e)}var QO,s8=F(()=>{"use strict";ce();Z();_f();QO=_({pad4d_:dDe})});function hDe(n,t,e){let r=T(n,"x","spaceToBatchND");O(r.rank>=1+t.length,()=>`input rank ${r.rank} should be > than [blockShape] ${t.length}`),O(e.length===t.length,()=>`paddings.shape[0] ${e.length} must be equal to [blockShape] ${t.length}`),O(r.shape.reduce((i,a,l)=>l>0&&l<=t.length?i&&(a+e[l-1][0]+e[l-1][1])%t[l-1]===0:i,!0),()=>`input spatial dimensions ${r.shape.slice(1)} with paddings ${e.toString()} must be divisible by blockShapes ${t.toString()}`);let o={x:r},s={blockShape:t,paddings:e};return R.runKernel(Ru,o,s)}var tp,rw=F(()=>{"use strict";oe();G();J();ce();Z();tp=_({spaceToBatchND_:hDe})});function mDe(n,t,e,r,o,s,i){o==null&&(o=[1,1]),s==null&&(s=1),r===0&&(r="valid");let a=T(n,"x","maxPool"),l=a,c=!1;a.rank===3&&(c=!0,l=V(a,[1,a.shape[0],a.shape[1],a.shape[2]])),O(Xr(s,o),()=>`Error in pool: Either strides or dilations must be 1. Got strides ${s} and dilations '${o}'`);let u=fO(l.shape,t,s,o,r),p=[u.dilationHeight,u.dilationWidth],f;r==="same"?f=xDe([u.filterHeight,u.filterWidth],p):f=[[0,0],[0,0]];let d=p[0]===1&&p[1]===1,[h,m]=gDe([u.inHeight,u.inWidth],p,f),g=d?r:"valid",x=d?l:tp(l,p,h),w=(e==="avg"?()=>Gu(x,t,s,g,i):()=>ep(x,t,s,g,i))(),v=d?w:Wu(w,p,m);return c?V(v,[v.shape[1],v.shape[2],v.shape[3]]):v}function gDe(n,t,e){let r=e.map(u=>u[0]),o=e.map(u=>u[1]),s=n.concat(r,o),i=t.map((u,p)=>(u-s[p]%u)%u),a=o.map((u,p)=>u+i[p]),l=t.map((u,p)=>[r[p],a[p]]),c=t.map((u,p)=>[0,i[p]]);return[l,c]}function xDe(n,t){let r=n.map((i,a)=>i+(i-1)*(t[a]-1)).map(i=>i-1),o=r.map(i=>Math.floor(i/2)),s=r.map((i,a)=>i-o[a]);return r.map((i,a)=>[o[a],s[a]])}var ow,JO=F(()=>{"use strict";J();ce();jT();y0();Nr();s1();Z();Oe();rw();ow=_({pool_:mDe})});function yDe(n,t){let e=T(n,"x","prelu"),r=T(t,"alpha","prelu"),o={x:e,alpha:r};return R.runKernel(Iu,o)}var np,l1=F(()=>{"use strict";oe();G();J();Z();np=_({prelu_:yDe})});function bDe(n,t=null,e=!1){let r=T(n,"x","prod");r.dtype==="bool"&&(r=fe(r,"int32"));let o={x:r},s={axis:t,keepDims:e};return R.runKernel(Su,o,s)}var sw,eF=F(()=>{"use strict";oe();G();J();vt();Z();sw=_({prod_:bDe})});function vDe(n,t,e,r){let o=n.map((u,p)=>T(u,`tensors${p}`,"raggedGather","int32")),s=T(t,"paramsDenseValues","raggedGather"),i=T(e,"indices","raggedGather","int32"),a={paramsNestedSplits:o,paramsDenseValues:s,indices:i},l={outputRaggedRank:r},c=R.runKernel(Th,a,l);return{outputNestedSplits:c.slice(0,c.length-1),outputDenseValues:c[c.length-1]}}var tF,i8=F(()=>{"use strict";oe();G();J();Z();tF=_({raggedGather_:vDe})});function wDe(n,t,e){let r=T(n,"starts","raggedRange"),o=T(t,"limits","raggedRange",r.dtype),s=T(e,"deltas","raggedRange",r.dtype),i={starts:r,limits:o,deltas:s},a=R.runKernel(Eh,i);return{rtNestedSplits:a[0],rtDenseValues:a[1]}}var nF,a8=F(()=>{"use strict";oe();G();J();Z();nF=_({raggedRange_:wDe})});function CDe(n,t,e,r,o){let s=T(n,"shape","raggedTensorToTensor","int32"),i=T(t,"values","raggedTensorToTensor"),a=T(e,"defaultValue","raggedTensorToTensor",i.dtype),l=r.map((p,f)=>T(p,`tensors${f}`,"raggedTensorToTensor","int32")),c={shape:s,values:i,defaultValue:a,rowPartitionTensors:l},u={rowPartitionTypes:o};return R.runKernel(Nh,c,u)}var rF,l8=F(()=>{"use strict";oe();G();J();Z();rF=_({raggedTensorToTensor_:CDe})});function IDe(n,t,e){Bn(n);let r=yt(n),o=null;if(e==null||e==="float32")o=new Float32Array(r);else if(e==="int32")o=new Int32Array(r);else if(e==="bool")o=new Uint8Array(r);else throw new Error(`Unknown data type ${e}`);for(let s=0;s<r;s++)o[s]=t();return R.makeTensor(o,n,e)}var oF,c8=F(()=>{"use strict";oe();ce();Or();Z();oF=_({rand_:IDe})});var p8=hs((u8,sF)=>{"use strict";(function(n,t,e){function r(a){var l=this,c=i();l.next=function(){var u=2091639*l.s0+l.c*23283064365386963e-26;return l.s0=l.s1,l.s1=l.s2,l.s2=u-(l.c=u|0)},l.c=1,l.s0=c(" "),l.s1=c(" "),l.s2=c(" "),l.s0-=c(a),l.s0<0&&(l.s0+=1),l.s1-=c(a),l.s1<0&&(l.s1+=1),l.s2-=c(a),l.s2<0&&(l.s2+=1),c=null}function o(a,l){return l.c=a.c,l.s0=a.s0,l.s1=a.s1,l.s2=a.s2,l}function s(a,l){var c=new r(a),u=l&&l.state,p=c.next;return p.int32=function(){return c.next()*4294967296|0},p.double=function(){return p()+(p()*2097152|0)*11102230246251565e-32},p.quick=p,u&&(typeof u=="object"&&o(u,c),p.state=function(){return o(c,{})}),p}function i(){var a=4022871197,l=function(c){c=String(c);for(var u=0;u<c.length;u++){a+=c.charCodeAt(u);var p=.02519603282416938*a;a=p>>>0,p-=a,p*=a,a=p>>>0,p-=a,a+=p*4294967296}return(a>>>0)*23283064365386963e-26};return l}t&&t.exports?t.exports=s:e&&e.amd?e(function(){return s}):this.alea=s})(u8,typeof sF=="object"&&sF,typeof define=="function"&&define)});var d8=hs((f8,iF)=>{"use strict";(function(n,t,e){function r(i){var a=this,l="";a.x=0,a.y=0,a.z=0,a.w=0,a.next=function(){var u=a.x^a.x<<11;return a.x=a.y,a.y=a.z,a.z=a.w,a.w^=a.w>>>19^u^u>>>8},i===(i|0)?a.x=i:l+=i;for(var c=0;c<l.length+64;c++)a.x^=l.charCodeAt(c)|0,a.next()}function o(i,a){return a.x=i.x,a.y=i.y,a.z=i.z,a.w=i.w,a}function s(i,a){var l=new r(i),c=a&&a.state,u=function(){return(l.next()>>>0)/4294967296};return u.double=function(){do var p=l.next()>>>11,f=(l.next()>>>0)/4294967296,d=(p+f)/(1<<21);while(d===0);return d},u.int32=l.next,u.quick=u,c&&(typeof c=="object"&&o(c,l),u.state=function(){return o(l,{})}),u}t&&t.exports?t.exports=s:e&&e.amd?e(function(){return s}):this.xor128=s})(f8,typeof iF=="object"&&iF,typeof define=="function"&&define)});var m8=hs((h8,aF)=>{"use strict";(function(n,t,e){function r(i){var a=this,l="";a.next=function(){var u=a.x^a.x>>>2;return a.x=a.y,a.y=a.z,a.z=a.w,a.w=a.v,(a.d=a.d+362437|0)+(a.v=a.v^a.v<<4^(u^u<<1))|0},a.x=0,a.y=0,a.z=0,a.w=0,a.v=0,i===(i|0)?a.x=i:l+=i;for(var c=0;c<l.length+64;c++)a.x^=l.charCodeAt(c)|0,c==l.length&&(a.d=a.x<<10^a.x>>>4),a.next()}function o(i,a){return a.x=i.x,a.y=i.y,a.z=i.z,a.w=i.w,a.v=i.v,a.d=i.d,a}function s(i,a){var l=new r(i),c=a&&a.state,u=function(){return(l.next()>>>0)/4294967296};return u.double=function(){do var p=l.next()>>>11,f=(l.next()>>>0)/4294967296,d=(p+f)/(1<<21);while(d===0);return d},u.int32=l.next,u.quick=u,c&&(typeof c=="object"&&o(c,l),u.state=function(){return o(l,{})}),u}t&&t.exports?t.exports=s:e&&e.amd?e(function(){return s}):this.xorwow=s})(h8,typeof aF=="object"&&aF,typeof define=="function"&&define)});var x8=hs((g8,lF)=>{"use strict";(function(n,t,e){function r(i){var a=this;a.next=function(){var c=a.x,u=a.i,p,f,d;return p=c[u],p^=p>>>7,f=p^p<<24,p=c[u+1&7],f^=p^p>>>10,p=c[u+3&7],f^=p^p>>>3,p=c[u+4&7],f^=p^p<<7,p=c[u+7&7],p=p^p<<13,f^=p^p<<9,c[u]=f,a.i=u+1&7,f};function l(c,u){var p,f,d=[];if(u===(u|0))f=d[0]=u;else for(u=""+u,p=0;p<u.length;++p)d[p&7]=d[p&7]<<15^u.charCodeAt(p)+d[p+1&7]<<13;for(;d.length<8;)d.push(0);for(p=0;p<8&&d[p]===0;++p);for(p==8?f=d[7]=-1:f=d[p],c.x=d,c.i=0,p=256;p>0;--p)c.next()}l(a,i)}function o(i,a){return a.x=i.x.slice(),a.i=i.i,a}function s(i,a){i==null&&(i=+new Date);var l=new r(i),c=a&&a.state,u=function(){return(l.next()>>>0)/4294967296};return u.double=function(){do var p=l.next()>>>11,f=(l.next()>>>0)/4294967296,d=(p+f)/(1<<21);while(d===0);return d},u.int32=l.next,u.quick=u,c&&(c.x&&o(c,l),u.state=function(){return o(l,{})}),u}t&&t.exports?t.exports=s:e&&e.amd?e(function(){return s}):this.xorshift7=s})(g8,typeof lF=="object"&&lF,typeof define=="function"&&define)});var b8=hs((y8,cF)=>{"use strict";(function(n,t,e){function r(i){var a=this;a.next=function(){var c=a.w,u=a.X,p=a.i,f,d;return a.w=c=c+1640531527|0,d=u[p+34&127],f=u[p=p+1&127],d^=d<<13,f^=f<<17,d^=d>>>15,f^=f>>>12,d=u[p]=d^f,a.i=p,d+(c^c>>>16)|0};function l(c,u){var p,f,d,h,m,g=[],x=128;for(u===(u|0)?(f=u,u=null):(u=u+"\0",f=0,x=Math.max(x,u.length)),d=0,h=-32;h<x;++h)u&&(f^=u.charCodeAt((h+32)%u.length)),h===0&&(m=f),f^=f<<10,f^=f>>>15,f^=f<<4,f^=f>>>13,h>=0&&(m=m+1640531527|0,p=g[h&127]^=f+m,d=p==0?d+1:0);for(d>=128&&(g[(u&&u.length||0)&127]=-1),d=127,h=4*128;h>0;--h)f=g[d+34&127],p=g[d=d+1&127],f^=f<<13,p^=p<<17,f^=f>>>15,p^=p>>>12,g[d]=f^p;c.w=m,c.X=g,c.i=d}l(a,i)}function o(i,a){return a.i=i.i,a.w=i.w,a.X=i.X.slice(),a}function s(i,a){i==null&&(i=+new Date);var l=new r(i),c=a&&a.state,u=function(){return(l.next()>>>0)/4294967296};return u.double=function(){do var p=l.next()>>>11,f=(l.next()>>>0)/4294967296,d=(p+f)/(1<<21);while(d===0);return d},u.int32=l.next,u.quick=u,c&&(c.X&&o(c,l),u.state=function(){return o(l,{})}),u}t&&t.exports?t.exports=s:e&&e.amd?e(function(){return s}):this.xor4096=s})(y8,typeof cF=="object"&&cF,typeof define=="function"&&define)});var w8=hs((v8,uF)=>{"use strict";(function(n,t,e){function r(i){var a=this,l="";a.next=function(){var u=a.b,p=a.c,f=a.d,d=a.a;return u=u<<25^u>>>7^p,p=p-f|0,f=f<<24^f>>>8^d,d=d-u|0,a.b=u=u<<20^u>>>12^p,a.c=p=p-f|0,a.d=f<<16^p>>>16^d,a.a=d-u|0},a.a=0,a.b=0,a.c=-1640531527,a.d=1367130551,i===Math.floor(i)?(a.a=i/4294967296|0,a.b=i|0):l+=i;for(var c=0;c<l.length+20;c++)a.b^=l.charCodeAt(c)|0,a.next()}function o(i,a){return a.a=i.a,a.b=i.b,a.c=i.c,a.d=i.d,a}function s(i,a){var l=new r(i),c=a&&a.state,u=function(){return(l.next()>>>0)/4294967296};return u.double=function(){do var p=l.next()>>>11,f=(l.next()>>>0)/4294967296,d=(p+f)/(1<<21);while(d===0);return d},u.int32=l.next,u.quick=u,c&&(typeof c=="object"&&o(c,l),u.state=function(){return o(l,{})}),u}t&&t.exports?t.exports=s:e&&e.amd?e(function(){return s}):this.tychei=s})(v8,typeof uF=="object"&&uF,typeof define=="function"&&define)});var C8=hs(()=>{"use strict"});var S8=hs((I8,c1)=>{"use strict";(function(n,t,e){var r=256,o=6,s=52,i="random",a=e.pow(r,o),l=e.pow(2,s),c=l*2,u=r-1,p;function f(w,v,S){var k=[];v=v==!0?{entropy:!0}:v||{};var A=g(m(v.entropy?[w,b(t)]:w??x(),3),k),$=new d(k),L=function(){for(var z=$.g(o),W=a,Q=0;z<l;)z=(z+Q)*r,W*=r,Q=$.g(1);for(;z>=c;)z/=2,W/=2,Q>>>=1;return(z+Q)/W};return L.int32=function(){return $.g(4)|0},L.quick=function(){return $.g(4)/4294967296},L.double=L,g(b($.S),t),(v.pass||S||function(z,W,Q,ne){return ne&&(ne.S&&h(ne,$),z.state=function(){return h($,{})}),Q?(e[i]=z,W):z})(L,A,"global"in v?v.global:this==e,v.state)}function d(w){var v,S=w.length,k=this,A=0,$=k.i=k.j=0,L=k.S=[];for(S||(w=[S++]);A<r;)L[A]=A++;for(A=0;A<r;A++)L[A]=L[$=u&$+w[A%S]+(v=L[A])],L[$]=v;(k.g=function(z){for(var W,Q=0,ne=k.i,se=k.j,te=k.S;z--;)W=te[ne=u&ne+1],Q=Q*r+te[u&(te[ne]=te[se=u&se+W])+(te[se]=W)];return k.i=ne,k.j=se,Q})(r)}function h(w,v){return v.i=w.i,v.j=w.j,v.S=w.S.slice(),v}function m(w,v){var S=[],k=typeof w,A;if(v&&k=="object")for(A in w)try{S.push(m(w[A],v-1))}catch{}return S.length?S:k=="string"?w:w+"\0"}function g(w,v){for(var S=w+"",k,A=0;A<S.length;)v[u&A]=u&(k^=v[u&A]*19)+S.charCodeAt(A++);return b(v)}function x(){try{var w;return p&&(w=p.randomBytes)?w=w(r):(w=new Uint8Array(r),(n.crypto||n.msCrypto).getRandomValues(w)),b(w)}catch{var v=n.navigator,S=v&&v.plugins;return[+new Date,n,S,n.screen,b(t)]}}function b(w){return String.fromCharCode.apply(0,w)}if(g(e.random(),t),typeof c1=="object"&&c1.exports){c1.exports=f;try{p=C8()}catch{}}else typeof define=="function"&&define.amd?define(function(){return f}):e["seed"+i]=f})(typeof self<"u"?self:I8,[],Math)});var iw=hs((Jpt,T8)=>{"use strict";var SDe=p8(),TDe=d8(),EDe=m8(),NDe=x8(),DDe=b8(),kDe=w8(),wm=S8();wm.alea=SDe;wm.xor128=TDe;wm.xorwow=EDe;wm.xorshift7=NDe;wm.xor4096=DDe;wm.tychei=kDe;T8.exports=wm});var hF={};_t(hF,{TEST_EPSILON_FLOAT16:()=>E8,createVideoElement:()=>$De,encodeStrings:()=>N8,expectArrayBuffersEqual:()=>PDe,expectArraysClose:()=>ADe,expectArraysEqual:()=>MDe,expectNumbersClose:()=>ODe,expectPromiseToFail:()=>RDe,expectValuesInRange:()=>FDe,play:()=>LDe,testEpsilon:()=>fF});function ADe(n,t,e){return e==null&&(e=fF()),pF(n,t,(r,o)=>dF(r,o,e))}function fF(){return R.backend.floatPrecision()===32?_De:E8}function pF(n,t,e){let r=!0;if((ir(n)||ir(t))&&(r=!1),ir(n)&&ir(t)&&(r=!0),r){let i=n.constructor.name,a=t.constructor.name;if(i!==a)throw new Error(`Arrays are of different type. Actual: ${i}. Expected: ${a}`)}if(Array.isArray(n)&&Array.isArray(t)){let i=io(n),a=io(t);if(!Ro(i,a))throw new Error(`Arrays have different shapes. Actual: [${i}]. Expected: [${a}]`)}let o=ir(n)?n:na(n),s=ir(t)?t:na(t);if(o.length!==s.length)throw new Error(`Arrays have different lengths actual: ${o.length} vs expected: ${s.length}.
Actual:   ${o}.
Expected: ${s}.`);for(let i=0;i<s.length;++i){let a=o[i],l=s[i];if(!e(a,l))throw new Error(`Arrays differ: actual[${i}] = ${a}, expected[${i}] = ${l}.
Actual:   ${o}.
Expected: ${s}.`)}typeof expect<"u"&&expect().nothing()}function RDe(n,t){n().then(()=>t.fail(),()=>t()),typeof expect<"u"&&expect().nothing()}function MDe(n,t){let e=typeof t=="string"||typeof t=="number"||typeof t=="boolean"?[t]:t;return Yi(n)||Yi(n[0])||Yi(t)||Yi(t[0])?pF(n,e,(r,o)=>r==o):pF(n,t,(r,o)=>dF(r,o,0))}function ODe(n,t,e){if(e==null&&(e=fF()),!dF(n,t,e))throw new Error(`Numbers differ: actual === ${n}, expected === ${t}`);typeof expect<"u"&&expect().nothing()}function dF(n,t,e){return!isFinite(n)&&!isFinite(t)?!0:!(isNaN(n)||isNaN(t)||Math.abs(n-t)>e)}function FDe(n,t,e){for(let r=0;r<n.length;r++)if(n[r]<t||n[r]>e)throw new Error(`Value out of range:${n[r]} low: ${t}, high: ${e}`)}function PDe(n,t){let e=new Float32Array(n),r=new Float32Array(t);if(e.length!==r.length)throw new Error(`Expected ArrayBuffer to be of length ${r.length}, but it was ${e.length}`);for(let o=0;o<r.length;o++)if(e[o]!==r[o])throw new Error(`Expected ArrayBuffer value at ${o} to be ${r[o]} but got ${e[o]} instead`)}function N8(n){for(let t=0;t<n.length;t++){let e=n[t];Array.isArray(e)?N8(e):n[t]=xf(e)}return n}function $De(n){let t=document.createElement("video");return"playsInline"in t&&(t.playsInline=!0),t.muted=!0,t.loop=!0,t.style.position="fixed",t.style.left="0px",t.style.top="0px",t.preload="auto",t.appendChild(n),new Promise(e=>{t.addEventListener("loadeddata",r=>e(t)),t.load()})}function LDe(n){return ee(this,null,function*(){yield n.play(),"requestVideoFrameCallback"in n&&(yield new Promise(t=>{n.requestVideoFrameCallback(t)}))})}var _De,E8,D8=F(()=>{"use strict";oe();J();ce();_De=.001,E8=.1});var f1,Cm,u1,p1,aw=F(()=>{"use strict";f1=ad(iw());Cm=class{constructor(t,e,r,o,s){this.mean=t,this.stdDev=e,this.dtype=r,this.nextVal=NaN,this.truncated=o,this.truncated&&(this.upper=this.mean+this.stdDev*2,this.lower=this.mean-this.stdDev*2);let i=s||Math.random();this.random=f1.alea(i.toString())}nextValue(){if(!isNaN(this.nextVal)){let o=this.nextVal;return this.nextVal=NaN,o}let t,e,r=!1;for(;!r;){let o,s,i;do o=2*this.random()-1,s=2*this.random()-1,i=o*o+s*s;while(i>=1||i===0);let a=Math.sqrt(-2*Math.log(i)/i);t=this.mean+this.stdDev*o*a,e=this.mean+this.stdDev*s*a,(!this.truncated||this.isValidTruncated(t))&&(r=!0)}return(!this.truncated||this.isValidTruncated(e))&&(this.nextVal=this.convertValue(e)),this.convertValue(t)}convertValue(t){return this.dtype==null||this.dtype==="float32"?t:Math.round(t)}isValidTruncated(t){return t<=this.upper&&t>=this.lower}},u1=class{constructor(t,e,r,o){this.alpha=t,this.beta=1/e,this.dtype=r;let s=o||Math.random();this.randu=f1.alea(s.toString()),this.randn=new Cm(0,1,r,!1,this.randu()),t<1?this.d=t+2/3:this.d=t-1/3,this.c=1/Math.sqrt(9*this.d)}nextValue(){let t,e,r,o,s,i;for(;;){do o=this.randn.nextValue(),i=1+this.c*o;while(i<=0);if(i*=i*i,t=o*o,e=1-.331*t*t,r=.5*t+this.d*(1-i+Math.log(i)),s=this.randu(),s<e||Math.log(s)<r)break}return i=1/this.beta*this.d*i,this.alpha<1&&(i*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(i)}convertValue(t){return this.dtype==="float32"?t:Math.round(t)}},p1=class{constructor(t=0,e=1,r,o){if(this.canReturnFloat=()=>this.dtype==null||this.dtype==="float32",this.min=t,this.range=e-t,this.dtype=r,o==null&&(o=Math.random()),typeof o=="number"&&(o=o.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error(`The difference between ${t} - ${e} <= 1 and dtype is not float`);this.random=f1.alea(o)}convertValue(t){return this.canReturnFloat()?t:Math.round(t)}nextValue(){return this.convertValue(this.min+this.range*this.random())}}});function BDe(n,t,e=1,r="float32",o){if(Bn(n),e==null&&(e=1),r==null&&(r="float32"),r!=="float32"&&r!=="int32")throw new Error(`Unsupported data type ${r}`);let s=new u1(t,e,r,o),i=Pe(n,r);for(let a=0;a<i.values.length;a++)i.values[a]=s.nextValue();return i.toTensor()}var mF,k8=F(()=>{"use strict";Or();ju();Z();aw();mF=_({randomGamma_:BDe})});function zDe(n,t=0,e=1,r,o){if(Bn(n),r!=null&&r==="bool")throw new Error(`Unsupported data type ${r}`);let s=new Cm(t,e,r,!1,o),i=Pe(n,r);for(let a=0;a<i.values.length;a++)i.values[a]=s.nextValue();return i.toTensor()}var Af,gF=F(()=>{"use strict";Or();ju();Z();aw();Af=_({randomNormal_:zDe})});function VDe(n,t,e){if(t!=null&&t==="bool")throw new Error(`Unsupported data type ${t}`);return Af(n,0,1,t,e)}var xF,_8=F(()=>{"use strict";Z();gF();xF=_({randomStandardNormal_:VDe})});function UDe(n,t=0,e=1,r="float32",o){Bn(n);let s=Pe(n,r),i=new p1(t,e,null,o);for(let a=0;a<s.values.length;a++)s.values[a]=i.nextValue();return s.toTensor()}var is,d1=F(()=>{"use strict";Or();ju();Z();aw();is=_({randomUniform_:UDe})});function jDe(n,t,e,r){return is(n,t,e,"int32",r)}var yF,A8=F(()=>{"use strict";Z();d1();yF=_({randomUniformInt_:jDe})});function ga(n,t,e=1,r="float32"){if(e===0)throw new Error("Cannot have a step of zero");let o={start:n,stop:t,step:e,dtype:r};return R.runKernel(Dh,{},o)}var h1=F(()=>{"use strict";oe();G();});function GDe(n){let e={input:T(n,"input","real")};return R.runKernel(kh,e)}var dc,lw=F(()=>{"use strict";oe();G();J();Z();dc=_({real_:GDe})});function WDe(n){let e={x:T(n,"x","reciprocal")};return R.runKernel(Vl,e)}var cw,R8=F(()=>{"use strict";oe();G();J();Z();cw=_({reciprocal_:WDe})});function HDe(n){let e={x:T(n,"x","relu")};return R.runKernel(Ul,e)}var Br,fy=F(()=>{"use strict";oe();G();J();Z();Br=_({relu_:HDe})});function qDe(n){let e={x:T(n,"x","relu6")};return R.runKernel(jl,e)}var Im,m1=F(()=>{"use strict";oe();G();J();Z();Im=_({relu6_:qDe})});function KDe(n,t){let r={x:T(n,"x","reverse")},o={dims:t};return R.runKernel(Du,r,o)}var fr,rp=F(()=>{"use strict";oe();G();J();Z();fr=_({reverse_:KDe})});function XDe(n){let t=T(n,"x","reverse");return O(t.rank===1,()=>`Error in reverse1D: x must be rank 1 but got rank ${t.rank}.`),fr(t,0)}var bF,M8=F(()=>{"use strict";J();ce();Z();rp();bF=_({reverse1d_:XDe})});function YDe(n,t){let e=T(n,"x","reverse");return O(e.rank===2,()=>`Error in reverse2D: x must be rank 2 but got rank ${e.rank}.`),fr(e,t)}var vF,O8=F(()=>{"use strict";J();ce();Z();rp();vF=_({reverse2d_:YDe})});function ZDe(n,t){let e=T(n,"x","reverse");return O(e.rank===3,()=>`Error in reverse3D: x must be rank 3 but got rank ${e.rank}.`),fr(e,t)}var wF,F8=F(()=>{"use strict";J();ce();Z();rp();wF=_({reverse3d_:ZDe})});function QDe(n,t){let e=T(n,"x","reverse");return O(e.rank===4,()=>`Error in reverse4D: x must be rank 4 but got rank ${e.rank}.`),fr(e,t)}var CF,P8=F(()=>{"use strict";J();ce();Z();rp();CF=_({reverse4d_:QDe})});function JDe(n){let e={x:T(n,"x","round")};return R.runKernel(Gl,e)}var Sm,IF=F(()=>{"use strict";oe();G();J();Z();Sm=_({round_:JDe})});function eke(n){let e={x:T(n,"x","rsqrt","float32")};return R.runKernel(Wl,e)}var Tm,SF=F(()=>{"use strict";oe();G();J();Z();Tm=_({rsqrt_:eke})});function tke(n){let e={x:T(n,"x","selu")};return R.runKernel(Hl,e)}var Em,TF=F(()=>{"use strict";oe();G();J();Z();Em=_({selu_:tke})});function nke(n,t,e,r,o,s=[1,1],i="NHWC"){let a=T(n,"x","separableConv2d"),l=T(t,"depthwiseFilter","separableConv2d"),c=T(e,"pointwiseFilter","separableConv2d"),u=a,p=!1;if(a.rank===3&&(p=!0,u=V(a,[1,a.shape[0],a.shape[1],a.shape[2]])),i==="NCHW")throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");O(u.rank===4,()=>`Error in separableConv2d: input must be rank 4, but got rank ${u.rank}.`),O(l.rank===4,()=>`Error in separableConv2d: depthwise filter must be rank 4, but got rank ${l.rank}.`),O(c.rank===4,()=>`Error in separableConv2d: pointwise filter must be rank 4, but got rank ${l.rank}.`),O(c.shape[0]===1,()=>`Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got ${c.shape[0]}.`),O(c.shape[1]===1,()=>`Error in separableConv2d: the second dimension of pointwise filter must be 1, but got ${c.shape[1]}.`);let f=l.shape[2],d=l.shape[3];O(c.shape[2]===f*d,()=>`Error in separableConv2d: the third dimension of pointwise filter must be ${f*d}, but got ${c.shape[2]}.`);let h=ca(u,l,r,o,i,s),g=Po(h,c,1,"valid",i);return p?V(g,[g.shape[1],g.shape[2],g.shape[3]]):g}var Nm,EF=F(()=>{"use strict";J();ce();um();A0();Z();Oe();Nm=_({separableConv2d_:nke})});function rke(n,t){return ee(this,null,function*(){let e=T(n,"x","setdiff1d"),r=T(t,"y","setdiff1d");O(e.dtype===r.dtype,()=>`x and y should have the same dtype, but got x (${e.dtype}) and y (${r.dtype}).`),O(e.rank===1,()=>`x should be 1D tensor, but got x (${e.shape}).`),O(r.rank===1,()=>`y should be 1D tensor, but got y (${r.shape}).`);let o=yield e.data(),s=yield r.data(),i=new Set(s),a=0;for(let u=0;u<o.length;u++)i.has(o[u])||a++;let l=new Pt([a],e.dtype),c=new Pt([a],"int32");for(let u=0,p=0;u<o.length;u++)i.has(o[u])||(l.values[p]=o[u],c.values[p]=u,p++);return[l.toTensor(),c.toTensor()]})}var NF,$8=F(()=>{"use strict";ue();J();ce();NF=rke});function oke(n){let e={x:T(n,"x","sign")};return R.runKernel(Xl,e)}var uw,L8=F(()=>{"use strict";oe();G();J();Z();uw=_({sign_:oke})});function ske(n){let e={x:T(n,"x","sin","float32")};return R.runKernel(ql,e)}var Dm,DF=F(()=>{"use strict";oe();G();J();Z();Dm=_({sin_:ske})});function ike(n){let e={x:T(n,"x","sinh")};return R.runKernel(Kl,e)}var km,kF=F(()=>{"use strict";oe();G();J();Z();km=_({sinh_:ike})});function ake(n,t,e){let r=T(n,"x","slice1d");return O(r.rank===1,()=>`slice1d expects a rank-1 tensor, but got a rank-${r.rank} tensor`),$e(r,[t],[e])}var _m,B8=F(()=>{"use strict";J();ce();Z();rs();_m=_({slice1d_:ake})});function lke(n,t,e){let r=T(n,"x","slice2d");return O(r.rank===2,()=>`slice2d expects a rank-2 tensor, but got a rank-${r.rank} tensor`),$e(r,t,e)}var dy,z8=F(()=>{"use strict";J();ce();Z();rs();dy=_({slice2d_:lke})});function cke(n,t,e){let r=T(n,"x","slice3d");return O(r.rank===3,()=>`slice3d expects a rank-3 tensor, but got a rank-${r.rank} tensor`),$e(r,t,e)}var Am,V8=F(()=>{"use strict";J();ce();Z();rs();Am=_({slice3d_:cke})});function uke(n,t,e){let r=T(n,"x","slice4d");return O(r.rank===4,()=>`slice4d expects a rank-4 tensor, but got a rank-${r.rank} tensor`),$e(r,t,e)}var Rf,U8=F(()=>{"use strict";J();ce();Z();rs();Rf=_({slice4d_:uke})});function pke(n,t=-1){let e=T(n,"logits","softmax","float32");if(t===-1&&(t=e.rank-1),t!==e.rank-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${e.rank} and dim was ${t}`);let r={logits:e},o={dim:t};return R.runKernel(Ou,r,o)}var xa,j8=F(()=>{"use strict";oe();G();J();Z();xa=_({softmax_:pke})});function fke(n){O(n.dtype==="complex64",()=>`The dtype for tf.spectral.fft() must be complex64 but got ${n.dtype}.`);let t={input:n};return R.runKernel(uh,t)}var op,g1=F(()=>{"use strict";oe();G();ce();Z();op=_({fft_:fke})});function dke(n){O(n.dtype==="complex64",()=>`The dtype for tf.spectral.ifft() must be complex64 but got ${n.dtype}.`);let t={input:n};return R.runKernel(hh,t)}var hc,x1=F(()=>{"use strict";oe();G();ce();Z();hc=_({ifft_:dke})});function hke(n){let t=n.shape[n.shape.length-1],e=n.size/t,r;if(t<=2){let o=V(n,[e,t]);r=hc(o)}else{let o=[e,2*(t-1)],s=V(dc(n),[e,t]),i=V(Ku(n),[e,t]),a=fr($e(s,[0,1],[e,t-2]),1),l=B(fr($e(i,[0,1],[e,t-2]),1),Ie(-1)),c=Tt([s,a],1),u=Tt([i,l],1),p=V(Oo(c,u),[o[0],o[1]]);r=hc(p)}if(r=dc(r),n.rank===3&&n.shape[0]!==0){let o=r,s=n.shape[0];r=V(r,[s,r.shape[0]/s,r.shape[1]]),o.dispose()}return r}var Rm,_F=F(()=>{"use strict";bf();Zs();V0();Ue();Z();lw();Oe();rp();kn();rs();x1();Rm=_({irfft_:hke})});function mke(n,t,e=0){let o={x:T(n,"x","split")},s={numOrSizeSplits:t,axis:e};return R.runKernel(Mu,o,s)}var dr,Mm=F(()=>{"use strict";oe();G();J();Z();dr=_({split_:mke})});function gke(n,t){O(n.dtype==="float32",()=>`The dtype for rfft() must be real value but got ${n.dtype}`);let e=n.shape[n.shape.length-1],r=n.size/e,o;if(t!=null&&t<e){let h=n.shape.map(g=>0),m=n.shape.map(g=>g);m[n.shape.length-1]=t,o=$e(n,h,m),e=t}else if(t!=null&&t>e){let h=n.shape.map(m=>m);h[n.shape.length-1]=t-e,o=Tt([n,Kt(h)],n.shape.length-1),e=t}else o=n;let s=ze(o),i=V(Oo(o,s),[r,e]),a=op(i),l=Math.floor(e/2)+1,c=dc(a),u=Ku(a),p=dr(c,[l,e-l],c.shape.length-1),f=dr(u,[l,e-l],u.shape.length-1),d=o.shape.slice();return d[o.shape.length-1]=l,V(Oo(p[0],f[0]),d)}var sp,y1=F(()=>{"use strict";ce();bf();Zs();V0();Z();lw();Oe();rs();Mm();py();Dn();g1();sp=_({rfft_:gke})});function xke(n,t){let e=T(n,"a","squaredDifference"),r=T(t,"b","squaredDifference");[e,r]=bt(e,r),rt(e.shape,r.shape);let o={a:e,b:r},s={};return R.runKernel(Jl,o,s)}var Om,b1=F(()=>{"use strict";oe();G();Vn();J();bn();Z();Om=_({squaredDifference_:xke})});function yke(n,t){let e=T(n,"x","squeeze","string_or_numeric");return V(e,yM(e.shape,t).newShape)}var Qt,pw=F(()=>{"use strict";J();ce();Z();Oe();Qt=_({squeeze_:yke})});function bke(n,t=0){let e=Bu(n,"tensors","stack","string_or_numeric");O(e.length>=1,()=>"Pass at least one tensor to tf.stack"),e.length>0&&O(t<=e[0].rank,()=>"Axis must be <= rank of the tensor");let r=e,o={axis:t};return R.runKernel(wu,r,o)}var An,Mf=F(()=>{"use strict";oe();G();J();ce();Z();An=_({stack_:bke})});function vke(n,t=0){let r={x:T(n,"x","step")},o={alpha:t};return R.runKernel(rc,r,o)}var ei,hy=F(()=>{"use strict";oe();G();J();Z();ei=_({step_:vke})});function wke(n,t,e,r,o=0,s=0,i=0,a=0,l=0){let u={x:T(n,"x","stridedSlice","string_or_numeric")},p={begin:t,end:e,strides:r,beginMask:o,endMask:s,ellipsisMask:i,newAxisMask:a,shrinkAxisMask:l};return R.runKernel(Vh,u,p)}var fw,G8=F(()=>{"use strict";oe();G();J();Z();fw=_({stridedSlice_:wke})});function Cke(n){let e={x:T(n,"x","tan","float32")};return R.runKernel(tc,e)}var dw,W8=F(()=>{"use strict";oe();G();J();Z();dw=_({tan_:Cke})});function Xt(n,t){qs(n);let e=io(n,t);if(e.length!==1)throw new Error("tensor1d() requires values to be a flat/TypedArray");return Fo(n,null,e,t)}var Of=F(()=>{"use strict";J();ce();zu();});function ti(n,t,e){if(qs(n),t!=null&&t.length!==2)throw new Error("tensor2d() requires shape to have two numbers");let r=io(n,e);if(r.length!==2&&r.length!==1)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(r.length===1&&t==null)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return Fo(n,t,r,e)}var v1=F(()=>{"use strict";J();ce();zu();});function hw(n,t,e){if(qs(n),t!=null&&t.length!==3)throw new Error("tensor3d() requires shape to have three numbers");let r=io(n,e);if(r.length!==3&&r.length!==1)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(r.length===1&&t==null)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return Fo(n,t,r,e)}var AF=F(()=>{"use strict";J();ce();zu();});function RF(n,t,e){if(qs(n),t!=null&&t.length!==4)throw new Error("tensor4d() requires shape to have four numbers");let r=io(n,e);if(r.length!==4&&r.length!==1)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(r.length===1&&t==null)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return Fo(n,t,r,e)}var H8=F(()=>{"use strict";J();ce();zu();});function MF(n,t,e){if(qs(n),t!=null&&t.length!==5)throw new Error("tensor5d() requires shape to have five numbers");let r=io(n,e);if(r.length!==5&&r.length!==1)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(r.length===1&&t==null)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return Fo(n,t,r,e)}var q8=F(()=>{"use strict";J();ce();zu();});function OF(n,t,e){if(qs(n),t!=null&&t.length!==6)throw new Error("tensor6d() requires shape to have six numbers");let r=io(n,e);if(r.length!==6&&r.length!==1)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(r.length===1&&t==null)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return t=t||r,Fo(n,t,r,e)}var K8=F(()=>{"use strict";J();ce();zu();});var mw={};_t(mw,{calculateShapes:()=>X8,validateInput:()=>my,validateUpdateShape:()=>FF});function FF(n,t,e){let r=t.rank>1?t.shape[t.rank-1]:1,o=t.rank>1?t.rank-1:1,s=`Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: ${e.shape}, indices.shape: ${t.shape}, shape: ${n}, sliceDim: ${r}, and batchDim: ${o}.`;if(e.rank<o)throw new Error(s+` update.rank < ${o}. `);if(n.length<r+(e.rank-o))throw new Error(s+` Output shape length < ${r+(e.rank-o)}`);if(e.rank!==o+n.length-r)throw new Error(s+` update.rank != ${o+n.length-r}`);for(let i=0;i<o;++i)if(e.shape[i]!==t.shape[i])throw new Error(s+` updates.shape[${i}] (${e.shape[i]}) != indices.shape[${i}] (${t.shape[i]}).`);for(let i=0;i<e.rank-o;++i)if(e.shape[i+o]!==n[i+r])throw new Error(s+` updates.shape[${i+o}] (${e.shape[i+o]}) != shape[${i+o}] (${n[i+o]})`)}function my(n,t,e){if(t.rank<1)throw new Error(`tf.scatterND() expects the indices to be rank 1 or higher, but the rank was ${t.rank}.`);if(n.rank<1)throw new Error(`tf.scatterND() expects the updates to be rank 1 or higher, but the rank was ${n.rank}.`);if(t.dtype!=="int32")throw new Error(`The dtype of 'indices' should be int32, but got dtype: ${t.dtype}`);if(e.length<1)throw new Error(`Output rank must be greater or equal to 1, but got shape: ${e}`);if(e.length===0){if(t.size===0)throw new Error(`Indices specified for empty output. indices shape: ${t.shape}`);if(n.size===0)throw new Error(`Updates specified for empty output. updates shape: ${n.shape}`)}FF(e,t,n)}function X8(n,t,e){let r=t.shape.length,o=r>1?t.shape[r-1]:1,s=e.length,i=1;for(let p=o;p<s;++p)i*=e[p];let a=o<1?1:o,l=yt(t.shape)/a,c=[...pl(e.slice(0,o)),1],u=yt(e);return{sliceRank:o,numUpdates:l,sliceSize:i,strides:c,outputSize:u}}var gw=F(()=>{"use strict";ce()});function Ike(n,t,e){let r=T(n,"tensor","tensorScatterupdate"),o=T(t,"indices","tensorScatterupdate","int32"),s=T(e,"updates","tensorScatterupdate");if(my(s,o,r.shape),r.dtype!==s.dtype)throw new Error(`tensor and updates must have the same dtype, instead they are ${r.dtype} and ${s.dtype}.`);let i={tensor:r,indices:o,updates:s},a={};return R.runKernel(Mh,i,a)}var PF,Y8=F(()=>{"use strict";oe();G();J();Z();gw();PF=_({tensorScatterUpdate_:Ike})});function Ske(n,t=1,e=!0){let r=T(n,"x","topk");if(r.rank===0)throw new Error("topk() expects the input to be of rank 1 or higher");let o=r.shape[r.shape.length-1];if(t<0)throw new Error(`'k' passed to topk() must be >= 0 but got ${t}`);if(t>o)throw new Error(`'k' passed to topk() must be <= the last dimension (${o}) but got ${t}`);let s={x:r},i={k:t,sorted:e},[a,l]=R.runKernel(Wh,s,i);return{values:a,indices:l}}var xw,$F=F(()=>{"use strict";oe();G();J();Z();xw=_({topk_:Ske})});function Tke(n,t=0,e=1,r,o){if(Bn(n),r!=null&&r==="bool")throw new Error("Unsupported data type $ { dtype }");let s=new Cm(t,e,r,!0,o),i=Pe(n,r);for(let a=0;a<i.values.length;a++)i.values[a]=s.nextValue();return i.toTensor()}var Fm,Z8=F(()=>{"use strict";Or();ju();Z();aw();Fm=_({truncatedNormal_:Tke})});function Eke(n,t=0){let e=T(n,"x","unique","string_or_numeric");O(e.rank>0,()=>"The input tensor must be at least 1D");let r={x:e},o={axis:t},[s,i]=R.runKernel(qh,r,o);return{values:s,indices:i}}var yw,LF=F(()=>{"use strict";oe();G();J();ce();Z();yw=_({unique_:Eke})});function Nke(n,t,e){let r=T(n,"x","unsortedSegmentSum"),o=T(t,"segmentIds","unsortedSegmentSum","int32");O(Gc(e),()=>"numSegments must be of dtype int");let s={x:r,segmentIds:o},i={numSegments:e};return R.runKernel(Pu,s,i)}var Pm,w1=F(()=>{"use strict";oe();G();J();ce();Z();Pm=_({unsortedSegmentSum_:Nke})});function Dke(n,t=0){let e=T(n,"x","unstack","string_or_numeric");O(t>=-e.shape.length&&t<e.shape.length,()=>`Axis = ${t} is not in [-${e.shape.length}, ${e.shape.length})`);let r={value:e},o={axis:t};return R.runKernel(Fu,r,o)}var hr,gy=F(()=>{"use strict";oe();G();J();ce();Z();hr=_({unstack_:Dke})});function BF(n,t){return uy(n,t,"right")}var Q8=F(()=>{"use strict";o1();});function bw(n,t=!0,e,r){return R.makeVariable(n,t,e,r)}var J8=F(()=>{"use strict";oe();});function C1(n,t){let e=[];for(let s=0;s<t.length;s++)t[s]&&e.push(s);let r=Pe(n,"int32"),o=Pe([e.length,n.length],"int32");for(let s=0;s<e.length;s++){let i=r.indexToLoc(e[s]),a=s*n.length;o.values.set(i,a)}return o.toTensor()}var zF=F(()=>{"use strict";ju();});function kke(n){return ee(this,null,function*(){let t=T(n,"condition","whereAsync","bool"),e=yield t.data(),r=C1(t.shape,e);return n!==t&&t.dispose(),r})}var vw,VF=F(()=>{"use strict";zF();J();vw=kke});function _ke(n,t,e){return ee(this,null,function*(){let r=T(n,"tensor","boolMask"),o=T(t,"mask","boolMask","bool"),s=e??0,i=o.rank,a=r.shape;O(i>0,()=>"mask cannot be scalar"),En(a.slice(s,s+i),o.shape,"mask's shape must match the first K dimensions of tensor's shape,");let l=1;for(let m=s;m<s+i;m++)l*=a[m];let c=a.slice(0,s).concat([l],a.slice(s+i)),u=V(r,c),p=V(o,[-1]),f=yield vw(p),d=Qt(f,[1]),h=ha(u,d,s);return n!==r&&r.dispose(),t!==o&&o.dispose(),d.dispose(),u.dispose(),p.dispose(),f.dispose(),h})}var eq,tq=F(()=>{"use strict";J();ce();z0();Oe();pw();VF();eq=_ke});function Ake(n,t,e){let r=T(n,"x","transpose");if(t==null&&(t=r.shape.map((i,a)=>a).reverse()),O(r.rank===t.length,()=>`Error in transpose: rank of input ${r.rank} must match length of perm ${t}.`),t.forEach(i=>{O(i>=0&&i<r.rank,()=>`All entries in 'perm' must be between 0 and ${r.rank-1} but got ${t}`)}),r.rank<=1)return r.clone();let o={x:r},s={perm:t};return r.dtype==="complex64"?K(()=>{let i=dc(r),a=Ku(r);return i=R.runKernel(ea,{x:i},s),a=R.runKernel(ea,{x:a},s),e&&(a=pt(a)),Oo(i,a)}):R.runKernel(ea,o,s)}var it,ip=F(()=>{"use strict";oe();Es();G();J();ce();bf();V0();Lr();Z();lw();it=_({transpose_:Ake})});function Rke(n,t,e,r,o=!0){let s=T(n,"v","movingAverage"),i=T(t,"x","movingAverage"),a=T(e,"decay","movingAverage");$M(s,i),O(Ro(s.shape,i.shape),()=>"Shape mismatch in v and x");let l=Ie(1),c=be(l,a),u=B(be(i,s),c);if(o){O(r!=null,()=>"When using zeroDebias: true, step is required.");let p=T(r,"step","movingAverage");u=xe(u,be(l,Yr(a,p)))}return ae(s,u)}var nq,rq=F(()=>{"use strict";Vn();J();ce();Nn();Zt();Ue();Z();Ef();kn();on();nq=_({movingAverage_:Rke})});function Mke(n,t,e){Bn(e);let r=T(n,"indices","scatterND","int32"),o=T(t,"updates","scatterND");my(o,r,e);let s={indices:r,updates:o},i={shape:e};return R.runKernel(Rh,s,i)}var oq,sq=F(()=>{"use strict";oe();G();J();Or();Z();gw();oq=_({scatterND_:Mke})});function iq(n,t,e,r){if(n.dtype!=="int32")throw new Error(`tf.sparseToDense() expects the indices to be int32 type, but the dtype was ${n.dtype}.`);if(n.rank>2)throw new Error(`sparseIndices should be a scalar, vector, or matrix, but got shape ${n.shape}.`);let o=n.rank>0?n.shape[0]:1,s=n.rank>1?n.shape[1]:1;if(e.length!==s)throw new Error(`outputShape has incorrect number of elements:, ${e.length}, should be: ${s}.`);let i=t.size;if(!(t.rank===0||t.rank===1&&i===o))throw new Error(`sparseValues has incorrect shape ${t.shape}, should be [] or [${o}]`);if(t.dtype!==r.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}var aq=F(()=>{"use strict"});function Fke(n,t,e,r=0){Bn(e);let o=T(n,"sparseIndices","sparseToDense","int32"),s=T(t,"sparseValues","sparseToDense","string_or_numeric"),i=T(r,"defaultValue","sparseToDense",s.dtype);iq(o,s,e,i);let a={sparseIndices:o,sparseValues:s,defaultValue:i},l={outputShape:e};return R.runKernel(Bh,a,l)}var lq,cq=F(()=>{"use strict";oe();G();aq();J();Or();Z();lq=_({sparseToDense_:Fke})});function Pke(n,t){let e=T(t,"indices","gatherND","int32"),o={params:T(n,"x","gatherND","string_or_numeric"),indices:e};return R.runKernel(dh,o)}var uq,pq=F(()=>{"use strict";oe();G();J();Z();uq=_({gatherND_:Pke})});function fq(n,t){if(t==null)return n.shape.slice();if(Ro(n.shape,t))return t;if(n.shape.length===t.length){let e=[];for(let r=0;r<n.shape.length;r++)t[r]==null&&n.shape[r]!=null?e.push(n.shape[r]):e.push(t[r]);return e}return t}var dq=F(()=>{"use strict";ce();});function $ke(n,t,e,r){let o=T(n,"x","dropout");if(O(o.dtype==="float32",()=>`x has to be a floating point tensor since it's going to be scaled, but got a ${o.dtype} tensor instead.`),O(t>=0&&t<1,()=>`rate must be a float in the range [0, 1), but got ${t}.`),t===0)return n instanceof tt?o.clone():o;let s=fq(o,e),i=1-t,a=xe(da(ae(is(s,0,1,"float32",r),i)),i);return B(o,a)}var I1,hq=F(()=>{"use strict";ue();J();ce();Nn();Zt();dq();QT();Ue();Z();d1();I1=_({dropout_:$ke})});function S1(n){return Math.floor(Math.pow(2,Math.ceil(Math.log(n)/Math.log(2))))}function xy(n,t,e){let r=1-n%2,o=new Float32Array(n);for(let s=0;s<n;++s){let i=2*Math.PI*s/(n+r-1);o[s]=t-e*Math.cos(i)}return Xt(o,"float32")}var ww=F(()=>{"use strict";Of();});function Lke(n,t,e=1){return ee(this,null,function*(){let r=T(n,"predictions","inTopK"),o=T(t,"targets","inTopK");O(r.rank>1,()=>`inTopK() expects the predictions to be of rank 2 or higher, but got ${r.rank}`),O(r.rank-1===o.rank,()=>`predictions rank should be 1 larger than targets rank, but got predictions rank ${r.rank} and targets rank ${o.rank}`),En(r.shape.slice(0,r.shape.length-1),o.shape,"predictions's shape should be align with the targets' shape, except the last dimension.");let s=r.shape[r.shape.length-1];O(e>0&&e<=s,()=>`'k' passed to inTopK() must be > 0 && <= the predictions last dimension (${s}), but got ${e}`);let i=yield r.data(),a=yield o.data(),[l,c]=[i.length/s,s],u=bM("bool",l);for(let p=0;p<l;p++){let f=p*c,d=i.subarray(f,f+c),h=[];for(let m=0;m<d.length;m++)h.push({value:d[m],index:m});h.sort((m,g)=>g.value-m.value),u[p]=0;for(let m=0;m<e;m++)if(h[m].index===a[p]){u[p]=1;break}}return n!==r&&r.dispose(),t!==o&&o.dispose(),Er(u,o.shape,"bool")})}var mq,gq=F(()=>{"use strict";J();ce();n0();mq=Lke});function Bke(n,t,e,r,o,s="NHWC",i){let a=n;n.rank===3&&(a=V(n,[1,n.shape[0],n.shape[1],n.shape[2]]));let l=t;l.rank===3&&(l=V(t,[1,t.shape[0],t.shape[1],t.shape[2]])),O(a.rank===4,()=>`Error in conv2dDerFilter: input must be rank 4, but got shape ${a.shape}.`),O(l.rank===4,()=>`Error in conv2dDerFilter: dy must be rank 4, but got shape ${l.shape}.`),O(e.length===4,()=>`Error in conv2dDerFilter: filterShape must be length 4, but got ${e}.`);let c=s==="NHWC"?a.shape[3]:a.shape[1],u=s==="NHWC"?l.shape[3]:l.shape[1];O(c===e[2],()=>`Error in conv2dDerFilter: depth of input ${c}) must match input depth in filter (${e[2]}.`),O(u===e[3],()=>`Error in conv2dDerFilter: depth of dy (${u}) must match output depth for filter (${e[3]}).`),dn("conv2dDerFilter",o,i);let p={x:a,dy:l},f={strides:r,pad:o,dataFormat:s,dimRoundingMode:i,filterShape:e};return R.runKernel(Qd,p,f)}var yy,T1=F(()=>{"use strict";oe();G();ce();Nr();Z();Oe();yy=_({conv2DBackpropFilter_:Bke})});function $m(n,t,e){if(e==null||e==="linear")return n;if(e==="relu")return B(n,ei(t));throw new Error(`Cannot compute gradient for fused activation ${e}.`)}function Lm(n,t){let e=t,r=nn(n.shape,t.shape);return r.length>0&&(e=Ee(e,r)),V(e,n.shape)}function Bm(n,t,e,r){if(t==="linear")return n;if(t==="relu")return Br(n);if(t==="elu")return ua(n);if(t==="relu6")return Im(n);if(t==="prelu")return np(n,e);if(t==="leakyrelu")return Xu(n,r);if(t==="sigmoid")return Pr(n);throw new Error(`Unknown fused activation ${t}.`)}var zm,by=F(()=>{"use strict";bn();YT();JT();Ue();l1();fy();m1();Oe();ty();hy();Jn();zm=(n,t)=>!(n>0)||t==="linear"});function zke({x:n,filter:t,strides:e,pad:r,dataFormat:o="NHWC",dilations:s=[1,1],dimRoundingMode:i,bias:a,activation:l="linear",preluActivationWeights:c,leakyreluAlpha:u}){if(l=l||"linear",zm(R.state.gradientDepth,l)===!1){O(o==="NHWC",()=>`Error in fused conv2d: got dataFormat of ${o} but only NHWC is currently supported for the case of gradient depth is 0 and the activation is not linear.`);let k=Po(n,t,e,r,o,s,i);return a!=null&&(k=ae(k,a)),Bm(k,l,c,u)}let p=T(n,"x","conv2d","float32"),f=T(t,"filter","conv2d","float32"),d=p,h=!1;p.rank===3&&(h=!0,d=V(p,[1,p.shape[0],p.shape[1],p.shape[2]])),O(d.rank===4,()=>`Error in fused conv2d: input must be rank 4, but got rank ${d.rank}.`),O(f.rank===4,()=>`Error in fused conv2d: filter must be rank 4, but got rank ${f.rank}.`),dn("fused conv2d",r,i);let m=o==="NHWC"?d.shape[3]:d.shape[1];O(f.shape[2]===m,()=>`Error in conv2d: depth of input (${m}) must match input depth for filter ${f.shape[2]}.`),O(Xr(e,s),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${e} and dilations '${s}'`);let g=cm(d.shape,f.shape,e,s,r,i),x;a!=null&&(x=T(a,"bias","fused conv2d"),[x]=bt(x,p),o==="NHWC"?rt(g.outShape,x.shape):(O(x.shape.length<=1,()=>`Error in fused conv2d: only supports scalar or 1-D Tensor bias for NCHW format but got the bias of rank-${x.shape.length}.`),O(x.shape.length===0||x.shape[0]===g.outChannels||x.shape[0]===1,()=>`Error in fused conv2d: bias shape (${x.shape}) is not compatible with the number of output channels (${g.outChannels})`)));let b;if(c!=null){let k=c.shape;if(O(k.length<=1||k.length===3,()=>`Error in fused conv2d: only supports scalar, 1-D Tensor or 3-D Tensor PReLU activation weights but got a tensor of rank-${k.length}.`),k.length===1)O(k[0]===1||k[0]===g.outChannels,()=>`Error in fused conv2d: PReLU activation weights (${k}) is not compatible with the number of output channels (${g.outChannels}).`);else if(k.length===3)try{rt(k,g.outShape)}catch{let $=`Error in fused conv2d: PReLU activation weights (${k}) is not compatible with the output shape of the conv2d (${g.outShape}).`;throw Error($)}b=T(c,"prelu weights","fused conv2d")}let w=(k,A)=>{O(o==="NHWC",()=>`Error in gradient of fused conv2D: got dataFormat of ${o} but only NHWC is currently supported.`);let[$,L,z,W]=A,Q=$m(k,z,l);O(Xs(s),()=>`Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${s}'`);let ne=oy(L.shape,Q,$,e,r),se=yy(L,Q,$.shape,e,r),te=[ne,se];if(W!=null){let ie=Lm(W,Q);te.push(ie)}return te},v={x:d,filter:f,bias:x,preluActivationWeights:b},S={strides:e,pad:r,dataFormat:o,dilations:s,dimRoundingMode:i,activation:l,leakyreluAlpha:u};return a==null?Io((A,$,L)=>{let z=R.runKernel(hf,v,S);return L([$,A,z]),h&&(z=V(z,[z.shape[1],z.shape[2],z.shape[3]])),{value:z,gradFunc:w}})(d,f):Io((A,$,L,z)=>{let W=R.runKernel(hf,v,S);return z([$,A,W,L]),h&&(W=V(W,[W.shape[1],W.shape[2],W.shape[3]])),{value:W,gradFunc:w}})(d,f,x)}var xq,yq=F(()=>{"use strict";oe();Zu();G();Vn();J();ce();Nn();bn();um();T1();WT();Nr();by();Z();Oe();xq=_({fusedConv2d_:zke})});function Vke(n,t,e,r,o,s=[1,1],i){let a=n;n.rank===3&&(a=V(n,[1,n.shape[0],n.shape[1],n.shape[2]]));let l=t;l.rank===3&&(l=V(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let c={x:a,dy:l},u={strides:r,pad:o,dimRoundingMode:i,dilations:s,filterShape:e};return R.runKernel(sh,c,u)}var E1,UF=F(()=>{"use strict";oe();G();Z();Oe();E1=_({depthwiseConv2dNativeBackpropFilter_:Vke})});function Uke(n,t,e,r,o,s=[1,1],i){let a=t,l=!1;t.rank===3&&(l=!0,a=V(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let c={dy:a,filter:e},u={strides:r,pad:o,dimRoundingMode:i,dilations:s,inputShape:n},p=R.runKernel(ih,c,u);return l?V(p,[p.shape[1],p.shape[2],p.shape[3]]):p}var N1,jF=F(()=>{"use strict";oe();G();Z();Oe();N1=_({depthwiseConv2dNativeBackpropInput_:Uke})});function jke({x:n,filter:t,strides:e,pad:r,dataFormat:o="NHWC",dilations:s=[1,1],dimRoundingMode:i,bias:a,activation:l="linear",preluActivationWeights:c,leakyreluAlpha:u}){if(zm(R.state.gradientDepth,l)===!1){let S=ca(n,t,e,r,o,s,i);return a!=null&&(S=ae(S,a)),Bm(S,l,c,u)}let p=T(n,"x","depthwiseConv2d","float32"),f=T(t,"filter","depthwiseConv2d","float32"),d=p,h=!1;p.rank===3&&(h=!0,d=V(p,[1,p.shape[0],p.shape[1],p.shape[2]])),O(d.rank===4,()=>`Error in fused depthwiseConv2d: input must be rank 4, but got rank ${d.rank}.`),O(f.rank===4,()=>`Error in fused depthwiseConv2d: filter must be rank 4, but got rank ${f.rank}.`),O(d.shape[3]===f.shape[2],()=>`Error in fused depthwiseConv2d: number of input channels (${d.shape[3]}) must match the inChannels dimension in filter ${f.shape[2]}.`),s==null&&(s=[1,1]),O(Xr(e,s),()=>`Error in fused depthwiseConv2d: Either strides or dilations must be 1. Got strides ${e} and dilations '${s}'`),dn("fused depthwiseConv2d",r,i);let m=cm(d.shape,f.shape,e,s,r,i,!0),g;a!=null&&(g=T(a,"bias","fused conv2d"),[g]=bt(g,p),rt(m.outShape,g.shape));let x;c!=null&&(x=T(c,"prelu weights","fused depthwiseConv2d"));let b=(S,k)=>{O(Xs(s),()=>`Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '${s}'`);let[A,$,L,z]=k,W=$m(S,L,l),Q=N1($.shape,W,A,e,r,s,i),ne=E1($,W,A.shape,e,r,s,i);if(z!=null){let se=Lm(g,W);return[Q,ne,se]}return[Q,ne]},w={x:d,filter:f,bias:g,preluActivationWeights:x},v={strides:e,pad:r,dataFormat:o,dilations:s,dimRoundingMode:i,activation:l,leakyreluAlpha:u};return a==null?Io((k,A,$)=>{let L=R.runKernel(mf,w,v);return $([A,k,L]),h&&(L=V(L,[L.shape[1],L.shape[2],L.shape[3]])),{value:L,gradFunc:b}})(d,f):Io((k,A,$,L)=>{let z=R.runKernel(mf,w,v);return L([A,k,z,$]),h&&(z=V(z,[z.shape[1],z.shape[2],z.shape[3]])),{value:z,gradFunc:b}})(d,f,g)}var bq,vq=F(()=>{"use strict";oe();Zu();G();Vn();J();ce();Nn();bn();Nr();A0();UF();jF();by();Z();Oe();bq=_({fusedDepthwiseConv2d_:jke})});function Gke({a:n,b:t,transposeA:e=!1,transposeB:r=!1,bias:o,activation:s="linear",preluActivationWeights:i,leakyreluAlpha:a=.2}){if(zm(R.state.gradientDepth,s)===!1){let W=st(n,t,e,r);return o!=null&&(W=ae(W,o)),Bm(W,s,i,a)}let l=T(n,"a","fused matMul"),c=T(t,"b","fused matMul");[l,c]=bt(l,c);let u=e?l.shape[l.rank-2]:l.shape[l.rank-1],p=r?c.shape[c.rank-1]:c.shape[c.rank-2],f=e?l.shape[l.rank-1]:l.shape[l.rank-2],d=r?c.shape[c.rank-2]:c.shape[c.rank-1],h=l.shape.slice(0,-2),m=c.shape.slice(0,-2),g=yt(h),x=yt(m);O(u===p,()=>`Error in fused matMul: inner shapes (${u}) and (${p}) of Tensors with shapes ${l.shape} and ${c.shape} and transposeA=${e} and transposeB=${r} must match.`);let w=rt(l.shape.slice(0,-2),c.shape.slice(0,-2)).concat([f,d]),v=e?V(l,[g,u,f]):V(l,[g,f,u]),S=r?V(c,[x,d,p]):V(c,[x,p,d]),k;o!=null&&(k=T(o,"bias","fused matMul"),[k]=bt(k,l),rt(w,k.shape));let A;i!=null&&(A=T(i,"prelu weights","fused matMul"));let $=(W,Q)=>{let[ne,se,te,ie]=Q,le=$m(V(W,te.shape),te,s),pe,me;if(!e&&!r?(pe=st(le,se,!1,!0),me=st(ne,le,!0,!1)):!e&&r?(pe=st(le,se,!1,!1),me=st(le,ne,!0,!1)):e&&!r?(pe=st(se,le,!1,!0),me=st(ne,le,!1,!1)):(pe=st(se,le,!0,!0),me=st(le,ne,!0,!0)),o!=null){let ve=Lm(ie,le);return[pe,me,ve]}else return[pe,me]},L={a:v,b:S,bias:k,preluActivationWeights:A},z={transposeA:e,transposeB:r,activation:s,leakyreluAlpha:a};return o==null?Io((Q,ne,se)=>{let te=R.runKernel(df,L,z);return se([Q,ne,te]),{value:V(te,w),gradFunc:$}})(v,S):Io((Q,ne,se,te)=>{let ie=R.runKernel(df,L,z);return te([Q,ne,ie,se]),{value:V(ie,w),gradFunc:$}})(v,S,k)}var wq,Cq=F(()=>{"use strict";oe();Zu();G();Vn();J();ce();Nn();bn();by();ia();Z();Oe();wq=_({fusedMatMul_:Gke})});var ap={};_t(ap,{conv2d:()=>xq,depthwiseConv2d:()=>bq,matMul:()=>wq});var Iq=F(()=>{"use strict";yq();vq();Cq();});function Wke(n){return xy(n,.54,.46)}var Sq,Tq=F(()=>{"use strict";Z();ww();Sq=_({hammingWindow_:Wke})});function Hke(n){return xy(n,.5,.5)}var D1,GF=F(()=>{"use strict";Z();ww();D1=_({hannWindow_:Hke})});function qke(n,t,e,r=!1,o=0){let s=0,i=[];for(;s+t<=n.size;)i.push($e(n,s,t)),s+=e;if(r)for(;s<n.size;){let a=s+t-n.size,l=Tt([$e(n,s,t-a),Qs([a],o)]);i.push(l),s+=e}return i.length===0?ti([],[0,t]):V(Tt(i),[i.length,t])}var k1,WF=F(()=>{"use strict";Zs();ry();Z();Oe();rs();v1();k1=_({frame_:qke})});function Kke(n,t,e,r,o=D1){r==null&&(r=S1(t));let s=k1(n,t,e),i=B(s,o(t));return sp(i,r)}var Eq,Nq=F(()=>{"use strict";Ue();Z();ww();y1();WF();GF();Eq=_({stft_:Kke})});function Xke(n,t,e,r,o="bilinear",s=0){let i=T(n,"image","cropAndResize"),a=T(t,"boxes","cropAndResize","float32"),l=T(e,"boxInd","cropAndResize","int32"),c=a.shape[0];O(i.rank===4,()=>`Error in cropAndResize: image must be rank 4,but got rank ${i.rank}.`),O(a.rank===2&&a.shape[1]===4,()=>`Error in cropAndResize: boxes must be have size [${c},4] but had shape ${a.shape}.`),O(l.rank===1&&l.shape[0]===c,()=>`Error in cropAndResize: boxInd must be have size [${c}] but had shape ${a.shape}.`),O(r.length===2,()=>`Error in cropAndResize: cropSize must be of length 2, but got length ${r.length}.`),O(r[0]>=1&&r[1]>=1,()=>`cropSize must be atleast [1,1], but was ${r}`),O(o==="bilinear"||o==="nearest",()=>`method must be bilinear or nearest, but was ${o}`);let u={image:i,boxes:a,boxInd:l},p={method:o,extrapolationValue:s,cropSize:r};return R.runKernel(nh,u,p)}var Dq,kq=F(()=>{"use strict";oe();G();J();ce();Z();Dq=_({cropAndResize_:Xke})});function Yke(n){let t=T(n,"image","flipLeftRight","float32");O(t.rank===4,()=>`Error in flipLeftRight: image must be rank 4,but got rank ${t.rank}.`);let e={image:t};return R.runKernel(fh,e,{})}var _q,Aq=F(()=>{"use strict";oe();G();J();ce();Z();_q=_({flipLeftRight_:Yke})});function Zke(n){let t=T(n,"image","grayscaleToRGB"),e=t.rank-1,r=t.shape[e];O(t.rank>=2,()=>`Error in grayscaleToRGB: images must be at least rank 2, but got rank ${t.rank}.`),O(r===1,()=>`Error in grayscaleToRGB: last dimension of a grayscale image should be size 1, but got size ${r}.`);let o=new Array(t.rank);return o.fill(1,0,e),o[e]=3,$r(t,o)}var Rq,Mq=F(()=>{"use strict";J();ce();Z();ly();Rq=_({grayscaleToRGB_:Zke})});function Qke(n){let t=T(n,"image","RGBToGrayscale"),e=t.rank-1,r=t.shape[e];O(t.rank>=2,()=>`Error in RGBToGrayscale: images must be at least rank 2, but got rank ${t.rank}.`),O(r===3,()=>`Error in RGBToGrayscale: last dimension of an RGB image should be size 3, but got size ${r}.`);let o=t.dtype,s=fe(t,"float32"),i=Xt([.2989,.587,.114]),a;switch(t.rank){case 2:a=qu("ij,j->i",s,i);break;case 3:a=qu("ijk,k->ij",s,i);break;case 4:a=qu("ijkl,l->ijk",s,i);break;case 5:a=qu("ijklm,m->ijkl",s,i);break;case 6:a=qu("ijklmn,n->ijklm",s,i);break;default:throw new Error("Not a valid tensor rank.")}return a=Cn(a,-1),fe(a,o)}var Oq,Fq=F(()=>{"use strict";J();ce();vt();DO();ay();Z();Of();Oq=_({rgbToGrayscale_:Qke})});function Jke(n,t,e=0,r=.5){let o=T(n,"image","rotateWithOffset","float32");O(o.rank===4,()=>`Error in rotateWithOffset: image must be rank 4,but got rank ${o.rank}.`);let s={image:o},i={radians:t,fillValue:e,center:r};return R.runKernel(Kh,s,i)}var Pq,$q=F(()=>{"use strict";oe();G();J();ce();Z();Pq=_({rotateWithOffset_:Jke})});function Si(n,t,e,r,o,s){r==null&&(r=.5),o==null&&(o=Number.NEGATIVE_INFINITY),s==null&&(s=0);let i=n.shape[0];return e=Math.min(e,i),O(0<=r&&r<=1,()=>`iouThreshold must be in [0, 1], but was '${r}'`),O(n.rank===2,()=>`boxes must be a 2D tensor, but was of rank '${n.rank}'`),O(n.shape[1]===4,()=>`boxes must have 4 columns, but 2nd dimension was ${n.shape[1]}`),O(t.rank===1,()=>"scores must be a 1D tensor"),O(t.shape[0]===i,()=>`scores has incompatible shape with boxes. Expected ${i}, but was ${t.shape[0]}`),O(0<=s&&s<=1,()=>`softNmsSigma must be in [0, 1], but was '${s}'`),{maxOutputSize:e,iouThreshold:r,scoreThreshold:o,softNmsSigma:s}}var Vm=F(()=>{"use strict";ce();});function e_e(n,t,e,r=.5,o=Number.NEGATIVE_INFINITY){let s=T(n,"boxes","nonMaxSuppression","float32"),i=T(t,"scores","nonMaxSuppression","float32"),a=Si(s,i,e,r,o);e=a.maxOutputSize,r=a.iouThreshold,o=a.scoreThreshold;let l={maxOutputSize:e,iouThreshold:r,scoreThreshold:o};return R.runKernel(Ch,{boxes:s,scores:i},l)}var Lq,Bq=F(()=>{"use strict";oe();G();J();Vm();Z();Lq=_({nonMaxSuppression_:e_e})});function zq(n,t,e){let r=t_e(n,t,e),o=r<0?-(r+1):r;n.splice(o,0,t)}function t_e(n,t,e){return r_e(n,t,e||n_e)}function n_e(n,t){return n>t?1:n<t?-1:0}function r_e(n,t,e){let r=0,o=n.length,s=0,i=!1;for(;r<o;){s=r+(o-r>>>1);let a=e(t,n[s]);a>0?r=s+1:(o=s,i=!a)}return i?r:-r-1}var Vq=F(()=>{"use strict";});function _1(n,t,e,r,o){return HF(n,t,e,r,o,0)}function A1(n,t,e,r,o,s){return HF(n,t,e,r,o,0,!1,s,!0)}function R1(n,t,e,r,o,s){return HF(n,t,e,r,o,s,!0)}function HF(n,t,e,r,o,s,i=!1,a=!1,l=!1){let c=[];for(let g=0;g<t.length;g++)t[g]>o&&c.push({score:t[g],boxIndex:g,suppressBeginIndex:0});c.sort(Uq);let u=s>0?-.5/s:0,p=[],f=[];for(;p.length<e&&c.length>0;){let g=c.pop(),{score:x,boxIndex:b,suppressBeginIndex:w}=g;if(x<o)break;let v=!1;for(let S=p.length-1;S>=w;--S){let k=o_e(n,b,p[S]);if(k>=r){v=!0;break}if(g.score=g.score*s_e(r,u,k),g.score<=o)break}g.suppressBeginIndex=p.length,v||(g.score===x?(p.push(b),f.push(g.score)):g.score>o&&zq(c,g,Uq))}let d=p.length,h=e-d;a&&h>0&&(p.push(...new Array(h).fill(0)),f.push(...new Array(h).fill(0)));let m={selectedIndices:p};return i&&(m.selectedScores=f),l&&(m.validOutputs=d),m}function o_e(n,t,e){let r=n.subarray(t*4,t*4+4),o=n.subarray(e*4,e*4+4),s=Math.min(r[0],r[2]),i=Math.min(r[1],r[3]),a=Math.max(r[0],r[2]),l=Math.max(r[1],r[3]),c=Math.min(o[0],o[2]),u=Math.min(o[1],o[3]),p=Math.max(o[0],o[2]),f=Math.max(o[1],o[3]),d=(a-s)*(l-i),h=(p-c)*(f-u);if(d<=0||h<=0)return 0;let m=Math.max(s,c),g=Math.max(i,u),x=Math.min(a,p),b=Math.min(l,f),w=Math.max(x-m,0)*Math.max(b-g,0);return w/(d+h-w)}function s_e(n,t,e){let r=Math.exp(t*e*e);return e<=n?r:0}function Uq(n,t){return n.score-t.score||n.score===t.score&&t.boxIndex-n.boxIndex}var Cw=F(()=>{"use strict";Vq();});function i_e(s,i,a){return ee(this,arguments,function*(n,t,e,r=.5,o=Number.NEGATIVE_INFINITY){let l=T(n,"boxes","nonMaxSuppressionAsync"),c=T(t,"scores","nonMaxSuppressionAsync"),u=Si(l,c,e,r,o);e=u.maxOutputSize,r=u.iouThreshold,o=u.scoreThreshold;let p=yield Promise.all([l.data(),c.data()]),f=p[0],d=p[1],{selectedIndices:h}=_1(f,d,e,r,o);return l!==n&&l.dispose(),c!==t&&c.dispose(),Xt(h,"int32")})}var jq,Gq=F(()=>{"use strict";Cw();J();Vm();Of();jq=i_e});function a_e(n,t,e,r=.5,o=Number.NEGATIVE_INFINITY,s=0){let i=T(n,"boxes","nonMaxSuppression"),a=T(t,"scores","nonMaxSuppression"),l=Si(i,a,e,r,o,s);e=l.maxOutputSize,r=l.iouThreshold,o=l.scoreThreshold,s=l.softNmsSigma;let c={boxes:i,scores:a},u={maxOutputSize:e,iouThreshold:r,scoreThreshold:o,softNmsSigma:s},p=R.runKernel(Sh,c,u);return{selectedIndices:p[0],selectedScores:p[1]}}var Wq,Hq=F(()=>{"use strict";oe();G();J();Vm();Z();Wq=_({nonMaxSuppressionWithScore_:a_e})});function l_e(i,a,l){return ee(this,arguments,function*(n,t,e,r=.5,o=Number.NEGATIVE_INFINITY,s=0){let c=T(n,"boxes","nonMaxSuppressionAsync"),u=T(t,"scores","nonMaxSuppressionAsync"),p=Si(c,u,e,r,o,s);e=p.maxOutputSize,r=p.iouThreshold,o=p.scoreThreshold,s=p.softNmsSigma;let f=yield Promise.all([c.data(),u.data()]),d=f[0],h=f[1],{selectedIndices:m,selectedScores:g}=R1(d,h,e,r,o,s);return c!==n&&c.dispose(),u!==t&&u.dispose(),{selectedIndices:Xt(m,"int32"),selectedScores:Xt(g)}})}var qq,Kq=F(()=>{"use strict";Cw();J();Vm();Of();qq=l_e});function c_e(n,t,e,r=.5,o=Number.NEGATIVE_INFINITY,s=!1){let i=T(n,"boxes","nonMaxSuppression"),a=T(t,"scores","nonMaxSuppression"),l=Si(i,a,e,r,o,null),c=l.maxOutputSize,u=l.iouThreshold,p=l.scoreThreshold,f={boxes:i,scores:a},d={maxOutputSize:c,iouThreshold:u,scoreThreshold:p,padToMaxOutputSize:s},h=R.runKernel(Ih,f,d);return{selectedIndices:h[0],validOutputs:h[1]}}var Xq,Yq=F(()=>{"use strict";oe();G();J();Vm();Z();Xq=_({nonMaxSuppressionPadded_:c_e})});function u_e(i,a,l){return ee(this,arguments,function*(n,t,e,r=.5,o=Number.NEGATIVE_INFINITY,s=!1){let c=T(n,"boxes","nonMaxSuppressionAsync"),u=T(t,"scores","nonMaxSuppressionAsync"),p=Si(c,u,e,r,o,null),f=p.maxOutputSize,d=p.iouThreshold,h=p.scoreThreshold,[m,g]=yield Promise.all([c.data(),u.data()]),{selectedIndices:x,validOutputs:b}=A1(m,g,f,d,h,s);return c!==n&&c.dispose(),u!==t&&u.dispose(),{selectedIndices:Xt(x,"int32"),validOutputs:Ie(b,"int32")}})}var Zq,Qq=F(()=>{"use strict";Cw();J();Vm();kn();Of();Zq=u_e});function p_e(n,t,e=!1,r=!1){let o=T(n,"images","resizeBilinear");O(o.rank===3||o.rank===4,()=>`Error in resizeBilinear: x must be rank 3 or 4, but got rank ${o.rank}.`),O(t.length===2,()=>`Error in resizeBilinear: new shape must 2D, but got shape ${t}.`),O(r===!1||e===!1,()=>"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false.");let s=o,i=!1;o.rank===3&&(i=!0,s=V(o,[1,o.shape[0],o.shape[1],o.shape[2]]));let[]=t,a={images:s},l={alignCorners:e,halfPixelCenters:r,size:t},c=R.runKernel(Nu,a,l);return i?V(c,[c.shape[1],c.shape[2],c.shape[3]]):c}var M1,qF=F(()=>{"use strict";oe();G();J();ce();Z();Oe();M1=_({resizeBilinear_:p_e})});function f_e(n,t,e=!1,r=!1){let o=T(n,"images","resizeNearestNeighbor");O(o.rank===3||o.rank===4,()=>`Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank ${o.rank}.`),O(t.length===2,()=>`Error in resizeNearestNeighbor: new shape must 2D, but got shape ${t}.`),O(o.dtype==="float32"||o.dtype==="int32",()=>"`images` must have `int32` or `float32` as dtype"),O(r===!1||e===!1,()=>"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false.");let s=o,i=!1;o.rank===3&&(i=!0,s=V(o,[1,o.shape[0],o.shape[1],o.shape[2]]));let[]=t,a={images:s},l={alignCorners:e,halfPixelCenters:r,size:t},c=R.runKernel(Eu,a,l);return i?V(c,[c.shape[1],c.shape[2],c.shape[3]]):c}var O1,KF=F(()=>{"use strict";oe();G();J();ce();Z();Oe();O1=_({resizeNearestNeighbor_:f_e})});function d_e(n,t="binary",e=!1,r=.5){let o=T(n,"image","threshold"),s=.2989,i=.587,a=.114,l=o.shape[0]*o.shape[1],c=B(Xt([r]),255),u,p,f,d;if(O(o.rank===3,()=>`Error in threshold: image must be rank 3,but got rank ${o.rank}.`),O(o.shape[2]===3||o.shape[2]===1,()=>`Error in threshold: image color channel must be equal to 3 or 1but got ${o.shape[2]}.`),O(o.dtype==="int32"||o.dtype==="float32",()=>`Error in dtype: image dtype must be int32 or float32,but got dtype ${o.dtype}.`),O(t==="otsu"||t==="binary",()=>`Method must be binary or otsu, but was ${t}`),o.shape[2]===3){[u,p,f]=dr(o,[1,1,1],-1);let g=B(u,s),x=B(p,i),b=B(f,a);d=ae(ae(g,x),b)}else d=n;if(t==="otsu"){let g=C0(fe(Sm(d),"int32"),Er([]),256);c=h_e(g,l)}let h=e?ss(d,c):_n(d,c);return fe(B(h,255),"int32")}function h_e(n,t){let e=Xt([-1]),r=Xt([0]),o=Xt([0]),s,i,a,l,c,u;for(let p=0;p<n.size-1;p++){s=$e(n,0,p+1),i=$e(n,p+1),c=xe(Ee(s),t),u=xe(Ee(i),t);let f=Ee(B(s,ga(0,s.size)));a=xe(f,Ee(s));let d=Qs(i.shape,s.size),h=ae(ga(0,i.size),d),m=B(i,h);l=xe(Ee(m),Ee(i));let g=be(a,l),x=be(a,l),b=B(c,u);o=B(B(b,g),x);let w=_n(o,r);r=rn(w,o,r),e=rn(w,Xt([p]),e)}return e}var Jq,eK=F(()=>{"use strict";Of();Z();vt();Mm();gO();Df();pc();Jn();Nn();Ue();Zt();on();IF();Js();ry();rs();h1();n0();ce();J();Jq=_({threshold_:d_e})});function m_e(n,t,e="nearest",r="constant",o=0,s){let i=T(n,"image","transform","float32"),a=T(t,"transforms","transform","float32");O(i.rank===4,()=>`Error in transform: image must be rank 4,but got rank ${i.rank}.`),O(a.rank===2&&(a.shape[0]===i.shape[0]||a.shape[0]===1)&&a.shape[1]===8,()=>"Error in transform: Input transform should be batch x 8 or 1 x 8"),O(s==null||s.length===2,()=>`Error in transform: outputShape must be [height, width] or null, but got ${s}.`);let l={image:i,transforms:a},c={interpolation:e,fillMode:r,fillValue:o,outputShape:s};return R.runKernel(Hh,l,c)}var tK,nK=F(()=>{"use strict";oe();G();J();ce();Z();tK=_({transform_:m_e})});function g_e(n,t,e){let r=T(n,"a","bandPart");O(r.rank>=2,()=>`bandPart(): Rank must be at least 2, got ${r.rank}.`);let o=r.shape,[s,i]=r.shape.slice(-2),a,l;typeof t=="number"?(O(t%1===0,()=>`bandPart(): numLower must be an integer, got ${t}.`),O(t<=s,()=>`bandPart(): numLower (${t}) must not be greater than the number of rows (${s}).`),a=T(t<0?s:t,"numLower","bandPart")):(O(t.dtype==="int32",()=>"bandPart(): numLower's dtype must be an int32."),a=rn(fc(t,0),s,Ns(t,s))),typeof e=="number"?(O(e%1===0,()=>`bandPart(): numUpper must be an integer, got ${e}.`),O(e<=i,()=>`bandPart(): numUpper (${e}) must not be greater than the number of columns (${i}).`),l=T(e<0?i:e,"numUpper","bandPart")):(O(e.dtype==="int32",()=>"bandPart(): numUpper's dtype must be an int32."),l=rn(fc(e,0),i,Ns(e,i)));let c=V(ga(0,s,1,"int32"),[-1,1]),u=ga(0,i,1,"int32"),p=be(c,u),f=Zr(ss(p,a),Co(p,pt(l))),d=Kt([s,i],r.dtype);return V(An(hr(V(r,[-1,s,i])).map(h=>rn(f,h,d))),o)}var rK,oK=F(()=>{"use strict";J();ce();gm();W0();Df();ym();ew();Lr();Z();h1();Oe();Mf();on();gy();Js();py();rK=_({bandPart_:g_e})});function x_e(n){let t;if(Array.isArray(n)){t=!1,O(n!=null&&n.length>0,()=>"Gram-Schmidt process: input must not be null, undefined, or empty");let o=n[0].shape[0];for(let s=1;s<n.length;++s)O(n[s].shape[0]===o,()=>`Gram-Schmidt: Non-unique lengths found in the input vectors: (${n[s].shape[0]} vs. ${o})`)}else t=!0,n=dr(n,n.shape[0],0).map(o=>Qt(o,[0]));O(n.length<=n[0].shape[0],()=>`Gram-Schmidt: Number of vectors (${n.length}) exceeds number of dimensions (${n[0].shape[0]}).`);let e=[],r=n;for(let o=0;o<n.length;++o)e.push(R.tidy(()=>{let s=r[o];if(o>0)for(let i=0;i<o;++i){let a=B(Ee(B(e[i],s)),e[i]);s=be(s,a)}return xe(s,cc(s,"euclidean"))}));return t?An(e,0):e}var sK,iK=F(()=>{"use strict";oe();ce();Zt();Ue();$0();Z();Mm();pw();Mf();on();Jn();sK=_({gramSchmidt_:x_e})});function y_e(n,t=!1){if(O(n.rank>=2,()=>`qr() requires input tensor to have a rank >= 2, but got rank ${n.rank}`),n.rank===2)return aK(n,t);{let e=n.shape.slice(0,n.shape.length-2).reduce((l,c)=>l*c),r=hr(V(n,[e,n.shape[n.shape.length-2],n.shape[n.shape.length-1]]),0),o=[],s=[];r.forEach(l=>{let[c,u]=aK(l,t);o.push(c),s.push(u)});let i=V(An(o,0),n.shape),a=V(An(s,0),n.shape);return[i,a]}}function aK(n,t=!1){return R.tidy(()=>{O(n.shape.length===2,()=>`qr2d() requires a 2D Tensor, but got a ${n.shape.length}D Tensor.`);let e=n.shape[0],r=n.shape[1],o=Nf(e),s=wo(n),i=ti([[1]],[1,1]),a=wo(i),l=e>=r?r:e;for(let c=0;c<l;++c){let u=s,p=a,f=o;[a,s,o]=R.tidy(()=>{let d=$e(s,[c,c],[e-c,1]),h=cc(d),m=$e(s,[c,c],[1,1]),g=rn(_n(m,0),ti([[-1]]),ti([[1]])),x=be(m,B(g,h)),b=xe(d,x);b.shape[0]===1?a=wo(i):a=Tt([i,$e(b,[1,0],[b.shape[0]-1,b.shape[1]])],0);let w=pt(xe(st(g,x),h)),v=$e(s,[c,0],[e-c,r]),S=B(w,a),k=it(a);if(c===0)s=be(v,st(S,st(k,v)));else{let L=be(v,st(S,st(k,v)));s=Tt([$e(s,[0,0],[c,r]),L],0)}let A=it(S),$=$e(o,[0,c],[e,o.shape[1]-c]);if(c===0)o=be($,st(st($,a),A));else{let L=be($,st(st($,a),A));o=Tt([$e(o,[0,0],[e,c]),L],1)}return[a,s,o]}),Be([u,p,f])}return!t&&e>r&&(o=$e(o,[0,0],[e,r]),s=$e(s,[0,0],[r,r])),[o,s]})}var lK,cK=F(()=>{"use strict";oe();Es();ce();Jx();Zs();Zt();FO();pc();ia();Ue();Lr();$0();Z();Oe();rs();Mf();on();v1();ip();gy();Js();lK=_({qr_:y_e})});var tr,ya=F(()=>{"use strict";tr=function(n){return n[n.NONE=0]="NONE",n[n.MEAN=1]="MEAN",n[n.SUM=2]="SUM",n[n.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS",n}(tr||{})});function b_e(n,t,e=tr.SUM_BY_NONZERO_WEIGHTS){let r=T(n,"losses","computeWeightedLoss"),o=null;t!=null&&(o=T(t,"weights","computeWeightedLoss"));let s=o==null?r:B(r,o);if(e===tr.NONE)return s;if(e===tr.SUM)return Ee(s);if(e===tr.MEAN){if(o==null)return sn(s);{let i=r.size/o.size,a=xe(Ee(s),Ee(o));return i>1?xe(a,Ie(i)):a}}if(e===tr.SUM_BY_NONZERO_WEIGHTS){if(o==null)return xe(Ee(s),Ie(r.size));{let i=B(o,er(r.shape)),a=fe(Ee(Ii(i,Ie(0))),"float32");return xe(Ee(s),a)}}throw Error(`Unknown reduction: ${e}`)}var co,mc=F(()=>{"use strict";J();vt();Zt();ya();J0();Ue();i1();vm();Z();kn();Jn();co=_({computeWeightedLoss_:b_e})});function v_e(n,t,e,r=tr.SUM_BY_NONZERO_WEIGHTS){let o=T(n,"labels","absoluteDifference"),s=T(t,"predictions","absoluteDifference"),i=null;e!=null&&(i=T(e,"weights","absoluteDifference")),En(o.shape,s.shape,"Error in absoluteDifference: ");let a=fn(be(o,s));return co(a,i,r)}var uK,pK=F(()=>{"use strict";J();ce();am();ya();Z();on();mc();uK=_({absoluteDifference_:v_e})});function w_e(n,t,e,r,o=tr.SUM_BY_NONZERO_WEIGHTS){let s=T(n,"labels","cosineDistance"),i=T(t,"predictions","cosineDistance"),a=null;r!=null&&(a=T(r,"weights","cosineDistance")),En(s.shape,i.shape,"Error in cosineDistance: ");let l=Ie(1),c=be(l,Ee(B(s,i),e,!0));return co(c,a,o)}var fK,dK=F(()=>{"use strict";J();ce();ya();Ue();Z();kn();on();Jn();mc();fK=_({cosineDistance_:w_e})});function C_e(n,t,e,r=tr.SUM_BY_NONZERO_WEIGHTS){let o=T(n,"labels","hingeLoss"),s=T(t,"predictions","hingeLoss"),i=null;e!=null&&(i=T(e,"weights","hingeLoss")),En(o.shape,s.shape,"Error in hingeLoss: ");let a=Ie(1);o=be(B(Ie(2),o),a);let l=Br(be(a,B(o,s)));return co(l,i,r)}var hK,mK=F(()=>{"use strict";J();ce();ya();Ue();Z();fy();kn();on();mc();hK=_({hingeLoss_:C_e})});function I_e(n,t,e,r=1,o=tr.SUM_BY_NONZERO_WEIGHTS){let s=T(n,"labels","huberLoss"),i=T(t,"predictions","huberLoss"),a=null;e!=null&&(a=T(e,"weights","huberLoss")),En(s.shape,i.shape,"Error in huberLoss: ");let l=Ie(r),c=fn(be(i,s)),u=Ns(c,l),p=be(c,u),f=ae(B(Ie(.5),lt(u)),B(l,p));return co(f,a,o)}var gK,xK=F(()=>{"use strict";J();ce();am();Nn();ya();ew();Ue();Z();kn();br();on();mc();gK=_({huberLoss_:I_e})});function S_e(n,t,e,r=1e-7,o=tr.SUM_BY_NONZERO_WEIGHTS){let s=T(n,"labels","logLoss"),i=T(t,"predictions","logLoss"),a=null;e!=null&&(a=T(e,"weights","logLoss")),En(s.shape,i.shape,"Error in logLoss: ");let l=Ie(1),c=Ie(r),u=pt(B(s,kr(ae(i,c)))),p=B(be(l,s),kr(ae(be(l,i),c))),f=be(u,p);return co(f,a,o)}var yK,bK=F(()=>{"use strict";J();ce();Nn();cy();ya();Ue();Lr();Z();kn();on();mc();yK=_({logLoss_:S_e})});function T_e(n,t,e,r=tr.SUM_BY_NONZERO_WEIGHTS){let o=T(n,"labels","meanSquaredError"),s=T(t,"predictions","meanSquaredError"),i=null;e!=null&&(i=T(e,"weights","meanSquaredError")),En(o.shape,s.shape,"Error in meanSquaredError: ");let a=Om(o,s);return co(a,i,r)}var vK,wK=F(()=>{"use strict";J();ce();ya();Z();b1();mc();vK=_({meanSquaredError_:T_e})});function E_e(n,t){let e=T(n,"labels","sigmoidCrossEntropyWithLogits"),r=T(t,"logits","sigmoidCrossEntropyWithLogits");En(e.shape,r.shape,"Error in sigmoidCrossEntropyWithLogits: ");let o=Br(r),s=B(r,e),i=Yu(vn(pt(fn(r))));return ae(be(o,s),i)}function N_e(n,t,e,r=0,o=tr.SUM_BY_NONZERO_WEIGHTS){let s=T(n,"multiClassLabels","sigmoidCrossEntropy"),i=T(t,"logits","sigmoidCrossEntropy"),a=null;if(e!=null&&(a=T(e,"weights","sigmoidCrossEntropy")),En(s.shape,i.shape,"Error in sigmoidCrossEntropy: "),r>0){let c=Ie(r),u=Ie(1),p=Ie(.5);s=ae(B(s,be(u,c)),B(p,c))}let l=E_e(s,i);return co(l,a,o)}var CK,IK=F(()=>{"use strict";J();ce();am();Nn();uc();LO();ya();Ue();Lr();Z();fy();kn();on();mc();CK=_({sigmoidCrossEntropy_:N_e})});function D_e(n,t,e=-1){if(e===-1&&(e=t.rank-1),e!==t.rank-1)throw Error(`Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank ${t.rank} and dim was ${e}`);return Io((o,s,i)=>{let l=Qu(s,[e],!0),c=be(fe(s,"float32"),l);i([o,c]);let u=pt(B(c,o));return{value:Ee(u,[e]),gradFunc:(d,h)=>{let[m,g]=h,x=wi(d.shape,[e]);return[B(V(d,x),be(fe(m,"float32"),vn(g))),B(V(d,x),be(vn(g),fe(m,"float32")))]}}})(n,t)}function k_e(n,t,e,r=0,o=tr.SUM_BY_NONZERO_WEIGHTS){let s=T(n,"onehotLabels","softmaxCrossEntropy"),i=T(t,"logits","softmaxCrossEntropy"),a=null;if(e!=null&&(a=T(e,"weights","softmaxCrossEntropy")),En(s.shape,i.shape,"Error in softmaxCrossEntropy: "),r>0){let c=Ie(r),u=Ie(1),p=Ie(s.shape[1]);s=ae(B(s,be(u,c)),xe(c,p))}let l=D_e(s,i);return co(l,a,o)}var SK,TK=F(()=>{"use strict";Zu();J();ce();Nn();pa();vt();Zt();uc();t1();ya();Ue();Lr();Z();Oe();kn();on();Jn();mc();SK=_({softmaxCrossEntropy_:k_e})});function __e(n,t,e,r){let o=T(n,"indices","sparseFillEmptyRows","int32"),s=T(t,"values","sparseFillEmptyRows"),i=T(e,"denseShape","sparseFillEmptyRows","int32"),a=T(r,"defaultValue","sparseFillEmptyRows",s.dtype);if(o.rank!==2)throw new Error(`Indices should be Tensor2D but received shape
        ${o.shape}`);if(s.rank!==1)throw new Error(`Values should be Tensor1D but received shape ${s.shape}`);if(i.rank!==1)throw new Error(`Dense shape should be Tensor1D but received shape ${i.shape}`);if(a.rank!==0)throw new Error(`Default value should be a scalar but received shape ${a.shape}`);let l={indices:o,values:s,denseShape:i,defaultValue:a},c=R.runKernel(Fh,l);return{outputIndices:c[0],outputValues:c[1],emptyRowIndicator:c[2],reverseIndexMap:c[3]}}var EK,NK=F(()=>{"use strict";oe();G();J();Z();EK=_({sparseFillEmptyRows_:__e})});function A_e(n,t,e){let r=T(n,"inputIndices","sparseReshape","int32"),o=T(t,"inputShape","sparseReshape","int32"),s=T(e,"newShape","sparseReshape","int32");if(r.rank!==2)throw new Error(`Input indices should be Tensor2D but received shape
        ${r.shape}`);if(o.rank!==1)throw new Error(`Input shape should be Tensor1D but received shape ${o.shape}`);if(s.rank!==1)throw new Error(`New shape should be Tensor1D but received shape ${s.shape}`);let i={inputIndices:r,inputShape:o,newShape:s},a=R.runKernel(Ph,i);return{outputIndices:a[0],outputShape:a[1]}}var DK,kK=F(()=>{"use strict";oe();G();J();Z();DK=_({sparseReshape_:A_e})});function R_e(n,t,e){let r=T(n,"data","sparseSegmentMean"),o=T(t,"indices","sparseSegmentMean","int32"),s=T(e,"segmentIds","sparseSegmentMean","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(o.rank!==1)throw new Error(`Indices should be Tensor1D but received shape
          ${o.shape}`);if(s.rank!==1)throw new Error(`Segment ids should be Tensor1D but received shape
          ${s.shape}`);let i={data:r,indices:o,segmentIds:s};return R.runKernel($h,i)}var _K,AK=F(()=>{"use strict";oe();G();J();Z();_K=_({sparseSegmentMean_:R_e})});function M_e(n,t,e){let r=T(n,"data","sparseSegmentSum"),o=T(t,"indices","sparseSegmentSum","int32"),s=T(e,"segmentIds","sparseSegmentSum","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(o.rank!==1)throw new Error(`Indices should be Tensor1D but received shape
         ${o.shape}`);if(s.rank!==1)throw new Error(`Segment ids should be Tensor1D but received shape
         ${s.shape}`);let i={data:r,indices:o,segmentIds:s};return R.runKernel(Lh,i)}var RK,MK=F(()=>{"use strict";oe();G();J();Z();RK=_({sparseSegmentSum_:M_e})});function O_e(n,t,e,r,o,s,i,a){let l=T(n,"data","stringNGrams","string");if(l.dtype!=="string")throw new Error("Data must be of datatype string");if(l.shape.length!==1)throw new Error(`Data must be a vector, saw: ${l.shape}`);let c=T(t,"dataSplits","stringNGrams");if(c.dtype!=="int32")throw new Error("Data splits must be of datatype int32");let u={separator:e,nGramWidths:r,leftPad:o,rightPad:s,padWidth:i,preserveShortSequences:a},p={data:l,dataSplits:c},f=R.runKernel(Uh,p,u);return{nGrams:f[0],nGramsSplits:f[1]}}var OK,FK=F(()=>{"use strict";oe();G();J();Z();OK=_({stringNGrams_:O_e})});function F_e(n,t,e=!0){let r=T(n,"input","stringSplit","string"),o=T(t,"delimiter","stringSplit","string");if(r.rank!==1)throw new Error(`Input should be Tensor1D but received shape ${r.shape}`);if(o.rank!==0)throw new Error(`Delimiter should be a scalar but received shape ${o.shape}`);let s={skipEmpty:e},i={input:r,delimiter:o},a=R.runKernel(jh,i,s);return{indices:a[0],values:a[1],shape:a[2]}}var PK,$K=F(()=>{"use strict";oe();G();J();Z();PK=_({stringSplit_:F_e})});function P_e(n,t){let e=T(n,"input","stringToHashBucketFast","string"),r={numBuckets:t};if(t<=0)throw new Error("Number of buckets must be at least 1");let o={input:e};return R.runKernel(Gh,o,r)}var LK,BK=F(()=>{"use strict";oe();G();J();Z();LK=_({stringToHashBucketFast_:P_e})});function $_e(n,t,e,r=!0){let o=T(n,"input","staticRegexReplace","string"),s={pattern:t,rewrite:e,replaceGlobal:r};return R.runKernel(ff,{x:o},s)}var zK,VK=F(()=>{"use strict";oe();G();J();Z();zK=_({staticRegexReplace_:$_e})});var UK,jK,wr,F1,GK,WK,HK,et=F(()=>{"use strict";am();r6();o6();Nn();s6();iO();aO();lO();cO();i6();a6();l6();uO();c6();jT();f6();d6();y0();ny();g6();x6();y6();gO();b6();v6();GT();ju();vt();w6();C6();Jx();bf();Zs();I6();S6();T6();E6();bO();um();vO();N6();D6();qT();CO();KT();XT();k6();IO();A0();_6();TO();Zt();EO();NO();DO();YT();R6();M0();M6();OO();uc();ay();P6();FO();ry();QT();UT();z0();pc();gm();V0();$6();L6();B6();JT();W0();Df();z6();$O();cy();LO();W6();H6();t1();ym();X0();n1();zO();q6();ia();iy();s1();K6();X6();Q0();J0();Y6();ZT();ew();GO();WO();Z6();Ue();Q6();J6();Lr();i1();a1();vm();e8();t8();_f();n8();r8();o8();s8();JO();Ef();l1();oO();eF();i8();a8();l8();c8();k8();gF();_8();d1();A8();h1();lw();R8();fy();m1();Oe();rp();M8();O8();F8();P8();IF();SF();kn();TF();EF();$8();ty();L8();DF();kF();rs();B8();z8();V8();U8();j8();BO();rw();g1();x1();_F();y1();Mm();fa();br();b1();pw();Mf();hy();G8();on();Jn();W8();hO();n0();Of();v1();AF();H8();q8();K8();Y8();ly();$F();Z8();LF();w1();gy();Q8();J8();Js();VF();py();Dn();tq();ip();$0();rq();sq();o1();cq();pq();hq();ww();gq();Z();y1();g1();x1();_F();Iq();Tq();GF();WF();Nq();kq();Aq();Mq();Fq();$q();Bq();Gq();Hq();Kq();Yq();Qq();qF();KF();eK();nK();oK();iK();cK();pK();mc();dK();mK();xK();bK();wK();IK();TK();NK();kK();AK();MK();FK();$K();BK();VK();UK={fft:op,ifft:hc,rfft:sp,irfft:Rm},jK={hammingWindow:Sq,hannWindow:D1,frame:k1,stft:Eq},wr={flipLeftRight:_q,grayscaleToRGB:Rq,resizeNearestNeighbor:O1,resizeBilinear:M1,rgbToGrayscale:Oq,rotateWithOffset:Pq,cropAndResize:Dq,nonMaxSuppression:Lq,nonMaxSuppressionAsync:jq,nonMaxSuppressionWithScore:Wq,nonMaxSuppressionWithScoreAsync:qq,nonMaxSuppressionPadded:Xq,nonMaxSuppressionPaddedAsync:Zq,threshold:Jq,transform:tK},F1={bandPart:rK,gramSchmidt:sK,qr:lK},GK={absoluteDifference:uK,computeWeightedLoss:co,cosineDistance:fK,hingeLoss:hK,huberLoss:gK,logLoss:yK,meanSquaredError:vK,sigmoidCrossEntropy:CK,softmaxCrossEntropy:SK},WK={sparseFillEmptyRows:EK,sparseReshape:DK,sparseSegmentMean:_K,sparseSegmentSum:RK},HK={stringNGrams:OK,stringSplit:PK,stringToHashBucketFast:LK,staticRegexReplace:zK}});var he={};_t(he,{Serializable:()=>Iw,SerializationMap:()=>P1,getRegisteredName:()=>B_e,registerClass:()=>YF});function YF(n,t,e){O(n.className!=null,()=>"Class being registered does not have the static className property defined."),O(typeof n.className=="string",()=>"className is required to be a string, but got type "+typeof n.className),O(n.className.length>0,()=>"Class being registered has an empty-string as its className, which is disallowed."),typeof t>"u"&&(t="Custom"),typeof e>"u"&&(e=n.className);let r=e,o=t+">"+r;return P1.register(n),L_e.set(o,n),XF.set(n,o),n}function B_e(n){return XF.has(n)?XF.get(n):n.className}var L_e,XF,Iw,P1,$1=F(()=>{"use strict";ce();L_e=new Map,XF=new Map,Iw=class{getClassName(){return this.constructor.className}static fromConfig(t,e){return new t(e)}},P1=class n{constructor(){this.classNameMap={}}static getMap(){return n.instance==null&&(n.instance=new n),n.instance}static register(t){n.getMap().classNameMap[t.className]=[t,t.fromConfig]}}});var Qr,Ff=F(()=>{"use strict";Es();Zu();et();$1();Qr=class extends Iw{minimize(t,e=!1,r){let{value:o,grads:s}=this.computeGradients(t,r);if(r!=null){let i=r.map(a=>({name:a.name,tensor:s[a.name]}));this.applyGradients(i)}else this.applyGradients(s);return Be(s),e?o:(o.dispose(),null)}get iterations(){return this.iterations_==null&&(this.iterations_=0),this.iterations_}incrementIterations(){this.iterations_=this.iterations+1}computeGradients(t,e){return q0(t,e)}dispose(){this.iterations_!=null&&Be(this.iterations_)}saveIterations(){return ee(this,null,function*(){return this.iterations_==null&&(this.iterations_=0),{name:"iter",tensor:Ie(this.iterations_,"int32")}})}getWeights(){return ee(this,null,function*(){throw new Error("getWeights() is not implemented for this optimizer yet.")})}setWeights(t){return ee(this,null,function*(){throw new Error(`setWeights() is not implemented for this optimizer class ${this.getClassName()}`)})}extractIterations(t){return ee(this,null,function*(){return this.iterations_=(yield t[0].tensor.data())[0],t.slice(1)})}};Object.defineProperty(Qr,Symbol.hasInstance,{value:n=>n.minimize!=null&&n.computeGradients!=null&&n.applyGradients!=null})});var Pf,L1=F(()=>{"use strict";oe();Es();Nn();Zt();Ue();et();br();Dn();Ff();Pf=class extends Qr{static get className(){return"Adadelta"}constructor(t,e,r=null){super(),this.learningRate=t,this.rho=e,this.epsilon=r,this.accumulatedGrads=[],this.accumulatedUpdates=[],r==null&&(this.epsilon=R.backend.epsilon())}applyGradients(t){(Array.isArray(t)?t.map(r=>r.name):Object.keys(t)).forEach((r,o)=>{let s=R.registeredVariables[r],i=!1;this.accumulatedGrads[o]==null&&(this.accumulatedGrads[o]={originalName:`${r}/accum_grad`,variable:K(()=>ze(s).variable(i))}),this.accumulatedUpdates[o]==null&&(this.accumulatedUpdates[o]={originalName:`${r}/accum_var`,variable:K(()=>ze(s).variable(i))});let a=Array.isArray(t)?t[o].tensor:t[r];if(a==null)return;let l=this.accumulatedGrads[o].variable,c=this.accumulatedUpdates[o].variable;K(()=>{let u=ae(B(l,this.rho),B(lt(a),1-this.rho)),p=B(xe(qt(ae(c,this.epsilon)),qt(ae(l,this.epsilon))),a),f=ae(B(c,this.rho),B(lt(p),1-this.rho));l.assign(u),c.assign(f);let d=ae(B(p,-this.learningRate),s);s.assign(d)})}),this.incrementIterations()}dispose(){this.accumulatedUpdates!=null&&(Be(this.accumulatedGrads.map(t=>t.variable)),Be(this.accumulatedUpdates.map(t=>t.variable)))}getWeights(){return ee(this,null,function*(){let t=[...this.accumulatedGrads,...this.accumulatedUpdates];return[yield this.saveIterations()].concat(t.map(e=>({name:e.originalName,tensor:e.variable})))})}setWeights(t){return ee(this,null,function*(){t=yield this.extractIterations(t);let e=t.length/2,r=!1;this.accumulatedGrads=t.slice(0,e).map(o=>({originalName:o.name,variable:o.tensor.variable(r)})),this.accumulatedUpdates=t.slice(e,e*2).map(o=>({originalName:o.name,variable:o.tensor.variable(r)}))})}getConfig(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}}static fromConfig(t,e){return new t(e.learningRate,e.rho,e.epsilon)}}});var $f,B1=F(()=>{"use strict";oe();Es();Nn();Zt();ry();Ue();fa();br();Ff();$f=class extends Qr{static get className(){return"Adagrad"}constructor(t,e=.1){super(),this.learningRate=t,this.initialAccumulatorValue=e,this.accumulatedGrads=[]}applyGradients(t){(Array.isArray(t)?t.map(r=>r.name):Object.keys(t)).forEach((r,o)=>{let s=R.registeredVariables[r];this.accumulatedGrads[o]==null&&(this.accumulatedGrads[o]={originalName:`${r}/accumulator`,variable:K(()=>Qs(s.shape,this.initialAccumulatorValue).variable(!1))});let i=Array.isArray(t)?t[o].tensor:t[r];if(i==null)return;let a=this.accumulatedGrads[o].variable;K(()=>{let l=ae(a,lt(i));a.assign(l);let c=ae(B(xe(i,qt(ae(l,R.backend.epsilon()))),-this.learningRate),s);s.assign(c)})}),this.incrementIterations()}dispose(){this.accumulatedGrads!=null&&Be(this.accumulatedGrads.map(t=>t.variable))}getWeights(){return ee(this,null,function*(){return[yield this.saveIterations()].concat(this.accumulatedGrads.map(t=>({name:t.originalName,tensor:t.variable})))})}setWeights(t){return ee(this,null,function*(){t=yield this.extractIterations(t);let e=!1;this.accumulatedGrads=t.map(r=>({originalName:r.name,variable:r.tensor.variable(e)}))})}getConfig(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}static fromConfig(t,e){return new t(e.learningRate,e.initialAccumulatorValue)}}});var Lf,z1=F(()=>{"use strict";oe();Es();Nn();Zt();Ue();Ef();kn();fa();br();on();Dn();Ff();Lf=class extends Qr{static get className(){return"Adam"}constructor(t,e,r,o=null){super(),this.learningRate=t,this.beta1=e,this.beta2=r,this.epsilon=o,this.accumulatedFirstMoment=[],this.accumulatedSecondMoment=[],K(()=>{this.accBeta1=Ie(e).variable(),this.accBeta2=Ie(r).variable()}),o==null&&(this.epsilon=R.backend.epsilon())}applyGradients(t){let e=Array.isArray(t)?t.map(r=>r.name):Object.keys(t);K(()=>{let r=be(1,this.accBeta1),o=be(1,this.accBeta2);e.forEach((s,i)=>{let a=R.registeredVariables[s],l=!1;this.accumulatedFirstMoment[i]==null&&(this.accumulatedFirstMoment[i]={originalName:`${s}/m`,variable:K(()=>ze(a).variable(l))}),this.accumulatedSecondMoment[i]==null&&(this.accumulatedSecondMoment[i]={originalName:`${s}/v`,variable:K(()=>ze(a).variable(l))});let c=Array.isArray(t)?t[i].tensor:t[s];if(c==null)return;let u=this.accumulatedFirstMoment[i].variable,p=this.accumulatedSecondMoment[i].variable,f=ae(B(u,this.beta1),B(c,1-this.beta1)),d=ae(B(p,this.beta2),B(lt(c),1-this.beta2)),h=xe(f,r),m=xe(d,o);u.assign(f),p.assign(d);let g=ae(B(xe(h,ae(qt(m),this.epsilon)),-this.learningRate),a);a.assign(g)}),this.accBeta1.assign(B(this.accBeta1,this.beta1)),this.accBeta2.assign(B(this.accBeta2,this.beta2))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.accBeta2.dispose(),this.accumulatedFirstMoment!=null&&Be(this.accumulatedFirstMoment.map(t=>t.variable)),this.accumulatedSecondMoment!=null&&Be(this.accumulatedSecondMoment.map(t=>t.variable))}getWeights(){return ee(this,null,function*(){let t=[...this.accumulatedFirstMoment,...this.accumulatedSecondMoment];return[yield this.saveIterations()].concat(t.map(e=>({name:e.originalName,tensor:e.variable})))})}setWeights(t){return ee(this,null,function*(){t=yield this.extractIterations(t),K(()=>{this.accBeta1.assign(Yr(this.beta1,this.iterations_+1)),this.accBeta2.assign(Yr(this.beta2,this.iterations_+1))});let e=t.length/2,r=!1;this.accumulatedFirstMoment=t.slice(0,e).map(o=>({originalName:o.name,variable:o.tensor.variable(r)})),this.accumulatedSecondMoment=t.slice(e,e*2).map(o=>({originalName:o.name,variable:o.tensor.variable(r)}))})}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}}static fromConfig(t,e){return new t(e.learningRate,e.beta1,e.beta2,e.epsilon)}}});var Bf,V1=F(()=>{"use strict";oe();Es();am();Nn();Zt();Q0();Ue();kn();on();Dn();Ff();Bf=class extends Qr{static get className(){return"Adamax"}constructor(t,e,r,o=null,s=0){super(),this.learningRate=t,this.beta1=e,this.beta2=r,this.epsilon=o,this.decay=s,this.accumulatedFirstMoment=[],this.accumulatedWeightedInfNorm=[],K(()=>{this.iteration=Ie(0).variable(),this.accBeta1=Ie(e).variable()}),o==null&&(this.epsilon=R.backend.epsilon())}applyGradients(t){let e=Array.isArray(t)?t.map(r=>r.name):Object.keys(t);K(()=>{let r=be(1,this.accBeta1),o=xe(-this.learningRate,ae(B(this.iteration,this.decay),1));e.forEach((s,i)=>{let a=R.registeredVariables[s],l=!1;this.accumulatedFirstMoment[i]==null&&(this.accumulatedFirstMoment[i]={originalName:`${s}/m`,variable:ze(a).variable(l)}),this.accumulatedWeightedInfNorm[i]==null&&(this.accumulatedWeightedInfNorm[i]={originalName:`${s}/v`,variable:ze(a).variable(l)});let c=Array.isArray(t)?t[i].tensor:t[s];if(c==null)return;let u=this.accumulatedFirstMoment[i].variable,p=this.accumulatedWeightedInfNorm[i].variable,f=ae(B(u,this.beta1),B(c,1-this.beta1)),d=B(p,this.beta2),h=fn(c),m=$o(d,h);u.assign(f),p.assign(m);let g=ae(B(xe(o,r),xe(f,ae(m,this.epsilon))),a);a.assign(g)}),this.iteration.assign(ae(this.iteration,1)),this.accBeta1.assign(B(this.accBeta1,this.beta1))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.iteration.dispose(),this.accumulatedFirstMoment!=null&&Be(this.accumulatedFirstMoment.map(t=>t.variable)),this.accumulatedWeightedInfNorm!=null&&Be(this.accumulatedWeightedInfNorm.map(t=>t.variable))}getWeights(){return ee(this,null,function*(){throw new Error("getWeights() is not implemented for Adamax yet.")})}setWeights(t){return ee(this,null,function*(){throw new Error("setWeights() is not implemented for Adamax yet.")})}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}}static fromConfig(t,e){return new t(e.learningRate,e.beta1,e.beta2,e.epsilon,e.decay)}}});var gc,Sw=F(()=>{"use strict";oe();Es();Nn();Ue();kn();Ff();gc=class extends Qr{static get className(){return"SGD"}constructor(t){super(),this.learningRate=t,this.setLearningRate(t)}applyGradients(t){(Array.isArray(t)?t.map(r=>r.name):Object.keys(t)).forEach((r,o)=>{let s=Array.isArray(t)?t[o].tensor:t[r];if(s==null)return;let i=R.registeredVariables[r];K(()=>{let a=ae(B(this.c,s),i);i.assign(a)})}),this.incrementIterations()}setLearningRate(t){this.learningRate=t,this.c!=null&&this.c.dispose(),this.c=yn(Ie(-t))}dispose(){this.c.dispose()}getWeights(){return ee(this,null,function*(){return[yield this.saveIterations()]})}setWeights(t){return ee(this,null,function*(){if(t=yield this.extractIterations(t),t.length!==0)throw new Error("SGD optimizer does not have settable weights.")})}getConfig(){return{learningRate:this.learningRate}}static fromConfig(t,e){return new t(e.learningRate)}}});var zf,U1=F(()=>{"use strict";oe();Es();Nn();Ue();kn();Dn();Sw();zf=class extends gc{static get className(){return"Momentum"}constructor(t,e,r=!1){super(t),this.learningRate=t,this.momentum=e,this.useNesterov=r,this.accumulations=[],this.m=Ie(this.momentum)}applyGradients(t){(Array.isArray(t)?t.map(r=>r.name):Object.keys(t)).forEach((r,o)=>{let s=R.registeredVariables[r];this.accumulations[o]==null&&(this.accumulations[o]={originalName:`${r}/momentum`,variable:K(()=>ze(s).variable(!1))});let i=this.accumulations[o].variable,a=Array.isArray(t)?t[o].tensor:t[r];a!=null&&K(()=>{let l,c=ae(B(this.m,i),a);this.useNesterov?l=ae(B(this.c,ae(a,B(c,this.m))),s):l=ae(B(this.c,c),s),i.assign(c),s.assign(l)})}),this.incrementIterations()}dispose(){this.m.dispose(),this.accumulations!=null&&Be(this.accumulations.map(t=>t.variable))}setMomentum(t){this.momentum=t}getWeights(){return ee(this,null,function*(){return[yield this.saveIterations()].concat(this.accumulations.map(t=>({name:t.originalName,tensor:t.variable})))})}setWeights(t){return ee(this,null,function*(){t=yield this.extractIterations(t);let e=!1;this.accumulations=t.map(r=>({originalName:r.name,variable:r.tensor.variable(e)}))})}getConfig(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}static fromConfig(t,e){return new t(e.learningRate,e.momentum,e.useNesterov)}}});var Vf,j1=F(()=>{"use strict";oe();Es();Nn();Zt();Ue();fa();br();on();Dn();Ff();Vf=class extends Qr{static get className(){return"RMSProp"}constructor(t,e=.9,r=0,o=null,s=!1){if(super(),this.learningRate=t,this.decay=e,this.momentum=r,this.epsilon=o,this.accumulatedMeanSquares=[],this.accumulatedMoments=[],this.accumulatedMeanGrads=[],this.centered=s,o==null&&(this.epsilon=R.backend.epsilon()),t==null)throw new Error("learningRate for RMSPropOptimizer must be defined.")}applyGradients(t){(Array.isArray(t)?t.map(r=>r.name):Object.keys(t)).forEach((r,o)=>{let s=R.registeredVariables[r],i=!1;this.accumulatedMeanSquares[o]==null&&(this.accumulatedMeanSquares[o]={originalName:`${r}/rms`,variable:K(()=>ze(s).variable(i))}),this.accumulatedMoments[o]==null&&(this.accumulatedMoments[o]={originalName:`${r}/momentum`,variable:K(()=>ze(s).variable(i))}),this.accumulatedMeanGrads[o]==null&&this.centered&&(this.accumulatedMeanGrads[o]={originalName:`${r}/mg`,variable:K(()=>ze(s).variable(i))});let a=Array.isArray(t)?t[o].tensor:t[r];if(a==null)return;let l=this.accumulatedMeanSquares[o].variable,c=this.accumulatedMoments[o].variable;K(()=>{let u=ae(B(l,this.decay),B(lt(a),1-this.decay));if(this.centered){let p=this.accumulatedMeanGrads[o].variable,f=ae(B(p,this.decay),B(a,1-this.decay)),d=xe(B(a,this.learningRate),qt(be(u,ae(lt(f),this.epsilon)))),h=ae(B(c,this.momentum),d);l.assign(u),p.assign(f),c.assign(h);let m=be(s,h);s.assign(m)}else{let p=ae(B(l,this.decay),B(lt(a),1-this.decay)),f=ae(B(c,this.momentum),xe(B(a,this.learningRate),qt(ae(p,this.epsilon))));l.assign(p),c.assign(f);let d=be(s,f);s.assign(d)}})}),this.incrementIterations()}dispose(){this.accumulatedMeanSquares!=null&&Be(this.accumulatedMeanSquares.map(t=>t.variable)),this.accumulatedMeanGrads!=null&&this.centered&&Be(this.accumulatedMeanGrads.map(t=>t.variable)),this.accumulatedMoments!=null&&Be(this.accumulatedMoments.map(t=>t.variable))}getWeights(){return ee(this,null,function*(){let t=[...this.accumulatedMeanSquares,...this.accumulatedMoments];return this.centered&&t.push(...this.accumulatedMeanGrads),[yield this.saveIterations()].concat(t.map(e=>({name:e.originalName,tensor:e.variable})))})}setWeights(t){return ee(this,null,function*(){t=yield this.extractIterations(t);let e=this.centered?t.length/3:t.length/2,r=!1;this.accumulatedMeanSquares=t.slice(0,e).map(o=>({originalName:o.name,variable:o.tensor.variable(r)})),this.accumulatedMoments=t.slice(e,e*2).map(o=>({originalName:o.name,variable:o.tensor.variable(r)})),this.centered&&(this.accumulatedMeanGrads=t.slice(e*2,e*3).map(o=>({originalName:o.name,variable:o.tensor.variable(r)})))})}getConfig(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}}static fromConfig(t,e){return new t(e.learningRate,e.decay,e.momentum,e.epsilon,e.centered)}}});function qK(){for(let n of z_e)YF(n)}var z_e,KK=F(()=>{"use strict";L1();B1();z1();V1();U1();j1();Sw();$1();z_e=[Pf,$f,Lf,Bf,zf,Vf,gc]});function XK(n){return new Promise(t=>setTimeout(t)).then(n)}function W_e(n="model"){return new ZF(n)}function YK(n){return new QF(n)}var V_e,U_e,j_e,ZF,QF,G_e,ZK=F(()=>{"use strict";qx();qr();Cf();tm();vf();V_e="model",U_e=".json",j_e=".weights.bin";ZF=(()=>{class n{constructor(e){if(!Y().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");e.startsWith(n.URL_SCHEME)&&(e=e.slice(n.URL_SCHEME.length)),(e==null||e.length===0)&&(e=V_e),this.modelJsonFileName=e+U_e,this.weightDataFileName=e+j_e}save(e){return ee(this,null,function*(){if(typeof document>"u")throw new Error("Browser downloads are not supported in this environment since `document` is not present");let r=ao.join(e.weightData),o=window.URL.createObjectURL(new Blob([r],{type:"application/octet-stream"}));if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");{let s=[{paths:["./"+this.weightDataFileName],weights:e.weightSpecs}],i=LT(e,s),a=window.URL.createObjectURL(new Blob([JSON.stringify(i)],{type:"application/json"})),l=this.modelJsonAnchor==null?document.createElement("a"):this.modelJsonAnchor;if(l.download=this.modelJsonFileName,l.href=a,yield XK(()=>l.dispatchEvent(new MouseEvent("click"))),e.weightData!=null){let c=this.weightDataAnchor==null?document.createElement("a"):this.weightDataAnchor;c.download=this.weightDataFileName,c.href=o,yield XK(()=>c.dispatchEvent(new MouseEvent("click")))}return{modelArtifactsInfo:ic(e)}}})}}return n.URL_SCHEME="downloads://",n})(),QF=class{constructor(t){if(t==null||t.length<1)throw new Error(`When calling browserFiles, at least 1 file is required, but received ${t}`);this.jsonFile=t[0],this.weightsFiles=t.slice(1)}load(){return ee(this,null,function*(){return new Promise((t,e)=>{let r=new FileReader;r.onload=o=>{let s=JSON.parse(o.target.result),i=s.modelTopology;if(i==null){e(new Error(`modelTopology field is missing from file ${this.jsonFile.name}`));return}if(s.weightsManifest==null){e(new Error(`weightManifest field is missing from file ${this.jsonFile.name}`));return}if(this.weightsFiles.length===0){t({modelTopology:i});return}let l=Xx(s,c=>this.loadWeights(c));t(l)},r.onerror=o=>e(`Failed to read model topology and weights manifest JSON from file '${this.jsonFile.name}'. BrowserFiles supports loading Keras-style tf.Model artifacts only.`),r.readAsText(this.jsonFile)})})}loadWeights(t){let e=[],r=[];for(let i of t)e.push(...i.weights),r.push(...i.paths);let o=this.checkManifestAndWeightFiles(t),s=r.map(i=>this.loadWeightsFile(i,o[i]));return Promise.all(s).then(i=>[e,i])}loadWeightsFile(t,e){return new Promise((r,o)=>{let s=new FileReader;s.onload=i=>{let a=i.target.result;r(a)},s.onerror=i=>o(`Failed to weights data from file of path '${t}'.`),s.readAsArrayBuffer(e)})}checkManifestAndWeightFiles(t){let e=[],r=this.weightsFiles.map(s=>qM(s.name)),o={};for(let s of t)s.paths.forEach(i=>{let a=qM(i);if(e.indexOf(a)!==-1)throw new Error(`Duplicate file basename found in weights manifest: '${a}'`);if(e.push(a),r.indexOf(a)===-1)throw new Error(`Weight file with basename '${a}' is not provided.`);o[i]=this.weightsFiles[r.indexOf(a)]});if(e.length!==this.weightsFiles.length)throw new Error(`Mismatch in the number of files in weights manifest (${e.length}) and the number of weight files provided (${this.weightsFiles.length}).`);return o}},G_e=n=>Y().getBool("IS_BROWSER")&&!Array.isArray(n)&&n.startsWith(ZF.URL_SCHEME)?W_e(n.slice(ZF.URL_SCHEME.length)):null;Fr.registerSaveRouter(G_e)});function JF(n,t,e,r){i(n),e=e??0,r=r??1,a(e,r);let o=0,s=l=>(l.then(c=>{let u=e+ ++o/n.length*(r-e);return t(u),c}),l);function i(l){O(l!=null&&Array.isArray(l)&&l.length>0,()=>"promises must be a none empty array")}function a(l,c){O(l>=0&&l<=1,()=>`Progress fraction must be in range [0, 1], but got startFraction ${l}`),O(c>=0&&c<=1,()=>`Progress fraction must be in range [0, 1], but got endFraction ${c}`),O(c>=l,()=>`startFraction must be no more than endFraction, but got startFraction ${l} and endFraction ${c}`)}return Promise.all(n.map(s))}var QK=F(()=>{"use strict";ce();});function eP(n,t){return ee(this,null,function*(){t==null&&(t={});let e=t.fetchFunc==null?Y().platform.fetch:t.fetchFunc,r=n.map(p=>e(p,t.requestInit,{isBinary:!0})),a=(t.onProgress==null?yield Promise.all(r):yield JF(r,t.onProgress,0,.5)).map(p=>p.arrayBuffer());return t.onProgress==null?yield Promise.all(a):yield JF(a,t.onProgress,.5,1)})}function JK(n,t){var e;let r=t.fetchFunc==null?Y().platform.fetch:t.fetchFunc,o=0,s;return(e=t.onProgress)===null||e===void 0||e.call(t,0),new ReadableStream({pull:i=>ee(this,null,function*(){for(var a;o<n.length;){s||(s=(yield r(n[o],t.requestInit,{isBinary:!0})).body.getReader());let{done:l,value:c}=yield s.read();if(l){o++,s=void 0,(a=t.onProgress)===null||a===void 0||a.call(t,o/n.length);continue}i.enqueue(c);return}i.close()})})}function e7(n,t="",e,r){return ee(this,null,function*(){return tP(i=>eP(i,{requestInit:r}))(n,t,e)})}function tP(n){return(t,e="",r)=>ee(this,null,function*(){let o=t.map(()=>!1),s={},i=r!=null?r.map(()=>!1):[],a=[];if(t.forEach((d,h)=>{let m=0;d.weights.forEach(g=>{let x="quantization"in g?g.quantization.dtype:g.dtype,b=Vu[x]*yt(g.shape),w=()=>{o[h]=!0,s[h]==null&&(s[h]=[]),s[h].push({manifestEntry:g,groupOffset:m,sizeBytes:b})};r!=null?r.forEach((v,S)=>{v===g.name&&(w(),i[S]=!0)}):w(),a.push(g.name),m+=b})}),!i.every(d=>d)){let d=r.filter((h,m)=>!i[m]);throw new Error(`Could not find weights in manifest with names: ${d.join(", ")}. 
Manifest JSON has weights with names: ${a.join(", ")}.`)}let l=o.reduce((d,h,m)=>(h&&d.push(m),d),[]),c=[];l.forEach(d=>{t[d].paths.forEach(h=>{let m=e+(e.endsWith("/")?"":"/")+h;c.push(m)})});let u=yield n(c),p={},f=0;return l.forEach(d=>{let h=t[d].paths.length,m=new ao(u.slice(f,f+h));s[d].forEach(x=>{let b=m.slice(x.groupOffset,x.groupOffset+x.sizeBytes),w=PT(b,[x.manifestEntry]);for(let v in w)p[v]=w[v]}),f+=h}),p})}var nP=F(()=>{"use strict";qr();ce();vf();Cf();QK();jM();});function K_e(n){let t=n.lastIndexOf("/"),e=n.lastIndexOf("?"),r=n.substring(0,t),o=e>t?n.substring(e):"";return[r+"/",o]}function G1(n){return n.match(t7.URL_SCHEME_REGEX)!=null}function W1(n,t){return new t7(n,t)}function r7(n,t){return W1(n,t)}var H_e,q_e,t7,n7,o7=F(()=>{"use strict";qr();ce();Cf();vf();tm();nP();H_e="application/octet-stream",q_e="application/json",t7=(()=>{class n{constructor(e,r){if(this.DEFAULT_METHOD="POST",r==null&&(r={}),this.weightPathPrefix=r.weightPathPrefix,this.weightUrlConverter=r.weightUrlConverter,r.fetchFunc!=null?(O(typeof r.fetchFunc=="function",()=>"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"),this.fetch=r.fetchFunc):this.fetch=Y().platform.fetch,O(e!=null&&e.length>0,()=>"URL path for http must not be null, undefined or empty."),Array.isArray(e)&&O(e.length===2,()=>`URL paths for http must have a length of 2, (actual length is ${e.length}).`),this.path=e,r.requestInit!=null&&r.requestInit.body!=null)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=r.requestInit||{},this.loadOptions=r}save(e){return ee(this,null,function*(){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");let r=Object.assign({method:this.DEFAULT_METHOD},this.requestInit);r.body=new FormData;let o=[{paths:["./model.weights.bin"],weights:e.weightSpecs}],s=LT(e,o);if(r.body.append("model.json",new Blob([JSON.stringify(s)],{type:q_e}),"model.json"),e.weightData!=null){let a=ao.join(e.weightData);r.body.append("model.weights.bin",new Blob([a],{type:H_e}),"model.weights.bin")}let i=yield this.fetch(this.path,r);if(i.ok)return{modelArtifactsInfo:ic(e),responses:[i]};throw new Error(`BrowserHTTPRequest.save() failed due to HTTP response status ${i.status}.`)})}loadModelJSON(){return ee(this,null,function*(){let e=yield this.fetch(this.path,this.requestInit);if(!e.ok)throw new Error(`Request to ${this.path} failed with status code ${e.status}. Please verify this URL points to the model JSON of the model to load.`);let r;try{r=yield e.json()}catch{let a=`Failed to parse model JSON of response from ${this.path}.`;throw this.path.endsWith(".pb")?a+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":a+=" Please make sure the server is serving valid JSON for this request.",new Error(a)}let o=r.modelTopology,s=r.weightsManifest;if(o==null&&s==null)throw new Error(`The JSON from HTTP path ${this.path} contains neither model topology or manifest for weights.`);return r})}load(){return ee(this,null,function*(){if(this.loadOptions.streamWeights)return this.loadStream();let e=yield this.loadModelJSON();return Xx(e,r=>this.loadWeights(r))})}loadStream(){return ee(this,null,function*(){let e=yield this.loadModelJSON(),r=yield this.getWeightUrls(e.weightsManifest),o=s0(e.weightsManifest),s=()=>JK(r,this.loadOptions);return Object.assign(Object.assign({},e),{weightSpecs:o,getWeightStream:s})})}getWeightUrls(e){return ee(this,null,function*(){let r=Array.isArray(this.path)?this.path[1]:this.path,[o,s]=K_e(r),i=this.weightPathPrefix||o,a=[],l=[];for(let c of e)for(let u of c.paths)this.weightUrlConverter!=null?l.push(this.weightUrlConverter(u)):a.push(i+u+s);return this.weightUrlConverter&&a.push(...yield Promise.all(l)),a})}loadWeights(e){return ee(this,null,function*(){let r=yield this.getWeightUrls(e),o=s0(e),s=yield eP(r,this.loadOptions);return[o,s]})}}return n.URL_SCHEME_REGEX=/^https?:\/\//,n})();n7=(n,t)=>{if(typeof fetch>"u"&&(t==null||t.fetchFunc==null))return null;{let e=!0;if(Array.isArray(n)?e=n.every(r=>G1(r)):e=G1(n),e)return W1(n,t)}return null};Fr.registerSaveRouter(n7);Fr.registerLoadRouter(n7)});function s7(n,t,e,r){let o=arguments;return new rP(oP(...o))}function oP(n,t,e,r){return arguments.length===1?n.modelTopology!=null||n.weightSpecs!=null?new Tw(n):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new Tw({modelTopology:n})):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new Tw({modelTopology:n,weightSpecs:t,weightData:e,trainingConfig:r}))}function i7(n){return new H1(n)}function a7(n){return new H1(n)}var Tw,H1,rP,l7=F(()=>{"use strict";Tw=class{constructor(t){this.modelArtifacts=t}load(){return this.modelArtifacts}},H1=class{constructor(t){this.saveHandler=t}save(t){return this.saveHandler(t)}},rP=class{constructor(t){t.load&&(this.load=()=>Promise.resolve(t.load())),t.save&&(this.save=e=>Promise.resolve(t.save(e)))}}});var Lo={};_t(Lo,{CompositeArrayBuffer:()=>ao,browserFiles:()=>YK,browserHTTPRequest:()=>r7,concatenateArrayBuffers:()=>F5,copyModel:()=>X5,decodeWeights:()=>PT,decodeWeightsStream:()=>$T,encodeWeights:()=>A5,fromMemory:()=>s7,fromMemorySync:()=>oP,getLoadHandlers:()=>B5,getModelArtifactsForJSON:()=>Xx,getModelArtifactsForJSONSync:()=>KM,getModelArtifactsInfoForJSON:()=>ic,getSaveHandlers:()=>L5,getWeightSpecs:()=>s0,http:()=>W1,isHTTPScheme:()=>G1,listModels:()=>q5,loadWeights:()=>e7,moveModel:()=>Y5,registerLoadRouter:()=>$5,registerSaveRouter:()=>P5,removeModel:()=>K5,weightsLoaderFactory:()=>tP,withSaveHandler:()=>i7,withSaveHandlerSync:()=>a7});var c7=F(()=>{"use strict";QM();JM();ZK();o7();Cf();l7();tm();nP();vf();eO();});function X_e(n,t,e){let r=T(n,"labels","confusionMatrix"),o=T(t,"predictions","confusionMatrix");O(e==null||e>0&&Number.isInteger(e),()=>`If provided, numClasses must be a positive integer, but got ${e}`),O(r.rank===1,()=>`Expected the rank of labels to be 1, but got ${r.rank}`),O(o.rank===1,()=>`Expected the rank of predictions to be 1, but got ${o.rank}`),O(r.shape[0]===o.shape[0],()=>`Mismatch in the number of examples: ${r.shape[0]} vs. ${o.shape[0]}. Labels and predictions should have the same number of elements.`),O(e>0&&Number.isInteger(e),()=>`numClasses is required to be a positive integer, but got ${e}`);let s=ma(fe(r,"int32"),e),i=ma(fe(o,"int32"),e),a=it(s),l=st(a,i);return fe(l,"int32")}var u7,p7=F(()=>{"use strict";J();ce();vt();ia();a1();Z();ip();u7=_({confusionMatrix_:X_e})});var sP={};_t(sP,{confusionMatrix:()=>u7});var f7=F(()=>{"use strict";p7();});var ba={};_t(ba,{draw:()=>rAe,fromPixels:()=>oAe,fromPixelsAsync:()=>eAe,toPixels:()=>nAe});function h7(n,t=3){if(t>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(n==null)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");let e=!1,r=!1,o=!1,s=!1,i=!1,a=!1;if(n.data instanceof Uint8Array)e=!0;else if(typeof ImageData<"u"&&n instanceof ImageData)r=!0;else if(typeof HTMLVideoElement<"u"&&n instanceof HTMLVideoElement)o=!0;else if(typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement)s=!0;else if(n.getContext!=null)i=!0;else if(typeof ImageBitmap<"u"&&n instanceof ImageBitmap)a=!0;else throw new Error(`pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, but was ${n.constructor.name}`);if(Xh(Lx,R.backendName)!=null){let h={pixels:n},m={numChannels:t};return R.runKernel(Lx,h,m)}let[c,u]=o?[n.videoWidth,n.videoHeight]:[n.width,n.height],p;if(i)p=n.getContext("2d").getImageData(0,0,c,u).data;else if(r||e)p=n.data;else if(s||o||a){if(Um==null)if(typeof document>"u")if(typeof OffscreenCanvas<"u"&&typeof OffscreenCanvasRenderingContext2D<"u")Um=new OffscreenCanvas(1,1).getContext("2d");else throw new Error("Cannot parse input in current context. Reason: OffscreenCanvas Context2D rendering is not supported.");else Um=document.createElement("canvas").getContext("2d",{willReadFrequently:!0});Um.canvas.width=c,Um.canvas.height=u,Um.drawImage(n,0,0,c,u),p=Um.getImageData(0,0,c,u).data}let f;if(t===4)f=new Int32Array(p);else{let h=c*u;f=new Int32Array(h*t);for(let m=0;m<h;m++)for(let g=0;g<t;++g)f[m*t+g]=p[m*4+g]}return hw(f,[u,c,t],"int32")}function Y_e(n){return n!=null&&n.data instanceof Uint8Array}function Z_e(){return typeof window<"u"&&typeof ImageBitmap<"u"&&window.hasOwnProperty("createImageBitmap")}function Q_e(n){return n!=null&&n.width!==0&&n.height!==0}function J_e(n){return Z_e()&&!(n instanceof ImageBitmap)&&Q_e(n)&&!Y_e(n)}function eAe(n,t=3){return ee(this,null,function*(){let e=null;if(Y().getBool("WRAP_TO_IMAGEBITMAP")&&J_e(n)){let r;try{r=yield createImageBitmap(n,{premultiplyAlpha:"none"})}catch{r=null}r!=null&&r.width===n.width&&r.height===n.height?e=r:e=n}else e=n;return h7(e,t)})}function m7(n){if(n.rank!==2&&n.rank!==3)throw new Error(`toPixels only supports rank 2 or 3 tensors, got rank ${n.rank}.`);let t=n.rank===2?1:n.shape[2];if(t>4||t===2)throw new Error(`toPixels only supports depth of size 1, 3 or 4 but got ${t}`);if(n.dtype!=="float32"&&n.dtype!=="int32")throw new Error(`Unsupported type for toPixels: ${n.dtype}. Please use float32 or int32 tensors.`)}function tAe(n){let t=n?.alpha||1;if(t>1||t<0)throw new Error(`Alpha value ${t} is suppoed to be in range [0 - 1].`)}function nAe(n,t){return ee(this,null,function*(){let e=T(n,"img","toPixels");if(!(n instanceof tt)){let c=e;e=fe(c,"int32"),c.dispose()}m7(e);let[r,o]=e.shape.slice(0,2),s=e.rank===2?1:e.shape[2],i=yield e.data(),a=e.dtype==="float32"?255:1,l=new Uint8ClampedArray(o*r*4);for(let c=0;c<r*o;++c){let u=[0,0,0,255];for(let f=0;f<s;f++){let d=i[c*s+f];if(e.dtype==="float32"){if(d<0||d>1)throw new Error(`Tensor values for a float32 Tensor must be in the range [0 - 1] but encountered ${d}.`)}else if(e.dtype==="int32"&&(d<0||d>255))throw new Error(`Tensor values for a int32 Tensor must be in the range [0 - 255] but encountered ${d}.`);s===1?(u[0]=d*a,u[1]=d*a,u[2]=d*a):u[f]=d*a}let p=c*4;l[p+0]=Math.round(u[0]),l[p+1]=Math.round(u[1]),l[p+2]=Math.round(u[2]),l[p+3]=Math.round(u[3])}if(t!=null){d7||Xh($x,R.backendName)!=null&&(console.warn("tf.browser.toPixels is not efficient to draw tensor on canvas. Please try tf.browser.draw instead."),d7=!0),t.width=o,t.height=r;let c=t.getContext("2d"),u=new ImageData(l,o,r);c.putImageData(u,0,0)}return e!==n&&e.dispose(),l})}function rAe(n,t,e){let r=T(n,"img","draw");if(!(n instanceof tt)){let i=r;r=fe(i,"int32"),i.dispose()}m7(r),tAe(e?.imageOptions);let o={image:r},s={canvas:t,options:e};R.runKernel($x,o,s)}var Um,d7,oAe,g7=F(()=>{"use strict";oe();qr();G();Yv();ue();J();vt();Z();AF();d7=!1;oAe=_({fromPixels_:h7})});var iP={};_t(iP,{prepareAndValidate:()=>x7});function x7(n,t){let e=n.shape.length,r=t.shape.length;if(e<1)throw new Error(`tf.gatherND() expects the input to be rank 1 or higher, but the rank was ${e}.`);if(r<1)throw new Error(`tf.gatherND() expects the indices to be rank 1 or higher, but the rank was ${r}.`);if(t.dtype!=="int32")throw new Error(`tf.gatherND() expects the indices to be int32 type, but the dtype was ${t.dtype}.`);if(t.shape[r-1]>e)throw new Error(`index innermost dimension length must be <= tensor rank; saw: ${t.shape[r-1]} vs. ${e}`);if(yt(n.shape)===0)throw new Error(`Requested more than 0 entries, but input is empty. Input shape: ${n.shape}.`);let o=t.shape,s=o[o.length-1],i=1;for(let p=0;p<o.length-1;++p)i*=o[p];let a=n.shape,l=o.slice();l.pop();let c=1;for(let p=s;p<e;++p)c*=a[p],l.push(a[p]);let u=[...pl(n.shape).map(p=>p/c),1].slice(0,s);return[l,i,c,u]}var aP=F(()=>{"use strict";ce()});var _r={};_t(_r,{assertParamsValid:()=>iAe,computeFlatOffset:()=>pAe,computeOutShape:()=>lAe,getNormalizedAxes:()=>cAe,isSliceContinous:()=>uAe,maskToAxes:()=>aAe,parseSliceParams:()=>cP,sliceInfo:()=>fAe,startForAxis:()=>T7,startIndicesWithElidedDims:()=>C7,stopForAxis:()=>E7,stopIndicesWithElidedDims:()=>I7,stridesForAxis:()=>S7,stridesWithElidedDims:()=>b7});function iAe(n,t,e){let r=n.shape.length;O(r===t.length,()=>`Error in slice${r}D: Length of begin ${t} must match the rank of the array (${r}).`),O(r===e.length,()=>`Error in slice${r}D: Length of size ${e} must match the rank of the array (${r}).`);for(let o=0;o<r;++o)O(t[o]+e[o]<=n.shape[o],()=>`Error in slice${r}D: begin[${o}] + size[${o}] (${t[o]+e[o]}) would overflow input.shape[${o}] (${n.shape[o]})`)}function aAe(n){let t=[],e=0;for(;n>0;)n&1&&t.push(e),n/=2,e++;return t}function lAe(n,t,e){let r=[];for(let o=0;o<n.length;o++)r[o]=Math.ceil((t[o]-n[o])/e[o]);return r}function b7(n,t,e,r){let o=[...n];for(let s=o.length;s<r.length;s++)o.push(1);for(let s=0;s<e;s++)s===0?o[t]=1:(o.splice(t,0,1),o.pop());return o}function v7(n,t,e){return e<=n?e:e-(t-1)}function w7(n,t){let e=[];for(let r=0;r<n;r++)e.push(t+r);return e}function cAe(n,t,e,r,o,s,i,a,l){let c=n.length,u=new Array(c),p=new Array(c),f=new Array(c);if(t.length&&e>0){let d=t[0],h=e+1;u=C7(i,d,h,r,n),p=I7(a,d,h,o,n),f=b7(s,d,h,n)}else for(let d=0;d<c;d++)u[d]=T7(i,r,s,n,d,l),p[d]=E7(a,o,s,n,d,l),f[d]=S7(s,d,l);return{begin:u,end:p,strides:f}}function C7(n,t,e,r,o){let s=[...o],i=w7(e,t);for(let a=0;a<s.length;a++)if(i.indexOf(a)>-1)s[a]=0;else{let l=v7(t,e,a),c=r[l];n&1<<l&&(c=0),s[a]=c}return s}function I7(n,t,e,r,o){let s=[...o],i=w7(e,t);for(let a=0;a<s.length;a++)if(i.indexOf(a)>-1)s[a]=Number.MAX_SAFE_INTEGER;else{let l=v7(t,e,a),c=r[l];n&1<<l&&(c=Number.MAX_SAFE_INTEGER),s[a]=c}for(let a=0;a<s.length;a++){let l=o[a];s[a]<0&&(s[a]+=l),s[a]=_x(0,s[a],o[a])}return s}function S7(n,t,e){let r=n[t];return(e&1<<t||r==null)&&(r=1),r}function T7(n,t,e,r,o,s){let i=t[o],a=e[o]||1;(n&1<<o||s&1<<o||i==null)&&(a>0?i=Number.MIN_SAFE_INTEGER:i=Number.MAX_SAFE_INTEGER);let l=r[o];return i<0&&(i+=l),i=_x(0,i,l-1),i}function E7(n,t,e,r,o,s){let i=t[o],a=e[o]||1;(n&1<<o||s&1<<o||i==null)&&(a>0?i=Number.MAX_SAFE_INTEGER:i=Number.MIN_SAFE_INTEGER);let l=r[o];return i<0&&(i+=l),a>0?i=_x(0,i,l):i=_x(-1,i,l-1),i}function uAe(n,t,e){let r=e.length;for(let o=0;o<e.length;o++)if(e[o]>1){r=o;break}for(let o=r+1;o<e.length;o++)if(t[o]>0||e[o]!==n[o])return!1;return!0}function pAe(n,t){let e=n.length>0?n[n.length-1]:1;for(let r=0;r<n.length-1;r++)e+=n[r]*t[r];return e}function cP(n,t,e){let r,o=n.shape.length;typeof t=="number"?r=[t,...new Array(o-1).fill(0)]:t.length<o?r=t.concat(new Array(o-t.length).fill(0)):r=t.slice(),r.forEach(i=>{O(i!==-1,()=>"slice() does not support negative begin indexing.")});let s;return e==null?s=new Array(o).fill(-1):typeof e=="number"?s=[e,...new Array(o-1).fill(-1)]:e.length<o?s=e.concat(new Array(o-e.length).fill(-1)):s=e,s=s.map((i,a)=>i>=0?i:(O(i===-1,()=>`Negative size values should be exactly -1 but got ${i} for the slice() size at index ${a}.`),n.shape[a]-r[a])),[r,s]}function fAe(n,t,e,r,o,s,i,a,l){let c;if(r==null?(c=new Array(t.length),c.fill(1)):c=r,i!=null&&i&i-1)throw new Error("Multiple ellipses in slice is not allowed.");let u=!1,p={dims:c.length,numAddAxisAfterEllipsis:0,begin:t.slice(),end:e.slice(),strides:c.slice(),beginMask:o,endMask:s,ellipsisMask:i,newAxisMask:a,shrinkAxisMask:l};for(let w=0;w<p.dims;w++)u&&1<<w&a&&p.numAddAxisAfterEllipsis++,1<<w&i&&(u=!0);u||(p.ellipsisMask|=1<<p.dims,p.dims++);let f={dims:n.length,beginMask:0,endMask:0,beginValid:!1,endValid:!1};dAe(p,f);let d=!0,h=!0,m=!0,g=[],x=[];for(let w=0;w<n.length;++w){if(f.strides[w]===0)throw Error(`strides[${w}] must be non-zero`);let v=!!(f.shrinkAxisMask&1<<w),S=n[w];if(S===-1){g.push(v?1:-1);continue}let k=[f.beginMask&1<<w,f.endMask&1<<w],A=[f.strides[w]>0?0:-1,f.strides[w]>0?S:S-1];if(v&&f.strides[w]<=0)throw Error("only stride 1 allowed on non-range indexing.");m=m&&f.strides[w]===1;let $=!!(f.beginMask&1<<w&&f.endMask&1<<w);if(f.beginValid&&f.endValid){if(v){let Q=f.begin[w]<0?S+f.begin[w]:f.begin[w];if(f.begin[w]=Q,f.end[w]=f.begin[w]+1,Q<0||Q>=S)throw Error(`slice index ${f.begin[w]} of dimension ${w} out of bounds.`)}else f.begin[w]=y7(f.begin[w],0,f.strides[w],S,k,A),f.end[w]=y7(f.end[w],1,f.strides[w],S,k,A);let W=f.strides[w]===1&&f.begin[w]===0&&f.end[w]===S;d=d&&W,h=h&&(w===0&&f.strides[w]===1||W)}else d=d&&f.strides[w]===1&&$,h=h&&(w===0&&f.strides[w]===1||$);let L,z=!1;if(f.beginValid&&f.endValid?(L=f.end[w]-f.begin[w],z=!0):v?(L=1,z=!0):$&&S>=0&&(f.strides[w]<0?L=-S:L=S,z=!0),z){let W;L===0||L<0!=f.strides[w]<0?W=0:W=Math.trunc(L/f.strides[w])+(L%f.strides[w]!==0?1:0),g.push(W)}else g.push(-1)}for(let w=0;w<f.finalShapeGatherIndices.length;++w){let v=f.finalShapeGatherIndices[w];v>=0?x.push(g[v]):v===lP&&x.push(1)}return{finalShapeSparse:x.filter((w,v)=>f.finalShapeGatherIndices[v]!==lP),finalShape:x,isIdentity:d,sliceDim0:h,isSimpleSlice:m,begin:f.begin,end:f.end,strides:f.strides}}function dAe(n,t){t.beginMask=0,t.endMask=0,t.shrinkAxisMask=0;let e=0;t.beginValid=n.begin!=null,t.endValid=n.end!=null,t.begin=new Array(t.dims),t.end=new Array(t.dims),t.strides=new Array(t.dims),t.finalShapeGatherIndices=[],t.finalShapeGatherIndicesSparse=[],t.inputShapeGatherIndicesSparse=new Array(t.dims);for(let r=0;r<n.dims;r++)if(1<<r&n.ellipsisMask){let o=Math.min(t.dims-(n.dims-r)+1+n.numAddAxisAfterEllipsis,t.dims);for(;e<o;e++)t.begin[e]=0,t.end[e]=0,t.strides[e]=1,t.beginMask|=1<<e,t.endMask|=1<<e,t.finalShapeGatherIndices.push(e),t.finalShapeGatherIndicesSparse.push(-1),t.inputShapeGatherIndicesSparse[e]=r}else if(1<<r&n.newAxisMask)t.finalShapeGatherIndices.push(lP),t.finalShapeGatherIndicesSparse.push(-1);else{if(e===t.begin.length)throw Error(`Index out of range using input dim ${e}; input has only ${t.dims} dims, ${t.begin.length}.`);n.begin!=null&&(t.begin[e]=n.begin[r]),n.end!=null&&(t.end[e]=n.end[r]),t.strides[e]=n.strides[r],n.beginMask&1<<r&&(t.beginMask|=1<<e),n.endMask&1<<r&&(t.endMask|=1<<e),n.shrinkAxisMask&1<<r?(t.finalShapeGatherIndices.push(sAe),t.finalShapeGatherIndicesSparse.push(-1),t.shrinkAxisMask|=1<<e):(t.finalShapeGatherIndices.push(e),t.finalShapeGatherIndicesSparse.push(r)),t.inputShapeGatherIndicesSparse[e]=r,e++}}function y7(n,t,e,r,o,s){if(o[t])return e>0?s[t]:s[t+1&1];{let i=n<0?r+n:n;return i<s[0]?s[0]:i>s[1]?s[1]:i}}var lP,sAe,q1=F(()=>{"use strict";ce();lP=-2,sAe=-1});var uP,N7=F(()=>{"use strict";uP="4.21.0"});var vy,pP=F(()=>{"use strict";L1();B1();z1();V1();U1();j1();Sw();vy=class{static sgd(t){return new gc(t)}static momentum(t,e,r=!1){return new zf(t,e,r)}static rmsprop(t,e=.9,r=0,o=null,s=!1){return new Vf(t,e,r,o,s)}static adam(t=.001,e=.9,r=.999,o=null){return new Lf(t,e,r,o)}static adadelta(t=.001,e=.95,r=null){return new Pf(t,e,r)}static adamax(t=.002,e=.9,r=.999,o=null,s=0){return new Bf(t,e,r,o,s)}static adagrad(t,e=.1){return new $f(t,e)}}});var Uf,D7=F(()=>{"use strict";pP();Uf=vy});function wy(){return new Promise(n=>hAe(()=>n()))}var hAe,k7=F(()=>{"use strict";hAe=typeof requestAnimationFrame<"u"?requestAnimationFrame:typeof setImmediate<"u"?setImmediate:n=>n()});function mAe(n,t){let e=n[0].length;n.forEach((o,s)=>{O(o.length===e,()=>`Error in concat${e}D: rank of tensors[${s}] must be the same as the rank of the rest (${e})`)}),O(t>=0&&t<e,()=>`Error in concat${e}D: axis must be between 0 and ${e-1}.`);let r=n[0];n.forEach((o,s)=>{for(let i=0;i<e;i++)O(i===t||o[i]===r[i],()=>`Error in concat${e}D: Shape of tensors[${s}] (${o}) does not match the shape of the rest (${r}) along the non-concatenated axis ${s}.`)})}function gAe(n,t){let e=n[0].slice();for(let r=1;r<n.length;r++)e[t]+=n[r][t];return e}var _7=F(()=>{"use strict";ce();});var A7=F(()=>{"use strict";});function xAe(n,t,e){let r=new Array;if(e==null&&t==null)return r;if(t==null)for(;r.length<n+e.length;)r.push(-1);else r=t.slice();if(e==null)return r;if(n+e.length!==r.length)throw new Error(`rt input.shape and shape=${t} are incompatible: rt input.rank = ${n+e.length}, but shape.rank = ${r.length}`);for(let o=1;o<e.length;++o){let s=e[o],i=r[r.length-e.length+o],a=r[i];if(s>=0)if(a>=0){if(a!==s)throw new Error(`rt input.shape and shape=${t} are incompatible: rt input.shape[${o+n}] = ${s} but shape[${o+n}] = ${a}`)}else r[i]=s}return r}function yAe(n){let t={FIRST_DIM_SIZE:lp.FIRST_DIM_SIZE,VALUE_ROWIDS:lp.VALUE_ROWIDS,ROW_LENGTHS:lp.ROW_LENGTHS,ROW_SPLITS:lp.ROW_SPLITS,ROW_LIMITS:lp.ROW_LIMITS,ROW_STARTS:lp.ROW_STARTS},e=[];for(let r of n)if(r in t)e.push(t[r]);else break;return e}function bAe(n){return n.length===0?0:n[0]===lp.FIRST_DIM_SIZE?n.length-1:n.length}function vAe(n,t){if(n==null||t==null)return;let e=n.length,r=t.length;if(e>=r)throw new Error(`defaultValue.shape=${n} and ragged tensor flatValues.shape=${t}, are incompatible: defaultValue.rank = ${e} must be less than ragged tensor input flatValues.rank = ${r})`);for(let o=0;o<Math.min(e,r-1);++o){let s=n[o],i=t[o+1];if(s>=0&&i>=0&&s!==1&&s!==i)throw new Error(`defaultValue.shape=${n}, and ragged tensor input flatValues.shape=${t} are incompatible: defaultValue.shape[${o-n.length}] = ${s} but ragged tensor input.flatValues.shape[${o-n.length}] = ${i}`)}}var lp,R7=F(()=>{"use strict";lp=function(n){return n[n.FIRST_DIM_SIZE=0]="FIRST_DIM_SIZE",n[n.VALUE_ROWIDS=1]="VALUE_ROWIDS",n[n.ROW_LENGTHS=2]="ROW_LENGTHS",n[n.ROW_SPLITS=3]="ROW_SPLITS",n[n.ROW_LIMITS=4]="ROW_LIMITS",n[n.ROW_STARTS=5]="ROW_STARTS",n}(lp||{})});function wAe(n){return n<=K1?n:Rx(n,Math.floor(Math.sqrt(n)))}var K1,fP=F(()=>{"use strict";ce();K1=30});function CAe(n,t,e){let r=e*(typeof n=="number"?n:n[0]),o=t*(typeof n=="number"?n:n[1]);return[r,o]}var M7=F(()=>{"use strict";});function IAe(n,t,e,r=!0){let o=[];if(r)o=o.concat(t.slice(0)),o.push(n[0]/e),o=o.concat(n.slice(1));else{o=o.concat(n[0]);let s=t.length;for(let i=0;i<s;++i)o=o.concat([n[i+1]/t[i],t[i]]);o=o.concat(n.slice(s+1))}return o}function SAe(n,t,e=!0){let r=[];if(e){r.push(t);for(let o=t+1;o<n;++o)o<=2*t?(r.push(o),r.push(o-(t+1))):r.push(o)}else{let o=[],s=[];for(let i=1;i<n;++i)i>=t*2+1||i%2===1?s.push(i):o.push(i);r.push(...o),r.push(0),r.push(...s)}return r}function TAe(n,t,e,r=!0){let o=[];r?o.push(n[0]/e):o.push(n[0]*e);for(let s=1;s<n.length;++s)s<=t.length?r?o.push(t[s-1]*n[s]):o.push(n[s]/t[s-1]):o.push(n[s]);return o}function EAe(n,t){let e=[0];for(let r=0;r<t;++r)e.push(n[r][0]);return e}function NAe(n,t,e){let r=n.slice(0,1);for(let o=0;o<e;++o)r.push(n[o+1]-t[o][0]-t[o][1]);return r}var O7=F(()=>{"use strict";});var dP,hP,mP=F(()=>{"use strict";dP=1.7580993408473768,hP=1.0507009873554805});var DAe,kAe,_Ae,AAe,RAe,MAe,F7=F(()=>{"use strict";DAe=.3275911,kAe=.254829592,_Ae=-.284496736,AAe=1.421413741,RAe=-1.453152027,MAe=1.061405429});function OAe(n,t){if(n.length!==t.length)throw new Error(`Cannot merge real and imag arrays of different lengths. real:${n.length}, imag: ${t.length}.`);let e=new Float32Array(n.length*2);for(let r=0;r<e.length;r+=2)e[r]=n[r/2],e[r+1]=t[r/2];return e}function FAe(n){let t=new Float32Array(n.length/2),e=new Float32Array(n.length/2);for(let r=0;r<n.length;r+=2)t[r/2]=n[r],e[r/2]=n[r+1];return{real:t,imag:e}}function PAe(n){let t=Math.ceil(n.length/4),e=new Float32Array(t),r=new Float32Array(t);for(let o=0;o<n.length;o+=4)e[Math.floor(o/4)]=n[o],r[Math.floor(o/4)]=n[o+1];return{real:e,imag:r}}function $Ae(n){let t=Math.floor(n.length/4),e=new Float32Array(t),r=new Float32Array(t);for(let o=2;o<n.length;o+=4)e[Math.floor(o/4)]=n[o],r[Math.floor(o/4)]=n[o+1];return{real:e,imag:r}}function LAe(n,t){let e=n[t*2],r=n[t*2+1];return{real:e,imag:r}}function BAe(n,t,e,r){n[r*2]=t,n[r*2+1]=e}function zAe(n,t){let e=new Float32Array(n/2),r=new Float32Array(n/2);for(let o=0;o<Math.ceil(n/2);o++){let s=(t?2:-2)*Math.PI*(o/n);e[o]=Math.cos(s),r[o]=Math.sin(s)}return{real:e,imag:r}}function VAe(n,t,e){let r=(e?2:-2)*Math.PI*(n/t),o=Math.cos(r),s=Math.sin(r);return{real:o,imag:s}}var P7=F(()=>{"use strict";});function jAe(n,t){n=n.replace(/\s/g,"");let e=(n.length-n.replace(UAe,"").length)/gP.length;if(e<1)throw new Error("Equations without an arrow are not supported.");if(e>1)throw new Error(`Equation must contain exactly one arrow ("${gP}").`);let[r,o]=n.split(gP);O(r.indexOf(L7)===-1,()=>`The ellipsis notation ("${L7}") is not supported yet.`);let s=r.split($7),i=s.length;if(t!==i)throw new Error(`Expected ${i} input tensors, received ${t}`);if(i>2)throw new Error("Support for more than 2 input tensors is not implemented yet.");let a=[];for(let f=0;f<o.length;++f){let d=o[f];if(!s.some(h=>h.indexOf(d)!==-1))throw new Error(`Output subscripts contain the label ${d} not present in the input subscripts.`);a.indexOf(d)===-1&&a.push(d)}for(let f=0;f<r.length;++f){let d=r[f];a.indexOf(d)===-1&&d!==$7&&a.push(d)}let l=new Array(s.length);for(let f=0;f<i;++f){if(new Set(s[f].split("")).size!==s[f].length)throw new Error(`Found duplicate axes in input component ${s[f]}. Support for duplicate axes in input is not implemented yet.`);l[f]=[];for(let d=0;d<s[f].length;++d)l[f].push(a.indexOf(s[f][d]))}let c=a.length,u=o.length,p=[];for(let f=u;f<c;++f)p.push(f);return{allDims:a,summedDims:p,idDims:l}}function GAe(n,t){let e=new Array(n);e.fill(-1);for(let o=0;o<t.length;++o)e[t[o]]=o;let r=[];for(let o=0;o<n;++o)e[o]===-1&&r.push(o);return e=e.filter(o=>o!==-1),{permutationIndices:e,expandDims:r}}function WAe(n,t,e){let r=new Array(n);for(let o=0;o<e.length;++o){let s=e[o].shape;for(let i=0;i<t[o].length;++i)r[t[o][i]]===void 0?r[t[o][i]]=s[i]:O(r[t[o][i]]===s[i],()=>`Expected dimension ${r[t[o][i]]} at axis ${i} of input shaped ${JSON.stringify(s)}, but got dimension ${s[i]}`)}}function HAe(n,t){let e=n,r=[],o=0;n.length===0&&e.push(-1),o=n.length+1;for(let i=0;i<o;++i)r.push([]);let s=[];for(let i=0;i<e.length;++i){let a=e[i],l=KAe(t,a);for(let c of l)s.indexOf(c)===-1&&(r[i].push(c),s.push(c))}return{path:e,steps:r}}function qAe(n){return n.every((t,e)=>t===e)}function KAe(n,t){let e=[];for(let r=0;r<n.length;++r)(n[r].length===0||n[r].indexOf(t)!==-1||t===-1)&&e.push(r);return e}var gP,UAe,$7,L7,B7=F(()=>{"use strict";Or();gP="->",UAe=/->/g,$7=",",L7="..."});function XAe(n,t,e=0){let r=[];if(typeof t=="number")O(n.shape[e]%t===0,()=>"Number of splits must evenly divide the axis."),r=new Array(t).fill(n.shape[e]/t);else{let o=t.reduce((i,a)=>(a===-1&&(i+=1),i),0);O(o<=1,()=>"There should be only one negative value in split array.");let s=t.indexOf(-1);if(s!==-1){let i=t.reduce((a,l)=>l>0?a+l:a);t[s]=n.shape[e]-i}O(n.shape[e]===t.reduce((i,a)=>i+a),()=>"The sum of sizes must match the size of the axis dimension."),r=t}return r}var z7=F(()=>{"use strict";ce()});function YAe(n){return`Received SparseTensor with denseShape[0] = 0 but
  indices.shape[0] = ${n}`}function ZAe(n,t){return`indices(${n}, 0) is invalid: ${t} < 0`}function QAe(n,t,e){return`indices(${n}, 0) is invalid: ${t} >= ${e}`}var V7=F(()=>{"use strict";});function JAe(n,t){return`only one output dimension may be -1, not both ${n} and ${t}`}function eRe(n,t){return`size ${n} must be non-negative, not ${t}`}function tRe(){return"reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero"}function nRe(n,t){let e=yt(n),r=yt(t);return`Input to reshape is a SparseTensor with ${e}
  dense values, but the requested shape requires a multiple of ${r}. inputShape=${n} outputShape= ${t}`}function rRe(n,t){let e=yt(n),r=yt(t);return`Input to reshape is a tensor with ${e} dense values, but the requested shape has ${r}. inputShape=${n} outputShape=${t}`}var U7=F(()=>{"use strict";ce();});function oRe(){return"segment ids must be >= 0"}function sRe(){return"segment ids are not increasing"}function iRe(n,t){return`Segment id ${n} out of range [0, ${t}), possibly because segmentIds input is not sorted.`}function aRe(n,t,e){return`Bad: indices[${n}] == ${t} out of range [0, ${e})`}var j7=F(()=>{"use strict";});var xP={};_t(xP,{collectGatherOpShapeInfo:()=>uRe,computeOutShape:()=>cRe,segOpComputeOptimalWindowSize:()=>lRe});function lRe(n,t){let e=!1,r;for(n<=K1?(r=n,e=!0):r=Rx(n,Math.floor(Math.sqrt(n)));!e;)r>t||r===n?e=!0:r=Rx(n,r+1);return r}function cRe(n,t,e){let r=[],o=n.length;for(let s=0;s<o;s++)s!==t?r.push(n[s]):r.push(e);return r}function uRe(n,t,e,r){let o=t.shape.length,s=n.shape.length;if(r!==0&&(r<-o||r>o))throw new Error(`Expect batchDims in the range of [-${o}, ${o}], but got ${r}`);if(r<0&&(r+=o),r>s)throw new Error(`batchDims (${r}) must be less than rank(x) (
    ${s}).`);if(e<r)throw new Error(`batchDims (${r}) must be less than or equal to axis (${e}).`);for(let p=0;p<r;++p)if(n.shape[p]!==t.shape[p])throw new Error(`x.shape[${p}]: ${n.shape[p]} should be equal to indices.shape[${p}]: ${t.shape[p]}.`);let i=n.shape[e],a=[],l=1,c=1,u=1;for(let p=0;p<r;++p)a.push(n.shape[p]),l*=n.shape[p];for(let p=r;p<e;p++)a.push(n.shape[p]),c*=n.shape[p];for(let p=r;p<o;p++)a.push(t.shape[p]);for(let p=e+1;p<s;p++)a.push(n.shape[p]),u*=n.shape[p];return{batchSize:l,sliceSize:u,outerSize:c,dimSize:i,outputShape:a}}var G7=F(()=>{"use strict";ce();fP();});var M={};_t(M,{ERF_A1:()=>kAe,ERF_A2:()=>_Ae,ERF_A3:()=>AAe,ERF_A4:()=>RAe,ERF_A5:()=>MAe,ERF_P:()=>DAe,PARALLELIZE_THRESHOLD:()=>K1,RowPartitionType:()=>lp,SELU_SCALE:()=>hP,SELU_SCALEALPHA:()=>dP,applyActivation:()=>Bm,assertAndGetBroadcastShape:()=>rt,assertAxesAreInnerMostDims:()=>lNe,assertParamsConsistent:()=>mAe,assignToTypedArray:()=>BAe,axesAreInnerMostDims:()=>_O,calculateShapes:()=>X8,checkEinsumDimSizes:()=>WAe,checkPadOnDimRoundingMode:()=>dn,combineLocations:()=>O6,combineRaggedTensorToTensorShapes:()=>xAe,complexWithEvenIndex:()=>PAe,complexWithOddIndex:()=>$Ae,computeConv2DInfo:()=>cm,computeConv3DInfo:()=>u6,computeDefaultPad:()=>dO,computeDilation2DInfo:()=>aEe,computeOptimalWindowSize:()=>wAe,computeOutAndReduceShapes:()=>AO,computeOutShape:()=>gAe,computePool2DInfo:()=>fO,computePool3DInfo:()=>lEe,convertConv2DDataFormat:()=>p6,decodeEinsumEquation:()=>jAe,eitherStridesOrDilationsAreOne:()=>Xr,expandShapeToKeepDim:()=>wi,exponent:()=>VAe,exponents:()=>zAe,fromStringArrayToUint8:()=>fRe,fromUint8ToStringArray:()=>pRe,getAxesPermutation:()=>RO,getBroadcastDims:()=>A6,getComplexWithIndex:()=>LAe,getEinsumComputePath:()=>HAe,getEinsumPermutation:()=>GAe,getFusedBiasGradient:()=>Lm,getFusedDyActivation:()=>$m,getImageCenter:()=>CAe,getInnerMostAxes:()=>cNe,getPermuted:()=>SAe,getRaggedRank:()=>bAe,getReductionAxes:()=>nn,getReshaped:()=>IAe,getReshapedPermuted:()=>TAe,getRowPartitionTypesHelper:()=>yAe,getSliceBeginCoords:()=>EAe,getSliceSize:()=>NAe,getSparseFillEmptyRowsIndicesDenseShapeMismatch:()=>YAe,getSparseFillEmptyRowsNegativeIndexErrorMessage:()=>ZAe,getSparseFillEmptyRowsOutOfRangeIndexErrorMessage:()=>QAe,getSparseReshapeEmptyTensorZeroOutputDimErrorMessage:()=>tRe,getSparseReshapeInputOutputMismatchErrorMessage:()=>rRe,getSparseReshapeInputOutputMultipleErrorMessage:()=>nRe,getSparseReshapeMultipleNegativeOneOutputDimErrorMessage:()=>JAe,getSparseReshapeNegativeOutputDimErrorMessage:()=>eRe,getSparseSegmentReductionIndicesOutOfRangeErrorMessage:()=>aRe,getSparseSegmentReductionNegativeSegmentIdsErrorMessage:()=>oRe,getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage:()=>sRe,getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage:()=>iRe,getUndoAxesPermutation:()=>P0,isIdentityPermutation:()=>qAe,log:()=>zTe,mergeRealAndImagArrays:()=>OAe,prepareAndValidate:()=>x7,prepareSplitSize:()=>XAe,segment_util:()=>xP,shouldFuse:()=>zm,slice_util:()=>_r,splitRealAndImagArrays:()=>FAe,stridesOrDilationsArePositive:()=>ac,tupleValuesAreOne:()=>Xs,upcastType:()=>ar,validateDefaultValueShape:()=>vAe,validateInput:()=>my,validateUpdateShape:()=>FF,warn:()=>oc});function pRe(n){try{return n.map(t=>Gx(t))}catch(t){throw new Error(`Failed to decode encoded string bytes into utf-8, error: ${t}`)}}function fRe(n){return n.map(t=>xf(t))}var W7=F(()=>{"use strict";ce();pa();bn();_7();Nr();by();A7();R7();fP();q1();Hx();M7();O7();aP();gw();mP();by();F7();IT();P7();B7();z7();V7();U7();j7();G7();});var Jr={};_t(Jr,{nonMaxSuppressionV3Impl:()=>_1,nonMaxSuppressionV4Impl:()=>A1,nonMaxSuppressionV5Impl:()=>R1,whereImpl:()=>C1});var H7=F(()=>{"use strict";Cw();zF();});var yP=F(()=>{"use strict";c7();f7();bn();g7();aP();gw();q1();$1();Vn();D8();ce();N7();L1();B1();z1();V1();U1();Ff();pP();j1();Sw();ue();Hx();et();ya();D7();Es();Yv();Zu();qr();k7();W7();UM();H7();gM();G();});var In={};_t(In,{Abs:()=>Wc,Acos:()=>fl,Acosh:()=>dl,AdadeltaOptimizer:()=>Pf,AdagradOptimizer:()=>$f,AdamOptimizer:()=>Lf,AdamaxOptimizer:()=>Bf,Add:()=>gi,AddN:()=>Hc,All:()=>Wd,Any:()=>Hd,ArgMax:()=>qc,ArgMin:()=>Kc,Asin:()=>hl,Asinh:()=>ml,Atan:()=>gl,Atan2:()=>yl,Atanh:()=>xl,AvgPool:()=>Xc,AvgPool3D:()=>Yc,AvgPool3DGrad:()=>Kd,AvgPoolGrad:()=>qd,BatchMatMul:()=>Zc,BatchToSpaceND:()=>Qc,Bincount:()=>Xd,BitwiseAnd:()=>nf,BroadcastArgs:()=>Yd,BroadcastTo:()=>TM,Cast:()=>Zi,Ceil:()=>bl,ClipByValue:()=>vl,Complex:()=>Zd,ComplexAbs:()=>Jc,Concat:()=>eu,Conv2D:()=>tu,Conv2DBackpropFilter:()=>Qd,Conv2DBackpropInput:()=>nu,Conv3D:()=>ru,Conv3DBackpropFilterV2:()=>Jd,Conv3DBackpropInputV2:()=>eh,Cos:()=>wl,Cosh:()=>Cl,CropAndResize:()=>nh,Cumprod:()=>th,Cumsum:()=>ou,DataStorage:()=>ef,DenseBincount:()=>rh,DepthToSpace:()=>oh,DepthwiseConv2dNative:()=>su,DepthwiseConv2dNativeBackpropFilter:()=>sh,DepthwiseConv2dNativeBackpropInput:()=>ih,Diag:()=>ah,Dilation2D:()=>iu,Dilation2DBackpropFilter:()=>Px,Dilation2DBackpropInput:()=>Fx,Draw:()=>$x,ENV:()=>wT,Einsum:()=>lh,Elu:()=>Sl,EluGrad:()=>ch,Environment:()=>Ox,Equal:()=>rf,Erf:()=>Tl,Exp:()=>El,ExpandDims:()=>au,Expm1:()=>Nl,FFT:()=>uh,Fill:()=>ph,FlipLeftRight:()=>fh,Floor:()=>Dl,FloorDiv:()=>kl,FromPixels:()=>Lx,FusedBatchNorm:()=>lu,FusedConv2D:()=>hf,FusedDepthwiseConv2D:()=>mf,GatherNd:()=>dh,GatherV2:()=>cu,Greater:()=>of,GreaterEqual:()=>_l,IFFT:()=>hh,Identity:()=>Qi,Imag:()=>mh,IsFinite:()=>Al,IsInf:()=>Rl,IsNan:()=>Ml,KernelBackend:()=>cl,LRN:()=>pu,LRNGrad:()=>xh,LeakyRelu:()=>uu,Less:()=>sf,LessEqual:()=>af,LinSpace:()=>gh,Log:()=>Ol,Log1p:()=>Fl,LogSoftmax:()=>EM,LogicalAnd:()=>lf,LogicalNot:()=>cf,LogicalOr:()=>uf,LogicalXor:()=>FTe,LowerBound:()=>PTe,MatrixBandPart:()=>$Te,Max:()=>fu,MaxPool:()=>du,MaxPool3D:()=>hu,MaxPool3DGrad:()=>bh,MaxPoolGrad:()=>yh,MaxPoolWithArgmax:()=>vh,Maximum:()=>Pl,Mean:()=>mu,Min:()=>gu,Minimum:()=>$l,MirrorPad:()=>xu,Mod:()=>Ll,MomentumOptimizer:()=>zf,Multinomial:()=>wh,Multiply:()=>Bl,Neg:()=>yu,NonMaxSuppressionV3:()=>Ch,NonMaxSuppressionV4:()=>Ih,NonMaxSuppressionV5:()=>Sh,NotEqual:()=>pf,OP_SCOPE_SUFFIX:()=>OT,OneHot:()=>vu,OnesLike:()=>bu,Optimizer:()=>Qr,OptimizerConstructors:()=>vy,Pack:()=>wu,PadV2:()=>Cu,Pool:()=>LTe,Pow:()=>zl,Prelu:()=>Iu,Prod:()=>Su,RMSPropOptimizer:()=>Vf,RaggedGather:()=>Th,RaggedRange:()=>Eh,RaggedTensorToTensor:()=>Nh,Range:()=>Dh,Rank:()=>PM,Real:()=>kh,RealDiv:()=>Il,Reciprocal:()=>Vl,Reduction:()=>tr,Relu:()=>Ul,Relu6:()=>jl,Reshape:()=>Tu,ResizeBilinear:()=>Nu,ResizeBilinearGrad:()=>Ah,ResizeNearestNeighbor:()=>Eu,ResizeNearestNeighborGrad:()=>_h,Reverse:()=>Du,RotateWithOffset:()=>Kh,Round:()=>Gl,Rsqrt:()=>Wl,SGDOptimizer:()=>gc,ScatterNd:()=>Rh,SearchSorted:()=>Oh,Select:()=>ku,Selu:()=>Hl,Sigmoid:()=>Yl,Sign:()=>Xl,Sin:()=>ql,Sinh:()=>Kl,Slice:()=>_u,Softmax:()=>Ou,Softplus:()=>Zl,SpaceToBatchND:()=>Ru,SparseFillEmptyRows:()=>Fh,SparseReshape:()=>Ph,SparseSegmentMean:()=>$h,SparseSegmentSum:()=>Lh,SparseToDense:()=>Bh,SplitV:()=>Mu,Sqrt:()=>Ql,Square:()=>zh,SquaredDifference:()=>Jl,StaticRegexReplace:()=>ff,Step:()=>rc,StridedSlice:()=>Vh,StringNGrams:()=>Uh,StringSplit:()=>jh,StringToHashBucketFast:()=>Gh,Sub:()=>ec,Sum:()=>Au,Tan:()=>tc,Tanh:()=>nc,Tensor:()=>tt,TensorBuffer:()=>Pt,TensorScatterUpdate:()=>Mh,Tile:()=>Ji,TopK:()=>Wh,Transform:()=>Hh,Transpose:()=>ea,Unique:()=>qh,Unpack:()=>Fu,UnsortedSegmentSum:()=>Pu,UpperBound:()=>BTe,Variable:()=>sc,ZerosLike:()=>$u,_FusedMatMul:()=>df,abs:()=>fn,acos:()=>a0,acosh:()=>l0,add:()=>ae,addN:()=>sO,all:()=>lm,any:()=>Sf,argMax:()=>sa,argMin:()=>c0,asin:()=>u0,asinh:()=>p0,atan:()=>f0,atan2:()=>d0,atanh:()=>h0,avgPool:()=>Gu,avgPool3d:()=>x0,backend:()=>o0,backend_util:()=>M,basicLSTMCell:()=>mO,batchNorm:()=>aa,batchNorm2d:()=>b0,batchNorm3d:()=>v0,batchNorm4d:()=>w0,batchToSpaceND:()=>Wu,bincount:()=>C0,bitwiseAnd:()=>xO,booleanMaskAsync:()=>eq,broadcastArgs:()=>yO,broadcastTo:()=>la,broadcast_util:()=>os,browser:()=>ba,buffer:()=>Pe,cast:()=>fe,ceil:()=>I0,clipByValue:()=>pr,clone:()=>wo,complex:()=>Oo,concat:()=>Tt,concat1d:()=>S0,concat2d:()=>T0,concat3d:()=>E0,concat4d:()=>N0,conv1d:()=>pm,conv2d:()=>Po,conv2dTranspose:()=>fm,conv3d:()=>D0,conv3dTranspose:()=>k0,copyRegisteredKernels:()=>jTe,cos:()=>Hu,cosh:()=>dm,cosineWindow:()=>xy,cumprod:()=>Tf,cumsum:()=>hm,customGrad:()=>Io,denseBincount:()=>sy,deprecationWarn:()=>D5,depthToSpace:()=>_0,depthwiseConv2d:()=>ca,device_util:()=>Lu,diag:()=>SO,dilation2d:()=>R0,disableDeprecationWarnings:()=>m1e,dispose:()=>Be,disposeVariables:()=>g1e,div:()=>xe,divNoNan:()=>O0,dot:()=>F0,dropout:()=>I1,einsum:()=>qu,elu:()=>ua,enableDebugMode:()=>h1e,enableProdMode:()=>d1e,enclosingPowerOfTwo:()=>S1,engine:()=>Ks,ensureShape:()=>kO,env:()=>Y,equal:()=>lo,erf:()=>mm,euclideanNorm:()=>L0,exp:()=>vn,expandDims:()=>Cn,expm1:()=>B0,eye:()=>Nf,fft:()=>op,fill:()=>Qs,findBackend:()=>v1e,findBackendFactory:()=>w1e,floor:()=>da,floorDiv:()=>im,fused:()=>ap,gather:()=>ha,gatherND:()=>uq,gather_util:()=>iP,getBackend:()=>WM,getGradient:()=>ST,getKernel:()=>Xh,getKernelsForBackend:()=>Xv,grad:()=>V6,grads:()=>U6,greater:()=>_n,greaterEqual:()=>Co,ifft:()=>hc,imag:()=>Ku,image:()=>wr,inTopKAsync:()=>mq,io:()=>Lo,irfft:()=>Rm,isFinite:()=>U0,isInf:()=>j0,isNaN:()=>G0,keep:()=>yn,kernel_impls:()=>Jr,leakyRelu:()=>Xu,less:()=>fc,lessEqual:()=>ss,linalg:()=>F1,linspace:()=>PO,localResponseNormalization:()=>H0,log:()=>kr,log1p:()=>Yu,logSigmoid:()=>K0,logSoftmax:()=>xm,logSumExp:()=>Qu,logicalAnd:()=>Zr,logicalNot:()=>Ju,logicalOr:()=>bm,logicalXor:()=>Y0,losses:()=>GK,lowerBound:()=>VO,matMul:()=>st,math:()=>sP,max:()=>Dr,maxPool:()=>ep,maxPool3d:()=>Z0,maxPoolWithArgmax:()=>UO,maximum:()=>$o,mean:()=>sn,memory:()=>Kx,meshgrid:()=>jO,min:()=>lc,minimum:()=>Ns,mirrorPad:()=>tw,mod:()=>nw,moments:()=>kf,movingAverage:()=>nq,mul:()=>B,multiRNNCell:()=>HO,multinomial:()=>qO,neg:()=>pt,nextFrame:()=>wy,norm:()=>cc,notEqual:()=>Ii,oneHot:()=>ma,ones:()=>er,onesLike:()=>vr,op:()=>_,outerProduct:()=>KO,pad:()=>So,pad1d:()=>XO,pad2d:()=>YO,pad3d:()=>ZO,pad4d:()=>QO,pool:()=>ow,pow:()=>Yr,prelu:()=>np,print:()=>i0,prod:()=>sw,profile:()=>x1e,raggedGather:()=>tF,raggedRange:()=>nF,raggedTensorToTensor:()=>rF,rand:()=>oF,randomGamma:()=>mF,randomNormal:()=>Af,randomStandardNormal:()=>xF,randomUniform:()=>is,randomUniformInt:()=>yF,range:()=>ga,ready:()=>GM,real:()=>dc,reciprocal:()=>cw,registerBackend:()=>r0,registerGradient:()=>NM,registerKernel:()=>zx,relu:()=>Br,relu6:()=>Im,removeBackend:()=>b1e,reshape:()=>V,reverse:()=>fr,reverse1d:()=>bF,reverse2d:()=>vF,reverse3d:()=>wF,reverse4d:()=>CF,rfft:()=>sp,round:()=>Sm,rsqrt:()=>Tm,scalar:()=>Ie,scatterND:()=>oq,scatter_util:()=>mw,searchSorted:()=>uy,selu:()=>Em,separableConv2d:()=>Nm,serialization:()=>he,setBackend:()=>FT,setPlatform:()=>C1e,setdiff1dAsync:()=>NF,sigmoid:()=>Pr,sign:()=>uw,signal:()=>jK,sin:()=>Dm,sinh:()=>km,slice:()=>$e,slice1d:()=>_m,slice2d:()=>dy,slice3d:()=>Am,slice4d:()=>Rf,slice_util:()=>_r,softmax:()=>xa,softplus:()=>Ci,spaceToBatchND:()=>tp,sparse:()=>WK,sparseToDense:()=>lq,spectral:()=>UK,split:()=>dr,sqrt:()=>qt,square:()=>lt,squaredDifference:()=>Om,squeeze:()=>Qt,stack:()=>An,step:()=>ei,stridedSlice:()=>fw,string:()=>HK,sub:()=>be,sum:()=>Ee,sumOutType:()=>yf,tan:()=>dw,tanh:()=>vi,tensor:()=>Er,tensor1d:()=>Xt,tensor2d:()=>ti,tensor3d:()=>hw,tensor4d:()=>RF,tensor5d:()=>MF,tensor6d:()=>OF,tensorScatterUpdate:()=>PF,tensor_util:()=>RT,test_util:()=>hF,tidy:()=>K,tile:()=>$r,time:()=>y1e,topk:()=>xw,train:()=>Uf,transpose:()=>it,truncatedNormal:()=>Fm,unique:()=>yw,unregisterGradient:()=>UTe,unregisterKernel:()=>VTe,unsortedSegmentSum:()=>Pm,unstack:()=>hr,upcastType:()=>ar,upperBound:()=>BF,util:()=>C,valueAndGrad:()=>j6,valueAndGrads:()=>G6,variable:()=>bw,variableGrads:()=>q0,version_core:()=>uP,where:()=>rn,whereAsync:()=>vw,zeros:()=>Kt,zerosLike:()=>ze});var N=F(()=>{"use strict";n6();KK();yP();qK()});var dRe,q7=F(()=>{"use strict";N();dRe=Y();dRe.registerFlag("KEEP_INTERMEDIATE_TENSORS",()=>!1,n=>{n&&console.warn("Keep intermediate tensors is ON. This will print the values of all intermediate tensors during model inference. Not all models support this mode. For details, check e2e/benchmarks/ model_config.js. This significantly impacts performance.")})});var Ds,K7,X7=F(()=>{"use strict";Ds=function(n){return n[n.DT_INVALID=0]="DT_INVALID",n[n.DT_FLOAT=1]="DT_FLOAT",n[n.DT_DOUBLE=2]="DT_DOUBLE",n[n.DT_INT32=3]="DT_INT32",n[n.DT_UINT8=4]="DT_UINT8",n[n.DT_INT16=5]="DT_INT16",n[n.DT_INT8=6]="DT_INT8",n[n.DT_STRING=7]="DT_STRING",n[n.DT_COMPLEX64=8]="DT_COMPLEX64",n[n.DT_INT64=9]="DT_INT64",n[n.DT_BOOL=10]="DT_BOOL",n[n.DT_QINT8=11]="DT_QINT8",n[n.DT_QUINT8=12]="DT_QUINT8",n[n.DT_QINT32=13]="DT_QINT32",n[n.DT_BFLOAT16=14]="DT_BFLOAT16",n[n.DT_QINT16=15]="DT_QINT16",n[n.DT_QUINT16=16]="DT_QUINT16",n[n.DT_UINT16=17]="DT_UINT16",n[n.DT_COMPLEX128=18]="DT_COMPLEX128",n[n.DT_HALF=19]="DT_HALF",n[n.DT_RESOURCE=20]="DT_RESOURCE",n[n.DT_VARIANT=21]="DT_VARIANT",n[n.DT_UINT32=22]="DT_UINT32",n[n.DT_UINT64=23]="DT_UINT64",n[n.DT_FLOAT_REF=101]="DT_FLOAT_REF",n[n.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",n[n.DT_INT32_REF=103]="DT_INT32_REF",n[n.DT_UINT8_REF=104]="DT_UINT8_REF",n[n.DT_INT16_REF=105]="DT_INT16_REF",n[n.DT_INT8_REF=106]="DT_INT8_REF",n[n.DT_STRING_REF=107]="DT_STRING_REF",n[n.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",n[n.DT_INT64_REF=109]="DT_INT64_REF",n[n.DT_BOOL_REF=110]="DT_BOOL_REF",n[n.DT_QINT8_REF=111]="DT_QINT8_REF",n[n.DT_QUINT8_REF=112]="DT_QUINT8_REF",n[n.DT_QINT32_REF=113]="DT_QINT32_REF",n[n.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF",n[n.DT_QINT16_REF=115]="DT_QINT16_REF",n[n.DT_QUINT16_REF=116]="DT_QUINT16_REF",n[n.DT_UINT16_REF=117]="DT_UINT16_REF",n[n.DT_COMPLEX128_REF=118]="DT_COMPLEX128_REF",n[n.DT_HALF_REF=119]="DT_HALF_REF",n[n.DT_RESOURCE_REF=120]="DT_RESOURCE_REF",n[n.DT_VARIANT_REF=121]="DT_VARIANT_REF",n[n.DT_UINT32_REF=122]="DT_UINT32_REF",n[n.DT_UINT64_REF=123]="DT_UINT64_REF",n}(Ds||{});(function(n){let t;(function(e){e[e.LEGACY=0]="LEGACY",e[e.V1=1]="V1",e[e.V2=2]="V2"})(t=n.CheckpointFormatVersion||(n.CheckpointFormatVersion={}))})(K7||(K7={}))});function Y7(n,t){let e={tfOpName:n,category:"custom",inputs:[],attrs:[],customExecutor:t};bP[n]=e}function X1(n){return bP[n]}function Z7(n){delete bP[n]}var bP,Y1=F(()=>{"use strict";bP={}});function E(n,t,e,r,o){let s=t.inputParams[n];if(s&&s.inputIndexStart!==void 0){let a=s.inputIndexStart,l=s.inputIndexEnd===0?void 0:s.inputIndexEnd===void 0?a+1:s.inputIndexEnd,c=a<0?t.inputNames.length+a:a;if(s.type==="tensor")return mr(t.inputNames[c],e,r,o);if(s.type==="tensors"){let f=t.inputs.slice(a,l);return t.inputNames.slice(a,l).filter((h,m)=>{var g;return((g=f[m])===null||g===void 0?void 0:g.op)!=="NoOp"}).map(h=>mr(h,e,r,o))}let u=mr(t.inputNames[c],e,r,o),p=u.dataSync();return s.type==="number"?p[0]:C.toNestedArray(u.shape,p)}let i=t.attrParams[n];return i&&i.value}function mr(n,t,e,r){let[o,s]=Bo(n,e);if(r!=null){let a=r.getHashTableHandleByName(o);if(a!=null)return a}let i=e.currentContextIds.find(a=>!!t[Z1(o,a)]);return i!==void 0?t[Z1(o,i)][s]:void 0}function vP(n,t,e){return t[Z1(n,e.currentContextId)]}function va(n,t){let[e,r,o]=Bo(n,t);return[Z1(e,t&&t.currentContextId),r,o]}function Z1(n,t){return t?`${n}-${t}`:n}function Bo(n,t){if(n==="")return["",0,void 0];let e=t!=null&&t.parseNodeNameCache!=null;if(e){let s=t.parseNodeNameCache.get(n);if(s!=null)return s}let r=n.split(":"),o;if(r.length===1)o=[n,0,void 0];else{let s=r[0],i=r.length===3?r[1]:void 0,a=Number(r[r.length-1]);o=[s,a,i]}return e&&t.parseNodeNameCache.set(n,o),o}function Ew(n,t,e){let r=E("pad",n,t,e);if(r==="explicit"){r=E("explicitPaddings",n,t,e);let o=[[0,0],[0,0],[0,0],[0,0]];for(let s=0;s<4;s++)o[s][0]=r[s*2],o[s][1]=r[s*2+1];return o}return r}function wa(n){return n.kept?n:wo(n)}var nr=F(()=>{"use strict";N();});var wP={};_t(wP,{json:()=>mRe});var mRe,Q7=F(()=>{"use strict";mRe=[{tfOpName:"Add",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddV2",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddN",category:"arithmetic",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"BiasAdd",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"Sub",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"RealDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Div",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"DivNoNan",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mul",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Maximum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Minimum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Pow",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SquaredDifference",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorMod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}]});var CP={};_t(CP,{json:()=>gRe});var gRe,J7=F(()=>{"use strict";gRe=[{tfOpName:"Abs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan2",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ceil",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ClipByValue",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"clipValueMin",type:"number"},{start:2,name:"clipValueMax",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Complex",category:"basic_math",inputs:[{start:0,name:"real",type:"tensor"},{start:1,name:"imag",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ComplexAbs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Elu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Exp",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Floor",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Imag",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Neg",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Real",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Prelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"alpha",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu6",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Selu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sigmoid",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Rsqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Square",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sign",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Round",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Expm1",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log1p",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Reciprocal",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Softplus",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Erf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LeakyRelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"alpha",name:"alpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsNan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsFinite",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsInf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}]});var IP={};_t(IP,{json:()=>xRe});var xRe,e9=F(()=>{"use strict";xRe=[{tfOpName:"EmptyTensorList",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"maxNumElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"LoopCond",category:"control",inputs:[{start:0,name:"pred",type:"tensor"}]},{tfOpName:"Switch",category:"control",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"pred",type:"tensor"}]},{tfOpName:"Merge",category:"control",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"Enter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"frame_name",name:"frameName",type:"string"},{tfName:"is_constant",name:"isConstant",type:"bool"}]},{tfOpName:"Exit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NextIteration",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayV3",category:"control",inputs:[{start:0,name:"size",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"dynamic_size",name:"dynamicSize",type:"bool"},{tfName:"clear_after_read",name:"clearAfterRead",type:"bool"},{tfName:"identical_element_shapes",name:"identicalElementShapes",type:"bool"},{tfName:"tensor_array_name",name:"name",type:"string"}]},{tfOpName:"TensorArrayWriteV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayReadV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayGatherV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"}]},{tfOpName:"TensorArrayScatterV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArrayConcatV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape_except0",name:"elementShapeExcept0",type:"shape",notSupported:!0}]},{tfOpName:"TensorArraySplitV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"tensor",type:"tensor"},{start:2,name:"lengths",type:"number[]"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArraySizeV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}]},{tfOpName:"TensorArrayCloseV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"}]},{tfOpName:"StatelessIf",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"If",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"StatelessWhile",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"While",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"TensorListScatter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListScatterV2",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"},{start:3,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGather",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListSetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListReserve",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListFromTensor",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListStack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"},{tfName:"num_elements",name:"numElements",type:"dtype"}]},{tfOpName:"TensorListSplit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"},{start:2,name:"lengths",type:"number[]"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcat",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcatV2",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPopBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPushBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListLength",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}]},{tfOpName:"TensorListResize",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"size",type:"number"}]}]});var SP={};_t(SP,{json:()=>yRe});var yRe,t9=F(()=>{"use strict";yRe=[{tfOpName:"AvgPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[],notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPoolWithArgmax",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"include_batch_in_index",name:"includeBatchInIndex",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AvgPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Conv1D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"stride",name:"stride",type:"number"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NWC"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"dilation",name:"dilation",type:"number",defaultValue:1}]},{tfOpName:"Conv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"useCudnnOnGpu",name:"useCudnnOnGpu",type:"bool"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"_FusedConv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"use_cudnn_on_gpu",name:"useCudnnOnGpu",type:"bool",defaultValue:!0},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2}]},{tfOpName:"Conv2DBackpropInput",category:"convolution",inputs:[{start:2,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:0,name:"outputShape",type:"number[]"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]",notSupported:!0}]},{tfOpName:"DepthwiseConv2d",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"DepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"FusedDepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]}]},{tfOpName:"Conv3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"Dilation2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"rates",name:"dilations",type:"number[]"},{tfName:"padding",name:"pad",type:"string"}]}]});var TP={};_t(TP,{json:()=>bRe});var bRe,n9=F(()=>{"use strict";bRe=[{tfOpName:"Fill",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"},{start:1,name:"value",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"LinSpace",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"num",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"OneHot",category:"creation",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"depth",type:"number"},{start:2,name:"onValue",type:"number",defaultValue:1},{start:3,name:"offValue",type:"number",defaultValue:0}],attrs:[{tfName:"axis",name:"axis",type:"number",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Ones",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"OnesLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"RandomStandardNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"RandomUniform",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number",defaultValue:0},{tfName:"maxval",name:"maxval",type:"number",defaultValue:1},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"RandomUniformInt",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number"},{tfName:"maxval",name:"maxval",type:"number"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Range",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"step",type:"number",defaultValue:0}],attrs:[{tfName:"Tidx",name:"dtype",type:"dtype"}]},{tfOpName:"TruncatedNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"means",name:"mean",type:"number",defaultValue:0},{tfName:"stddev",name:"stdDev",type:"number",defaultValue:1},{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Zeros",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"ZerosLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Multinomial",category:"creation",inputs:[{start:0,name:"logits",type:"tensor"},{start:1,name:"numSamples",type:"number"}],attrs:[{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number"},{tfName:"T",name:"dtype",type:"dtype"},{tfName:"output_dtype",name:"output_dtype",type:"dtype"}]}]});var EP={};_t(EP,{json:()=>vRe});var vRe,r9=F(()=>{"use strict";vRe=[{tfOpName:"NonMaxSuppressionV2",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV3",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV4",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"T_threshold",name:"threshold",type:"dtype",notSupported:!0},{tfName:"pad_to_max_output_size",name:"padToMaxOutputSize",type:"bool"}]},{tfOpName:"NonMaxSuppressionV5",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"},{start:5,name:"softNmsSigma",type:"number"}]},{tfOpName:"Where",category:"dynamic",inputs:[{start:0,name:"condition",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ListDiff",category:"dynamic",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}]});var NP={};_t(NP,{json:()=>wRe});var wRe,o9=F(()=>{"use strict";wRe=[{tfOpName:"LowerBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"TopKV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"k",type:"number"}],attrs:[{tfName:"sorted",name:"sorted",type:"bool"}]},{tfOpName:"UpperBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"Unique",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"UniqueV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]}]});var DP={};_t(DP,{json:()=>CRe});var CRe,s9=F(()=>{"use strict";CRe=[{tfOpName:"PlaceholderWithDefault",category:"graph",inputs:[{start:0,name:"default",type:"tensor"}],attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Placeholder",category:"graph",attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Const",category:"graph"},{tfOpName:"Identity",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IdentityN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Snapshot",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Rank",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Size",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Shape",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"ShapeN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Print",category:"graph",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"data",type:"tensors"}],attrs:[{tfName:"message",name:"message",type:"string"},{tfName:"first_n",name:"firstN",type:"number",notSupported:!0},{tfName:"summarize",name:"summarize",type:"number",defaultValue:3}]},{tfOpName:"NoOp",category:"graph",inputs:[]},{tfOpName:"StopGradient",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"FakeQuantWithMinMaxVars",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"min",name:"min",type:"number"},{tfName:"max",name:"max",type:"number"}]}]});var kP={};_t(kP,{json:()=>IRe});var IRe,i9=F(()=>{"use strict";IRe=[{tfOpName:"HashTable",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"HashTableV2",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"LookupTableImport",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableImportV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFind",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFindV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableSize",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"LookupTableSizeV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"InitializeTable",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}]},{tfOpName:"InitializeTableV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}]}]});var _P={};_t(_P,{json:()=>SRe});var SRe,a9=F(()=>{"use strict";SRe=[{tfOpName:"ResizeBilinear",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ResizeNearestNeighbor",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"CropAndResize",category:"image",inputs:[{start:0,name:"image",type:"tensor"},{start:1,name:"boxes",type:"tensor"},{start:2,name:"boxInd",type:"tensor"},{start:3,name:"cropSize",type:"number[]"}],attrs:[{tfName:"method",name:"method",type:"string"},{tfName:"extrapolation_value",name:"extrapolationValue",type:"number"}]},{tfOpName:"ImageProjectiveTransformV3",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"transforms",type:"tensor"},{start:2,name:"outputShape",type:"number[]"},{start:3,name:"fillValue",type:"number"}],attrs:[{tfName:"interpolation",name:"interpolation",type:"string"},{tfName:"fill_mode",name:"fillMode",type:"string"}]}]});var AP={};_t(AP,{json:()=>TRe});var TRe,l9=F(()=>{"use strict";TRe=[{tfOpName:"Equal",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NotEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Greater",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"GreaterEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Less",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LessEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalAnd",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalNot",category:"logical",inputs:[{start:0,name:"a",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalOr",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Select",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SelectV2",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BitwiseAnd",category:"logical",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}]}]});var RP={};_t(RP,{json:()=>ERe});var ERe,c9=F(()=>{"use strict";ERe=[{tfOpName:"_FusedMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMulV2",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Transpose",category:"matrices",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"perm",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Einsum",category:"matrices",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"equation",name:"equation",type:"string"},{tfName:"N",name:"n",type:"number",defaultValue:2},{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"MatrixBandPart",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"numLower",type:"tensor"},{start:1,name:"numUpper",type:"tensor"}]}]});var MP={};_t(MP,{json:()=>NRe});var NRe,u9=F(()=>{"use strict";NRe=[{tfOpName:"EuclideanNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool",defaultValue:!1}]},{tfOpName:"FusedBatchNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV2",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV3",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"LRN",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"depth_radius",name:"radius",type:"number",defaultValue:5},{tfName:"bias",name:"bias",type:"number",defaultValue:1},{tfName:"alpha",name:"alpha",type:"number",defaultValue:1},{tfName:"beta",name:"beta",type:"number",defaultValue:.5}]},{tfOpName:"Softmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"LogSoftmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]}]});var OP={};_t(OP,{json:()=>DRe});var DRe,p9=F(()=>{"use strict";DRe=[{tfOpName:"Bincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}]},{tfOpName:"DenseBincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}],attrs:[{tfName:"binary_output",name:"binaryOutput",type:"bool"}]},{tfOpName:"Max",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Mean",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Min",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Sum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"All",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Any",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"ArgMax",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"ArgMin",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"Prod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cumprod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]},{tfOpName:"Cumsum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]}]});var FP={};_t(FP,{json:()=>kRe});var kRe,f9=F(()=>{"use strict";kRe=[{tfOpName:"ConcatV2",category:"slice_join",inputs:[{start:0,end:-1,name:"tensors",type:"tensors"},{start:-1,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"Concat",category:"slice_join",inputs:[{start:1,end:0,name:"tensors",type:"tensors"},{start:0,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"GatherV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"axis",type:"number",defaultValue:0}],attrs:[{tfName:"batch_dims",name:"batchDims",type:"number",defaultValue:0}]},{tfOpName:"Gather",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",notSupported:!0}]},{tfOpName:"Reverse",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"dims",type:"bool[]"}]},{tfOpName:"ReverseV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}]},{tfOpName:"Slice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"size",type:"number[]"}]},{tfOpName:"StridedSlice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"end",type:"number[]"},{start:3,name:"strides",type:"number[]"}],attrs:[{tfName:"begin_mask",name:"beginMask",type:"number",defaultValue:0},{tfName:"end_mask",name:"endMask",type:"number",defaultValue:0},{tfName:"new_axis_mask",name:"newAxisMask",type:"number",defaultValue:0},{tfName:"ellipsis_mask",name:"ellipsisMask",type:"number",defaultValue:0},{tfName:"shrink_axis_mask",name:"shrinkAxisMask",type:"number",defaultValue:0}]},{tfOpName:"Pack",category:"slice_join",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0}]},{tfOpName:"Unpack",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0},{tfName:"num",name:"num",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Tile",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"reps",type:"number[]"}]},{tfOpName:"Split",category:"slice_join",inputs:[{start:0,name:"axis",type:"number",defaultValue:0},{start:1,name:"x",type:"tensor"}],attrs:[{tfName:"num_split",name:"numOrSizeSplits",type:"number",defaultValue:1}]},{tfOpName:"SplitV",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"numOrSizeSplits",type:"number[]"},{start:2,name:"axis",type:"number",defaultValue:0}]},{tfOpName:"ScatterNd",category:"slice_join",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"shape",type:"number[]"}]},{tfOpName:"GatherNd",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}]},{tfOpName:"SparseToDense",category:"slice_join",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!1,notSupported:!0}]},{tfOpName:"TensorScatterUpdate",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"values",type:"tensor"}]}]});var PP={};_t(PP,{json:()=>_Re});var _Re,d9=F(()=>{"use strict";_Re=[{tfOpName:"SparseFillEmptyRows",category:"sparse",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"denseShape",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}]},{tfOpName:"SparseReshape",category:"sparse",inputs:[{start:0,name:"inputIndices",type:"tensor"},{start:1,name:"inputShape",type:"tensor"},{start:2,name:"newShape",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SparseSegmentMean",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]},{tfOpName:"SparseSegmentSum",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]}]});var $P={};_t($P,{json:()=>ARe});var ARe,h9=F(()=>{"use strict";ARe=[{tfOpName:"FFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"RFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]},{tfOpName:"IRFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]}]});var LP={};_t(LP,{json:()=>RRe});var RRe,m9=F(()=>{"use strict";RRe=[{tfOpName:"StaticRegexReplace",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"pattern",name:"pattern",type:"string"},{tfName:"rewrite",name:"rewrite",type:"string"},{tfName:"replace_global",name:"replaceGlobal",type:"bool"}]},{tfOpName:"StringNGrams",category:"string",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"dataSplits",type:"tensor"}],attrs:[{tfName:"separator",name:"separator",type:"string"},{tfName:"ngram_widths",name:"nGramWidths",type:"number[]"},{tfName:"left_pad",name:"leftPad",type:"string"},{tfName:"right_pad",name:"rightPad",type:"string"},{tfName:"pad_width",name:"padWidth",type:"number"},{tfName:"preserve_short_sequences",name:"preserveShortSequences",type:"bool"}],outputs:["ngrams","ngrams_splits"]},{tfOpName:"StringSplit",category:"string",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"delimiter",type:"tensor"}],attrs:[{tfName:"skip_empty",name:"skipEmpty",type:"bool"}],outputs:["indices","values","shape"]},{tfOpName:"StringToHashBucketFast",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"num_buckets",name:"numBuckets",type:"number"}]}]});var BP={};_t(BP,{json:()=>MRe});var MRe,g9=F(()=>{"use strict";MRe=[{tfOpName:"Cast",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"SrcT",name:"sdtype",type:"dtype",notSupported:!0},{tfName:"DstT",name:"dtype",type:"dtype"}]},{tfOpName:"ExpandDims",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"MirrorPad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"mode",name:"mode",type:"string"}]},{tfOpName:"Pad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"constant_value",name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"PadV2",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"},{start:2,name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"Reshape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"EnsureShape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"Squeeze",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"axis",tfDeprecatedName:"squeeze_dims",name:"axis",type:"number[]"}]},{tfOpName:"SpaceToBatchND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"paddings",type:"number[]"}]},{tfOpName:"BatchToSpaceND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"crops",type:"number[]"}]},{tfOpName:"DepthToSpace",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"block_size",name:"blockSize",type:"number"},{tfName:"data_format",name:"dataFormat",type:"string"}]},{tfOpName:"BroadcastTo",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}],attrs:[]},{tfOpName:"BroadcastArgs",category:"transformation",inputs:[{start:0,name:"s0",type:"tensor"},{start:1,name:"s1",type:"tensor"}],attrs:[]}]});function ORe(n){let t=Y().global;if(typeof t.atob<"u")return t.atob(n);if(typeof Buffer<"u")return new Buffer(n,"base64").toString();throw new Error("Unable to decode base64 in this environment. Missing built-in atob() or Buffer()")}function y9(n,t){let e=Array.isArray(n)?String.fromCharCode.apply(null,n):ORe(n);return t?e:e.toLowerCase()}function Q1(n,t,e,r=!1){let o=n[t];return o!=null?y9(o.s,r):e}function J1(n,t,e){let r=n[t];return r?r.b:e}function eE(n,t,e){let r=n[t]||{},o=r.i!=null?r.i:r.f!=null?r.f:e;return typeof o=="number"?o:parseInt(o,10)}function zP(n){switch(typeof n=="string"&&(n=Ds[n]),n){case Ds.DT_FLOAT:case Ds.DT_HALF:return"float32";case Ds.DT_INT32:case Ds.DT_INT64:case Ds.DT_INT8:case Ds.DT_UINT8:return"int32";case Ds.DT_BOOL:return"bool";case Ds.DT_DOUBLE:return"float32";case Ds.DT_STRING:return"string";case Ds.DT_COMPLEX64:case Ds.DT_COMPLEX128:return"complex64";default:return null}}function x9(n,t,e){let r=n[t];return r&&r.func?r.func.name:e}function tE(n,t,e){let r=n[t];return r&&r.type?zP(r.type):e}function nE(n,t,e){let r=n[t];return r&&r.list&&r.list.type?r.list.type.map(o=>zP(o)):e}function b9(n){if(!n.unknownRank)return n.dim!=null?n.dim.map(t=>typeof t.size=="number"?t.size:parseInt(t.size,10)):[]}function rE(n,t,e){let r=n[t];return r&&r.shape?b9(r.shape):e}function oE(n,t,e){let r=n[t];return r?((r.list.f&&r.list.f.length?r.list.f:r.list.i)||[]).map(o=>typeof o=="number"?o:parseInt(o,10)):e}function sE(n,t,e,r=!1){let o=n[t];return o&&o.list&&o.list.s?o.list.s.map(s=>y9(s,r)):e}function iE(n,t,e){let r=n[t];return r&&r.list&&r.list.shape?r.list.shape.map(o=>b9(o)):e}function aE(n,t,e){let r=n[t];return r&&r.list&&r.list.b?r.list.b:e}var Nw,VP=F(()=>{"use strict";N();X7();Y1();nr();Q7();J7();e9();t9();n9();r9();o9();s9();i9();a9();l9();c9();u9();p9();f9();d9();h9();m9();g9();Nw=class{static get Instance(){return this._instance||(this._instance=new this)}constructor(){let t=[wP,CP,IP,SP,TP,EP,NP,DP,kP,_P,AP,RP,MP,OP,FP,PP,$P,LP,BP],e=[].concat(...t.map(r=>r.json));this.opMappers=e.reduce((r,o)=>(r[o.tfOpName]=o,r),{})}transformGraph(t,e={}){let r=t.node,o=[],s=[],i=[],a=r.reduce((m,g)=>(m[g.name]=this.mapNode(g),g.op.startsWith("Placeholder")?o.push(m[g.name]):g.op==="Const"?s.push(m[g.name]):(g.input==null||g.input.length===0)&&i.push(m[g.name]),m),{}),l=[],c=[],u={},p={};e!=null&&(u=this.mapSignatureEntries(e.inputs),p=this.mapSignatureEntries(e.outputs));let f=Object.keys(a);f.forEach(m=>{let g=a[m];g.inputNames.forEach((x,b)=>{let[w,,v]=va(x),S=a[w];if(S.outputs!=null){let k=S.outputs.indexOf(v);if(k!==-1){let A=`${w}:${k}`;g.inputNames[b]=A}}g.inputs.push(S),S.children.push(g)})}),Object.keys(p).length===0?f.forEach(m=>{let g=a[m];g.children.length===0&&c.push(g)}):Object.keys(p).forEach(m=>{let[g]=va(m),x=a[g];x!=null&&(x.signatureKey=p[m],c.push(x))}),Object.keys(u).length>0?Object.keys(u).forEach(m=>{let[g]=va(m),x=a[g];x&&(x.signatureKey=u[m],l.push(x))}):l=o;let d={};t.library!=null&&t.library.function!=null&&(d=t.library.function.reduce((m,g)=>(m[g.signature.name]=this.mapFunction(g),m),{}));let h={nodes:a,inputs:l,outputs:c,weights:s,placeholders:o,signature:e,functions:d};return i.length>0&&(h.initNodes=i),h}mapSignatureEntries(t){return Object.keys(t||{}).reduce((e,r)=>(e[t[r].name]=r,e),{})}mapNode(t){let e=X1(t.op)||this.opMappers[t.op]||{};t.attr==null&&(t.attr={});let r={name:t.name,op:t.op,category:e.category,inputNames:(t.input||[]).map(o=>o.startsWith("^")?o.slice(1):o),inputs:[],children:[],inputParams:{},attrParams:{},rawAttrs:t.attr,outputs:e.outputs};return e.inputs!=null&&(r.inputParams=e.inputs.reduce((o,s)=>(o[s.name]={type:s.type,inputIndexStart:s.start,inputIndexEnd:s.end},o),{})),e.attrs!=null&&(r.attrParams=e.attrs.reduce((o,s)=>{let i=s.type,a;switch(s.type){case"string":a=Q1(t.attr,s.tfName,s.defaultValue),a===void 0&&s.tfDeprecatedName&&(a=Q1(t.attr,s.tfDeprecatedName,s.defaultValue));break;case"string[]":a=sE(t.attr,s.tfName,s.defaultValue),a===void 0&&s.tfDeprecatedName&&(a=sE(t.attr,s.tfDeprecatedName,s.defaultValue));break;case"number":a=eE(t.attr,s.tfName,s.defaultValue||0),a===void 0&&s.tfDeprecatedName&&(a=eE(t.attr,s.tfDeprecatedName,s.defaultValue));break;case"number[]":a=oE(t.attr,s.tfName,s.defaultValue),a===void 0&&s.tfDeprecatedName&&(a=oE(t.attr,s.tfDeprecatedName,s.defaultValue));break;case"bool":a=J1(t.attr,s.tfName,s.defaultValue),a===void 0&&s.tfDeprecatedName&&(a=J1(t.attr,s.tfDeprecatedName,s.defaultValue));break;case"bool[]":a=aE(t.attr,s.tfName,s.defaultValue),a===void 0&&s.tfDeprecatedName&&(a=aE(t.attr,s.tfDeprecatedName,s.defaultValue));break;case"shape":a=rE(t.attr,s.tfName,s.defaultValue),a===void 0&&s.tfDeprecatedName&&(a=rE(t.attr,s.tfDeprecatedName,s.defaultValue));break;case"shape[]":a=iE(t.attr,s.tfName,s.defaultValue),a===void 0&&s.tfDeprecatedName&&(a=iE(t.attr,s.tfDeprecatedName,s.defaultValue));break;case"dtype":a=tE(t.attr,s.tfName,s.defaultValue),a===void 0&&s.tfDeprecatedName&&(a=tE(t.attr,s.tfDeprecatedName,s.defaultValue));break;case"dtype[]":a=nE(t.attr,s.tfName,s.defaultValue),a===void 0&&s.tfDeprecatedName&&(a=nE(t.attr,s.tfDeprecatedName,s.defaultValue));break;case"func":a=x9(t.attr,s.tfName,s.defaultValue),a===void 0&&s.tfDeprecatedName&&(a=x9(t.attr,s.tfDeprecatedName,s.defaultValue));break;case"tensor":case"tensors":break;default:throw new Error(`Unsupported param type: ${s.type} for op: ${t.op}`)}return o[s.name]={value:a,type:i},o},{})),r}mapFunction(t){let e=t.nodeDef,r=[],o=[],s={};e!=null&&(s=e.reduce((p,f)=>(p[f.name]=this.mapNode(f),f.op==="Const"&&o.push(p[f.name]),p),{}));let i=[],a=[];t.signature.inputArg.forEach(p=>{let[f]=va(p.name),d={name:f,op:"Placeholder",inputs:[],inputNames:[],category:"graph",inputParams:{},attrParams:{dtype:{value:zP(p.type),type:"dtype"}},children:[]};d.signatureKey=p.name,i.push(d),s[f]=d}),Object.keys(s).forEach(p=>{let f=s[p];f.inputNames.forEach((d,h)=>{let[m,,g]=va(d),x=s[m];if(x.outputs!=null){let b=x.outputs.indexOf(g);if(b!==-1){let w=`${m}:${b}`;f.inputNames[h]=w}}f.inputs.push(x),x.children.push(f)})});let c=t.ret;t.signature.outputArg.forEach(p=>{let[f,d]=va(c[p.name]),h=s[f];h!=null&&(h.defaultOutput=d,a.push(h))});let u=this.mapArgsToSignature(t);return{nodes:s,inputs:i,outputs:a,weights:o,placeholders:r,signature:u}}mapArgsToSignature(t){return{methodName:t.signature.name,inputs:t.signature.inputArg.reduce((e,r)=>(e[r.name]=this.mapArgToTensorInfo(r),e),{}),outputs:t.signature.outputArg.reduce((e,r)=>(e[r.name]=this.mapArgToTensorInfo(r,t.ret),e),{})}}mapArgToTensorInfo(t,e){let r=t.name;return e!=null&&(r=e[r]),{name:r,dtype:t.type}}}});var lE,v9=F(()=>{"use strict";nr();VP();lE=class{constructor(t,e,r){this.node=t,this.tensorMap=e,this.context=r,this.inputs=[],this.attrs={},this.inputs=t.inputNames.map(o=>this.getInput(o)),t.rawAttrs!=null&&(this.attrs=Object.keys(t.rawAttrs).reduce((o,s)=>(o[s]=this.getAttr(s),o),{}))}getInput(t){return mr(t,this.tensorMap,this.context)}getAttr(t,e){let r=this.node.rawAttrs[t];if(r.tensor!=null)return mr(t,this.tensorMap,this.context);if(r.i!=null||r.f!=null)return eE(this.node.rawAttrs,t,e);if(r.s!=null)return Q1(this.node.rawAttrs,t,e);if(r.b!=null)return J1(this.node.rawAttrs,t,e);if(r.shape!=null)return rE(this.node.rawAttrs,t,e);if(r.type!=null)return tE(this.node.rawAttrs,t,e);if(r.list!=null){if(r.list.i!=null||r.list.f!=null)return oE(this.node.rawAttrs,t,e);if(r.list.s!=null)return sE(this.node.rawAttrs,t,e);if(r.list.shape!=null)return iE(this.node.rawAttrs,t,e);if(r.list.b!=null)return aE(this.node.rawAttrs,t,e);if(r.list.type!=null)return nE(this.node.rawAttrs,t,e)}return e}}});var $t={};_t($t,{OP_SCOPE_SUFFIX:()=>OT,abs:()=>fn,acos:()=>a0,acosh:()=>l0,add:()=>ae,addN:()=>sO,all:()=>lm,any:()=>Sf,argMax:()=>sa,argMin:()=>c0,asin:()=>u0,asinh:()=>p0,atan:()=>f0,atan2:()=>d0,atanh:()=>h0,avgPool:()=>Gu,avgPool3d:()=>x0,basicLSTMCell:()=>mO,batchNorm:()=>aa,batchNorm2d:()=>b0,batchNorm3d:()=>v0,batchNorm4d:()=>w0,batchToSpaceND:()=>Wu,bincount:()=>C0,bitwiseAnd:()=>xO,booleanMaskAsync:()=>eq,broadcastArgs:()=>yO,broadcastTo:()=>la,buffer:()=>Pe,cast:()=>fe,ceil:()=>I0,clipByValue:()=>pr,clone:()=>wo,complex:()=>Oo,concat:()=>Tt,concat1d:()=>S0,concat2d:()=>T0,concat3d:()=>E0,concat4d:()=>N0,conv1d:()=>pm,conv2d:()=>Po,conv2dTranspose:()=>fm,conv3d:()=>D0,conv3dTranspose:()=>k0,cos:()=>Hu,cosh:()=>dm,cosineWindow:()=>xy,cumprod:()=>Tf,cumsum:()=>hm,denseBincount:()=>sy,depthToSpace:()=>_0,depthwiseConv2d:()=>ca,diag:()=>SO,dilation2d:()=>R0,div:()=>xe,divNoNan:()=>O0,dot:()=>F0,dropout:()=>I1,einsum:()=>qu,elu:()=>ua,enclosingPowerOfTwo:()=>S1,ensureShape:()=>kO,equal:()=>lo,erf:()=>mm,euclideanNorm:()=>L0,exp:()=>vn,expandDims:()=>Cn,expm1:()=>B0,eye:()=>Nf,fft:()=>op,fill:()=>Qs,floor:()=>da,floorDiv:()=>im,fused:()=>ap,gather:()=>ha,gatherND:()=>uq,greater:()=>_n,greaterEqual:()=>Co,ifft:()=>hc,imag:()=>Ku,image:()=>wr,inTopKAsync:()=>mq,irfft:()=>Rm,isFinite:()=>U0,isInf:()=>j0,isNaN:()=>G0,leakyRelu:()=>Xu,less:()=>fc,lessEqual:()=>ss,linalg:()=>F1,linspace:()=>PO,localResponseNormalization:()=>H0,log:()=>kr,log1p:()=>Yu,logSigmoid:()=>K0,logSoftmax:()=>xm,logSumExp:()=>Qu,logicalAnd:()=>Zr,logicalNot:()=>Ju,logicalOr:()=>bm,logicalXor:()=>Y0,losses:()=>GK,lowerBound:()=>VO,matMul:()=>st,max:()=>Dr,maxPool:()=>ep,maxPool3d:()=>Z0,maxPoolWithArgmax:()=>UO,maximum:()=>$o,mean:()=>sn,meshgrid:()=>jO,min:()=>lc,minimum:()=>Ns,mirrorPad:()=>tw,mod:()=>nw,moments:()=>kf,movingAverage:()=>nq,mul:()=>B,multiRNNCell:()=>HO,multinomial:()=>qO,neg:()=>pt,norm:()=>cc,notEqual:()=>Ii,oneHot:()=>ma,ones:()=>er,onesLike:()=>vr,op:()=>_,outerProduct:()=>KO,pad:()=>So,pad1d:()=>XO,pad2d:()=>YO,pad3d:()=>ZO,pad4d:()=>QO,pool:()=>ow,pow:()=>Yr,prelu:()=>np,print:()=>i0,prod:()=>sw,raggedGather:()=>tF,raggedRange:()=>nF,raggedTensorToTensor:()=>rF,rand:()=>oF,randomGamma:()=>mF,randomNormal:()=>Af,randomStandardNormal:()=>xF,randomUniform:()=>is,randomUniformInt:()=>yF,range:()=>ga,real:()=>dc,reciprocal:()=>cw,relu:()=>Br,relu6:()=>Im,reshape:()=>V,reverse:()=>fr,reverse1d:()=>bF,reverse2d:()=>vF,reverse3d:()=>wF,reverse4d:()=>CF,rfft:()=>sp,round:()=>Sm,rsqrt:()=>Tm,scalar:()=>Ie,scatterND:()=>oq,searchSorted:()=>uy,selu:()=>Em,separableConv2d:()=>Nm,setdiff1dAsync:()=>NF,sigmoid:()=>Pr,sign:()=>uw,signal:()=>jK,sin:()=>Dm,sinh:()=>km,slice:()=>$e,slice1d:()=>_m,slice2d:()=>dy,slice3d:()=>Am,slice4d:()=>Rf,softmax:()=>xa,softplus:()=>Ci,spaceToBatchND:()=>tp,sparse:()=>WK,sparseToDense:()=>lq,spectral:()=>UK,split:()=>dr,sqrt:()=>qt,square:()=>lt,squaredDifference:()=>Om,squeeze:()=>Qt,stack:()=>An,step:()=>ei,stridedSlice:()=>fw,string:()=>HK,sub:()=>be,sum:()=>Ee,tan:()=>dw,tanh:()=>vi,tensor:()=>Er,tensor1d:()=>Xt,tensor2d:()=>ti,tensor3d:()=>hw,tensor4d:()=>RF,tensor5d:()=>MF,tensor6d:()=>OF,tensorScatterUpdate:()=>PF,tile:()=>$r,topk:()=>xw,transpose:()=>it,truncatedNormal:()=>Fm,unique:()=>yw,unsortedSegmentSum:()=>Pm,unstack:()=>hr,upperBound:()=>BF,variable:()=>bw,where:()=>rn,whereAsync:()=>vw,zeros:()=>Kt,zerosLike:()=>ze});var zr=F(()=>{"use strict";et();});var w9,C9=F(()=>{"use strict";zr();nr();w9=(n,t,e,r=$t)=>{switch(n.op){case"BiasAdd":case"AddV2":case"Add":return[r.add(E("a",n,t,e),E("b",n,t,e))];case"AddN":return[r.addN(E("tensors",n,t,e))];case"FloorMod":case"Mod":return[r.mod(E("a",n,t,e),E("b",n,t,e))];case"Mul":return[r.mul(E("a",n,t,e),E("b",n,t,e))];case"RealDiv":case"Div":return[r.div(E("a",n,t,e),E("b",n,t,e))];case"DivNoNan":return[r.divNoNan(E("a",n,t,e),E("b",n,t,e))];case"FloorDiv":return[r.floorDiv(E("a",n,t,e),E("b",n,t,e))];case"Sub":return[r.sub(E("a",n,t,e),E("b",n,t,e))];case"Minimum":return[r.minimum(E("a",n,t,e),E("b",n,t,e))];case"Maximum":return[r.maximum(E("a",n,t,e),E("b",n,t,e))];case"Pow":return[r.pow(E("a",n,t,e),E("b",n,t,e))];case"SquaredDifference":return[r.squaredDifference(E("a",n,t,e),E("b",n,t,e))];default:throw TypeError(`Node type ${n.op} is not implemented`)}}});var I9,S9=F(()=>{"use strict";zr();nr();I9=(n,t,e,r=$t)=>{switch(n.op){case"Abs":case"ComplexAbs":return[r.abs(E("x",n,t,e))];case"Acos":return[r.acos(E("x",n,t,e))];case"Acosh":return[r.acosh(E("x",n,t,e))];case"Asin":return[r.asin(E("x",n,t,e))];case"Asinh":return[r.asinh(E("x",n,t,e))];case"Atan":return[r.atan(E("x",n,t,e))];case"Atan2":return[r.atan2(E("x",n,t,e),E("y",n,t,e))];case"Atanh":return[r.atanh(E("x",n,t,e))];case"Ceil":return[r.ceil(E("x",n,t,e))];case"Complex":return[r.complex(E("real",n,t,e),E("imag",n,t,e))];case"Cos":return[r.cos(E("x",n,t,e))];case"Cosh":return[r.cosh(E("x",n,t,e))];case"Elu":return[r.elu(E("x",n,t,e))];case"Erf":return[r.erf(E("x",n,t,e))];case"Exp":return[r.exp(E("x",n,t,e))];case"Expm1":return[r.expm1(E("x",n,t,e))];case"Floor":return[r.floor(E("x",n,t,e))];case"Log":return[r.log(E("x",n,t,e))];case"Log1p":return[r.log1p(E("x",n,t,e))];case"Imag":return[r.imag(E("x",n,t,e))];case"Neg":return[r.neg(E("x",n,t,e))];case"Reciprocal":return[r.reciprocal(E("x",n,t,e))];case"Real":return[r.real(E("x",n,t,e))];case"Relu":return[r.relu(E("x",n,t,e))];case"Round":return[r.round(E("x",n,t,e))];case"Selu":return[r.selu(E("x",n,t,e))];case"Sigmoid":return[r.sigmoid(E("x",n,t,e))];case"Sin":return[r.sin(E("x",n,t,e))];case"Sign":return[r.sign(E("x",n,t,e))];case"Sinh":return[r.sinh(E("x",n,t,e))];case"Softplus":return[r.softplus(E("x",n,t,e))];case"Sqrt":return[r.sqrt(E("x",n,t,e))];case"Square":return[r.square(E("x",n,t,e))];case"Tanh":return[r.tanh(E("x",n,t,e))];case"Tan":return[r.tan(E("x",n,t,e))];case"ClipByValue":return[r.clipByValue(E("x",n,t,e),E("clipValueMin",n,t,e),E("clipValueMax",n,t,e))];case"Relu6":return[r.relu6(E("x",n,t,e))];case"Rsqrt":return[r.rsqrt(mr(n.inputNames[0],t,e))];case"LeakyRelu":return[r.leakyRelu(E("x",n,t,e),E("alpha",n,t,e))];case"Prelu":return[r.prelu(E("x",n,t,e),E("alpha",n,t,e))];case"IsNan":return[r.isNaN(mr(n.inputNames[0],t,e))];case"IsInf":return[r.isInf(mr(n.inputNames[0],t,e))];case"IsFinite":return[r.isFinite(mr(n.inputNames[0],t,e))];default:throw TypeError(`Node type ${n.op} is not implemented`)}}});function ks(n,t,e=""){if(!(typeof n=="number"||typeof t=="number")){C.assert(n.length===t.length,()=>e+` Shapes ${n} and ${t} must match`);for(let r=0;r<n.length;r++){let o=n[r],s=t[r];C.assert(o<0||s<0||o===s,()=>e+` Shapes ${n} and ${t} must match`)}}}function T9(n){return!(typeof n=="number"||n.some(t=>t<0))}function Cy(n,t,e){let r=cE(n,e),o=!T9(r);if(o&&t.length===0)throw new Error(`Tried to calculate elements of an empty list with non-fully-defined elementShape: ${r}`);if(o&&t.forEach(s=>{r=cE(s.shape,r)}),!T9(r))throw new Error(`Non-fully-defined elementShape: ${r}`);return r}function cE(n,t){if(typeof n=="number")return t;if(typeof t=="number")return n;if(n.length!==t.length)throw new Error(`Incompatible ranks during merge: ${n} vs. ${t}`);let e=[];for(let r=0;r<n.length;++r){let o=n[r],s=t[r];if(o>=0&&s>=0&&o!==s)throw new Error(`Incompatible shape during merge: ${n} vs. ${t}`);e[r]=o>=0?o:s}return e}var UP=F(()=>{"use strict";N();});var uE,E9=F(()=>{"use strict";N();UP();uE=class{constructor(t,e,r,o,s,i,a){this.name=t,this.dtype=e,this.maxSize=r,this.elementShape=o,this.identicalElementShapes=s,this.dynamicSize=i,this.clearAfterRead=a,this.tensors=[],this.closed_=!1,this.idTensor=Ie(0),yn(this.idTensor)}get id(){return this.idTensor.id}get closed(){return this.closed_}clearAndClose(t){this.tensors.forEach(e=>{(t==null||!t.has(e.tensor.id))&&e.tensor.dispose()}),this.tensors=[],this.closed_=!0,this.idTensor.dispose()}size(){return this.tensors.length}read(t){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(t<0||t>=this.size())throw new Error(`Tried to read from index ${t}, but array size is: ${this.size()}`);let e=this.tensors[t];if(e.cleared)throw new Error(`TensorArray ${this.name}: Could not read index ${t} twice because it was cleared after a previous read (perhaps try setting clear_after_read = false?).`);return this.clearAfterRead&&(e.cleared=!0),e.read=!0,e.tensor}readMany(t){return t.map(e=>this.read(e))}write(t,e){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(t<0||!this.dynamicSize&&t>=this.maxSize)throw new Error(`Tried to write to index ${t}, but array is not resizeable and size is: ${this.maxSize}`);let r=this.tensors[t]||{};if(e.dtype!==this.dtype)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${t},
          because the value dtype is ${e.dtype}, but TensorArray dtype is ${this.dtype}.`);if(this.size()===0&&(this.elementShape==null||this.elementShape.length===0)&&(this.elementShape=e.shape),ks(this.elementShape,e.shape,`TensorArray ${this.name}: Could not write to TensorArray index ${t}.`),r.read)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${t}, because it has already been read.`);if(r.written)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${t}, because it has already been written.`);r.tensor=e,yn(e),r.written=!0,this.tensors[t]=r}writeMany(t,e){if(t.length!==e.length)throw new Error(`TensorArray ${this.name}: could not write multiple tensors,because the index size: ${t.length} is not the same as tensors size: ${e.length}.`);t.forEach((r,o)=>this.write(r,e[o]))}gather(t,e){if(e&&e!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but gather requested dtype ${e}`);if(t)t=t.slice(0,this.size());else{t=[];for(let o=0;o<this.size();o++)t.push(o)}if(t.length===0)return Er([],[0].concat(this.elementShape));let r=this.readMany(t);return ks(this.elementShape,r[0].shape,"TensorArray shape mismatch: "),An(r,0)}concat(t){if(t&&t!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but concat requested dtype ${t}`);if(this.size()===0)return Er([],[0].concat(this.elementShape));let e=[];for(let o=0;o<this.size();o++)e.push(o);let r=this.readMany(e);return ks(this.elementShape,r[0].shape,`TensorArray shape mismatch: tensor array shape (${this.elementShape}) vs first tensor shape (${r[0].shape})`),Tt(r,0)}scatter(t,e){if(e.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${e.dtype}`);if(t.length!==e.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${t.length} vs. ${e.shape[0]}`);let r=Math.max(...t);if(!this.dynamicSize&&r>=this.maxSize)throw new Error(`Max index must be < array size (${r}  vs. ${this.maxSize})`);this.writeMany(t,hr(e,0))}split(t,e){if(e.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${e.dtype}`);let r=0,o=t.map(l=>(r+=l,r));if(r!==e.shape[0])throw new Error(`Expected sum of lengths to be equal to
          tensor.shape[0], but sum of lengths is
        ${r}, and tensor's shape is: ${e.shape}`);if(!this.dynamicSize&&t.length!==this.maxSize)throw new Error(`TensorArray's size is not equal to the size of lengths (${this.maxSize} vs. ${t.length}), and the TensorArray is not marked as dynamically resizeable`);let s=r===0?0:e.size/r,i=[];K(()=>{e=V(e,[1,r,s]);for(let l=0;l<t.length;++l){let u=[0,l===0?0:o[l-1],0],p=[1,t[l],s];i[l]=V($e(e,u,p),this.elementShape)}return i});let a=[];for(let l=0;l<t.length;l++)a[l]=l;this.writeMany(a,i)}}});function N9(n,t,e){let r=n.dtype;if(n.shape.length<1)throw new Error(`Tensor must be at least a vector, but saw shape: ${n.shape}`);if(n.dtype!==e)throw new Error(`Invalid data types; op elements ${n.dtype}, but list elements ${e}`);let o=n.shape.slice(1);ks(o,t,"TensorList shape mismatch: ");let s=hr(n);return new Iy(s,t,r)}function D9(n,t,e,r){return new Iy([],n,t,r)}function k9(n,t,e,r){if(t.length!==n.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${t.length} vs. ${n.shape[0]}`);let o=Math.max(...t);if(r!=null&&r!==-1&&o>=r)throw new Error(`Max index must be < array size (${o}  vs. ${r})`);let s=new Iy([],e,n.dtype,r),i=hr(n,0);return t.forEach((a,l)=>{s.setItem(a,i[l])}),s}function _9(n,t,e){let r=0,o=t.map(u=>(r+=u,r));if(r!==n.shape[0])throw new Error(`Expected sum of lengths to be equal to
          tensor.shape[0], but sum of lengths is
        ${r}, and tensor's shape is: ${n.shape}`);let s=n.shape.slice(1),i=cE(s,e),a=r===0?0:n.size/r,l=K(()=>{let u=[];n=V(n,[1,r,a]);for(let p=0;p<t.length;++p){let d=[0,p===0?0:o[p-1],0],h=[1,t[p],a];u[p]=V($e(n,d,h),i)}return n.dispose(),u}),c=new Iy([],e,n.dtype,t.length);for(let u=0;u<l.length;u++)c.setItem(u,l[u]);return c}var Iy,A9=F(()=>{"use strict";N();UP();Iy=class n{get id(){return this.idTensor.id}constructor(t,e,r,o=-1){this.tensors=t,this.elementShape=e,this.elementDtype=r,t?.forEach(s=>{if(r!==s.dtype)throw new Error(`Invalid data types; op elements ${r}, but list elements ${s.dtype}`);ks(e,s.shape,"TensorList shape mismatch: "),yn(s)}),this.idTensor=Ie(0),this.maxNumElements=o,yn(this.idTensor)}copy(){return new n([...this.tensors],this.elementShape,this.elementDtype)}clearAndClose(t){this.tensors.forEach(e=>{(t==null||!t.has(e.id))&&e.dispose()}),this.tensors.length=0,this.idTensor.dispose()}size(){return this.tensors.length}stack(t,e,r=-1){if(e!==this.elementDtype)throw new Error(`Invalid data types; op elements ${e}, but list elements ${this.elementDtype}`);if(r!==-1&&this.tensors.length!==r)throw new Error(`Operation expected a list with ${r} elements but got a list with ${this.tensors.length} elements.`);ks(t,this.elementShape,"TensorList shape mismatch: ");let o=Cy(this.elementShape,this.tensors,t);return K(()=>{let s=this.tensors.map(i=>V(i,o));return An(s,0)})}popBack(t,e){if(e!==this.elementDtype)throw new Error(`Invalid data types; op elements ${e}, but list elements ${this.elementDtype}`);if(this.size()===0)throw new Error("Trying to pop from an empty list.");let r=Cy(this.elementShape,this.tensors,t),o=this.tensors.pop();return o.kept=!1,ks(o.shape,t,"TensorList shape mismatch: "),V(o,r)}pushBack(t){if(t.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${t.dtype}, but list elements ${this.elementDtype}`);if(ks(t.shape,this.elementShape,"TensorList shape mismatch: "),this.maxNumElements===this.size())throw new Error("Trying to push element into a full list.");yn(t),this.tensors.push(t)}resize(t){if(t<0)throw new Error(`TensorListResize expects size to be non-negative. Got: ${t}`);if(this.maxNumElements!==-1&&t>this.maxNumElements)throw new Error(`TensorListResize input size ${t} is greater maxNumElement ${this.maxNumElements}.`);let e=new n([],this.elementShape,this.elementDtype,this.maxNumElements);e.tensors.length=t;for(let r=0;r<Math.min(this.tensors.length,t);++r)e.tensors[r]=this.tensors[r];return e}getItem(t,e,r){if(r!==this.elementDtype)throw new Error(`Invalid data types; op elements ${r}, but list elements ${this.elementDtype}`);if(t<0||t>this.tensors.length)throw new Error(`Trying to access element ${t} in a list with ${this.tensors.length} elements.`);if(this.tensors[t]==null)throw new Error(`element at index ${t} is null.`);ks(this.tensors[t].shape,e,"TensorList shape mismatch: ");let o=Cy(this.elementShape,this.tensors,e);return V(this.tensors[t],o)}setItem(t,e){if(e.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${e.dtype}, but list elements ${this.elementDtype}`);if(t<0||this.maxNumElements!==-1&&t>=this.maxNumElements)throw new Error(`Trying to set element ${t} in a list with max ${this.maxNumElements} elements.`);ks(this.elementShape,e.shape,"TensorList shape mismatch: "),yn(e),this.tensors[t]!=null&&(this.tensors[t].kept=!1),this.tensors[t]=e}gather(t,e,r){if(e!==this.elementDtype)throw new Error(`Invalid data types; op elements ${e}, but list elements ${this.elementDtype}`);ks(this.elementShape,r,"TensorList shape mismatch: "),t=t.slice(0,this.size());let o=Cy(this.elementShape,this.tensors,r);return t.length===0?Er([],[0].concat(o)):K(()=>{let s=t.map(i=>V(this.tensors[i],o));return An(s,0)})}concat(t,e){if(t&&t!==this.elementDtype)throw new Error(`TensorList dtype is ${this.elementDtype} but concat requested dtype ${t}`);ks(this.elementShape,e,"TensorList shape mismatch: ");let r=Cy(this.elementShape,this.tensors,e);return this.size()===0?Er([],[0].concat(r)):K(()=>{let o=this.tensors.map(s=>V(s,r));return Tt(o,0)})}}});var R9,M9=F(()=>{"use strict";N();E9();A9();nr();R9=(n,t,e)=>ee(void 0,null,function*(){switch(n.op){case"If":case"StatelessIf":{let r=E("thenBranch",n,t,e),o=E("elseBranch",n,t,e),s=E("cond",n,t,e),i=E("args",n,t,e);return(yield s.data())[0]?e.functionMap[r].executeFunctionAsync(i,e.tensorArrayMap,e.tensorListMap):e.functionMap[o].executeFunctionAsync(i,e.tensorArrayMap,e.tensorListMap)}case"While":case"StatelessWhile":{let r=E("body",n,t,e),o=E("cond",n,t,e),s=E("args",n,t,e),i=yield e.functionMap[o].executeFunctionAsync(s,e.tensorArrayMap,e.tensorListMap),a=s.map(u=>u.id),l=yield i[0].data();i.forEach(u=>{!u.kept&&a.indexOf(u.id)===-1&&u.dispose()});let c=s;for(;l[0];){let u=c;c=yield e.functionMap[r].executeFunctionAsync(c,e.tensorArrayMap,e.tensorListMap);let p=c.map(d=>d.id);u.forEach(d=>{!d.kept&&a.indexOf(d.id)===-1&&p.indexOf(d.id)===-1&&d.dispose()});let f=yield e.functionMap[o].executeFunctionAsync(c,e.tensorArrayMap,e.tensorListMap);l=yield f[0].data(),f.forEach(d=>{!d.kept&&a.indexOf(d.id)===-1&&p.indexOf(d.id)===-1&&d.dispose()})}return c}case"LoopCond":{let r=E("pred",n,t,e);return[wa(r)]}case"Switch":{let r=E("pred",n,t,e),o=E("data",n,t,e);return o.kept||(o=wa(o)),(yield r.data())[0]?[void 0,o]:[o,void 0]}case"Merge":{let r=n.inputNames.find(o=>mr(o,t,e)!==void 0);if(r){let o=mr(r,t,e);return[wa(o)]}return}case"Enter":{let r=E("frameName",n,t,e),o=E("tensor",n,t,e);return e.enterFrame(r),[wa(o)]}case"Exit":{let r=E("tensor",n,t,e);return e.exitFrame(),[wa(r)]}case"NextIteration":{let r=E("tensor",n,t,e);return e.nextIteration(),[wa(r)]}case"TensorArrayV3":{let r=E("size",n,t,e),o=E("dtype",n,t,e),s=E("elementShape",n,t,e),i=E("dynamicSize",n,t,e),a=E("clearAfterRead",n,t,e),l=E("identicalElementShapes",n,t,e),c=E("name",n,t,e),u=new uE(c,o,r,s,l,i,a);return e.addTensorArray(u),[u.idTensor,Ie(1)]}case"TensorArrayWriteV3":{let r=E("tensorArrayId",n,t,e),o=E("index",n,t,e),s=E("tensor",n,t,e),i=e.getTensorArray(r.id);return i.write(o,s),[i.idTensor]}case"TensorArrayReadV3":{let r=E("tensorArrayId",n,t,e),o=E("index",n,t,e);return[e.getTensorArray(r.id).read(o)]}case"TensorArrayGatherV3":{let r=E("tensorArrayId",n,t,e),o=E("indices",n,t,e),s=E("dtype",n,t,e);return[e.getTensorArray(r.id).gather(o,s)]}case"TensorArrayScatterV3":{let r=E("tensorArrayId",n,t,e),o=E("indices",n,t,e),s=E("tensor",n,t,e),i=e.getTensorArray(r.id);return i.scatter(o,s),[i.idTensor]}case"TensorArrayConcatV3":{let r=E("tensorArrayId",n,t,e),o=e.getTensorArray(r.id),s=E("dtype",n,t,e);return[o.concat(s)]}case"TensorArraySplitV3":{let r=E("tensorArrayId",n,t,e),o=E("tensor",n,t,e),s=E("lengths",n,t,e),i=e.getTensorArray(r.id);return i.split(s,o),[i.idTensor]}case"TensorArraySizeV3":{let r=E("tensorArrayId",n,t,e),o=e.getTensorArray(r.id);return[Ie(o.size(),"int32")]}case"TensorArrayCloseV3":{let r=E("tensorArrayId",n,t,e),o=e.getTensorArray(r.id);return o.clearAndClose(),[o.idTensor]}case"TensorListSetItem":{let r=E("tensorListId",n,t,e),o=E("index",n,t,e),s=E("tensor",n,t,e),i=e.getTensorList(r.id);return i.setItem(o,s),[i.idTensor]}case"TensorListGetItem":{let r=E("tensorListId",n,t,e),o=E("index",n,t,e),s=E("elementShape",n,t,e),i=E("elementDType",n,t,e);return[e.getTensorList(r.id).getItem(o,s,i)]}case"TensorListScatterV2":case"TensorListScatter":{let r=E("indices",n,t,e),o=E("tensor",n,t,e),s=E("elementShape",n,t,e),i=E("numElements",n,t,e),a=k9(o,r,s,i);return e.addTensorList(a),[a.idTensor]}case"TensorListReserve":case"EmptyTensorList":{let r=E("elementShape",n,t,e),o=E("elementDType",n,t,e),s;n.op==="TensorListReserve"?s="numElements":s="maxNumElements";let i=E(s,n,t,e),a=n.op==="TensorListReserve"?-1:i,l=D9(r,o,i,a);return e.addTensorList(l),[l.idTensor]}case"TensorListGather":{let r=E("tensorListId",n,t,e),o=E("indices",n,t,e),s=E("elementShape",n,t,e),i=E("elementDType",n,t,e);return[e.getTensorList(r.id).gather(o,i,s)]}case"TensorListStack":{let r=E("tensorListId",n,t,e),o=E("elementShape",n,t,e),s=E("elementDType",n,t,e),i=E("numElements",n,t,e);return[e.getTensorList(r.id).stack(o,s,i)]}case"TensorListFromTensor":{let r=E("tensor",n,t,e),o=E("elementShape",n,t,e),s=E("elementDType",n,t,e),i=N9(r,o,s);return e.addTensorList(i),[i.idTensor]}case"TensorListConcat":case"TensorListConcatV2":{let r=E("tensorListId",n,t,e),o=e.getTensorList(r.id),s=E("dtype",n,t,e),i=E("elementShape",n,t,e);return[o.concat(s,i)]}case"TensorListPushBack":{let r=E("tensorListId",n,t,e),o=E("tensor",n,t,e),s=e.getTensorList(r.id);return s.pushBack(o),[s.idTensor]}case"TensorListPopBack":{let r=E("tensorListId",n,t,e),o=E("elementShape",n,t,e),s=E("elementDType",n,t,e);return[e.getTensorList(r.id).popBack(o,s)]}case"TensorListSplit":{let r=E("tensor",n,t,e),o=E("elementShape",n,t,e),s=E("lengths",n,t,e),i=_9(r,s,o);return e.addTensorList(i),[i.idTensor]}case"TensorListLength":{let r=E("tensorListId",n,t,e),o=e.getTensorList(r.id);return[Ie(o.size(),"int32")]}case"TensorListResize":{let r=E("tensorListId",n,t,e),o=E("size",n,t,e),i=e.getTensorList(r.id).resize(o);return e.addTensorList(i),[i.idTensor]}default:throw TypeError(`Node type ${n.op} is not implemented`)}})});function O9(n,t,e){let[r,o]=E("fusedOps",n,t,e),s=r==="biasadd",i=!s,a=o==="prelu",l=r==="fusedbatchnorm",c=E("numArgs",n,t,e);if(s){if(a&&c!==2)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!a&&s&&c!==1)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd must have one extra argument: bias.")}if(l)throw new Error("FusedConv2d and DepthwiseConv2d with FusedBatchNorm is not supported");let u=E("strides",n,t,e),p=Ew(n,t,e),f=E("dataFormat",n,t,e).toUpperCase(),d=E("dilations",n,t,e),[h,m]=E("args",n,t,e);i&&(m=h,h=void 0);let g=E("leakyreluAlpha",n,t,e);return{stride:u,pad:p,dataFormat:f,dilations:d,biasArg:h,preluArg:m,activationFunc:o,leakyreluAlpha:g}}var F9,P9=F(()=>{"use strict";zr();nr();F9=(n,t,e,r=$t)=>{switch(n.op){case"Conv1D":{let o=E("stride",n,t,e),s=E("pad",n,t,e),i=E("dataFormat",n,t,e).toUpperCase(),a=E("dilation",n,t,e);return[r.conv1d(E("x",n,t,e),E("filter",n,t,e),o,s,i,a)]}case"Conv2D":{let o=E("strides",n,t,e),s=Ew(n,t,e),i=E("dataFormat",n,t,e).toUpperCase(),a=E("dilations",n,t,e);return[r.conv2d(E("x",n,t,e),E("filter",n,t,e),[o[1],o[2]],s,i,[a[1],a[2]])]}case"_FusedConv2D":{let{stride:o,pad:s,dataFormat:i,dilations:a,biasArg:l,preluArg:c,activationFunc:u,leakyreluAlpha:p}=O9(n,t,e);return[r.fused.conv2d({x:E("x",n,t,e),filter:E("filter",n,t,e),strides:[o[1],o[2]],pad:s,dataFormat:i,dilations:[a[1],a[2]],bias:l,activation:u,preluActivationWeights:c,leakyreluAlpha:p})]}case"FusedDepthwiseConv2dNative":{let{stride:o,pad:s,dataFormat:i,dilations:a,biasArg:l,preluArg:c,activationFunc:u,leakyreluAlpha:p}=O9(n,t,e);return[r.fused.depthwiseConv2d({x:E("x",n,t,e),filter:E("filter",n,t,e),strides:[o[1],o[2]],pad:s,dataFormat:i,dilations:[a[1],a[2]],bias:l,activation:u,preluActivationWeights:c,leakyreluAlpha:p})]}case"Conv2DBackpropInput":case"Conv2dTranspose":{let o=E("outputShape",n,t,e),s=E("strides",n,t,e),i=Ew(n,t,e);return[r.conv2dTranspose(E("x",n,t,e),E("filter",n,t,e),o,[s[1],s[2]],i)]}case"DepthwiseConv2dNative":case"DepthwiseConv2d":{let o=E("strides",n,t,e),s=Ew(n,t,e),i=E("dilations",n,t,e),a=E("dataFormat",n,t,e).toUpperCase();return[r.depthwiseConv2d(E("input",n,t,e),E("filter",n,t,e),[o[1],o[2]],s,a,[i[1],i[2]])]}case"Conv3D":{let o=E("strides",n,t,e),s=E("pad",n,t,e),i=E("dataFormat",n,t,e).toUpperCase(),a=E("dilations",n,t,e);return[r.conv3d(E("x",n,t,e),E("filter",n,t,e),[o[1],o[2],o[3]],s,i,[a[1],a[2],a[3]])]}case"AvgPool":{let o=E("strides",n,t,e),s=E("pad",n,t,e),i=E("kernelSize",n,t,e);return[r.avgPool(E("x",n,t,e),[i[1],i[2]],[o[1],o[2]],s)]}case"MaxPool":{let o=E("strides",n,t,e),s=E("pad",n,t,e),i=E("kernelSize",n,t,e);return[r.maxPool(E("x",n,t,e),[i[1],i[2]],[o[1],o[2]],s)]}case"MaxPoolWithArgmax":{let o=E("strides",n,t,e),s=E("pad",n,t,e),i=E("kernelSize",n,t,e),a=E("includeBatchInIndex",n,t,e),{result:l,indexes:c}=r.maxPoolWithArgmax(E("x",n,t,e),[i[1],i[2]],[o[1],o[2]],s,a);return[l,c]}case"AvgPool3D":{let o=E("strides",n,t,e),s=E("pad",n,t,e),i=E("kernelSize",n,t,e);return[r.avgPool3d(E("x",n,t,e),[i[1],i[2],i[3]],[o[1],o[2],o[3]],s)]}case"MaxPool3D":{let o=E("strides",n,t,e),s=E("pad",n,t,e),i=E("kernelSize",n,t,e);return[r.maxPool3d(E("x",n,t,e),[i[1],i[2],i[3]],[o[1],o[2],o[3]],s)]}case"Dilation2D":{let o=E("strides",n,t,e),s=E("pad",n,t,e),i=E("dilations",n,t,e),a=o[1],l=o[2],c=i[1],u=i[2];return[r.dilation2d(E("x",n,t,e),E("filter",n,t,e),[a,l],s,[c,u],"NHWC")]}default:throw TypeError(`Node type ${n.op} is not implemented`)}}});var $9,L9=F(()=>{"use strict";zr();nr();$9=(n,t,e,r=$t)=>{switch(n.op){case"Fill":{let o=E("shape",n,t,e),s=E("dtype",n,t,e),i=E("value",n,t,e);return[r.fill(o,i,s)]}case"LinSpace":{let o=E("start",n,t,e),s=E("stop",n,t,e),i=E("num",n,t,e);return[r.linspace(o,s,i)]}case"Multinomial":{let o=E("logits",n,t,e),s=E("numSamples",n,t,e),i=E("seed",n,t,e);return[r.multinomial(o,s,i)]}case"OneHot":{let o=E("indices",n,t,e),s=E("depth",n,t,e),i=E("onValue",n,t,e),a=E("offValue",n,t,e),l=E("dtype",n,t,e);return[r.oneHot(o,s,i,a,l)]}case"Ones":return[r.ones(E("shape",n,t,e),E("dtype",n,t,e))];case"OnesLike":return[r.onesLike(E("x",n,t,e))];case"RandomStandardNormal":return[r.randomStandardNormal(E("shape",n,t,e),E("dtype",n,t,e),E("seed",n,t,e))];case"RandomUniform":return[r.randomUniform(E("shape",n,t,e),E("minval",n,t,e),E("maxval",n,t,e),E("dtype",n,t,e))];case"RandomUniformInt":return[r.randomUniformInt(E("shape",n,t,e),E("minval",n,t,e),E("maxval",n,t,e),E("seed",n,t,e))];case"Range":{let o=E("start",n,t,e),s=E("stop",n,t,e),i=E("step",n,t,e);return[r.range(o,s,i,E("dtype",n,t,e))]}case"TruncatedNormal":{let o=E("shape",n,t,e),s=E("mean",n,t,e),i=E("stdDev",n,t,e),a=E("seed",n,t,e);return[r.truncatedNormal(o,s,i,E("dtype",n,t,e),a)]}case"Zeros":return[r.zeros(E("shape",n,t,e),E("dtype",n,t,e))];case"ZerosLike":return[r.zerosLike(E("x",n,t,e))];default:throw TypeError(`Node type ${n.op} is not implemented`)}}});function jP(n,t,e){let r=E("boxes",n,t,e),o=E("scores",n,t,e),s=E("maxOutputSize",n,t,e),i=E("iouThreshold",n,t,e),a=E("scoreThreshold",n,t,e),l=E("softNmsSigma",n,t,e);return{boxes:r,scores:o,maxOutputSize:s,iouThreshold:i,scoreThreshold:a,softNmsSigma:l}}var B9,z9=F(()=>{"use strict";zr();nr();B9=(s,i,a,l,...c)=>ee(void 0,[s,i,a,l,...c],function*(n,t,e,r,o=$t){switch(n.op){case"NonMaxSuppressionV5":{let{boxes:u,scores:p,maxOutputSize:f,iouThreshold:d,scoreThreshold:h,softNmsSigma:m}=jP(n,t,e),g=yield o.image.nonMaxSuppressionWithScoreAsync(u,p,f,d,h,m);return[g.selectedIndices,g.selectedScores]}case"NonMaxSuppressionV4":{let{boxes:u,scores:p,maxOutputSize:f,iouThreshold:d,scoreThreshold:h}=jP(n,t,e),m=E("padToMaxOutputSize",n,t,e),g=yield o.image.nonMaxSuppressionPaddedAsync(u,p,f,d,h,m);return[g.selectedIndices,g.validOutputs]}case"NonMaxSuppressionV3":case"NonMaxSuppressionV2":{let{boxes:u,scores:p,maxOutputSize:f,iouThreshold:d,scoreThreshold:h}=jP(n,t,e);return[yield o.image.nonMaxSuppressionAsync(u,p,f,d,h)]}case"Where":{let u=o.cast(E("condition",n,t,e),"bool"),p=[yield o.whereAsync(u)];return u.dispose(),p}case"ListDiff":return o.setdiff1dAsync(E("x",n,t,e),E("y",n,t,e));default:throw TypeError(`Node type ${n.op} is not implemented`)}})});var V9,U9=F(()=>{"use strict";zr();nr();V9=(n,t,e,r=$t)=>{switch(n.op){case"LowerBound":{let o=E("sortedSequence",n,t,e),s=E("values",n,t,e);return[r.lowerBound(o,s)]}case"TopKV2":{let o=E("x",n,t,e),s=E("k",n,t,e),i=E("sorted",n,t,e),a=r.topk(o,s,i);return[a.values,a.indices]}case"UpperBound":{let o=E("sortedSequence",n,t,e),s=E("values",n,t,e);return[r.upperBound(o,s)]}case"Unique":{let o=E("x",n,t,e),s=r.unique(o);return[s.values,s.indices]}case"UniqueV2":{let o=E("x",n,t,e),s=E("axis",n,t,e),i=r.unique(o,s);return[i.values,i.indices]}default:throw TypeError(`Node type ${n.op} is not implemented`)}}});var j9,G9=F(()=>{"use strict";zr();nr();j9=(n,t,e,r=$t)=>{switch(n.op){case"Const":return t[n.name];case"PlaceholderWithDefault":let o=E("default",n,t,e);return[mr(n.name,t,e)||o];case"Placeholder":return[mr(n.name,t,e)];case"Identity":case"StopGradient":case"FakeQuantWithMinMaxVars":{let u=E("x",n,t,e);return[wa(u)]}case"IdentityN":return E("x",n,t,e).map(u=>wa(u));case"Snapshot":let s=E("x",n,t,e);return[wa(s)];case"Shape":return[r.tensor1d(E("x",n,t,e).shape,"int32")];case"ShapeN":return E("x",n,t,e).map(u=>r.tensor1d(u.shape));case"Size":return[r.scalar(E("x",n,t,e).size,"int32")];case"Rank":return[r.scalar(E("x",n,t,e).rank,"int32")];case"NoOp":return[r.scalar(1)];case"Print":let i=E("x",n,t,e),a=E("data",n,t,e),l=E("message",n,t,e),c=E("summarize",n,t,e);console.warn("The graph has a tf.print() operation,usually used for debugging, which slows down performance."),console.log(l);for(let u=0;u<a.length;u++)console.log(Array.prototype.slice.call(a[u].dataSync()).slice(0,c));return[i];default:throw TypeError(`Node type ${n.op} is not implemented`)}}});var pE,W9=F(()=>{"use strict";N();zr();pE=class{get id(){return this.handle.id}constructor(t,e){this.keyDType=t,this.valueDType=e,this.handle=Ie(0),this.tensorMap=new Map,yn(this.handle)}clearAndClose(){this.tensorMap.forEach(t=>t.dispose()),this.tensorMap.clear(),this.handle.dispose()}size(){return this.tensorMap.size}tensorSize(){return Ie(this.size(),"int32")}import(t,e){return ee(this,null,function*(){this.checkKeyAndValueTensor(t,e);let r=yield t.data();return this.tensorMap.forEach(o=>o.dispose()),this.tensorMap.clear(),K(()=>{let o=hr(e),s=r.length,i=o.length;C.assert(s===i,()=>`The number of elements doesn't match, keys has ${s} elements, the values has ${i} elements.`);for(let a=0;a<s;a++){let l=r[a],c=o[a];yn(c),this.tensorMap.set(l,c)}return this.handle})})}find(t,e){return ee(this,null,function*(){this.checkKeyAndValueTensor(t,e);let r=yield t.data();return K(()=>{let o=[];for(let s=0;s<r.length;s++){let i=r[s],a=this.findWithDefault(i,e);o.push(a)}return An(o)})})}findWithDefault(t,e){let r=this.tensorMap.get(t);return r??e}checkKeyAndValueTensor(t,e){if(t.dtype!==this.keyDType)throw new Error(`Expect key dtype ${this.keyDType}, but got ${t.dtype}`);if(e.dtype!==this.valueDType)throw new Error(`Expect value dtype ${this.valueDType}, but got ${e.dtype}`)}}});var H9,q9=F(()=>{"use strict";W9();nr();H9=(n,t,e,r)=>ee(void 0,null,function*(){switch(n.op){case"HashTable":case"HashTableV2":{let o=r.getHashTableHandleByName(n.name);if(o!=null)return[o];{let s=E("keyDType",n,t,e),i=E("valueDType",n,t,e),a=new pE(s,i);return r.addHashTable(n.name,a),[a.handle]}}case"InitializeTable":case"InitializeTableV2":case"LookupTableImport":case"LookupTableImportV2":{let o=E("tableHandle",n,t,e,r),s=E("keys",n,t,e),i=E("values",n,t,e);return[yield r.getHashTableById(o.id).import(s,i)]}case"LookupTableFind":case"LookupTableFindV2":{let o=E("tableHandle",n,t,e,r),s=E("keys",n,t,e),i=E("defaultValue",n,t,e);return[yield r.getHashTableById(o.id).find(s,i)]}case"LookupTableSize":case"LookupTableSizeV2":{let o=E("tableHandle",n,t,e,r);return[r.getHashTableById(o.id).tensorSize()]}default:throw TypeError(`Node type ${n.op} is not implemented`)}})});var K9,X9=F(()=>{"use strict";zr();nr();K9=(n,t,e,r=$t)=>{switch(n.op){case"ResizeBilinear":{let o=E("images",n,t,e),s=E("size",n,t,e),i=E("alignCorners",n,t,e),a=E("halfPixelCenters",n,t,e);return[r.image.resizeBilinear(o,[s[0],s[1]],i,a)]}case"ResizeNearestNeighbor":{let o=E("images",n,t,e),s=E("size",n,t,e),i=E("alignCorners",n,t,e),a=E("halfPixelCenters",n,t,e);return[r.image.resizeNearestNeighbor(o,[s[0],s[1]],i,a)]}case"CropAndResize":{let o=E("image",n,t,e),s=E("boxes",n,t,e),i=E("boxInd",n,t,e),a=E("cropSize",n,t,e),l=E("method",n,t,e),c=E("extrapolationValue",n,t,e);return[r.image.cropAndResize(o,s,i,a,l,c)]}case"ImageProjectiveTransformV3":{let o=E("images",n,t,e),s=E("transforms",n,t,e),i=E("outputShape",n,t,e),a=E("fillValue",n,t,e),l=E("interpolation",n,t,e),c=E("fillMode",n,t,e);return[r.image.transform(o,s,l.toLowerCase(),c.toLowerCase(),a,i)]}default:throw TypeError(`Node type ${n.op} is not implemented`)}}});var Y9,Z9=F(()=>{"use strict";zr();nr();Y9=(n,t,e,r=$t)=>{switch(n.op){case"Equal":return[r.equal(E("a",n,t,e),E("b",n,t,e))];case"NotEqual":return[r.notEqual(E("a",n,t,e),E("b",n,t,e))];case"Greater":return[r.greater(E("a",n,t,e),E("b",n,t,e))];case"GreaterEqual":return[r.greaterEqual(E("a",n,t,e),E("b",n,t,e))];case"Less":return[r.less(E("a",n,t,e),E("b",n,t,e))];case"LessEqual":return[r.lessEqual(E("a",n,t,e),E("b",n,t,e))];case"LogicalAnd":return[r.logicalAnd(E("a",n,t,e),E("b",n,t,e))];case"LogicalNot":return[r.logicalNot(E("a",n,t,e))];case"LogicalOr":return[r.logicalOr(E("a",n,t,e),E("b",n,t,e))];case"Select":case"SelectV2":return[r.where(E("condition",n,t,e),E("a",n,t,e),E("b",n,t,e))];case"BitwiseAnd":return[r.bitwiseAnd(E("a",n,t,e),E("b",n,t,e))];default:throw TypeError(`Node type ${n.op} is not implemented`)}}});var Q9,J9=F(()=>{"use strict";zr();nr();Q9=(n,t,e,r=$t)=>{switch(n.op){case"BatchMatMul":case"BatchMatMulV2":case"MatMul":return[r.matMul(E("a",n,t,e),E("b",n,t,e),E("transposeA",n,t,e),E("transposeB",n,t,e))];case"Einsum":return[r.einsum(E("equation",n,t,e),...E("tensors",n,t,e))];case"Transpose":return[r.transpose(E("x",n,t,e),E("perm",n,t,e))];case"_FusedMatMul":let[o,s]=E("fusedOps",n,t,e),i=o==="biasadd",a=s==="prelu",l=E("numArgs",n,t,e),c=E("leakyreluAlpha",n,t,e);if(i){if(a&&l!==2)throw new Error("Fused MatMul with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!a&&l!==1)throw new Error("Fused MatMul with BiasAdd must have one extra argument: bias.")}let[u,p]=E("args",n,t,e);return[r.fused.matMul({a:E("a",n,t,e),b:E("b",n,t,e),transposeA:E("transposeA",n,t,e),transposeB:E("transposeB",n,t,e),bias:u,activation:s,preluActivationWeights:p,leakyreluAlpha:c})];case"MatrixBandPart":return[r.linalg.bandPart(E("a",n,t,e),E("numLower",n,t,e),E("numUpper",n,t,e))];default:throw TypeError(`Node type ${n.op} is not implemented`)}}});var eX,tX=F(()=>{"use strict";zr();nr();eX=(n,t,e,r=$t)=>{switch(n.op){case"EuclideanNorm":return[r.euclideanNorm(E("x",n,t,e),E("axis",n,t,e),E("keepDims",n,t,e))];case"FusedBatchNorm":case"FusedBatchNormV2":return[r.batchNorm(E("x",n,t,e),E("mean",n,t,e),E("variance",n,t,e),E("offset",n,t,e),E("scale",n,t,e),E("epsilon",n,t,e))];case"FusedBatchNormV3":return[r.batchNorm(E("x",n,t,e),E("mean",n,t,e),E("variance",n,t,e),E("offset",n,t,e),E("scale",n,t,e),E("epsilon",n,t,e))];case"LRN":return[r.localResponseNormalization(E("x",n,t,e),E("radius",n,t,e),E("bias",n,t,e),E("alpha",n,t,e),E("beta",n,t,e))];case"Softmax":return[r.softmax(E("x",n,t,e))];case"LogSoftmax":return[r.logSoftmax(E("x",n,t,e))];default:throw TypeError(`Node type ${n.op} is not implemented`)}}});var nX,rX=F(()=>{"use strict";zr();nr();nX=(n,t,e,r=$t)=>{switch(n.op){case"RaggedGather":{let{outputNestedSplits:o,outputDenseValues:s}=r.raggedGather(E("paramsNestedSplits",n,t,e),E("paramsDenseValues",n,t,e),E("indices",n,t,e),E("outputRaggedRank",n,t,e));return o.concat(s)}case"RaggedRange":{let{rtNestedSplits:o,rtDenseValues:s}=r.raggedRange(E("starts",n,t,e),E("limits",n,t,e),E("splits",n,t,e));return[o,s]}case"RaggedTensorToTensor":return[r.raggedTensorToTensor(E("shape",n,t,e),E("values",n,t,e),E("defaultValue",n,t,e),E("rowPartitionTensors",n,t,e),E("rowPartitionTypes",n,t,e))];default:throw TypeError(`Node type ${n.op} is not implemented`)}}});var oX,sX=F(()=>{"use strict";zr();nr();oX=(n,t,e,r=$t)=>{switch(n.op){case"Max":{let a=E("axis",n,t,e),l=E("keepDims",n,t,e);return[r.max(E("x",n,t,e),a,l)]}case"Mean":{let a=E("axis",n,t,e),l=E("keepDims",n,t,e);return[r.mean(E("x",n,t,e),a,l)]}case"Min":{let a=E("axis",n,t,e),l=E("keepDims",n,t,e);return[r.min(E("x",n,t,e),a,l)]}case"Sum":{let a=E("axis",n,t,e),l=E("keepDims",n,t,e);return[r.sum(E("x",n,t,e),a,l)]}case"All":{let a=E("axis",n,t,e),l=E("keepDims",n,t,e);return[r.all(E("x",n,t,e),a,l)]}case"Any":{let a=E("axis",n,t,e),l=E("keepDims",n,t,e);return[r.any(E("x",n,t,e),a,l)]}case"ArgMax":{let a=E("axis",n,t,e);return[r.argMax(E("x",n,t,e),a)]}case"ArgMin":{let a=E("axis",n,t,e);return[r.argMin(E("x",n,t,e),a)]}case"Prod":{let a=E("axis",n,t,e),l=E("keepDims",n,t,e);return[r.prod(E("x",n,t,e),a,l)]}case"Cumprod":{let a=E("axis",n,t,e),l=E("exclusive",n,t,e),c=E("reverse",n,t,e);return[r.cumprod(E("x",n,t,e),a,l,c)]}case"Cumsum":{let a=E("axis",n,t,e),l=E("exclusive",n,t,e),c=E("reverse",n,t,e);return[r.cumsum(E("x",n,t,e),a,l,c)]}case"Bincount":let o=E("x",n,t,e),s=E("weights",n,t,e),i=E("size",n,t,e);return[r.bincount(o,s,i)];case"DenseBincount":{let a=E("x",n,t,e),l=E("weights",n,t,e),c=E("size",n,t,e),u=E("binaryOutput",n,t,e);return[r.denseBincount(a,l,c,u)]}default:throw TypeError(`Node type ${n.op} is not implemented`)}}});var iX,aX=F(()=>{"use strict";N();zr();nr();iX=(n,t,e,r=$t)=>{switch(n.op){case"ConcatV2":case"Concat":{let o=E("n",n,t,e),s=E("axis",n,t,e),i=E("tensors",n,t,e);return i=i.slice(0,o),[r.concat(i,s)]}case"Gather":{let o=E("x",n,t,e),s=E("indices",n,t,e);return[r.gather(o,r.cast(s,"int32"),0)]}case"GatherV2":{let o=E("axis",n,t,e),s=E("batchDims",n,t,e),i=E("x",n,t,e),a=E("indices",n,t,e);return[r.gather(i,r.cast(a,"int32"),o,s)]}case"Reverse":{let o=E("dims",n,t,e),s=[];for(let a=0;a<o.length;a++)o[a]&&s.push(a);let i=E("x",n,t,e);return[r.reverse(i,s)]}case"ReverseV2":{let o=E("axis",n,t,e),s=E("x",n,t,e);return[r.reverse(s,o)]}case"Slice":{let o=E("begin",n,t,e),s=E("size",n,t,e);return[r.slice(E("x",n,t,e),o,s)]}case"StridedSlice":{let o=E("begin",n,t,e),s=E("end",n,t,e),i=E("strides",n,t,e),a=E("beginMask",n,t,e),l=E("endMask",n,t,e),c=E("ellipsisMask",n,t,e),u=E("newAxisMask",n,t,e),p=E("shrinkAxisMask",n,t,e),f=E("x",n,t,e);return[r.stridedSlice(f,o,s,i,a,l,c,u,p)]}case"Pack":return K(()=>{let o=E("axis",n,t,e),s=E("tensors",n,t,e),i=s[0].shape,a=r.squeeze(s[0]).shape,l=s.map(c=>{let u=C.arraysEqual(c.shape,i);if(!u&&!C.arraysEqual(r.squeeze(c).shape,a))throw new Error("the input tensors shape does not match");return u?c:r.reshape(c,i)});return[r.stack(l,o)]});case"Unpack":{let o=E("axis",n,t,e),s=E("tensor",n,t,e);return r.unstack(s,o)}case"Tile":{let o=E("reps",n,t,e);return[r.tile(E("x",n,t,e),o)]}case"Split":case"SplitV":{let o=E("axis",n,t,e),s=E("numOrSizeSplits",n,t,e),i=E("x",n,t,e);return r.split(i,s,o)}case"ScatterNd":{let o=E("indices",n,t,e),s=E("values",n,t,e),i=E("shape",n,t,e);return[r.scatterND(o,s,i)]}case"GatherNd":{let o=E("x",n,t,e),s=E("indices",n,t,e);return[r.gatherND(o,s)]}case"SparseToDense":{let o=E("sparseIndices",n,t,e),s=E("outputShape",n,t,e),i=E("sparseValues",n,t,e),a=E("defaultValue",n,t,e);return[r.sparseToDense(o,i,s,i.dtype===a.dtype?a:r.cast(a,i.dtype))]}case"TensorScatterUpdate":{let o=E("indices",n,t,e),s=E("values",n,t,e),i=E("tensor",n,t,e);return[r.tensorScatterUpdate(i,o,s)]}default:throw TypeError(`Node type ${n.op} is not implemented`)}}});var lX,cX=F(()=>{"use strict";zr();nr();lX=(n,t,e,r=$t)=>{switch(n.op){case"SparseFillEmptyRows":{let{outputIndices:o,outputValues:s,emptyRowIndicator:i,reverseIndexMap:a}=r.sparse.sparseFillEmptyRows(E("indices",n,t,e),E("values",n,t,e),E("denseShape",n,t,e),E("defaultValue",n,t,e));return[o,s,i,a]}case"SparseReshape":{let{outputIndices:o,outputShape:s}=r.sparse.sparseReshape(E("inputIndices",n,t,e),E("inputShape",n,t,e),E("newShape",n,t,e));return[o,s]}case"SparseSegmentMean":return[r.sparse.sparseSegmentMean(E("data",n,t,e),E("indices",n,t,e),E("segmentIds",n,t,e))];case"SparseSegmentSum":return[r.sparse.sparseSegmentSum(E("data",n,t,e),E("indices",n,t,e),E("segmentIds",n,t,e))];default:throw TypeError(`Node type ${n.op} is not implemented`)}}});var uX,pX=F(()=>{"use strict";zr();nr();uX=(n,t,e,r=$t)=>{switch(n.op){case"FFT":return[r.fft(E("x",n,t,e))];case"IFFT":return[r.ifft(E("x",n,t,e))];case"RFFT":return[r.rfft(E("x",n,t,e))];case"IRFFT":return[r.irfft(E("x",n,t,e))];default:throw TypeError(`Node type ${n.op} is not implemented`)}}});var fX,dX=F(()=>{"use strict";zr();nr();fX=(n,t,e,r=$t)=>{switch(n.op){case"StaticRegexReplace":return[r.string.staticRegexReplace(E("input",n,t,e),E("pattern",n,t,e),E("rewrite",n,t,e),E("replaceGlobal",n,t,e))];case"StringNGrams":{let{nGrams:o,nGramsSplits:s}=r.string.stringNGrams(E("data",n,t,e),E("dataSplits",n,t,e),E("separator",n,t,e),E("nGramWidths",n,t,e),E("leftPad",n,t,e),E("rightPad",n,t,e),E("padWidth",n,t,e),E("preserveShortSequences",n,t,e));return[o,s]}case"StringSplit":{let{indices:o,values:s,shape:i}=r.string.stringSplit(E("input",n,t,e),E("delimiter",n,t,e),E("skipEmpty",n,t,e));return[o,s,i]}case"StringToHashBucketFast":return[r.string.stringToHashBucketFast(E("input",n,t,e),E("numBuckets",n,t,e))];default:throw TypeError(`Node type ${n.op} is not implemented`)}}});var hX,mX=F(()=>{"use strict";zr();nr();hX=(n,t,e,r=$t)=>{switch(n.op){case"Cast":return[r.cast(E("x",n,t,e),E("dtype",n,t,e))];case"ExpandDims":{let o=E("axis",n,t,e);return[r.expandDims(E("x",n,t,e),o)]}case"Squeeze":{let o=E("axis",n,t,e);return[r.squeeze(E("x",n,t,e),o)]}case"Reshape":return[r.reshape(E("x",n,t,e),E("shape",n,t,e))];case"EnsureShape":return[r.ensureShape(E("x",n,t,e),E("shape",n,t,e))];case"MirrorPad":return[r.mirrorPad(E("x",n,t,e),E("padding",n,t,e),E("mode",n,t,e))];case"PadV2":case"Pad":return[r.pad(E("x",n,t,e),E("padding",n,t,e),E("constantValue",n,t,e))];case"SpaceToBatchND":{let o=E("blockShape",n,t,e),s=E("paddings",n,t,e);return[r.spaceToBatchND(E("x",n,t,e),o,s)]}case"BatchToSpaceND":{let o=E("blockShape",n,t,e),s=E("crops",n,t,e);return[r.batchToSpaceND(E("x",n,t,e),o,s)]}case"DepthToSpace":{let o=E("blockSize",n,t,e),s=E("dataFormat",n,t,e).toUpperCase();return[r.depthToSpace(E("x",n,t,e),o,s)]}case"BroadcastTo":return[r.broadcastTo(E("x",n,t,e),E("shape",n,t,e))];case"BroadcastArgs":return[r.broadcastArgs(E("s0",n,t,e),E("s1",n,t,e))];default:throw TypeError(`Node type ${n.op} is not implemented`)}}});function GP(n,t,e,r,o=K){let s=((i,a,l)=>{switch(i.category){case"arithmetic":return o(()=>w9(i,a,l));case"basic_math":return o(()=>I9(i,a,l));case"control":return R9(i,a,l);case"convolution":return o(()=>F9(i,a,l));case"creation":return o(()=>$9(i,a,l));case"dynamic":return B9(i,a,l);case"evaluation":return o(()=>V9(i,a,l));case"image":return o(()=>K9(i,a,l));case"graph":return o(()=>j9(i,a,l));case"logical":return o(()=>Y9(i,a,l));case"matrices":return o(()=>Q9(i,a,l));case"normalization":return o(()=>eX(i,a,l));case"ragged":return o(()=>nX(i,a,l));case"reduction":return o(()=>oX(i,a,l));case"slice_join":return o(()=>iX(i,a,l));case"sparse":return o(()=>lX(i,a,l));case"spectral":return o(()=>uX(i,a,l));case"string":return o(()=>fX(i,a,l));case"transformation":return o(()=>hX(i,a,l));case"hash_table":return H9(i,a,l,r);case"custom":let c=X1(i.op);if(c&&c.customExecutor)return c.customExecutor(new lE(i,a,l));throw TypeError(`Custom op ${i.op} is not registered.`);default:throw TypeError(`Unknown op '${i.op}'. File an issue at https://github.com/tensorflow/tfjs/issues so we can add it, or register a custom execution with tf.registerOp()`)}})(n,t,e);return C.isPromise(s)?s.then(i=>[].concat(i)):[].concat(s)}var gX=F(()=>{"use strict";N();v9();Y1();C9();S9();M9();P9();L9();z9();U9();G9();q9();X9();Z9();J9();tX();rX();sX();aX();cX();pX();dX();mX();});var Dw,xX=F(()=>{"use strict";Dw=class{constructor(t={},e={},r={},o={},s){this.weightMap=t,this.tensorArrayMap=e,this.tensorListMap=r,this.functionMap=o,this.parseNodeNameCache=s,this.rootContext={id:0,frameName:"",iterationId:0},this.contexts=[this.rootContext],this.lastId=0,this.generateCurrentContextIds()}newFrame(t,e){return{id:t,frameName:e,iterationId:0}}set currentContext(t){this.contexts!==t&&(this.contexts=t,this.generateCurrentContextIds())}get currentContext(){return this.contexts}get currentContextId(){return this._currentContextIds[0]}get currentContextIds(){return this._currentContextIds}generateCurrentContextIds(){let t=[];for(let e=0;e<this.contexts.length-1;e++){let r=this.contexts.slice(0,this.contexts.length-e);t.push(this.contextIdforContexts(r))}t.push(""),this._currentContextIds=t}contextIdforContexts(t){return t?t.map(e=>e.id===0&&e.iterationId===0?"":`${e.frameName}-${e.iterationId}`).join("/"):""}enterFrame(t){this.contexts&&(this.lastId++,this.contexts=this.contexts.slice(),this.contexts.push(this.newFrame(this.lastId,t)),this._currentContextIds.unshift(this.contextIdforContexts(this.contexts)))}exitFrame(){if(this.contexts&&this.contexts.length>1)this.contexts=this.contexts.slice(),this.contexts.splice(-1),this.currentContextIds.shift();else throw new Error("Cannot exit frame, the context is empty")}nextIteration(){if(this.contexts&&this.contexts.length>0){this.contexts=this.contexts.slice(),this.lastId++;let t=Object.assign({},this.contexts[this.contexts.length-1]);t.iterationId+=1,t.id=this.lastId,this.contexts.splice(-1,1,t),this._currentContextIds.splice(0,1,this.contextIdforContexts(this.contexts))}else throw new Error("Cannot increase frame iteration, the context is empty")}getWeight(t){return this.weightMap[t]}addTensorArray(t){this.tensorArrayMap[t.id]=t}getTensorArray(t){return this.tensorArrayMap[t]}addTensorList(t){this.tensorListMap[t.id]=t}getTensorList(t){return this.tensorListMap[t]}dispose(t){for(let e in this.tensorArrayMap)this.tensorArrayMap[e].clearAndClose(t);for(let e in this.tensorListMap)this.tensorListMap[e].clearAndClose(t)}}});function WP(n,t,e,r){let o=new Set,s=[],i=null,a=null,l=new Set,c=new Set(Object.keys(n).map(f=>Bo(f)[0]));r=r||[];let u=new Set(r.map(f=>Bo(f.name)[0])),p=[...t];for(;p.length>0;){let f=p.pop();if((jf(f)||i2e(f)||a2e(f))&&i==null&&(i=f,a=i.children.map(d=>d.name).filter(d=>o.has(d))),o.add(f.name),e[f.name]==null&&!c.has(f.name)&&!u.has(f.name)){if(f.inputs.length===0){s.push(f.name);continue}f.inputs.forEach(d=>{l.has(d.name)||(l.add(d.name),p.push(d))})}}return{inputs:n,outputs:t,usedNodes:o,missingInputs:s,dynamicNode:i,syncInputs:a}}function yX(n,t){let{usedNodes:e,inputs:r}=t,o=Object.keys(r).map(g=>Bo(g)[0]).map(g=>n.nodes[g]),s=n.initNodes||[],i=g=>e.has(typeof g=="string"?g:g.name);function a(g){return[...new Map(g.map(x=>[x.name,x])).values()]}let l=a([...o,...n.weights,...s]).filter(i),c=a([...l,...Object.values(n.nodes)]).filter(i),u=new Map(c.map(g=>[g.name,g])),p={};for(let g of c){p[g.name]=p[g.name]||0;for(let x of g.children)i(x)||(p[x.name]=Number.POSITIVE_INFINITY),p[x.name]=(p[x.name]||0)+1}let f=Object.entries(p).filter(([,g])=>g===0).map(([g])=>g),d=[...f];for(;f.length>0;){let g=f.pop(),x=u.get(g);for(let b of x.children.filter(i))--p[b.name]===0&&(d.push(b.name),f.push(b.name))}let h=d.map(g=>u.get(g)),m=t2e(h,l);return n2e(m,l),m}function t2e(n,t){let e=new Map(n.map(i=>[i.name,i])),r=t.map(i=>i.name),o=new Set(r);for(;r.length>0;){let i=r.pop(),a=e.get(i);for(let l of a.children)!e.has(l.name)||o.has(l.name)||(o.add(l.name),r.push(l.name))}return n.filter(i=>o.has(i.name))}function n2e(n,t){let e=new Map(n.map((a,l)=>[a.name,l])),r=new Set(t.map(a=>a.name)),o=a=>r.has(typeof a=="string"?a:a.name),s=new Set(n.map(a=>a.name)),i=a=>s.has(typeof a=="string"?a:a.name);for(let a of n){for(let l of a.children.filter(i)){if(!e.has(l.name))throw new Sy(`Child ${l.name} of node ${a.name} is unreachable.`);if(e.get(a.name)>e.get(l.name))throw new Sy(`Node ${a.name} is scheduled to run after its child ${l.name}.`)}if(!o(a))for(let l of a.inputs){if(!e.has(l.name))throw new Sy(`Input ${l.name} of node ${a.name} is unreachable.`);if(e.get(l.name)>e.get(a.name))throw new Sy(`Node ${a.name} is scheduled to run before its input ${l.name}.`)}}}function bX(n){let t=new Map(n.map((a,l)=>[a.name,l])),e=Number.MAX_SAFE_INTEGER,r=n.map((a,l)=>jf(a)?e:l),o=a=>{let l=r[t.get(a.name)];return l??-1},s=n.map((a,l)=>a.children.map(o).reduce((c,u)=>Math.max(c,u),r[l])),i=new Map;for(let a=0;a<n.length;++a){let l=s[a];if(l===e)continue;let c=n[a],u=n[l];i.has(u.name)||i.set(u.name,[]),i.get(u.name).push(c)}return i}function jf(n){return r2e.has(n.op)}function i2e(n){return o2e.has(n.op)}function a2e(n){return s2e.has(n.op)}var Sy,r2e,o2e,s2e,vX=F(()=>{"use strict";nr();Sy=class extends Error{constructor(t){super(`NodesExecutionOrderError: ${t}`)}};r2e=new Set(["Switch","Merge","Enter","Exit","NextIteration","StatelessIf","StatelessWhile","if","While"]),o2e=new Set(["NonMaxSuppressionV2","NonMaxSuppressionV3","NonMaxSuppressionV5","Where"]),s2e=new Set(["HashTable","HashTableV2","LookupTableImport","LookupTableImportV2","LookupTableFind","LookupTableFindV2","LookupTableSize","LookupTableSizeV2"])});var kw,wX=F(()=>{"use strict";N();nr();gX();xX();vX();kw=class n{get weightIds(){return this.parent?this.parent.weightIds:this._weightIds}get functionExecutorMap(){return this.parent?this.parent.functionExecutorMap:this._functionExecutorMap}get weightMap(){return this.parent?this.parent.weightMap:this._weightMap}set weightMap(t){let e=Object.keys(t).map(r=>t[r].map(o=>o.id));this._weightIds=[].concat(...e),this._weightMap=t}set resourceManager(t){this._resourceManager=t}get inputs(){return this._inputs.map(t=>({name:t.name,shape:t.attrParams.shape?t.attrParams.shape.value:void 0,dtype:t.attrParams.dtype?t.attrParams.dtype.value:void 0}))}get outputs(){return this._outputs.map(t=>({name:t.name,shape:t.attrParams.shape?t.attrParams.shape.value:void 0,dtype:t.attrParams.dtype?t.attrParams.dtype.value:void 0}))}get inputNodes(){return this._inputs.map(t=>t.signatureKey||t.name)}get outputNodes(){return this._outputs.map(t=>{let e=t.signatureKey||t.name;return t.defaultOutput?`${e}:${t.defaultOutput}`:e})}get functions(){return Object.keys(this._functions).reduce((t,e)=>(t[e]=this._functions[e].signature,t),{})}constructor(t,e){this.graph=t,this.parent=e,this.compiledMap=new Map,this.parseNodeNameCache=new Map,this._weightMap={},this.SEPARATOR=",",this._functions={},this._functionExecutorMap={},this.keepIntermediateTensors=!1,this._outputs=t.outputs,this._inputs=t.inputs,this._initNodes=t.initNodes,this._signature=t.signature,this._functions=t.functions,t.functions!=null&&Object.keys(t.functions).forEach(r=>{this._functionExecutorMap[r]=new n(t.functions[r],this)})}getCompilationKey(t,e){let r=t.map(s=>s.name).sort(),o=e.map(s=>s.name).sort();return r.join(this.SEPARATOR)+"--"+o.join(this.SEPARATOR)}compile(t,e){let r=WP(t,e,this.weightMap,this._initNodes),{missingInputs:o,dynamicNode:s,syncInputs:i}=r;if(s!=null)throw new Error(`This execution contains the node '${s.name}', which has the dynamic op '${s.op}'. Please use model.executeAsync() instead. Alternatively, to avoid the dynamic ops, specify the inputs [${i}]`);if(o.length>0){let c=e.map(p=>p.name),u=Object.keys(t);throw new Error(`Cannot compute the outputs [${c}] from the provided inputs [${u}]. Missing the following inputs: [${o}]`)}let a=yX(this.graph,r),l=bX(a);return{orderedNodes:a,nodeLiveUntilMap:l}}cloneAndKeepTensor(t){if(t==null)return null;let e=t.clone();return yn(e),e}cloneTensorList(t){return t?t.map(r=>this.cloneAndKeepTensor(r)):null}cloneTensorMap(t){return Object.fromEntries(Object.entries(t).map(([e,r])=>[e,this.cloneTensorList(r)]))}execute(t,e){this.disposeIntermediateTensors(),t=this.mapInputs(t);let r=Object.keys(t).sort();this.checkInputs(t),this.checkInputShapeAndType(t),e=this.mapOutputs(e),this.checkOutputs(e);let o=r.map(f=>this.graph.nodes[Bo(f)[0]]),s=e.map(f=>Bo(f)[0]),i=new Set(s),a=s.map(f=>this.graph.nodes[f]);a.length===0&&(a=this._outputs);let l=this.getCompilationKey(o,a),c=this.compiledMap.get(l);c==null&&(c=this.compile(t,a),this.compiledMap.set(l,c));try{this.keepIntermediateTensors=Y().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(f){this.keepIntermediateTensors=!1,console.warn(f.message)}let u={},p={};return K(()=>{let f=new Dw(this.weightMap,u,p,this.functionExecutorMap,this.parseNodeNameCache),d=Object.assign({},this.weightMap);this.keepIntermediateTensors&&(this.clonedTensorsMap=this.cloneTensorMap(this.weightMap)),Object.keys(t).forEach(x=>{let[b,w]=Bo(x,f),v=[];v[w]=t[x],d[b]=v,this.keepIntermediateTensors&&(this.clonedTensorsMap[b]=this.cloneTensorList(v))});let h=this.getFrozenTensorIds(d),{orderedNodes:m,nodeLiveUntilMap:g}=c;for(let x of m){if(d[x.name])continue;let b=GP(x,d,f,this._resourceManager);if(C.isPromise(b))throw new Error(`The execution of the op '${x.op}' returned a promise. Please use model.executeAsync() instead.`);d[x.name]=b,this.keepIntermediateTensors&&(this.clonedTensorsMap[x.name]=this.cloneTensorList(b)),this.checkTensorForDisposalWithNodeLiveUntilInfo(x,d,f,h,i,g.get(x.name))}return this.parent==null&&f.dispose(h),e.map(x=>mr(x,d,f))})}getFrozenTensorIds(t){let e=[].concat.apply([],Object.keys(t).map(r=>t[r]).map(r=>r.map(o=>o.id)));return new Set(e)}checkTensorForDisposal(t,e,r,o,s,i,a){if(!(jf(e)||i.has(t))){for(let l of r[t])l!=null&&(a[l.id]=(a[l.id]||0)+e.children.length);for(let l of e.inputs){if(jf(l))continue;let c=vP(l.name,r,o);if(c!=null)for(let u of c){if(!u||u.kept||s.has(u.id))continue;let p=a[u.id];p===1?(u.dispose(),delete a[u.id]):p!=null&&a[u.id]--}}}}checkTensorForDisposalWithNodeLiveUntilInfo(t,e,r,o,s,i){function a(l){return jf(l)||s.has(l.name)}if(!(jf(t)||i==null))for(let l of i){if(a(l))continue;let c=vP(l.name,e,r);for(let u of c)!u||u.kept||o.has(u.id)||u.dispose()}}executeAsync(t,e){return ee(this,null,function*(){return this._executeAsync(t,e)})}disposeIntermediateTensors(){this.clonedTensorsMap&&(Object.values(this.clonedTensorsMap).forEach(t=>{for(let e of t)e&&!e.isDisposed&&e.dispose()}),this.clonedTensorsMap=null)}getIntermediateTensors(){return this.clonedTensorsMap}_executeAsync(i,a){return ee(this,arguments,function*(t,e,r=!1,o={},s={}){this.disposeIntermediateTensors(),r||(t=this.mapInputs(t),this.checkInputs(t),this.checkInputShapeAndType(t),e=this.mapOutputs(e),this.checkOutputs(e));try{this.keepIntermediateTensors=Y().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(h){this.keepIntermediateTensors=!1,console.warn(h.message)}let l=new Dw(this.weightMap,o,s,this.functionExecutorMap,this.parseNodeNameCache);this.keepIntermediateTensors&&(this.clonedTensorsMap=this.cloneTensorMap(this.weightMap));let c=yield this.executeWithControlFlow(t,l,e,r),u=e.map(h=>mr(h,c,l)),p=u.map(h=>h.id),f=Object.keys(t).map(h=>t[h].id),d=new Set([...p,...f,...this.weightIds]);return Object.values(c).forEach(h=>{h.forEach(m=>{m&&!m.isDisposed&&!d.has(m.id)&&m.dispose()})}),this.parent==null&&l.dispose(d),u})}executeFunctionAsync(t,e,r){return ee(this,null,function*(){let o=t.reduce((s,i,a)=>(s[this.inputs[a].name]=i,s),{});return this._executeAsync(o,this.outputNodes,!0,e,r)})}executeWithControlFlow(t,e,r,o){return ee(this,null,function*(){let s=Object.keys(t),i=s.map(v=>this.graph.nodes[Bo(v)[0]]),a=r.map(v=>Bo(v)[0]),l=new Set(a),c=a.map(v=>this.graph.nodes[v]);c.length===0&&(c=this._outputs);let{usedNodes:u,missingInputs:p,dynamicNode:f,syncInputs:d}=WP(t,c,this.weightMap,this._initNodes),h=[...i,...this.graph.weights,...this._initNodes||[]].map(v=>({node:v,contexts:e.currentContext})),m=Object.assign({},this.weightMap);Object.keys(t).forEach(v=>{let[S,k]=Bo(v),A=[];A[k]=t[v],m[S]=A});let g={},x=this.getFrozenTensorIds(m),b={};for(;h.length>0;){let v=this.processStack(i,h,e,m,b,x,l,g,u);yield Promise.all(v)}f==null&&!o&&console.warn("This model execution did not contain any nodes with control flow or dynamic output shapes. You can use model.execute() instead.");let w=c.filter(v=>!jf(v)&&!mr(v.name,m,e)).map(v=>v.name);if(w.length>0){let v="";throw f!=null&&(v=`Alternatively, to avoid the dynamic ops, use model.execute() and specify the inputs [${d}]`),new Error(`Cannot compute the outputs [${w}] from the provided inputs [${s}]. Consider providing the following inputs: [${p}]. ${v}`)}return m})}processStack(t,e,r,o,s,i,a,l,c){let u=[];for(;e.length>0;){let p=e.pop();r.currentContext=p.contexts;let f="";if(p.node.op==="Enter"&&E("isConstant",p.node,o,r)&&([f]=va(p.node.name,r)),o[p.node.name]==null){let d=GP(p.node,o,r,this._resourceManager);f||([f]=va(p.node.name,r));let h=r.currentContext;C.isPromise(d)?u.push(d.then(m=>(o[f]=m,this.keepIntermediateTensors&&(this.clonedTensorsMap[f]=this.cloneTensorList(m)),r.currentContext=h,this.checkTensorForDisposal(f,p.node,o,r,i,a,l),this.processChildNodes(p.node,e,r,o,s,c),m))):(o[f]=d,this.keepIntermediateTensors&&(this.clonedTensorsMap[f]=this.cloneTensorList(d)),this.checkTensorForDisposal(f,p.node,o,r,i,a,l),this.processChildNodes(p.node,e,r,o,s,c))}else this.processChildNodes(p.node,e,r,o,s,c)}return u}processChildNodes(t,e,r,o,s,i){t.children.forEach(a=>{let[l]=va(a.name,r);s[l]||!i.has(a.name)||(a.op==="Merge"?a.inputNames.some(c=>!!mr(c,o,r))&&(s[l]=!0,e.push({contexts:r.currentContext,node:a})):a.inputNames.every(c=>!!mr(c,o,r))&&(s[l]=!0,e.push({contexts:r.currentContext,node:a})))})}dispose(){Object.keys(this.weightMap).forEach(t=>this.weightMap[t].forEach(e=>e.dispose()))}checkInputShapeAndType(t){Object.keys(t).forEach(e=>{let r=t[e],[o]=Bo(e),s=this.graph.nodes[o];if(s.attrParams.shape&&s.attrParams.shape.value){let i=s.attrParams.shape.value,a=i.length===r.shape.length&&r.shape.every((l,c)=>i[c]===-1||i[c]===l);C.assert(a,()=>`The shape of dict['${s.name}'] provided in model.execute(dict) must be [${i}], but was [${r.shape}]`)}s.attrParams.dtype&&s.attrParams.dtype.value&&C.assert(r.dtype===s.attrParams.dtype.value,()=>`The dtype of dict['${s.name}'] provided in model.execute(dict) must be ${s.attrParams.dtype.value}, but was ${r.dtype}`)})}mapInputs(t){var e,r;let o={};for(let s in t){let i=(r=(e=this._signature)===null||e===void 0?void 0:e.inputs)===null||r===void 0?void 0:r[s];i!=null?o[i.name]=t[s]:o[s]=t[s]}return o}checkInputs(t){let e=Object.keys(t).filter(r=>{let[o]=Bo(r);return this.graph.nodes[o]==null});if(e.length>0)throw new Error(`The dict provided in model.execute(dict) has keys: [${e}] that are not part of graph`)}mapOutputs(t){return t.map(e=>{var r,o;let s=(o=(r=this._signature)===null||r===void 0?void 0:r.outputs)===null||o===void 0?void 0:o[e];return s!=null?s.name:e},{})}checkOutputs(t){t.forEach(e=>{let[r]=Bo(e);if(!this.graph.nodes[r])throw new Error(`The output '${e}' is not found in the graph`)})}}});var fE,CX=F(()=>{"use strict";fE=class{constructor(t={},e={}){this.hashTableNameToHandle=t,this.hashTableMap=e}addHashTable(t,e){this.hashTableNameToHandle[t]=e.handle,this.hashTableMap[e.id]=e}getHashTableHandleByName(t){return this.hashTableNameToHandle[t]}getHashTableById(t){return this.hashTableMap[t]}dispose(){for(let t in this.hashTableMap)this.hashTableMap[t].clearAndClose(),delete this.hashTableMap[t];for(let t in this.hashTableNameToHandle)this.hashTableNameToHandle[t].dispose(),delete this.hashTableNameToHandle[t]}}});function Gf(r){return ee(this,arguments,function*(n,t={},e=Lo){if(n==null)throw new Error("modelUrl in loadGraphModel() cannot be null. Please provide a url or an IOHandler that loads the model");t==null&&(t={}),t.fromTFHub&&typeof n=="string"&&(n=u2e(n));let o=new Ty(n,t,e);return yield o.load(),o})}function IX(n){if(n==null)throw new Error("modelUrl in loadGraphModelSync() cannot be null. Please provide model artifacts or an IOHandler that loads the model");let t;if(n instanceof Array){let[r,o]=n;if(!r)throw new Error("modelJSON must be the first element of the array");if(!o||!(o instanceof ArrayBuffer))throw new Error("An ArrayBuffer of weights must be the second element of the array");if(!("modelTopology"in r))throw new Error("Model JSON is missing 'modelTopology'");if(!("weightsManifest"in r))throw new Error("Model JSON is missing 'weightsManifest'");let s=Lo.getWeightSpecs(r.weightsManifest),i=Lo.getModelArtifactsForJSONSync(r,s,o);t=Lo.fromMemorySync(i)}else if("load"in n)t=n;else if("modelTopology"in n&&"weightSpecs"in n&&"weightData"in n)t=Lo.fromMemorySync(n);else throw new Error("Unknown model format");let e=new Ty(t);return e.load(),e}function u2e(n){return n.endsWith("/")||(n=n+"/"),`${n}${c2e}${l2e}`}var l2e,c2e,Ty,SX=F(()=>{"use strict";N();VP();wX();CX();Cf();l2e="?tfjs-format=file",c2e="model.json",Ty=class{get modelVersion(){return this.version}get inputNodes(){return this.executor.inputNodes}get outputNodes(){return this.executor.outputNodes}get inputs(){return this.executor.inputs}get outputs(){return this.executor.outputs}get weights(){return this.executor.weightMap}get metadata(){return this.artifacts.userDefinedMetadata}get modelSignature(){return this.signature}get modelStructuredOutputKeys(){return this.structuredOutputKeys}constructor(t,e={},r=Lo){this.modelUrl=t,this.loadOptions=e,this.version="n/a",this.io=r,e==null&&(this.loadOptions={}),this.resourceManager=new fE}findIOHandler(){let t=this.modelUrl;if(t.load!=null)this.handler=t;else if(this.loadOptions.requestInit!=null)this.handler=this.io.browserHTTPRequest(t,this.loadOptions);else{let e=this.io.getLoadHandlers(t,this.loadOptions);if(e.length===0)e.push(this.io.browserHTTPRequest(t,this.loadOptions));else if(e.length>1)throw new Error(`Found more than one (${e.length}) load handlers for URL '${[t]}'`);this.handler=e[0]}}load(){if(this.findIOHandler(),this.handler.load==null)throw new Error("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");let t=this.handler.load();return C.isPromise(t)?t.then(e=>e.getWeightStream==null?this.loadSync(e):this.loadStreaming(e)):this.loadSync(t)}loadSync(t){let e=this.io.decodeWeights(t.weightData,t.weightSpecs);return this.loadWithWeightMap(t,e)}loadStreaming(t){return ee(this,null,function*(){if(t.getWeightStream==null)throw new Error("Model artifacts missing streamWeights function");let e=yield $T(t.getWeightStream(),t.weightSpecs);return this.loadWithWeightMap(t,e)})}loadWithWeightMap(t,e){this.artifacts=t;let r=this.artifacts.modelTopology,o=this.artifacts.signature;if(this.artifacts.userDefinedMetadata!=null){let s=this.artifacts.userDefinedMetadata;s.signature!=null&&(o=s.signature),s.structuredOutputKeys!=null&&(this.structuredOutputKeys=s.structuredOutputKeys)}if(this.signature=o,this.version=`${r.versions.producer}.${r.versions.minConsumer}`,this.executor=new kw(Nw.Instance.transformGraph(r,this.signature)),this.executor.weightMap=this.convertTensorMapToTensorsMap(e),this.executor.resourceManager=this.resourceManager,t.modelInitializer!=null&&t.modelInitializer.node!=null){let s=Nw.Instance.transformGraph(t.modelInitializer);this.initializer=new kw(s),this.initializer.weightMap=this.executor.weightMap,this.initializer.resourceManager=this.resourceManager,this.initializerSignature=t.initializerSignature}return!0}save(t,e){return ee(this,null,function*(){if(typeof t=="string"){let r=this.io.getSaveHandlers(t);if(r.length===0)throw new Error(`Cannot find any save handlers for URL '${t}'`);if(r.length>1)throw new Error(`Found more than one (${r.length}) save handlers for URL '${t}'`);t=r[0]}if(t.save==null)throw new Error("GraphModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");return t.save(this.artifacts)})}addStructuredOutputNames(t){if(this.structuredOutputKeys){let e=t instanceof tt?[t]:t,r={};return e.forEach((o,s)=>r[this.structuredOutputKeys[s]]=o),r}return t}predict(t,e){let r=this.execute(t,this.outputNodes);return this.addStructuredOutputNames(r)}predictAsync(t,e){return ee(this,null,function*(){let r=yield this.executeAsync(t,this.outputNodes);return this.addStructuredOutputNames(r)})}normalizeInputs(t){var e;if(!(t instanceof tt)&&!Array.isArray(t)){let s=(e=this.signature)===null||e===void 0?void 0:e.inputs;if(s!=null)for(let i in s){let a=s[i];a.resourceId!=null&&(t[i]=this.resourceIdToCapturedInput[a.resourceId])}return t}t=Array.isArray(t)?t:[t];let r=Object.keys(this.resourceIdToCapturedInput).length;if(t.length+r!==this.inputNodes.length)throw new Error(`Input tensor count mismatch, the graph model has ${this.inputNodes.length-r} non-resource placeholders, while there are ${t.length} input tensors provided.`);let o=0;return this.inputNodes.reduce((s,i)=>{var a,l,c;let u=(c=(l=(a=this.signature)===null||a===void 0?void 0:a.inputs)===null||l===void 0?void 0:l[i])===null||c===void 0?void 0:c.resourceId;return u!=null?s[i]=this.resourceIdToCapturedInput[u]:s[i]=t[o++],s},{})}normalizeOutputs(t){return t=t||this.outputNodes,Array.isArray(t)?t:[t]}executeInitializerGraph(){return this.initializer==null?[]:this.initializerSignature==null?this.initializer.execute({},[]):this.initializer.execute({},Object.keys(this.initializerSignature.outputs))}executeInitializerGraphAsync(){return ee(this,null,function*(){return this.initializer==null?[]:this.initializerSignature==null?this.initializer.executeAsync({},[]):this.initializer.executeAsync({},Object.keys(this.initializerSignature.outputs))})}setResourceIdToCapturedInput(t){if(this.resourceIdToCapturedInput={},this.initializerSignature){let e=this.initializerSignature.outputs,r=Object.keys(e);for(let o=0;o<r.length;o++){let s=r[o],i=e[s];this.resourceIdToCapturedInput[i.resourceId]=t[o]}}}execute(t,e){this.resourceIdToCapturedInput==null&&this.setResourceIdToCapturedInput(this.executeInitializerGraph()),t=this.normalizeInputs(t),e=this.normalizeOutputs(e);let r=this.executor.execute(t,e);return r.length>1?r:r[0]}executeAsync(t,e){return ee(this,null,function*(){this.resourceIdToCapturedInput==null&&this.setResourceIdToCapturedInput(yield this.executeInitializerGraphAsync()),t=this.normalizeInputs(t),e=this.normalizeOutputs(e);let r=yield this.executor.executeAsync(t,e);return r.length>1?r:r[0]})}getIntermediateTensors(){return this.executor.getIntermediateTensors()}disposeIntermediateTensors(){this.executor.disposeIntermediateTensors()}convertTensorMapToTensorsMap(t){return Object.keys(t).reduce((e,r)=>(e[r]=[t[r]],e),{})}dispose(){this.executor.dispose(),this.initializer&&(this.initializer.dispose(),this.resourceIdToCapturedInput&&Be(this.resourceIdToCapturedInput)),this.resourceManager.dispose()}}});var HP,TX=F(()=>{"use strict";HP="4.21.0"});var EX={};_t(EX,{GraphModel:()=>Ty,deregisterOp:()=>Z7,loadGraphModel:()=>Gf,loadGraphModelSync:()=>IX,registerOp:()=>Y7,version_converter:()=>HP});var Ey=F(()=>{"use strict";q7();SX();Y1();TX();});var DX=hs((dE,NX)=>{"use strict";(function(n,t){typeof dE=="object"&&typeof NX<"u"?t(dE,(Ey(),nz(EX)),(N(),nz(In))):typeof define=="function"&&define.amd?define(["exports","@tensorflow/tfjs-converter","@tensorflow/tfjs-core"],t):t((n=n||self).cocoSsd=n.cocoSsd||{},n.tf,n.tf)})(dE,function(n,t,e){"use strict";let r={1:{name:"/m/01g317",id:1,displayName:"person"},2:{name:"/m/0199g",id:2,displayName:"bicycle"},3:{name:"/m/0k4j",id:3,displayName:"car"},4:{name:"/m/04_sv",id:4,displayName:"motorcycle"},5:{name:"/m/05czz6l",id:5,displayName:"airplane"},6:{name:"/m/01bjv",id:6,displayName:"bus"},7:{name:"/m/07jdr",id:7,displayName:"train"},8:{name:"/m/07r04",id:8,displayName:"truck"},9:{name:"/m/019jd",id:9,displayName:"boat"},10:{name:"/m/015qff",id:10,displayName:"traffic light"},11:{name:"/m/01pns0",id:11,displayName:"fire hydrant"},13:{name:"/m/02pv19",id:13,displayName:"stop sign"},14:{name:"/m/015qbp",id:14,displayName:"parking meter"},15:{name:"/m/0cvnqh",id:15,displayName:"bench"},16:{name:"/m/015p6",id:16,displayName:"bird"},17:{name:"/m/01yrx",id:17,displayName:"cat"},18:{name:"/m/0bt9lr",id:18,displayName:"dog"},19:{name:"/m/03k3r",id:19,displayName:"horse"},20:{name:"/m/07bgp",id:20,displayName:"sheep"},21:{name:"/m/01xq0k1",id:21,displayName:"cow"},22:{name:"/m/0bwd_0j",id:22,displayName:"elephant"},23:{name:"/m/01dws",id:23,displayName:"bear"},24:{name:"/m/0898b",id:24,displayName:"zebra"},25:{name:"/m/03bk1",id:25,displayName:"giraffe"},27:{name:"/m/01940j",id:27,displayName:"backpack"},28:{name:"/m/0hnnb",id:28,displayName:"umbrella"},31:{name:"/m/080hkjn",id:31,displayName:"handbag"},32:{name:"/m/01rkbr",id:32,displayName:"tie"},33:{name:"/m/01s55n",id:33,displayName:"suitcase"},34:{name:"/m/02wmf",id:34,displayName:"frisbee"},35:{name:"/m/071p9",id:35,displayName:"skis"},36:{name:"/m/06__v",id:36,displayName:"snowboard"},37:{name:"/m/018xm",id:37,displayName:"sports ball"},38:{name:"/m/02zt3",id:38,displayName:"kite"},39:{name:"/m/03g8mr",id:39,displayName:"baseball bat"},40:{name:"/m/03grzl",id:40,displayName:"baseball glove"},41:{name:"/m/06_fw",id:41,displayName:"skateboard"},42:{name:"/m/019w40",id:42,displayName:"surfboard"},43:{name:"/m/0dv9c",id:43,displayName:"tennis racket"},44:{name:"/m/04dr76w",id:44,displayName:"bottle"},46:{name:"/m/09tvcd",id:46,displayName:"wine glass"},47:{name:"/m/08gqpm",id:47,displayName:"cup"},48:{name:"/m/0dt3t",id:48,displayName:"fork"},49:{name:"/m/04ctx",id:49,displayName:"knife"},50:{name:"/m/0cmx8",id:50,displayName:"spoon"},51:{name:"/m/04kkgm",id:51,displayName:"bowl"},52:{name:"/m/09qck",id:52,displayName:"banana"},53:{name:"/m/014j1m",id:53,displayName:"apple"},54:{name:"/m/0l515",id:54,displayName:"sandwich"},55:{name:"/m/0cyhj_",id:55,displayName:"orange"},56:{name:"/m/0hkxq",id:56,displayName:"broccoli"},57:{name:"/m/0fj52s",id:57,displayName:"carrot"},58:{name:"/m/01b9xk",id:58,displayName:"hot dog"},59:{name:"/m/0663v",id:59,displayName:"pizza"},60:{name:"/m/0jy4k",id:60,displayName:"donut"},61:{name:"/m/0fszt",id:61,displayName:"cake"},62:{name:"/m/01mzpv",id:62,displayName:"chair"},63:{name:"/m/02crq1",id:63,displayName:"couch"},64:{name:"/m/03fp41",id:64,displayName:"potted plant"},65:{name:"/m/03ssj5",id:65,displayName:"bed"},67:{name:"/m/04bcr3",id:67,displayName:"dining table"},70:{name:"/m/09g1w",id:70,displayName:"toilet"},72:{name:"/m/07c52",id:72,displayName:"tv"},73:{name:"/m/01c648",id:73,displayName:"laptop"},74:{name:"/m/020lf",id:74,displayName:"mouse"},75:{name:"/m/0qjjc",id:75,displayName:"remote"},76:{name:"/m/01m2v",id:76,displayName:"keyboard"},77:{name:"/m/050k8",id:77,displayName:"cell phone"},78:{name:"/m/0fx9l",id:78,displayName:"microwave"},79:{name:"/m/029bxz",id:79,displayName:"oven"},80:{name:"/m/01k6s3",id:80,displayName:"toaster"},81:{name:"/m/0130jx",id:81,displayName:"sink"},82:{name:"/m/040b_t",id:82,displayName:"refrigerator"},84:{name:"/m/0bt_c3",id:84,displayName:"book"},85:{name:"/m/01x3z",id:85,displayName:"clock"},86:{name:"/m/02s195",id:86,displayName:"vase"},87:{name:"/m/01lsmm",id:87,displayName:"scissors"},88:{name:"/m/0kmg4",id:88,displayName:"teddy bear"},89:{name:"/m/03wvsk",id:89,displayName:"hair drier"},90:{name:"/m/012xff",id:90,displayName:"toothbrush"}};class o{constructor(i,a){this.modelPath=a||`https://storage.googleapis.com/tfjs-models/savedmodel/${this.getPrefix(i)}/model.json`}getPrefix(i){return i==="lite_mobilenet_v2"?`ssd${i}`:`ssd_${i}`}load(){return ee(this,null,function*(){this.model=yield t.loadGraphModel(this.modelPath);let i=e.zeros([1,300,300,3],"int32"),a=yield this.model.executeAsync(i);yield Promise.all(a.map(l=>l.data())),a.map(l=>l.dispose()),i.dispose()})}infer(i,a,l){return ee(this,null,function*(){let c=e.tidy(()=>(i instanceof e.Tensor||(i=e.browser.fromPixels(i)),e.expandDims(i))),u=c.shape[1],p=c.shape[2],f=yield this.model.executeAsync(c),d=f[0].dataSync(),h=f[1].dataSync();c.dispose(),e.dispose(f);let[m,g]=this.calculateMaxScores(d,f[0].shape[1],f[0].shape[2]),x=e.getBackend();e.getBackend()==="webgl"&&e.setBackend("cpu");let b=e.tidy(()=>{let v=e.tensor2d(h,[f[1].shape[1],f[1].shape[3]]);return e.image.nonMaxSuppression(v,m,a,l,l)}),w=b.dataSync();return b.dispose(),x!==e.getBackend()&&e.setBackend(x),this.buildDetectedObjects(p,u,h,m,w,g)})}buildDetectedObjects(i,a,l,c,u,p){let f=u.length,d=[];for(let h=0;h<f;h++){let m=[];for(let v=0;v<4;v++)m[v]=l[4*u[h]+v];let g=m[0]*a,x=m[1]*i,b=m[2]*a,w=m[3]*i;m[0]=x,m[1]=g,m[2]=w-x,m[3]=b-g,d.push({bbox:m,class:r[p[u[h]]+1].displayName,score:c[u[h]]})}return d}calculateMaxScores(i,a,l){let c=[],u=[];for(let p=0;p<a;p++){let f=Number.MIN_VALUE,d=-1;for(let h=0;h<l;h++)i[p*l+h]>f&&(f=i[p*l+h],d=h);c[p]=f,u[p]=d}return[c,u]}detect(i,a=20,l=.5){return ee(this,null,function*(){return this.infer(i,a,l)})}dispose(){this.model!=null&&this.model.dispose()}}n.ObjectDetection=o,n.load=function(){return ee(this,arguments,function*(s={}){if(e==null)throw new Error("Cannot find TensorFlow.js. If you are using a <script> tag, please also include @tensorflow/tfjs on the page before using this model.");let i=s.base||"lite_mobilenet_v2",a=s.modelUrl;if(["mobilenet_v1","mobilenet_v2","lite_mobilenet_v2"].indexOf(i)===-1)throw new Error(`ObjectDetection constructed with invalid base model ${i}. Valid names are 'mobilenet_v1', 'mobilenet_v2' and 'lite_mobilenet_v2'.`);let l=new o(i,a);return yield l.load(),l})},n.version="2.2.3",Object.defineProperty(n,"__esModule",{value:!0})})});var Hle=hs(Wle=>{"use strict";(function(){"use strict";var n;function t(y){var I=0;return function(){return I<y.length?{done:!1,value:y[I++]}:{done:!0}}}var e=typeof Object.defineProperties=="function"?Object.defineProperty:function(y,I,D){return y==Array.prototype||y==Object.prototype||(y[I]=D.value),y};function r(y){y=[typeof globalThis=="object"&&globalThis,y,typeof window=="object"&&window,typeof self=="object"&&self,typeof global=="object"&&global];for(var I=0;I<y.length;++I){var D=y[I];if(D&&D.Math==Math)return D}throw Error("Cannot find global object")}var o=r(this);function s(y,I){if(I)e:{var D=o;y=y.split(".");for(var P=0;P<y.length-1;P++){var j=y[P];if(!(j in D))break e;D=D[j]}y=y[y.length-1],P=D[y],I=I(P),I!=P&&I!=null&&e(D,y,{configurable:!0,writable:!0,value:I})}}s("Symbol",function(y){function I(q){if(this instanceof I)throw new TypeError("Symbol is not a constructor");return new D(P+(q||"")+"_"+j++,q)}function D(q,H){this.h=q,e(this,"description",{configurable:!0,writable:!0,value:H})}if(y)return y;D.prototype.toString=function(){return this.h};var P="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",j=0;return I}),s("Symbol.iterator",function(y){if(y)return y;y=Symbol("Symbol.iterator");for(var I="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),D=0;D<I.length;D++){var P=o[I[D]];typeof P=="function"&&typeof P.prototype[y]!="function"&&e(P.prototype,y,{configurable:!0,writable:!0,value:function(){return i(t(this))}})}return y});function i(y){return y={next:y},y[Symbol.iterator]=function(){return this},y}function a(y){var I=typeof Symbol<"u"&&Symbol.iterator&&y[Symbol.iterator];return I?I.call(y):{next:t(y)}}function l(y){if(!(y instanceof Array)){y=a(y);for(var I,D=[];!(I=y.next()).done;)D.push(I.value);y=D}return y}var c=typeof Object.assign=="function"?Object.assign:function(y,I){for(var D=1;D<arguments.length;D++){var P=arguments[D];if(P)for(var j in P)Object.prototype.hasOwnProperty.call(P,j)&&(y[j]=P[j])}return y};s("Object.assign",function(y){return y||c});var u=typeof Object.create=="function"?Object.create:function(y){function I(){}return I.prototype=y,new I},p;if(typeof Object.setPrototypeOf=="function")p=Object.setPrototypeOf;else{var f;e:{var d={a:!0},h={};try{h.__proto__=d,f=h.a;break e}catch{}f=!1}p=f?function(y,I){if(y.__proto__=I,y.__proto__!==I)throw new TypeError(y+" is not extensible");return y}:null}var m=p;function g(y,I){if(y.prototype=u(I.prototype),y.prototype.constructor=y,m)m(y,I);else for(var D in I)if(D!="prototype")if(Object.defineProperties){var P=Object.getOwnPropertyDescriptor(I,D);P&&Object.defineProperty(y,D,P)}else y[D]=I[D];y.ya=I.prototype}function x(){this.m=!1,this.j=null,this.i=void 0,this.h=1,this.v=this.s=0,this.l=null}function b(y){if(y.m)throw new TypeError("Generator is already running");y.m=!0}x.prototype.u=function(y){this.i=y};function w(y,I){y.l={ma:I,na:!0},y.h=y.s||y.v}x.prototype.return=function(y){this.l={return:y},this.h=this.v};function v(y,I,D){return y.h=D,{value:I}}function S(y){this.h=new x,this.i=y}function k(y,I){b(y.h);var D=y.h.j;return D?A(y,"return"in D?D.return:function(P){return{value:P,done:!0}},I,y.h.return):(y.h.return(I),$(y))}function A(y,I,D,P){try{var j=I.call(y.h.j,D);if(!(j instanceof Object))throw new TypeError("Iterator result "+j+" is not an object");if(!j.done)return y.h.m=!1,j;var q=j.value}catch(H){return y.h.j=null,w(y.h,H),$(y)}return y.h.j=null,P.call(y.h,q),$(y)}function $(y){for(;y.h.h;)try{var I=y.i(y.h);if(I)return y.h.m=!1,{value:I.value,done:!1}}catch(D){y.h.i=void 0,w(y.h,D)}if(y.h.m=!1,y.h.l){if(I=y.h.l,y.h.l=null,I.na)throw I.ma;return{value:I.return,done:!0}}return{value:void 0,done:!0}}function L(y){this.next=function(I){return b(y.h),y.h.j?I=A(y,y.h.j.next,I,y.h.u):(y.h.u(I),I=$(y)),I},this.throw=function(I){return b(y.h),y.h.j?I=A(y,y.h.j.throw,I,y.h.u):(w(y.h,I),I=$(y)),I},this.return=function(I){return k(y,I)},this[Symbol.iterator]=function(){return this}}function z(y){function I(P){return y.next(P)}function D(P){return y.throw(P)}return new Promise(function(P,j){function q(H){H.done?P(H.value):Promise.resolve(H.value).then(I,D).then(q,j)}q(y.next())})}function W(y){return z(new L(new S(y)))}s("Promise",function(y){function I(H){this.i=0,this.j=void 0,this.h=[],this.u=!1;var re=this.l();try{H(re.resolve,re.reject)}catch(de){re.reject(de)}}function D(){this.h=null}function P(H){return H instanceof I?H:new I(function(re){re(H)})}if(y)return y;D.prototype.i=function(H){if(this.h==null){this.h=[];var re=this;this.j(function(){re.m()})}this.h.push(H)};var j=o.setTimeout;D.prototype.j=function(H){j(H,0)},D.prototype.m=function(){for(;this.h&&this.h.length;){var H=this.h;this.h=[];for(var re=0;re<H.length;++re){var de=H[re];H[re]=null;try{de()}catch(Te){this.l(Te)}}}this.h=null},D.prototype.l=function(H){this.j(function(){throw H})},I.prototype.l=function(){function H(Te){return function(_e){de||(de=!0,Te.call(re,_e))}}var re=this,de=!1;return{resolve:H(this.I),reject:H(this.m)}},I.prototype.I=function(H){if(H===this)this.m(new TypeError("A Promise cannot resolve to itself"));else if(H instanceof I)this.L(H);else{e:switch(typeof H){case"object":var re=H!=null;break e;case"function":re=!0;break e;default:re=!1}re?this.F(H):this.s(H)}},I.prototype.F=function(H){var re=void 0;try{re=H.then}catch(de){this.m(de);return}typeof re=="function"?this.M(re,H):this.s(H)},I.prototype.m=function(H){this.v(2,H)},I.prototype.s=function(H){this.v(1,H)},I.prototype.v=function(H,re){if(this.i!=0)throw Error("Cannot settle("+H+", "+re+"): Promise already settled in state"+this.i);this.i=H,this.j=re,this.i===2&&this.K(),this.H()},I.prototype.K=function(){var H=this;j(function(){if(H.D()){var re=o.console;typeof re<"u"&&re.error(H.j)}},1)},I.prototype.D=function(){if(this.u)return!1;var H=o.CustomEvent,re=o.Event,de=o.dispatchEvent;return typeof de>"u"?!0:(typeof H=="function"?H=new H("unhandledrejection",{cancelable:!0}):typeof re=="function"?H=new re("unhandledrejection",{cancelable:!0}):(H=o.document.createEvent("CustomEvent"),H.initCustomEvent("unhandledrejection",!1,!0,H)),H.promise=this,H.reason=this.j,de(H))},I.prototype.H=function(){if(this.h!=null){for(var H=0;H<this.h.length;++H)q.i(this.h[H]);this.h=null}};var q=new D;return I.prototype.L=function(H){var re=this.l();H.T(re.resolve,re.reject)},I.prototype.M=function(H,re){var de=this.l();try{H.call(re,de.resolve,de.reject)}catch(Te){de.reject(Te)}},I.prototype.then=function(H,re){function de(Ye,Fe){return typeof Ye=="function"?function(dt){try{Te(Ye(dt))}catch(kt){_e(kt)}}:Fe}var Te,_e,ft=new I(function(Ye,Fe){Te=Ye,_e=Fe});return this.T(de(H,Te),de(re,_e)),ft},I.prototype.catch=function(H){return this.then(void 0,H)},I.prototype.T=function(H,re){function de(){switch(Te.i){case 1:H(Te.j);break;case 2:re(Te.j);break;default:throw Error("Unexpected state: "+Te.i)}}var Te=this;this.h==null?q.i(de):this.h.push(de),this.u=!0},I.resolve=P,I.reject=function(H){return new I(function(re,de){de(H)})},I.race=function(H){return new I(function(re,de){for(var Te=a(H),_e=Te.next();!_e.done;_e=Te.next())P(_e.value).T(re,de)})},I.all=function(H){var re=a(H),de=re.next();return de.done?P([]):new I(function(Te,_e){function ft(dt){return function(kt){Ye[dt]=kt,Fe--,Fe==0&&Te(Ye)}}var Ye=[],Fe=0;do Ye.push(void 0),Fe++,P(de.value).T(ft(Ye.length-1),_e),de=re.next();while(!de.done)})},I});function Q(y,I){y instanceof String&&(y+="");var D=0,P=!1,j={next:function(){if(!P&&D<y.length){var q=D++;return{value:I(q,y[q]),done:!1}}return P=!0,{done:!0,value:void 0}}};return j[Symbol.iterator]=function(){return j},j}s("Array.prototype.keys",function(y){return y||function(){return Q(this,function(I){return I})}}),s("Array.prototype.fill",function(y){return y||function(I,D,P){var j=this.length||0;for(0>D&&(D=Math.max(0,j+D)),(P==null||P>j)&&(P=j),P=Number(P),0>P&&(P=Math.max(0,j+P)),D=Number(D||0);D<P;D++)this[D]=I;return this}});function ne(y){return y||Array.prototype.fill}s("Int8Array.prototype.fill",ne),s("Uint8Array.prototype.fill",ne),s("Uint8ClampedArray.prototype.fill",ne),s("Int16Array.prototype.fill",ne),s("Uint16Array.prototype.fill",ne),s("Int32Array.prototype.fill",ne),s("Uint32Array.prototype.fill",ne),s("Float32Array.prototype.fill",ne),s("Float64Array.prototype.fill",ne),s("Object.is",function(y){return y||function(I,D){return I===D?I!==0||1/I===1/D:I!==I&&D!==D}}),s("Array.prototype.includes",function(y){return y||function(I,D){var P=this;P instanceof String&&(P=String(P));var j=P.length;for(D=D||0,0>D&&(D=Math.max(D+j,0));D<j;D++){var q=P[D];if(q===I||Object.is(q,I))return!0}return!1}}),s("String.prototype.includes",function(y){return y||function(I,D){if(this==null)throw new TypeError("The 'this' value for String.prototype.includes must not be null or undefined");if(I instanceof RegExp)throw new TypeError("First argument to String.prototype.includes must not be a regular expression");return this.indexOf(I,D||0)!==-1}});var se=this||self;function te(y,I){y=y.split(".");var D=se;y[0]in D||typeof D.execScript>"u"||D.execScript("var "+y[0]);for(var P;y.length&&(P=y.shift());)y.length||I===void 0?D[P]&&D[P]!==Object.prototype[P]?D=D[P]:D=D[P]={}:D[P]=I}function ie(y){var I;e:{if((I=se.navigator)&&(I=I.userAgent))break e;I=""}return I.indexOf(y)!=-1}var le=Array.prototype.map?function(y,I){return Array.prototype.map.call(y,I,void 0)}:function(y,I){for(var D=y.length,P=Array(D),j=typeof y=="string"?y.split(""):y,q=0;q<D;q++)q in j&&(P[q]=I.call(void 0,j[q],q,y));return P},pe={},me=null;function ve(y){var I=y.length,D=3*I/4;D%3?D=Math.floor(D):"=.".indexOf(y[I-1])!=-1&&(D="=.".indexOf(y[I-2])!=-1?D-2:D-1);var P=new Uint8Array(D),j=0;return we(y,function(q){P[j++]=q}),j!==D?P.subarray(0,j):P}function we(y,I){function D(de){for(;P<y.length;){var Te=y.charAt(P++),_e=me[Te];if(_e!=null)return _e;if(!/^[\s\xa0]*$/.test(Te))throw Error("Unknown base64 encoding at char: "+Te)}return de}Se();for(var P=0;;){var j=D(-1),q=D(0),H=D(64),re=D(64);if(re===64&&j===-1)break;I(j<<2|q>>4),H!=64&&(I(q<<4&240|H>>2),re!=64&&I(H<<6&192|re))}}function Se(){if(!me){me={};for(var y="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),I=["+/=","+/","-_=","-_.","-_"],D=0;5>D;D++){var P=y.concat(I[D].split(""));pe[D]=P;for(var j=0;j<P.length;j++){var q=P[j];me[q]===void 0&&(me[q]=j)}}}}var Ce=typeof Uint8Array<"u",De=!(ie("Trident")||ie("MSIE"))&&typeof se.btoa=="function";function Ne(y){if(!De){var I;I===void 0&&(I=0),Se(),I=pe[I];for(var D=Array(Math.floor(y.length/3)),P=I[64]||"",j=0,q=0;j<y.length-2;j+=3){var H=y[j],re=y[j+1],de=y[j+2],Te=I[H>>2];H=I[(H&3)<<4|re>>4],re=I[(re&15)<<2|de>>6],de=I[de&63],D[q++]=Te+H+re+de}switch(Te=0,de=P,y.length-j){case 2:Te=y[j+1],de=I[(Te&15)<<2]||P;case 1:y=y[j],D[q]=I[y>>2]+I[(y&3)<<4|Te>>4]+de+P}return D.join("")}for(I="";10240<y.length;)I+=String.fromCharCode.apply(null,y.subarray(0,10240)),y=y.subarray(10240);return I+=String.fromCharCode.apply(null,y),btoa(I)}var Re=RegExp("[-_.]","g");function qe(y){switch(y){case"-":return"+";case"_":return"/";case".":return"=";default:return""}}function nt(y){if(!De)return ve(y);Re.test(y)&&(y=y.replace(Re,qe)),y=atob(y);for(var I=new Uint8Array(y.length),D=0;D<y.length;D++)I[D]=y.charCodeAt(D);return I}var Qe;function xt(){return Qe||(Qe=new Uint8Array(0))}var ht={},en=typeof Uint8Array.prototype.slice=="function",mt=0,Dt=0;function mn(y){var I=0>y;y=Math.abs(y);var D=y>>>0;y=Math.floor((y-D)/4294967296),I&&(D=a(On(D,y)),I=D.next().value,y=D.next().value,D=I),mt=D>>>0,Dt=y>>>0}var cn=typeof BigInt=="function";function On(y,I){return I=~I,y?y=~y+1:I+=1,[y,I]}function Sn(y,I){this.i=y>>>0,this.h=I>>>0}function si(y){if(!y)return Ir||(Ir=new Sn(0,0));if(!/^-?\d+$/.test(y))return null;if(16>y.length)mn(Number(y));else if(cn)y=BigInt(y),mt=Number(y&BigInt(4294967295))>>>0,Dt=Number(y>>BigInt(32)&BigInt(4294967295));else{var I=+(y[0]==="-");Dt=mt=0;for(var D=y.length,P=I,j=(D-I)%6+I;j<=D;P=j,j+=6)P=Number(y.slice(P,j)),Dt*=1e6,mt=1e6*mt+P,4294967296<=mt&&(Dt+=mt/4294967296|0,mt%=4294967296);I&&(I=a(On(mt,Dt)),y=I.next().value,I=I.next().value,mt=y,Dt=I)}return new Sn(mt,Dt)}var Ir;function $i(y,I){return Error("Invalid wire type: "+y+" (at position "+I+")")}function fo(){return Error("Failed to read varint, encoding is invalid.")}function Oa(y,I){return Error("Tried to read past the end of the data "+I+" > "+y)}function Gr(){throw Error("Invalid UTF8")}function ii(y,I){return I=String.fromCharCode.apply(null,I),y==null?I:y+I}var Ps=void 0,ai,Fa=typeof TextDecoder<"u",Cp,pb=typeof TextEncoder<"u",cg;function mC(y){if(y!==ht)throw Error("illegal external caller")}function Pa(y,I){if(mC(I),this.V=y,y!=null&&y.length===0)throw Error("ByteString should be constructed with non-empty values")}function fb(){return cg||(cg=new Pa(null,ht))}function gC(y){mC(ht);var I=y.V;return I=I==null||Ce&&I!=null&&I instanceof Uint8Array?I:typeof I=="string"?nt(I):null,I==null?I:y.V=I}function lce(y){if(typeof y=="string")return{buffer:nt(y),C:!1};if(Array.isArray(y))return{buffer:new Uint8Array(y),C:!1};if(y.constructor===Uint8Array)return{buffer:y,C:!1};if(y.constructor===ArrayBuffer)return{buffer:new Uint8Array(y),C:!1};if(y.constructor===Pa)return{buffer:gC(y)||xt(),C:!0};if(y instanceof Uint8Array)return{buffer:new Uint8Array(y.buffer,y.byteOffset,y.byteLength),C:!1};throw Error("Type not convertible to a Uint8Array, expected a Uint8Array, an ArrayBuffer, a base64 encoded string, a ByteString or an Array of numbers")}function pB(y,I){this.i=null,this.m=!1,this.h=this.j=this.l=0,yk(this,y,I)}function yk(y,I,D){D=D===void 0?{}:D,y.S=D.S===void 0?!1:D.S,I&&(I=lce(I),y.i=I.buffer,y.m=I.C,y.l=0,y.j=y.i.length,y.h=y.l)}pB.prototype.reset=function(){this.h=this.l};function od(y,I){if(y.h=I,I>y.j)throw Oa(y.j,I)}function db(y){var I=y.i,D=y.h,P=I[D++],j=P&127;if(P&128&&(P=I[D++],j|=(P&127)<<7,P&128&&(P=I[D++],j|=(P&127)<<14,P&128&&(P=I[D++],j|=(P&127)<<21,P&128&&(P=I[D++],j|=P<<28,P&128&&I[D++]&128&&I[D++]&128&&I[D++]&128&&I[D++]&128&&I[D++]&128)))))throw fo();return od(y,D),j}function fB(y,I){if(0>I)throw Error("Tried to read a negative byte length: "+I);var D=y.h,P=D+I;if(P>y.j)throw Oa(I,y.j-D);return y.h=P,D}var dB=[];function bk(){this.h=[]}bk.prototype.length=function(){return this.h.length},bk.prototype.end=function(){var y=this.h;return this.h=[],y};function hB(y,I,D){for(;0<D||127<I;)y.h.push(I&127|128),I=(I>>>7|D<<25)>>>0,D>>>=7;y.h.push(I)}function sd(y,I){for(;127<I;)y.h.push(I&127|128),I>>>=7;y.h.push(I)}function vk(y,I){if(dB.length){var D=dB.pop();yk(D,y,I),y=D}else y=new pB(y,I);this.h=y,this.j=this.h.h,this.i=this.l=-1,this.setOptions(I)}vk.prototype.setOptions=function(y){y=y===void 0?{}:y,this.ca=y.ca===void 0?!1:y.ca},vk.prototype.reset=function(){this.h.reset(),this.j=this.h.h,this.i=this.l=-1};function mB(y){var I=y.h;if(I.h==I.j)return!1;y.j=y.h.h;var D=db(y.h)>>>0;if(I=D>>>3,D&=7,!(0<=D&&5>=D))throw $i(D,y.j);if(1>I)throw Error("Invalid field number: "+I+" (at position "+y.j+")");return y.l=I,y.i=D,!0}function xC(y){switch(y.i){case 0:if(y.i!=0)xC(y);else e:{y=y.h;for(var I=y.h,D=I+10,P=y.i;I<D;)if(!(P[I++]&128)){od(y,I);break e}throw fo()}break;case 1:y=y.h,od(y,y.h+8);break;case 2:y.i!=2?xC(y):(I=db(y.h)>>>0,y=y.h,od(y,y.h+I));break;case 5:y=y.h,od(y,y.h+4);break;case 3:I=y.l;do{if(!mB(y))throw Error("Unmatched start-group tag: stream EOF");if(y.i==4){if(y.l!=I)throw Error("Unmatched end-group tag");break}xC(y)}while(!0);break;default:throw $i(y.i,y.j)}}var yC=[];function cce(){this.j=[],this.i=0,this.h=new bk}function ug(y,I){I.length!==0&&(y.j.push(I),y.i+=I.length)}function uce(y,I){if(I=I.R){ug(y,y.h.end());for(var D=0;D<I.length;D++)ug(y,gC(I[D])||xt())}}var Tc=typeof Symbol=="function"&&typeof Symbol()=="symbol"?Symbol():void 0;function id(y,I){return Tc?y[Tc]|=I:y.A!==void 0?y.A|=I:(Object.defineProperties(y,{A:{value:I,configurable:!0,writable:!0,enumerable:!1}}),I)}function gB(y,I){Tc?y[Tc]&&(y[Tc]&=~I):y.A!==void 0&&(y.A&=~I)}function Sr(y){var I;return Tc?I=y[Tc]:I=y.A,I??0}function $a(y,I){Tc?y[Tc]=I:y.A!==void 0?y.A=I:Object.defineProperties(y,{A:{value:I,configurable:!0,writable:!0,enumerable:!1}})}function wk(y){return id(y,1),y}function pce(y,I){$a(I,(y|0)&-51)}function bC(y,I){$a(I,(y|18)&-41)}var Ck={};function vC(y){return y!==null&&typeof y=="object"&&!Array.isArray(y)&&y.constructor===Object}var hb,xB=[];$a(xB,23),hb=Object.freeze(xB);function Ik(y){if(Sr(y.o)&2)throw Error("Cannot mutate an immutable Message")}function Sk(y){var I=y.length;(I=I?y[I-1]:void 0)&&vC(I)?I.g=1:(I={},y.push((I.g=1,I)))}function yB(y){var I=y.i+y.G;return y.B||(y.B=y.o[I]={})}function Li(y,I){return I===-1?null:I>=y.i?y.B?y.B[I]:void 0:y.o[I+y.G]}function La(y,I,D,P){Ik(y),mb(y,I,D,P)}function mb(y,I,D,P){y.j&&(y.j=void 0),I>=y.i||P?yB(y)[I]=D:(y.o[I+y.G]=D,(y=y.B)&&I in y&&delete y[I])}function Tk(y,I,D,P){var j=Li(y,I);Array.isArray(j)||(j=hb);var q=Sr(j);if(q&1||wk(j),P)q&2||id(j,2),D&1||Object.freeze(j);else{P=!(D&2);var H=q&2;D&1||!H?P&&q&16&&!H&&gB(j,16):(j=wk(Array.prototype.slice.call(j)),mb(y,I,j))}return j}function Ek(y,I){var D=Li(y,I),P=D==null?D:typeof D=="number"||D==="NaN"||D==="Infinity"||D==="-Infinity"?Number(D):void 0;return P!=null&&P!==D&&mb(y,I,P),P}function bB(y,I,D,P,j){y.h||(y.h={});var q=y.h[D],H=Tk(y,D,3,j);if(!q){var re=H;q=[];var de=!!(Sr(y.o)&16);H=!!(Sr(re)&2);var Te=re;!j&&H&&(re=Array.prototype.slice.call(re));for(var _e=H,ft=0;ft<re.length;ft++){var Ye=re[ft],Fe=I,dt=!1;if(dt=dt===void 0?!1:dt,Ye=Array.isArray(Ye)?new Fe(Ye):dt?new Fe:void 0,Ye!==void 0){Fe=Ye.o;var kt=dt=Sr(Fe);H&&(kt|=2),de&&(kt|=16),kt!=dt&&$a(Fe,kt),Fe=kt,_e=_e||!!(2&Fe),q.push(Ye)}}return y.h[D]=q,de=Sr(re),I=de|33,I=_e?I&-9:I|8,de!=I&&(_e=re,Object.isFrozen(_e)&&(_e=Array.prototype.slice.call(_e)),$a(_e,I),re=_e),Te!==re&&mb(y,D,re),(j||P&&H)&&id(q,2),P&&Object.freeze(q),q}return j||(j=Object.isFrozen(q),P&&!j?Object.freeze(q):!P&&j&&(q=Array.prototype.slice.call(q),y.h[D]=q)),q}function wC(y,I,D){var P=!!(Sr(y.o)&2);if(I=bB(y,I,D,P,P),y=Tk(y,D,3,P),!(P||Sr(y)&8)){for(P=0;P<I.length;P++){if(D=I[P],Sr(D.o)&2){var j=TB(D,!1);j.j=D}else j=D;D!==j&&(I[P]=j,y[P]=j.o)}id(y,8)}return I}function Ba(y,I,D){if(D!=null&&typeof D!="number")throw Error("Value of float/double field must be a number|null|undefined, found "+typeof D+": "+D);La(y,I,D)}function vB(y,I,D,P,j){Ik(y);var q=bB(y,D,I,!1,!1);return D=P??new D,y=Tk(y,I,2,!1),j!=null?(q.splice(j,0,D),y.splice(j,0,D.o)):(q.push(D),y.push(D.o)),D.C()&&gB(y,8),D}function CC(y,I){return y??I}function za(y,I,D){return D=D===void 0?0:D,CC(Ek(y,I),D)}var IC;function fce(y){switch(typeof y){case"number":return isFinite(y)?y:String(y);case"object":if(y)if(Array.isArray(y)){if(Sr(y)&128)return y=Array.prototype.slice.call(y),Sk(y),y}else{if(Ce&&y!=null&&y instanceof Uint8Array)return Ne(y);if(y instanceof Pa){var I=y.V;return I==null?"":typeof I=="string"?I:y.V=Ne(I)}}}return y}function wB(y,I,D,P){if(y!=null){if(Array.isArray(y))y=Nk(y,I,D,P!==void 0);else if(vC(y)){var j={},q;for(q in y)j[q]=wB(y[q],I,D,P);y=j}else y=I(y,P);return y}}function Nk(y,I,D,P){var j=Sr(y);P=P?!!(j&16):void 0,y=Array.prototype.slice.call(y);for(var q=0;q<y.length;q++)y[q]=wB(y[q],I,D,P);return D(j,y),y}function dce(y){return y.ja===Ck?y.toJSON():fce(y)}function hce(y,I){y&128&&Sk(I)}function CB(y,I,D){if(D=D===void 0?bC:D,y!=null){if(Ce&&y instanceof Uint8Array)return y.length?new Pa(new Uint8Array(y),ht):fb();if(Array.isArray(y)){var P=Sr(y);return P&2?y:I&&!(P&32)&&(P&16||P===0)?($a(y,P|2),y):(y=Nk(y,CB,P&4?bC:D,!0),I=Sr(y),I&4&&I&2&&Object.freeze(y),y)}return y.ja===Ck?SB(y):y}}function IB(y,I,D,P,j,q,H){if(y=y.h&&y.h[D]){if(P=Sr(y),P&2?P=y:(q=le(y,SB),bC(P,q),Object.freeze(q),P=q),Ik(I),H=P==null?hb:wk([]),P!=null){for(q=!!P.length,y=0;y<P.length;y++){var re=P[y];q=q&&!(Sr(re.o)&2),H[y]=re.o}q=(q?8:0)|1,y=Sr(H),(y&q)!==q&&(Object.isFrozen(H)&&(H=Array.prototype.slice.call(H)),$a(H,y|q)),I.h||(I.h={}),I.h[D]=P}else I.h&&(I.h[D]=void 0);mb(I,D,H,j)}else La(I,D,CB(P,q,H),j)}function SB(y){return Sr(y.o)&2||(y=TB(y,!0),id(y.o,2)),y}function TB(y,I){var D=y.o,P=[];id(P,16);var j=y.constructor.h;if(j&&P.push(j),j=y.B,j){P.length=D.length,P.fill(void 0,P.length,D.length);var q={};P[P.length-1]=q}Sr(D)&128&&Sk(P),I=I||y.C()?bC:pce,q=y.constructor,IC=P,P=new q(P),IC=void 0,y.R&&(P.R=y.R.slice()),q=!!(Sr(D)&16);for(var H=j?D.length-1:D.length,re=0;re<H;re++)IB(y,P,re-y.G,D[re],!1,q,I);if(j)for(var de in j)IB(y,P,+de,j[de],!0,q,I);return P}function fs(y,I,D){y==null&&(y=IC),IC=void 0;var P=this.constructor.i||0,j=0<P,q=this.constructor.h,H=!1;if(y==null){y=q?[q]:[];var re=48,de=!0;j&&(P=0,re|=128),$a(y,re)}else{if(!Array.isArray(y)||q&&q!==y[0])throw Error();var Te=re=id(y,0);if((de=(16&Te)!==0)&&((H=(32&Te)!==0)||(Te|=32)),j){if(128&Te)P=0;else if(0<y.length){var _e=y[y.length-1];if(vC(_e)&&"g"in _e){P=0,Te|=128,delete _e.g;var ft=!0,Ye;for(Ye in _e){ft=!1;break}ft&&y.pop()}}}else if(128&Te)throw Error();re!==Te&&$a(y,Te)}this.G=(q?0:-1)-P,this.h=void 0,this.o=y;e:{if(q=this.o.length,P=q-1,q&&(q=this.o[P],vC(q))){this.B=q,this.i=P-this.G;break e}I!==void 0&&-1<I?(this.i=Math.max(I,P+1-this.G),this.B=void 0):this.i=Number.MAX_VALUE}if(!j&&this.B&&"g"in this.B)throw Error('Unexpected "g" flag in sparse object of message that is not a group type.');if(D){I=de&&!H&&!0,j=this.i;var Fe;for(de=0;de<D.length;de++)H=D[de],H<j?(H+=this.G,(P=y[H])?EB(P,I):y[H]=hb):(Fe||(Fe=yB(this)),(P=Fe[H])?EB(P,I):Fe[H]=hb)}}fs.prototype.toJSON=function(){return Nk(this.o,dce,hce)},fs.prototype.C=function(){return!!(Sr(this.o)&2)};function EB(y,I){if(Array.isArray(y)){var D=Sr(y),P=1;!I||D&2||(P|=16),(D&P)!==P&&$a(y,D|P)}}fs.prototype.ja=Ck,fs.prototype.toString=function(){return this.o.toString()};function NB(y,I,D){if(D){var P={},j;for(j in D){var q=D[j],H=q.qa;H||(P.J=q.wa||q.oa.W,q.ia?(P.aa=RB(q.ia),H=function(re){return function(de,Te,_e){return re.J(de,Te,_e,re.aa)}}(P)):q.ka?(P.Z=MB(q.da.P,q.ka),H=function(re){return function(de,Te,_e){return re.J(de,Te,_e,re.Z)}}(P)):H=P.J,q.qa=H),H(I,y,q.da),P={J:P.J,aa:P.aa,Z:P.Z}}}uce(I,y)}var SC=Symbol();function DB(y,I,D){return y[SC]||(y[SC]=function(P,j){return I(P,j,D)})}function kB(y){var I=y[SC];if(!I){var D=kk(y);I=function(P,j){return OB(P,j,D)},y[SC]=I}return I}function mce(y){var I=y.ia;if(I)return kB(I);if(I=y.va)return DB(y.da.P,I,y.ka)}function gce(y){var I=mce(y),D=y.da,P=y.oa.U;return I?function(j,q){return P(j,q,D,I)}:function(j,q){return P(j,q,D)}}function _B(y,I){var D=y[I];return typeof D=="function"&&D.length===0&&(D=D(),y[I]=D),Array.isArray(D)&&(xb in D||gb in D||0<D.length&&typeof D[0]=="function")?D:void 0}function AB(y,I,D,P,j,q){I.P=y[0];var H=1;if(y.length>H&&typeof y[H]!="number"){var re=y[H++];D(I,re)}for(;H<y.length;){D=y[H++];for(var de=H+1;de<y.length&&typeof y[de]!="number";)de++;switch(re=y[H++],de-=H,de){case 0:P(I,D,re);break;case 1:(de=_B(y,H))?(H++,j(I,D,re,de)):P(I,D,re,y[H++]);break;case 2:de=H++,de=_B(y,de),j(I,D,re,de,y[H++]);break;case 3:q(I,D,re,y[H++],y[H++],y[H++]);break;case 4:q(I,D,re,y[H++],y[H++],y[H++],y[H++]);break;default:throw Error("unexpected number of binary field arguments: "+de)}}return I}var TC=Symbol();function RB(y){var I=y[TC];if(!I){var D=Dk(y);I=function(P,j){return FB(P,j,D)},y[TC]=I}return I}function MB(y,I){var D=y[TC];return D||(D=function(P,j){return NB(P,j,I)},y[TC]=D),D}var gb=Symbol();function xce(y,I){y.push(I)}function yce(y,I,D){y.push(I,D.W)}function bce(y,I,D,P){var j=RB(P),q=Dk(P).P,H=D.W;y.push(I,function(re,de,Te){return H(re,de,Te,q,j)})}function vce(y,I,D,P,j,q){var H=MB(P,q),re=D.W;y.push(I,function(de,Te,_e){return re(de,Te,_e,P,H)})}function Dk(y){var I=y[gb];return I||(I=AB(y,y[gb]=[],xce,yce,bce,vce),xb in y&&gb in y&&(y.length=0),I)}var xb=Symbol();function wce(y,I){y[0]=I}function Cce(y,I,D,P){var j=D.U;y[I]=P?function(q,H,re){return j(q,H,re,P)}:j}function Ice(y,I,D,P,j){var q=D.U,H=kB(P),re=kk(P).P;y[I]=function(de,Te,_e){return q(de,Te,_e,re,H,j)}}function Sce(y,I,D,P,j,q,H){var re=D.U,de=DB(P,j,q);y[I]=function(Te,_e,ft){return re(Te,_e,ft,P,de,H)}}function kk(y){var I=y[xb];return I||(I=AB(y,y[xb]={},wce,Cce,Ice,Sce),xb in y&&gb in y&&(y.length=0),I)}function OB(y,I,D){for(;mB(I)&&I.i!=4;){var P=I.l,j=D[P];if(!j){var q=D[0];q&&(q=q[P])&&(j=D[P]=gce(q))}if(!j||!j(I,y,P)){j=I,P=y,q=j.j,xC(j);var H=j;if(!H.ca){if(j=H.h.h-q,H.h.h=q,H=H.h,j==0)j=fb();else{if(q=fB(H,j),H.S&&H.m)j=H.i.subarray(q,q+j);else{H=H.i;var re=q;j=q+j,j=re===j?xt():en?H.slice(re,j):new Uint8Array(H.subarray(re,j))}j=j.length==0?fb():new Pa(j,ht)}(q=P.R)?q.push(j):P.R=[j]}}}return y}function FB(y,I,D){for(var P=D.length,j=P%2==1,q=j?1:0;q<P;q+=2)(0,D[q+1])(I,y,D[q]);NB(y,I,j?D[0]:void 0)}function yb(y,I){return{U:y,W:I}}var Bi=yb(function(y,I,D){if(y.i!==5)return!1;y=y.h;var P=y.i,j=y.h,q=P[j],H=P[j+1],re=P[j+2];return P=P[j+3],od(y,y.h+4),H=(q<<0|H<<8|re<<16|P<<24)>>>0,y=2*(H>>31)+1,q=H>>>23&255,H&=8388607,La(I,D,q==255?H?NaN:1/0*y:q==0?y*Math.pow(2,-149)*H:y*Math.pow(2,q-150)*(H+Math.pow(2,23))),!0},function(y,I,D){if(I=Ek(I,D),I!=null){sd(y.h,8*D+5),y=y.h;var P=+I;P===0?0<1/P?mt=Dt=0:(Dt=0,mt=2147483648):isNaN(P)?(Dt=0,mt=2147483647):(P=(D=0>P?-2147483648:0)?-P:P,34028234663852886e22<P?(Dt=0,mt=(D|2139095040)>>>0):11754943508222875e-54>P?(P=Math.round(P/Math.pow(2,-149)),Dt=0,mt=(D|P)>>>0):(I=Math.floor(Math.log(P)/Math.LN2),P*=Math.pow(2,-I),P=Math.round(8388608*P),16777216<=P&&++I,Dt=0,mt=(D|I+127<<23|P&8388607)>>>0)),D=mt,y.h.push(D>>>0&255),y.h.push(D>>>8&255),y.h.push(D>>>16&255),y.h.push(D>>>24&255)}}),Tce=yb(function(y,I,D){if(y.i!==0)return!1;var P=y.h,j=0,q=y=0,H=P.i,re=P.h;do{var de=H[re++];j|=(de&127)<<q,q+=7}while(32>q&&de&128);for(32<q&&(y|=(de&127)>>4),q=3;32>q&&de&128;q+=7)de=H[re++],y|=(de&127)<<q;if(od(P,re),128>de)P=j>>>0,de=y>>>0,(y=de&2147483648)&&(P=~P+1>>>0,de=~de>>>0,P==0&&(de=de+1>>>0)),P=4294967296*de+(P>>>0);else throw fo();return La(I,D,y?-P:P),!0},function(y,I,D){I=Li(I,D),I!=null&&(typeof I=="string"&&si(I),I!=null&&(sd(y.h,8*D),typeof I=="number"?(y=y.h,mn(I),hB(y,mt,Dt)):(D=si(I),hB(y.h,D.i,D.h))))}),Ece=yb(function(y,I,D){return y.i!==0?!1:(La(I,D,db(y.h)),!0)},function(y,I,D){if(I=Li(I,D),I!=null&&I!=null)if(sd(y.h,8*D),y=y.h,D=I,0<=D)sd(y,D);else{for(I=0;9>I;I++)y.h.push(D&127|128),D>>=7;y.h.push(1)}}),PB=yb(function(y,I,D){if(y.i!==2)return!1;var P=db(y.h)>>>0;y=y.h;var j=fB(y,P);if(y=y.i,Fa){var q=y,H;(H=ai)||(H=ai=new TextDecoder("utf-8",{fatal:!0})),y=j+P,q=j===0&&y===q.length?q:q.subarray(j,y);try{var re=H.decode(q)}catch(ft){if(Ps===void 0){try{H.decode(new Uint8Array([128]))}catch{}try{H.decode(new Uint8Array([97])),Ps=!0}catch{Ps=!1}}throw!Ps&&(ai=void 0),ft}}else{re=j,P=re+P,j=[];for(var de=null,Te,_e;re<P;)Te=y[re++],128>Te?j.push(Te):224>Te?re>=P?Gr():(_e=y[re++],194>Te||(_e&192)!==128?(re--,Gr()):j.push((Te&31)<<6|_e&63)):240>Te?re>=P-1?Gr():(_e=y[re++],(_e&192)!==128||Te===224&&160>_e||Te===237&&160<=_e||((q=y[re++])&192)!==128?(re--,Gr()):j.push((Te&15)<<12|(_e&63)<<6|q&63)):244>=Te?re>=P-2?Gr():(_e=y[re++],(_e&192)!==128||(Te<<28)+(_e-144)>>30||((q=y[re++])&192)!==128||((H=y[re++])&192)!==128?(re--,Gr()):(Te=(Te&7)<<18|(_e&63)<<12|(q&63)<<6|H&63,Te-=65536,j.push((Te>>10&1023)+55296,(Te&1023)+56320))):Gr(),8192<=j.length&&(de=ii(de,j),j.length=0);re=ii(de,j)}return La(I,D,re),!0},function(y,I,D){if(I=Li(I,D),I!=null){var P=!1;if(P=P===void 0?!1:P,pb){if(P&&/(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])/.test(I))throw Error("Found an unpaired surrogate");I=(Cp||(Cp=new TextEncoder)).encode(I)}else{for(var j=0,q=new Uint8Array(3*I.length),H=0;H<I.length;H++){var re=I.charCodeAt(H);if(128>re)q[j++]=re;else{if(2048>re)q[j++]=re>>6|192;else{if(55296<=re&&57343>=re){if(56319>=re&&H<I.length){var de=I.charCodeAt(++H);if(56320<=de&&57343>=de){re=1024*(re-55296)+de-56320+65536,q[j++]=re>>18|240,q[j++]=re>>12&63|128,q[j++]=re>>6&63|128,q[j++]=re&63|128;continue}else H--}if(P)throw Error("Found an unpaired surrogate");re=65533}q[j++]=re>>12|224,q[j++]=re>>6&63|128}q[j++]=re&63|128}}I=j===q.length?q:q.subarray(0,j)}sd(y.h,8*D+2),sd(y.h,I.length),ug(y,y.h.end()),ug(y,I)}}),$B=yb(function(y,I,D,P,j){if(y.i!==2)return!1;I=vB(I,D,P),D=y.h.j,P=db(y.h)>>>0;var q=y.h.h+P,H=q-D;if(0>=H&&(y.h.j=q,j(I,y,void 0,void 0,void 0),H=q-y.h.h),H)throw Error("Message parsing ended unexpectedly. Expected to read "+(P+" bytes, instead read "+(P-H)+" bytes, either the data ended unexpectedly or the message misreported its own length"));return y.h.h=q,y.h.j=D,!0},function(y,I,D,P,j){if(I=wC(I,P,D),I!=null)for(P=0;P<I.length;P++){var q=y;sd(q.h,8*D+2);var H=q.h.end();ug(q,H),H.push(q.i),q=H,j(I[P],y),H=y;var re=q.pop();for(re=H.i+H.h.length()-re;127<re;)q.push(re&127|128),re>>>=7,H.i++;q.push(re),H.i++}});function _k(y){return function(I,D){e:{if(yC.length){var P=yC.pop();P.setOptions(D),yk(P.h,I,D),I=P}else I=new vk(I,D);try{var j=kk(y),q=OB(new j.P,I,j);break e}finally{j=I.h,j.i=null,j.m=!1,j.l=0,j.j=0,j.h=0,j.S=!1,I.l=-1,I.i=-1,100>yC.length&&yC.push(I)}q=void 0}return q}}function Ak(y){return function(){var I=new cce;FB(this,I,Dk(y)),ug(I,I.h.end());for(var D=new Uint8Array(I.i),P=I.j,j=P.length,q=0,H=0;H<j;H++){var re=P[H];D.set(re,q),q+=re.length}return I.j=[D],D}}function pg(y){fs.call(this,y)}g(pg,fs);var LB=[pg,1,Ece,2,Bi,3,PB,4,PB];pg.prototype.l=Ak(LB);function Rk(y){fs.call(this,y,-1,Nce)}g(Rk,fs),Rk.prototype.addClassification=function(y,I){return vB(this,1,pg,y,I),this};var Nce=[1],BB=_k([Rk,1,$B,LB]);function fg(y){fs.call(this,y)}g(fg,fs);var zB=[fg,1,Bi,2,Bi,3,Bi,4,Bi,5,Bi];fg.prototype.l=Ak(zB);function VB(y){fs.call(this,y,-1,Dce)}g(VB,fs);var Dce=[1],UB=_k([VB,1,$B,zB]);function EC(y){fs.call(this,y)}g(EC,fs);var jB=[EC,1,Bi,2,Bi,3,Bi,4,Bi,5,Bi,6,Tce],kce=_k(jB);EC.prototype.l=Ak(jB);function GB(y,I,D){if(D=y.createShader(D===0?y.VERTEX_SHADER:y.FRAGMENT_SHADER),y.shaderSource(D,I),y.compileShader(D),!y.getShaderParameter(D,y.COMPILE_STATUS))throw Error(`Could not compile WebGL shader.

`+y.getShaderInfoLog(D));return D}function WB(y){return wC(y,pg,1).map(function(I){var D=Li(I,1);return{index:D??0,score:za(I,2),label:Li(I,3)!=null?CC(Li(I,3),""):void 0,displayName:Li(I,4)!=null?CC(Li(I,4),""):void 0}})}function HB(y){return{x:za(y,1),y:za(y,2),z:za(y,3),visibility:Ek(y,4)!=null?za(y,4):void 0}}function qB(y){return y.map(function(I){return wC(UB(I),fg,1).map(HB)})}function Mk(y,I){this.i=y,this.h=I,this.m=0}function KB(y,I,D){return _ce(y,I),typeof y.h.canvas.transferToImageBitmap=="function"?Promise.resolve(y.h.canvas.transferToImageBitmap()):D?Promise.resolve(y.h.canvas):typeof createImageBitmap=="function"?createImageBitmap(y.h.canvas):(y.j===void 0&&(y.j=document.createElement("canvas")),new Promise(function(P){y.j.height=y.h.canvas.height,y.j.width=y.h.canvas.width,y.j.getContext("2d",{}).drawImage(y.h.canvas,0,0,y.h.canvas.width,y.h.canvas.height),P(y.j)}))}function _ce(y,I){var D=y.h;if(y.s===void 0){var P=GB(D,`
  attribute vec2 aVertex;
  attribute vec2 aTex;
  varying vec2 vTex;
  void main(void) {
    gl_Position = vec4(aVertex, 0.0, 1.0);
    vTex = aTex;
  }`,0),j=GB(D,`
  precision mediump float;
  varying vec2 vTex;
  uniform sampler2D sampler0;
  void main(){
    gl_FragColor = texture2D(sampler0, vTex);
  }`,1),q=D.createProgram();if(D.attachShader(q,P),D.attachShader(q,j),D.linkProgram(q),!D.getProgramParameter(q,D.LINK_STATUS))throw Error(`Could not compile WebGL program.

`+D.getProgramInfoLog(q));P=y.s=q,D.useProgram(P),j=D.getUniformLocation(P,"sampler0"),y.l={O:D.getAttribLocation(P,"aVertex"),N:D.getAttribLocation(P,"aTex"),xa:j},y.v=D.createBuffer(),D.bindBuffer(D.ARRAY_BUFFER,y.v),D.enableVertexAttribArray(y.l.O),D.vertexAttribPointer(y.l.O,2,D.FLOAT,!1,0,0),D.bufferData(D.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,1,1,-1]),D.STATIC_DRAW),D.bindBuffer(D.ARRAY_BUFFER,null),y.u=D.createBuffer(),D.bindBuffer(D.ARRAY_BUFFER,y.u),D.enableVertexAttribArray(y.l.N),D.vertexAttribPointer(y.l.N,2,D.FLOAT,!1,0,0),D.bufferData(D.ARRAY_BUFFER,new Float32Array([0,1,0,0,1,0,1,1]),D.STATIC_DRAW),D.bindBuffer(D.ARRAY_BUFFER,null),D.uniform1i(j,0)}P=y.l,D.useProgram(y.s),D.canvas.width=I.width,D.canvas.height=I.height,D.viewport(0,0,I.width,I.height),D.activeTexture(D.TEXTURE0),y.i.bindTexture2d(I.glName),D.enableVertexAttribArray(P.O),D.bindBuffer(D.ARRAY_BUFFER,y.v),D.vertexAttribPointer(P.O,2,D.FLOAT,!1,0,0),D.enableVertexAttribArray(P.N),D.bindBuffer(D.ARRAY_BUFFER,y.u),D.vertexAttribPointer(P.N,2,D.FLOAT,!1,0,0),D.bindFramebuffer(D.DRAW_FRAMEBUFFER?D.DRAW_FRAMEBUFFER:D.FRAMEBUFFER,null),D.clearColor(0,0,0,0),D.clear(D.COLOR_BUFFER_BIT),D.colorMask(!0,!0,!0,!0),D.drawArrays(D.TRIANGLE_FAN,0,4),D.disableVertexAttribArray(P.O),D.disableVertexAttribArray(P.N),D.bindBuffer(D.ARRAY_BUFFER,null),y.i.bindTexture2d(0)}function Ace(y){this.h=y}var Rce=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,9,1,7,0,65,0,253,15,26,11]);function Mce(y,I){return I+y}function XB(y,I){window[y]=I}function Oce(y){var I=document.createElement("script");return I.setAttribute("src",y),I.setAttribute("crossorigin","anonymous"),new Promise(function(D){I.addEventListener("load",function(){D()},!1),I.addEventListener("error",function(){D()},!1),document.body.appendChild(I)})}function Fce(){return W(function(y){switch(y.h){case 1:return y.s=2,v(y,WebAssembly.instantiate(Rce),4);case 4:y.h=3,y.s=0;break;case 2:return y.s=0,y.l=null,y.return(!1);case 3:return y.return(!0)}})}function Ok(y){if(this.h=y,this.listeners={},this.l={},this.L={},this.s={},this.v={},this.M=this.u=this.ga=!0,this.I=Promise.resolve(),this.fa="",this.D={},this.locateFile=y&&y.locateFile||Mce,typeof window=="object")var I=window.location.pathname.toString().substring(0,window.location.pathname.toString().lastIndexOf("/"))+"/";else if(typeof location<"u")I=location.pathname.toString().substring(0,location.pathname.toString().lastIndexOf("/"))+"/";else throw Error("solutions can only be loaded on a web page or in a web worker");if(this.ha=I,y.options){I=a(Object.keys(y.options));for(var D=I.next();!D.done;D=I.next()){D=D.value;var P=y.options[D].default;P!==void 0&&(this.l[D]=typeof P=="function"?P():P)}}}n=Ok.prototype,n.close=function(){return this.j&&this.j.delete(),Promise.resolve()};function Pce(y){var I,D,P,j,q,H,re,de,Te,_e,ft;return W(function(Ye){switch(Ye.h){case 1:return y.ga?(I=y.h.files===void 0?[]:typeof y.h.files=="function"?y.h.files(y.l):y.h.files,v(Ye,Fce(),2)):Ye.return();case 2:if(D=Ye.i,typeof window=="object")return XB("createMediapipeSolutionsWasm",{locateFile:y.locateFile}),XB("createMediapipeSolutionsPackedAssets",{locateFile:y.locateFile}),H=I.filter(function(Fe){return Fe.data!==void 0}),re=I.filter(function(Fe){return Fe.data===void 0}),de=Promise.all(H.map(function(Fe){var dt=NC(y,Fe.url);if(Fe.path!==void 0){var kt=Fe.path;dt=dt.then(function(Yn){return y.overrideFile(kt,Yn),Promise.resolve(Yn)})}return dt})),Te=Promise.all(re.map(function(Fe){return Fe.simd===void 0||Fe.simd&&D||!Fe.simd&&!D?Oce(y.locateFile(Fe.url,y.ha)):Promise.resolve()})).then(function(){var Fe,dt,kt;return W(function(Yn){if(Yn.h==1)return Fe=window.createMediapipeSolutionsWasm,dt=window.createMediapipeSolutionsPackedAssets,kt=y,v(Yn,Fe(dt),2);kt.i=Yn.i,Yn.h=0})}),_e=function(){return W(function(Fe){return y.h.graph&&y.h.graph.url?Fe=v(Fe,NC(y,y.h.graph.url),0):(Fe.h=0,Fe=void 0),Fe})}(),v(Ye,Promise.all([Te,de,_e]),7);if(typeof importScripts!="function")throw Error("solutions can only be loaded on a web page or in a web worker");return P=I.filter(function(Fe){return Fe.simd===void 0||Fe.simd&&D||!Fe.simd&&!D}).map(function(Fe){return y.locateFile(Fe.url,y.ha)}),importScripts.apply(null,l(P)),j=y,v(Ye,createMediapipeSolutionsWasm(Module),6);case 6:j.i=Ye.i,y.m=new OffscreenCanvas(1,1),y.i.canvas=y.m,q=y.i.GL.createContext(y.m,{antialias:!1,alpha:!1,ua:typeof WebGL2RenderingContext<"u"?2:1}),y.i.GL.makeContextCurrent(q),Ye.h=4;break;case 7:if(y.m=document.createElement("canvas"),ft=y.m.getContext("webgl2",{}),!ft&&(ft=y.m.getContext("webgl",{}),!ft))return alert("Failed to create WebGL canvas context when passing video frame."),Ye.return();y.K=ft,y.i.canvas=y.m,y.i.createContext(y.m,!0,!0,{});case 4:y.j=new y.i.SolutionWasm,y.ga=!1,Ye.h=0}})}function $ce(y){var I,D,P,j,q,H,re,de;return W(function(Te){if(Te.h==1){if(y.h.graph&&y.h.graph.url&&y.fa===y.h.graph.url)return Te.return();if(y.u=!0,!y.h.graph||!y.h.graph.url){Te.h=2;return}return y.fa=y.h.graph.url,v(Te,NC(y,y.h.graph.url),3)}for(Te.h!=2&&(I=Te.i,y.j.loadGraph(I)),D=a(Object.keys(y.D)),P=D.next();!P.done;P=D.next())j=P.value,y.j.overrideFile(j,y.D[j]);if(y.D={},y.h.listeners)for(q=a(y.h.listeners),H=q.next();!H.done;H=q.next())re=H.value,Vce(y,re);de=y.l,y.l={},y.setOptions(de),Te.h=0})}n.reset=function(){var y=this;return W(function(I){y.j&&(y.j.reset(),y.s={},y.v={}),I.h=0})},n.setOptions=function(y,I){var D=this;if(I=I||this.h.options){for(var P=[],j=[],q={},H=a(Object.keys(y)),re=H.next();!re.done;q={X:q.X,Y:q.Y},re=H.next())if(re=re.value,!(re in this.l&&this.l[re]===y[re])){this.l[re]=y[re];var de=I[re];de!==void 0&&(de.onChange&&(q.X=de.onChange,q.Y=y[re],P.push(function(Te){return function(){var _e;return W(function(ft){if(ft.h==1)return v(ft,Te.X(Te.Y),2);_e=ft.i,_e===!0&&(D.u=!0),ft.h=0})}}(q))),de.graphOptionXref&&(re=Object.assign({},{calculatorName:"",calculatorIndex:0},de.graphOptionXref,{valueNumber:de.type===1?y[re]:0,valueBoolean:de.type===0?y[re]:!1,valueString:de.type===2?y[re]:""}),j.push(re)))}(P.length!==0||j.length!==0)&&(this.u=!0,this.H=(this.H===void 0?[]:this.H).concat(j),this.F=(this.F===void 0?[]:this.F).concat(P))}};function Lce(y){var I,D,P,j,q,H,re;return W(function(de){switch(de.h){case 1:if(!y.u)return de.return();if(!y.F){de.h=2;break}I=a(y.F),D=I.next();case 3:if(D.done){de.h=5;break}return P=D.value,v(de,P(),4);case 4:D=I.next(),de.h=3;break;case 5:y.F=void 0;case 2:if(y.H){for(j=new y.i.GraphOptionChangeRequestList,q=a(y.H),H=q.next();!H.done;H=q.next())re=H.value,j.push_back(re);y.j.changeOptions(j),j.delete(),y.H=void 0}y.u=!1,de.h=0}})}n.initialize=function(){var y=this;return W(function(I){return I.h==1?v(I,Pce(y),2):I.h!=3?v(I,$ce(y),3):v(I,Lce(y),0)})};function NC(y,I){var D,P;return W(function(j){return I in y.L?j.return(y.L[I]):(D=y.locateFile(I,""),P=fetch(D).then(function(q){return q.arrayBuffer()}),y.L[I]=P,j.return(P))})}n.overrideFile=function(y,I){this.j?this.j.overrideFile(y,I):this.D[y]=I},n.clearOverriddenFiles=function(){this.D={},this.j&&this.j.clearOverriddenFiles()},n.send=function(y,I){var D=this,P,j,q,H,re,de,Te,_e,ft;return W(function(Ye){switch(Ye.h){case 1:return D.h.inputs?(P=1e3*(I??performance.now()),v(Ye,D.I,2)):Ye.return();case 2:return v(Ye,D.initialize(),3);case 3:for(j=new D.i.PacketDataList,q=a(Object.keys(y)),H=q.next();!H.done;H=q.next())if(re=H.value,de=D.h.inputs[re]){e:{var Fe=y[re];switch(de.type){case"video":var dt=D.s[de.stream];if(dt||(dt=new Mk(D.i,D.K),D.s[de.stream]=dt),dt.m===0&&(dt.m=dt.i.createTexture()),typeof HTMLVideoElement<"u"&&Fe instanceof HTMLVideoElement)var kt=Fe.videoWidth,Yn=Fe.videoHeight;else typeof HTMLImageElement<"u"&&Fe instanceof HTMLImageElement?(kt=Fe.naturalWidth,Yn=Fe.naturalHeight):(kt=Fe.width,Yn=Fe.height);Yn={glName:dt.m,width:kt,height:Yn},kt=dt.h,kt.canvas.width=Yn.width,kt.canvas.height=Yn.height,kt.activeTexture(kt.TEXTURE0),dt.i.bindTexture2d(dt.m),kt.texImage2D(kt.TEXTURE_2D,0,kt.RGBA,kt.RGBA,kt.UNSIGNED_BYTE,Fe),dt.i.bindTexture2d(0),dt=Yn;break e;case"detections":for(dt=D.s[de.stream],dt||(dt=new Ace(D.i),D.s[de.stream]=dt),dt.data||(dt.data=new dt.h.DetectionListData),dt.data.reset(Fe.length),Yn=0;Yn<Fe.length;++Yn){kt=Fe[Yn];var Hn=dt.data,ho=Hn.setBoundingBox,li=Yn,ds=kt.la,tn=new EC;if(Ba(tn,1,ds.ra),Ba(tn,2,ds.sa),Ba(tn,3,ds.height),Ba(tn,4,ds.width),Ba(tn,5,ds.rotation),La(tn,6,ds.pa),ds=tn.l(),ho.call(Hn,li,ds),kt.ea)for(Hn=0;Hn<kt.ea.length;++Hn){tn=kt.ea[Hn],ho=dt.data,li=ho.addNormalizedLandmark,ds=Yn,tn=Object.assign({},tn,{visibility:tn.visibility?tn.visibility:0});var mo=new fg;Ba(mo,1,tn.x),Ba(mo,2,tn.y),Ba(mo,3,tn.z),tn.visibility&&Ba(mo,4,tn.visibility),tn=mo.l(),li.call(ho,ds,tn)}if(kt.ba)for(Hn=0;Hn<kt.ba.length;++Hn)ho=dt.data,li=ho.addClassification,ds=Yn,tn=kt.ba[Hn],mo=new pg,Ba(mo,2,tn.score),tn.index&&La(mo,1,tn.index),tn.label&&La(mo,3,tn.label),tn.displayName&&La(mo,4,tn.displayName),tn=mo.l(),li.call(ho,ds,tn)}dt=dt.data;break e;default:dt={}}}switch(Te=dt,_e=de.stream,de.type){case"video":j.pushTexture2d(Object.assign({},Te,{stream:_e,timestamp:P}));break;case"detections":ft=Te,ft.stream=_e,ft.timestamp=P,j.pushDetectionList(ft);break;default:throw Error("Unknown input config type: '"+de.type+"'")}}return D.j.send(j),v(Ye,D.I,4);case 4:j.delete(),Ye.h=0}})};function Bce(y,I,D){var P,j,q,H,re,de,Te,_e,ft,Ye,Fe,dt,kt,Yn;return W(function(Hn){switch(Hn.h){case 1:if(!D)return Hn.return(I);for(P={},j=0,q=a(Object.keys(D)),H=q.next();!H.done;H=q.next())re=H.value,de=D[re],typeof de!="string"&&de.type==="texture"&&I[de.stream]!==void 0&&++j;1<j&&(y.M=!1),Te=a(Object.keys(D)),H=Te.next();case 2:if(H.done){Hn.h=4;break}if(_e=H.value,ft=D[_e],typeof ft=="string")return kt=P,Yn=_e,v(Hn,zce(y,_e,I[ft]),14);if(Ye=I[ft.stream],ft.type==="detection_list"){if(Ye){for(var ho=Ye.getRectList(),li=Ye.getLandmarksList(),ds=Ye.getClassificationsList(),tn=[],mo=0;mo<ho.size();++mo){var Ip=kce(ho.get(mo)),Uce=za(Ip,1),jce=za(Ip,2),Gce=za(Ip,3),Wce=za(Ip,4),Hce=za(Ip,5,0),DC=void 0;DC=DC===void 0?0:DC,Ip={la:{ra:Uce,sa:jce,height:Gce,width:Wce,rotation:Hce,pa:CC(Li(Ip,6),DC)},ea:wC(UB(li.get(mo)),fg,1).map(HB),ba:WB(BB(ds.get(mo)))},tn.push(Ip)}ho=tn}else ho=[];P[_e]=ho,Hn.h=7;break}if(ft.type==="proto_list"){if(Ye){for(ho=Array(Ye.size()),li=0;li<Ye.size();li++)ho[li]=Ye.get(li);Ye.delete()}else ho=[];P[_e]=ho,Hn.h=7;break}if(Ye===void 0){Hn.h=3;break}if(ft.type==="float_list"){P[_e]=Ye,Hn.h=7;break}if(ft.type==="proto"){P[_e]=Ye,Hn.h=7;break}if(ft.type!=="texture")throw Error("Unknown output config type: '"+ft.type+"'");return Fe=y.v[_e],Fe||(Fe=new Mk(y.i,y.K),y.v[_e]=Fe),v(Hn,KB(Fe,Ye,y.M),13);case 13:dt=Hn.i,P[_e]=dt;case 7:ft.transform&&P[_e]&&(P[_e]=ft.transform(P[_e])),Hn.h=3;break;case 14:kt[Yn]=Hn.i;case 3:H=Te.next(),Hn.h=2;break;case 4:return Hn.return(P)}})}function zce(y,I,D){var P;return W(function(j){return typeof D=="number"||D instanceof Uint8Array||D instanceof y.i.Uint8BlobList?j.return(D):D instanceof y.i.Texture2dDataOut?(P=y.v[I],P||(P=new Mk(y.i,y.K),y.v[I]=P),j.return(KB(P,D,y.M))):j.return(void 0)})}function Vce(y,I){for(var D=I.name||"$",P=[].concat(l(I.wants)),j=new y.i.StringList,q=a(I.wants),H=q.next();!H.done;H=q.next())j.push_back(H.value);q=y.i.PacketListener.implement({onResults:function(re){for(var de={},Te=0;Te<I.wants.length;++Te)de[P[Te]]=re.get(Te);var _e=y.listeners[D];_e&&(y.I=Bce(y,de,I.outs).then(function(ft){ft=_e(ft);for(var Ye=0;Ye<I.wants.length;++Ye){var Fe=de[P[Ye]];typeof Fe=="object"&&Fe.hasOwnProperty&&Fe.hasOwnProperty("delete")&&Fe.delete()}ft&&(y.I=ft)}))}}),y.j.attachMultiListener(j,q),j.delete()}n.onResults=function(y,I){this.listeners[I||"$"]=y},te("Solution",Ok),te("OptionType",{BOOL:0,NUMBER:1,ta:2,0:"BOOL",1:"NUMBER",2:"STRING"});function YB(y){return y===void 0&&(y=0),y===1?"hand_landmark_full.tflite":"hand_landmark_lite.tflite"}function ZB(y){var I=this;y=y||{},this.h=new Ok({locateFile:y.locateFile,files:function(D){return[{url:"hands_solution_packed_assets_loader.js"},{simd:!1,url:"hands_solution_wasm_bin.js"},{simd:!0,url:"hands_solution_simd_wasm_bin.js"},{data:!0,url:YB(D.modelComplexity)}]},graph:{url:"hands.binarypb"},inputs:{image:{type:"video",stream:"input_frames_gpu"}},listeners:[{wants:["multi_hand_landmarks","multi_hand_world_landmarks","image_transformed","multi_handedness"],outs:{image:"image_transformed",multiHandLandmarks:{type:"proto_list",stream:"multi_hand_landmarks",transform:qB},multiHandWorldLandmarks:{type:"proto_list",stream:"multi_hand_world_landmarks",transform:qB},multiHandedness:{type:"proto_list",stream:"multi_handedness",transform:function(D){return D.map(function(P){return WB(BB(P))[0]})}}}}],options:{useCpuInference:{type:0,graphOptionXref:{calculatorType:"InferenceCalculator",fieldName:"use_cpu_inference"},default:typeof window!="object"||window.navigator===void 0?!1:"iPad Simulator;iPhone Simulator;iPod Simulator;iPad;iPhone;iPod".split(";").includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document},selfieMode:{type:0,graphOptionXref:{calculatorType:"GlScalerCalculator",calculatorIndex:1,fieldName:"flip_horizontal"}},maxNumHands:{type:1,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculator",fieldName:"int_value"}},modelComplexity:{type:1,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorModelComplexity",fieldName:"int_value"},onChange:function(D){var P,j,q;return W(function(H){return H.h==1?(P=YB(D),j="third_party/mediapipe/modules/hand_landmark/"+P,v(H,NC(I.h,P),2)):(q=H.i,I.h.overrideFile(j,q),H.return(!0))})}},minDetectionConfidence:{type:1,graphOptionXref:{calculatorType:"TensorsToDetectionsCalculator",calculatorName:"handlandmarktrackinggpu__palmdetectiongpu__TensorsToDetectionsCalculator",fieldName:"min_score_thresh"}},minTrackingConfidence:{type:1,graphOptionXref:{calculatorType:"ThresholdingCalculator",calculatorName:"handlandmarktrackinggpu__handlandmarkgpu__ThresholdingCalculator",fieldName:"threshold"}}}})}n=ZB.prototype,n.close=function(){return this.h.close(),Promise.resolve()},n.onResults=function(y){this.h.onResults(y)},n.initialize=function(){var y=this;return W(function(I){return v(I,y.h.initialize(),0)})},n.reset=function(){this.h.reset()},n.send=function(y){var I=this;return W(function(D){return v(D,I.h.send(y),0)})},n.setOptions=function(y){this.h.setOptions(y)},te("Hands",ZB),te("HAND_CONNECTIONS",[[0,1],[1,2],[2,3],[3,4],[0,5],[5,6],[6,7],[7,8],[5,9],[9,10],[10,11],[11,12],[9,13],[13,14],[14,15],[15,16],[13,17],[0,17],[17,18],[18,19],[19,20]]),te("VERSION","0.4.1675469240")}).call(Wle)});var rz=null;var Fk=1,oz=Symbol("SIGNAL");function un(n){let t=rz;return rz=n,t}var sz={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function eue(n){if(!(Lk(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===Fk)){if(!n.producerMustRecompute(n)&&!Pk(n)){n.dirty=!1,n.lastCleanEpoch=Fk;return}n.producerRecomputeValue(n),n.dirty=!1,n.lastCleanEpoch=Fk}}function iz(n){return n&&(n.nextProducerIndex=0),un(n)}function az(n,t){if(un(t),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(Lk(n))for(let e=n.nextProducerIndex;e<n.producerNode.length;e++)$k(n.producerNode[e],n.producerIndexOfThis[e]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function Pk(n){kC(n);for(let t=0;t<n.producerNode.length;t++){let e=n.producerNode[t],r=n.producerLastReadVersion[t];if(r!==e.version||(eue(e),r!==e.version))return!0}return!1}function lz(n){if(kC(n),Lk(n))for(let t=0;t<n.producerNode.length;t++)$k(n.producerNode[t],n.producerIndexOfThis[t]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function $k(n,t){if(tue(n),kC(n),n.liveConsumerNode.length===1)for(let r=0;r<n.producerNode.length;r++)$k(n.producerNode[r],n.producerIndexOfThis[r]);let e=n.liveConsumerNode.length-1;if(n.liveConsumerNode[t]=n.liveConsumerNode[e],n.liveConsumerIndexOfThis[t]=n.liveConsumerIndexOfThis[e],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,t<n.liveConsumerNode.length){let r=n.liveConsumerIndexOfThis[t],o=n.liveConsumerNode[t];kC(o),o.producerIndexOfThis[r]=t}}function Lk(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function kC(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function tue(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function nue(){throw new Error}var rue=nue;function cz(n){rue=n}function It(n){return typeof n=="function"}function dg(n){let e=n(r=>{Error.call(r),r.stack=new Error().stack});return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}var _C=dg(n=>function(e){n(this),this.message=e?`${e.length} errors occurred during unsubscription:
${e.map((r,o)=>`${o+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=e});function vb(n,t){if(n){let e=n.indexOf(t);0<=e&&n.splice(e,1)}}var Wr=class n{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;let{_parentage:e}=this;if(e)if(this._parentage=null,Array.isArray(e))for(let s of e)s.remove(this);else e.remove(this);let{initialTeardown:r}=this;if(It(r))try{r()}catch(s){t=s instanceof _C?s.errors:[s]}let{_finalizers:o}=this;if(o){this._finalizers=null;for(let s of o)try{uz(s)}catch(i){t=t??[],i instanceof _C?t=[...t,...i.errors]:t.push(i)}}if(t)throw new _C(t)}}add(t){var e;if(t&&t!==this)if(this.closed)uz(t);else{if(t instanceof n){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=(e=this._finalizers)!==null&&e!==void 0?e:[]).push(t)}}_hasParent(t){let{_parentage:e}=this;return e===t||Array.isArray(e)&&e.includes(t)}_addParent(t){let{_parentage:e}=this;this._parentage=Array.isArray(e)?(e.push(t),e):e?[e,t]:t}_removeParent(t){let{_parentage:e}=this;e===t?this._parentage=null:Array.isArray(e)&&vb(e,t)}remove(t){let{_finalizers:e}=this;e&&vb(e,t),t instanceof n&&t._removeParent(this)}};Wr.EMPTY=(()=>{let n=new Wr;return n.closed=!0,n})();var Bk=Wr.EMPTY;function AC(n){return n instanceof Wr||n&&"closed"in n&&It(n.remove)&&It(n.add)&&It(n.unsubscribe)}function uz(n){It(n)?n():n.unsubscribe()}var zi={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var hg={setTimeout(n,t,...e){let{delegate:r}=hg;return r?.setTimeout?r.setTimeout(n,t,...e):setTimeout(n,t,...e)},clearTimeout(n){let{delegate:t}=hg;return(t?.clearTimeout||clearTimeout)(n)},delegate:void 0};function RC(n){hg.setTimeout(()=>{let{onUnhandledError:t}=zi;if(t)t(n);else throw n})}function wb(){}var pz=zk("C",void 0,void 0);function fz(n){return zk("E",void 0,n)}function dz(n){return zk("N",n,void 0)}function zk(n,t,e){return{kind:n,value:t,error:e}}var ld=null;function mg(n){if(zi.useDeprecatedSynchronousErrorHandling){let t=!ld;if(t&&(ld={errorThrown:!1,error:null}),n(),t){let{errorThrown:e,error:r}=ld;if(ld=null,e)throw r}}else n()}function hz(n){zi.useDeprecatedSynchronousErrorHandling&&ld&&(ld.errorThrown=!0,ld.error=n)}var cd=class extends Wr{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,AC(t)&&t.add(this)):this.destination=iue}static create(t,e,r){return new gg(t,e,r)}next(t){this.isStopped?Uk(dz(t),this):this._next(t)}error(t){this.isStopped?Uk(fz(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?Uk(pz,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},oue=Function.prototype.bind;function Vk(n,t){return oue.call(n,t)}var jk=class{constructor(t){this.partialObserver=t}next(t){let{partialObserver:e}=this;if(e.next)try{e.next(t)}catch(r){MC(r)}}error(t){let{partialObserver:e}=this;if(e.error)try{e.error(t)}catch(r){MC(r)}else MC(t)}complete(){let{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(e){MC(e)}}},gg=class extends cd{constructor(t,e,r){super();let o;if(It(t)||!t)o={next:t??void 0,error:e??void 0,complete:r??void 0};else{let s;this&&zi.useDeprecatedNextContext?(s=Object.create(t),s.unsubscribe=()=>this.unsubscribe(),o={next:t.next&&Vk(t.next,s),error:t.error&&Vk(t.error,s),complete:t.complete&&Vk(t.complete,s)}):o=t}this.destination=new jk(o)}};function MC(n){zi.useDeprecatedSynchronousErrorHandling?hz(n):RC(n)}function sue(n){throw n}function Uk(n,t){let{onStoppedNotification:e}=zi;e&&hg.setTimeout(()=>e(n,t))}var iue={closed:!0,next:wb,error:sue,complete:wb};var xg=typeof Symbol=="function"&&Symbol.observable||"@@observable";function $s(n){return n}function Gk(...n){return Wk(n)}function Wk(n){return n.length===0?$s:n.length===1?n[0]:function(e){return n.reduce((r,o)=>o(r),e)}}var pn=(()=>{class n{constructor(e){e&&(this._subscribe=e)}lift(e){let r=new n;return r.source=this,r.operator=e,r}subscribe(e,r,o){let s=lue(e)?e:new gg(e,r,o);return mg(()=>{let{operator:i,source:a}=this;s.add(i?i.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(e){try{return this._subscribe(e)}catch(r){e.error(r)}}forEach(e,r){return r=mz(r),new r((o,s)=>{let i=new gg({next:a=>{try{e(a)}catch(l){s(l),i.unsubscribe()}},error:s,complete:o});this.subscribe(i)})}_subscribe(e){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(e)}[xg](){return this}pipe(...e){return Wk(e)(this)}toPromise(e){return e=mz(e),new e((r,o)=>{let s;this.subscribe(i=>s=i,i=>o(i),()=>r(s))})}}return n.create=t=>new n(t),n})();function mz(n){var t;return(t=n??zi.Promise)!==null&&t!==void 0?t:Promise}function aue(n){return n&&It(n.next)&&It(n.error)&&It(n.complete)}function lue(n){return n&&n instanceof cd||aue(n)&&AC(n)}function Hk(n){return It(n?.lift)}function Gt(n){return t=>{if(Hk(t))return t.lift(function(e){try{return n(e,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Wt(n,t,e,r,o){return new qk(n,t,e,r,o)}var qk=class extends cd{constructor(t,e,r,o,s,i){super(t),this.onFinalize=s,this.shouldUnsubscribe=i,this._next=e?function(a){try{e(a)}catch(l){t.error(l)}}:super._next,this._error=o?function(a){try{o(a)}catch(l){t.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){t.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:e}=this;super.unsubscribe(),!e&&((t=this.onFinalize)===null||t===void 0||t.call(this))}}};function yg(){return Gt((n,t)=>{let e=null;n._refCount++;let r=Wt(t,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){e=null;return}let o=n._connection,s=e;e=null,o&&(!s||o===s)&&o.unsubscribe(),t.unsubscribe()});n.subscribe(r),r.closed||(e=n.connect())})}var bg=class extends pn{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._subject=null,this._refCount=0,this._connection=null,Hk(t)&&(this.lift=t.lift)}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){let t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:t}=this;this._subject=this._connection=null,t?.unsubscribe()}connect(){let t=this._connection;if(!t){t=this._connection=new Wr;let e=this.getSubject();t.add(this.source.subscribe(Wt(e,void 0,()=>{this._teardown(),e.complete()},r=>{this._teardown(),e.error(r)},()=>this._teardown()))),t.closed&&(this._connection=null,t=Wr.EMPTY)}return t}refCount(){return yg()(this)}};var gz=dg(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var qo=(()=>{class n extends pn{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(e){let r=new OC(this,this);return r.operator=e,r}_throwIfClosed(){if(this.closed)throw new gz}next(e){mg(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(e)}})}error(e){mg(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=e;let{observers:r}=this;for(;r.length;)r.shift().error(e)}})}complete(){mg(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:e}=this;for(;e.length;)e.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var e;return((e=this.observers)===null||e===void 0?void 0:e.length)>0}_trySubscribe(e){return this._throwIfClosed(),super._trySubscribe(e)}_subscribe(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)}_innerSubscribe(e){let{hasError:r,isStopped:o,observers:s}=this;return r||o?Bk:(this.currentObservers=null,s.push(e),new Wr(()=>{this.currentObservers=null,vb(s,e)}))}_checkFinalizedStatuses(e){let{hasError:r,thrownError:o,isStopped:s}=this;r?e.error(o):s&&e.complete()}asObservable(){let e=new pn;return e.source=this,e}}return n.create=(t,e)=>new OC(t,e),n})(),OC=class extends qo{constructor(t,e){super(),this.destination=t,this.source=e}next(t){var e,r;(r=(e=this.destination)===null||e===void 0?void 0:e.next)===null||r===void 0||r.call(e,t)}error(t){var e,r;(r=(e=this.destination)===null||e===void 0?void 0:e.error)===null||r===void 0||r.call(e,t)}complete(){var t,e;(e=(t=this.destination)===null||t===void 0?void 0:t.complete)===null||e===void 0||e.call(t)}_subscribe(t){var e,r;return(r=(e=this.source)===null||e===void 0?void 0:e.subscribe(t))!==null&&r!==void 0?r:Bk}};var go=class extends qo{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){let e=super._subscribe(t);return!e.closed&&t.next(this._value),e}getValue(){let{hasError:t,thrownError:e,_value:r}=this;if(t)throw e;return this._throwIfClosed(),r}next(t){super.next(this._value=t)}};var Ls=new pn(n=>n.complete());function xz(n){return n&&It(n.schedule)}function yz(n){return n[n.length-1]}function bz(n){return It(yz(n))?n.pop():void 0}function Sp(n){return xz(yz(n))?n.pop():void 0}function wz(n,t,e,r){function o(s){return s instanceof e?s:new e(function(i){i(s)})}return new(e||(e=Promise))(function(s,i){function a(u){try{c(r.next(u))}catch(p){i(p)}}function l(u){try{c(r.throw(u))}catch(p){i(p)}}function c(u){u.done?s(u.value):o(u.value).then(a,l)}c((r=r.apply(n,t||[])).next())})}function vz(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function ud(n){return this instanceof ud?(this.v=n,this):new ud(n)}function Cz(n,t,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=e.apply(n,t||[]),o,s=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",i),o[Symbol.asyncIterator]=function(){return this},o;function i(d){return function(h){return Promise.resolve(h).then(d,p)}}function a(d,h){r[d]&&(o[d]=function(m){return new Promise(function(g,x){s.push([d,m,g,x])>1||l(d,m)})},h&&(o[d]=h(o[d])))}function l(d,h){try{c(r[d](h))}catch(m){f(s[0][3],m)}}function c(d){d.value instanceof ud?Promise.resolve(d.value.v).then(u,p):f(s[0][2],d)}function u(d){l("next",d)}function p(d){l("throw",d)}function f(d,h){d(h),s.shift(),s.length&&l(s[0][0],s[0][1])}}function Iz(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=n[Symbol.asyncIterator],e;return t?t.call(n):(n=typeof vz=="function"?vz(n):n[Symbol.iterator](),e={},r("next"),r("throw"),r("return"),e[Symbol.asyncIterator]=function(){return this},e);function r(s){e[s]=n[s]&&function(i){return new Promise(function(a,l){i=n[s](i),o(a,l,i.done,i.value)})}}function o(s,i,a,l){Promise.resolve(l).then(function(c){s({value:c,done:a})},i)}}var FC=n=>n&&typeof n.length=="number"&&typeof n!="function";function PC(n){return It(n?.then)}function $C(n){return It(n[xg])}function LC(n){return Symbol.asyncIterator&&It(n?.[Symbol.asyncIterator])}function BC(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function cue(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var zC=cue();function VC(n){return It(n?.[zC])}function UC(n){return Cz(this,arguments,function*(){let e=n.getReader();try{for(;;){let{value:r,done:o}=yield ud(e.read());if(o)return yield ud(void 0);yield yield ud(r)}}finally{e.releaseLock()}})}function jC(n){return It(n?.getReader)}function no(n){if(n instanceof pn)return n;if(n!=null){if($C(n))return uue(n);if(FC(n))return pue(n);if(PC(n))return fue(n);if(LC(n))return Sz(n);if(VC(n))return due(n);if(jC(n))return hue(n)}throw BC(n)}function uue(n){return new pn(t=>{let e=n[xg]();if(It(e.subscribe))return e.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function pue(n){return new pn(t=>{for(let e=0;e<n.length&&!t.closed;e++)t.next(n[e]);t.complete()})}function fue(n){return new pn(t=>{n.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,RC)})}function due(n){return new pn(t=>{for(let e of n)if(t.next(e),t.closed)return;t.complete()})}function Sz(n){return new pn(t=>{mue(n,t).catch(e=>t.error(e))})}function hue(n){return Sz(UC(n))}function mue(n,t){var e,r,o,s;return wz(this,void 0,void 0,function*(){try{for(e=Iz(n);r=yield e.next(),!r.done;){let i=r.value;if(t.next(i),t.closed)return}}catch(i){o={error:i}}finally{try{r&&!r.done&&(s=e.return)&&(yield s.call(e))}finally{if(o)throw o.error}}t.complete()})}function ms(n,t,e,r=0,o=!1){let s=t.schedule(function(){e(),o?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(s),!o)return s}function GC(n,t=0){return Gt((e,r)=>{e.subscribe(Wt(r,o=>ms(r,n,()=>r.next(o),t),()=>ms(r,n,()=>r.complete(),t),o=>ms(r,n,()=>r.error(o),t)))})}function WC(n,t=0){return Gt((e,r)=>{r.add(n.schedule(()=>e.subscribe(r),t))})}function Tz(n,t){return no(n).pipe(WC(t),GC(t))}function Ez(n,t){return no(n).pipe(WC(t),GC(t))}function Nz(n,t){return new pn(e=>{let r=0;return t.schedule(function(){r===n.length?e.complete():(e.next(n[r++]),e.closed||this.schedule())})})}function Dz(n,t){return new pn(e=>{let r;return ms(e,t,()=>{r=n[zC](),ms(e,t,()=>{let o,s;try{({value:o,done:s}=r.next())}catch(i){e.error(i);return}s?e.complete():e.next(o)},0,!0)}),()=>It(r?.return)&&r.return()})}function HC(n,t){if(!n)throw new Error("Iterable cannot be null");return new pn(e=>{ms(e,t,()=>{let r=n[Symbol.asyncIterator]();ms(e,t,()=>{r.next().then(o=>{o.done?e.complete():e.next(o.value)})},0,!0)})})}function kz(n,t){return HC(UC(n),t)}function _z(n,t){if(n!=null){if($C(n))return Tz(n,t);if(FC(n))return Nz(n,t);if(PC(n))return Ez(n,t);if(LC(n))return HC(n,t);if(VC(n))return Dz(n,t);if(jC(n))return kz(n,t)}throw BC(n)}function cr(n,t){return t?_z(n,t):no(n)}function ut(...n){let t=Sp(n);return cr(n,t)}function vg(n,t){let e=It(n)?n:()=>n,r=o=>o.error(e());return new pn(t?o=>t.schedule(r,0,o):r)}function Kk(n){return!!n&&(n instanceof pn||It(n.lift)&&It(n.subscribe))}var Ec=dg(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function At(n,t){return Gt((e,r)=>{let o=0;e.subscribe(Wt(r,s=>{r.next(n.call(t,s,o++))}))})}var{isArray:gue}=Array;function xue(n,t){return gue(t)?n(...t):n(t)}function Az(n){return At(t=>xue(n,t))}var{isArray:yue}=Array,{getPrototypeOf:bue,prototype:vue,keys:wue}=Object;function Rz(n){if(n.length===1){let t=n[0];if(yue(t))return{args:t,keys:null};if(Cue(t)){let e=wue(t);return{args:e.map(r=>t[r]),keys:e}}}return{args:n,keys:null}}function Cue(n){return n&&typeof n=="object"&&bue(n)===vue}function Mz(n,t){return n.reduce((e,r,o)=>(e[r]=t[o],e),{})}function Cb(...n){let t=Sp(n),e=bz(n),{args:r,keys:o}=Rz(n);if(r.length===0)return cr([],t);let s=new pn(Iue(r,t,o?i=>Mz(o,i):$s));return e?s.pipe(Az(e)):s}function Iue(n,t,e=$s){return r=>{Oz(t,()=>{let{length:o}=n,s=new Array(o),i=o,a=o;for(let l=0;l<o;l++)Oz(t,()=>{let c=cr(n[l],t),u=!1;c.subscribe(Wt(r,p=>{s[l]=p,u||(u=!0,a--),a||r.next(e(s.slice()))},()=>{--i||r.complete()}))},r)},r)}}function Oz(n,t,e){n?ms(e,n,t):t()}function Fz(n,t,e,r,o,s,i,a){let l=[],c=0,u=0,p=!1,f=()=>{p&&!l.length&&!c&&t.complete()},d=m=>c<r?h(m):l.push(m),h=m=>{s&&t.next(m),c++;let g=!1;no(e(m,u++)).subscribe(Wt(t,x=>{o?.(x),s?d(x):t.next(x)},()=>{g=!0},void 0,()=>{if(g)try{for(c--;l.length&&c<r;){let x=l.shift();i?ms(t,i,()=>h(x)):h(x)}f()}catch(x){t.error(x)}}))};return n.subscribe(Wt(t,d,()=>{p=!0,f()})),()=>{a?.()}}function Rr(n,t,e=1/0){return It(t)?Rr((r,o)=>At((s,i)=>t(r,s,o,i))(no(n(r,o))),e):(typeof t=="number"&&(e=t),Gt((r,o)=>Fz(r,o,n,e)))}function wg(n=1/0){return Rr($s,n)}function Pz(){return wg(1)}function Cg(...n){return Pz()(cr(n,Sp(n)))}function qC(n){return new pn(t=>{no(n()).subscribe(t)})}function gs(n,t){return Gt((e,r)=>{let o=0;e.subscribe(Wt(r,s=>n.call(t,s,o++)&&r.next(s)))})}function Tp(n){return Gt((t,e)=>{let r=null,o=!1,s;r=t.subscribe(Wt(e,void 0,void 0,i=>{s=no(n(i,Tp(n)(t))),r?(r.unsubscribe(),r=null,s.subscribe(e)):o=!0})),o&&(r.unsubscribe(),r=null,s.subscribe(e))})}function $z(n,t,e,r,o){return(s,i)=>{let a=e,l=t,c=0;s.subscribe(Wt(i,u=>{let p=c++;l=a?n(l,u,p):(a=!0,u),r&&i.next(l)},o&&(()=>{a&&i.next(l),i.complete()})))}}function Nc(n,t){return It(t)?Rr(n,t,1):Rr(n,1)}function Ep(n){return Gt((t,e)=>{let r=!1;t.subscribe(Wt(e,o=>{r=!0,e.next(o)},()=>{r||e.next(n),e.complete()}))})}function Dc(n){return n<=0?()=>Ls:Gt((t,e)=>{let r=0;t.subscribe(Wt(e,o=>{++r<=n&&(e.next(o),n<=r&&e.complete())}))})}function Xk(n){return At(()=>n)}function KC(n=Sue){return Gt((t,e)=>{let r=!1;t.subscribe(Wt(e,o=>{r=!0,e.next(o)},()=>r?e.complete():e.error(n())))})}function Sue(){return new Ec}function Np(n){return Gt((t,e)=>{try{t.subscribe(e)}finally{e.add(n)}})}function Va(n,t){let e=arguments.length>=2;return r=>r.pipe(n?gs((o,s)=>n(o,s,r)):$s,Dc(1),e?Ep(t):KC(()=>new Ec))}function Ig(n){return n<=0?()=>Ls:Gt((t,e)=>{let r=[];t.subscribe(Wt(e,o=>{r.push(o),n<r.length&&r.shift()},()=>{for(let o of r)e.next(o);e.complete()},void 0,()=>{r=null}))})}function Yk(n,t){let e=arguments.length>=2;return r=>r.pipe(n?gs((o,s)=>n(o,s,r)):$s,Ig(1),e?Ep(t):KC(()=>new Ec))}function Zk(n,t){return Gt($z(n,t,arguments.length>=2,!0))}function Qk(...n){let t=Sp(n);return Gt((e,r)=>{(t?Cg(n,e,t):Cg(n,e)).subscribe(r)})}function xs(n,t){return Gt((e,r)=>{let o=null,s=0,i=!1,a=()=>i&&!o&&r.complete();e.subscribe(Wt(r,l=>{o?.unsubscribe();let c=0,u=s++;no(n(l,u)).subscribe(o=Wt(r,p=>r.next(t?t(l,p,u,c++):p),()=>{o=null,a()}))},()=>{i=!0,a()}))})}function Jk(n){return Gt((t,e)=>{no(n).subscribe(Wt(e,()=>e.complete(),wb)),!e.closed&&t.subscribe(e)})}function ro(n,t,e){let r=It(n)||t||e?{next:n,error:t,complete:e}:n;return r?Gt((o,s)=>{var i;(i=r.subscribe)===null||i===void 0||i.call(r);let a=!0;o.subscribe(Wt(s,l=>{var c;(c=r.next)===null||c===void 0||c.call(r,l),s.next(l)},()=>{var l;a=!1,(l=r.complete)===null||l===void 0||l.call(r),s.complete()},l=>{var c;a=!1,(c=r.error)===null||c===void 0||c.call(r,l),s.error(l)},()=>{var l,c;a&&((l=r.unsubscribe)===null||l===void 0||l.call(r)),(c=r.finalize)===null||c===void 0||c.call(r)}))}):$s}var v3="https://g.co/ng/security#xss",Je=class extends Error{constructor(t,e){super(SI(t,e)),this.code=t}};function SI(n,t){return`${`NG0${Math.abs(n)}`}${t?": "+t:""}`}function Fb(n){return{toString:n}.toString()}var XC="__parameters__";function Tue(n){return function(...e){if(n){let r=n(...e);for(let o in r)this[o]=r[o]}}}function w3(n,t,e){return Fb(()=>{let r=Tue(t);function o(...s){if(this instanceof o)return r.apply(this,s),this;let i=new o(...s);return a.annotation=i,a;function a(l,c,u){let p=l.hasOwnProperty(XC)?l[XC]:Object.defineProperty(l,XC,{value:[]})[XC];for(;p.length<=u;)p.push(null);return(p[u]=p[u]||[]).push(i),l}}return e&&(o.prototype=Object.create(e.prototype)),o.prototype.ngMetadataName=n,o.annotationCls=o,o})}var xo=globalThis;function Fn(n){for(let t in n)if(n[t]===Fn)return t;throw Error("Could not find renamed property on target object.")}function bs(n){if(typeof n=="string")return n;if(Array.isArray(n))return"["+n.map(bs).join(", ")+"]";if(n==null)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;let t=n.toString();if(t==null)return""+t;let e=t.indexOf(`
`);return e===-1?t:t.substring(0,e)}function Lz(n,t){return n==null||n===""?t===null?"":t:t==null||t===""?n:n+" "+t}var Eue=Fn({__forward_ref__:Fn});function C3(n){return n.__forward_ref__=C3,n.toString=function(){return bs(this())},n}function ci(n){return I3(n)?n():n}function I3(n){return typeof n=="function"&&n.hasOwnProperty(Eue)&&n.__forward_ref__===C3}function Ze(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Xo(n){return{providers:n.providers||[],imports:n.imports||[]}}function TI(n){return Bz(n,T3)||Bz(n,E3)}function S3(n){return TI(n)!==null}function Bz(n,t){return n.hasOwnProperty(t)?n[t]:null}function Nue(n){let t=n&&(n[T3]||n[E3]);return t||null}function zz(n){return n&&(n.hasOwnProperty(Vz)||n.hasOwnProperty(Due))?n[Vz]:null}var T3=Fn({\u0275prov:Fn}),Vz=Fn({\u0275inj:Fn}),E3=Fn({ngInjectableDef:Fn}),Due=Fn({ngInjectorDef:Fn}),ot=class{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof e=="number"?this.__NG_ELEMENT_ID__=e:e!==void 0&&(this.\u0275prov=Ze({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function N3(n){return n&&!!n.\u0275providers}var kue=Fn({\u0275cmp:Fn}),_ue=Fn({\u0275dir:Fn}),Aue=Fn({\u0275pipe:Fn}),Rue=Fn({\u0275mod:Fn}),rI=Fn({\u0275fac:Fn}),Ib=Fn({__NG_ELEMENT_ID__:Fn}),Uz=Fn({__NG_ENV_ID__:Fn});function eA(n){return typeof n=="string"?n:n==null?"":String(n)}function Mue(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():eA(n)}function Oue(n,t){let e=t?`. Dependency path: ${t.join(" > ")} > ${n}`:"";throw new Je(-200,n)}function tA(n,t){throw new Je(-201,!1)}var Ot=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(Ot||{}),u_;function D3(){return u_}function ys(n){let t=u_;return u_=n,t}function k3(n,t,e){let r=TI(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(e&Ot.Optional)return null;if(t!==void 0)return t;tA(n,"Injector")}var Fue={},Tb=Fue,p_="__NG_DI_FLAG__",oI="ngTempTokenPath",Pue="ngTokenPath",$ue=/\n/gm,Lue="\u0275",jz="__source",Dg;function Bue(){return Dg}function Dp(n){let t=Dg;return Dg=n,t}function zue(n,t=Ot.Default){if(Dg===void 0)throw new Je(-203,!1);return Dg===null?k3(n,void 0,t):Dg.get(n,t&Ot.Optional?null:void 0,t)}function Xe(n,t=Ot.Default){return(D3()||zue)(ci(n),t)}function ke(n,t=Ot.Default){return Xe(n,EI(t))}function EI(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function f_(n){let t=[];for(let e=0;e<n.length;e++){let r=ci(n[e]);if(Array.isArray(r)){if(r.length===0)throw new Je(900,!1);let o,s=Ot.Default;for(let i=0;i<r.length;i++){let a=r[i],l=Vue(a);typeof l=="number"?l===-1?o=a.token:s|=l:o=a}t.push(Xe(o,s))}else t.push(Xe(r))}return t}function _3(n,t){return n[p_]=t,n.prototype[p_]=t,n}function Vue(n){return n[p_]}function Uue(n,t,e,r){let o=n[oI];throw t[jz]&&o.unshift(t[jz]),n.message=jue(`
`+n.message,o,e,r),n[Pue]=o,n[oI]=null,n}function jue(n,t,e,r=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==Lue?n.slice(2):n;let o=bs(t);if(Array.isArray(t))o=t.map(bs).join(" -> ");else if(typeof t=="object"){let s=[];for(let i in t)if(t.hasOwnProperty(i)){let a=t[i];s.push(i+":"+(typeof a=="string"?JSON.stringify(a):bs(a)))}o=`{${s.join(", ")}}`}return`${e}${r?"("+r+")":""}[${o}]: ${n.replace($ue,`
  `)}`}var NI=_3(w3("Optional"),8);var nA=_3(w3("SkipSelf"),4);function hd(n,t){let e=n.hasOwnProperty(rI);return e?n[rI]:null}function Gue(n,t,e){if(n.length!==t.length)return!1;for(let r=0;r<n.length;r++){let o=n[r],s=t[r];if(e&&(o=e(o),s=e(s)),s!==o)return!1}return!0}function Wue(n){return n.flat(Number.POSITIVE_INFINITY)}function rA(n,t){n.forEach(e=>Array.isArray(e)?rA(e,t):t(e))}function A3(n,t,e){t>=n.length?n.push(e):n.splice(t,0,e)}function sI(n,t){return t>=n.length-1?n.pop():n.splice(t,1)[0]}var Eb={},Ua=[],_g=new ot(""),R3=new ot("",-1),M3=new ot(""),iI=class{get(t,e=Tb){if(e===Tb){let r=new Error(`NullInjectorError: No provider for ${bs(t)}!`);throw r.name="NullInjectorError",r}return e}},O3=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(O3||{}),Wa=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(Wa||{}),kc=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(kc||{});function Hue(n,t,e){let r=n.length;for(;;){let o=n.indexOf(t,e);if(o===-1)return o;if(o===0||n.charCodeAt(o-1)<=32){let s=t.length;if(o+s===r||n.charCodeAt(o+s)<=32)return o}e=o+1}}function d_(n,t,e){let r=0;for(;r<e.length;){let o=e[r];if(typeof o=="number"){if(o!==0)break;r++;let s=e[r++],i=e[r++],a=e[r++];n.setAttribute(t,i,a,s)}else{let s=o,i=e[++r];Kue(s)?n.setProperty(t,s,i):n.setAttribute(t,s,i),r++}}return r}function que(n){return n===3||n===4||n===6}function Kue(n){return n.charCodeAt(0)===64}function oA(n,t){if(!(t===null||t.length===0))if(n===null||n.length===0)n=t.slice();else{let e=-1;for(let r=0;r<t.length;r++){let o=t[r];typeof o=="number"?e=o:e===0||(e===-1||e===2?Gz(n,e,o,null,t[++r]):Gz(n,e,o,null,null))}}return n}function Gz(n,t,e,r,o){let s=0,i=n.length;if(t===-1)i=-1;else for(;s<n.length;){let a=n[s++];if(typeof a=="number"){if(a===t){i=-1;break}else if(a>t){i=s-1;break}}}for(;s<n.length;){let a=n[s];if(typeof a=="number")break;if(a===e){if(r===null){o!==null&&(n[s+1]=o);return}else if(r===n[s+1]){n[s+2]=o;return}}s++,r!==null&&s++,o!==null&&s++}i!==-1&&(n.splice(i,0,t),s=i+1),n.splice(s++,0,e),r!==null&&n.splice(s++,0,r),o!==null&&n.splice(s++,0,o)}var F3="ng-template";function Xue(n,t,e,r){let o=0;if(r){for(;o<t.length&&typeof t[o]=="string";o+=2)if(t[o]==="class"&&Hue(t[o+1].toLowerCase(),e,0)!==-1)return!0}else if(sA(n))return!1;if(o=t.indexOf(1,o),o>-1){let s;for(;++o<t.length&&typeof(s=t[o])=="string";)if(s.toLowerCase()===e)return!0}return!1}function sA(n){return n.type===4&&n.value!==F3}function Yue(n,t,e){let r=n.type===4&&!e?F3:n.value;return t===r}function Zue(n,t,e){let r=4,o=n.attrs,s=o!==null?epe(o):0,i=!1;for(let a=0;a<t.length;a++){let l=t[a];if(typeof l=="number"){if(!i&&!Vi(r)&&!Vi(l))return!1;if(i&&Vi(l))continue;i=!1,r=l|r&1;continue}if(!i)if(r&4){if(r=2|r&1,l!==""&&!Yue(n,l,e)||l===""&&t.length===1){if(Vi(r))return!1;i=!0}}else if(r&8){if(o===null||!Xue(n,o,l,e)){if(Vi(r))return!1;i=!0}}else{let c=t[++a],u=Que(l,o,sA(n),e);if(u===-1){if(Vi(r))return!1;i=!0;continue}if(c!==""){let p;if(u>s?p="":p=o[u+1].toLowerCase(),r&2&&c!==p){if(Vi(r))return!1;i=!0}}}}return Vi(r)||i}function Vi(n){return(n&1)===0}function Que(n,t,e,r){if(t===null)return-1;let o=0;if(r||!e){let s=!1;for(;o<t.length;){let i=t[o];if(i===n)return o;if(i===3||i===6)s=!0;else if(i===1||i===2){let a=t[++o];for(;typeof a=="string";)a=t[++o];continue}else{if(i===4)break;if(i===0){o+=4;continue}}o+=s?1:2}return-1}else return tpe(t,n)}function Jue(n,t,e=!1){for(let r=0;r<t.length;r++)if(Zue(n,t[r],e))return!0;return!1}function epe(n){for(let t=0;t<n.length;t++){let e=n[t];if(que(e))return t}return n.length}function tpe(n,t){let e=n.indexOf(4);if(e>-1)for(e++;e<n.length;){let r=n[e];if(typeof r=="number")return-1;if(r===t)return e;e++}return-1}function Wz(n,t){return n?":not("+t.trim()+")":t}function npe(n){let t=n[0],e=1,r=2,o="",s=!1;for(;e<n.length;){let i=n[e];if(typeof i=="string")if(r&2){let a=n[++e];o+="["+i+(a.length>0?'="'+a+'"':"")+"]"}else r&8?o+="."+i:r&4&&(o+=" "+i);else o!==""&&!Vi(i)&&(t+=Wz(s,o),o=""),r=i,s=s||!Vi(r);e++}return o!==""&&(t+=Wz(s,o)),t}function rpe(n){return n.map(npe).join(",")}function ope(n){let t=[],e=[],r=1,o=2;for(;r<n.length;){let s=n[r];if(typeof s=="string")o===2?s!==""&&t.push(s,n[++r]):o===8&&e.push(s);else{if(!Vi(o))break;o=s}r++}return{attrs:t,classes:e}}function ui(n){return Fb(()=>{let t=V3(n),e=lr(Ge({},t),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===O3.OnPush,directiveDefs:null,pipeDefs:null,dependencies:t.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Wa.Emulated,styles:n.styles||Ua,_:null,schemas:n.schemas||null,tView:null,id:""});U3(e);let r=n.dependencies;return e.directiveDefs=qz(r,!1),e.pipeDefs=qz(r,!0),e.id=ape(e),e})}function spe(n){return _p(n)||$3(n)}function ipe(n){return n!==null}function Yo(n){return Fb(()=>({type:n.type,bootstrap:n.bootstrap||Ua,declarations:n.declarations||Ua,imports:n.imports||Ua,exports:n.exports||Ua,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function Hz(n,t){if(n==null)return Eb;let e={};for(let r in n)if(n.hasOwnProperty(r)){let o=n[r],s,i,a=kc.None;Array.isArray(o)?(a=o[0],s=o[1],i=o[2]??s):(s=o,i=o),t?(e[s]=a!==kc.None?[r,a]:r,t[s]=i):e[s]=r}return e}function wd(n){return Fb(()=>{let t=V3(n);return U3(t),t})}function P3(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone===!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function _p(n){return n[kue]||null}function $3(n){return n[_ue]||null}function L3(n){return n[Aue]||null}function B3(n){let t=_p(n)||$3(n)||L3(n);return t!==null?t.standalone:!1}function z3(n,t){let e=n[Rue]||null;if(!e&&t===!0)throw new Error(`Type ${bs(n)} does not have '\u0275mod' property.`);return e}function V3(n){let t={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:t,inputTransforms:null,inputConfig:n.inputs||Eb,exportAs:n.exportAs||null,standalone:n.standalone===!0,signals:n.signals===!0,selectors:n.selectors||Ua,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Hz(n.inputs,t),outputs:Hz(n.outputs),debugInfo:null}}function U3(n){n.features?.forEach(t=>t(n))}function qz(n,t){if(!n)return null;let e=t?L3:spe;return()=>(typeof n=="function"?n():n).map(r=>e(r)).filter(ipe)}function ape(n){let t=0,e=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(let o of e)t=Math.imul(31,t)+o.charCodeAt(0)<<0;return t+=2147483648,"c"+t}function DI(n){return{\u0275providers:n}}function lpe(...n){return{\u0275providers:j3(!0,n),\u0275fromNgModule:!0}}function j3(n,...t){let e=[],r=new Set,o,s=i=>{e.push(i)};return rA(t,i=>{let a=i;h_(a,s,[],r)&&(o||=[],o.push(a))}),o!==void 0&&G3(o,s),e}function G3(n,t){for(let e=0;e<n.length;e++){let{ngModule:r,providers:o}=n[e];iA(o,s=>{t(s,r)})}}function h_(n,t,e,r){if(n=ci(n),!n)return!1;let o=null,s=zz(n),i=!s&&_p(n);if(!s&&!i){let l=n.ngModule;if(s=zz(l),s)o=l;else return!1}else{if(i&&!i.standalone)return!1;o=n}let a=r.has(o);if(i){if(a)return!1;if(r.add(o),i.dependencies){let l=typeof i.dependencies=="function"?i.dependencies():i.dependencies;for(let c of l)h_(c,t,e,r)}}else if(s){if(s.imports!=null&&!a){r.add(o);let c;try{rA(s.imports,u=>{h_(u,t,e,r)&&(c||=[],c.push(u))})}finally{}c!==void 0&&G3(c,t)}if(!a){let c=hd(o)||(()=>new o);t({provide:o,useFactory:c,deps:Ua},o),t({provide:M3,useValue:o,multi:!0},o),t({provide:_g,useValue:()=>Xe(o),multi:!0},o)}let l=s.providers;if(l!=null&&!a){let c=n;iA(l,u=>{t(u,c)})}}else return!1;return o!==n&&n.providers!==void 0}function iA(n,t){for(let e of n)N3(e)&&(e=e.\u0275providers),Array.isArray(e)?iA(e,t):t(e)}var cpe=Fn({provide:String,useValue:Fn});function W3(n){return n!==null&&typeof n=="object"&&cpe in n}function upe(n){return!!(n&&n.useExisting)}function ppe(n){return!!(n&&n.useFactory)}function m_(n){return typeof n=="function"}var kI=new ot(""),ZC={},fpe={},e_;function aA(){return e_===void 0&&(e_=new iI),e_}var ko=class{},Nb=class extends ko{get destroyed(){return this._destroyed}constructor(t,e,r,o){super(),this.parent=e,this.source=r,this.scopes=o,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,x_(t,i=>this.processProvider(i)),this.records.set(R3,Sg(void 0,this)),o.has("environment")&&this.records.set(ko,Sg(void 0,this));let s=this.records.get(kI);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(M3,Ua,Ot.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let t=un(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let e=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of e)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),un(t)}}onDestroy(t){return this.assertNotDestroyed(),this._onDestroyHooks.push(t),()=>this.removeOnDestroy(t)}runInContext(t){this.assertNotDestroyed();let e=Dp(this),r=ys(void 0),o;try{return t()}finally{Dp(e),ys(r)}}get(t,e=Tb,r=Ot.Default){if(this.assertNotDestroyed(),t.hasOwnProperty(Uz))return t[Uz](this);r=EI(r);let o,s=Dp(this),i=ys(void 0);try{if(!(r&Ot.SkipSelf)){let l=this.records.get(t);if(l===void 0){let c=ype(t)&&TI(t);c&&this.injectableDefInScope(c)?l=Sg(g_(t),ZC):l=null,this.records.set(t,l)}if(l!=null)return this.hydrate(t,l)}let a=r&Ot.Self?aA():this.parent;return e=r&Ot.Optional&&e===Tb?null:e,a.get(t,e)}catch(a){if(a.name==="NullInjectorError"){if((a[oI]=a[oI]||[]).unshift(bs(t)),s)throw a;return Uue(a,t,"R3InjectorError",this.source)}else throw a}finally{ys(i),Dp(s)}}resolveInjectorInitializers(){let t=un(null),e=Dp(this),r=ys(void 0),o;try{let s=this.get(_g,Ua,Ot.Self);for(let i of s)i()}finally{Dp(e),ys(r),un(t)}}toString(){let t=[],e=this.records;for(let r of e.keys())t.push(bs(r));return`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Je(205,!1)}processProvider(t){t=ci(t);let e=m_(t)?t:ci(t&&t.provide),r=hpe(t);if(!m_(t)&&t.multi===!0){let o=this.records.get(e);o||(o=Sg(void 0,ZC,!0),o.factory=()=>f_(o.multi),this.records.set(e,o)),e=t,o.multi.push(t)}this.records.set(e,r)}hydrate(t,e){let r=un(null);try{return e.value===ZC&&(e.value=fpe,e.value=e.factory()),typeof e.value=="object"&&e.value&&xpe(e.value)&&this._ngOnDestroyHooks.add(e.value),e.value}finally{un(r)}}injectableDefInScope(t){if(!t.providedIn)return!1;let e=ci(t.providedIn);return typeof e=="string"?e==="any"||this.scopes.has(e):this.injectorDefTypes.has(e)}removeOnDestroy(t){let e=this._onDestroyHooks.indexOf(t);e!==-1&&this._onDestroyHooks.splice(e,1)}};function g_(n){let t=TI(n),e=t!==null?t.factory:hd(n);if(e!==null)return e;if(n instanceof ot)throw new Je(204,!1);if(n instanceof Function)return dpe(n);throw new Je(204,!1)}function dpe(n){if(n.length>0)throw new Je(204,!1);let e=Nue(n);return e!==null?()=>e.factory(n):()=>new n}function hpe(n){if(W3(n))return Sg(void 0,n.useValue);{let t=mpe(n);return Sg(t,ZC)}}function mpe(n,t,e){let r;if(m_(n)){let o=ci(n);return hd(o)||g_(o)}else if(W3(n))r=()=>ci(n.useValue);else if(ppe(n))r=()=>n.useFactory(...f_(n.deps||[]));else if(upe(n))r=()=>Xe(ci(n.useExisting));else{let o=ci(n&&(n.useClass||n.provide));if(gpe(n))r=()=>new o(...f_(n.deps));else return hd(o)||g_(o)}return r}function Sg(n,t,e=!1){return{factory:n,value:t,multi:e?[]:void 0}}function gpe(n){return!!n.deps}function xpe(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function ype(n){return typeof n=="function"||typeof n=="object"&&n instanceof ot}function x_(n,t){for(let e of n)Array.isArray(e)?x_(e,t):e&&N3(e)?x_(e.\u0275providers,t):t(e)}function Wi(n,t){n instanceof Nb&&n.assertNotDestroyed();let e,r=Dp(n),o=ys(void 0);try{return t()}finally{Dp(r),ys(o)}}function H3(){return D3()!==void 0||Bue()!=null}function bpe(n){if(!H3())throw new Je(-203,!1)}function vpe(n){let t=xo.ng;if(t&&t.\u0275compilerFacade)return t.\u0275compilerFacade;throw new Error("JIT compiler unavailable")}function wpe(n){return typeof n=="function"}var Ac=0,Rt=1,gt=2,yo=3,Ui=4,Hi=5,aI=6,Db=7,ji=8,Ag=9,Gi=10,Ko=11,kb=12,Kz=13,Fg=14,Ha=15,Pb=16,Tg=17,_c=18,_I=19,q3=20,kp=21,t_=22,md=23,qa=25,K3=1;var gd=7,lI=8,Rg=9,Bs=10,lA=function(n){return n[n.None=0]="None",n[n.HasTransplantedViews=2]="HasTransplantedViews",n}(lA||{});function fd(n){return Array.isArray(n)&&typeof n[K3]=="object"}function Rc(n){return Array.isArray(n)&&n[K3]===!0}function X3(n){return(n.flags&4)!==0}function AI(n){return n.componentOffset>-1}function cA(n){return(n.flags&1)===1}function $b(n){return!!n.template}function Cpe(n){return(n[gt]&512)!==0}var y_=class{constructor(t,e,r){this.previousValue=t,this.currentValue=e,this.firstChange=r}isFirstChange(){return this.firstChange}};function Y3(n,t,e,r){t!==null?t.applyValueToInputSignal(t,r):n[e]=r}function Lb(){return Z3}function Z3(n){return n.type.prototype.ngOnChanges&&(n.setInput=Spe),Ipe}Lb.ngInherit=!0;function Ipe(){let n=J3(this),t=n?.current;if(t){let e=n.previous;if(e===Eb)n.previous=t;else for(let r in t)e[r]=t[r];n.current=null,this.ngOnChanges(t)}}function Spe(n,t,e,r,o){let s=this.declaredInputs[r],i=J3(n)||Tpe(n,{previous:Eb,current:null}),a=i.current||(i.current={}),l=i.previous,c=l[s];a[s]=new y_(c&&c.currentValue,e,l===Eb),Y3(n,t,o,e)}var Q3="__ngSimpleChanges__";function J3(n){return n[Q3]||null}function Tpe(n,t){return n[Q3]=t}var Xz=null;var ja=function(n,t,e){Xz?.(n,t,e)},Epe="svg",Npe="math",Dpe=!1;function kpe(){return Dpe}function Ka(n){for(;Array.isArray(n);)n=n[Ac];return n}function _pe(n,t){return Ka(t[n])}function qi(n,t){return Ka(t[n.index])}function eV(n,t){return n.data[t]}function Ape(n,t){return n[t]}function Rp(n,t){let e=t[n];return fd(e)?e:e[Ac]}function Rpe(n){return(n[gt]&4)===4}function uA(n){return(n[gt]&128)===128}function Mpe(n){return Rc(n[yo])}function cI(n,t){return t==null?null:n[t]}function tV(n){n[Tg]=0}function Ope(n){n[gt]&1024||(n[gt]|=1024,uA(n)&&_b(n))}function Fpe(n,t){for(;n>0;)t=t[Fg],n--;return t}function pA(n){return!!(n[gt]&9216||n[md]?.dirty)}function b_(n){n[Gi].changeDetectionScheduler?.notify(1),pA(n)?_b(n):n[gt]&64&&(kpe()?(n[gt]|=1024,_b(n)):n[Gi].changeDetectionScheduler?.notify())}function _b(n){n[Gi].changeDetectionScheduler?.notify();let t=Ab(n);for(;t!==null&&!(t[gt]&8192||(t[gt]|=8192,!uA(t)));)t=Ab(t)}function nV(n,t){if((n[gt]&256)===256)throw new Je(911,!1);n[kp]===null&&(n[kp]=[]),n[kp].push(t)}function Ppe(n,t){if(n[kp]===null)return;let e=n[kp].indexOf(t);e!==-1&&n[kp].splice(e,1)}function Ab(n){let t=n[yo];return Rc(t)?t[yo]:t}var Bt={lFrame:pV(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function $pe(){return Bt.lFrame.elementDepthCount}function Lpe(){Bt.lFrame.elementDepthCount++}function Bpe(){Bt.lFrame.elementDepthCount--}function rV(){return Bt.bindingsEnabled}function zpe(){return Bt.skipHydrationRootTNode!==null}function Vpe(n){return Bt.skipHydrationRootTNode===n}function Upe(){Bt.skipHydrationRootTNode=null}function qn(){return Bt.lFrame.lView}function Ya(){return Bt.lFrame.tView}function Pg(n){return Bt.lFrame.contextLView=n,n[ji]}function $g(n){return Bt.lFrame.contextLView=null,n}function Ki(){let n=oV();for(;n!==null&&n.type===64;)n=n.parent;return n}function oV(){return Bt.lFrame.currentTNode}function jpe(){let n=Bt.lFrame,t=n.currentTNode;return n.isParent?t:t.parent}function Bb(n,t){let e=Bt.lFrame;e.currentTNode=n,e.isParent=t}function sV(){return Bt.lFrame.isParent}function Gpe(){Bt.lFrame.isParent=!1}function iV(){let n=Bt.lFrame,t=n.bindingRootIndex;return t===-1&&(t=n.bindingRootIndex=n.tView.bindingStartIndex),t}function Wpe(n){return Bt.lFrame.bindingIndex=n}function aV(){return Bt.lFrame.bindingIndex++}function Hpe(){return Bt.lFrame.inI18n}function qpe(n,t){let e=Bt.lFrame;e.bindingIndex=e.bindingRootIndex=n,v_(t)}function Kpe(){return Bt.lFrame.currentDirectiveIndex}function v_(n){Bt.lFrame.currentDirectiveIndex=n}function lV(){return Bt.lFrame.currentQueryIndex}function fA(n){Bt.lFrame.currentQueryIndex=n}function Xpe(n){let t=n[Rt];return t.type===2?t.declTNode:t.type===1?n[Hi]:null}function cV(n,t,e){if(e&Ot.SkipSelf){let o=t,s=n;for(;o=o.parent,o===null&&!(e&Ot.Host);)if(o=Xpe(s),o===null||(s=s[Fg],o.type&10))break;if(o===null)return!1;t=o,n=s}let r=Bt.lFrame=uV();return r.currentTNode=t,r.lView=n,!0}function dA(n){let t=uV(),e=n[Rt];Bt.lFrame=t,t.currentTNode=e.firstChild,t.lView=n,t.tView=e,t.contextLView=n,t.bindingIndex=e.bindingStartIndex,t.inI18n=!1}function uV(){let n=Bt.lFrame,t=n===null?null:n.child;return t===null?pV(n):t}function pV(n){let t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=t),t}function fV(){let n=Bt.lFrame;return Bt.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var dV=fV;function hA(){let n=fV();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function Ype(n){return(Bt.lFrame.contextLView=Fpe(n,Bt.lFrame.contextLView))[ji]}function mA(){return Bt.lFrame.selectedIndex}function xd(n){Bt.lFrame.selectedIndex=n}function Zpe(){let n=Bt.lFrame;return eV(n.tView,n.selectedIndex)}function Qpe(){return Bt.lFrame.currentNamespace}var hV=!0;function gA(){return hV}function xA(n){hV=n}function Jpe(n,t,e){let{ngOnChanges:r,ngOnInit:o,ngDoCheck:s}=t.type.prototype;if(r){let i=Z3(t);(e.preOrderHooks??=[]).push(n,i),(e.preOrderCheckHooks??=[]).push(n,i)}o&&(e.preOrderHooks??=[]).push(0-n,o),s&&((e.preOrderHooks??=[]).push(n,s),(e.preOrderCheckHooks??=[]).push(n,s))}function yA(n,t){for(let e=t.directiveStart,r=t.directiveEnd;e<r;e++){let s=n.data[e].type.prototype,{ngAfterContentInit:i,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:c,ngOnDestroy:u}=s;i&&(n.contentHooks??=[]).push(-e,i),a&&((n.contentHooks??=[]).push(e,a),(n.contentCheckHooks??=[]).push(e,a)),l&&(n.viewHooks??=[]).push(-e,l),c&&((n.viewHooks??=[]).push(e,c),(n.viewCheckHooks??=[]).push(e,c)),u!=null&&(n.destroyHooks??=[]).push(e,u)}}function QC(n,t,e){mV(n,t,3,e)}function JC(n,t,e,r){(n[gt]&3)===e&&mV(n,t,e,r)}function n_(n,t){let e=n[gt];(e&3)===t&&(e&=16383,e+=1,n[gt]=e)}function mV(n,t,e,r){let o=r!==void 0?n[Tg]&65535:0,s=r??-1,i=t.length-1,a=0;for(let l=o;l<i;l++)if(typeof t[l+1]=="number"){if(a=t[l],r!=null&&a>=r)break}else t[l]<0&&(n[Tg]+=65536),(a<s||s==-1)&&(efe(n,e,t,l),n[Tg]=(n[Tg]&4294901760)+l+2),l++}function Yz(n,t){ja(4,n,t);let e=un(null);try{t.call(n)}finally{un(e),ja(5,n,t)}}function efe(n,t,e,r){let o=e[r]<0,s=e[r+1],i=o?-e[r]:e[r],a=n[i];o?n[gt]>>14<n[Tg]>>16&&(n[gt]&3)===t&&(n[gt]+=16384,Yz(a,s)):Yz(a,s)}var kg=-1,Rb=class{constructor(t,e,r){this.factory=t,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=r}};function tfe(n){return n instanceof Rb}function nfe(n){return(n.flags&8)!==0}function rfe(n){return(n.flags&16)!==0}function gV(n){return n!==kg}function uI(n){return n&32767}function ofe(n){return n>>16}function pI(n,t){let e=ofe(n),r=t;for(;e>0;)r=r[Fg],e--;return r}var w_=!0;function fI(n){let t=w_;return w_=n,t}var sfe=256,xV=sfe-1,yV=5,ife=0,Ga={};function afe(n,t,e){let r;typeof e=="string"?r=e.charCodeAt(0)||0:e.hasOwnProperty(Ib)&&(r=e[Ib]),r==null&&(r=e[Ib]=ife++);let o=r&xV,s=1<<o;t.data[n+(o>>yV)]|=s}function bV(n,t){let e=vV(n,t);if(e!==-1)return e;let r=t[Rt];r.firstCreatePass&&(n.injectorIndex=t.length,r_(r.data,n),r_(t,null),r_(r.blueprint,null));let o=bA(n,t),s=n.injectorIndex;if(gV(o)){let i=uI(o),a=pI(o,t),l=a[Rt].data;for(let c=0;c<8;c++)t[s+c]=a[i+c]|l[i+c]}return t[s+8]=o,s}function r_(n,t){n.push(0,0,0,0,0,0,0,0,t)}function vV(n,t){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||t[n.injectorIndex+8]===null?-1:n.injectorIndex}function bA(n,t){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let e=0,r=null,o=t;for(;o!==null;){if(r=TV(o),r===null)return kg;if(e++,o=o[Fg],r.injectorIndex!==-1)return r.injectorIndex|e<<16}return kg}function lfe(n,t,e){afe(n,t,e)}function wV(n,t,e){if(e&Ot.Optional||n!==void 0)return n;tA(t,"NodeInjector")}function CV(n,t,e,r){if(e&Ot.Optional&&r===void 0&&(r=null),!(e&(Ot.Self|Ot.Host))){let o=n[Ag],s=ys(void 0);try{return o?o.get(t,r,e&Ot.Optional):k3(t,r,e&Ot.Optional)}finally{ys(s)}}return wV(r,t,e)}function IV(n,t,e,r=Ot.Default,o){if(n!==null){if(t[gt]&2048&&!(r&Ot.Self)){let i=ffe(n,t,e,r,Ga);if(i!==Ga)return i}let s=SV(n,t,e,r,Ga);if(s!==Ga)return s}return CV(t,e,r,o)}function SV(n,t,e,r,o){let s=ufe(e);if(typeof s=="function"){if(!cV(t,n,r))return r&Ot.Host?wV(o,e,r):CV(t,e,r,o);try{let i;if(i=s(r),i==null&&!(r&Ot.Optional))tA(e);else return i}finally{dV()}}else if(typeof s=="number"){let i=null,a=vV(n,t),l=kg,c=r&Ot.Host?t[Ha][Hi]:null;for((a===-1||r&Ot.SkipSelf)&&(l=a===-1?bA(n,t):t[a+8],l===kg||!Qz(r,!1)?a=-1:(i=t[Rt],a=uI(l),t=pI(l,t)));a!==-1;){let u=t[Rt];if(Zz(s,a,u.data)){let p=cfe(a,t,e,i,r,c);if(p!==Ga)return p}l=t[a+8],l!==kg&&Qz(r,t[Rt].data[a+8]===c)&&Zz(s,a,t)?(i=u,a=uI(l),t=pI(l,t)):a=-1}}return o}function cfe(n,t,e,r,o,s){let i=t[Rt],a=i.data[n+8],l=r==null?AI(a)&&w_:r!=i&&(a.type&3)!==0,c=o&Ot.Host&&s===a,u=eI(a,i,e,l,c);return u!==null?Mg(t,i,u,a):Ga}function eI(n,t,e,r,o){let s=n.providerIndexes,i=t.data,a=s&1048575,l=n.directiveStart,c=n.directiveEnd,u=s>>20,p=r?a:a+u,f=o?a+u:c;for(let d=p;d<f;d++){let h=i[d];if(d<l&&e===h||d>=l&&h.type===e)return d}if(o){let d=i[l];if(d&&$b(d)&&d.type===e)return l}return null}function Mg(n,t,e,r){let o=n[e],s=t.data;if(tfe(o)){let i=o;i.resolving&&Oue(Mue(s[e]));let a=fI(i.canSeeViewProviders);i.resolving=!0;let l,c=i.injectImpl?ys(i.injectImpl):null,u=cV(n,r,Ot.Default);try{o=n[e]=i.factory(void 0,s,n,r),t.firstCreatePass&&e>=r.directiveStart&&Jpe(e,s[e],t)}finally{c!==null&&ys(c),fI(a),i.resolving=!1,dV()}}return o}function ufe(n){if(typeof n=="string")return n.charCodeAt(0)||0;let t=n.hasOwnProperty(Ib)?n[Ib]:void 0;return typeof t=="number"?t>=0?t&xV:pfe:t}function Zz(n,t,e){let r=1<<n;return!!(e[t+(n>>yV)]&r)}function Qz(n,t){return!(n&Ot.Self)&&!(n&Ot.Host&&t)}var dd=class{constructor(t,e){this._tNode=t,this._lView=e}get(t,e,r){return IV(this._tNode,this._lView,t,EI(r),e)}};function pfe(){return new dd(Ki(),qn())}function vA(n){return Fb(()=>{let t=n.prototype.constructor,e=t[rI]||C_(t),r=Object.prototype,o=Object.getPrototypeOf(n.prototype).constructor;for(;o&&o!==r;){let s=o[rI]||C_(o);if(s&&s!==e)return s;o=Object.getPrototypeOf(o)}return s=>new s})}function C_(n){return I3(n)?()=>{let t=C_(ci(n));return t&&t()}:hd(n)}function ffe(n,t,e,r,o){let s=n,i=t;for(;s!==null&&i!==null&&i[gt]&2048&&!(i[gt]&512);){let a=SV(s,i,e,r|Ot.Self,Ga);if(a!==Ga)return a;let l=s.parent;if(!l){let c=i[q3];if(c){let u=c.get(e,Ga,r);if(u!==Ga)return u}l=TV(i),i=i[Fg]}s=l}return o}function TV(n){let t=n[Rt],e=t.type;return e===2?t.declTNode:e===1?n[Hi]:null}function Jz(n,t=null,e=null,r){let o=EV(n,t,e,r);return o.resolveInjectorInitializers(),o}function EV(n,t=null,e=null,r,o=new Set){let s=[e||Ua,lpe(n)];return r=r||(typeof n=="object"?void 0:bs(n)),new Nb(s,t||aA(),r||null,o)}var Za=(()=>{let t=class t{static create(r,o){if(Array.isArray(r))return Jz({name:""},o,r,"");{let s=r.name??"";return Jz({name:s},r.parent,r.providers,s)}}};t.THROW_IF_NOT_FOUND=Tb,t.NULL=new iI,t.\u0275prov=Ze({token:t,providedIn:"any",factory:()=>Xe(R3)}),t.__NG_ELEMENT_ID__=-1;let n=t;return n})();var dfe="ngOriginalError";function o_(n){return n[dfe]}var Xa=class{constructor(){this._console=console}handleError(t){let e=this._findOriginalError(t);this._console.error("ERROR",t),e&&this._console.error("ORIGINAL ERROR",e)}_findOriginalError(t){let e=t&&o_(t);for(;e&&o_(e);)e=o_(e);return e||null}},NV=new ot("",{providedIn:"root",factory:()=>ke(Xa).handleError.bind(void 0)}),wA=(()=>{let t=class t{};t.__NG_ELEMENT_ID__=hfe,t.__NG_ENV_ID__=r=>r;let n=t;return n})(),I_=class extends wA{constructor(t){super(),this._lView=t}onDestroy(t){return nV(this._lView,t),()=>Ppe(this._lView,t)}};function hfe(){return new I_(qn())}function mfe(){return Lg(Ki(),qn())}function Lg(n,t){return new Mc(qi(n,t))}var Mc=(()=>{let t=class t{constructor(r){this.nativeElement=r}};t.__NG_ELEMENT_ID__=mfe;let n=t;return n})();function gfe(n){return n instanceof Mc?n.nativeElement:n}var S_=class extends qo{constructor(t=!1){super(),this.destroyRef=void 0,this.__isAsync=t,H3()&&(this.destroyRef=ke(wA,{optional:!0})??void 0)}emit(t){let e=un(null);try{super.next(t)}finally{un(e)}}subscribe(t,e,r){let o=t,s=e||(()=>null),i=r;if(t&&typeof t=="object"){let l=t;o=l.next?.bind(l),s=l.error?.bind(l),i=l.complete?.bind(l)}this.__isAsync&&(s=s_(s),o&&(o=s_(o)),i&&(i=s_(i)));let a=super.subscribe({next:o,error:s,complete:i});return t instanceof Wr&&t.add(a),a}};function s_(n){return t=>{setTimeout(n,void 0,t)}}var Do=S_;function xfe(){return this._results[Symbol.iterator]()}var T_=class n{get changes(){return this._changes??=new Do}constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;let e=n.prototype;e[Symbol.iterator]||(e[Symbol.iterator]=xfe)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,e){this.dirty=!1;let r=Wue(t);(this._changesDetected=!Gue(this._results,r,e))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(t){this._onDirty=t}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}};function DV(n){return(n.flags&128)===128}var kV=new Map,yfe=0;function bfe(){return yfe++}function vfe(n){kV.set(n[_I],n)}function wfe(n){kV.delete(n[_I])}var e3="__ngContext__";function yd(n,t){fd(t)?(n[e3]=t[_I],vfe(t)):n[e3]=t}function _V(n){return RV(n[kb])}function AV(n){return RV(n[Ui])}function RV(n){for(;n!==null&&!Rc(n);)n=n[Ui];return n}var E_;function MV(n){E_=n}function Cfe(){if(E_!==void 0)return E_;if(typeof document<"u")return document;throw new Je(210,!1)}var RI=new ot("",{providedIn:"root",factory:()=>Ife}),Ife="ng",CA=new ot(""),Qa=new ot("",{providedIn:"platform",factory:()=>"unknown"});var IA=new ot("",{providedIn:"root",factory:()=>Cfe().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var Sfe="h",Tfe="b";var Efe=()=>null;function SA(n,t,e=!1){return Efe(n,t,e)}var OV=!1,Nfe=new ot("",{providedIn:"root",factory:()=>OV});var dI=class{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${v3})`}};function TA(n){return n instanceof dI?n.changingThisBreaksApplicationSecurity:n}function FV(n,t){let e=Dfe(n);if(e!=null&&e!==t){if(e==="ResourceURL"&&t==="URL")return!0;throw new Error(`Required a safe ${t}, got a ${e} (see ${v3})`)}return e===t}function Dfe(n){return n instanceof dI&&n.getTypeName()||null}var kfe=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function PV(n){return n=String(n),n.match(kfe)?n:"unsafe:"+n}var EA=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(EA||{});function $V(n){let t=_fe();return t?t.sanitize(EA.URL,n)||"":FV(n,"URL")?TA(n):PV(eA(n))}function _fe(){let n=qn();return n&&n[Gi].sanitizer}function LV(n){return n instanceof Function?n():n}function Afe(n){return(n??ke(Za)).get(Qa)==="browser"}var Cd=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(Cd||{}),Rfe;function NA(n,t){return Rfe(n,t)}function Eg(n,t,e,r,o){if(r!=null){let s,i=!1;Rc(r)?s=r:fd(r)&&(i=!0,r=r[Ac]);let a=Ka(r);n===0&&e!==null?o==null?jV(t,e,a):hI(t,e,a,o||null,!0):n===1&&e!==null?hI(t,e,a,o||null,!0):n===2?Xfe(t,a,i):n===3&&t.destroyNode(a),s!=null&&Zfe(t,n,s,e,o)}}function Mfe(n,t){return n.createText(t)}function Ofe(n,t,e){n.setValue(t,e)}function BV(n,t,e){return n.createElement(t,e)}function Ffe(n,t){zV(n,t),t[Ac]=null,t[Hi]=null}function Pfe(n,t,e,r,o,s){r[Ac]=o,r[Hi]=t,MI(n,r,e,1,o,s)}function zV(n,t){t[Gi].changeDetectionScheduler?.notify(1),MI(n,t,t[Ko],2,null,null)}function $fe(n){let t=n[kb];if(!t)return i_(n[Rt],n);for(;t;){let e=null;if(fd(t))e=t[kb];else{let r=t[Bs];r&&(e=r)}if(!e){for(;t&&!t[Ui]&&t!==n;)fd(t)&&i_(t[Rt],t),t=t[yo];t===null&&(t=n),fd(t)&&i_(t[Rt],t),e=t&&t[Ui]}t=e}}function Lfe(n,t,e,r){let o=Bs+r,s=e.length;r>0&&(e[o-1][Ui]=t),r<s-Bs?(t[Ui]=e[o],A3(e,Bs+r,t)):(e.push(t),t[Ui]=null),t[yo]=e;let i=t[Pb];i!==null&&e!==i&&Bfe(i,t);let a=t[_c];a!==null&&a.insertView(n),b_(t),t[gt]|=128}function Bfe(n,t){let e=n[Rg],o=t[yo][yo][Ha];t[Ha]!==o&&(n[gt]|=lA.HasTransplantedViews),e===null?n[Rg]=[t]:e.push(t)}function VV(n,t){let e=n[Rg],r=e.indexOf(t);e.splice(r,1)}function N_(n,t){if(n.length<=Bs)return;let e=Bs+t,r=n[e];if(r){let o=r[Pb];o!==null&&o!==n&&VV(o,r),t>0&&(n[e-1][Ui]=r[Ui]);let s=sI(n,Bs+t);Ffe(r[Rt],r);let i=s[_c];i!==null&&i.detachView(s[Rt]),r[yo]=null,r[Ui]=null,r[gt]&=-129}return r}function UV(n,t){if(!(t[gt]&256)){let e=t[Ko];e.destroyNode&&MI(n,t,e,3,null,null),$fe(t)}}function i_(n,t){if(t[gt]&256)return;let e=un(null);try{t[gt]&=-129,t[gt]|=256,t[md]&&lz(t[md]),Vfe(n,t),zfe(n,t),t[Rt].type===1&&t[Ko].destroy();let r=t[Pb];if(r!==null&&Rc(t[yo])){r!==t[yo]&&VV(r,t);let o=t[_c];o!==null&&o.detachView(n)}wfe(t)}finally{un(e)}}function zfe(n,t){let e=n.cleanup,r=t[Db];if(e!==null)for(let s=0;s<e.length-1;s+=2)if(typeof e[s]=="string"){let i=e[s+3];i>=0?r[i]():r[-i].unsubscribe(),s+=2}else{let i=r[e[s+1]];e[s].call(i)}r!==null&&(t[Db]=null);let o=t[kp];if(o!==null){t[kp]=null;for(let s=0;s<o.length;s++){let i=o[s];i()}}}function Vfe(n,t){let e;if(n!=null&&(e=n.destroyHooks)!=null)for(let r=0;r<e.length;r+=2){let o=t[e[r]];if(!(o instanceof Rb)){let s=e[r+1];if(Array.isArray(s))for(let i=0;i<s.length;i+=2){let a=o[s[i]],l=s[i+1];ja(4,a,l);try{l.call(a)}finally{ja(5,a,l)}}else{ja(4,o,s);try{s.call(o)}finally{ja(5,o,s)}}}}}function Ufe(n,t,e){return jfe(n,t.parent,e)}function jfe(n,t,e){let r=t;for(;r!==null&&r.type&40;)t=r,r=t.parent;if(r===null)return e[Ac];{let{componentOffset:o}=r;if(o>-1){let{encapsulation:s}=n.data[r.directiveStart+o];if(s===Wa.None||s===Wa.Emulated)return null}return qi(r,e)}}function hI(n,t,e,r,o){n.insertBefore(t,e,r,o)}function jV(n,t,e){n.appendChild(t,e)}function t3(n,t,e,r,o){r!==null?hI(n,t,e,r,o):jV(n,t,e)}function Gfe(n,t,e,r){n.removeChild(t,e,r)}function DA(n,t){return n.parentNode(t)}function Wfe(n,t){return n.nextSibling(t)}function Hfe(n,t,e){return Kfe(n,t,e)}function qfe(n,t,e){return n.type&40?qi(n,e):null}var Kfe=qfe,n3;function kA(n,t,e,r){let o=Ufe(n,r,t),s=t[Ko],i=r.parent||t[Hi],a=Hfe(i,r,t);if(o!=null)if(Array.isArray(e))for(let l=0;l<e.length;l++)t3(s,o,e[l],a,!1);else t3(s,o,e,a,!1);n3!==void 0&&n3(s,r,t,e,o)}function tI(n,t){if(t!==null){let e=t.type;if(e&3)return qi(t,n);if(e&4)return D_(-1,n[t.index]);if(e&8){let r=t.child;if(r!==null)return tI(n,r);{let o=n[t.index];return Rc(o)?D_(-1,o):Ka(o)}}else{if(e&32)return NA(t,n)()||Ka(n[t.index]);{let r=GV(n,t);if(r!==null){if(Array.isArray(r))return r[0];let o=Ab(n[Ha]);return tI(o,r)}else return tI(n,t.next)}}}return null}function GV(n,t){if(t!==null){let r=n[Ha][Hi],o=t.projection;return r.projection[o]}return null}function D_(n,t){let e=Bs+n+1;if(e<t.length){let r=t[e],o=r[Rt].firstChild;if(o!==null)return tI(r,o)}return t[gd]}function Xfe(n,t,e){let r=DA(n,t);r&&Gfe(n,r,t,e)}function _A(n,t,e,r,o,s,i){for(;e!=null;){let a=r[e.index],l=e.type;if(i&&t===0&&(a&&yd(Ka(a),r),e.flags|=2),(e.flags&32)!==32)if(l&8)_A(n,t,e.child,r,o,s,!1),Eg(t,n,o,a,s);else if(l&32){let c=NA(e,r),u;for(;u=c();)Eg(t,n,o,u,s);Eg(t,n,o,a,s)}else l&16?Yfe(n,t,r,e,o,s):Eg(t,n,o,a,s);e=i?e.projectionNext:e.next}}function MI(n,t,e,r,o,s){_A(e,r,n.firstChild,t,o,s,!1)}function Yfe(n,t,e,r,o,s){let i=e[Ha],l=i[Hi].projection[r.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++){let u=l[c];Eg(t,n,o,u,s)}else{let c=l,u=i[yo];DV(r)&&(c.flags|=128),_A(n,t,c,u,o,s,!0)}}function Zfe(n,t,e,r,o){let s=e[gd],i=Ka(e);s!==i&&Eg(t,n,r,s,o);for(let a=Bs;a<e.length;a++){let l=e[a];MI(l[Rt],l,n,t,r,s)}}function Qfe(n,t,e){n.setAttribute(t,"style",e)}function WV(n,t,e){e===""?n.removeAttribute(t,"class"):n.setAttribute(t,"class",e)}function HV(n,t,e){let{mergedAttrs:r,classes:o,styles:s}=e;r!==null&&d_(n,t,r),o!==null&&WV(n,t,o),s!==null&&Qfe(n,t,s)}var zb={};function oo(n=1){qV(Ya(),qn(),mA()+n,!1)}function qV(n,t,e,r){if(!r)if((t[gt]&3)===3){let s=n.preOrderCheckHooks;s!==null&&QC(t,s,e)}else{let s=n.preOrderHooks;s!==null&&JC(t,s,0,e)}xd(e)}function Tr(n,t=Ot.Default){let e=qn();if(e===null)return Xe(n,t);let r=Ki();return IV(r,e,ci(n),t)}function KV(){let n="invalid";throw new Error(n)}function XV(n,t,e,r,o,s){let i=un(null);try{let a=null;o&kc.SignalBased&&(a=t[r][oz]),a!==null&&a.transformFn!==void 0&&(s=a.transformFn(s)),o&kc.HasDecoratorInputTransform&&(s=n.inputTransforms[r].call(t,s)),n.setInput!==null?n.setInput(t,a,s,e,r):Y3(t,a,r,s)}finally{un(i)}}function Jfe(n,t){let e=n.hostBindingOpCodes;if(e!==null)try{for(let r=0;r<e.length;r++){let o=e[r];if(o<0)xd(~o);else{let s=o,i=e[++r],a=e[++r];qpe(i,s);let l=t[s];a(2,l)}}}finally{xd(-1)}}function OI(n,t,e,r,o,s,i,a,l,c,u){let p=t.blueprint.slice();return p[Ac]=o,p[gt]=r|4|128|8|64,(c!==null||n&&n[gt]&2048)&&(p[gt]|=2048),tV(p),p[yo]=p[Fg]=n,p[ji]=e,p[Gi]=i||n&&n[Gi],p[Ko]=a||n&&n[Ko],p[Ag]=l||n&&n[Ag]||null,p[Hi]=s,p[_I]=bfe(),p[aI]=u,p[q3]=c,p[Ha]=t.type==2?n[Ha]:p,p}function FI(n,t,e,r,o){let s=n.data[t];if(s===null)s=ede(n,t,e,r,o),Hpe()&&(s.flags|=32);else if(s.type&64){s.type=e,s.value=r,s.attrs=o;let i=jpe();s.injectorIndex=i===null?-1:i.injectorIndex}return Bb(s,!0),s}function ede(n,t,e,r,o){let s=oV(),i=sV(),a=i?s:s&&s.parent,l=n.data[t]=ide(n,a,e,t,r,o);return n.firstChild===null&&(n.firstChild=l),s!==null&&(i?s.child==null&&l.parent!==null&&(s.child=l):s.next===null&&(s.next=l,l.prev=s)),l}function YV(n,t,e,r){if(e===0)return-1;let o=t.length;for(let s=0;s<e;s++)t.push(r),n.blueprint.push(r),n.data.push(null);return o}function ZV(n,t,e,r,o){let s=mA(),i=r&2;try{xd(-1),i&&t.length>qa&&qV(n,t,qa,!1),ja(i?2:0,o),e(r,o)}finally{xd(s),ja(i?3:1,o)}}function QV(n,t,e){if(X3(t)){let r=un(null);try{let o=t.directiveStart,s=t.directiveEnd;for(let i=o;i<s;i++){let a=n.data[i];if(a.contentQueries){let l=e[i];a.contentQueries(1,l,i)}}}finally{un(r)}}}function JV(n,t,e){rV()&&(dde(n,t,e,qi(e,t)),(e.flags&64)===64&&oU(n,t,e))}function eU(n,t,e=qi){let r=t.localNames;if(r!==null){let o=t.index+1;for(let s=0;s<r.length;s+=2){let i=r[s+1],a=i===-1?e(t,n):n[i];n[o++]=a}}}function tU(n){let t=n.tView;return t===null||t.incompleteFirstPass?n.tView=AA(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):t}function AA(n,t,e,r,o,s,i,a,l,c,u){let p=qa+r,f=p+o,d=tde(p,f),h=typeof c=="function"?c():c;return d[Rt]={type:n,blueprint:d,template:e,queries:null,viewQuery:a,declTNode:t,data:d.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:f,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof i=="function"?i():i,firstChild:null,schemas:l,consts:h,incompleteFirstPass:!1,ssrId:u}}function tde(n,t){let e=[];for(let r=0;r<t;r++)e.push(r<n?null:zb);return e}function nde(n,t,e,r){let s=r.get(Nfe,OV)||e===Wa.ShadowDom,i=n.selectRootElement(t,s);return rde(i),i}function rde(n){ode(n)}var ode=()=>null;function sde(n,t,e,r){let o=aU(t);o.push(e),n.firstCreatePass&&lU(n).push(r,o.length-1)}function ide(n,t,e,r,o,s){let i=t?t.injectorIndex:-1,a=0;return zpe()&&(a|=128),{type:e,index:r,insertBeforeIndex:null,injectorIndex:i,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:o,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function r3(n,t,e,r,o){for(let s in t){if(!t.hasOwnProperty(s))continue;let i=t[s];if(i===void 0)continue;r??={};let a,l=kc.None;Array.isArray(i)?(a=i[0],l=i[1]):a=i;let c=s;if(o!==null){if(!o.hasOwnProperty(s))continue;c=o[s]}n===0?o3(r,e,c,a,l):o3(r,e,c,a)}return r}function o3(n,t,e,r,o){let s;n.hasOwnProperty(e)?(s=n[e]).push(t,r):s=n[e]=[t,r],o!==void 0&&s.push(o)}function ade(n,t,e){let r=t.directiveStart,o=t.directiveEnd,s=n.data,i=t.attrs,a=[],l=null,c=null;for(let u=r;u<o;u++){let p=s[u],f=e?e.get(p):null,d=f?f.inputs:null,h=f?f.outputs:null;l=r3(0,p.inputs,u,l,d),c=r3(1,p.outputs,u,c,h);let m=l!==null&&i!==null&&!sA(t)?Cde(l,u,i):null;a.push(m)}l!==null&&(l.hasOwnProperty("class")&&(t.flags|=8),l.hasOwnProperty("style")&&(t.flags|=16)),t.initialInputs=a,t.inputs=l,t.outputs=c}function lde(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function cde(n,t,e,r,o,s,i,a){let l=qi(t,e),c=t.inputs,u;!a&&c!=null&&(u=c[r])?(RA(n,e,u,r,o),AI(t)&&ude(e,t.index)):t.type&3?(r=lde(r),o=i!=null?i(o,t.value||"",r):o,s.setProperty(l,r,o)):t.type&12}function ude(n,t){let e=Rp(t,n);e[gt]&16||(e[gt]|=64)}function nU(n,t,e,r){if(rV()){let o=r===null?null:{"":-1},s=mde(n,e),i,a;s===null?i=a=null:[i,a]=s,i!==null&&rU(n,t,e,i,o,a),o&&gde(e,r,o)}e.mergedAttrs=oA(e.mergedAttrs,e.attrs)}function rU(n,t,e,r,o,s){for(let c=0;c<r.length;c++)lfe(bV(e,t),n,r[c].type);yde(e,n.data.length,r.length);for(let c=0;c<r.length;c++){let u=r[c];u.providersResolver&&u.providersResolver(u)}let i=!1,a=!1,l=YV(n,t,r.length,null);for(let c=0;c<r.length;c++){let u=r[c];e.mergedAttrs=oA(e.mergedAttrs,u.hostAttrs),bde(n,e,t,l,u),xde(l,u,o),u.contentQueries!==null&&(e.flags|=4),(u.hostBindings!==null||u.hostAttrs!==null||u.hostVars!==0)&&(e.flags|=64);let p=u.type.prototype;!i&&(p.ngOnChanges||p.ngOnInit||p.ngDoCheck)&&((n.preOrderHooks??=[]).push(e.index),i=!0),!a&&(p.ngOnChanges||p.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(e.index),a=!0),l++}ade(n,e,s)}function pde(n,t,e,r,o){let s=o.hostBindings;if(s){let i=n.hostBindingOpCodes;i===null&&(i=n.hostBindingOpCodes=[]);let a=~t.index;fde(i)!=a&&i.push(a),i.push(e,r,s)}}function fde(n){let t=n.length;for(;t>0;){let e=n[--t];if(typeof e=="number"&&e<0)return e}return 0}function dde(n,t,e,r){let o=e.directiveStart,s=e.directiveEnd;AI(e)&&vde(t,e,n.data[o+e.componentOffset]),n.firstCreatePass||bV(e,t),yd(r,t);let i=e.initialInputs;for(let a=o;a<s;a++){let l=n.data[a],c=Mg(t,n,a,e);if(yd(c,t),i!==null&&wde(t,a-o,c,l,e,i),$b(l)){let u=Rp(e.index,t);u[ji]=Mg(t,n,a,e)}}}function oU(n,t,e){let r=e.directiveStart,o=e.directiveEnd,s=e.index,i=Kpe();try{xd(s);for(let a=r;a<o;a++){let l=n.data[a],c=t[a];v_(a),(l.hostBindings!==null||l.hostVars!==0||l.hostAttrs!==null)&&hde(l,c)}}finally{xd(-1),v_(i)}}function hde(n,t){n.hostBindings!==null&&n.hostBindings(1,t)}function mde(n,t){let e=n.directiveRegistry,r=null,o=null;if(e)for(let s=0;s<e.length;s++){let i=e[s];if(Jue(t,i.selectors,!1))if(r||(r=[]),$b(i))if(i.findHostDirectiveDefs!==null){let a=[];o=o||new Map,i.findHostDirectiveDefs(i,a,o),r.unshift(...a,i);let l=a.length;k_(n,t,l)}else r.unshift(i),k_(n,t,0);else o=o||new Map,i.findHostDirectiveDefs?.(i,r,o),r.push(i)}return r===null?null:[r,o]}function k_(n,t,e){t.componentOffset=e,(n.components??=[]).push(t.index)}function gde(n,t,e){if(t){let r=n.localNames=[];for(let o=0;o<t.length;o+=2){let s=e[t[o+1]];if(s==null)throw new Je(-301,!1);r.push(t[o],s)}}}function xde(n,t,e){if(e){if(t.exportAs)for(let r=0;r<t.exportAs.length;r++)e[t.exportAs[r]]=n;$b(t)&&(e[""]=n)}}function yde(n,t,e){n.flags|=1,n.directiveStart=t,n.directiveEnd=t+e,n.providerIndexes=t}function bde(n,t,e,r,o){n.data[r]=o;let s=o.factory||(o.factory=hd(o.type,!0)),i=new Rb(s,$b(o),Tr);n.blueprint[r]=i,e[r]=i,pde(n,t,r,YV(n,e,o.hostVars,zb),o)}function vde(n,t,e){let r=qi(t,n),o=tU(e),s=n[Gi].rendererFactory,i=16;e.signals?i=4096:e.onPush&&(i=64);let a=PI(n,OI(n,o,null,i,r,t,null,s.createRenderer(r,e),null,null,null));n[t.index]=a}function wde(n,t,e,r,o,s){let i=s[t];if(i!==null)for(let a=0;a<i.length;){let l=i[a++],c=i[a++],u=i[a++],p=i[a++];XV(r,e,l,c,u,p)}}function Cde(n,t,e){let r=null,o=0;for(;o<e.length;){let s=e[o];if(s===0){o+=4;continue}else if(s===5){o+=2;continue}if(typeof s=="number")break;if(n.hasOwnProperty(s)){r===null&&(r=[]);let i=n[s];for(let a=0;a<i.length;a+=3)if(i[a]===t){r.push(s,i[a+1],i[a+2],e[o+1]);break}}o+=2}return r}function sU(n,t,e,r){return[n,!0,0,t,null,r,null,e,null,null]}function iU(n,t){let e=n.contentQueries;if(e!==null){let r=un(null);try{for(let o=0;o<e.length;o+=2){let s=e[o],i=e[o+1];if(i!==-1){let a=n.data[i];fA(s),a.contentQueries(2,t[i],i)}}}finally{un(r)}}}function PI(n,t){return n[kb]?n[Kz][Ui]=t:n[kb]=t,n[Kz]=t,t}function __(n,t,e){fA(0);let r=un(null);try{t(n,e)}finally{un(r)}}function aU(n){return n[Db]||(n[Db]=[])}function lU(n){return n.cleanup||(n.cleanup=[])}function cU(n,t){let e=n[Ag],r=e?e.get(Xa,null):null;r&&r.handleError(t)}function RA(n,t,e,r,o){for(let s=0;s<e.length;){let i=e[s++],a=e[s++],l=e[s++],c=t[i],u=n.data[i];XV(u,c,r,a,l,o)}}function Ide(n,t,e){let r=_pe(t,n);Ofe(n[Ko],r,e)}function Sde(n,t){let e=Rp(t,n),r=e[Rt];Tde(r,e);let o=e[Ac];o!==null&&e[aI]===null&&(e[aI]=SA(o,e[Ag])),MA(r,e,e[ji])}function Tde(n,t){for(let e=t.length;e<n.blueprint.length;e++)t.push(n.blueprint[e])}function MA(n,t,e){dA(t);try{let r=n.viewQuery;r!==null&&__(1,r,e);let o=n.template;o!==null&&ZV(n,t,o,1,e),n.firstCreatePass&&(n.firstCreatePass=!1),t[_c]?.finishViewCreation(n),n.staticContentQueries&&iU(n,t),n.staticViewQueries&&__(2,n.viewQuery,e);let s=n.components;s!==null&&Ede(t,s)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{t[gt]&=-5,hA()}}function Ede(n,t){for(let e=0;e<t.length;e++)Sde(n,t[e])}function Nde(n,t,e,r){let o=un(null);try{let s=t.tView,a=n[gt]&4096?4096:16,l=OI(n,s,e,a,null,t,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),c=n[t.index];l[Pb]=c;let u=n[_c];return u!==null&&(l[_c]=u.createEmbeddedView(s)),MA(s,l,e),l}finally{un(o)}}function s3(n,t){return!t||t.firstChild===null||DV(n)}function Dde(n,t,e,r=!0){let o=t[Rt];if(Lfe(o,t,n,e),r){let i=D_(e,n),a=t[Ko],l=DA(a,n[gd]);l!==null&&Pfe(o,n[Hi],a,t,l,i)}let s=t[aI];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function mI(n,t,e,r,o=!1){for(;e!==null;){let s=t[e.index];s!==null&&r.push(Ka(s)),Rc(s)&&kde(s,r);let i=e.type;if(i&8)mI(n,t,e.child,r);else if(i&32){let a=NA(e,t),l;for(;l=a();)r.push(l)}else if(i&16){let a=GV(t,e);if(Array.isArray(a))r.push(...a);else{let l=Ab(t[Ha]);mI(l[Rt],l,a,r,!0)}}e=o?e.projectionNext:e.next}return r}function kde(n,t){for(let e=Bs;e<n.length;e++){let r=n[e],o=r[Rt].firstChild;o!==null&&mI(r[Rt],r,o,t)}n[gd]!==n[Ac]&&t.push(n[gd])}var uU=[];function _de(n){return n[md]??Ade(n)}function Ade(n){let t=uU.pop()??Object.create(Mde);return t.lView=n,t}function Rde(n){n.lView[md]!==n&&(n.lView=null,uU.push(n))}var Mde=lr(Ge({},sz),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{_b(n.lView)},consumerOnSignalRead(){this.lView[md]=this}}),pU=100;function fU(n,t=!0,e=0){let r=n[Gi],o=r.rendererFactory,s=!1;s||o.begin?.();try{Ode(n,e)}catch(i){throw t&&cU(n,i),i}finally{s||(o.end?.(),r.inlineEffectRunner?.flush())}}function Ode(n,t){A_(n,t);let e=0;for(;pA(n);){if(e===pU)throw new Je(103,!1);e++,A_(n,1)}}function Fde(n,t,e,r){let o=t[gt];if((o&256)===256)return;let s=!1;!s&&t[Gi].inlineEffectRunner?.flush(),dA(t);let i=null,a=null;!s&&Pde(n)&&(a=_de(t),i=iz(a));try{tV(t),Wpe(n.bindingStartIndex),e!==null&&ZV(n,t,e,2,r);let l=(o&3)===3;if(!s)if(l){let p=n.preOrderCheckHooks;p!==null&&QC(t,p,null)}else{let p=n.preOrderHooks;p!==null&&JC(t,p,0,null),n_(t,0)}if($de(t),dU(t,0),n.contentQueries!==null&&iU(n,t),!s)if(l){let p=n.contentCheckHooks;p!==null&&QC(t,p)}else{let p=n.contentHooks;p!==null&&JC(t,p,1),n_(t,1)}Jfe(n,t);let c=n.components;c!==null&&mU(t,c,0);let u=n.viewQuery;if(u!==null&&__(2,u,r),!s)if(l){let p=n.viewCheckHooks;p!==null&&QC(t,p)}else{let p=n.viewHooks;p!==null&&JC(t,p,2),n_(t,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),t[t_]){for(let p of t[t_])p();t[t_]=null}s||(t[gt]&=-73)}catch(l){throw _b(t),l}finally{a!==null&&(az(a,i),Rde(a)),hA()}}function Pde(n){return n.type!==2}function dU(n,t){for(let e=_V(n);e!==null;e=AV(e))for(let r=Bs;r<e.length;r++){let o=e[r];hU(o,t)}}function $de(n){for(let t=_V(n);t!==null;t=AV(t)){if(!(t[gt]&lA.HasTransplantedViews))continue;let e=t[Rg];for(let r=0;r<e.length;r++){let o=e[r],s=o[yo];Ope(o)}}}function Lde(n,t,e){let r=Rp(t,n);hU(r,e)}function hU(n,t){uA(n)&&A_(n,t)}function A_(n,t){let r=n[Rt],o=n[gt],s=n[md],i=!!(t===0&&o&16);if(i||=!!(o&64&&t===0),i||=!!(o&1024),i||=!!(s?.dirty&&Pk(s)),s&&(s.dirty=!1),n[gt]&=-9217,i)Fde(r,n,r.template,n[ji]);else if(o&8192){dU(n,1);let a=r.components;a!==null&&mU(n,a,1)}}function mU(n,t,e){for(let r=0;r<t.length;r++)Lde(n,t[r],e)}function OA(n){for(n[Gi].changeDetectionScheduler?.notify();n;){n[gt]|=64;let t=Ab(n);if(Cpe(n)&&!t)return n;n=t}return null}var bd=class{get rootNodes(){let t=this._lView,e=t[Rt];return mI(e,t,e.firstChild,[])}constructor(t,e,r=!0){this._lView=t,this._cdRefInjectingView=e,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[ji]}set context(t){this._lView[ji]=t}get destroyed(){return(this._lView[gt]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let t=this._lView[yo];if(Rc(t)){let e=t[lI],r=e?e.indexOf(this):-1;r>-1&&(N_(t,r),sI(e,r))}this._attachedToViewContainer=!1}UV(this._lView[Rt],this._lView)}onDestroy(t){nV(this._lView,t)}markForCheck(){OA(this._cdRefInjectingView||this._lView)}detach(){this._lView[gt]&=-129}reattach(){b_(this._lView),this._lView[gt]|=128}detectChanges(){this._lView[gt]|=1024,fU(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Je(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,zV(this._lView[Rt],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new Je(902,!1);this._appRef=t,b_(this._lView)}},vd=(()=>{let t=class t{};t.__NG_ELEMENT_ID__=Vde;let n=t;return n})(),Bde=vd,zde=class extends Bde{constructor(t,e,r){super(),this._declarationLView=t,this._declarationTContainer=e,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,e){return this.createEmbeddedViewImpl(t,e)}createEmbeddedViewImpl(t,e,r){let o=Nde(this._declarationLView,this._declarationTContainer,t,{embeddedViewInjector:e,dehydratedView:r});return new bd(o)}};function Vde(){return FA(Ki(),qn())}function FA(n,t){return n.type&4?new zde(t,n,Lg(n,t)):null}var j5e=new RegExp(`^(\\d+)*(${Tfe}|${Sfe})*(.*)`);var Ude=()=>null;function i3(n,t){return Ude(n,t)}var gI=class{},R_=class{},xI=class{};function jde(n){let t=Error(`No component factory found for ${bs(n)}.`);return t[Gde]=n,t}var Gde="ngComponent";var M_=class{resolveComponentFactory(t){throw jde(t)}},$I=(()=>{let t=class t{};t.NULL=new M_;let n=t;return n})(),Mb=class{},LI=(()=>{let t=class t{constructor(){this.destroyNode=null}};t.__NG_ELEMENT_ID__=()=>Wde();let n=t;return n})();function Wde(){let n=qn(),t=Ki(),e=Rp(t.index,n);return(fd(e)?e:n)[Ko]}var Hde=(()=>{let t=class t{};t.\u0275prov=Ze({token:t,providedIn:"root",factory:()=>null});let n=t;return n})(),a_={};var a3=new Set;function BI(n){a3.has(n)||(a3.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}function l3(...n){}function qde(){let n=typeof xo.requestAnimationFrame=="function",t=xo[n?"requestAnimationFrame":"setTimeout"],e=xo[n?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&t&&e){let r=t[Zone.__symbol__("OriginalDelegate")];r&&(t=r);let o=e[Zone.__symbol__("OriginalDelegate")];o&&(e=o)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:e}}var Tn=class n{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:e=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Do(!1),this.onMicrotaskEmpty=new Do(!1),this.onStable=new Do(!1),this.onError=new Do(!1),typeof Zone>"u")throw new Je(908,!1);Zone.assertZonePatched();let o=this;o._nesting=0,o._outer=o._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(o._inner=o._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(o._inner=o._inner.fork(Zone.longStackTraceZoneSpec)),o.shouldCoalesceEventChangeDetection=!r&&e,o.shouldCoalesceRunChangeDetection=r,o.lastRequestAnimationFrameId=-1,o.nativeRequestAnimationFrame=qde().nativeRequestAnimationFrame,Yde(o)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new Je(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new Je(909,!1)}run(t,e,r){return this._inner.run(t,e,r)}runTask(t,e,r,o){let s=this._inner,i=s.scheduleEventTask("NgZoneEvent: "+o,t,Kde,l3,l3);try{return s.runTask(i,e,r)}finally{s.cancelTask(i)}}runGuarded(t,e,r){return this._inner.runGuarded(t,e,r)}runOutsideAngular(t){return this._outer.run(t)}},Kde={};function PA(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function Xde(n){n.isCheckStableRunning||n.lastRequestAnimationFrameId!==-1||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(xo,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,O_(n),n.isCheckStableRunning=!0,PA(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),O_(n))}function Yde(n){let t=()=>{Xde(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(e,r,o,s,i,a)=>{if(Zde(a))return e.invokeTask(o,s,i,a);try{return c3(n),e.invokeTask(o,s,i,a)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&t(),u3(n)}},onInvoke:(e,r,o,s,i,a,l)=>{try{return c3(n),e.invoke(o,s,i,a,l)}finally{n.shouldCoalesceRunChangeDetection&&t(),u3(n)}},onHasTask:(e,r,o,s)=>{e.hasTask(o,s),r===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,O_(n),PA(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(e,r,o,s)=>(e.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function O_(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.lastRequestAnimationFrameId!==-1?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function c3(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function u3(n){n._nesting--,PA(n)}var F_=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Do,this.onMicrotaskEmpty=new Do,this.onStable=new Do,this.onError=new Do}run(t,e,r){return t.apply(e,r)}runGuarded(t,e,r){return t.apply(e,r)}runOutsideAngular(t){return t()}runTask(t,e,r,o){return t.apply(e,r)}};function Zde(n){return!Array.isArray(n)||n.length!==1?!1:n[0].data?.__ignore_ng_zone__===!0}function Qde(n="zone.js",t){return n==="noop"?new F_:n==="zone.js"?new Tn(t):n}var Ng=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(Ng||{}),Jde={destroy(){}};function zI(n,t){!t&&bpe(zI);let e=t?.injector??ke(Za);if(!Afe(e))return Jde;BI("NgAfterNextRender");let r=e.get($A),o=r.handler??=new $_,s=t?.phase??Ng.MixedReadWrite,i=()=>{o.unregister(l),a()},a=e.get(wA).onDestroy(i),l=Wi(e,()=>new P_(s,()=>{i(),n()}));return o.register(l),{destroy:i}}var P_=class{constructor(t,e){this.phase=t,this.callbackFn=e,this.zone=ke(Tn),this.errorHandler=ke(Xa,{optional:!0}),ke(gI,{optional:!0})?.notify(1)}invoke(){try{this.zone.runOutsideAngular(this.callbackFn)}catch(t){this.errorHandler?.handleError(t)}}},$_=class{constructor(){this.executingCallbacks=!1,this.buckets={[Ng.EarlyRead]:new Set,[Ng.Write]:new Set,[Ng.MixedReadWrite]:new Set,[Ng.Read]:new Set},this.deferredCallbacks=new Set}register(t){(this.executingCallbacks?this.deferredCallbacks:this.buckets[t.phase]).add(t)}unregister(t){this.buckets[t.phase].delete(t),this.deferredCallbacks.delete(t)}execute(){this.executingCallbacks=!0;for(let t of Object.values(this.buckets))for(let e of t)e.invoke();this.executingCallbacks=!1;for(let t of this.deferredCallbacks)this.buckets[t.phase].add(t);this.deferredCallbacks.clear()}destroy(){for(let t of Object.values(this.buckets))t.clear();this.deferredCallbacks.clear()}},$A=(()=>{let t=class t{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){let r=[...this.internalCallbacks];this.internalCallbacks.length=0;for(let o of r)o()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}};t.\u0275prov=Ze({token:t,providedIn:"root",factory:()=>new t});let n=t;return n})();function L_(n,t,e){let r=e?n.styles:null,o=e?n.classes:null,s=0;if(t!==null)for(let i=0;i<t.length;i++){let a=t[i];if(typeof a=="number")s=a;else if(s==1)o=Lz(o,a);else if(s==2){let l=a,c=t[++i];r=Lz(r,l+": "+c+";")}}e?n.styles=r:n.stylesWithoutHost=r,e?n.classes=o:n.classesWithoutHost=o}var yI=class extends $I{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){let e=_p(t);return new Og(e,this.ngModule)}};function p3(n){let t=[];for(let e in n){if(!n.hasOwnProperty(e))continue;let r=n[e];r!==void 0&&t.push({propName:Array.isArray(r)?r[0]:r,templateName:e})}return t}function ehe(n){let t=n.toLowerCase();return t==="svg"?Epe:t==="math"?Npe:null}var B_=class{constructor(t,e){this.injector=t,this.parentInjector=e}get(t,e,r){r=EI(r);let o=this.injector.get(t,a_,r);return o!==a_||e===a_?o:this.parentInjector.get(t,e,r)}},Og=class extends xI{get inputs(){let t=this.componentDef,e=t.inputTransforms,r=p3(t.inputs);if(e!==null)for(let o of r)e.hasOwnProperty(o.propName)&&(o.transform=e[o.propName]);return r}get outputs(){return p3(this.componentDef.outputs)}constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=rpe(t.selectors),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!e}create(t,e,r,o){let s=un(null);try{o=o||this.ngModule;let i=o instanceof ko?o:o?.injector;i&&this.componentDef.getStandaloneInjector!==null&&(i=this.componentDef.getStandaloneInjector(i)||i);let a=i?new B_(t,i):t,l=a.get(Mb,null);if(l===null)throw new Je(407,!1);let c=a.get(Hde,null),u=a.get($A,null),p=a.get(gI,null),f={rendererFactory:l,sanitizer:c,inlineEffectRunner:null,afterRenderEventManager:u,changeDetectionScheduler:p},d=l.createRenderer(null,this.componentDef),h=this.componentDef.selectors[0][0]||"div",m=r?nde(d,r,this.componentDef.encapsulation,a):BV(d,h,ehe(h)),g=512;this.componentDef.signals?g|=4096:this.componentDef.onPush||(g|=16);let x=null;m!==null&&(x=SA(m,a,!0));let b=AA(0,null,null,1,0,null,null,null,null,null,null),w=OI(null,b,null,g,null,null,f,d,a,null,x);dA(w);let v,S;try{let k=this.componentDef,A,$=null;k.findHostDirectiveDefs?(A=[],$=new Map,k.findHostDirectiveDefs(k,A,$),A.push(k)):A=[k];let L=the(w,m),z=nhe(L,m,k,A,w,f,d);S=eV(b,qa),m&&she(d,k,m,r),e!==void 0&&ihe(S,this.ngContentSelectors,e),v=ohe(z,k,A,$,w,[ahe]),MA(b,w,null)}finally{hA()}return new z_(this.componentType,v,Lg(S,w),w,S)}finally{un(s)}}},z_=class extends R_{constructor(t,e,r,o,s){super(),this.location=r,this._rootLView=o,this._tNode=s,this.previousInputValues=null,this.instance=e,this.hostView=this.changeDetectorRef=new bd(o,void 0,!1),this.componentType=t}setInput(t,e){let r=this._tNode.inputs,o;if(r!==null&&(o=r[t])){if(this.previousInputValues??=new Map,this.previousInputValues.has(t)&&Object.is(this.previousInputValues.get(t),e))return;let s=this._rootLView;RA(s[Rt],s,o,t,e),this.previousInputValues.set(t,e);let i=Rp(this._tNode.index,s);OA(i)}}get injector(){return new dd(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}};function the(n,t){let e=n[Rt],r=qa;return n[r]=t,FI(e,r,2,"#host",null)}function nhe(n,t,e,r,o,s,i){let a=o[Rt];rhe(r,n,t,i);let l=null;t!==null&&(l=SA(t,o[Ag]));let c=s.rendererFactory.createRenderer(t,e),u=16;e.signals?u=4096:e.onPush&&(u=64);let p=OI(o,tU(e),null,u,o[n.index],n,s,c,null,null,l);return a.firstCreatePass&&k_(a,n,r.length-1),PI(o,p),o[n.index]=p}function rhe(n,t,e,r){for(let o of n)t.mergedAttrs=oA(t.mergedAttrs,o.hostAttrs);t.mergedAttrs!==null&&(L_(t,t.mergedAttrs,!0),e!==null&&HV(r,e,t))}function ohe(n,t,e,r,o,s){let i=Ki(),a=o[Rt],l=qi(i,o);rU(a,o,i,e,null,r);for(let u=0;u<e.length;u++){let p=i.directiveStart+u,f=Mg(o,a,p,i);yd(f,o)}oU(a,o,i),l&&yd(l,o);let c=Mg(o,a,i.directiveStart+i.componentOffset,i);if(n[ji]=o[ji]=c,s!==null)for(let u of s)u(c,t);return QV(a,i,o),c}function she(n,t,e,r){if(r)d_(n,e,["ng-version","17.3.12"]);else{let{attrs:o,classes:s}=ope(t.selectors[0]);o&&d_(n,e,o),s&&s.length>0&&WV(n,e,s.join(" "))}}function ihe(n,t,e){let r=n.projection=[];for(let o=0;o<t.length;o++){let s=e[o];r.push(s!=null?Array.from(s):null)}}function ahe(){let n=Ki();yA(qn()[Rt],n)}var Mp=(()=>{let t=class t{};t.__NG_ELEMENT_ID__=lhe;let n=t;return n})();function lhe(){let n=Ki();return xU(n,qn())}var che=Mp,gU=class extends che{constructor(t,e,r){super(),this._lContainer=t,this._hostTNode=e,this._hostLView=r}get element(){return Lg(this._hostTNode,this._hostLView)}get injector(){return new dd(this._hostTNode,this._hostLView)}get parentInjector(){let t=bA(this._hostTNode,this._hostLView);if(gV(t)){let e=pI(t,this._hostLView),r=uI(t),o=e[Rt].data[r+8];return new dd(o,e)}else return new dd(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){let e=f3(this._lContainer);return e!==null&&e[t]||null}get length(){return this._lContainer.length-Bs}createEmbeddedView(t,e,r){let o,s;typeof r=="number"?o=r:r!=null&&(o=r.index,s=r.injector);let i=i3(this._lContainer,t.ssrId),a=t.createEmbeddedViewImpl(e||{},s,i);return this.insertImpl(a,o,s3(this._hostTNode,i)),a}createComponent(t,e,r,o,s){let i=t&&!wpe(t),a;if(i)a=e;else{let h=e||{};a=h.index,r=h.injector,o=h.projectableNodes,s=h.environmentInjector||h.ngModuleRef}let l=i?t:new Og(_p(t)),c=r||this.parentInjector;if(!s&&l.ngModule==null){let m=(i?c:this.parentInjector).get(ko,null);m&&(s=m)}let u=_p(l.componentType??{}),p=i3(this._lContainer,u?.id??null),f=p?.firstChild??null,d=l.create(c,o,f,s);return this.insertImpl(d.hostView,a,s3(this._hostTNode,p)),d}insert(t,e){return this.insertImpl(t,e,!0)}insertImpl(t,e,r){let o=t._lView;if(Mpe(o)){let a=this.indexOf(t);if(a!==-1)this.detach(a);else{let l=o[yo],c=new gU(l,l[Hi],l[yo]);c.detach(c.indexOf(t))}}let s=this._adjustIndex(e),i=this._lContainer;return Dde(i,o,s,r),t.attachToViewContainerRef(),A3(l_(i),s,t),t}move(t,e){return this.insert(t,e)}indexOf(t){let e=f3(this._lContainer);return e!==null?e.indexOf(t):-1}remove(t){let e=this._adjustIndex(t,-1),r=N_(this._lContainer,e);r&&(sI(l_(this._lContainer),e),UV(r[Rt],r))}detach(t){let e=this._adjustIndex(t,-1),r=N_(this._lContainer,e);return r&&sI(l_(this._lContainer),e)!=null?new bd(r):null}_adjustIndex(t,e=0){return t??this.length+e}};function f3(n){return n[lI]}function l_(n){return n[lI]||(n[lI]=[])}function xU(n,t){let e,r=t[n.index];return Rc(r)?e=r:(e=sU(r,t,null,n),t[n.index]=e,PI(t,e)),phe(e,t,n,r),new gU(e,n,t)}function uhe(n,t){let e=n[Ko],r=e.createComment(""),o=qi(t,n),s=DA(e,o);return hI(e,s,r,Wfe(e,o),!1),r}var phe=hhe,fhe=()=>!1;function dhe(n,t,e){return fhe(n,t,e)}function hhe(n,t,e,r){if(n[gd])return;let o;e.type&8?o=Ka(r):o=uhe(t,e),n[gd]=o}var V_=class n{constructor(t){this.queryList=t,this.matches=null}clone(){return new n(this.queryList)}setDirty(){this.queryList.setDirty()}},U_=class n{constructor(t=[]){this.queries=t}createEmbeddedView(t){let e=t.queries;if(e!==null){let r=t.contentQueries!==null?t.contentQueries[0]:e.length,o=[];for(let s=0;s<r;s++){let i=e.getByIndex(s),a=this.queries[i.indexInDeclarationView];o.push(a.clone())}return new n(o)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}finishViewCreation(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let e=0;e<this.queries.length;e++)LA(t,e).matches!==null&&this.queries[e].setDirty()}},j_=class{constructor(t,e,r=null){this.flags=e,this.read=r,typeof t=="string"?this.predicate=Che(t):this.predicate=t}},G_=class n{constructor(t=[]){this.queries=t}elementStart(t,e){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(t,e)}elementEnd(t){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}embeddedTView(t){let e=null;for(let r=0;r<this.length;r++){let o=e!==null?e.length:0,s=this.getByIndex(r).embeddedTView(t,o);s&&(s.indexInDeclarationView=r,e!==null?e.push(s):e=[s])}return e!==null?new n(e):null}template(t,e){for(let r=0;r<this.queries.length;r++)this.queries[r].template(t,e)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}},W_=class n{constructor(t,e=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,e){this.elementStart(t,e)}embeddedTView(t,e){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,e),new n(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let e=this._declarationNodeIndex,r=t.parent;for(;r!==null&&r.type&8&&r.index!==e;)r=r.parent;return e===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(t,e){let r=this.metadata.predicate;if(Array.isArray(r))for(let o=0;o<r.length;o++){let s=r[o];this.matchTNodeWithReadOption(t,e,mhe(e,s)),this.matchTNodeWithReadOption(t,e,eI(e,t,s,!1,!1))}else r===vd?e.type&4&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,eI(e,t,r,!1,!1))}matchTNodeWithReadOption(t,e,r){if(r!==null){let o=this.metadata.read;if(o!==null)if(o===Mc||o===Mp||o===vd&&e.type&4)this.addMatch(e.index,-2);else{let s=eI(e,t,o,!1,!1);s!==null&&this.addMatch(e.index,s)}else this.addMatch(e.index,r)}}addMatch(t,e){this.matches===null?this.matches=[t,e]:this.matches.push(t,e)}};function mhe(n,t){let e=n.localNames;if(e!==null){for(let r=0;r<e.length;r+=2)if(e[r]===t)return e[r+1]}return null}function ghe(n,t){return n.type&11?Lg(n,t):n.type&4?FA(n,t):null}function xhe(n,t,e,r){return e===-1?ghe(t,n):e===-2?yhe(n,t,r):Mg(n,n[Rt],e,t)}function yhe(n,t,e){if(e===Mc)return Lg(t,n);if(e===vd)return FA(t,n);if(e===Mp)return xU(t,n)}function yU(n,t,e,r){let o=t[_c].queries[r];if(o.matches===null){let s=n.data,i=e.matches,a=[];for(let l=0;i!==null&&l<i.length;l+=2){let c=i[l];if(c<0)a.push(null);else{let u=s[c];a.push(xhe(t,u,i[l+1],e.metadata.read))}}o.matches=a}return o.matches}function H_(n,t,e,r){let o=n.queries.getByIndex(e),s=o.matches;if(s!==null){let i=yU(n,t,o,e);for(let a=0;a<s.length;a+=2){let l=s[a];if(l>0)r.push(i[a/2]);else{let c=s[a+1],u=t[-l];for(let p=Bs;p<u.length;p++){let f=u[p];f[Pb]===f[yo]&&H_(f[Rt],f,c,r)}if(u[Rg]!==null){let p=u[Rg];for(let f=0;f<p.length;f++){let d=p[f];H_(d[Rt],d,c,r)}}}}}return r}function bhe(n,t){return n[_c].queries[t].queryList}function vhe(n,t,e){let r=new T_((e&4)===4);return sde(n,t,r,r.destroy),(t[_c]??=new U_).queries.push(new V_(r))-1}function whe(n,t,e){let r=Ya();return r.firstCreatePass&&(Ihe(r,new j_(n,t,e),-1),(t&2)===2&&(r.staticViewQueries=!0)),vhe(r,qn(),t)}function Che(n){return n.split(",").map(t=>t.trim())}function Ihe(n,t,e){n.queries===null&&(n.queries=new G_),n.queries.track(new W_(t,e))}function LA(n,t){return n.queries.getByIndex(t)}function She(n,t){let e=n[Rt],r=LA(e,t);return r.crossesNgTemplate?H_(e,n,t,[]):yU(e,n,r,t)}function The(n){let t=[],e=new Map;function r(o){let s=e.get(o);if(!s){let i=n(o);e.set(o,s=i.then(khe))}return s}return bI.forEach((o,s)=>{let i=[];o.templateUrl&&i.push(r(o.templateUrl).then(c=>{o.template=c}));let a=typeof o.styles=="string"?[o.styles]:o.styles||[];if(o.styles=a,o.styleUrl&&o.styleUrls?.length)throw new Error("@Component cannot define both `styleUrl` and `styleUrls`. Use `styleUrl` if the component has one stylesheet, or `styleUrls` if it has multiple");if(o.styleUrls?.length){let c=o.styles.length,u=o.styleUrls;o.styleUrls.forEach((p,f)=>{a.push(""),i.push(r(p).then(d=>{a[c+f]=d,u.splice(u.indexOf(p),1),u.length==0&&(o.styleUrls=void 0)}))})}else o.styleUrl&&i.push(r(o.styleUrl).then(c=>{a.push(c),o.styleUrl=void 0}));let l=Promise.all(i).then(()=>_he(s));t.push(l)}),Nhe(),Promise.all(t).then(()=>{})}var bI=new Map,Ehe=new Set;function Nhe(){let n=bI;return bI=new Map,n}function Dhe(){return bI.size===0}function khe(n){return typeof n=="string"?n:n.text()}function _he(n){Ehe.delete(n)}var Ap=class{},Ob=class{};var vI=class extends Ap{constructor(t,e,r){super(),this._parent=e,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new yI(this);let o=z3(t);this._bootstrapComponents=LV(o.bootstrap),this._r3Injector=EV(t,e,[{provide:Ap,useValue:this},{provide:$I,useValue:this.componentFactoryResolver},...r],bs(t),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(t)}get injector(){return this._r3Injector}destroy(){let t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(e=>e()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}},wI=class extends Ob{constructor(t){super(),this.moduleType=t}create(t){return new vI(this.moduleType,t,[])}};function Ahe(n,t,e){return new vI(n,t,e)}var q_=class extends Ap{constructor(t){super(),this.componentFactoryResolver=new yI(this),this.instance=null;let e=new Nb([...t.providers,{provide:Ap,useValue:this},{provide:$I,useValue:this.componentFactoryResolver}],t.parent||aA(),t.debugName,new Set(["environment"]));this.injector=e,t.runEnvironmentInitializers&&e.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(t){this.injector.onDestroy(t)}};function VI(n,t,e=null){return new q_({providers:n,parent:t,debugName:e,runEnvironmentInitializers:!0}).injector}var Id=(()=>{let t=class t{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new go(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let r=this.taskId++;return this.pendingTasks.add(r),r}remove(r){this.pendingTasks.delete(r),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}};t.\u0275fac=function(o){return new(o||t)},t.\u0275prov=Ze({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})();function bU(n){return Mhe(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function Rhe(n,t){if(Array.isArray(n))for(let e=0;e<n.length;e++)t(n[e]);else{let e=n[Symbol.iterator](),r;for(;!(r=e.next()).done;)t(r.value)}}function Mhe(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function Ohe(n,t,e){return n[t]=e}function BA(n,t,e){let r=n[t];return Object.is(r,e)?!1:(n[t]=e,!0)}function Fhe(n){return(n.flags&32)===32}function Phe(n,t,e,r,o,s,i,a,l){let c=t.consts,u=FI(t,n,4,i||null,cI(c,a));nU(t,e,u,cI(c,l)),yA(t,u);let p=u.tView=AA(2,u,r,o,s,t.directiveRegistry,t.pipeRegistry,null,t.schemas,c,null);return t.queries!==null&&(t.queries.template(t,u),p.queries=t.queries.embeddedTView(u)),u}function Oc(n,t,e,r,o,s,i,a){let l=qn(),c=Ya(),u=n+qa,p=c.firstCreatePass?Phe(u,c,l,t,e,r,o,s,i):c.data[u];Bb(p,!1);let f=$he(c,l,p,n);gA()&&kA(c,l,f,p),yd(f,l);let d=sU(f,l,f,p);return l[u]=d,PI(l,d),dhe(d,p,l),cA(p)&&JV(c,l,p),i!=null&&eU(l,p,a),Oc}var $he=Lhe;function Lhe(n,t,e,r){return xA(!0),t[Ko].createComment("")}function Bhe(n,t,e,r){return BA(n,aV(),e)?t+eA(e)+r:zb}function Zo(n,t,e){let r=qn(),o=aV();if(BA(r,o,t)){let s=Ya(),i=Zpe();cde(s,i,r,n,t,r[Ko],e,!1)}return Zo}function d3(n,t,e,r,o){let s=t.inputs,i=o?"class":"style";RA(n,e,s[i],i,r)}function zhe(n,t,e,r,o,s){let i=t.consts,a=cI(i,o),l=FI(t,n,2,r,a);return nU(t,e,l,cI(i,s)),l.attrs!==null&&L_(l,l.attrs,!1),l.mergedAttrs!==null&&L_(l,l.mergedAttrs,!0),t.queries!==null&&t.queries.elementStart(t,l),l}function Ft(n,t,e,r){let o=qn(),s=Ya(),i=qa+n,a=o[Ko],l=s.firstCreatePass?zhe(i,s,o,t,e,r):s.data[i],c=Vhe(s,o,l,a,t,n);o[i]=c;let u=cA(l);return Bb(l,!0),HV(a,c,l),!Fhe(l)&&gA()&&kA(s,o,c,l),$pe()===0&&yd(c,o),Lpe(),u&&(JV(s,o,l),QV(s,l,o)),r!==null&&eU(o,l),Ft}function zt(){let n=Ki();sV()?Gpe():(n=n.parent,Bb(n,!1));let t=n;Vpe(t)&&Upe(),Bpe();let e=Ya();return e.firstCreatePass&&(yA(e,n),X3(n)&&e.queries.elementEnd(n)),t.classesWithoutHost!=null&&nfe(t)&&d3(e,t,qn(),t.classesWithoutHost,!0),t.stylesWithoutHost!=null&&rfe(t)&&d3(e,t,qn(),t.stylesWithoutHost,!1),zt}function Qo(n,t,e,r){return Ft(n,t,e,r),zt(),Qo}var Vhe=(n,t,e,r,o,s)=>(xA(!0),BV(r,o,Qpe()));function Bg(){return qn()}var pd=void 0;function Uhe(n){let t=n,e=Math.floor(Math.abs(n)),r=n.toString().replace(/^[^.]*\.?/,"").length;return e===1&&r===0?1:5}var jhe=["en",[["a","p"],["AM","PM"],pd],[["AM","PM"],pd,pd],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],pd,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],pd,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",pd,"{1} 'at' {0}",pd],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",Uhe],c_={};function zA(n){let t=Ghe(n),e=h3(t);if(e)return e;let r=t.split("-")[0];if(e=h3(r),e)return e;if(r==="en")return jhe;throw new Je(701,!1)}function h3(n){return n in c_||(c_[n]=xo.ng&&xo.ng.common&&xo.ng.common.locales&&xo.ng.common.locales[n]),c_[n]}var zg=function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n}(zg||{});function Ghe(n){return n.toLowerCase().replace(/_/g,"-")}var CI="en-US";var Whe=CI;function Hhe(n){typeof n=="string"&&(Whe=n.toLowerCase().replace(/_/g,"-"))}function zs(n,t,e,r){let o=qn(),s=Ya(),i=Ki();return Khe(s,o,o[Ko],i,n,t,r),zs}function qhe(n,t,e,r){let o=n.cleanup;if(o!=null)for(let s=0;s<o.length-1;s+=2){let i=o[s];if(i===e&&o[s+1]===r){let a=t[Db],l=o[s+2];return a.length>l?a[l]:null}typeof i=="string"&&(s+=2)}return null}function Khe(n,t,e,r,o,s,i){let a=cA(r),c=n.firstCreatePass&&lU(n),u=t[ji],p=aU(t),f=!0;if(r.type&3||i){let m=qi(r,t),g=i?i(m):m,x=p.length,b=i?v=>i(Ka(v[r.index])):r.index,w=null;if(!i&&a&&(w=qhe(n,t,o,r.index)),w!==null){let v=w.__ngLastListenerFn__||w;v.__ngNextListenerFn__=s,w.__ngLastListenerFn__=s,f=!1}else{s=g3(r,t,u,s,!1);let v=e.listen(g,o,s);p.push(s,v),c&&c.push(o,b,x,x+1)}}else s=g3(r,t,u,s,!1);let d=r.outputs,h;if(f&&d!==null&&(h=d[o])){let m=h.length;if(m)for(let g=0;g<m;g+=2){let x=h[g],b=h[g+1],S=t[x][b].subscribe(s),k=p.length;p.push(s,S),c&&c.push(o,r.index,k,-(k+1))}}}function m3(n,t,e,r){let o=un(null);try{return ja(6,t,e),e(r)!==!1}catch(s){return cU(n,s),!1}finally{ja(7,t,e),un(o)}}function g3(n,t,e,r,o){return function s(i){if(i===Function)return r;let a=n.componentOffset>-1?Rp(n.index,t):t;OA(a);let l=m3(t,e,r,i),c=s.__ngNextListenerFn__;for(;c;)l=m3(t,e,c,i)&&l,c=c.__ngNextListenerFn__;return o&&l===!1&&i.preventDefault(),l}}function Sd(n=1){return Ype(n)}function Vg(n,t,e){whe(n,t,e)}function Td(n){let t=qn(),e=Ya(),r=lV();fA(r+1);let o=LA(e,r);if(n.dirty&&Rpe(t)===((o.metadata.flags&2)===2)){if(o.matches===null)n.reset([]);else{let s=She(t,r);n.reset(s,gfe),n.notifyOnChanges()}return!0}return!1}function Ed(){return bhe(qn(),lV())}function Xhe(n,t,e,r){e>=n.data.length&&(n.data[e]=null,n.blueprint[e]=null),t[e]=r}function Pn(n,t=""){let e=qn(),r=Ya(),o=n+qa,s=r.firstCreatePass?FI(r,o,1,t,null):r.data[o],i=Yhe(r,e,s,t,n);e[o]=i,gA()&&kA(r,e,i,s),Bb(s,!1)}var Yhe=(n,t,e,r,o)=>(xA(!0),Mfe(t[Ko],r));function VA(n){return Nd("",n,""),VA}function Nd(n,t,e){let r=qn(),o=Bhe(r,n,t,e);return o!==zb&&Ide(r,mA(),o),Nd}var Zhe=(()=>{let t=class t{constructor(r){this._injector=r,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(r){if(!r.standalone)return null;if(!this.cachedInjectors.has(r)){let o=j3(!1,r.type),s=o.length>0?VI([o],this._injector,`Standalone[${r.type.name}]`):null;this.cachedInjectors.set(r,s)}return this.cachedInjectors.get(r)}ngOnDestroy(){try{for(let r of this.cachedInjectors.values())r!==null&&r.destroy()}finally{this.cachedInjectors.clear()}}};t.\u0275prov=Ze({token:t,providedIn:"environment",factory:()=>new t(Xe(ko))});let n=t;return n})();function vU(n){BI("NgStandalone"),n.getStandaloneInjector=t=>t.get(Zhe).getOrCreateStandaloneInjector(n)}function wU(n,t,e,r){return CU(qn(),iV(),n,t,e,r)}function Qhe(n,t){let e=n[t];return e===zb?void 0:e}function CU(n,t,e,r,o,s){let i=t+e;return BA(n,i,o)?Ohe(n,i+1,s?r.call(s,o):r(o)):Qhe(n,i+1)}function IU(n,t){let e=Ya(),r,o=n+qa;e.firstCreatePass?(r=Jhe(t,e.pipeRegistry),e.data[o]=r,r.onDestroy&&(e.destroyHooks??=[]).push(o,r.onDestroy)):r=e.data[o];let s=r.factory||(r.factory=hd(r.type,!0)),i,a=ys(Tr);try{let l=fI(!1),c=s();return fI(l),Xhe(e,qn(),o,c),c}finally{ys(a)}}function Jhe(n,t){if(t)for(let e=t.length-1;e>=0;e--){let r=t[e];if(n===r.name)return r}}function SU(n,t,e){let r=n+qa,o=qn(),s=Ape(o,r);return eme(o,r)?CU(o,iV(),t,s.transform,e,s):s.transform(e)}function eme(n,t){return n[Rt].data[t].pure}var YC=null;function tme(n){YC!==null&&(n.defaultEncapsulation!==YC.defaultEncapsulation||n.preserveWhitespaces!==YC.preserveWhitespaces)||(YC=n)}var UI=(()=>{let t=class t{log(r){console.log(r)}warn(r){console.warn(r)}};t.\u0275fac=function(o){return new(o||t)},t.\u0275prov=Ze({token:t,factory:t.\u0275fac,providedIn:"platform"});let n=t;return n})();var UA=new ot(""),Vb=new ot(""),jI=(()=>{let t=class t{constructor(r,o,s){this._ngZone=r,this.registry=o,this._pendingCount=0,this._isZoneStable=!0,this._callbacks=[],this.taskTrackingZone=null,jA||(nme(s),s.addToWindow(o)),this._watchAngularEvents(),r.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Tn.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&this._pendingCount===0&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;this._callbacks.length!==0;){let r=this._callbacks.pop();clearTimeout(r.timeoutId),r.doneCb()}});else{let r=this.getPendingTasks();this._callbacks=this._callbacks.filter(o=>o.updateCb&&o.updateCb(r)?(clearTimeout(o.timeoutId),!1):!0)}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(r=>({source:r.source,creationLocation:r.creationLocation,data:r.data})):[]}addCallback(r,o,s){let i=-1;o&&o>0&&(i=setTimeout(()=>{this._callbacks=this._callbacks.filter(a=>a.timeoutId!==i),r()},o)),this._callbacks.push({doneCb:r,timeoutId:i,updateCb:s})}whenStable(r,o,s){if(s&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(r,o,s),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(r){this.registry.registerApplication(r,this)}unregisterApplication(r){this.registry.unregisterApplication(r)}findProviders(r,o,s){return[]}};t.\u0275fac=function(o){return new(o||t)(Xe(Tn),Xe(GI),Xe(Vb))},t.\u0275prov=Ze({token:t,factory:t.\u0275fac});let n=t;return n})(),GI=(()=>{let t=class t{constructor(){this._applications=new Map}registerApplication(r,o){this._applications.set(r,o)}unregisterApplication(r){this._applications.delete(r)}unregisterAllApplications(){this._applications.clear()}getTestability(r){return this._applications.get(r)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(r,o=!0){return jA?.findTestabilityInTree(this,r,o)??null}};t.\u0275fac=function(o){return new(o||t)},t.\u0275prov=Ze({token:t,factory:t.\u0275fac,providedIn:"platform"});let n=t;return n})();function nme(n){jA=n}var jA;function Ub(n){return!!n&&typeof n.then=="function"}function TU(n){return!!n&&typeof n.subscribe=="function"}var WI=new ot(""),EU=(()=>{let t=class t{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,o)=>{this.resolve=r,this.reject=o}),this.appInits=ke(WI,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let r=[];for(let s of this.appInits){let i=s();if(Ub(i))r.push(i);else if(TU(i)){let a=new Promise((l,c)=>{i.subscribe({complete:l,error:c})});r.push(a)}}let o=()=>{this.done=!0,this.resolve()};Promise.all(r).then(()=>{o()}).catch(s=>{this.reject(s)}),r.length===0&&o(),this.initialized=!0}};t.\u0275fac=function(o){return new(o||t)},t.\u0275prov=Ze({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})(),HI=new ot("");function rme(){cz(()=>{throw new Je(600,!1)})}function ome(n){return n.isBoundToModule}function sme(n,t,e){try{let r=e();return Ub(r)?r.catch(o=>{throw t.runOutsideAngular(()=>n.handleError(o)),o}):r}catch(r){throw t.runOutsideAngular(()=>n.handleError(r)),r}}function NU(n,t){return Array.isArray(t)?t.reduce(NU,n):Ge(Ge({},n),t)}var Dd=(()=>{let t=class t{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=ke(NV),this.afterRenderEffectManager=ke($A),this.externalTestViews=new Set,this.beforeRender=new qo,this.afterTick=new qo,this.componentTypes=[],this.components=[],this.isStable=ke(Id).hasPendingTasks.pipe(At(r=>!r)),this._injector=ke(ko)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(r,o){let s=r instanceof xI;if(!this._injector.get(EU).done){let d=!s&&B3(r),h=!1;throw new Je(405,h)}let a;s?a=r:a=this._injector.get($I).resolveComponentFactory(r),this.componentTypes.push(a.componentType);let l=ome(a)?void 0:this._injector.get(Ap),c=o||a.selector,u=a.create(Za.NULL,[],c,l),p=u.location.nativeElement,f=u.injector.get(UA,null);return f?.registerApplication(p),u.onDestroy(()=>{this.detachView(u.hostView),nI(this.components,u),f?.unregisterApplication(p)}),this._loadComponent(u),u}tick(){this._tick(!0)}_tick(r){if(this._runningTick)throw new Je(101,!1);let o=un(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(r)}catch(s){this.internalErrorHandler(s)}finally{this.afterTick.next(),this._runningTick=!1,un(o)}}detectChangesInAttachedViews(r){let o=0,s=this.afterRenderEffectManager;for(;;){if(o===pU)throw new Je(103,!1);if(r){let i=o===0;this.beforeRender.next(i);for(let{_lView:a,notifyErrorHandler:l}of this._views)ime(a,i,l)}if(o++,s.executeInternalCallbacks(),![...this.externalTestViews.keys(),...this._views].some(({_lView:i})=>K_(i))&&(s.execute(),![...this.externalTestViews.keys(),...this._views].some(({_lView:i})=>K_(i))))break}}attachView(r){let o=r;this._views.push(o),o.attachToAppRef(this)}detachView(r){let o=r;nI(this._views,o),o.detachFromAppRef()}_loadComponent(r){this.attachView(r.hostView),this.tick(),this.components.push(r);let o=this._injector.get(HI,[]);[...this._bootstrapListeners,...o].forEach(s=>s(r))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(r=>r()),this._views.slice().forEach(r=>r.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(r){return this._destroyListeners.push(r),()=>nI(this._destroyListeners,r)}destroy(){if(this._destroyed)throw new Je(406,!1);let r=this._injector;r.destroy&&!r.destroyed&&r.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}};t.\u0275fac=function(o){return new(o||t)},t.\u0275prov=Ze({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})();function nI(n,t){let e=n.indexOf(t);e>-1&&n.splice(e,1)}function ime(n,t,e){!t&&!K_(n)||ame(n,e,t)}function K_(n){return pA(n)}function ame(n,t,e){let r;e?(r=0,n[gt]|=1024):n[gt]&64?r=0:r=1,fU(n,t,r)}var X_=class{constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}},qI=(()=>{let t=class t{compileModuleSync(r){return new wI(r)}compileModuleAsync(r){return Promise.resolve(this.compileModuleSync(r))}compileModuleAndAllComponentsSync(r){let o=this.compileModuleSync(r),s=z3(r),i=LV(s.declarations).reduce((a,l)=>{let c=_p(l);return c&&a.push(new Og(c)),a},[]);return new X_(o,i)}compileModuleAndAllComponentsAsync(r){return Promise.resolve(this.compileModuleAndAllComponentsSync(r))}clearCache(){}clearCacheFor(r){}getModuleId(r){}};t.\u0275fac=function(o){return new(o||t)},t.\u0275prov=Ze({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})(),lme=new ot("");function cme(n,t,e){let r=new wI(e);return Promise.resolve(r)}function x3(n){for(let t=n.length-1;t>=0;t--)if(n[t]!==void 0)return n[t]}var ume=(()=>{let t=class t{constructor(){this.zone=ke(Tn),this.applicationRef=ke(Dd)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}};t.\u0275fac=function(o){return new(o||t)},t.\u0275prov=Ze({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})();function pme(n){return[{provide:Tn,useFactory:n},{provide:_g,multi:!0,useFactory:()=>{let t=ke(ume,{optional:!0});return()=>t.initialize()}},{provide:_g,multi:!0,useFactory:()=>{let t=ke(hme);return()=>{t.initialize()}}},{provide:NV,useFactory:fme}]}function fme(){let n=ke(Tn),t=ke(Xa);return e=>n.runOutsideAngular(()=>t.handleError(e))}function dme(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var hme=(()=>{let t=class t{constructor(){this.subscription=new Wr,this.initialized=!1,this.zone=ke(Tn),this.pendingTasks=ke(Id)}initialize(){if(this.initialized)return;this.initialized=!0;let r=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(r=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Tn.assertNotInAngularZone(),queueMicrotask(()=>{r!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(r),r=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Tn.assertInAngularZone(),r??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}};t.\u0275fac=function(o){return new(o||t)},t.\u0275prov=Ze({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})();function mme(){return typeof $localize<"u"&&$localize.locale||CI}var KI=new ot("",{providedIn:"root",factory:()=>ke(KI,Ot.Optional|Ot.SkipSelf)||mme()});var DU=new ot(""),kU=(()=>{let t=class t{constructor(r){this._injector=r,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(r,o){let s=Qde(o?.ngZone,dme({eventCoalescing:o?.ngZoneEventCoalescing,runCoalescing:o?.ngZoneRunCoalescing}));return s.run(()=>{let i=Ahe(r.moduleType,this.injector,pme(()=>s)),a=i.injector.get(Xa,null);return s.runOutsideAngular(()=>{let l=s.onError.subscribe({next:c=>{a.handleError(c)}});i.onDestroy(()=>{nI(this._modules,i),l.unsubscribe()})}),sme(a,s,()=>{let l=i.injector.get(EU);return l.runInitializers(),l.donePromise.then(()=>{let c=i.injector.get(KI,CI);return Hhe(c||CI),this._moduleDoBootstrap(i),i})})})}bootstrapModule(r,o=[]){let s=NU({},o);return cme(this.injector,s,r).then(i=>this.bootstrapModuleFactory(i,s))}_moduleDoBootstrap(r){let o=r.injector.get(Dd);if(r._bootstrapComponents.length>0)r._bootstrapComponents.forEach(s=>o.bootstrap(s));else if(r.instance.ngDoBootstrap)r.instance.ngDoBootstrap(o);else throw new Je(-403,!1);this._modules.push(r)}onDestroy(r){this._destroyListeners.push(r)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Je(404,!1);this._modules.slice().forEach(o=>o.destroy()),this._destroyListeners.forEach(o=>o());let r=this._injector.get(DU,null);r&&(r.forEach(o=>o()),r.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}};t.\u0275fac=function(o){return new(o||t)(Xe(Za))},t.\u0275prov=Ze({token:t,factory:t.\u0275fac,providedIn:"platform"});let n=t;return n})(),Sb=null,_U=new ot("");function gme(n){if(Sb&&!Sb.get(_U,!1))throw new Je(400,!1);rme(),Sb=n;let t=n.get(kU);return bme(n),t}function GA(n,t,e=[]){let r=`Platform: ${t}`,o=new ot(r);return(s=[])=>{let i=AU();if(!i||i.injector.get(_U,!1)){let a=[...e,...s,{provide:o,useValue:!0}];n?n(a):gme(xme(a,r))}return yme(o)}}function xme(n=[],t){return Za.create({name:t,providers:[{provide:kI,useValue:"platform"},{provide:DU,useValue:new Set([()=>Sb=null])},...n]})}function yme(n){let t=AU();if(!t)throw new Je(401,!1);return t}function AU(){return Sb?.get(kU)??null}function bme(n){n.get(CA,null)?.forEach(e=>e())}var jb=(()=>{let t=class t{};t.__NG_ELEMENT_ID__=vme;let n=t;return n})();function vme(n){return wme(Ki(),qn(),(n&16)===16)}function wme(n,t,e){if(AI(n)&&!e){let r=Rp(n.index,t);return new bd(r,r)}else if(n.type&47){let r=t[Ha];return new bd(r,t)}return null}var Y_=class{constructor(){}supports(t){return bU(t)}create(t){return new Z_(t)}},Cme=(n,t)=>t,Z_=class{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||Cme}forEachItem(t){let e;for(e=this._itHead;e!==null;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,r=this._removalsHead,o=0,s=null;for(;e||r;){let i=!r||e&&e.currentIndex<y3(r,o,s)?e:r,a=y3(i,o,s),l=i.currentIndex;if(i===r)o--,r=r._nextRemoved;else if(e=e._next,i.previousIndex==null)o++;else{s||(s=[]);let c=a-o,u=l-o;if(c!=u){for(let f=0;f<c;f++){let d=f<s.length?s[f]:s[f]=0,h=d+f;u<=h&&h<c&&(s[f]=d+1)}let p=i.previousIndex;s[p]=u-c}}a!==l&&t(i,a,l)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;e!==null;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;e!==null;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;e!==null;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;e!==null;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;e!==null;e=e._nextIdentityChange)t(e)}diff(t){if(t==null&&(t=[]),!bU(t))throw new Je(900,!1);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._itHead,r=!1,o,s,i;if(Array.isArray(t)){this.length=t.length;for(let a=0;a<this.length;a++)s=t[a],i=this._trackByFn(a,s),e===null||!Object.is(e.trackById,i)?(e=this._mismatch(e,s,i,a),r=!0):(r&&(e=this._verifyReinsertion(e,s,i,a)),Object.is(e.item,s)||this._addIdentityChange(e,s)),e=e._next}else o=0,Rhe(t,a=>{i=this._trackByFn(o,a),e===null||!Object.is(e.trackById,i)?(e=this._mismatch(e,a,i,o),r=!0):(r&&(e=this._verifyReinsertion(e,a,i,o)),Object.is(e.item,a)||this._addIdentityChange(e,a)),e=e._next,o++}),this.length=o;return this._truncate(e),this.collection=t,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;t!==null;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;t!==null;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;t!==null;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,r,o){let s;return t===null?s=this._itTail:(s=t._prev,this._remove(t)),t=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),t!==null?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,s,o)):(t=this._linkedRecords===null?null:this._linkedRecords.get(r,o),t!==null?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,s,o)):t=this._addAfter(new Q_(e,r),s,o)),t}_verifyReinsertion(t,e,r,o){let s=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return s!==null?t=this._reinsertAfter(s,t._prev,o):t.currentIndex!=o&&(t.currentIndex=o,this._addToMoves(t,o)),t}_truncate(t){for(;t!==null;){let e=t._next;this._addToRemovals(this._unlink(t)),t=e}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(t);let o=t._prevRemoved,s=t._nextRemoved;return o===null?this._removalsHead=s:o._nextRemoved=s,s===null?this._removalsTail=o:s._prevRemoved=o,this._insertAfter(t,e,r),this._addToMoves(t,r),t}_moveAfter(t,e,r){return this._unlink(t),this._insertAfter(t,e,r),this._addToMoves(t,r),t}_addAfter(t,e,r){return this._insertAfter(t,e,r),this._additionsTail===null?this._additionsTail=this._additionsHead=t:this._additionsTail=this._additionsTail._nextAdded=t,t}_insertAfter(t,e,r){let o=e===null?this._itHead:e._next;return t._next=o,t._prev=e,o===null?this._itTail=t:o._prev=t,e===null?this._itHead=t:e._next=t,this._linkedRecords===null&&(this._linkedRecords=new II),this._linkedRecords.put(t),t.currentIndex=r,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){this._linkedRecords!==null&&this._linkedRecords.remove(t);let e=t._prev,r=t._next;return e===null?this._itHead=r:e._next=r,r===null?this._itTail=e:r._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail===null?this._movesTail=this._movesHead=t:this._movesTail=this._movesTail._nextMoved=t),t}_addToRemovals(t){return this._unlinkedRecords===null&&(this._unlinkedRecords=new II),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=t:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=t,t}},Q_=class{constructor(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},J_=class{constructor(){this._head=null,this._tail=null}add(t){this._head===null?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let r;for(r=this._head;r!==null;r=r._nextDup)if((e===null||e<=r.currentIndex)&&Object.is(r.trackById,t))return r;return null}remove(t){let e=t._prevDup,r=t._nextDup;return e===null?this._head=r:e._nextDup=r,r===null?this._tail=e:r._prevDup=e,this._head===null}},II=class{constructor(){this.map=new Map}put(t){let e=t.trackById,r=this.map.get(e);r||(r=new J_,this.map.set(e,r)),r.add(t)}get(t,e){let r=t,o=this.map.get(r);return o?o.get(t,e):null}remove(t){let e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function y3(n,t,e){let r=n.previousIndex;if(r===null)return r;let o=0;return e&&r<e.length&&(o=e[r]),r+t+o}function b3(){return new WA([new Y_])}var WA=(()=>{let t=class t{constructor(r){this.factories=r}static create(r,o){if(o!=null){let s=o.factories.slice();r=r.concat(s)}return new t(r)}static extend(r){return{provide:t,useFactory:o=>t.create(r,o||b3()),deps:[[t,new nA,new NI]]}}find(r){let o=this.factories.find(s=>s.supports(r));if(o!=null)return o;throw new Je(901,!1)}};t.\u0275prov=Ze({token:t,providedIn:"root",factory:b3});let n=t;return n})();var RU=GA(null,"core",[]),MU=(()=>{let t=class t{constructor(r){}};t.\u0275fac=function(o){return new(o||t)(Xe(Dd))},t.\u0275mod=Yo({type:t}),t.\u0275inj=Xo({});let n=t;return n})();function OU(n){let t=_p(n);if(!t)return null;let e=new Og(t);return{get selector(){return e.selector},get type(){return e.componentType},get inputs(){return e.inputs},get outputs(){return e.outputs},get ngContentSelectors(){return e.ngContentSelectors},get isStandalone(){return t.standalone},get isSignal(){return t.signals}}}var UU=null;function kd(){return UU}function jU(n){UU??=n}var XI=class{};var _o=new ot(""),JA=(()=>{let t=class t{historyGo(r){throw new Error("")}};t.\u0275fac=function(o){return new(o||t)},t.\u0275prov=Ze({token:t,factory:()=>ke(Eme),providedIn:"platform"});let n=t;return n})(),GU=new ot(""),Eme=(()=>{let t=class t extends JA{constructor(){super(),this._doc=ke(_o),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return kd().getBaseHref(this._doc)}onPopState(r){let o=kd().getGlobalEventTarget(this._doc,"window");return o.addEventListener("popstate",r,!1),()=>o.removeEventListener("popstate",r)}onHashChange(r){let o=kd().getGlobalEventTarget(this._doc,"window");return o.addEventListener("hashchange",r,!1),()=>o.removeEventListener("hashchange",r)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(r){this._location.pathname=r}pushState(r,o,s){this._history.pushState(r,o,s)}replaceState(r,o,s){this._history.replaceState(r,o,s)}forward(){this._history.forward()}back(){this._history.back()}historyGo(r=0){this._history.go(r)}getState(){return this._history.state}};t.\u0275fac=function(o){return new(o||t)},t.\u0275prov=Ze({token:t,factory:()=>new t,providedIn:"platform"});let n=t;return n})();function eR(n,t){if(n.length==0)return t;if(t.length==0)return n;let e=0;return n.endsWith("/")&&e++,t.startsWith("/")&&e++,e==2?n+t.substring(1):e==1?n+t:n+"/"+t}function FU(n){let t=n.match(/#|\?|$/),e=t&&t.index||n.length,r=e-(n[e-1]==="/"?1:0);return n.slice(0,r)+n.slice(e)}function Fc(n){return n&&n[0]!=="?"?"?"+n:n}var _d=(()=>{let t=class t{historyGo(r){throw new Error("")}};t.\u0275fac=function(o){return new(o||t)},t.\u0275prov=Ze({token:t,factory:()=>ke(tR),providedIn:"root"});let n=t;return n})(),WU=new ot(""),tR=(()=>{let t=class t extends _d{constructor(r,o){super(),this._platformLocation=r,this._removeListenerFns=[],this._baseHref=o??this._platformLocation.getBaseHrefFromDOM()??ke(_o).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}prepareExternalUrl(r){return eR(this._baseHref,r)}path(r=!1){let o=this._platformLocation.pathname+Fc(this._platformLocation.search),s=this._platformLocation.hash;return s&&r?`${o}${s}`:o}pushState(r,o,s,i){let a=this.prepareExternalUrl(s+Fc(i));this._platformLocation.pushState(r,o,a)}replaceState(r,o,s,i){let a=this.prepareExternalUrl(s+Fc(i));this._platformLocation.replaceState(r,o,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};t.\u0275fac=function(o){return new(o||t)(Xe(JA),Xe(WU,8))},t.\u0275prov=Ze({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})(),HU=(()=>{let t=class t extends _d{constructor(r,o){super(),this._platformLocation=r,this._baseHref="",this._removeListenerFns=[],o!=null&&(this._baseHref=o)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}path(r=!1){let o=this._platformLocation.hash??"#";return o.length>0?o.substring(1):o}prepareExternalUrl(r){let o=eR(this._baseHref,r);return o.length>0?"#"+o:o}pushState(r,o,s,i){let a=this.prepareExternalUrl(s+Fc(i));a.length==0&&(a=this._platformLocation.pathname),this._platformLocation.pushState(r,o,a)}replaceState(r,o,s,i){let a=this.prepareExternalUrl(s+Fc(i));a.length==0&&(a=this._platformLocation.pathname),this._platformLocation.replaceState(r,o,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};t.\u0275fac=function(o){return new(o||t)(Xe(JA),Xe(WU,8))},t.\u0275prov=Ze({token:t,factory:t.\u0275fac});let n=t;return n})(),Gg=(()=>{let t=class t{constructor(r){this._subject=new Do,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=r;let o=this._locationStrategy.getBaseHref();this._basePath=kme(FU(PU(o))),this._locationStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(r=!1){return this.normalize(this._locationStrategy.path(r))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(r,o=""){return this.path()==this.normalize(r+Fc(o))}normalize(r){return t.stripTrailingSlash(Dme(this._basePath,PU(r)))}prepareExternalUrl(r){return r&&r[0]!=="/"&&(r="/"+r),this._locationStrategy.prepareExternalUrl(r)}go(r,o="",s=null){this._locationStrategy.pushState(s,"",r,o),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+Fc(o)),s)}replaceState(r,o="",s=null){this._locationStrategy.replaceState(s,"",r,o),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+Fc(o)),s)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(r=0){this._locationStrategy.historyGo?.(r)}onUrlChange(r){return this._urlChangeListeners.push(r),this._urlChangeSubscription??=this.subscribe(o=>{this._notifyUrlChangeListeners(o.url,o.state)}),()=>{let o=this._urlChangeListeners.indexOf(r);this._urlChangeListeners.splice(o,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(r="",o){this._urlChangeListeners.forEach(s=>s(r,o))}subscribe(r,o,s){return this._subject.subscribe({next:r,error:o,complete:s})}};t.normalizeQueryParams=Fc,t.joinWithSlash=eR,t.stripTrailingSlash=FU,t.\u0275fac=function(o){return new(o||t)(Xe(_d))},t.\u0275prov=Ze({token:t,factory:()=>Nme(),providedIn:"root"});let n=t;return n})();function Nme(){return new Gg(Xe(_d))}function Dme(n,t){if(!n||!t.startsWith(n))return t;let e=t.substring(n.length);return e===""||["/",";","?","#"].includes(e[0])?e:t}function PU(n){return n.replace(/\/index.html$/,"")}function kme(n){if(new RegExp("^(https?:)?//").test(n)){let[,e]=n.split(/\/\/[^\/]+/);return e}return n}var qU=function(n){return n[n.Decimal=0]="Decimal",n[n.Percent=1]="Percent",n[n.Currency=2]="Currency",n[n.Scientific=3]="Scientific",n}(qU||{});var Ja={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function Ug(n,t){let e=zA(n),r=e[zg.NumberSymbols][t];if(typeof r>"u"){if(t===Ja.CurrencyDecimal)return e[zg.NumberSymbols][Ja.Decimal];if(t===Ja.CurrencyGroup)return e[zg.NumberSymbols][Ja.Group]}return r}function _me(n,t){return zA(n)[zg.NumberFormats][t]}var Ame=/^(\d+)?\.((\d+)(-(\d+))?)?$/,$U=22,YI=".",Gb="0",Rme=";",Mme=",",HA="#";var Ome="%";function Fme(n,t,e,r,o,s,i=!1){let a="",l=!1;if(!isFinite(n))a=Ug(e,Ja.Infinity);else{let c=Bme(n);i&&(c=Lme(c));let u=t.minInt,p=t.minFrac,f=t.maxFrac;if(s){let b=s.match(Ame);if(b===null)throw new Error(`${s} is not a valid digit info`);let w=b[1],v=b[3],S=b[5];w!=null&&(u=qA(w)),v!=null&&(p=qA(v)),S!=null?f=qA(S):v!=null&&p>f&&(f=p)}zme(c,p,f);let d=c.digits,h=c.integerLen,m=c.exponent,g=[];for(l=d.every(b=>!b);h<u;h++)d.unshift(0);for(;h<0;h++)d.unshift(0);h>0?g=d.splice(h,d.length):(g=d,d=[0]);let x=[];for(d.length>=t.lgSize&&x.unshift(d.splice(-t.lgSize,d.length).join(""));d.length>t.gSize;)x.unshift(d.splice(-t.gSize,d.length).join(""));d.length&&x.unshift(d.join("")),a=x.join(Ug(e,r)),g.length&&(a+=Ug(e,o)+g.join("")),m&&(a+=Ug(e,Ja.Exponential)+"+"+m)}return n<0&&!l?a=t.negPre+a+t.negSuf:a=t.posPre+a+t.posSuf,a}function Pme(n,t,e){let r=_me(t,qU.Percent),o=$me(r,Ug(t,Ja.MinusSign));return Fme(n,o,t,Ja.Group,Ja.Decimal,e,!0).replace(new RegExp(Ome,"g"),Ug(t,Ja.PercentSign))}function $me(n,t="-"){let e={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=n.split(Rme),o=r[0],s=r[1],i=o.indexOf(YI)!==-1?o.split(YI):[o.substring(0,o.lastIndexOf(Gb)+1),o.substring(o.lastIndexOf(Gb)+1)],a=i[0],l=i[1]||"";e.posPre=a.substring(0,a.indexOf(HA));for(let u=0;u<l.length;u++){let p=l.charAt(u);p===Gb?e.minFrac=e.maxFrac=u+1:p===HA?e.maxFrac=u+1:e.posSuf+=p}let c=a.split(Mme);if(e.gSize=c[1]?c[1].length:0,e.lgSize=c[2]||c[1]?(c[2]||c[1]).length:0,s){let u=o.length-e.posPre.length-e.posSuf.length,p=s.indexOf(HA);e.negPre=s.substring(0,p).replace(/'/g,""),e.negSuf=s.slice(p+u).replace(/'/g,"")}else e.negPre=t+e.posPre,e.negSuf=e.posSuf;return e}function Lme(n){if(n.digits[0]===0)return n;let t=n.digits.length-n.integerLen;return n.exponent?n.exponent+=2:(t===0?n.digits.push(0,0):t===1&&n.digits.push(0),n.integerLen+=2),n}function Bme(n){let t=Math.abs(n)+"",e=0,r,o,s,i,a;for((o=t.indexOf(YI))>-1&&(t=t.replace(YI,"")),(s=t.search(/e/i))>0?(o<0&&(o=s),o+=+t.slice(s+1),t=t.substring(0,s)):o<0&&(o=t.length),s=0;t.charAt(s)===Gb;s++);if(s===(a=t.length))r=[0],o=1;else{for(a--;t.charAt(a)===Gb;)a--;for(o-=s,r=[],i=0;s<=a;s++,i++)r[i]=Number(t.charAt(s))}return o>$U&&(r=r.splice(0,$U-1),e=o-1,o=1),{digits:r,exponent:e,integerLen:o}}function zme(n,t,e){if(t>e)throw new Error(`The minimum number of digits after fraction (${t}) is higher than the maximum (${e}).`);let r=n.digits,o=r.length-n.integerLen,s=Math.min(Math.max(t,o),e),i=s+n.integerLen,a=r[i];if(i>0){r.splice(Math.max(n.integerLen,i));for(let p=i;p<r.length;p++)r[p]=0}else{o=Math.max(0,o),n.integerLen=1,r.length=Math.max(1,i=s+1),r[0]=0;for(let p=1;p<i;p++)r[p]=0}if(a>=5)if(i-1<0){for(let p=0;p>i;p--)r.unshift(0),n.integerLen++;r.unshift(1),n.integerLen++}else r[i-1]++;for(;o<Math.max(0,s);o++)r.push(0);let l=s!==0,c=t+n.integerLen,u=r.reduceRight(function(p,f,d,h){return f=f+p,h[d]=f<10?f:f-10,l&&(h[d]===0&&d>=c?h.pop():l=!1),f>=10?1:0},0);u&&(r.unshift(u),n.integerLen++)}function qA(n){let t=parseInt(n);if(isNaN(t))throw new Error("Invalid integer literal when parsing "+n);return t}function ZI(n,t){t=encodeURIComponent(t);for(let e of n.split(";")){let r=e.indexOf("="),[o,s]=r==-1?[e,""]:[e.slice(0,r),e.slice(r+1)];if(o.trim()===t)return decodeURIComponent(s)}return null}var KA=/\s+/,LU=[],KU=(()=>{let t=class t{constructor(r,o){this._ngEl=r,this._renderer=o,this.initialClasses=LU,this.stateMap=new Map}set klass(r){this.initialClasses=r!=null?r.trim().split(KA):LU}set ngClass(r){this.rawClass=typeof r=="string"?r.trim().split(KA):r}ngDoCheck(){for(let o of this.initialClasses)this._updateState(o,!0);let r=this.rawClass;if(Array.isArray(r)||r instanceof Set)for(let o of r)this._updateState(o,!0);else if(r!=null)for(let o of Object.keys(r))this._updateState(o,!!r[o]);this._applyStateDiff()}_updateState(r,o){let s=this.stateMap.get(r);s!==void 0?(s.enabled!==o&&(s.changed=!0,s.enabled=o),s.touched=!0):this.stateMap.set(r,{enabled:o,changed:!0,touched:!0})}_applyStateDiff(){for(let r of this.stateMap){let o=r[0],s=r[1];s.changed?(this._toggleClass(o,s.enabled),s.changed=!1):s.touched||(s.enabled&&this._toggleClass(o,!1),this.stateMap.delete(o)),s.touched=!1}}_toggleClass(r,o){r=r.trim(),r.length>0&&r.split(KA).forEach(s=>{o?this._renderer.addClass(this._ngEl.nativeElement,s):this._renderer.removeClass(this._ngEl.nativeElement,s)})}};t.\u0275fac=function(o){return new(o||t)(Tr(Mc),Tr(LI))},t.\u0275dir=wd({type:t,selectors:[["","ngClass",""]],inputs:{klass:[kc.None,"class","klass"],ngClass:"ngClass"},standalone:!0});let n=t;return n})();var XA=class{constructor(t,e,r,o){this.$implicit=t,this.ngForOf=e,this.index=r,this.count=o}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},XU=(()=>{let t=class t{set ngForOf(r){this._ngForOf=r,this._ngForOfDirty=!0}set ngForTrackBy(r){this._trackByFn=r}get ngForTrackBy(){return this._trackByFn}constructor(r,o,s){this._viewContainer=r,this._template=o,this._differs=s,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(r){r&&(this._template=r)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let r=this._ngForOf;if(!this._differ&&r)if(0)try{}catch{}else this._differ=this._differs.find(r).create(this.ngForTrackBy)}if(this._differ){let r=this._differ.diff(this._ngForOf);r&&this._applyChanges(r)}}_applyChanges(r){let o=this._viewContainer;r.forEachOperation((s,i,a)=>{if(s.previousIndex==null)o.createEmbeddedView(this._template,new XA(s.item,this._ngForOf,-1,-1),a===null?void 0:a);else if(a==null)o.remove(i===null?void 0:i);else if(i!==null){let l=o.get(i);o.move(l,a),BU(l,s)}});for(let s=0,i=o.length;s<i;s++){let l=o.get(s).context;l.index=s,l.count=i,l.ngForOf=this._ngForOf}r.forEachIdentityChange(s=>{let i=o.get(s.currentIndex);BU(i,s)})}static ngTemplateContextGuard(r,o){return!0}};t.\u0275fac=function(o){return new(o||t)(Tr(Mp),Tr(vd),Tr(WA))},t.\u0275dir=wd({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0});let n=t;return n})();function BU(n,t){n.context.$implicit=t.item}var Wg=(()=>{let t=class t{constructor(r,o){this._viewContainer=r,this._context=new YA,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=o}set ngIf(r){this._context.$implicit=this._context.ngIf=r,this._updateView()}set ngIfThen(r){zU("ngIfThen",r),this._thenTemplateRef=r,this._thenViewRef=null,this._updateView()}set ngIfElse(r){zU("ngIfElse",r),this._elseTemplateRef=r,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(r,o){return!0}};t.\u0275fac=function(o){return new(o||t)(Tr(Mp),Tr(vd))},t.\u0275dir=wd({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0});let n=t;return n})(),YA=class{constructor(){this.$implicit=null,this.ngIf=null}};function zU(n,t){if(!!!(!t||t.createEmbeddedView))throw new Error(`${n} must be a TemplateRef, but received '${bs(t)}'.`)}function Vme(n,t){return new Je(2100,!1)}var YU=(()=>{let t=class t{constructor(r){this._locale=r}transform(r,o,s){if(!Ume(r))return null;s||=this._locale;try{let i=jme(r);return Pme(i,s,o)}catch(i){throw Vme(t,i.message)}}};t.\u0275fac=function(o){return new(o||t)(Tr(KI,16))},t.\u0275pipe=P3({name:"percent",type:t,pure:!0,standalone:!0});let n=t;return n})();function Ume(n){return!(n==null||n===""||n!==n)}function jme(n){if(typeof n=="string"&&!isNaN(Number(n)-parseFloat(n)))return Number(n);if(typeof n!="number")throw new Error(`${n} is not a number`);return n}var ZU=(()=>{let t=class t{};t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=Yo({type:t}),t.\u0275inj=Xo({});let n=t;return n})(),nR="browser",Gme="server";function Wme(n){return n===nR}function QI(n){return n===Gme}var QU=(()=>{let t=class t{};t.\u0275prov=Ze({token:t,providedIn:"root",factory:()=>Wme(ke(Qa))?new ZA(ke(_o),window):new QA});let n=t;return n})(),ZA=class{constructor(t,e){this.document=t,this.window=e,this.offset=()=>[0,0]}setOffset(t){Array.isArray(t)?this.offset=()=>t:this.offset=t}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(t){this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){let e=Hme(this.document,t);e&&(this.scrollToElement(e),e.focus())}setHistoryScrollRestoration(t){this.window.history.scrollRestoration=t}scrollToElement(t){let e=t.getBoundingClientRect(),r=e.left+this.window.pageXOffset,o=e.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],o-s[1])}};function Hme(n,t){let e=n.getElementById(t)||n.getElementsByName(t)[0];if(e)return e;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),o=r.currentNode;for(;o;){let s=o.shadowRoot;if(s){let i=s.getElementById(t)||s.querySelector(`[name="${t}"]`);if(i)return i}o=r.nextNode()}}return null}var QA=class{setOffset(t){}getScrollPosition(){return[0,0]}scrollToPosition(t){}scrollToAnchor(t){}setHistoryScrollRestoration(t){}},jg=class{};var Hb=class{},tS=class{},Ad=class n{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?typeof t=="string"?this.lazyInit=()=>{this.headers=new Map,t.split(`
`).forEach(e=>{let r=e.indexOf(":");if(r>0){let o=e.slice(0,r),s=o.toLowerCase(),i=e.slice(r+1).trim();this.maybeSetNormalizedName(o,s),this.headers.has(s)?this.headers.get(s).push(i):this.headers.set(s,[i])}})}:typeof Headers<"u"&&t instanceof Headers?(this.headers=new Map,t.forEach((e,r)=>{this.setHeaderEntries(r,e)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(t).forEach(([e,r])=>{this.setHeaderEntries(e,r)})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();let e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){let e=new n;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){let e=t.name.toLowerCase();switch(t.op){case"a":case"s":let r=t.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(t.name,e);let o=(t.op==="a"?this.headers.get(e):void 0)||[];o.push(...r),this.headers.set(e,o);break;case"d":let s=t.value;if(!s)this.headers.delete(e),this.normalizedNames.delete(e);else{let i=this.headers.get(e);if(!i)return;i=i.filter(a=>s.indexOf(a)===-1),i.length===0?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,i)}break}}setHeaderEntries(t,e){let r=(Array.isArray(e)?e:[e]).map(s=>s.toString()),o=t.toLowerCase();this.headers.set(o,r),this.maybeSetNormalizedName(t,o)}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}};var oR=class{encodeKey(t){return JU(t)}encodeValue(t){return JU(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}};function Xme(n,t){let e=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(o=>{let s=o.indexOf("="),[i,a]=s==-1?[t.decodeKey(o),""]:[t.decodeKey(o.slice(0,s)),t.decodeValue(o.slice(s+1))],l=e.get(i)||[];l.push(a),e.set(i,l)}),e}var Yme=/%(\d[a-f0-9])/gi,Zme={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function JU(n){return encodeURIComponent(n).replace(Yme,(t,e)=>Zme[e]??t)}function eS(n){return`${n}`}var Op=class n{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new oR,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=Xme(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{let r=t.fromObject[e],o=Array.isArray(r)?r.map(eS):[eS(r)];this.map.set(e,o)})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();let e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}appendAll(t){let e=[];return Object.keys(t).forEach(r=>{let o=t[r];Array.isArray(o)?o.forEach(s=>{e.push({param:r,value:s,op:"a"})}):e.push({param:r,value:o,op:"a"})}),this.clone(e)}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{let e=this.encoder.encodeKey(t);return this.map.get(t).map(r=>e+"="+this.encoder.encodeValue(r)).join("&")}).filter(t=>t!=="").join("&")}clone(t){let e=new n({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(t),e}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":let e=(t.op==="a"?this.map.get(t.param):void 0)||[];e.push(eS(t.value)),this.map.set(t.param,e);break;case"d":if(t.value!==void 0){let r=this.map.get(t.param)||[],o=r.indexOf(eS(t.value));o!==-1&&r.splice(o,1),r.length>0?this.map.set(t.param,r):this.map.delete(t.param)}else{this.map.delete(t.param);break}}}),this.cloneFrom=this.updates=null)}};var sR=class{constructor(){this.map=new Map}set(t,e){return this.map.set(t,e),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}has(t){return this.map.has(t)}keys(){return this.map.keys()}};function Qme(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function e4(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function t4(n){return typeof Blob<"u"&&n instanceof Blob}function n4(n){return typeof FormData<"u"&&n instanceof FormData}function Jme(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}var Wb=class n{constructor(t,e,r,o){this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase();let s;if(Qme(this.method)||o?(this.body=r!==void 0?r:null,s=o):s=r,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params),this.transferCache=s.transferCache),this.headers??=new Ad,this.context??=new sR,!this.params)this.params=new Op,this.urlWithParams=e;else{let i=this.params.toString();if(i.length===0)this.urlWithParams=e;else{let a=e.indexOf("?"),l=a===-1?"?":a<e.length-1?"&":"";this.urlWithParams=e+l+i}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||e4(this.body)||t4(this.body)||n4(this.body)||Jme(this.body)?this.body:this.body instanceof Op?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||n4(this.body)?null:t4(this.body)?this.body.type||null:e4(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof Op?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(t={}){let e=t.method||this.method,r=t.url||this.url,o=t.responseType||this.responseType,s=t.transferCache??this.transferCache,i=t.body!==void 0?t.body:this.body,a=t.withCredentials??this.withCredentials,l=t.reportProgress??this.reportProgress,c=t.headers||this.headers,u=t.params||this.params,p=t.context??this.context;return t.setHeaders!==void 0&&(c=Object.keys(t.setHeaders).reduce((f,d)=>f.set(d,t.setHeaders[d]),c)),t.setParams&&(u=Object.keys(t.setParams).reduce((f,d)=>f.set(d,t.setParams[d]),u)),new n(e,r,i,{params:u,headers:c,context:p,reportProgress:l,responseType:o,withCredentials:a,transferCache:s})}},Hg=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(Hg||{}),qb=class{constructor(t,e=oS.Ok,r="OK"){this.headers=t.headers||new Ad,this.status=t.status!==void 0?t.status:e,this.statusText=t.statusText||r,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}},iR=class n extends qb{constructor(t={}){super(t),this.type=Hg.ResponseHeader}clone(t={}){return new n({headers:t.headers||this.headers,status:t.status!==void 0?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}},nS=class n extends qb{constructor(t={}){super(t),this.type=Hg.Response,this.body=t.body!==void 0?t.body:null}clone(t={}){return new n({body:t.body!==void 0?t.body:this.body,headers:t.headers||this.headers,status:t.status!==void 0?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}},rS=class extends qb{constructor(t){super(t,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${t.url||"(unknown url)"}`:this.message=`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}},oS=function(n){return n[n.Continue=100]="Continue",n[n.SwitchingProtocols=101]="SwitchingProtocols",n[n.Processing=102]="Processing",n[n.EarlyHints=103]="EarlyHints",n[n.Ok=200]="Ok",n[n.Created=201]="Created",n[n.Accepted=202]="Accepted",n[n.NonAuthoritativeInformation=203]="NonAuthoritativeInformation",n[n.NoContent=204]="NoContent",n[n.ResetContent=205]="ResetContent",n[n.PartialContent=206]="PartialContent",n[n.MultiStatus=207]="MultiStatus",n[n.AlreadyReported=208]="AlreadyReported",n[n.ImUsed=226]="ImUsed",n[n.MultipleChoices=300]="MultipleChoices",n[n.MovedPermanently=301]="MovedPermanently",n[n.Found=302]="Found",n[n.SeeOther=303]="SeeOther",n[n.NotModified=304]="NotModified",n[n.UseProxy=305]="UseProxy",n[n.Unused=306]="Unused",n[n.TemporaryRedirect=307]="TemporaryRedirect",n[n.PermanentRedirect=308]="PermanentRedirect",n[n.BadRequest=400]="BadRequest",n[n.Unauthorized=401]="Unauthorized",n[n.PaymentRequired=402]="PaymentRequired",n[n.Forbidden=403]="Forbidden",n[n.NotFound=404]="NotFound",n[n.MethodNotAllowed=405]="MethodNotAllowed",n[n.NotAcceptable=406]="NotAcceptable",n[n.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",n[n.RequestTimeout=408]="RequestTimeout",n[n.Conflict=409]="Conflict",n[n.Gone=410]="Gone",n[n.LengthRequired=411]="LengthRequired",n[n.PreconditionFailed=412]="PreconditionFailed",n[n.PayloadTooLarge=413]="PayloadTooLarge",n[n.UriTooLong=414]="UriTooLong",n[n.UnsupportedMediaType=415]="UnsupportedMediaType",n[n.RangeNotSatisfiable=416]="RangeNotSatisfiable",n[n.ExpectationFailed=417]="ExpectationFailed",n[n.ImATeapot=418]="ImATeapot",n[n.MisdirectedRequest=421]="MisdirectedRequest",n[n.UnprocessableEntity=422]="UnprocessableEntity",n[n.Locked=423]="Locked",n[n.FailedDependency=424]="FailedDependency",n[n.TooEarly=425]="TooEarly",n[n.UpgradeRequired=426]="UpgradeRequired",n[n.PreconditionRequired=428]="PreconditionRequired",n[n.TooManyRequests=429]="TooManyRequests",n[n.RequestHeaderFieldsTooLarge=431]="RequestHeaderFieldsTooLarge",n[n.UnavailableForLegalReasons=451]="UnavailableForLegalReasons",n[n.InternalServerError=500]="InternalServerError",n[n.NotImplemented=501]="NotImplemented",n[n.BadGateway=502]="BadGateway",n[n.ServiceUnavailable=503]="ServiceUnavailable",n[n.GatewayTimeout=504]="GatewayTimeout",n[n.HttpVersionNotSupported=505]="HttpVersionNotSupported",n[n.VariantAlsoNegotiates=506]="VariantAlsoNegotiates",n[n.InsufficientStorage=507]="InsufficientStorage",n[n.LoopDetected=508]="LoopDetected",n[n.NotExtended=510]="NotExtended",n[n.NetworkAuthenticationRequired=511]="NetworkAuthenticationRequired",n}(oS||{});function rR(n,t){return{body:t,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,transferCache:n.transferCache}}var ege=(()=>{let t=class t{constructor(r){this.handler=r}request(r,o,s={}){let i;if(r instanceof Wb)i=r;else{let c;s.headers instanceof Ad?c=s.headers:c=new Ad(s.headers);let u;s.params&&(s.params instanceof Op?u=s.params:u=new Op({fromObject:s.params})),i=new Wb(r,o,s.body!==void 0?s.body:null,{headers:c,context:s.context,params:u,reportProgress:s.reportProgress,responseType:s.responseType||"json",withCredentials:s.withCredentials,transferCache:s.transferCache})}let a=ut(i).pipe(Nc(c=>this.handler.handle(c)));if(r instanceof Wb||s.observe==="events")return a;let l=a.pipe(gs(c=>c instanceof nS));switch(s.observe||"body"){case"body":switch(i.responseType){case"arraybuffer":return l.pipe(At(c=>{if(c.body!==null&&!(c.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return c.body}));case"blob":return l.pipe(At(c=>{if(c.body!==null&&!(c.body instanceof Blob))throw new Error("Response is not a Blob.");return c.body}));case"text":return l.pipe(At(c=>{if(c.body!==null&&typeof c.body!="string")throw new Error("Response is not a string.");return c.body}));case"json":default:return l.pipe(At(c=>c.body))}case"response":return l;default:throw new Error(`Unreachable: unhandled observe type ${s.observe}}`)}}delete(r,o={}){return this.request("DELETE",r,o)}get(r,o={}){return this.request("GET",r,o)}head(r,o={}){return this.request("HEAD",r,o)}jsonp(r,o){return this.request("JSONP",r,{params:new Op().append(o,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(r,o={}){return this.request("OPTIONS",r,o)}patch(r,o,s={}){return this.request("PATCH",r,rR(s,o))}post(r,o,s={}){return this.request("POST",r,rR(s,o))}put(r,o,s={}){return this.request("PUT",r,rR(s,o))}};t.\u0275fac=function(o){return new(o||t)(Xe(Hb))},t.\u0275prov=Ze({token:t,factory:t.\u0275fac});let n=t;return n})();function i4(n,t){return t(n)}function tge(n,t){return(e,r)=>t.intercept(e,{handle:o=>n(o,r)})}function nge(n,t,e){return(r,o)=>Wi(e,()=>t(r,s=>n(s,o)))}var rge=new ot(""),aR=new ot(""),oge=new ot(""),sge=new ot("");function ige(){let n=null;return(t,e)=>{n===null&&(n=(ke(rge,{optional:!0})??[]).reduceRight(tge,i4));let r=ke(Id),o=r.add();return n(t,e).pipe(Np(()=>r.remove(o)))}}var r4=(()=>{let t=class t extends Hb{constructor(r,o){super(),this.backend=r,this.injector=o,this.chain=null,this.pendingTasks=ke(Id);let s=ke(sge,{optional:!0});this.backend=s??r}handle(r){if(this.chain===null){let s=Array.from(new Set([...this.injector.get(aR),...this.injector.get(oge,[])]));this.chain=s.reduceRight((i,a)=>nge(i,a,this.injector),i4)}let o=this.pendingTasks.add();return this.chain(r,s=>this.backend.handle(s)).pipe(Np(()=>this.pendingTasks.remove(o)))}};t.\u0275fac=function(o){return new(o||t)(Xe(tS),Xe(ko))},t.\u0275prov=Ze({token:t,factory:t.\u0275fac});let n=t;return n})();var age=/^\)\]\}',?\n/;function lge(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}var o4=(()=>{let t=class t{constructor(r){this.xhrFactory=r}handle(r){if(r.method==="JSONP")throw new Je(-2800,!1);let o=this.xhrFactory;return(o.\u0275loadImpl?cr(o.\u0275loadImpl()):ut(null)).pipe(xs(()=>new pn(i=>{let a=o.build();if(a.open(r.method,r.urlWithParams),r.withCredentials&&(a.withCredentials=!0),r.headers.forEach((g,x)=>a.setRequestHeader(g,x.join(","))),r.headers.has("Accept")||a.setRequestHeader("Accept","application/json, text/plain, */*"),!r.headers.has("Content-Type")){let g=r.detectContentTypeHeader();g!==null&&a.setRequestHeader("Content-Type",g)}if(r.responseType){let g=r.responseType.toLowerCase();a.responseType=g!=="json"?g:"text"}let l=r.serializeBody(),c=null,u=()=>{if(c!==null)return c;let g=a.statusText||"OK",x=new Ad(a.getAllResponseHeaders()),b=lge(a)||r.url;return c=new iR({headers:x,status:a.status,statusText:g,url:b}),c},p=()=>{let{headers:g,status:x,statusText:b,url:w}=u(),v=null;x!==oS.NoContent&&(v=typeof a.response>"u"?a.responseText:a.response),x===0&&(x=v?oS.Ok:0);let S=x>=200&&x<300;if(r.responseType==="json"&&typeof v=="string"){let k=v;v=v.replace(age,"");try{v=v!==""?JSON.parse(v):null}catch(A){v=k,S&&(S=!1,v={error:A,text:v})}}S?(i.next(new nS({body:v,headers:g,status:x,statusText:b,url:w||void 0})),i.complete()):i.error(new rS({error:v,headers:g,status:x,statusText:b,url:w||void 0}))},f=g=>{let{url:x}=u(),b=new rS({error:g,status:a.status||0,statusText:a.statusText||"Unknown Error",url:x||void 0});i.error(b)},d=!1,h=g=>{d||(i.next(u()),d=!0);let x={type:Hg.DownloadProgress,loaded:g.loaded};g.lengthComputable&&(x.total=g.total),r.responseType==="text"&&a.responseText&&(x.partialText=a.responseText),i.next(x)},m=g=>{let x={type:Hg.UploadProgress,loaded:g.loaded};g.lengthComputable&&(x.total=g.total),i.next(x)};return a.addEventListener("load",p),a.addEventListener("error",f),a.addEventListener("timeout",f),a.addEventListener("abort",f),r.reportProgress&&(a.addEventListener("progress",h),l!==null&&a.upload&&a.upload.addEventListener("progress",m)),a.send(l),i.next({type:Hg.Sent}),()=>{a.removeEventListener("error",f),a.removeEventListener("abort",f),a.removeEventListener("load",p),a.removeEventListener("timeout",f),r.reportProgress&&(a.removeEventListener("progress",h),l!==null&&a.upload&&a.upload.removeEventListener("progress",m)),a.readyState!==a.DONE&&a.abort()}})))}};t.\u0275fac=function(o){return new(o||t)(Xe(jg))},t.\u0275prov=Ze({token:t,factory:t.\u0275fac});let n=t;return n})(),a4=new ot(""),cge="XSRF-TOKEN",uge=new ot("",{providedIn:"root",factory:()=>cge}),pge="X-XSRF-TOKEN",fge=new ot("",{providedIn:"root",factory:()=>pge}),sS=class{},dge=(()=>{let t=class t{constructor(r,o,s){this.doc=r,this.platform=o,this.cookieName=s,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if(this.platform==="server")return null;let r=this.doc.cookie||"";return r!==this.lastCookieString&&(this.parseCount++,this.lastToken=ZI(r,this.cookieName),this.lastCookieString=r),this.lastToken}};t.\u0275fac=function(o){return new(o||t)(Xe(_o),Xe(Qa),Xe(uge))},t.\u0275prov=Ze({token:t,factory:t.\u0275fac});let n=t;return n})();function hge(n,t){let e=n.url.toLowerCase();if(!ke(a4)||n.method==="GET"||n.method==="HEAD"||e.startsWith("http://")||e.startsWith("https://"))return t(n);let r=ke(sS).getToken(),o=ke(fge);return r!=null&&!n.headers.has(o)&&(n=n.clone({headers:n.headers.set(o,r)})),t(n)}var l4=function(n){return n[n.Interceptors=0]="Interceptors",n[n.LegacyInterceptors=1]="LegacyInterceptors",n[n.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",n[n.NoXsrfProtection=3]="NoXsrfProtection",n[n.JsonpSupport=4]="JsonpSupport",n[n.RequestsMadeViaParent=5]="RequestsMadeViaParent",n[n.Fetch=6]="Fetch",n}(l4||{});function mge(n,t){return{\u0275kind:n,\u0275providers:t}}function gge(...n){let t=[ege,o4,r4,{provide:Hb,useExisting:r4},{provide:tS,useExisting:o4},{provide:aR,useValue:hge,multi:!0},{provide:a4,useValue:!0},{provide:sS,useClass:dge}];for(let e of n)t.push(...e.\u0275providers);return DI(t)}var s4=new ot("");function xge(){return mge(l4.LegacyInterceptors,[{provide:s4,useFactory:ige},{provide:aR,useExisting:s4,multi:!0}])}var c4=(()=>{let t=class t{};t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=Yo({type:t}),t.\u0275inj=Xo({providers:[gge(xge())]});let n=t;return n})();var uR=class extends XI{constructor(){super(...arguments),this.supportsDOMEvents=!0}},pR=class n extends uR{static makeCurrent(){jU(new n)}onAndCancel(t,e,r){return t.addEventListener(e,r),()=>{t.removeEventListener(e,r)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,e){return e=e||this.getDefaultDocument(),e.createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return e==="window"?window:e==="document"?t:e==="body"?t.body:null}getBaseHref(t){let e=yge();return e==null?null:bge(e)}resetBaseElement(){Kb=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return ZI(document.cookie,t)}},Kb=null;function yge(){return Kb=Kb||document.querySelector("base"),Kb?Kb.getAttribute("href"):null}function bge(n){return new URL(n,document.baseURI).pathname}var fR=class{addToWindow(t){xo.getAngularTestability=(r,o=!0)=>{let s=t.findTestabilityInTree(r,o);if(s==null)throw new Je(5103,!1);return s},xo.getAllAngularTestabilities=()=>t.getAllTestabilities(),xo.getAllAngularRootElements=()=>t.getAllRootElements();let e=r=>{let o=xo.getAllAngularTestabilities(),s=o.length,i=function(){s--,s==0&&r()};o.forEach(a=>{a.whenStable(i)})};xo.frameworkStabilizers||(xo.frameworkStabilizers=[]),xo.frameworkStabilizers.push(e)}findTestabilityInTree(t,e,r){if(e==null)return null;let o=t.getTestability(e);return o??(r?kd().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null)}},vge=(()=>{let t=class t{build(){return new XMLHttpRequest}};t.\u0275fac=function(o){return new(o||t)},t.\u0275prov=Ze({token:t,factory:t.\u0275fac});let n=t;return n})(),dR=new ot(""),d4=(()=>{let t=class t{constructor(r,o){this._zone=o,this._eventNameToPlugin=new Map,r.forEach(s=>{s.manager=this}),this._plugins=r.slice().reverse()}addEventListener(r,o,s){return this._findPluginFor(o).addEventListener(r,o,s)}getZone(){return this._zone}_findPluginFor(r){let o=this._eventNameToPlugin.get(r);if(o)return o;if(o=this._plugins.find(i=>i.supports(r)),!o)throw new Je(5101,!1);return this._eventNameToPlugin.set(r,o),o}};t.\u0275fac=function(o){return new(o||t)(Xe(dR),Xe(Tn))},t.\u0275prov=Ze({token:t,factory:t.\u0275fac});let n=t;return n})(),iS=class{constructor(t){this._doc=t}},lR="ng-app-id",h4=(()=>{let t=class t{constructor(r,o,s,i={}){this.doc=r,this.appId=o,this.nonce=s,this.platformId=i,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=QI(i),this.resetHostNodes()}addStyles(r){for(let o of r)this.changeUsageCount(o,1)===1&&this.onStyleAdded(o)}removeStyles(r){for(let o of r)this.changeUsageCount(o,-1)<=0&&this.onStyleRemoved(o)}ngOnDestroy(){let r=this.styleNodesInDOM;r&&(r.forEach(o=>o.remove()),r.clear());for(let o of this.getAllStyles())this.onStyleRemoved(o);this.resetHostNodes()}addHost(r){this.hostNodes.add(r);for(let o of this.getAllStyles())this.addStyleToHost(r,o)}removeHost(r){this.hostNodes.delete(r)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(r){for(let o of this.hostNodes)this.addStyleToHost(o,r)}onStyleRemoved(r){let o=this.styleRef;o.get(r)?.elements?.forEach(s=>s.remove()),o.delete(r)}collectServerRenderedStyles(){let r=this.doc.head?.querySelectorAll(`style[${lR}="${this.appId}"]`);if(r?.length){let o=new Map;return r.forEach(s=>{s.textContent!=null&&o.set(s.textContent,s)}),o}return null}changeUsageCount(r,o){let s=this.styleRef;if(s.has(r)){let i=s.get(r);return i.usage+=o,i.usage}return s.set(r,{usage:o,elements:[]}),o}getStyleElement(r,o){let s=this.styleNodesInDOM,i=s?.get(o);if(i?.parentNode===r)return s.delete(o),i.removeAttribute(lR),i;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=o,this.platformIsServer&&a.setAttribute(lR,this.appId),r.appendChild(a),a}}addStyleToHost(r,o){let s=this.getStyleElement(r,o),i=this.styleRef,a=i.get(o)?.elements;a?a.push(s):i.set(o,{elements:[s],usage:1})}resetHostNodes(){let r=this.hostNodes;r.clear(),r.add(this.doc.head)}};t.\u0275fac=function(o){return new(o||t)(Xe(_o),Xe(RI),Xe(IA,8),Xe(Qa))},t.\u0275prov=Ze({token:t,factory:t.\u0275fac});let n=t;return n})(),cR={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},mR=/%COMP%/g,m4="%COMP%",wge=`_nghost-${m4}`,Cge=`_ngcontent-${m4}`,Ige=!0,Sge=new ot("",{providedIn:"root",factory:()=>Ige});function Tge(n){return Cge.replace(mR,n)}function Ege(n){return wge.replace(mR,n)}function g4(n,t){return t.map(e=>e.replace(mR,n))}var u4=(()=>{let t=class t{constructor(r,o,s,i,a,l,c,u=null){this.eventManager=r,this.sharedStylesHost=o,this.appId=s,this.removeStylesOnCompDestroy=i,this.doc=a,this.platformId=l,this.ngZone=c,this.nonce=u,this.rendererByCompId=new Map,this.platformIsServer=QI(l),this.defaultRenderer=new Xb(r,a,c,this.platformIsServer)}createRenderer(r,o){if(!r||!o)return this.defaultRenderer;this.platformIsServer&&o.encapsulation===Wa.ShadowDom&&(o=lr(Ge({},o),{encapsulation:Wa.Emulated}));let s=this.getOrCreateRenderer(r,o);return s instanceof aS?s.applyToHost(r):s instanceof Yb&&s.applyStyles(),s}getOrCreateRenderer(r,o){let s=this.rendererByCompId,i=s.get(o.id);if(!i){let a=this.doc,l=this.ngZone,c=this.eventManager,u=this.sharedStylesHost,p=this.removeStylesOnCompDestroy,f=this.platformIsServer;switch(o.encapsulation){case Wa.Emulated:i=new aS(c,u,o,this.appId,p,a,l,f);break;case Wa.ShadowDom:return new hR(c,u,r,o,a,l,this.nonce,f);default:i=new Yb(c,u,o,p,a,l,f);break}s.set(o.id,i)}return i}ngOnDestroy(){this.rendererByCompId.clear()}};t.\u0275fac=function(o){return new(o||t)(Xe(d4),Xe(h4),Xe(RI),Xe(Sge),Xe(_o),Xe(Qa),Xe(Tn),Xe(IA))},t.\u0275prov=Ze({token:t,factory:t.\u0275fac});let n=t;return n})(),Xb=class{constructor(t,e,r,o){this.eventManager=t,this.doc=e,this.ngZone=r,this.platformIsServer=o,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(t,e){return e?this.doc.createElementNS(cR[e]||e,t):this.doc.createElement(t)}createComment(t){return this.doc.createComment(t)}createText(t){return this.doc.createTextNode(t)}appendChild(t,e){(p4(t)?t.content:t).appendChild(e)}insertBefore(t,e,r){t&&(p4(t)?t.content:t).insertBefore(e,r)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let r=typeof t=="string"?this.doc.querySelector(t):t;if(!r)throw new Je(-5104,!1);return e||(r.textContent=""),r}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,r,o){if(o){e=o+":"+e;let s=cR[o];s?t.setAttributeNS(s,e,r):t.setAttribute(e,r)}else t.setAttribute(e,r)}removeAttribute(t,e,r){if(r){let o=cR[r];o?t.removeAttributeNS(o,e):t.removeAttribute(`${r}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,r,o){o&(Cd.DashCase|Cd.Important)?t.style.setProperty(e,r,o&Cd.Important?"important":""):t.style[e]=r}removeStyle(t,e,r){r&Cd.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,r){t!=null&&(t[e]=r)}setValue(t,e){t.nodeValue=e}listen(t,e,r){if(typeof t=="string"&&(t=kd().getGlobalEventTarget(this.doc,t),!t))throw new Error(`Unsupported event target ${t} for event ${e}`);return this.eventManager.addEventListener(t,e,this.decoratePreventDefault(r))}decoratePreventDefault(t){return e=>{if(e==="__ngUnwrap__")return t;(this.platformIsServer?this.ngZone.runGuarded(()=>t(e)):t(e))===!1&&e.preventDefault()}}};function p4(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var hR=class extends Xb{constructor(t,e,r,o,s,i,a,l){super(t,s,i,l),this.sharedStylesHost=e,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let c=g4(o.id,o.styles);for(let u of c){let p=document.createElement("style");a&&p.setAttribute("nonce",a),p.textContent=u,this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,r){return super.insertBefore(this.nodeOrShadowRoot(t),e,r)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Yb=class extends Xb{constructor(t,e,r,o,s,i,a,l){super(t,s,i,a),this.sharedStylesHost=e,this.removeStylesOnCompDestroy=o,this.styles=l?g4(l,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},aS=class extends Yb{constructor(t,e,r,o,s,i,a,l){let c=o+"-"+r.id;super(t,e,r,s,i,a,l,c),this.contentAttr=Tge(c),this.hostAttr=Ege(c)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,e){let r=super.createElement(t,e);return super.setAttribute(r,this.contentAttr,""),r}},Nge=(()=>{let t=class t extends iS{constructor(r){super(r)}supports(r){return!0}addEventListener(r,o,s){return r.addEventListener(o,s,!1),()=>this.removeEventListener(r,o,s)}removeEventListener(r,o,s){return r.removeEventListener(o,s)}};t.\u0275fac=function(o){return new(o||t)(Xe(_o))},t.\u0275prov=Ze({token:t,factory:t.\u0275fac});let n=t;return n})(),f4=["alt","control","meta","shift"],Dge={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},kge={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},_ge=(()=>{let t=class t extends iS{constructor(r){super(r)}supports(r){return t.parseEventName(r)!=null}addEventListener(r,o,s){let i=t.parseEventName(o),a=t.eventCallback(i.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>kd().onAndCancel(r,i.domEventName,a))}static parseEventName(r){let o=r.toLowerCase().split("."),s=o.shift();if(o.length===0||!(s==="keydown"||s==="keyup"))return null;let i=t._normalizeKey(o.pop()),a="",l=o.indexOf("code");if(l>-1&&(o.splice(l,1),a="code."),f4.forEach(u=>{let p=o.indexOf(u);p>-1&&(o.splice(p,1),a+=u+".")}),a+=i,o.length!=0||i.length===0)return null;let c={};return c.domEventName=s,c.fullKey=a,c}static matchEventFullKeyCode(r,o){let s=Dge[r.key]||r.key,i="";return o.indexOf("code.")>-1&&(s=r.code,i="code."),s==null||!s?!1:(s=s.toLowerCase(),s===" "?s="space":s==="."&&(s="dot"),f4.forEach(a=>{if(a!==s){let l=kge[a];l(r)&&(i+=a+".")}}),i+=s,i===o)}static eventCallback(r,o,s){return i=>{t.matchEventFullKeyCode(i,r)&&s.runGuarded(()=>o(i))}}static _normalizeKey(r){return r==="esc"?"escape":r}};t.\u0275fac=function(o){return new(o||t)(Xe(_o))},t.\u0275prov=Ze({token:t,factory:t.\u0275fac});let n=t;return n})();function Age(){pR.makeCurrent()}function Rge(){return new Xa}function Mge(){return MV(document),document}var Oge=[{provide:Qa,useValue:nR},{provide:CA,useValue:Age,multi:!0},{provide:_o,useFactory:Mge,deps:[]}],x4=GA(RU,"browser",Oge),Fge=new ot(""),Pge=[{provide:Vb,useClass:fR,deps:[]},{provide:UA,useClass:jI,deps:[Tn,GI,Vb]},{provide:jI,useClass:jI,deps:[Tn,GI,Vb]}],$ge=[{provide:kI,useValue:"root"},{provide:Xa,useFactory:Rge,deps:[]},{provide:dR,useClass:Nge,multi:!0,deps:[_o,Tn,Qa]},{provide:dR,useClass:_ge,multi:!0,deps:[_o]},u4,h4,d4,{provide:Mb,useExisting:u4},{provide:jg,useClass:vge,deps:[]},[]],y4=(()=>{let t=class t{constructor(r){}static withServerTransition(r){return{ngModule:t,providers:[{provide:RI,useValue:r.appId}]}}};t.\u0275fac=function(o){return new(o||t)(Xe(Fge,12))},t.\u0275mod=Yo({type:t}),t.\u0275inj=Xo({providers:[...$ge,...Pge],imports:[ZU,MU]});let n=t;return n})();var b4=(()=>{let t=class t{constructor(r){this._doc=r}getTitle(){return this._doc.title}setTitle(r){this._doc.title=r||""}};t.\u0275fac=function(o){return new(o||t)(Xe(_o))},t.\u0275prov=Ze({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})();function tl(){}var F4=function(){let n=0;return function(){return n++}}();function Ht(n){return n===null||typeof n>"u"}function $n(n){if(Array.isArray&&Array.isArray(n))return!0;let t=Object.prototype.toString.call(n);return t.slice(0,7)==="[object"&&t.slice(-6)==="Array]"}function Lt(n){return n!==null&&Object.prototype.toString.call(n)==="[object Object]"}var xr=n=>(typeof n=="number"||n instanceof Number)&&isFinite(+n);function Us(n,t){return xr(n)?n:t}function St(n,t){return typeof n>"u"?t:n}var P4=(n,t)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100:n/t,IR=(n,t)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100*t:+n;function Ln(n,t,e){if(n&&typeof n.call=="function")return n.apply(e,t)}function gn(n,t,e,r){let o,s,i;if($n(n))if(s=n.length,r)for(o=s-1;o>=0;o--)t.call(e,n[o],o);else for(o=0;o<s;o++)t.call(e,n[o],o);else if(Lt(n))for(i=Object.keys(n),s=i.length,o=0;o<s;o++)t.call(e,n[i[o]],i[o])}function tv(n,t){let e,r,o,s;if(!n||!t||n.length!==t.length)return!1;for(e=0,r=n.length;e<r;++e)if(o=n[e],s=t[e],o.datasetIndex!==s.datasetIndex||o.index!==s.index)return!1;return!0}function dS(n){if($n(n))return n.map(dS);if(Lt(n)){let t=Object.create(null),e=Object.keys(n),r=e.length,o=0;for(;o<r;++o)t[e[o]]=dS(n[e[o]]);return t}return n}function $4(n){return["__proto__","prototype","constructor"].indexOf(n)===-1}function Lge(n,t,e,r){if(!$4(n))return;let o=t[n],s=e[n];Lt(o)&&Lt(s)?Xg(o,s,r):t[n]=dS(s)}function Xg(n,t,e){let r=$n(t)?t:[t],o=r.length;if(!Lt(n))return n;e=e||{};let s=e.merger||Lge;for(let i=0;i<o;++i){if(t=r[i],!Lt(t))continue;let a=Object.keys(t);for(let l=0,c=a.length;l<c;++l)s(a[l],n,t,e)}return n}function Qg(n,t){return Xg(n,t,{merger:Bge})}function Bge(n,t,e){if(!$4(n))return;let r=t[n],o=e[n];Lt(r)&&Lt(o)?Qg(r,o):Object.prototype.hasOwnProperty.call(t,n)||(t[n]=dS(o))}var w4={"":n=>n,x:n=>n.x,y:n=>n.y};function Lc(n,t){return(w4[t]||(w4[t]=zge(t)))(n)}function zge(n){let t=Vge(n);return e=>{for(let r of t){if(r==="")break;e=e&&e[r]}return e}}function Vge(n){let t=n.split("."),e=[],r="";for(let o of t)r+=o,r.endsWith("\\")?r=r.slice(0,-1)+".":(e.push(r),r="");return e}function xS(n){return n.charAt(0).toUpperCase()+n.slice(1)}var Vs=n=>typeof n<"u",$c=n=>typeof n=="function",SR=(n,t)=>{if(n.size!==t.size)return!1;for(let e of n)if(!t.has(e))return!1;return!0};function L4(n){return n.type==="mouseup"||n.type==="click"||n.type==="contextmenu"}var Zn=Math.PI,wn=2*Zn,Uge=wn+Zn,hS=Number.POSITIVE_INFINITY,jge=Zn/180,ur=Zn/2,Zb=Zn/4,C4=Zn*2/3,js=Math.log10,Xi=Math.sign;function TR(n){let t=Math.round(n);n=Jg(n,t,n/1e3)?t:n;let e=Math.pow(10,Math.floor(js(n))),r=n/e;return(r<=1?1:r<=2?2:r<=5?5:10)*e}function B4(n){let t=[],e=Math.sqrt(n),r;for(r=1;r<e;r++)n%r===0&&(t.push(r),t.push(n/r));return e===(e|0)&&t.push(e),t.sort((o,s)=>o-s).pop(),t}function Od(n){return!isNaN(parseFloat(n))&&isFinite(n)}function Jg(n,t,e){return Math.abs(n-t)<e}function z4(n,t){let e=Math.round(n);return e-t<=n&&e+t>=n}function ER(n,t,e){let r,o,s;for(r=0,o=n.length;r<o;r++)s=n[r][e],isNaN(s)||(t.min=Math.min(t.min,s),t.max=Math.max(t.max,s))}function di(n){return n*(Zn/180)}function yS(n){return n*(180/Zn)}function NR(n){if(!xr(n))return;let t=1,e=0;for(;Math.round(n*t)/t!==n;)t*=10,e++;return e}function DR(n,t){let e=t.x-n.x,r=t.y-n.y,o=Math.sqrt(e*e+r*r),s=Math.atan2(r,e);return s<-.5*Zn&&(s+=wn),{angle:s,distance:o}}function mS(n,t){return Math.sqrt(Math.pow(t.x-n.x,2)+Math.pow(t.y-n.y,2))}function Gge(n,t){return(n-t+Uge)%wn-Zn}function vs(n){return(n%wn+wn)%wn}function ex(n,t,e,r){let o=vs(n),s=vs(t),i=vs(e),a=vs(s-o),l=vs(i-o),c=vs(o-s),u=vs(o-i);return o===s||o===i||r&&s===i||a>l&&c<u}function Hr(n,t,e){return Math.max(t,Math.min(e,n))}function V4(n){return Hr(n,-32768,32767)}function nl(n,t,e,r=1e-6){return n>=Math.min(t,e)-r&&n<=Math.max(t,e)+r}function bS(n,t,e){e=e||(i=>n[i]<t);let r=n.length-1,o=0,s;for(;r-o>1;)s=o+r>>1,e(s)?o=s:r=s;return{lo:o,hi:r}}var el=(n,t,e,r)=>bS(n,e,r?o=>n[o][t]<=e:o=>n[o][t]<e),U4=(n,t,e)=>bS(n,e,r=>n[r][t]>=e);function j4(n,t,e){let r=0,o=n.length;for(;r<o&&n[r]<t;)r++;for(;o>r&&n[o-1]>e;)o--;return r>0||o<n.length?n.slice(r,o):n}var G4=["push","pop","shift","splice","unshift"];function W4(n,t){if(n._chartjs){n._chartjs.listeners.push(t);return}Object.defineProperty(n,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),G4.forEach(e=>{let r="_onData"+xS(e),o=n[e];Object.defineProperty(n,e,{configurable:!0,enumerable:!1,value(...s){let i=o.apply(this,s);return n._chartjs.listeners.forEach(a=>{typeof a[r]=="function"&&a[r](...s)}),i}})})}function kR(n,t){let e=n._chartjs;if(!e)return;let r=e.listeners,o=r.indexOf(t);o!==-1&&r.splice(o,1),!(r.length>0)&&(G4.forEach(s=>{delete n[s]}),delete n._chartjs)}function _R(n){let t=new Set,e,r;for(e=0,r=n.length;e<r;++e)t.add(n[e]);return t.size===r?n:Array.from(t)}var AR=function(){return typeof window>"u"?function(n){return n()}:window.requestAnimationFrame}();function RR(n,t,e){let r=e||(i=>Array.prototype.slice.call(i)),o=!1,s=[];return function(...i){s=r(i),o||(o=!0,AR.call(window,()=>{o=!1,n.apply(t,s)}))}}function H4(n,t){let e;return function(...r){return t?(clearTimeout(e),e=setTimeout(n,t,r)):n.apply(this,r),t}}var vS=n=>n==="start"?"left":n==="end"?"right":"center",bo=(n,t,e)=>n==="start"?t:n==="end"?e:(t+e)/2,q4=(n,t,e,r)=>n===(r?"left":"right")?e:n==="center"?(t+e)/2:t;function MR(n,t,e){let r=t.length,o=0,s=r;if(n._sorted){let{iScale:i,_parsed:a}=n,l=i.axis,{min:c,max:u,minDefined:p,maxDefined:f}=i.getUserBounds();p&&(o=Hr(Math.min(el(a,i.axis,c).lo,e?r:el(t,l,i.getPixelForValue(c)).lo),0,r-1)),f?s=Hr(Math.max(el(a,i.axis,u,!0).hi+1,e?0:el(t,l,i.getPixelForValue(u),!0).hi+1),o,r)-o:s=r-o}return{start:o,count:s}}function OR(n){let{xScale:t,yScale:e,_scaleRanges:r}=n,o={xmin:t.min,xmax:t.max,ymin:e.min,ymax:e.max};if(!r)return n._scaleRanges=o,!0;let s=r.xmin!==t.min||r.xmax!==t.max||r.ymin!==e.min||r.ymax!==e.max;return Object.assign(r,o),s}var lS=n=>n===0||n===1,I4=(n,t,e)=>-(Math.pow(2,10*(n-=1))*Math.sin((n-t)*wn/e)),S4=(n,t,e)=>Math.pow(2,-10*n)*Math.sin((n-t)*wn/e)+1,Kg={linear:n=>n,easeInQuad:n=>n*n,easeOutQuad:n=>-n*(n-2),easeInOutQuad:n=>(n/=.5)<1?.5*n*n:-.5*(--n*(n-2)-1),easeInCubic:n=>n*n*n,easeOutCubic:n=>(n-=1)*n*n+1,easeInOutCubic:n=>(n/=.5)<1?.5*n*n*n:.5*((n-=2)*n*n+2),easeInQuart:n=>n*n*n*n,easeOutQuart:n=>-((n-=1)*n*n*n-1),easeInOutQuart:n=>(n/=.5)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2),easeInQuint:n=>n*n*n*n*n,easeOutQuint:n=>(n-=1)*n*n*n*n+1,easeInOutQuint:n=>(n/=.5)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2),easeInSine:n=>-Math.cos(n*ur)+1,easeOutSine:n=>Math.sin(n*ur),easeInOutSine:n=>-.5*(Math.cos(Zn*n)-1),easeInExpo:n=>n===0?0:Math.pow(2,10*(n-1)),easeOutExpo:n=>n===1?1:-Math.pow(2,-10*n)+1,easeInOutExpo:n=>lS(n)?n:n<.5?.5*Math.pow(2,10*(n*2-1)):.5*(-Math.pow(2,-10*(n*2-1))+2),easeInCirc:n=>n>=1?n:-(Math.sqrt(1-n*n)-1),easeOutCirc:n=>Math.sqrt(1-(n-=1)*n),easeInOutCirc:n=>(n/=.5)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1),easeInElastic:n=>lS(n)?n:I4(n,.075,.3),easeOutElastic:n=>lS(n)?n:S4(n,.075,.3),easeInOutElastic(n){return lS(n)?n:n<.5?.5*I4(n*2,.1125,.45):.5+.5*S4(n*2-1,.1125,.45)},easeInBack(n){return n*n*((1.70158+1)*n-1.70158)},easeOutBack(n){return(n-=1)*n*((1.70158+1)*n+1.70158)+1},easeInOutBack(n){let t=1.70158;return(n/=.5)<1?.5*(n*n*(((t*=1.525)+1)*n-t)):.5*((n-=2)*n*(((t*=1.525)+1)*n+t)+2)},easeInBounce:n=>1-Kg.easeOutBounce(1-n),easeOutBounce(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},easeInOutBounce:n=>n<.5?Kg.easeInBounce(n*2)*.5:Kg.easeOutBounce(n*2-1)*.5+.5};function nv(n){return n+.5|0}var Pp=(n,t,e)=>Math.max(Math.min(n,e),t);function Qb(n){return Pp(nv(n*2.55),0,255)}function $p(n){return Pp(nv(n*255),0,255)}function Pc(n){return Pp(nv(n/2.55)/100,0,1)}function T4(n){return Pp(nv(n*100),0,100)}var fi={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},vR=[..."0123456789ABCDEF"],Wge=n=>vR[n&15],Hge=n=>vR[(n&240)>>4]+vR[n&15],cS=n=>(n&240)>>4===(n&15),qge=n=>cS(n.r)&&cS(n.g)&&cS(n.b)&&cS(n.a);function Kge(n){var t=n.length,e;return n[0]==="#"&&(t===4||t===5?e={r:255&fi[n[1]]*17,g:255&fi[n[2]]*17,b:255&fi[n[3]]*17,a:t===5?fi[n[4]]*17:255}:(t===7||t===9)&&(e={r:fi[n[1]]<<4|fi[n[2]],g:fi[n[3]]<<4|fi[n[4]],b:fi[n[5]]<<4|fi[n[6]],a:t===9?fi[n[7]]<<4|fi[n[8]]:255})),e}var Xge=(n,t)=>n<255?t(n):"";function Yge(n){var t=qge(n)?Wge:Hge;return n?"#"+t(n.r)+t(n.g)+t(n.b)+Xge(n.a,t):void 0}var Zge=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function K4(n,t,e){let r=t*Math.min(e,1-e),o=(s,i=(s+n/30)%12)=>e-r*Math.max(Math.min(i-3,9-i,1),-1);return[o(0),o(8),o(4)]}function Qge(n,t,e){let r=(o,s=(o+n/60)%6)=>e-e*t*Math.max(Math.min(s,4-s,1),0);return[r(5),r(3),r(1)]}function Jge(n,t,e){let r=K4(n,1,.5),o;for(t+e>1&&(o=1/(t+e),t*=o,e*=o),o=0;o<3;o++)r[o]*=1-t-e,r[o]+=t;return r}function exe(n,t,e,r,o){return n===o?(t-e)/r+(t<e?6:0):t===o?(e-n)/r+2:(n-t)/r+4}function FR(n){let e=n.r/255,r=n.g/255,o=n.b/255,s=Math.max(e,r,o),i=Math.min(e,r,o),a=(s+i)/2,l,c,u;return s!==i&&(u=s-i,c=a>.5?u/(2-s-i):u/(s+i),l=exe(e,r,o,u,s),l=l*60+.5),[l|0,c||0,a]}function PR(n,t,e,r){return(Array.isArray(t)?n(t[0],t[1],t[2]):n(t,e,r)).map($p)}function $R(n,t,e){return PR(K4,n,t,e)}function txe(n,t,e){return PR(Jge,n,t,e)}function nxe(n,t,e){return PR(Qge,n,t,e)}function X4(n){return(n%360+360)%360}function rxe(n){let t=Zge.exec(n),e=255,r;if(!t)return;t[5]!==r&&(e=t[6]?Qb(+t[5]):$p(+t[5]));let o=X4(+t[2]),s=+t[3]/100,i=+t[4]/100;return t[1]==="hwb"?r=txe(o,s,i):t[1]==="hsv"?r=nxe(o,s,i):r=$R(o,s,i),{r:r[0],g:r[1],b:r[2],a:e}}function oxe(n,t){var e=FR(n);e[0]=X4(e[0]+t),e=$R(e),n.r=e[0],n.g=e[1],n.b=e[2]}function sxe(n){if(!n)return;let t=FR(n),e=t[0],r=T4(t[1]),o=T4(t[2]);return n.a<255?`hsla(${e}, ${r}%, ${o}%, ${Pc(n.a)})`:`hsl(${e}, ${r}%, ${o}%)`}var E4={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},N4={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function ixe(){let n={},t=Object.keys(N4),e=Object.keys(E4),r,o,s,i,a;for(r=0;r<t.length;r++){for(i=a=t[r],o=0;o<e.length;o++)s=e[o],a=a.replace(s,E4[s]);s=parseInt(N4[i],16),n[a]=[s>>16&255,s>>8&255,s&255]}return n}var uS;function axe(n){uS||(uS=ixe(),uS.transparent=[0,0,0,0]);let t=uS[n.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}var lxe=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function cxe(n){let t=lxe.exec(n),e=255,r,o,s;if(t){if(t[7]!==r){let i=+t[7];e=t[8]?Qb(i):Pp(i*255,0,255)}return r=+t[1],o=+t[3],s=+t[5],r=255&(t[2]?Qb(r):Pp(r,0,255)),o=255&(t[4]?Qb(o):Pp(o,0,255)),s=255&(t[6]?Qb(s):Pp(s,0,255)),{r,g:o,b:s,a:e}}}function uxe(n){return n&&(n.a<255?`rgba(${n.r}, ${n.g}, ${n.b}, ${Pc(n.a)})`:`rgb(${n.r}, ${n.g}, ${n.b})`)}var gR=n=>n<=.0031308?n*12.92:Math.pow(n,1/2.4)*1.055-.055,qg=n=>n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4);function pxe(n,t,e){let r=qg(Pc(n.r)),o=qg(Pc(n.g)),s=qg(Pc(n.b));return{r:$p(gR(r+e*(qg(Pc(t.r))-r))),g:$p(gR(o+e*(qg(Pc(t.g))-o))),b:$p(gR(s+e*(qg(Pc(t.b))-s))),a:n.a+e*(t.a-n.a)}}function pS(n,t,e){if(n){let r=FR(n);r[t]=Math.max(0,Math.min(r[t]+r[t]*e,t===0?360:1)),r=$R(r),n.r=r[0],n.g=r[1],n.b=r[2]}}function Y4(n,t){return n&&Object.assign(t||{},n)}function D4(n){var t={r:0,g:0,b:0,a:255};return Array.isArray(n)?n.length>=3&&(t={r:n[0],g:n[1],b:n[2],a:255},n.length>3&&(t.a=$p(n[3]))):(t=Y4(n,{r:0,g:0,b:0,a:1}),t.a=$p(t.a)),t}function fxe(n){return n.charAt(0)==="r"?cxe(n):rxe(n)}var wR=class n{constructor(t){if(t instanceof n)return t;let e=typeof t,r;e==="object"?r=D4(t):e==="string"&&(r=Kge(t)||axe(t)||fxe(t)),this._rgb=r,this._valid=!!r}get valid(){return this._valid}get rgb(){var t=Y4(this._rgb);return t&&(t.a=Pc(t.a)),t}set rgb(t){this._rgb=D4(t)}rgbString(){return this._valid?uxe(this._rgb):void 0}hexString(){return this._valid?Yge(this._rgb):void 0}hslString(){return this._valid?sxe(this._rgb):void 0}mix(t,e){if(t){let r=this.rgb,o=t.rgb,s,i=e===s?.5:e,a=2*i-1,l=r.a-o.a,c=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;s=1-c,r.r=255&c*r.r+s*o.r+.5,r.g=255&c*r.g+s*o.g+.5,r.b=255&c*r.b+s*o.b+.5,r.a=i*r.a+(1-i)*o.a,this.rgb=r}return this}interpolate(t,e){return t&&(this._rgb=pxe(this._rgb,t._rgb,e)),this}clone(){return new n(this.rgb)}alpha(t){return this._rgb.a=$p(t),this}clearer(t){let e=this._rgb;return e.a*=1-t,this}greyscale(){let t=this._rgb,e=nv(t.r*.3+t.g*.59+t.b*.11);return t.r=t.g=t.b=e,this}opaquer(t){let e=this._rgb;return e.a*=1+t,this}negate(){let t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return pS(this._rgb,2,t),this}darken(t){return pS(this._rgb,2,-t),this}saturate(t){return pS(this._rgb,1,t),this}desaturate(t){return pS(this._rgb,1,-t),this}rotate(t){return oxe(this._rgb,t),this}};function Z4(n){return new wR(n)}function Q4(n){if(n&&typeof n=="object"){let t=n.toString();return t==="[object CanvasPattern]"||t==="[object CanvasGradient]"}return!1}function LR(n){return Q4(n)?n:Z4(n)}function xR(n){return Q4(n)?n:Z4(n).saturate(.5).darken(.1).hexString()}var Lp=Object.create(null),wS=Object.create(null);function Jb(n,t){if(!t)return n;let e=t.split(".");for(let r=0,o=e.length;r<o;++r){let s=e[r];n=n[s]||(n[s]=Object.create(null))}return n}function yR(n,t,e){return typeof t=="string"?Xg(Jb(n,t),e):Xg(Jb(n,""),t)}var CR=class{constructor(t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=e=>e.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(e,r)=>xR(r.backgroundColor),this.hoverBorderColor=(e,r)=>xR(r.borderColor),this.hoverColor=(e,r)=>xR(r.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t)}set(t,e){return yR(this,t,e)}get(t){return Jb(this,t)}describe(t,e){return yR(wS,t,e)}override(t,e){return yR(Lp,t,e)}route(t,e,r,o){let s=Jb(this,t),i=Jb(this,r),a="_"+e;Object.defineProperties(s,{[a]:{value:s[e],writable:!0},[e]:{enumerable:!0,get(){let l=this[a],c=i[o];return Lt(l)?Object.assign({},c,l):St(l,c)},set(l){this[a]=l}}})}},Mt=new CR({_scriptable:n=>!n.startsWith("on"),_indexable:n=>n!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}});function dxe(n){return!n||Ht(n.size)||Ht(n.family)?null:(n.style?n.style+" ":"")+(n.weight?n.weight+" ":"")+n.size+"px "+n.family}function ev(n,t,e,r,o){let s=t[o];return s||(s=t[o]=n.measureText(o).width,e.push(o)),s>r&&(r=s),r}function J4(n,t,e,r){r=r||{};let o=r.data=r.data||{},s=r.garbageCollect=r.garbageCollect||[];r.font!==t&&(o=r.data={},s=r.garbageCollect=[],r.font=t),n.save(),n.font=t;let i=0,a=e.length,l,c,u,p,f;for(l=0;l<a;l++)if(p=e[l],p!=null&&$n(p)!==!0)i=ev(n,o,s,i,p);else if($n(p))for(c=0,u=p.length;c<u;c++)f=p[c],f!=null&&!$n(f)&&(i=ev(n,o,s,i,f));n.restore();let d=s.length/2;if(d>e.length){for(l=0;l<d;l++)delete o[s[l]];s.splice(0,d)}return i}function Bp(n,t,e){let r=n.currentDevicePixelRatio,o=e!==0?Math.max(e/2,.5):0;return Math.round((t-o)*r)/r+o}function BR(n,t){t=t||n.getContext("2d"),t.save(),t.resetTransform(),t.clearRect(0,0,n.width,n.height),t.restore()}function CS(n,t,e,r){zR(n,t,e,r,null)}function zR(n,t,e,r,o){let s,i,a,l,c,u,p=t.pointStyle,f=t.rotation,d=t.radius,h=(f||0)*jge;if(p&&typeof p=="object"&&(s=p.toString(),s==="[object HTMLImageElement]"||s==="[object HTMLCanvasElement]")){n.save(),n.translate(e,r),n.rotate(h),n.drawImage(p,-p.width/2,-p.height/2,p.width,p.height),n.restore();return}if(!(isNaN(d)||d<=0)){switch(n.beginPath(),p){default:o?n.ellipse(e,r,o/2,d,0,0,wn):n.arc(e,r,d,0,wn),n.closePath();break;case"triangle":n.moveTo(e+Math.sin(h)*d,r-Math.cos(h)*d),h+=C4,n.lineTo(e+Math.sin(h)*d,r-Math.cos(h)*d),h+=C4,n.lineTo(e+Math.sin(h)*d,r-Math.cos(h)*d),n.closePath();break;case"rectRounded":c=d*.516,l=d-c,i=Math.cos(h+Zb)*l,a=Math.sin(h+Zb)*l,n.arc(e-i,r-a,c,h-Zn,h-ur),n.arc(e+a,r-i,c,h-ur,h),n.arc(e+i,r+a,c,h,h+ur),n.arc(e-a,r+i,c,h+ur,h+Zn),n.closePath();break;case"rect":if(!f){l=Math.SQRT1_2*d,u=o?o/2:l,n.rect(e-u,r-l,2*u,2*l);break}h+=Zb;case"rectRot":i=Math.cos(h)*d,a=Math.sin(h)*d,n.moveTo(e-i,r-a),n.lineTo(e+a,r-i),n.lineTo(e+i,r+a),n.lineTo(e-a,r+i),n.closePath();break;case"crossRot":h+=Zb;case"cross":i=Math.cos(h)*d,a=Math.sin(h)*d,n.moveTo(e-i,r-a),n.lineTo(e+i,r+a),n.moveTo(e+a,r-i),n.lineTo(e-a,r+i);break;case"star":i=Math.cos(h)*d,a=Math.sin(h)*d,n.moveTo(e-i,r-a),n.lineTo(e+i,r+a),n.moveTo(e+a,r-i),n.lineTo(e-a,r+i),h+=Zb,i=Math.cos(h)*d,a=Math.sin(h)*d,n.moveTo(e-i,r-a),n.lineTo(e+i,r+a),n.moveTo(e+a,r-i),n.lineTo(e-a,r+i);break;case"line":i=o?o/2:Math.cos(h)*d,a=Math.sin(h)*d,n.moveTo(e-i,r-a),n.lineTo(e+i,r+a);break;case"dash":n.moveTo(e,r),n.lineTo(e+Math.cos(h)*d,r+Math.sin(h)*d);break}n.fill(),t.borderWidth>0&&n.stroke()}}function Yg(n,t,e){return e=e||.5,!t||n&&n.x>t.left-e&&n.x<t.right+e&&n.y>t.top-e&&n.y<t.bottom+e}function rv(n,t){n.save(),n.beginPath(),n.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),n.clip()}function ov(n){n.restore()}function ej(n,t,e,r,o){if(!t)return n.lineTo(e.x,e.y);if(o==="middle"){let s=(t.x+e.x)/2;n.lineTo(s,t.y),n.lineTo(s,e.y)}else o==="after"!=!!r?n.lineTo(t.x,e.y):n.lineTo(e.x,t.y);n.lineTo(e.x,e.y)}function tj(n,t,e,r){if(!t)return n.lineTo(e.x,e.y);n.bezierCurveTo(r?t.cp1x:t.cp2x,r?t.cp1y:t.cp2y,r?e.cp2x:e.cp1x,r?e.cp2y:e.cp1y,e.x,e.y)}function zp(n,t,e,r,o,s={}){let i=$n(t)?t:[t],a=s.strokeWidth>0&&s.strokeColor!=="",l,c;for(n.save(),n.font=o.string,hxe(n,s),l=0;l<i.length;++l)c=i[l],a&&(s.strokeColor&&(n.strokeStyle=s.strokeColor),Ht(s.strokeWidth)||(n.lineWidth=s.strokeWidth),n.strokeText(c,e,r,s.maxWidth)),n.fillText(c,e,r,s.maxWidth),mxe(n,e,r,c,s),r+=o.lineHeight;n.restore()}function hxe(n,t){t.translation&&n.translate(t.translation[0],t.translation[1]),Ht(t.rotation)||n.rotate(t.rotation),t.color&&(n.fillStyle=t.color),t.textAlign&&(n.textAlign=t.textAlign),t.textBaseline&&(n.textBaseline=t.textBaseline)}function mxe(n,t,e,r,o){if(o.strikethrough||o.underline){let s=n.measureText(r),i=t-s.actualBoundingBoxLeft,a=t+s.actualBoundingBoxRight,l=e-s.actualBoundingBoxAscent,c=e+s.actualBoundingBoxDescent,u=o.strikethrough?(l+c)/2:c;n.strokeStyle=n.fillStyle,n.beginPath(),n.lineWidth=o.decorationWidth||2,n.moveTo(i,u),n.lineTo(a,u),n.stroke()}}function tx(n,t){let{x:e,y:r,w:o,h:s,radius:i}=t;n.arc(e+i.topLeft,r+i.topLeft,i.topLeft,-ur,Zn,!0),n.lineTo(e,r+s-i.bottomLeft),n.arc(e+i.bottomLeft,r+s-i.bottomLeft,i.bottomLeft,Zn,ur,!0),n.lineTo(e+o-i.bottomRight,r+s),n.arc(e+o-i.bottomRight,r+s-i.bottomRight,i.bottomRight,ur,0,!0),n.lineTo(e+o,r+i.topRight),n.arc(e+o-i.topRight,r+i.topRight,i.topRight,0,-ur,!0),n.lineTo(e+i.topLeft,r)}var gxe=new RegExp(/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/),xxe=new RegExp(/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/);function yxe(n,t){let e=(""+n).match(gxe);if(!e||e[1]==="normal")return t*1.2;switch(n=+e[2],e[3]){case"px":return n;case"%":n/=100;break}return t*n}var bxe=n=>+n||0;function IS(n,t){let e={},r=Lt(t),o=r?Object.keys(t):t,s=Lt(n)?r?i=>St(n[i],n[t[i]]):i=>n[i]:()=>n;for(let i of o)e[i]=bxe(s(i));return e}function VR(n){return IS(n,{top:"y",right:"x",bottom:"y",left:"x"})}function Vp(n){return IS(n,["topLeft","topRight","bottomLeft","bottomRight"])}function vo(n){let t=VR(n);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function Mr(n,t){n=n||{},t=t||Mt.font;let e=St(n.size,t.size);typeof e=="string"&&(e=parseInt(e,10));let r=St(n.style,t.style);r&&!(""+r).match(xxe)&&(console.warn('Invalid font style specified: "'+r+'"'),r="");let o={family:St(n.family,t.family),lineHeight:yxe(St(n.lineHeight,t.lineHeight),e),size:e,style:r,weight:St(n.weight,t.weight),string:""};return o.string=dxe(o),o}function nx(n,t,e,r){let o=!0,s,i,a;for(s=0,i=n.length;s<i;++s)if(a=n[s],a!==void 0&&(t!==void 0&&typeof a=="function"&&(a=a(t),o=!1),e!==void 0&&$n(a)&&(a=a[e%a.length],o=!1),a!==void 0))return r&&!o&&(r.cacheable=!1),a}function nj(n,t,e){let{min:r,max:o}=n,s=IR(t,(o-r)/2),i=(a,l)=>e&&a===0?0:a+l;return{min:i(r,-Math.abs(s)),max:i(o,s)}}function Bc(n,t){return Object.assign(Object.create(n),t)}function SS(n,t=[""],e=n,r,o=()=>n[0]){Vs(r)||(r=sj("_fallback",n));let s={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:n,_rootScopes:e,_fallback:r,_getTarget:o,override:i=>SS([i,...n],t,e,r)};return new Proxy(s,{deleteProperty(i,a){return delete i[a],delete i._keys,delete n[0][a],!0},get(i,a){return rj(i,a,()=>Nxe(a,t,n,i))},getOwnPropertyDescriptor(i,a){return Reflect.getOwnPropertyDescriptor(i._scopes[0],a)},getPrototypeOf(){return Reflect.getPrototypeOf(n[0])},has(i,a){return _4(i).includes(a)},ownKeys(i){return _4(i)},set(i,a,l){let c=i._storage||(i._storage=o());return i[a]=c[a]=l,delete i._keys,!0}})}function Md(n,t,e,r){let o={_cacheable:!1,_proxy:n,_context:t,_subProxy:e,_stack:new Set,_descriptors:UR(n,r),setContext:s=>Md(n,s,e,r),override:s=>Md(n.override(s),t,e,r)};return new Proxy(o,{deleteProperty(s,i){return delete s[i],delete n[i],!0},get(s,i,a){return rj(s,i,()=>wxe(s,i,a))},getOwnPropertyDescriptor(s,i){return s._descriptors.allKeys?Reflect.has(n,i)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(n,i)},getPrototypeOf(){return Reflect.getPrototypeOf(n)},has(s,i){return Reflect.has(n,i)},ownKeys(){return Reflect.ownKeys(n)},set(s,i,a){return n[i]=a,delete s[i],!0}})}function UR(n,t={scriptable:!0,indexable:!0}){let{_scriptable:e=t.scriptable,_indexable:r=t.indexable,_allKeys:o=t.allKeys}=n;return{allKeys:o,scriptable:e,indexable:r,isScriptable:$c(e)?e:()=>e,isIndexable:$c(r)?r:()=>r}}var vxe=(n,t)=>n?n+xS(t):t,jR=(n,t)=>Lt(t)&&n!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);function rj(n,t,e){if(Object.prototype.hasOwnProperty.call(n,t))return n[t];let r=e();return n[t]=r,r}function wxe(n,t,e){let{_proxy:r,_context:o,_subProxy:s,_descriptors:i}=n,a=r[t];return $c(a)&&i.isScriptable(t)&&(a=Cxe(t,a,n,e)),$n(a)&&a.length&&(a=Ixe(t,a,n,i.isIndexable)),jR(t,a)&&(a=Md(a,o,s&&s[t],i)),a}function Cxe(n,t,e,r){let{_proxy:o,_context:s,_subProxy:i,_stack:a}=e;if(a.has(n))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+n);return a.add(n),t=t(s,i||r),a.delete(n),jR(n,t)&&(t=GR(o._scopes,o,n,t)),t}function Ixe(n,t,e,r){let{_proxy:o,_context:s,_subProxy:i,_descriptors:a}=e;if(Vs(s.index)&&r(n))t=t[s.index%t.length];else if(Lt(t[0])){let l=t,c=o._scopes.filter(u=>u!==l);t=[];for(let u of l){let p=GR(c,o,n,u);t.push(Md(p,s,i&&i[n],a))}}return t}function oj(n,t,e){return $c(n)?n(t,e):n}var Sxe=(n,t)=>n===!0?t:typeof n=="string"?Lc(t,n):void 0;function Txe(n,t,e,r,o){for(let s of t){let i=Sxe(e,s);if(i){n.add(i);let a=oj(i._fallback,e,o);if(Vs(a)&&a!==e&&a!==r)return a}else if(i===!1&&Vs(r)&&e!==r)return null}return!1}function GR(n,t,e,r){let o=t._rootScopes,s=oj(t._fallback,e,r),i=[...n,...o],a=new Set;a.add(r);let l=k4(a,i,e,s||e,r);return l===null||Vs(s)&&s!==e&&(l=k4(a,i,s,l,r),l===null)?!1:SS(Array.from(a),[""],o,s,()=>Exe(t,e,r))}function k4(n,t,e,r,o){for(;e;)e=Txe(n,t,e,r,o);return e}function Exe(n,t,e){let r=n._getTarget();t in r||(r[t]={});let o=r[t];return $n(o)&&Lt(e)?e:o}function Nxe(n,t,e,r){let o;for(let s of t)if(o=sj(vxe(s,n),e),Vs(o))return jR(n,o)?GR(e,r,n,o):o}function sj(n,t){for(let e of t){if(!e)continue;let r=e[n];if(Vs(r))return r}}function _4(n){let t=n._keys;return t||(t=n._keys=Dxe(n._scopes)),t}function Dxe(n){let t=new Set;for(let e of n)for(let r of Object.keys(e).filter(o=>!o.startsWith("_")))t.add(r);return Array.from(t)}function WR(n,t,e,r){let{iScale:o}=n,{key:s="r"}=this._parsing,i=new Array(r),a,l,c,u;for(a=0,l=r;a<l;++a)c=a+e,u=t[c],i[a]={r:o.parse(Lc(u,s),c)};return i}var kxe=Number.EPSILON||1e-14,Zg=(n,t)=>t<n.length&&!n[t].skip&&n[t],ij=n=>n==="x"?"y":"x";function _xe(n,t,e,r){let o=n.skip?t:n,s=t,i=e.skip?t:e,a=mS(s,o),l=mS(i,s),c=a/(a+l),u=l/(a+l);c=isNaN(c)?0:c,u=isNaN(u)?0:u;let p=r*c,f=r*u;return{previous:{x:s.x-p*(i.x-o.x),y:s.y-p*(i.y-o.y)},next:{x:s.x+f*(i.x-o.x),y:s.y+f*(i.y-o.y)}}}function Axe(n,t,e){let r=n.length,o,s,i,a,l,c=Zg(n,0);for(let u=0;u<r-1;++u)if(l=c,c=Zg(n,u+1),!(!l||!c)){if(Jg(t[u],0,kxe)){e[u]=e[u+1]=0;continue}o=e[u]/t[u],s=e[u+1]/t[u],a=Math.pow(o,2)+Math.pow(s,2),!(a<=9)&&(i=3/Math.sqrt(a),e[u]=o*i*t[u],e[u+1]=s*i*t[u])}}function Rxe(n,t,e="x"){let r=ij(e),o=n.length,s,i,a,l=Zg(n,0);for(let c=0;c<o;++c){if(i=a,a=l,l=Zg(n,c+1),!a)continue;let u=a[e],p=a[r];i&&(s=(u-i[e])/3,a[`cp1${e}`]=u-s,a[`cp1${r}`]=p-s*t[c]),l&&(s=(l[e]-u)/3,a[`cp2${e}`]=u+s,a[`cp2${r}`]=p+s*t[c])}}function Mxe(n,t="x"){let e=ij(t),r=n.length,o=Array(r).fill(0),s=Array(r),i,a,l,c=Zg(n,0);for(i=0;i<r;++i)if(a=l,l=c,c=Zg(n,i+1),!!l){if(c){let u=c[t]-l[t];o[i]=u!==0?(c[e]-l[e])/u:0}s[i]=a?c?Xi(o[i-1])!==Xi(o[i])?0:(o[i-1]+o[i])/2:o[i-1]:o[i]}Axe(n,o,s),Rxe(n,s,t)}function fS(n,t,e){return Math.max(Math.min(n,e),t)}function Oxe(n,t){let e,r,o,s,i,a=Yg(n[0],t);for(e=0,r=n.length;e<r;++e)i=s,s=a,a=e<r-1&&Yg(n[e+1],t),s&&(o=n[e],i&&(o.cp1x=fS(o.cp1x,t.left,t.right),o.cp1y=fS(o.cp1y,t.top,t.bottom)),a&&(o.cp2x=fS(o.cp2x,t.left,t.right),o.cp2y=fS(o.cp2y,t.top,t.bottom)))}function aj(n,t,e,r,o){let s,i,a,l;if(t.spanGaps&&(n=n.filter(c=>!c.skip)),t.cubicInterpolationMode==="monotone")Mxe(n,o);else{let c=r?n[n.length-1]:n[0];for(s=0,i=n.length;s<i;++s)a=n[s],l=_xe(c,a,n[Math.min(s+1,i-(r?0:1))%i],t.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,c=a}t.capBezierPoints&&Oxe(n,e)}function HR(){return typeof window<"u"&&typeof document<"u"}function TS(n){let t=n.parentNode;return t&&t.toString()==="[object ShadowRoot]"&&(t=t.host),t}function gS(n,t,e){let r;return typeof n=="string"?(r=parseInt(n,10),n.indexOf("%")!==-1&&(r=r/100*t.parentNode[e])):r=n,r}var ES=n=>window.getComputedStyle(n,null);function Fxe(n,t){return ES(n).getPropertyValue(t)}var Pxe=["top","right","bottom","left"];function Rd(n,t,e){let r={};e=e?"-"+e:"";for(let o=0;o<4;o++){let s=Pxe[o];r[s]=parseFloat(n[t+"-"+s+e])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}var $xe=(n,t,e)=>(n>0||t>0)&&(!e||!e.shadowRoot);function Lxe(n,t){let e=n.touches,r=e&&e.length?e[0]:n,{offsetX:o,offsetY:s}=r,i=!1,a,l;if($xe(o,s,n.target))a=o,l=s;else{let c=t.getBoundingClientRect();a=r.clientX-c.left,l=r.clientY-c.top,i=!0}return{x:a,y:l,box:i}}function Up(n,t){if("native"in n)return n;let{canvas:e,currentDevicePixelRatio:r}=t,o=ES(e),s=o.boxSizing==="border-box",i=Rd(o,"padding"),a=Rd(o,"border","width"),{x:l,y:c,box:u}=Lxe(n,e),p=i.left+(u&&a.left),f=i.top+(u&&a.top),{width:d,height:h}=t;return s&&(d-=i.width+a.width,h-=i.height+a.height),{x:Math.round((l-p)/d*e.width/r),y:Math.round((c-f)/h*e.height/r)}}function Bxe(n,t,e){let r,o;if(t===void 0||e===void 0){let s=TS(n);if(!s)t=n.clientWidth,e=n.clientHeight;else{let i=s.getBoundingClientRect(),a=ES(s),l=Rd(a,"border","width"),c=Rd(a,"padding");t=i.width-c.width-l.width,e=i.height-c.height-l.height,r=gS(a.maxWidth,s,"clientWidth"),o=gS(a.maxHeight,s,"clientHeight")}}return{width:t,height:e,maxWidth:r||hS,maxHeight:o||hS}}var bR=n=>Math.round(n*10)/10;function lj(n,t,e,r){let o=ES(n),s=Rd(o,"margin"),i=gS(o.maxWidth,n,"clientWidth")||hS,a=gS(o.maxHeight,n,"clientHeight")||hS,l=Bxe(n,t,e),{width:c,height:u}=l;if(o.boxSizing==="content-box"){let p=Rd(o,"border","width"),f=Rd(o,"padding");c-=f.width+p.width,u-=f.height+p.height}return c=Math.max(0,c-s.width),u=Math.max(0,r?Math.floor(c/r):u-s.height),c=bR(Math.min(c,i,l.maxWidth)),u=bR(Math.min(u,a,l.maxHeight)),c&&!u&&(u=bR(c/2)),{width:c,height:u}}function qR(n,t,e){let r=t||1,o=Math.floor(n.height*r),s=Math.floor(n.width*r);n.height=o/r,n.width=s/r;let i=n.canvas;return i.style&&(e||!i.style.height&&!i.style.width)&&(i.style.height=`${n.height}px`,i.style.width=`${n.width}px`),n.currentDevicePixelRatio!==r||i.height!==o||i.width!==s?(n.currentDevicePixelRatio=r,i.height=o,i.width=s,n.ctx.setTransform(r,0,0,r,0,0),!0):!1}var cj=function(){let n=!1;try{let t={get passive(){return n=!0,!1}};window.addEventListener("test",null,t),window.removeEventListener("test",null,t)}catch{}return n}();function KR(n,t){let e=Fxe(n,t),r=e&&e.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function Fp(n,t,e,r){return{x:n.x+e*(t.x-n.x),y:n.y+e*(t.y-n.y)}}function uj(n,t,e,r){return{x:n.x+e*(t.x-n.x),y:r==="middle"?e<.5?n.y:t.y:r==="after"?e<1?n.y:t.y:e>0?t.y:n.y}}function pj(n,t,e,r){let o={x:n.cp2x,y:n.cp2y},s={x:t.cp1x,y:t.cp1y},i=Fp(n,o,e),a=Fp(o,s,e),l=Fp(s,t,e),c=Fp(i,a,e),u=Fp(a,l,e);return Fp(c,u,e)}var A4=new Map;function zxe(n,t){t=t||{};let e=n+JSON.stringify(t),r=A4.get(e);return r||(r=new Intl.NumberFormat(n,t),A4.set(e,r)),r}function rx(n,t,e){return zxe(t,e).format(n)}var Vxe=function(n,t){return{x(e){return n+n+t-e},setWidth(e){t=e},textAlign(e){return e==="center"?e:e==="right"?"left":"right"},xPlus(e,r){return e-r},leftForLtr(e,r){return e-r}}},Uxe=function(){return{x(n){return n},setWidth(n){},textAlign(n){return n},xPlus(n,t){return n+t},leftForLtr(n,t){return n}}};function Fd(n,t,e){return n?Vxe(t,e):Uxe()}function XR(n,t){let e,r;(t==="ltr"||t==="rtl")&&(e=n.canvas.style,r=[e.getPropertyValue("direction"),e.getPropertyPriority("direction")],e.setProperty("direction",t,"important"),n.prevTextDirection=r)}function YR(n,t){t!==void 0&&(delete n.prevTextDirection,n.canvas.style.setProperty("direction",t[0],t[1]))}function fj(n){return n==="angle"?{between:ex,compare:Gge,normalize:vs}:{between:nl,compare:(t,e)=>t-e,normalize:t=>t}}function R4({start:n,end:t,count:e,loop:r,style:o}){return{start:n%e,end:t%e,loop:r&&(t-n+1)%e===0,style:o}}function jxe(n,t,e){let{property:r,start:o,end:s}=e,{between:i,normalize:a}=fj(r),l=t.length,{start:c,end:u,loop:p}=n,f,d;if(p){for(c+=l,u+=l,f=0,d=l;f<d&&i(a(t[c%l][r]),o,s);++f)c--,u--;c%=l,u%=l}return u<c&&(u+=l),{start:c,end:u,loop:p,style:n.style}}function ZR(n,t,e){if(!e)return[n];let{property:r,start:o,end:s}=e,i=t.length,{compare:a,between:l,normalize:c}=fj(r),{start:u,end:p,loop:f,style:d}=jxe(n,t,e),h=[],m=!1,g=null,x,b,w,v=()=>l(o,w,x)&&a(o,w)!==0,S=()=>a(s,x)===0||l(s,w,x),k=()=>m||v(),A=()=>!m||S();for(let $=u,L=u;$<=p;++$)b=t[$%i],!b.skip&&(x=c(b[r]),x!==w&&(m=l(x,o,s),g===null&&k()&&(g=a(x,o)===0?$:L),g!==null&&A()&&(h.push(R4({start:g,end:$,loop:f,count:i,style:d})),g=null),L=$,w=x));return g!==null&&h.push(R4({start:g,end:p,loop:f,count:i,style:d})),h}function QR(n,t){let e=[],r=n.segments;for(let o=0;o<r.length;o++){let s=ZR(r[o],n.points,t);s.length&&e.push(...s)}return e}function Gxe(n,t,e,r){let o=0,s=t-1;if(e&&!r)for(;o<t&&!n[o].skip;)o++;for(;o<t&&n[o].skip;)o++;for(o%=t,e&&(s+=o);s>o&&n[s%t].skip;)s--;return s%=t,{start:o,end:s}}function Wxe(n,t,e,r){let o=n.length,s=[],i=t,a=n[t],l;for(l=t+1;l<=e;++l){let c=n[l%o];c.skip||c.stop?a.skip||(r=!1,s.push({start:t%o,end:(l-1)%o,loop:r}),t=i=c.stop?l:null):(i=l,a.skip&&(t=l)),a=c}return i!==null&&s.push({start:t%o,end:i%o,loop:r}),s}function dj(n,t){let e=n.points,r=n.options.spanGaps,o=e.length;if(!o)return[];let s=!!n._loop,{start:i,end:a}=Gxe(e,o,s,r);if(r===!0)return M4(n,[{start:i,end:a,loop:s}],e,t);let l=a<i?a+o:a,c=!!n._fullLoop&&i===0&&a===o-1;return M4(n,Wxe(e,i,l,c),e,t)}function M4(n,t,e,r){return!r||!r.setContext||!e?t:Hxe(n,t,e,r)}function Hxe(n,t,e,r){let o=n._chart.getContext(),s=O4(n.options),{_datasetIndex:i,options:{spanGaps:a}}=n,l=e.length,c=[],u=s,p=t[0].start,f=p;function d(h,m,g,x){let b=a?-1:1;if(h!==m){for(h+=l;e[h%l].skip;)h-=b;for(;e[m%l].skip;)m+=b;h%l!==m%l&&(c.push({start:h%l,end:m%l,loop:g,style:x}),u=x,p=m%l)}}for(let h of t){p=a?p:h.start;let m=e[p%l],g;for(f=p+1;f<=h.end;f++){let x=e[f%l];g=O4(r.setContext(Bc(o,{type:"segment",p0:m,p1:x,p0DataIndex:(f-1)%l,p1DataIndex:f%l,datasetIndex:i}))),qxe(g,u)&&d(p,f-1,h.loop,u),m=x,u=g}p<f-1&&d(p,f-1,h.loop,u)}return c}function O4(n){return{backgroundColor:n.backgroundColor,borderCapStyle:n.borderCapStyle,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderJoinStyle:n.borderJoinStyle,borderWidth:n.borderWidth,borderColor:n.borderColor}}function qxe(n,t){return t&&JSON.stringify(n)!==JSON.stringify(t)}var l2=class{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,e,r,o){let s=e.listeners[o],i=e.duration;s.forEach(a=>a({chart:t,initial:e.initial,numSteps:i,currentStep:Math.min(r-e.start,i)}))}_refresh(){this._request||(this._running=!0,this._request=AR.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let e=0;this._charts.forEach((r,o)=>{if(!r.running||!r.items.length)return;let s=r.items,i=s.length-1,a=!1,l;for(;i>=0;--i)l=s[i],l._active?(l._total>r.duration&&(r.duration=l._total),l.tick(t),a=!0):(s[i]=s[s.length-1],s.pop());a&&(o.draw(),this._notify(o,r,t,"progress")),s.length||(r.running=!1,this._notify(o,r,t,"complete"),r.initial=!1),e+=s.length}),this._lastDate=t,e===0&&(this._running=!1)}_getAnims(t){let e=this._charts,r=e.get(t);return r||(r={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},e.set(t,r)),r}listen(t,e,r){this._getAnims(t).listeners[e].push(r)}add(t,e){!e||!e.length||this._getAnims(t).items.push(...e)}has(t){return this._getAnims(t).items.length>0}start(t){let e=this._charts.get(t);e&&(e.running=!0,e.start=Date.now(),e.duration=e.items.reduce((r,o)=>Math.max(r,o._duration),0),this._refresh())}running(t){if(!this._running)return!1;let e=this._charts.get(t);return!(!e||!e.running||!e.items.length)}stop(t){let e=this._charts.get(t);if(!e||!e.items.length)return;let r=e.items,o=r.length-1;for(;o>=0;--o)r[o].cancel();e.items=[],this._notify(t,e,Date.now(),"complete")}remove(t){return this._charts.delete(t)}},zc=new l2,hj="transparent",Kxe={boolean(n,t,e){return e>.5?t:n},color(n,t,e){let r=LR(n||hj),o=r.valid&&LR(t||hj);return o&&o.valid?o.mix(r,e).hexString():t},number(n,t,e){return n+(t-n)*e}},c2=class{constructor(t,e,r,o){let s=e[r];o=nx([t.to,o,s,t.from]);let i=nx([t.from,s,o]);this._active=!0,this._fn=t.fn||Kxe[t.type||typeof i],this._easing=Kg[t.easing]||Kg.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=e,this._prop=r,this._from=i,this._to=o,this._promises=void 0}active(){return this._active}update(t,e,r){if(this._active){this._notify(!1);let o=this._target[this._prop],s=r-this._start,i=this._duration-s;this._start=r,this._duration=Math.floor(Math.max(i,t.duration)),this._total+=s,this._loop=!!t.loop,this._to=nx([t.to,e,o,t.from]),this._from=nx([t.from,o,e])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){let e=t-this._start,r=this._duration,o=this._prop,s=this._from,i=this._loop,a=this._to,l;if(this._active=s!==a&&(i||e<r),!this._active){this._target[o]=a,this._notify(!0);return}if(e<0){this._target[o]=s;return}l=e/r%2,l=i&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[o]=this._fn(s,a,l)}wait(){let t=this._promises||(this._promises=[]);return new Promise((e,r)=>{t.push({res:e,rej:r})})}_notify(t){let e=t?"res":"rej",r=this._promises||[];for(let o=0;o<r.length;o++)r[o][e]()}},Xxe=["x","y","borderWidth","radius","tension"],Yxe=["color","borderColor","backgroundColor"];Mt.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0});var Zxe=Object.keys(Mt.animation);Mt.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:n=>n!=="onProgress"&&n!=="onComplete"&&n!=="fn"});Mt.set("animations",{colors:{type:"color",properties:Yxe},numbers:{type:"number",properties:Xxe}});Mt.describe("animations",{_fallback:"animation"});Mt.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:n=>n|0}}}});var OS=class{constructor(t,e){this._chart=t,this._properties=new Map,this.configure(e)}configure(t){if(!Lt(t))return;let e=this._properties;Object.getOwnPropertyNames(t).forEach(r=>{let o=t[r];if(!Lt(o))return;let s={};for(let i of Zxe)s[i]=o[i];($n(o.properties)&&o.properties||[r]).forEach(i=>{(i===r||!e.has(i))&&e.set(i,s)})})}_animateOptions(t,e){let r=e.options,o=Jxe(t,r);if(!o)return[];let s=this._createAnimations(o,r);return r.$shared&&Qxe(t.options.$animations,r).then(()=>{t.options=r},()=>{}),s}_createAnimations(t,e){let r=this._properties,o=[],s=t.$animations||(t.$animations={}),i=Object.keys(e),a=Date.now(),l;for(l=i.length-1;l>=0;--l){let c=i[l];if(c.charAt(0)==="$")continue;if(c==="options"){o.push(...this._animateOptions(t,e));continue}let u=e[c],p=s[c],f=r.get(c);if(p)if(f&&p.active()){p.update(f,u,a);continue}else p.cancel();if(!f||!f.duration){t[c]=u;continue}s[c]=p=new c2(f,t,c,u),o.push(p)}return o}update(t,e){if(this._properties.size===0){Object.assign(t,e);return}let r=this._createAnimations(t,e);if(r.length)return zc.add(this._chart,r),!0}};function Qxe(n,t){let e=[],r=Object.keys(t);for(let o=0;o<r.length;o++){let s=n[r[o]];s&&s.active()&&e.push(s.wait())}return Promise.all(e)}function Jxe(n,t){if(!t)return;let e=n.options;if(!e){n.options=t;return}return e.$shared&&(n.options=e=Object.assign({},e,{$shared:!1,$animations:{}})),e}function mj(n,t){let e=n&&n.options||{},r=e.reverse,o=e.min===void 0?t:0,s=e.max===void 0?t:0;return{start:r?s:o,end:r?o:s}}function eye(n,t,e){if(e===!1)return!1;let r=mj(n,e),o=mj(t,e);return{top:o.end,right:r.end,bottom:o.start,left:r.start}}function tye(n){let t,e,r,o;return Lt(n)?(t=n.top,e=n.right,r=n.bottom,o=n.left):t=e=r=o=n,{top:t,right:e,bottom:r,left:o,disabled:n===!1}}function iG(n,t){let e=[],r=n._getSortedDatasetMetas(t),o,s;for(o=0,s=r.length;o<s;++o)e.push(r[o].index);return e}function gj(n,t,e,r={}){let o=n.keys,s=r.mode==="single",i,a,l,c;if(t!==null){for(i=0,a=o.length;i<a;++i){if(l=+o[i],l===e){if(r.all)continue;break}c=n.values[l],xr(c)&&(s||t===0||Xi(t)===Xi(c))&&(t+=c)}return t}}function nye(n){let t=Object.keys(n),e=new Array(t.length),r,o,s;for(r=0,o=t.length;r<o;++r)s=t[r],e[r]={x:s,y:n[s]};return e}function xj(n,t){let e=n&&n.options.stacked;return e||e===void 0&&t.stack!==void 0}function rye(n,t,e){return`${n.id}.${t.id}.${e.stack||e.type}`}function oye(n){let{min:t,max:e,minDefined:r,maxDefined:o}=n.getUserBounds();return{min:r?t:Number.NEGATIVE_INFINITY,max:o?e:Number.POSITIVE_INFINITY}}function sye(n,t,e){let r=n[t]||(n[t]={});return r[e]||(r[e]={})}function yj(n,t,e,r){for(let o of t.getMatchingVisibleMetas(r).reverse()){let s=n[o.index];if(e&&s>0||!e&&s<0)return o.index}return null}function bj(n,t){let{chart:e,_cachedMeta:r}=n,o=e._stacks||(e._stacks={}),{iScale:s,vScale:i,index:a}=r,l=s.axis,c=i.axis,u=rye(s,i,r),p=t.length,f;for(let d=0;d<p;++d){let h=t[d],{[l]:m,[c]:g}=h,x=h._stacks||(h._stacks={});f=x[c]=sye(o,u,m),f[a]=g,f._top=yj(f,i,!0,r.type),f._bottom=yj(f,i,!1,r.type)}}function JR(n,t){let e=n.scales;return Object.keys(e).filter(r=>e[r].axis===t).shift()}function iye(n,t){return Bc(n,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}function aye(n,t,e){return Bc(n,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:e,index:t,mode:"default",type:"data"})}function sv(n,t){let e=n.controller.index,r=n.vScale&&n.vScale.axis;if(r){t=t||n._parsed;for(let o of t){let s=o._stacks;if(!s||s[r]===void 0||s[r][e]===void 0)return;delete s[r][e]}}}var e2=n=>n==="reset"||n==="none",vj=(n,t)=>t?n:Object.assign({},n),lye=(n,t,e)=>n&&!t.hidden&&t._stacked&&{keys:iG(e,!0),values:null},sl=(()=>{class n{constructor(e,r){this.chart=e,this._ctx=e.ctx,this.index=r,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.initialize()}initialize(){let e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=xj(e.vScale,e),this.addElements()}updateIndex(e){this.index!==e&&sv(this._cachedMeta),this.index=e}linkScales(){let e=this.chart,r=this._cachedMeta,o=this.getDataset(),s=(f,d,h,m)=>f==="x"?d:f==="r"?m:h,i=r.xAxisID=St(o.xAxisID,JR(e,"x")),a=r.yAxisID=St(o.yAxisID,JR(e,"y")),l=r.rAxisID=St(o.rAxisID,JR(e,"r")),c=r.indexAxis,u=r.iAxisID=s(c,i,a,l),p=r.vAxisID=s(c,a,i,l);r.xScale=this.getScaleForId(i),r.yScale=this.getScaleForId(a),r.rScale=this.getScaleForId(l),r.iScale=this.getScaleForId(u),r.vScale=this.getScaleForId(p)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){let r=this._cachedMeta;return e===r.iScale?r.vScale:r.iScale}reset(){this._update("reset")}_destroy(){let e=this._cachedMeta;this._data&&kR(this._data,this),e._stacked&&sv(e)}_dataCheck(){let e=this.getDataset(),r=e.data||(e.data=[]),o=this._data;if(Lt(r))this._data=nye(r);else if(o!==r){if(o){kR(o,this);let s=this._cachedMeta;sv(s),s._parsed=[]}r&&Object.isExtensible(r)&&W4(r,this),this._syncList=[],this._data=r}}addElements(){let e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){let r=this._cachedMeta,o=this.getDataset(),s=!1;this._dataCheck();let i=r._stacked;r._stacked=xj(r.vScale,r),r.stack!==o.stack&&(s=!0,sv(r),r.stack=o.stack),this._resyncElements(e),(s||i!==r._stacked)&&bj(this,r._parsed)}configure(){let e=this.chart.config,r=e.datasetScopeKeys(this._type),o=e.getOptionScopes(this.getDataset(),r,!0);this.options=e.createResolver(o,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,r){let{_cachedMeta:o,_data:s}=this,{iScale:i,_stacked:a}=o,l=i.axis,c=e===0&&r===s.length?!0:o._sorted,u=e>0&&o._parsed[e-1],p,f,d;if(this._parsing===!1)o._parsed=s,o._sorted=!0,d=s;else{$n(s[e])?d=this.parseArrayData(o,s,e,r):Lt(s[e])?d=this.parseObjectData(o,s,e,r):d=this.parsePrimitiveData(o,s,e,r);let h=()=>f[l]===null||u&&f[l]<u[l];for(p=0;p<r;++p)o._parsed[p+e]=f=d[p],c&&(h()&&(c=!1),u=f);o._sorted=c}a&&bj(this,d)}parsePrimitiveData(e,r,o,s){let{iScale:i,vScale:a}=e,l=i.axis,c=a.axis,u=i.getLabels(),p=i===a,f=new Array(s),d,h,m;for(d=0,h=s;d<h;++d)m=d+o,f[d]={[l]:p||i.parse(u[m],m),[c]:a.parse(r[m],m)};return f}parseArrayData(e,r,o,s){let{xScale:i,yScale:a}=e,l=new Array(s),c,u,p,f;for(c=0,u=s;c<u;++c)p=c+o,f=r[p],l[c]={x:i.parse(f[0],p),y:a.parse(f[1],p)};return l}parseObjectData(e,r,o,s){let{xScale:i,yScale:a}=e,{xAxisKey:l="x",yAxisKey:c="y"}=this._parsing,u=new Array(s),p,f,d,h;for(p=0,f=s;p<f;++p)d=p+o,h=r[d],u[p]={x:i.parse(Lc(h,l),d),y:a.parse(Lc(h,c),d)};return u}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,r,o){let s=this.chart,i=this._cachedMeta,a=r[e.axis],l={keys:iG(s,!0),values:r._stacks[e.axis]};return gj(l,a,i.index,{mode:o})}updateRangeFromParsed(e,r,o,s){let i=o[r.axis],a=i===null?NaN:i,l=s&&o._stacks[r.axis];s&&l&&(s.values=l,a=gj(s,i,this._cachedMeta.index)),e.min=Math.min(e.min,a),e.max=Math.max(e.max,a)}getMinMax(e,r){let o=this._cachedMeta,s=o._parsed,i=o._sorted&&e===o.iScale,a=s.length,l=this._getOtherScale(e),c=lye(r,o,this.chart),u={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:p,max:f}=oye(l),d,h;function m(){h=s[d];let g=h[l.axis];return!xr(h[e.axis])||p>g||f<g}for(d=0;d<a&&!(!m()&&(this.updateRangeFromParsed(u,e,h,c),i));++d);if(i){for(d=a-1;d>=0;--d)if(!m()){this.updateRangeFromParsed(u,e,h,c);break}}return u}getAllParsedValues(e){let r=this._cachedMeta._parsed,o=[],s,i,a;for(s=0,i=r.length;s<i;++s)a=r[s][e.axis],xr(a)&&o.push(a);return o}getMaxOverflow(){return!1}getLabelAndValue(e){let r=this._cachedMeta,o=r.iScale,s=r.vScale,i=this.getParsed(e);return{label:o?""+o.getLabelForValue(i[o.axis]):"",value:s?""+s.getLabelForValue(i[s.axis]):""}}_update(e){let r=this._cachedMeta;this.update(e||"default"),r._clip=tye(St(this.options.clip,eye(r.xScale,r.yScale,this.getMaxOverflow())))}update(e){}draw(){let e=this._ctx,r=this.chart,o=this._cachedMeta,s=o.data||[],i=r.chartArea,a=[],l=this._drawStart||0,c=this._drawCount||s.length-l,u=this.options.drawActiveElementsOnTop,p;for(o.dataset&&o.dataset.draw(e,i,l,c),p=l;p<l+c;++p){let f=s[p];f.hidden||(f.active&&u?a.push(f):f.draw(e,i))}for(p=0;p<a.length;++p)a[p].draw(e,i)}getStyle(e,r){let o=r?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(o):this.resolveDataElementOptions(e||0,o)}getContext(e,r,o){let s=this.getDataset(),i;if(e>=0&&e<this._cachedMeta.data.length){let a=this._cachedMeta.data[e];i=a.$context||(a.$context=aye(this.getContext(),e,a)),i.parsed=this.getParsed(e),i.raw=s.data[e],i.index=i.dataIndex=e}else i=this.$context||(this.$context=iye(this.chart.getContext(),this.index)),i.dataset=s,i.index=i.datasetIndex=this.index;return i.active=!!r,i.mode=o,i}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,r){return this._resolveElementOptions(this.dataElementType.id,r,e)}_resolveElementOptions(e,r="default",o){let s=r==="active",i=this._cachedDataOpts,a=e+"-"+r,l=i[a],c=this.enableOptionSharing&&Vs(o);if(l)return vj(l,c);let u=this.chart.config,p=u.datasetElementScopeKeys(this._type,e),f=s?[`${e}Hover`,"hover",e,""]:[e,""],d=u.getOptionScopes(this.getDataset(),p),h=Object.keys(Mt.elements[e]),m=()=>this.getContext(o,s),g=u.resolveNamedOptions(d,h,m,f);return g.$shared&&(g.$shared=c,i[a]=Object.freeze(vj(g,c))),g}_resolveAnimations(e,r,o){let s=this.chart,i=this._cachedDataOpts,a=`animation-${r}`,l=i[a];if(l)return l;let c;if(s.options.animation!==!1){let p=this.chart.config,f=p.datasetAnimationScopeKeys(this._type,r),d=p.getOptionScopes(this.getDataset(),f);c=p.createResolver(d,this.getContext(e,o,r))}let u=new OS(s,c&&c.animations);return c&&c._cacheable&&(i[a]=Object.freeze(u)),u}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,r){return!r||e2(e)||this.chart._animationsDisabled}_getSharedOptions(e,r){let o=this.resolveDataElementOptions(e,r),s=this._sharedOptions,i=this.getSharedOptions(o),a=this.includeOptions(r,i)||i!==s;return this.updateSharedOptions(i,r,o),{sharedOptions:i,includeOptions:a}}updateElement(e,r,o,s){e2(s)?Object.assign(e,o):this._resolveAnimations(r,s).update(e,o)}updateSharedOptions(e,r,o){e&&!e2(r)&&this._resolveAnimations(void 0,r).update(e,o)}_setStyle(e,r,o,s){e.active=s;let i=this.getStyle(r,s);this._resolveAnimations(r,o,s).update(e,{options:!s&&this.getSharedOptions(i)||i})}removeHoverStyle(e,r,o){this._setStyle(e,o,"active",!1)}setHoverStyle(e,r,o){this._setStyle(e,o,"active",!0)}_removeDatasetHoverStyle(){let e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){let e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){let r=this._data,o=this._cachedMeta.data;for(let[l,c,u]of this._syncList)this[l](c,u);this._syncList=[];let s=o.length,i=r.length,a=Math.min(i,s);a&&this.parse(0,a),i>s?this._insertElements(s,i-s,e):i<s&&this._removeElements(i,s-i)}_insertElements(e,r,o=!0){let s=this._cachedMeta,i=s.data,a=e+r,l,c=u=>{for(u.length+=r,l=u.length-1;l>=a;l--)u[l]=u[l-r]};for(c(i),l=e;l<a;++l)i[l]=new this.dataElementType;this._parsing&&c(s._parsed),this.parse(e,r),o&&this.updateElements(i,e,r,"reset")}updateElements(e,r,o,s){}_removeElements(e,r){let o=this._cachedMeta;if(this._parsing){let s=o._parsed.splice(e,r);o._stacked&&sv(o,s)}o.data.splice(e,r)}_sync(e){if(this._parsing)this._syncList.push(e);else{let[r,o,s]=e;this[r](o,s)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){let e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,r){r&&this._sync(["_removeElements",e,r]);let o=arguments.length-2;o&&this._sync(["_insertElements",e,o])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}return n.defaults={},n})();sl.prototype.datasetElementType=null;sl.prototype.dataElementType=null;function cye(n,t){if(!n._cache.$bar){let e=n.getMatchingVisibleMetas(t),r=[];for(let o=0,s=e.length;o<s;o++)r=r.concat(e[o].controller.getAllParsedValues(n));n._cache.$bar=_R(r.sort((o,s)=>o-s))}return n._cache.$bar}function uye(n){let t=n.iScale,e=cye(t,n.type),r=t._length,o,s,i,a,l=()=>{i===32767||i===-32768||(Vs(a)&&(r=Math.min(r,Math.abs(i-a)||r)),a=i)};for(o=0,s=e.length;o<s;++o)i=t.getPixelForValue(e[o]),l();for(a=void 0,o=0,s=t.ticks.length;o<s;++o)i=t.getPixelForTick(o),l();return r}function pye(n,t,e,r){let o=e.barThickness,s,i;return Ht(o)?(s=t.min*e.categoryPercentage,i=e.barPercentage):(s=o*r,i=1),{chunk:s/r,ratio:i,start:t.pixels[n]-s/2}}function fye(n,t,e,r){let o=t.pixels,s=o[n],i=n>0?o[n-1]:null,a=n<o.length-1?o[n+1]:null,l=e.categoryPercentage;i===null&&(i=s-(a===null?t.end-t.start:a-s)),a===null&&(a=s+s-i);let c=s-(s-Math.min(i,a))/2*l;return{chunk:Math.abs(a-i)/2*l/r,ratio:e.barPercentage,start:c}}function dye(n,t,e,r){let o=e.parse(n[0],r),s=e.parse(n[1],r),i=Math.min(o,s),a=Math.max(o,s),l=i,c=a;Math.abs(i)>Math.abs(a)&&(l=a,c=i),t[e.axis]=c,t._custom={barStart:l,barEnd:c,start:o,end:s,min:i,max:a}}function aG(n,t,e,r){return $n(n)?dye(n,t,e,r):t[e.axis]=e.parse(n,r),t}function wj(n,t,e,r){let o=n.iScale,s=n.vScale,i=o.getLabels(),a=o===s,l=[],c,u,p,f;for(c=e,u=e+r;c<u;++c)f=t[c],p={},p[o.axis]=a||o.parse(i[c],c),l.push(aG(f,p,s,c));return l}function t2(n){return n&&n.barStart!==void 0&&n.barEnd!==void 0}function hye(n,t,e){return n!==0?Xi(n):(t.isHorizontal()?1:-1)*(t.min>=e?1:-1)}function mye(n){let t,e,r,o,s;return n.horizontal?(t=n.base>n.x,e="left",r="right"):(t=n.base<n.y,e="bottom",r="top"),t?(o="end",s="start"):(o="start",s="end"),{start:e,end:r,reverse:t,top:o,bottom:s}}function gye(n,t,e,r){let o=t.borderSkipped,s={};if(!o){n.borderSkipped=s;return}if(o===!0){n.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}let{start:i,end:a,reverse:l,top:c,bottom:u}=mye(n);o==="middle"&&e&&(n.enableBorderRadius=!0,(e._top||0)===r?o=c:(e._bottom||0)===r?o=u:(s[Cj(u,i,a,l)]=!0,o=c)),s[Cj(o,i,a,l)]=!0,n.borderSkipped=s}function Cj(n,t,e,r){return r?(n=xye(n,t,e),n=Ij(n,e,t)):n=Ij(n,t,e),n}function xye(n,t,e){return n===t?e:n===e?t:n}function Ij(n,t,e){return n==="start"?t:n==="end"?e:n}function yye(n,{inflateAmount:t},e){n.inflateAmount=t==="auto"?e===1?.33:0:t}var bye=(()=>{class n extends sl{parsePrimitiveData(e,r,o,s){return wj(e,r,o,s)}parseArrayData(e,r,o,s){return wj(e,r,o,s)}parseObjectData(e,r,o,s){let{iScale:i,vScale:a}=e,{xAxisKey:l="x",yAxisKey:c="y"}=this._parsing,u=i.axis==="x"?l:c,p=a.axis==="x"?l:c,f=[],d,h,m,g;for(d=o,h=o+s;d<h;++d)g=r[d],m={},m[i.axis]=i.parse(Lc(g,u),d),f.push(aG(Lc(g,p),m,a,d));return f}updateRangeFromParsed(e,r,o,s){super.updateRangeFromParsed(e,r,o,s);let i=o._custom;i&&r===this._cachedMeta.vScale&&(e.min=Math.min(e.min,i.min),e.max=Math.max(e.max,i.max))}getMaxOverflow(){return 0}getLabelAndValue(e){let r=this._cachedMeta,{iScale:o,vScale:s}=r,i=this.getParsed(e),a=i._custom,l=t2(a)?"["+a.start+", "+a.end+"]":""+s.getLabelForValue(i[s.axis]);return{label:""+o.getLabelForValue(i[o.axis]),value:l}}initialize(){this.enableOptionSharing=!0,super.initialize();let e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){let r=this._cachedMeta;this.updateElements(r.data,0,r.data.length,e)}updateElements(e,r,o,s){let i=s==="reset",{index:a,_cachedMeta:{vScale:l}}=this,c=l.getBasePixel(),u=l.isHorizontal(),p=this._getRuler(),{sharedOptions:f,includeOptions:d}=this._getSharedOptions(r,s);for(let h=r;h<r+o;h++){let m=this.getParsed(h),g=i||Ht(m[l.axis])?{base:c,head:c}:this._calculateBarValuePixels(h),x=this._calculateBarIndexPixels(h,p),b=(m._stacks||{})[l.axis],w={horizontal:u,base:g.base,enableBorderRadius:!b||t2(m._custom)||a===b._top||a===b._bottom,x:u?g.head:x.center,y:u?x.center:g.head,height:u?x.size:Math.abs(g.size),width:u?Math.abs(g.size):x.size};d&&(w.options=f||this.resolveDataElementOptions(h,e[h].active?"active":s));let v=w.options||e[h].options;gye(w,v,b,a),yye(w,v,p.ratio),this.updateElement(e[h],h,w,s)}}_getStacks(e,r){let{iScale:o}=this._cachedMeta,s=o.getMatchingVisibleMetas(this._type).filter(c=>c.controller.options.grouped),i=o.options.stacked,a=[],l=c=>{let u=c.controller.getParsed(r),p=u&&u[c.vScale.axis];if(Ht(p)||isNaN(p))return!0};for(let c of s)if(!(r!==void 0&&l(c))&&((i===!1||a.indexOf(c.stack)===-1||i===void 0&&c.stack===void 0)&&a.push(c.stack),c.index===e))break;return a.length||a.push(void 0),a}_getStackCount(e){return this._getStacks(void 0,e).length}_getStackIndex(e,r,o){let s=this._getStacks(e,o),i=r!==void 0?s.indexOf(r):-1;return i===-1?s.length-1:i}_getRuler(){let e=this.options,r=this._cachedMeta,o=r.iScale,s=[],i,a;for(i=0,a=r.data.length;i<a;++i)s.push(o.getPixelForValue(this.getParsed(i)[o.axis],i));let l=e.barThickness;return{min:l||uye(r),pixels:s,start:o._startPixel,end:o._endPixel,stackCount:this._getStackCount(),scale:o,grouped:e.grouped,ratio:l?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){let{_cachedMeta:{vScale:r,_stacked:o},options:{base:s,minBarLength:i}}=this,a=s||0,l=this.getParsed(e),c=l._custom,u=t2(c),p=l[r.axis],f=0,d=o?this.applyStack(r,l,o):p,h,m;d!==p&&(f=d-p,d=p),u&&(p=c.barStart,d=c.barEnd-c.barStart,p!==0&&Xi(p)!==Xi(c.barEnd)&&(f=0),f+=p);let g=!Ht(s)&&!u?s:f,x=r.getPixelForValue(g);if(this.chart.getDataVisibility(e)?h=r.getPixelForValue(f+d):h=x,m=h-x,Math.abs(m)<i){m=hye(m,r,a)*i,p===a&&(x-=m/2);let b=r.getPixelForDecimal(0),w=r.getPixelForDecimal(1),v=Math.min(b,w),S=Math.max(b,w);x=Math.max(Math.min(x,S),v),h=x+m}if(x===r.getPixelForValue(a)){let b=Xi(m)*r.getLineWidthForValue(a)/2;x+=b,m-=b}return{size:m,base:x,head:h,center:h+m/2}}_calculateBarIndexPixels(e,r){let o=r.scale,s=this.options,i=s.skipNull,a=St(s.maxBarThickness,1/0),l,c;if(r.grouped){let u=i?this._getStackCount(e):r.stackCount,p=s.barThickness==="flex"?fye(e,r,s,u):pye(e,r,s,u),f=this._getStackIndex(this.index,this._cachedMeta.stack,i?e:void 0);l=p.start+p.chunk*f+p.chunk/2,c=Math.min(a,p.chunk*p.ratio)}else l=o.getPixelForValue(this.getParsed(e)[o.axis],e),c=Math.min(a,r.min*r.ratio);return{base:l-c/2,head:l+c/2,center:l,size:c}}draw(){let e=this._cachedMeta,r=e.vScale,o=e.data,s=o.length,i=0;for(;i<s;++i)this.getParsed(i)[r.axis]!==null&&o[i].draw(this._ctx)}}return n.id="bar",n.defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}},n.overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}},n})(),vye=(()=>{class n extends sl{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(e,r,o,s){let i=super.parsePrimitiveData(e,r,o,s);for(let a=0;a<i.length;a++)i[a]._custom=this.resolveDataElementOptions(a+o).radius;return i}parseArrayData(e,r,o,s){let i=super.parseArrayData(e,r,o,s);for(let a=0;a<i.length;a++){let l=r[o+a];i[a]._custom=St(l[2],this.resolveDataElementOptions(a+o).radius)}return i}parseObjectData(e,r,o,s){let i=super.parseObjectData(e,r,o,s);for(let a=0;a<i.length;a++){let l=r[o+a];i[a]._custom=St(l&&l.r&&+l.r,this.resolveDataElementOptions(a+o).radius)}return i}getMaxOverflow(){let e=this._cachedMeta.data,r=0;for(let o=e.length-1;o>=0;--o)r=Math.max(r,e[o].size(this.resolveDataElementOptions(o))/2);return r>0&&r}getLabelAndValue(e){let r=this._cachedMeta,{xScale:o,yScale:s}=r,i=this.getParsed(e),a=o.getLabelForValue(i.x),l=s.getLabelForValue(i.y),c=i._custom;return{label:r.label,value:"("+a+", "+l+(c?", "+c:"")+")"}}update(e){let r=this._cachedMeta.data;this.updateElements(r,0,r.length,e)}updateElements(e,r,o,s){let i=s==="reset",{iScale:a,vScale:l}=this._cachedMeta,{sharedOptions:c,includeOptions:u}=this._getSharedOptions(r,s),p=a.axis,f=l.axis;for(let d=r;d<r+o;d++){let h=e[d],m=!i&&this.getParsed(d),g={},x=g[p]=i?a.getPixelForDecimal(.5):a.getPixelForValue(m[p]),b=g[f]=i?l.getBasePixel():l.getPixelForValue(m[f]);g.skip=isNaN(x)||isNaN(b),u&&(g.options=c||this.resolveDataElementOptions(d,h.active?"active":s),i&&(g.options.radius=0)),this.updateElement(h,d,g,s)}}resolveDataElementOptions(e,r){let o=this.getParsed(e),s=super.resolveDataElementOptions(e,r);s.$shared&&(s=Object.assign({},s,{$shared:!1}));let i=s.radius;return r!=="active"&&(s.radius=0),s.radius+=St(o&&o._custom,i),s}}return n.id="bubble",n.defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}},n.overrides={scales:{x:{type:"linear"},y:{type:"linear"}},plugins:{tooltip:{callbacks:{title(){return""}}}}},n})();function wye(n,t,e){let r=1,o=1,s=0,i=0;if(t<wn){let a=n,l=a+t,c=Math.cos(a),u=Math.sin(a),p=Math.cos(l),f=Math.sin(l),d=(w,v,S)=>ex(w,a,l,!0)?1:Math.max(v,v*e,S,S*e),h=(w,v,S)=>ex(w,a,l,!0)?-1:Math.min(v,v*e,S,S*e),m=d(0,c,p),g=d(ur,u,f),x=h(Zn,c,p),b=h(Zn+ur,u,f);r=(m-x)/2,o=(g-b)/2,s=-(m+x)/2,i=-(g+b)/2}return{ratioX:r,ratioY:o,offsetX:s,offsetY:i}}var lG=(()=>{class n extends sl{constructor(e,r){super(e,r),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,r){let o=this.getDataset().data,s=this._cachedMeta;if(this._parsing===!1)s._parsed=o;else{let i=c=>+o[c];if(Lt(o[e])){let{key:c="value"}=this._parsing;i=u=>+Lc(o[u],c)}let a,l;for(a=e,l=e+r;a<l;++a)s._parsed[a]=i(a)}}_getRotation(){return di(this.options.rotation-90)}_getCircumference(){return di(this.options.circumference)}_getRotationExtents(){let e=wn,r=-wn;for(let o=0;o<this.chart.data.datasets.length;++o)if(this.chart.isDatasetVisible(o)){let s=this.chart.getDatasetMeta(o).controller,i=s._getRotation(),a=s._getCircumference();e=Math.min(e,i),r=Math.max(r,i+a)}return{rotation:e,circumference:r-e}}update(e){let r=this.chart,{chartArea:o}=r,s=this._cachedMeta,i=s.data,a=this.getMaxBorderWidth()+this.getMaxOffset(i)+this.options.spacing,l=Math.max((Math.min(o.width,o.height)-a)/2,0),c=Math.min(P4(this.options.cutout,l),1),u=this._getRingWeight(this.index),{circumference:p,rotation:f}=this._getRotationExtents(),{ratioX:d,ratioY:h,offsetX:m,offsetY:g}=wye(f,p,c),x=(o.width-a)/d,b=(o.height-a)/h,w=Math.max(Math.min(x,b)/2,0),v=IR(this.options.radius,w),S=Math.max(v*c,0),k=(v-S)/this._getVisibleDatasetWeightTotal();this.offsetX=m*v,this.offsetY=g*v,s.total=this.calculateTotal(),this.outerRadius=v-k*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-k*u,0),this.updateElements(i,0,i.length,e)}_circumference(e,r){let o=this.options,s=this._cachedMeta,i=this._getCircumference();return r&&o.animation.animateRotate||!this.chart.getDataVisibility(e)||s._parsed[e]===null||s.data[e].hidden?0:this.calculateCircumference(s._parsed[e]*i/wn)}updateElements(e,r,o,s){let i=s==="reset",a=this.chart,l=a.chartArea,u=a.options.animation,p=(l.left+l.right)/2,f=(l.top+l.bottom)/2,d=i&&u.animateScale,h=d?0:this.innerRadius,m=d?0:this.outerRadius,{sharedOptions:g,includeOptions:x}=this._getSharedOptions(r,s),b=this._getRotation(),w;for(w=0;w<r;++w)b+=this._circumference(w,i);for(w=r;w<r+o;++w){let v=this._circumference(w,i),S=e[w],k={x:p+this.offsetX,y:f+this.offsetY,startAngle:b,endAngle:b+v,circumference:v,outerRadius:m,innerRadius:h};x&&(k.options=g||this.resolveDataElementOptions(w,S.active?"active":s)),b+=v,this.updateElement(S,w,k,s)}}calculateTotal(){let e=this._cachedMeta,r=e.data,o=0,s;for(s=0;s<r.length;s++){let i=e._parsed[s];i!==null&&!isNaN(i)&&this.chart.getDataVisibility(s)&&!r[s].hidden&&(o+=Math.abs(i))}return o}calculateCircumference(e){let r=this._cachedMeta.total;return r>0&&!isNaN(e)?wn*(Math.abs(e)/r):0}getLabelAndValue(e){let r=this._cachedMeta,o=this.chart,s=o.data.labels||[],i=rx(r._parsed[e],o.options.locale);return{label:s[e]||"",value:i}}getMaxBorderWidth(e){let r=0,o=this.chart,s,i,a,l,c;if(!e){for(s=0,i=o.data.datasets.length;s<i;++s)if(o.isDatasetVisible(s)){a=o.getDatasetMeta(s),e=a.data,l=a.controller;break}}if(!e)return 0;for(s=0,i=e.length;s<i;++s)c=l.resolveDataElementOptions(s),c.borderAlign!=="inner"&&(r=Math.max(r,c.borderWidth||0,c.hoverBorderWidth||0));return r}getMaxOffset(e){let r=0;for(let o=0,s=e.length;o<s;++o){let i=this.resolveDataElementOptions(o);r=Math.max(r,i.offset||0,i.hoverOffset||0)}return r}_getRingWeightOffset(e){let r=0;for(let o=0;o<e;++o)this.chart.isDatasetVisible(o)&&(r+=this._getRingWeight(o));return r}_getRingWeight(e){return Math.max(St(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}return n.id="doughnut",n.defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"},n.descriptors={_scriptable:t=>t!=="spacing",_indexable:t=>t!=="spacing"},n.overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){let e=t.data;if(e.labels.length&&e.datasets.length){let{labels:{pointStyle:r}}=t.legend.options;return e.labels.map((o,s)=>{let a=t.getDatasetMeta(0).controller.getStyle(s);return{text:o,fillStyle:a.backgroundColor,strokeStyle:a.borderColor,lineWidth:a.borderWidth,pointStyle:r,hidden:!t.getDataVisibility(s),index:s}})}return[]}},onClick(t,e,r){r.chart.toggleDataVisibility(e.index),r.chart.update()}},tooltip:{callbacks:{title(){return""},label(t){let e=t.label,r=": "+t.formattedValue;return $n(e)?(e=e.slice(),e[0]+=r):e+=r,e}}}}},n})(),Cye=(()=>{class n extends sl{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){let r=this._cachedMeta,{dataset:o,data:s=[],_dataset:i}=r,a=this.chart._animationsDisabled,{start:l,count:c}=MR(r,s,a);this._drawStart=l,this._drawCount=c,OR(r)&&(l=0,c=s.length),o._chart=this.chart,o._datasetIndex=this.index,o._decimated=!!i._decimated,o.points=s;let u=this.resolveDatasetElementOptions(e);this.options.showLine||(u.borderWidth=0),u.segment=this.options.segment,this.updateElement(o,void 0,{animated:!a,options:u},e),this.updateElements(s,l,c,e)}updateElements(e,r,o,s){let i=s==="reset",{iScale:a,vScale:l,_stacked:c,_dataset:u}=this._cachedMeta,{sharedOptions:p,includeOptions:f}=this._getSharedOptions(r,s),d=a.axis,h=l.axis,{spanGaps:m,segment:g}=this.options,x=Od(m)?m:Number.POSITIVE_INFINITY,b=this.chart._animationsDisabled||i||s==="none",w=r>0&&this.getParsed(r-1);for(let v=r;v<r+o;++v){let S=e[v],k=this.getParsed(v),A=b?S:{},$=Ht(k[h]),L=A[d]=a.getPixelForValue(k[d],v),z=A[h]=i||$?l.getBasePixel():l.getPixelForValue(c?this.applyStack(l,k,c):k[h],v);A.skip=isNaN(L)||isNaN(z)||$,A.stop=v>0&&Math.abs(k[d]-w[d])>x,g&&(A.parsed=k,A.raw=u.data[v]),f&&(A.options=p||this.resolveDataElementOptions(v,S.active?"active":s)),b||this.updateElement(S,v,A,s),w=k}}getMaxOverflow(){let e=this._cachedMeta,r=e.dataset,o=r.options&&r.options.borderWidth||0,s=e.data||[];if(!s.length)return o;let i=s[0].size(this.resolveDataElementOptions(0)),a=s[s.length-1].size(this.resolveDataElementOptions(s.length-1));return Math.max(o,i,a)/2}draw(){let e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}return n.id="line",n.defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1},n.overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}},n})(),Iye=(()=>{class n extends sl{constructor(e,r){super(e,r),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){let r=this._cachedMeta,o=this.chart,s=o.data.labels||[],i=rx(r._parsed[e].r,o.options.locale);return{label:s[e]||"",value:i}}parseObjectData(e,r,o,s){return WR.bind(this)(e,r,o,s)}update(e){let r=this._cachedMeta.data;this._updateRadius(),this.updateElements(r,0,r.length,e)}getMinMax(){let e=this._cachedMeta,r={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return e.data.forEach((o,s)=>{let i=this.getParsed(s).r;!isNaN(i)&&this.chart.getDataVisibility(s)&&(i<r.min&&(r.min=i),i>r.max&&(r.max=i))}),r}_updateRadius(){let e=this.chart,r=e.chartArea,o=e.options,s=Math.min(r.right-r.left,r.bottom-r.top),i=Math.max(s/2,0),a=Math.max(o.cutoutPercentage?i/100*o.cutoutPercentage:1,0),l=(i-a)/e.getVisibleDatasetCount();this.outerRadius=i-l*this.index,this.innerRadius=this.outerRadius-l}updateElements(e,r,o,s){let i=s==="reset",a=this.chart,c=a.options.animation,u=this._cachedMeta.rScale,p=u.xCenter,f=u.yCenter,d=u.getIndexAngle(0)-.5*Zn,h=d,m,g=360/this.countVisibleElements();for(m=0;m<r;++m)h+=this._computeAngle(m,s,g);for(m=r;m<r+o;m++){let x=e[m],b=h,w=h+this._computeAngle(m,s,g),v=a.getDataVisibility(m)?u.getDistanceFromCenterForValue(this.getParsed(m).r):0;h=w,i&&(c.animateScale&&(v=0),c.animateRotate&&(b=w=d));let S={x:p,y:f,innerRadius:0,outerRadius:v,startAngle:b,endAngle:w,options:this.resolveDataElementOptions(m,x.active?"active":s)};this.updateElement(x,m,S,s)}}countVisibleElements(){let e=this._cachedMeta,r=0;return e.data.forEach((o,s)=>{!isNaN(this.getParsed(s).r)&&this.chart.getDataVisibility(s)&&r++}),r}_computeAngle(e,r,o){return this.chart.getDataVisibility(e)?di(this.resolveDataElementOptions(e,r).angle||o):0}}return n.id="polarArea",n.defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0},n.overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){let e=t.data;if(e.labels.length&&e.datasets.length){let{labels:{pointStyle:r}}=t.legend.options;return e.labels.map((o,s)=>{let a=t.getDatasetMeta(0).controller.getStyle(s);return{text:o,fillStyle:a.backgroundColor,strokeStyle:a.borderColor,lineWidth:a.borderWidth,pointStyle:r,hidden:!t.getDataVisibility(s),index:s}})}return[]}},onClick(t,e,r){r.chart.toggleDataVisibility(e.index),r.chart.update()}},tooltip:{callbacks:{title(){return""},label(t){return t.chart.data.labels[t.dataIndex]+": "+t.formattedValue}}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}},n})(),Sye=(()=>{class n extends lG{}return n.id="pie",n.defaults={cutout:0,rotation:0,circumference:360,radius:"100%"},n})(),Tye=(()=>{class n extends sl{getLabelAndValue(e){let r=this._cachedMeta.vScale,o=this.getParsed(e);return{label:r.getLabels()[e],value:""+r.getLabelForValue(o[r.axis])}}parseObjectData(e,r,o,s){return WR.bind(this)(e,r,o,s)}update(e){let r=this._cachedMeta,o=r.dataset,s=r.data||[],i=r.iScale.getLabels();if(o.points=s,e!=="resize"){let a=this.resolveDatasetElementOptions(e);this.options.showLine||(a.borderWidth=0);let l={_loop:!0,_fullLoop:i.length===s.length,options:a};this.updateElement(o,void 0,l,e)}this.updateElements(s,0,s.length,e)}updateElements(e,r,o,s){let i=this._cachedMeta.rScale,a=s==="reset";for(let l=r;l<r+o;l++){let c=e[l],u=this.resolveDataElementOptions(l,c.active?"active":s),p=i.getPointPositionForValue(l,this.getParsed(l).r),f=a?i.xCenter:p.x,d=a?i.yCenter:p.y,h={x:f,y:d,angle:p.angle,skip:isNaN(f)||isNaN(d),options:u};this.updateElement(c,l,h,s)}}}return n.id="radar",n.defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}},n.overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}},n})(),Gs=class{constructor(){this.x=void 0,this.y=void 0,this.active=!1,this.options=void 0,this.$animations=void 0}tooltipPosition(t){let{x:e,y:r}=this.getProps(["x","y"],t);return{x:e,y:r}}hasValue(){return Od(this.x)&&Od(this.y)}getProps(t,e){let r=this.$animations;if(!e||!r)return this;let o={};return t.forEach(s=>{o[s]=r[s]&&r[s].active()?r[s]._to:this[s]}),o}};Gs.defaults={};Gs.defaultRoutes=void 0;var cG={values(n){return $n(n)?n:""+n},numeric(n,t,e){if(n===0)return"0";let r=this.chart.options.locale,o,s=n;if(e.length>1){let c=Math.max(Math.abs(e[0].value),Math.abs(e[e.length-1].value));(c<1e-4||c>1e15)&&(o="scientific"),s=Eye(n,e)}let i=js(Math.abs(s)),a=Math.max(Math.min(-1*Math.floor(i),20),0),l={notation:o,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),rx(n,r,l)},logarithmic(n,t,e){if(n===0)return"0";let r=n/Math.pow(10,Math.floor(js(n)));return r===1||r===2||r===5?cG.numeric.call(this,n,t,e):""}};function Eye(n,t){let e=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(e)>=1&&n!==Math.floor(n)&&(e=n-Math.floor(n)),e}var zS={formatters:cG};Mt.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",grace:0,grid:{display:!0,lineWidth:1,drawBorder:!0,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(n,t)=>t.lineWidth,tickColor:(n,t)=>t.color,offset:!1,borderDash:[],borderDashOffset:0,borderWidth:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:zS.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}});Mt.route("scale.ticks","color","","color");Mt.route("scale.grid","color","","borderColor");Mt.route("scale.grid","borderColor","","borderColor");Mt.route("scale.title","color","","color");Mt.describe("scale",{_fallback:!1,_scriptable:n=>!n.startsWith("before")&&!n.startsWith("after")&&n!=="callback"&&n!=="parser",_indexable:n=>n!=="borderDash"&&n!=="tickBorderDash"});Mt.describe("scales",{_fallback:"scale"});Mt.describe("scale.ticks",{_scriptable:n=>n!=="backdropPadding"&&n!=="callback",_indexable:n=>n!=="backdropPadding"});function Nye(n,t){let e=n.options.ticks,r=e.maxTicksLimit||Dye(n),o=e.major.enabled?_ye(t):[],s=o.length,i=o[0],a=o[s-1],l=[];if(s>r)return Aye(t,l,o,s/r),l;let c=kye(o,t,r);if(s>0){let u,p,f=s>1?Math.round((a-i)/(s-1)):null;for(NS(t,l,c,Ht(f)?0:i-f,i),u=0,p=s-1;u<p;u++)NS(t,l,c,o[u],o[u+1]);return NS(t,l,c,a,Ht(f)?t.length:a+f),l}return NS(t,l,c),l}function Dye(n){let t=n.options.offset,e=n._tickSize(),r=n._length/e+(t?0:1),o=n._maxLength/e;return Math.floor(Math.min(r,o))}function kye(n,t,e){let r=Rye(n),o=t.length/e;if(!r)return Math.max(o,1);let s=B4(r);for(let i=0,a=s.length-1;i<a;i++){let l=s[i];if(l>o)return l}return Math.max(o,1)}function _ye(n){let t=[],e,r;for(e=0,r=n.length;e<r;e++)n[e].major&&t.push(e);return t}function Aye(n,t,e,r){let o=0,s=e[0],i;for(r=Math.ceil(r),i=0;i<n.length;i++)i===s&&(t.push(n[i]),o++,s=e[o*r])}function NS(n,t,e,r,o){let s=St(r,0),i=Math.min(St(o,n.length),n.length),a=0,l,c,u;for(e=Math.ceil(e),o&&(l=o-r,e=l/Math.floor(l/e)),u=s;u<0;)a++,u=Math.round(s+a*e);for(c=Math.max(s,0);c<i;c++)c===u&&(t.push(n[c]),a++,u=Math.round(s+a*e))}function Rye(n){let t=n.length,e,r;if(t<2)return!1;for(r=n[0],e=1;e<t;++e)if(n[e]-n[e-1]!==r)return!1;return r}var Mye=n=>n==="left"?"right":n==="right"?"left":n,Sj=(n,t,e)=>t==="top"||t==="left"?n[t]+e:n[t]-e;function Tj(n,t){let e=[],r=n.length/t,o=n.length,s=0;for(;s<o;s+=r)e.push(n[Math.floor(s)]);return e}function Oye(n,t,e){let r=n.ticks.length,o=Math.min(t,r-1),s=n._startPixel,i=n._endPixel,a=1e-6,l=n.getPixelForTick(o),c;if(!(e&&(r===1?c=Math.max(l-s,i-l):t===0?c=(n.getPixelForTick(1)-l)/2:c=(l-n.getPixelForTick(o-1))/2,l+=o<t?c:-c,l<s-a||l>i+a)))return l}function Fye(n,t){gn(n,e=>{let r=e.gc,o=r.length/2,s;if(o>t){for(s=0;s<o;++s)delete e.data[r[s]];r.splice(0,o)}})}function iv(n){return n.drawTicks?n.tickLength:0}function Ej(n,t){if(!n.display)return 0;let e=Mr(n.font,t),r=vo(n.padding);return($n(n.text)?n.text.length:1)*e.lineHeight+r.height}function Pye(n,t){return Bc(n,{scale:t,type:"scale"})}function $ye(n,t,e){return Bc(n,{tick:e,index:t,type:"tick"})}function Lye(n,t,e){let r=vS(n);return(e&&t!=="right"||!e&&t==="right")&&(r=Mye(r)),r}function Bye(n,t,e,r){let{top:o,left:s,bottom:i,right:a,chart:l}=n,{chartArea:c,scales:u}=l,p=0,f,d,h,m=i-o,g=a-s;if(n.isHorizontal()){if(d=bo(r,s,a),Lt(e)){let x=Object.keys(e)[0],b=e[x];h=u[x].getPixelForValue(b)+m-t}else e==="center"?h=(c.bottom+c.top)/2+m-t:h=Sj(n,e,t);f=a-s}else{if(Lt(e)){let x=Object.keys(e)[0],b=e[x];d=u[x].getPixelForValue(b)-g+t}else e==="center"?d=(c.left+c.right)/2-g+t:d=Sj(n,e,t);h=bo(r,i,o),p=e==="left"?-ur:ur}return{titleX:d,titleY:h,maxWidth:f,rotation:p}}var $d=class n extends Gs{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,e){return t}getUserBounds(){let{_userMin:t,_userMax:e,_suggestedMin:r,_suggestedMax:o}=this;return t=Us(t,Number.POSITIVE_INFINITY),e=Us(e,Number.NEGATIVE_INFINITY),r=Us(r,Number.POSITIVE_INFINITY),o=Us(o,Number.NEGATIVE_INFINITY),{min:Us(t,r),max:Us(e,o),minDefined:xr(t),maxDefined:xr(e)}}getMinMax(t){let{min:e,max:r,minDefined:o,maxDefined:s}=this.getUserBounds(),i;if(o&&s)return{min:e,max:r};let a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)i=a[l].controller.getMinMax(this,t),o||(e=Math.min(e,i.min)),s||(r=Math.max(r,i.max));return e=s&&e>r?r:e,r=o&&e>r?e:r,{min:Us(e,Us(r,e)),max:Us(r,Us(e,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){let t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Ln(this.options.beforeUpdate,[this])}update(t,e,r){let{beginAtZero:o,grace:s,ticks:i}=this.options,a=i.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=e,this._margins=r=Object.assign({left:0,right:0,top:0,bottom:0},r),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+r.left+r.right:this.height+r.top+r.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=nj(this,s,o),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();let l=a<this.ticks.length;this._convertTicksToLabels(l?Tj(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),i.display&&(i.autoSkip||i.source==="auto")&&(this.ticks=Nye(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t=this.options.reverse,e,r;this.isHorizontal()?(e=this.left,r=this.right):(e=this.top,r=this.bottom,t=!t),this._startPixel=e,this._endPixel=r,this._reversePixels=t,this._length=r-e,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Ln(this.options.afterUpdate,[this])}beforeSetDimensions(){Ln(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Ln(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),Ln(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Ln(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){let e=this.options.ticks,r,o,s;for(r=0,o=t.length;r<o;r++)s=t[r],s.label=Ln(e.callback,[s.value,r,t],this)}afterTickToLabelConversion(){Ln(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Ln(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){let t=this.options,e=t.ticks,r=this.ticks.length,o=e.minRotation||0,s=e.maxRotation,i=o,a,l,c;if(!this._isVisible()||!e.display||o>=s||r<=1||!this.isHorizontal()){this.labelRotation=o;return}let u=this._getLabelSizes(),p=u.widest.width,f=u.highest.height,d=Hr(this.chart.width-p,0,this.maxWidth);a=t.offset?this.maxWidth/r:d/(r-1),p+6>a&&(a=d/(r-(t.offset?.5:1)),l=this.maxHeight-iv(t.grid)-e.padding-Ej(t.title,this.chart.options.font),c=Math.sqrt(p*p+f*f),i=yS(Math.min(Math.asin(Hr((u.highest.height+6)/a,-1,1)),Math.asin(Hr(l/c,-1,1))-Math.asin(Hr(f/c,-1,1)))),i=Math.max(o,Math.min(s,i))),this.labelRotation=i}afterCalculateLabelRotation(){Ln(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Ln(this.options.beforeFit,[this])}fit(){let t={width:0,height:0},{chart:e,options:{ticks:r,title:o,grid:s}}=this,i=this._isVisible(),a=this.isHorizontal();if(i){let l=Ej(o,e.options.font);if(a?(t.width=this.maxWidth,t.height=iv(s)+l):(t.height=this.maxHeight,t.width=iv(s)+l),r.display&&this.ticks.length){let{first:c,last:u,widest:p,highest:f}=this._getLabelSizes(),d=r.padding*2,h=di(this.labelRotation),m=Math.cos(h),g=Math.sin(h);if(a){let x=r.mirror?0:g*p.width+m*f.height;t.height=Math.min(this.maxHeight,t.height+x+d)}else{let x=r.mirror?0:m*p.width+g*f.height;t.width=Math.min(this.maxWidth,t.width+x+d)}this._calculatePadding(c,u,g,m)}}this._handleMargins(),a?(this.width=this._length=e.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=e.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,e,r,o){let{ticks:{align:s,padding:i},position:a}=this.options,l=this.labelRotation!==0,c=a!=="top"&&this.axis==="x";if(this.isHorizontal()){let u=this.getPixelForTick(0)-this.left,p=this.right-this.getPixelForTick(this.ticks.length-1),f=0,d=0;l?c?(f=o*t.width,d=r*e.height):(f=r*t.height,d=o*e.width):s==="start"?d=e.width:s==="end"?f=t.width:s!=="inner"&&(f=t.width/2,d=e.width/2),this.paddingLeft=Math.max((f-u+i)*this.width/(this.width-u),0),this.paddingRight=Math.max((d-p+i)*this.width/(this.width-p),0)}else{let u=e.height/2,p=t.height/2;s==="start"?(u=0,p=t.height):s==="end"&&(u=e.height,p=0),this.paddingTop=u+i,this.paddingBottom=p+i}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Ln(this.options.afterFit,[this])}isHorizontal(){let{axis:t,position:e}=this.options;return e==="top"||e==="bottom"||t==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){this.beforeTickToLabelConversion(),this.generateTickLabels(t);let e,r;for(e=0,r=t.length;e<r;e++)Ht(t[e].label)&&(t.splice(e,1),r--,e--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){let e=this.options.ticks.sampleSize,r=this.ticks;e<r.length&&(r=Tj(r,e)),this._labelSizes=t=this._computeLabelSizes(r,r.length)}return t}_computeLabelSizes(t,e){let{ctx:r,_longestTextCache:o}=this,s=[],i=[],a=0,l=0,c,u,p,f,d,h,m,g,x,b,w;for(c=0;c<e;++c){if(f=t[c].label,d=this._resolveTickFontOptions(c),r.font=h=d.string,m=o[h]=o[h]||{data:{},gc:[]},g=d.lineHeight,x=b=0,!Ht(f)&&!$n(f))x=ev(r,m.data,m.gc,x,f),b=g;else if($n(f))for(u=0,p=f.length;u<p;++u)w=f[u],!Ht(w)&&!$n(w)&&(x=ev(r,m.data,m.gc,x,w),b+=g);s.push(x),i.push(b),a=Math.max(x,a),l=Math.max(b,l)}Fye(o,e);let v=s.indexOf(a),S=i.indexOf(l),k=A=>({width:s[A]||0,height:i[A]||0});return{first:k(0),last:k(e-1),widest:k(v),highest:k(S),widths:s,heights:i}}getLabelForValue(t){return t}getPixelForValue(t,e){return NaN}getValueForPixel(t){}getPixelForTick(t){let e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);let e=this._startPixel+t*this._length;return V4(this._alignToPixels?Bp(this.chart,e,0):e)}getDecimalForPixel(t){let e=(t-this._startPixel)/this._length;return this._reversePixels?1-e:e}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){let{min:t,max:e}=this;return t<0&&e<0?e:t>0&&e>0?t:0}getContext(t){let e=this.ticks||[];if(t>=0&&t<e.length){let r=e[t];return r.$context||(r.$context=$ye(this.getContext(),t,r))}return this.$context||(this.$context=Pye(this.chart.getContext(),this))}_tickSize(){let t=this.options.ticks,e=di(this.labelRotation),r=Math.abs(Math.cos(e)),o=Math.abs(Math.sin(e)),s=this._getLabelSizes(),i=t.autoSkipPadding||0,a=s?s.widest.width+i:0,l=s?s.highest.height+i:0;return this.isHorizontal()?l*r>a*o?a/r:l/o:l*o<a*r?l/r:a/o}_isVisible(){let t=this.options.display;return t!=="auto"?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){let e=this.axis,r=this.chart,o=this.options,{grid:s,position:i}=o,a=s.offset,l=this.isHorizontal(),u=this.ticks.length+(a?1:0),p=iv(s),f=[],d=s.setContext(this.getContext()),h=d.drawBorder?d.borderWidth:0,m=h/2,g=function(te){return Bp(r,te,h)},x,b,w,v,S,k,A,$,L,z,W,Q;if(i==="top")x=g(this.bottom),k=this.bottom-p,$=x-m,z=g(t.top)+m,Q=t.bottom;else if(i==="bottom")x=g(this.top),z=t.top,Q=g(t.bottom)-m,k=x+m,$=this.top+p;else if(i==="left")x=g(this.right),S=this.right-p,A=x-m,L=g(t.left)+m,W=t.right;else if(i==="right")x=g(this.left),L=t.left,W=g(t.right)-m,S=x+m,A=this.left+p;else if(e==="x"){if(i==="center")x=g((t.top+t.bottom)/2+.5);else if(Lt(i)){let te=Object.keys(i)[0],ie=i[te];x=g(this.chart.scales[te].getPixelForValue(ie))}z=t.top,Q=t.bottom,k=x+m,$=k+p}else if(e==="y"){if(i==="center")x=g((t.left+t.right)/2);else if(Lt(i)){let te=Object.keys(i)[0],ie=i[te];x=g(this.chart.scales[te].getPixelForValue(ie))}S=x-m,A=S-p,L=t.left,W=t.right}let ne=St(o.ticks.maxTicksLimit,u),se=Math.max(1,Math.ceil(u/ne));for(b=0;b<u;b+=se){let te=s.setContext(this.getContext(b)),ie=te.lineWidth,le=te.color,pe=te.borderDash||[],me=te.borderDashOffset,ve=te.tickWidth,we=te.tickColor,Se=te.tickBorderDash||[],Ce=te.tickBorderDashOffset;w=Oye(this,b,a),w!==void 0&&(v=Bp(r,w,ie),l?S=A=L=W=v:k=$=z=Q=v,f.push({tx1:S,ty1:k,tx2:A,ty2:$,x1:L,y1:z,x2:W,y2:Q,width:ie,color:le,borderDash:pe,borderDashOffset:me,tickWidth:ve,tickColor:we,tickBorderDash:Se,tickBorderDashOffset:Ce}))}return this._ticksLength=u,this._borderValue=x,f}_computeLabelItems(t){let e=this.axis,r=this.options,{position:o,ticks:s}=r,i=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:u,mirror:p}=s,f=iv(r.grid),d=f+u,h=p?-u:d,m=-di(this.labelRotation),g=[],x,b,w,v,S,k,A,$,L,z,W,Q,ne="middle";if(o==="top")k=this.bottom-h,A=this._getXAxisLabelAlignment();else if(o==="bottom")k=this.top+h,A=this._getXAxisLabelAlignment();else if(o==="left"){let te=this._getYAxisLabelAlignment(f);A=te.textAlign,S=te.x}else if(o==="right"){let te=this._getYAxisLabelAlignment(f);A=te.textAlign,S=te.x}else if(e==="x"){if(o==="center")k=(t.top+t.bottom)/2+d;else if(Lt(o)){let te=Object.keys(o)[0],ie=o[te];k=this.chart.scales[te].getPixelForValue(ie)+d}A=this._getXAxisLabelAlignment()}else if(e==="y"){if(o==="center")S=(t.left+t.right)/2-d;else if(Lt(o)){let te=Object.keys(o)[0],ie=o[te];S=this.chart.scales[te].getPixelForValue(ie)}A=this._getYAxisLabelAlignment(f).textAlign}e==="y"&&(l==="start"?ne="top":l==="end"&&(ne="bottom"));let se=this._getLabelSizes();for(x=0,b=a.length;x<b;++x){w=a[x],v=w.label;let te=s.setContext(this.getContext(x));$=this.getPixelForTick(x)+s.labelOffset,L=this._resolveTickFontOptions(x),z=L.lineHeight,W=$n(v)?v.length:1;let ie=W/2,le=te.color,pe=te.textStrokeColor,me=te.textStrokeWidth,ve=A;i?(S=$,A==="inner"&&(x===b-1?ve=this.options.reverse?"left":"right":x===0?ve=this.options.reverse?"right":"left":ve="center"),o==="top"?c==="near"||m!==0?Q=-W*z+z/2:c==="center"?Q=-se.highest.height/2-ie*z+z:Q=-se.highest.height+z/2:c==="near"||m!==0?Q=z/2:c==="center"?Q=se.highest.height/2-ie*z:Q=se.highest.height-W*z,p&&(Q*=-1)):(k=$,Q=(1-W)*z/2);let we;if(te.showLabelBackdrop){let Se=vo(te.backdropPadding),Ce=se.heights[x],De=se.widths[x],Ne=k+Q-Se.top,Re=S-Se.left;switch(ne){case"middle":Ne-=Ce/2;break;case"bottom":Ne-=Ce;break}switch(A){case"center":Re-=De/2;break;case"right":Re-=De;break}we={left:Re,top:Ne,width:De+Se.width,height:Ce+Se.height,color:te.backdropColor}}g.push({rotation:m,label:v,font:L,color:le,strokeColor:pe,strokeWidth:me,textOffset:Q,textAlign:ve,textBaseline:ne,translation:[S,k],backdrop:we})}return g}_getXAxisLabelAlignment(){let{position:t,ticks:e}=this.options;if(-di(this.labelRotation))return t==="top"?"left":"right";let o="center";return e.align==="start"?o="left":e.align==="end"?o="right":e.align==="inner"&&(o="inner"),o}_getYAxisLabelAlignment(t){let{position:e,ticks:{crossAlign:r,mirror:o,padding:s}}=this.options,i=this._getLabelSizes(),a=t+s,l=i.widest.width,c,u;return e==="left"?o?(u=this.right+s,r==="near"?c="left":r==="center"?(c="center",u+=l/2):(c="right",u+=l)):(u=this.right-a,r==="near"?c="right":r==="center"?(c="center",u-=l/2):(c="left",u=this.left)):e==="right"?o?(u=this.left+s,r==="near"?c="right":r==="center"?(c="center",u-=l/2):(c="left",u-=l)):(u=this.left+a,r==="near"?c="left":r==="center"?(c="center",u+=l/2):(c="right",u=this.right)):c="right",{textAlign:c,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;let t=this.chart,e=this.options.position;if(e==="left"||e==="right")return{top:0,left:this.left,bottom:t.height,right:this.right};if(e==="top"||e==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:t.width}}drawBackground(){let{ctx:t,options:{backgroundColor:e},left:r,top:o,width:s,height:i}=this;e&&(t.save(),t.fillStyle=e,t.fillRect(r,o,s,i),t.restore())}getLineWidthForValue(t){let e=this.options.grid;if(!this._isVisible()||!e.display)return 0;let o=this.ticks.findIndex(s=>s.value===t);return o>=0?e.setContext(this.getContext(o)).lineWidth:0}drawGrid(t){let e=this.options.grid,r=this.ctx,o=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t)),s,i,a=(l,c,u)=>{!u.width||!u.color||(r.save(),r.lineWidth=u.width,r.strokeStyle=u.color,r.setLineDash(u.borderDash||[]),r.lineDashOffset=u.borderDashOffset,r.beginPath(),r.moveTo(l.x,l.y),r.lineTo(c.x,c.y),r.stroke(),r.restore())};if(e.display)for(s=0,i=o.length;s<i;++s){let l=o[s];e.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),e.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){let{chart:t,ctx:e,options:{grid:r}}=this,o=r.setContext(this.getContext()),s=r.drawBorder?o.borderWidth:0;if(!s)return;let i=r.setContext(this.getContext(0)).lineWidth,a=this._borderValue,l,c,u,p;this.isHorizontal()?(l=Bp(t,this.left,s)-s/2,c=Bp(t,this.right,i)+i/2,u=p=a):(u=Bp(t,this.top,s)-s/2,p=Bp(t,this.bottom,i)+i/2,l=c=a),e.save(),e.lineWidth=o.borderWidth,e.strokeStyle=o.borderColor,e.beginPath(),e.moveTo(l,u),e.lineTo(c,p),e.stroke(),e.restore()}drawLabels(t){if(!this.options.ticks.display)return;let r=this.ctx,o=this._computeLabelArea();o&&rv(r,o);let s=this._labelItems||(this._labelItems=this._computeLabelItems(t)),i,a;for(i=0,a=s.length;i<a;++i){let l=s[i],c=l.font,u=l.label;l.backdrop&&(r.fillStyle=l.backdrop.color,r.fillRect(l.backdrop.left,l.backdrop.top,l.backdrop.width,l.backdrop.height));let p=l.textOffset;zp(r,u,0,p,c,l)}o&&ov(r)}drawTitle(){let{ctx:t,options:{position:e,title:r,reverse:o}}=this;if(!r.display)return;let s=Mr(r.font),i=vo(r.padding),a=r.align,l=s.lineHeight/2;e==="bottom"||e==="center"||Lt(e)?(l+=i.bottom,$n(r.text)&&(l+=s.lineHeight*(r.text.length-1))):l+=i.top;let{titleX:c,titleY:u,maxWidth:p,rotation:f}=Bye(this,l,e,a);zp(t,r.text,0,0,s,{color:r.color,maxWidth:p,rotation:f,textAlign:Lye(a,e,o),textBaseline:"middle",translation:[c,u]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){let t=this.options,e=t.ticks&&t.ticks.z||0,r=St(t.grid&&t.grid.z,-1);return!this._isVisible()||this.draw!==n.prototype.draw?[{z:e,draw:o=>{this.draw(o)}}]:[{z:r,draw:o=>{this.drawBackground(),this.drawGrid(o),this.drawTitle()}},{z:r+1,draw:()=>{this.drawBorder()}},{z:e,draw:o=>{this.drawLabels(o)}}]}getMatchingVisibleMetas(t){let e=this.chart.getSortedVisibleDatasetMetas(),r=this.axis+"AxisID",o=[],s,i;for(s=0,i=e.length;s<i;++s){let a=e[s];a[r]===this.id&&(!t||a.type===t)&&o.push(a)}return o}_resolveTickFontOptions(t){let e=this.options.ticks.setContext(this.getContext(t));return Mr(e.font)}_maxDigits(){let t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}},sx=class{constructor(t,e,r){this.type=t,this.scope=e,this.override=r,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){let e=Object.getPrototypeOf(t),r;Uye(e)&&(r=this.register(e));let o=this.items,s=t.id,i=this.scope+"."+s;if(!s)throw new Error("class does not have id: "+t);return s in o||(o[s]=t,zye(t,i,r),this.override&&Mt.override(t.id,t.overrides)),i}get(t){return this.items[t]}unregister(t){let e=this.items,r=t.id,o=this.scope;r in e&&delete e[r],o&&r in Mt[o]&&(delete Mt[o][r],this.override&&delete Lp[r])}};function zye(n,t,e){let r=Xg(Object.create(null),[e?Mt.get(e):{},Mt.get(t),n.defaults]);Mt.set(t,r),n.defaultRoutes&&Vye(t,n.defaultRoutes),n.descriptors&&Mt.describe(t,n.descriptors)}function Vye(n,t){Object.keys(t).forEach(e=>{let r=e.split("."),o=r.pop(),s=[n].concat(r).join("."),i=t[e].split("."),a=i.pop(),l=i.join(".");Mt.route(s,o,l,a)})}function Uye(n){return"id"in n&&"defaults"in n}var u2=class{constructor(){this.controllers=new sx(sl,"datasets",!0),this.elements=new sx(Gs,"elements"),this.plugins=new sx(Object,"plugins"),this.scales=new sx($d,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,e,r){[...e].forEach(o=>{let s=r||this._getRegistryForType(o);r||s.isForType(o)||s===this.plugins&&o.id?this._exec(t,s,o):gn(o,i=>{let a=r||this._getRegistryForType(i);this._exec(t,a,i)})})}_exec(t,e,r){let o=xS(t);Ln(r["before"+o],[],r),e[t](r),Ln(r["after"+o],[],r)}_getRegistryForType(t){for(let e=0;e<this._typedRegistries.length;e++){let r=this._typedRegistries[e];if(r.isForType(t))return r}return this.plugins}_get(t,e,r){let o=e.get(t);if(o===void 0)throw new Error('"'+t+'" is not a registered '+r+".");return o}},ol=new u2,jye=(()=>{class n extends sl{update(e){let r=this._cachedMeta,{data:o=[]}=r,s=this.chart._animationsDisabled,{start:i,count:a}=MR(r,o,s);if(this._drawStart=i,this._drawCount=a,OR(r)&&(i=0,a=o.length),this.options.showLine){let{dataset:l,_dataset:c}=r;l._chart=this.chart,l._datasetIndex=this.index,l._decimated=!!c._decimated,l.points=o;let u=this.resolveDatasetElementOptions(e);u.segment=this.options.segment,this.updateElement(l,void 0,{animated:!s,options:u},e)}this.updateElements(o,i,a,e)}addElements(){let{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=ol.getElement("line")),super.addElements()}updateElements(e,r,o,s){let i=s==="reset",{iScale:a,vScale:l,_stacked:c,_dataset:u}=this._cachedMeta,p=this.resolveDataElementOptions(r,s),f=this.getSharedOptions(p),d=this.includeOptions(s,f),h=a.axis,m=l.axis,{spanGaps:g,segment:x}=this.options,b=Od(g)?g:Number.POSITIVE_INFINITY,w=this.chart._animationsDisabled||i||s==="none",v=r>0&&this.getParsed(r-1);for(let S=r;S<r+o;++S){let k=e[S],A=this.getParsed(S),$=w?k:{},L=Ht(A[m]),z=$[h]=a.getPixelForValue(A[h],S),W=$[m]=i||L?l.getBasePixel():l.getPixelForValue(c?this.applyStack(l,A,c):A[m],S);$.skip=isNaN(z)||isNaN(W)||L,$.stop=S>0&&Math.abs(A[h]-v[h])>b,x&&($.parsed=A,$.raw=u.data[S]),d&&($.options=f||this.resolveDataElementOptions(S,k.active?"active":s)),w||this.updateElement(k,S,$,s),v=A}this.updateSharedOptions(f,s,p)}getMaxOverflow(){let e=this._cachedMeta,r=e.data||[];if(!this.options.showLine){let l=0;for(let c=r.length-1;c>=0;--c)l=Math.max(l,r[c].size(this.resolveDataElementOptions(c))/2);return l>0&&l}let o=e.dataset,s=o.options&&o.options.borderWidth||0;if(!r.length)return s;let i=r[0].size(this.resolveDataElementOptions(0)),a=r[r.length-1].size(this.resolveDataElementOptions(r.length-1));return Math.max(s,i,a)/2}}return n.id="scatter",n.defaults={datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1},n.overrides={interaction:{mode:"point"},plugins:{tooltip:{callbacks:{title(){return""},label(t){return"("+t.label+", "+t.formattedValue+")"}}}},scales:{x:{type:"linear"},y:{type:"linear"}}},n})(),Gye=Object.freeze({__proto__:null,BarController:bye,BubbleController:vye,DoughnutController:lG,LineController:Cye,PolarAreaController:Iye,PieController:Sye,RadarController:Tye,ScatterController:jye});function Pd(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}var Wye=(()=>{class n{constructor(e){this.options=e||{}}init(e){}formats(){return Pd()}parse(e,r){return Pd()}format(e,r){return Pd()}add(e,r,o){return Pd()}diff(e,r,o){return Pd()}startOf(e,r,o){return Pd()}endOf(e,r){return Pd()}}return n.override=function(t){Object.assign(n.prototype,t)},n})(),Hye={_date:Wye};function qye(n,t,e,r){let{controller:o,data:s,_sorted:i}=n,a=o._cachedMeta.iScale;if(a&&t===a.axis&&t!=="r"&&i&&s.length){let l=a._reversePixels?U4:el;if(r){if(o._sharedOptions){let c=s[0],u=typeof c.getRange=="function"&&c.getRange(t);if(u){let p=l(s,t,e-u),f=l(s,t,e+u);return{lo:p.lo,hi:f.hi}}}}else return l(s,t,e)}return{lo:0,hi:s.length-1}}function xv(n,t,e,r,o){let s=n.getSortedVisibleDatasetMetas(),i=e[t];for(let a=0,l=s.length;a<l;++a){let{index:c,data:u}=s[a],{lo:p,hi:f}=qye(s[a],t,i,o);for(let d=p;d<=f;++d){let h=u[d];h.skip||r(h,c,d)}}}function Kye(n){let t=n.indexOf("x")!==-1,e=n.indexOf("y")!==-1;return function(r,o){let s=t?Math.abs(r.x-o.x):0,i=e?Math.abs(r.y-o.y):0;return Math.sqrt(Math.pow(s,2)+Math.pow(i,2))}}function n2(n,t,e,r,o){let s=[];return!o&&!n.isPointInArea(t)||xv(n,e,t,function(a,l,c){!o&&!Yg(a,n.chartArea,0)||a.inRange(t.x,t.y,r)&&s.push({element:a,datasetIndex:l,index:c})},!0),s}function Xye(n,t,e,r){let o=[];function s(i,a,l){let{startAngle:c,endAngle:u}=i.getProps(["startAngle","endAngle"],r),{angle:p}=DR(i,{x:t.x,y:t.y});ex(p,c,u)&&o.push({element:i,datasetIndex:a,index:l})}return xv(n,e,t,s),o}function Yye(n,t,e,r,o,s){let i=[],a=Kye(e),l=Number.POSITIVE_INFINITY;function c(u,p,f){let d=u.inRange(t.x,t.y,o);if(r&&!d)return;let h=u.getCenterPoint(o);if(!(!!s||n.isPointInArea(h))&&!d)return;let g=a(t,h);g<l?(i=[{element:u,datasetIndex:p,index:f}],l=g):g===l&&i.push({element:u,datasetIndex:p,index:f})}return xv(n,e,t,c),i}function r2(n,t,e,r,o,s){return!s&&!n.isPointInArea(t)?[]:e==="r"&&!r?Xye(n,t,e,o):Yye(n,t,e,r,o,s)}function Nj(n,t,e,r,o){let s=[],i=e==="x"?"inXRange":"inYRange",a=!1;return xv(n,e,t,(l,c,u)=>{l[i](t[e],o)&&(s.push({element:l,datasetIndex:c,index:u}),a=a||l.inRange(t.x,t.y,o))}),r&&!a?[]:s}var Zye={evaluateInteractionItems:xv,modes:{index(n,t,e,r){let o=Up(t,n),s=e.axis||"x",i=e.includeInvisible||!1,a=e.intersect?n2(n,o,s,r,i):r2(n,o,s,!1,r,i),l=[];return a.length?(n.getSortedVisibleDatasetMetas().forEach(c=>{let u=a[0].index,p=c.data[u];p&&!p.skip&&l.push({element:p,datasetIndex:c.index,index:u})}),l):[]},dataset(n,t,e,r){let o=Up(t,n),s=e.axis||"xy",i=e.includeInvisible||!1,a=e.intersect?n2(n,o,s,r,i):r2(n,o,s,!1,r,i);if(a.length>0){let l=a[0].datasetIndex,c=n.getDatasetMeta(l).data;a=[];for(let u=0;u<c.length;++u)a.push({element:c[u],datasetIndex:l,index:u})}return a},point(n,t,e,r){let o=Up(t,n),s=e.axis||"xy",i=e.includeInvisible||!1;return n2(n,o,s,r,i)},nearest(n,t,e,r){let o=Up(t,n),s=e.axis||"xy",i=e.includeInvisible||!1;return r2(n,o,s,e.intersect,r,i)},x(n,t,e,r){let o=Up(t,n);return Nj(n,o,"x",e.intersect,r)},y(n,t,e,r){let o=Up(t,n);return Nj(n,o,"y",e.intersect,r)}}},uG=["left","top","right","bottom"];function av(n,t){return n.filter(e=>e.pos===t)}function Dj(n,t){return n.filter(e=>uG.indexOf(e.pos)===-1&&e.box.axis===t)}function lv(n,t){return n.sort((e,r)=>{let o=t?r:e,s=t?e:r;return o.weight===s.weight?o.index-s.index:o.weight-s.weight})}function Qye(n){let t=[],e,r,o,s,i,a;for(e=0,r=(n||[]).length;e<r;++e)o=n[e],{position:s,options:{stack:i,stackWeight:a=1}}=o,t.push({index:e,box:o,pos:s,horizontal:o.isHorizontal(),weight:o.weight,stack:i&&s+i,stackWeight:a});return t}function Jye(n){let t={};for(let e of n){let{stack:r,pos:o,stackWeight:s}=e;if(!r||!uG.includes(o))continue;let i=t[r]||(t[r]={count:0,placed:0,weight:0,size:0});i.count++,i.weight+=s}return t}function ebe(n,t){let e=Jye(n),{vBoxMaxWidth:r,hBoxMaxHeight:o}=t,s,i,a;for(s=0,i=n.length;s<i;++s){a=n[s];let{fullSize:l}=a.box,c=e[a.stack],u=c&&a.stackWeight/c.weight;a.horizontal?(a.width=u?u*r:l&&t.availableWidth,a.height=o):(a.width=r,a.height=u?u*o:l&&t.availableHeight)}return e}function tbe(n){let t=Qye(n),e=lv(t.filter(c=>c.box.fullSize),!0),r=lv(av(t,"left"),!0),o=lv(av(t,"right")),s=lv(av(t,"top"),!0),i=lv(av(t,"bottom")),a=Dj(t,"x"),l=Dj(t,"y");return{fullSize:e,leftAndTop:r.concat(s),rightAndBottom:o.concat(l).concat(i).concat(a),chartArea:av(t,"chartArea"),vertical:r.concat(o).concat(l),horizontal:s.concat(i).concat(a)}}function kj(n,t,e,r){return Math.max(n[e],t[e])+Math.max(n[r],t[r])}function pG(n,t){n.top=Math.max(n.top,t.top),n.left=Math.max(n.left,t.left),n.bottom=Math.max(n.bottom,t.bottom),n.right=Math.max(n.right,t.right)}function nbe(n,t,e,r){let{pos:o,box:s}=e,i=n.maxPadding;if(!Lt(o)){e.size&&(n[o]-=e.size);let p=r[e.stack]||{size:0,count:1};p.size=Math.max(p.size,e.horizontal?s.height:s.width),e.size=p.size/p.count,n[o]+=e.size}s.getPadding&&pG(i,s.getPadding());let a=Math.max(0,t.outerWidth-kj(i,n,"left","right")),l=Math.max(0,t.outerHeight-kj(i,n,"top","bottom")),c=a!==n.w,u=l!==n.h;return n.w=a,n.h=l,e.horizontal?{same:c,other:u}:{same:u,other:c}}function rbe(n){let t=n.maxPadding;function e(r){let o=Math.max(t[r]-n[r],0);return n[r]+=o,o}n.y+=e("top"),n.x+=e("left"),e("right"),e("bottom")}function obe(n,t){let e=t.maxPadding;function r(o){let s={left:0,top:0,right:0,bottom:0};return o.forEach(i=>{s[i]=Math.max(t[i],e[i])}),s}return r(n?["left","right"]:["top","bottom"])}function uv(n,t,e,r){let o=[],s,i,a,l,c,u;for(s=0,i=n.length,c=0;s<i;++s){a=n[s],l=a.box,l.update(a.width||t.w,a.height||t.h,obe(a.horizontal,t));let{same:p,other:f}=nbe(t,e,a,r);c|=p&&o.length,u=u||f,l.fullSize||o.push(a)}return c&&uv(o,t,e,r)||u}function DS(n,t,e,r,o){n.top=e,n.left=t,n.right=t+r,n.bottom=e+o,n.width=r,n.height=o}function _j(n,t,e,r){let o=e.padding,{x:s,y:i}=t;for(let a of n){let l=a.box,c=r[a.stack]||{count:1,placed:0,weight:1},u=a.stackWeight/c.weight||1;if(a.horizontal){let p=t.w*u,f=c.size||l.height;Vs(c.start)&&(i=c.start),l.fullSize?DS(l,o.left,i,e.outerWidth-o.right-o.left,f):DS(l,t.left+c.placed,i,p,f),c.start=i,c.placed+=p,i=l.bottom}else{let p=t.h*u,f=c.size||l.width;Vs(c.start)&&(s=c.start),l.fullSize?DS(l,s,o.top,f,e.outerHeight-o.bottom-o.top):DS(l,s,t.top+c.placed,f,p),c.start=s,c.placed+=p,s=l.right}}t.x=s,t.y=i}Mt.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}});var Ao={addBox(n,t){n.boxes||(n.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(e){t.draw(e)}}]},n.boxes.push(t)},removeBox(n,t){let e=n.boxes?n.boxes.indexOf(t):-1;e!==-1&&n.boxes.splice(e,1)},configure(n,t,e){t.fullSize=e.fullSize,t.position=e.position,t.weight=e.weight},update(n,t,e,r){if(!n)return;let o=vo(n.options.layout.padding),s=Math.max(t-o.width,0),i=Math.max(e-o.height,0),a=tbe(n.boxes),l=a.vertical,c=a.horizontal;gn(n.boxes,m=>{typeof m.beforeLayout=="function"&&m.beforeLayout()});let u=l.reduce((m,g)=>g.box.options&&g.box.options.display===!1?m:m+1,0)||1,p=Object.freeze({outerWidth:t,outerHeight:e,padding:o,availableWidth:s,availableHeight:i,vBoxMaxWidth:s/2/u,hBoxMaxHeight:i/2}),f=Object.assign({},o);pG(f,vo(r));let d=Object.assign({maxPadding:f,w:s,h:i,x:o.left,y:o.top},o),h=ebe(l.concat(c),p);uv(a.fullSize,d,p,h),uv(l,d,p,h),uv(c,d,p,h)&&uv(l,d,p,h),rbe(d),_j(a.leftAndTop,d,p,h),d.x+=d.w,d.y+=d.h,_j(a.rightAndBottom,d,p,h),n.chartArea={left:d.left,top:d.top,right:d.left+d.w,bottom:d.top+d.h,height:d.h,width:d.w},gn(a.chartArea,m=>{let g=m.box;Object.assign(g,n.chartArea),g.update(d.w,d.h,{left:0,top:0,right:0,bottom:0})})}},FS=class{acquireContext(t,e){}releaseContext(t){return!1}addEventListener(t,e,r){}removeEventListener(t,e,r){}getDevicePixelRatio(){return 1}getMaximumSize(t,e,r,o){return e=Math.max(0,e||t.width),r=r||t.height,{width:e,height:Math.max(0,o?Math.floor(e/o):r)}}isAttached(t){return!0}updateConfig(t){}},p2=class extends FS{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}},MS="$chartjs",sbe={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},Aj=n=>n===null||n==="";function ibe(n,t){let e=n.style,r=n.getAttribute("height"),o=n.getAttribute("width");if(n[MS]={initial:{height:r,width:o,style:{display:e.display,height:e.height,width:e.width}}},e.display=e.display||"block",e.boxSizing=e.boxSizing||"border-box",Aj(o)){let s=KR(n,"width");s!==void 0&&(n.width=s)}if(Aj(r))if(n.style.height==="")n.height=n.width/(t||2);else{let s=KR(n,"height");s!==void 0&&(n.height=s)}return n}var fG=cj?{passive:!0}:!1;function abe(n,t,e){n.addEventListener(t,e,fG)}function lbe(n,t,e){n.canvas.removeEventListener(t,e,fG)}function cbe(n,t){let e=sbe[n.type]||n.type,{x:r,y:o}=Up(n,t);return{type:e,chart:t,native:n,x:r!==void 0?r:null,y:o!==void 0?o:null}}function PS(n,t){for(let e of n)if(e===t||e.contains(t))return!0}function ube(n,t,e){let r=n.canvas,o=new MutationObserver(s=>{let i=!1;for(let a of s)i=i||PS(a.addedNodes,r),i=i&&!PS(a.removedNodes,r);i&&e()});return o.observe(document,{childList:!0,subtree:!0}),o}function pbe(n,t,e){let r=n.canvas,o=new MutationObserver(s=>{let i=!1;for(let a of s)i=i||PS(a.removedNodes,r),i=i&&!PS(a.addedNodes,r);i&&e()});return o.observe(document,{childList:!0,subtree:!0}),o}var fv=new Map,Rj=0;function dG(){let n=window.devicePixelRatio;n!==Rj&&(Rj=n,fv.forEach((t,e)=>{e.currentDevicePixelRatio!==n&&t()}))}function fbe(n,t){fv.size||window.addEventListener("resize",dG),fv.set(n,t)}function dbe(n){fv.delete(n),fv.size||window.removeEventListener("resize",dG)}function hbe(n,t,e){let r=n.canvas,o=r&&TS(r);if(!o)return;let s=RR((a,l)=>{let c=o.clientWidth;e(a,l),c<o.clientWidth&&e()},window),i=new ResizeObserver(a=>{let l=a[0],c=l.contentRect.width,u=l.contentRect.height;c===0&&u===0||s(c,u)});return i.observe(o),fbe(n,s),i}function o2(n,t,e){e&&e.disconnect(),t==="resize"&&dbe(n)}function mbe(n,t,e){let r=n.canvas,o=RR(s=>{n.ctx!==null&&e(cbe(s,n))},n,s=>{let i=s[0];return[i,i.offsetX,i.offsetY]});return abe(r,t,o),o}var f2=class extends FS{acquireContext(t,e){let r=t&&t.getContext&&t.getContext("2d");return r&&r.canvas===t?(ibe(t,e),r):null}releaseContext(t){let e=t.canvas;if(!e[MS])return!1;let r=e[MS].initial;["height","width"].forEach(s=>{let i=r[s];Ht(i)?e.removeAttribute(s):e.setAttribute(s,i)});let o=r.style||{};return Object.keys(o).forEach(s=>{e.style[s]=o[s]}),e.width=e.width,delete e[MS],!0}addEventListener(t,e,r){this.removeEventListener(t,e);let o=t.$proxies||(t.$proxies={}),i={attach:ube,detach:pbe,resize:hbe}[e]||mbe;o[e]=i(t,e,r)}removeEventListener(t,e){let r=t.$proxies||(t.$proxies={}),o=r[e];if(!o)return;({attach:o2,detach:o2,resize:o2}[e]||lbe)(t,e,o),r[e]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,e,r,o){return lj(t,e,r,o)}isAttached(t){let e=TS(t);return!!(e&&e.isConnected)}};function gbe(n){return!HR()||typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas?p2:f2}var d2=class{constructor(){this._init=[]}notify(t,e,r,o){e==="beforeInit"&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install"));let s=o?this._descriptors(t).filter(o):this._descriptors(t),i=this._notify(s,t,e,r);return e==="afterDestroy"&&(this._notify(s,t,"stop"),this._notify(this._init,t,"uninstall")),i}_notify(t,e,r,o){o=o||{};for(let s of t){let i=s.plugin,a=i[r],l=[e,o,s.options];if(Ln(a,l,i)===!1&&o.cancelable)return!1}return!0}invalidate(){Ht(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;let e=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),e}_createDescriptors(t,e){let r=t&&t.config,o=St(r.options&&r.options.plugins,{}),s=xbe(r);return o===!1&&!e?[]:bbe(t,s,o,e)}_notifyStateChanges(t){let e=this._oldCache||[],r=this._cache,o=(s,i)=>s.filter(a=>!i.some(l=>a.plugin.id===l.plugin.id));this._notify(o(e,r),t,"stop"),this._notify(o(r,e),t,"start")}};function xbe(n){let t={},e=[],r=Object.keys(ol.plugins.items);for(let s=0;s<r.length;s++)e.push(ol.getPlugin(r[s]));let o=n.plugins||[];for(let s=0;s<o.length;s++){let i=o[s];e.indexOf(i)===-1&&(e.push(i),t[i.id]=!0)}return{plugins:e,localIds:t}}function ybe(n,t){return!t&&n===!1?null:n===!0?{}:n}function bbe(n,{plugins:t,localIds:e},r,o){let s=[],i=n.getContext();for(let a of t){let l=a.id,c=ybe(r[l],o);c!==null&&s.push({plugin:a,options:vbe(n.config,{plugin:a,local:e[l]},c,i)})}return s}function vbe(n,{plugin:t,local:e},r,o){let s=n.pluginScopeKeys(t),i=n.getOptionScopes(r,s);return e&&t.defaults&&i.push(t.defaults),n.createResolver(i,o,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function h2(n,t){let e=Mt.datasets[n]||{};return((t.datasets||{})[n]||{}).indexAxis||t.indexAxis||e.indexAxis||"x"}function wbe(n,t){let e=n;return n==="_index_"?e=t:n==="_value_"&&(e=t==="x"?"y":"x"),e}function Cbe(n,t){return n===t?"_index_":"_value_"}function Ibe(n){if(n==="top"||n==="bottom")return"x";if(n==="left"||n==="right")return"y"}function m2(n,t){return n==="x"||n==="y"?n:t.axis||Ibe(t.position)||n.charAt(0).toLowerCase()}function Sbe(n,t){let e=Lp[n.type]||{scales:{}},r=t.scales||{},o=h2(n.type,t),s=Object.create(null),i=Object.create(null);return Object.keys(r).forEach(a=>{let l=r[a];if(!Lt(l))return console.error(`Invalid scale configuration for scale: ${a}`);if(l._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${a}`);let c=m2(a,l),u=Cbe(c,o),p=e.scales||{};s[c]=s[c]||a,i[a]=Qg(Object.create(null),[{axis:c},l,p[c],p[u]])}),n.data.datasets.forEach(a=>{let l=a.type||n.type,c=a.indexAxis||h2(l,t),p=(Lp[l]||{}).scales||{};Object.keys(p).forEach(f=>{let d=wbe(f,c),h=a[d+"AxisID"]||s[d]||d;i[h]=i[h]||Object.create(null),Qg(i[h],[{axis:d},r[h],p[f]])})}),Object.keys(i).forEach(a=>{let l=i[a];Qg(l,[Mt.scales[l.type],Mt.scale])}),i}function hG(n){let t=n.options||(n.options={});t.plugins=St(t.plugins,{}),t.scales=Sbe(n,t)}function mG(n){return n=n||{},n.datasets=n.datasets||[],n.labels=n.labels||[],n}function Tbe(n){return n=n||{},n.data=mG(n.data),hG(n),n}var Mj=new Map,gG=new Set;function kS(n,t){let e=Mj.get(n);return e||(e=t(),Mj.set(n,e),gG.add(e)),e}var cv=(n,t,e)=>{let r=Lc(t,e);r!==void 0&&n.add(r)},g2=class{constructor(t){this._config=Tbe(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=mG(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){let t=this._config;this.clearCache(),hG(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return kS(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,e){return kS(`${t}.transition.${e}`,()=>[[`datasets.${t}.transitions.${e}`,`transitions.${e}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,e){return kS(`${t}-${e}`,()=>[[`datasets.${t}.elements.${e}`,`datasets.${t}`,`elements.${e}`,""]])}pluginScopeKeys(t){let e=t.id,r=this.type;return kS(`${r}-plugin-${e}`,()=>[[`plugins.${e}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,e){let r=this._scopeCache,o=r.get(t);return(!o||e)&&(o=new Map,r.set(t,o)),o}getOptionScopes(t,e,r){let{options:o,type:s}=this,i=this._cachedScopes(t,r),a=i.get(e);if(a)return a;let l=new Set;e.forEach(u=>{t&&(l.add(t),u.forEach(p=>cv(l,t,p))),u.forEach(p=>cv(l,o,p)),u.forEach(p=>cv(l,Lp[s]||{},p)),u.forEach(p=>cv(l,Mt,p)),u.forEach(p=>cv(l,wS,p))});let c=Array.from(l);return c.length===0&&c.push(Object.create(null)),gG.has(e)&&i.set(e,c),c}chartOptionScopes(){let{options:t,type:e}=this;return[t,Lp[e]||{},Mt.datasets[e]||{},{type:e},Mt,wS]}resolveNamedOptions(t,e,r,o=[""]){let s={$shared:!0},{resolver:i,subPrefixes:a}=Oj(this._resolverCache,t,o),l=i;if(Nbe(i,e)){s.$shared=!1,r=$c(r)?r():r;let c=this.createResolver(t,r,a);l=Md(i,r,c)}for(let c of e)s[c]=l[c];return s}createResolver(t,e,r=[""],o){let{resolver:s}=Oj(this._resolverCache,t,r);return Lt(e)?Md(s,e,void 0,o):s}};function Oj(n,t,e){let r=n.get(t);r||(r=new Map,n.set(t,r));let o=e.join(),s=r.get(o);return s||(s={resolver:SS(t,e),subPrefixes:e.filter(a=>!a.toLowerCase().includes("hover"))},r.set(o,s)),s}var Ebe=n=>Lt(n)&&Object.getOwnPropertyNames(n).reduce((t,e)=>t||$c(n[e]),!1);function Nbe(n,t){let{isScriptable:e,isIndexable:r}=UR(n);for(let o of t){let s=e(o),i=r(o),a=(i||s)&&n[o];if(s&&($c(a)||Ebe(a))||i&&$n(a))return!0}return!1}var Dbe="3.9.1",kbe=["top","bottom","left","right","chartArea"];function Fj(n,t){return n==="top"||n==="bottom"||kbe.indexOf(n)===-1&&t==="x"}function Pj(n,t){return function(e,r){return e[n]===r[n]?e[t]-r[t]:e[n]-r[n]}}function $j(n){let t=n.chart,e=t.options.animation;t.notifyPlugins("afterRender"),Ln(e&&e.onComplete,[n],t)}function _be(n){let t=n.chart,e=t.options.animation;Ln(e&&e.onProgress,[n],t)}function xG(n){return HR()&&typeof n=="string"?n=document.getElementById(n):n&&n.length&&(n=n[0]),n&&n.canvas&&(n=n.canvas),n}var $S={},yG=n=>{let t=xG(n);return Object.values($S).filter(e=>e.canvas===t).pop()};function Abe(n,t,e){let r=Object.keys(n);for(let o of r){let s=+o;if(s>=t){let i=n[o];delete n[o],(e>0||s>t)&&(n[s+e]=i)}}}function Rbe(n,t,e,r){return!e||n.type==="mouseout"?null:r?t:n}var Ld=class{constructor(t,e){let r=this.config=new g2(e),o=xG(t),s=yG(o);if(s)throw new Error("Canvas is already in use. Chart with ID '"+s.id+"' must be destroyed before the canvas with ID '"+s.canvas.id+"' can be reused.");let i=r.createResolver(r.chartOptionScopes(),this.getContext());this.platform=new(r.platform||gbe(o)),this.platform.updateConfig(r);let a=this.platform.acquireContext(o,i.aspectRatio),l=a&&a.canvas,c=l&&l.height,u=l&&l.width;if(this.id=F4(),this.ctx=a,this.canvas=l,this.width=u,this.height=c,this._options=i,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new d2,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=H4(p=>this.update(p),i.resizeDelay||0),this._dataChanges=[],$S[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}zc.listen(this,"complete",$j),zc.listen(this,"progress",_be),this._initialize(),this.attached&&this.update()}get aspectRatio(){let{options:{aspectRatio:t,maintainAspectRatio:e},width:r,height:o,_aspectRatio:s}=this;return Ht(t)?e&&s?s:o?r/o:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():qR(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return BR(this.canvas,this.ctx),this}stop(){return zc.stop(this),this}resize(t,e){zc.running(this)?this._resizeBeforeDraw={width:t,height:e}:this._resize(t,e)}_resize(t,e){let r=this.options,o=this.canvas,s=r.maintainAspectRatio&&this.aspectRatio,i=this.platform.getMaximumSize(o,t,e,s),a=r.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=i.width,this.height=i.height,this._aspectRatio=this.aspectRatio,qR(this,a,!0)&&(this.notifyPlugins("resize",{size:i}),Ln(r.onResize,[this,i],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){let e=this.options.scales||{};gn(e,(r,o)=>{r.id=o})}buildOrUpdateScales(){let t=this.options,e=t.scales,r=this.scales,o=Object.keys(r).reduce((i,a)=>(i[a]=!1,i),{}),s=[];e&&(s=s.concat(Object.keys(e).map(i=>{let a=e[i],l=m2(i,a),c=l==="r",u=l==="x";return{options:a,dposition:c?"chartArea":u?"bottom":"left",dtype:c?"radialLinear":u?"category":"linear"}}))),gn(s,i=>{let a=i.options,l=a.id,c=m2(l,a),u=St(a.type,i.dtype);(a.position===void 0||Fj(a.position,c)!==Fj(i.dposition))&&(a.position=i.dposition),o[l]=!0;let p=null;if(l in r&&r[l].type===u)p=r[l];else{let f=ol.getScale(u);p=new f({id:l,type:u,ctx:this.ctx,chart:this}),r[p.id]=p}p.init(a,t)}),gn(o,(i,a)=>{i||delete r[a]}),gn(r,i=>{Ao.configure(this,i,i.options),Ao.addBox(this,i)})}_updateMetasets(){let t=this._metasets,e=this.data.datasets.length,r=t.length;if(t.sort((o,s)=>o.index-s.index),r>e){for(let o=e;o<r;++o)this._destroyDatasetMeta(o);t.splice(e,r-e)}this._sortedMetasets=t.slice(0).sort(Pj("order","index"))}_removeUnreferencedMetasets(){let{_metasets:t,data:{datasets:e}}=this;t.length>e.length&&delete this._stacks,t.forEach((r,o)=>{e.filter(s=>s===r._dataset).length===0&&this._destroyDatasetMeta(o)})}buildOrUpdateControllers(){let t=[],e=this.data.datasets,r,o;for(this._removeUnreferencedMetasets(),r=0,o=e.length;r<o;r++){let s=e[r],i=this.getDatasetMeta(r),a=s.type||this.config.type;if(i.type&&i.type!==a&&(this._destroyDatasetMeta(r),i=this.getDatasetMeta(r)),i.type=a,i.indexAxis=s.indexAxis||h2(a,this.options),i.order=s.order||0,i.index=r,i.label=""+s.label,i.visible=this.isDatasetVisible(r),i.controller)i.controller.updateIndex(r),i.controller.linkScales();else{let l=ol.getController(a),{datasetElementType:c,dataElementType:u}=Mt.datasets[a];Object.assign(l.prototype,{dataElementType:ol.getElement(u),datasetElementType:c&&ol.getElement(c)}),i.controller=new l(this,r),t.push(i.controller)}}return this._updateMetasets(),t}_resetElements(){gn(this.data.datasets,(t,e)=>{this.getDatasetMeta(e).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){let e=this.config;e.update();let r=this._options=e.createResolver(e.chartOptionScopes(),this.getContext()),o=this._animationsDisabled=!r.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;let s=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let i=0;for(let c=0,u=this.data.datasets.length;c<u;c++){let{controller:p}=this.getDatasetMeta(c),f=!o&&s.indexOf(p)===-1;p.buildOrUpdateElements(f),i=Math.max(+p.getMaxOverflow(),i)}i=this._minPadding=r.layout.autoPadding?i:0,this._updateLayout(i),o||gn(s,c=>{c.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(Pj("z","_idx"));let{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){gn(this.scales,t=>{Ao.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){let t=this.options,e=new Set(Object.keys(this._listeners)),r=new Set(t.events);(!SR(e,r)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){let{_hiddenIndices:t}=this,e=this._getUniformDataChanges()||[];for(let{method:r,start:o,count:s}of e){let i=r==="_removeElements"?-s:s;Abe(t,o,i)}}_getUniformDataChanges(){let t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];let e=this.data.datasets.length,r=s=>new Set(t.filter(i=>i[0]===s).map((i,a)=>a+","+i.splice(1).join(","))),o=r(0);for(let s=1;s<e;s++)if(!SR(o,r(s)))return;return Array.from(o).map(s=>s.split(",")).map(s=>({method:s[1],start:+s[2],count:+s[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Ao.update(this,this.width,this.height,t);let e=this.chartArea,r=e.width<=0||e.height<=0;this._layers=[],gn(this.boxes,o=>{r&&o.position==="chartArea"||(o.configure&&o.configure(),this._layers.push(...o._layers()))},this),this._layers.forEach((o,s)=>{o._idx=s}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let e=0,r=this.data.datasets.length;e<r;++e)this.getDatasetMeta(e).controller.configure();for(let e=0,r=this.data.datasets.length;e<r;++e)this._updateDataset(e,$c(t)?t({datasetIndex:e}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,e){let r=this.getDatasetMeta(t),o={meta:r,index:t,mode:e,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",o)!==!1&&(r.controller._update(e),o.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",o))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(zc.has(this)?this.attached&&!zc.running(this)&&zc.start(this):(this.draw(),$j({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){let{width:r,height:o}=this._resizeBeforeDraw;this._resize(r,o),this._resizeBeforeDraw=null}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;let e=this._layers;for(t=0;t<e.length&&e[t].z<=0;++t)e[t].draw(this.chartArea);for(this._drawDatasets();t<e.length;++t)e[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){let e=this._sortedMetasets,r=[],o,s;for(o=0,s=e.length;o<s;++o){let i=e[o];(!t||i.visible)&&r.push(i)}return r}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;let t=this.getSortedVisibleDatasetMetas();for(let e=t.length-1;e>=0;--e)this._drawDataset(t[e]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){let e=this.ctx,r=t._clip,o=!r.disabled,s=this.chartArea,i={meta:t,index:t.index,cancelable:!0};this.notifyPlugins("beforeDatasetDraw",i)!==!1&&(o&&rv(e,{left:r.left===!1?0:s.left-r.left,right:r.right===!1?this.width:s.right+r.right,top:r.top===!1?0:s.top-r.top,bottom:r.bottom===!1?this.height:s.bottom+r.bottom}),t.controller.draw(),o&&ov(e),i.cancelable=!1,this.notifyPlugins("afterDatasetDraw",i))}isPointInArea(t){return Yg(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,e,r,o){let s=Zye.modes[e];return typeof s=="function"?s(this,t,r,o):[]}getDatasetMeta(t){let e=this.data.datasets[t],r=this._metasets,o=r.filter(s=>s&&s._dataset===e).pop();return o||(o={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:e&&e.order||0,index:t,_dataset:e,_parsed:[],_sorted:!1},r.push(o)),o}getContext(){return this.$context||(this.$context=Bc(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){let e=this.data.datasets[t];if(!e)return!1;let r=this.getDatasetMeta(t);return typeof r.hidden=="boolean"?!r.hidden:!e.hidden}setDatasetVisibility(t,e){let r=this.getDatasetMeta(t);r.hidden=!e}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,e,r){let o=r?"show":"hide",s=this.getDatasetMeta(t),i=s.controller._resolveAnimations(void 0,o);Vs(e)?(s.data[e].hidden=!r,this.update()):(this.setDatasetVisibility(t,r),i.update(s,{visible:r}),this.update(a=>a.datasetIndex===t?o:void 0))}hide(t,e){this._updateVisibility(t,e,!1)}show(t,e){this._updateVisibility(t,e,!0)}_destroyDatasetMeta(t){let e=this._metasets[t];e&&e.controller&&e.controller._destroy(),delete this._metasets[t]}_stop(){let t,e;for(this.stop(),zc.remove(this),t=0,e=this.data.datasets.length;t<e;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");let{canvas:t,ctx:e}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),BR(t,e),this.platform.releaseContext(e),this.canvas=null,this.ctx=null),this.notifyPlugins("destroy"),delete $S[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){let t=this._listeners,e=this.platform,r=(s,i)=>{e.addEventListener(this,s,i),t[s]=i},o=(s,i,a)=>{s.offsetX=i,s.offsetY=a,this._eventHandler(s)};gn(this.options.events,s=>r(s,o))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});let t=this._responsiveListeners,e=this.platform,r=(l,c)=>{e.addEventListener(this,l,c),t[l]=c},o=(l,c)=>{t[l]&&(e.removeEventListener(this,l,c),delete t[l])},s=(l,c)=>{this.canvas&&this.resize(l,c)},i,a=()=>{o("attach",a),this.attached=!0,this.resize(),r("resize",s),r("detach",i)};i=()=>{this.attached=!1,o("resize",s),this._stop(),this._resize(0,0),r("attach",a)},e.isAttached(this.canvas)?a():i()}unbindEvents(){gn(this._listeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._listeners={},gn(this._responsiveListeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,e,r){let o=r?"set":"remove",s,i,a,l;for(e==="dataset"&&(s=this.getDatasetMeta(t[0].datasetIndex),s.controller["_"+o+"DatasetHoverStyle"]()),a=0,l=t.length;a<l;++a){i=t[a];let c=i&&this.getDatasetMeta(i.datasetIndex).controller;c&&c[o+"HoverStyle"](i.element,i.datasetIndex,i.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){let e=this._active||[],r=t.map(({datasetIndex:s,index:i})=>{let a=this.getDatasetMeta(s);if(!a)throw new Error("No dataset found at index "+s);return{datasetIndex:s,element:a.data[i],index:i}});!tv(r,e)&&(this._active=r,this._lastEvent=null,this._updateHoverStyles(r,e))}notifyPlugins(t,e,r){return this._plugins.notify(this,t,e,r)}_updateHoverStyles(t,e,r){let o=this.options.hover,s=(l,c)=>l.filter(u=>!c.some(p=>u.datasetIndex===p.datasetIndex&&u.index===p.index)),i=s(e,t),a=r?t:s(t,e);i.length&&this.updateHoverStyle(i,o.mode,!1),a.length&&o.mode&&this.updateHoverStyle(a,o.mode,!0)}_eventHandler(t,e){let r={event:t,replay:e,cancelable:!0,inChartArea:this.isPointInArea(t)},o=i=>(i.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",r,o)===!1)return;let s=this._handleEvent(t,e,r.inChartArea);return r.cancelable=!1,this.notifyPlugins("afterEvent",r,o),(s||r.changed)&&this.render(),this}_handleEvent(t,e,r){let{_active:o=[],options:s}=this,i=e,a=this._getActiveElements(t,o,r,i),l=L4(t),c=Rbe(t,this._lastEvent,r,l);r&&(this._lastEvent=null,Ln(s.onHover,[t,a,this],this),l&&Ln(s.onClick,[t,a,this],this));let u=!tv(a,o);return(u||e)&&(this._active=a,this._updateHoverStyles(a,o,e)),this._lastEvent=c,u}_getActiveElements(t,e,r,o){if(t.type==="mouseout")return[];if(!r)return e;let s=this.options.hover;return this.getElementsAtEventForMode(t,s.mode,s,o)}},Lj=()=>gn(Ld.instances,n=>n._plugins.invalidate()),jp=!0;Object.defineProperties(Ld,{defaults:{enumerable:jp,value:Mt},instances:{enumerable:jp,value:$S},overrides:{enumerable:jp,value:Lp},registry:{enumerable:jp,value:ol},version:{enumerable:jp,value:Dbe},getChart:{enumerable:jp,value:yG},register:{enumerable:jp,value:(...n)=>{ol.add(...n),Lj()}},unregister:{enumerable:jp,value:(...n)=>{ol.remove(...n),Lj()}}});function bG(n,t,e){let{startAngle:r,pixelMargin:o,x:s,y:i,outerRadius:a,innerRadius:l}=t,c=o/a;n.beginPath(),n.arc(s,i,a,r-c,e+c),l>o?(c=o/l,n.arc(s,i,l,e+c,r-c,!0)):n.arc(s,i,o,e+ur,r-ur),n.closePath(),n.clip()}function Mbe(n){return IS(n,["outerStart","outerEnd","innerStart","innerEnd"])}function Obe(n,t,e,r){let o=Mbe(n.options.borderRadius),s=(e-t)/2,i=Math.min(s,r*t/2),a=l=>{let c=(e-Math.min(s,l))*r/2;return Hr(l,0,Math.min(s,c))};return{outerStart:a(o.outerStart),outerEnd:a(o.outerEnd),innerStart:Hr(o.innerStart,0,i),innerEnd:Hr(o.innerEnd,0,i)}}function ox(n,t,e,r){return{x:e+n*Math.cos(t),y:r+n*Math.sin(t)}}function x2(n,t,e,r,o,s){let{x:i,y:a,startAngle:l,pixelMargin:c,innerRadius:u}=t,p=Math.max(t.outerRadius+r+e-c,0),f=u>0?u+r+e+c:0,d=0,h=o-l;if(r){let te=u>0?u-r:0,ie=p>0?p-r:0,le=(te+ie)/2,pe=le!==0?h*le/(le+r):h;d=(h-pe)/2}let m=Math.max(.001,h*p-e/Zn)/p,g=(h-m)/2,x=l+g+d,b=o-g-d,{outerStart:w,outerEnd:v,innerStart:S,innerEnd:k}=Obe(t,f,p,b-x),A=p-w,$=p-v,L=x+w/A,z=b-v/$,W=f+S,Q=f+k,ne=x+S/W,se=b-k/Q;if(n.beginPath(),s){if(n.arc(i,a,p,L,z),v>0){let le=ox($,z,i,a);n.arc(le.x,le.y,v,z,b+ur)}let te=ox(Q,b,i,a);if(n.lineTo(te.x,te.y),k>0){let le=ox(Q,se,i,a);n.arc(le.x,le.y,k,b+ur,se+Math.PI)}if(n.arc(i,a,f,b-k/f,x+S/f,!0),S>0){let le=ox(W,ne,i,a);n.arc(le.x,le.y,S,ne+Math.PI,x-ur)}let ie=ox(A,x,i,a);if(n.lineTo(ie.x,ie.y),w>0){let le=ox(A,L,i,a);n.arc(le.x,le.y,w,x-ur,L)}}else{n.moveTo(i,a);let te=Math.cos(L)*p+i,ie=Math.sin(L)*p+a;n.lineTo(te,ie);let le=Math.cos(z)*p+i,pe=Math.sin(z)*p+a;n.lineTo(le,pe)}n.closePath()}function Fbe(n,t,e,r,o){let{fullCircles:s,startAngle:i,circumference:a}=t,l=t.endAngle;if(s){x2(n,t,e,r,i+wn,o);for(let c=0;c<s;++c)n.fill();isNaN(a)||(l=i+a%wn,a%wn===0&&(l+=wn))}return x2(n,t,e,r,l,o),n.fill(),l}function Pbe(n,t,e){let{x:r,y:o,startAngle:s,pixelMargin:i,fullCircles:a}=t,l=Math.max(t.outerRadius-i,0),c=t.innerRadius+i,u;for(e&&bG(n,t,s+wn),n.beginPath(),n.arc(r,o,c,s+wn,s,!0),u=0;u<a;++u)n.stroke();for(n.beginPath(),n.arc(r,o,l,s,s+wn),u=0;u<a;++u)n.stroke()}function $be(n,t,e,r,o,s){let{options:i}=t,{borderWidth:a,borderJoinStyle:l}=i,c=i.borderAlign==="inner";a&&(c?(n.lineWidth=a*2,n.lineJoin=l||"round"):(n.lineWidth=a,n.lineJoin=l||"bevel"),t.fullCircles&&Pbe(n,t,c),c&&bG(n,t,o),x2(n,t,e,r,o,s),n.stroke())}var ix=class extends Gs{constructor(t){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,t&&Object.assign(this,t)}inRange(t,e,r){let o=this.getProps(["x","y"],r),{angle:s,distance:i}=DR(o,{x:t,y:e}),{startAngle:a,endAngle:l,innerRadius:c,outerRadius:u,circumference:p}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],r),f=this.options.spacing/2,h=St(p,l-a)>=wn||ex(s,a,l),m=nl(i,c+f,u+f);return h&&m}getCenterPoint(t){let{x:e,y:r,startAngle:o,endAngle:s,innerRadius:i,outerRadius:a}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius","circumference"],t),{offset:l,spacing:c}=this.options,u=(o+s)/2,p=(i+a+c+l)/2;return{x:e+Math.cos(u)*p,y:r+Math.sin(u)*p}}tooltipPosition(t){return this.getCenterPoint(t)}draw(t){let{options:e,circumference:r}=this,o=(e.offset||0)/2,s=(e.spacing||0)/2,i=e.circular;if(this.pixelMargin=e.borderAlign==="inner"?.33:0,this.fullCircles=r>wn?Math.floor(r/wn):0,r===0||this.innerRadius<0||this.outerRadius<0)return;t.save();let a=0;if(o){a=o/2;let c=(this.startAngle+this.endAngle)/2;t.translate(Math.cos(c)*a,Math.sin(c)*a),this.circumference>=Zn&&(a=o)}t.fillStyle=e.backgroundColor,t.strokeStyle=e.borderColor;let l=Fbe(t,this,a,s,i);$be(t,this,a,s,l,i),t.restore()}};ix.id="arc";ix.defaults={borderAlign:"center",borderColor:"#fff",borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0};ix.defaultRoutes={backgroundColor:"backgroundColor"};function vG(n,t,e=t){n.lineCap=St(e.borderCapStyle,t.borderCapStyle),n.setLineDash(St(e.borderDash,t.borderDash)),n.lineDashOffset=St(e.borderDashOffset,t.borderDashOffset),n.lineJoin=St(e.borderJoinStyle,t.borderJoinStyle),n.lineWidth=St(e.borderWidth,t.borderWidth),n.strokeStyle=St(e.borderColor,t.borderColor)}function Lbe(n,t,e){n.lineTo(e.x,e.y)}function Bbe(n){return n.stepped?ej:n.tension||n.cubicInterpolationMode==="monotone"?tj:Lbe}function wG(n,t,e={}){let r=n.length,{start:o=0,end:s=r-1}=e,{start:i,end:a}=t,l=Math.max(o,i),c=Math.min(s,a),u=o<i&&s<i||o>a&&s>a;return{count:r,start:l,loop:t.loop,ilen:c<l&&!u?r+c-l:c-l}}function zbe(n,t,e,r){let{points:o,options:s}=t,{count:i,start:a,loop:l,ilen:c}=wG(o,e,r),u=Bbe(s),{move:p=!0,reverse:f}=r||{},d,h,m;for(d=0;d<=c;++d)h=o[(a+(f?c-d:d))%i],!h.skip&&(p?(n.moveTo(h.x,h.y),p=!1):u(n,m,h,f,s.stepped),m=h);return l&&(h=o[(a+(f?c:0))%i],u(n,m,h,f,s.stepped)),!!l}function Vbe(n,t,e,r){let o=t.points,{count:s,start:i,ilen:a}=wG(o,e,r),{move:l=!0,reverse:c}=r||{},u=0,p=0,f,d,h,m,g,x,b=v=>(i+(c?a-v:v))%s,w=()=>{m!==g&&(n.lineTo(u,g),n.lineTo(u,m),n.lineTo(u,x))};for(l&&(d=o[b(0)],n.moveTo(d.x,d.y)),f=0;f<=a;++f){if(d=o[b(f)],d.skip)continue;let v=d.x,S=d.y,k=v|0;k===h?(S<m?m=S:S>g&&(g=S),u=(p*u+v)/++p):(w(),n.lineTo(v,S),h=k,p=0,m=g=S),x=S}w()}function y2(n){let t=n.options,e=t.borderDash&&t.borderDash.length;return!n._decimated&&!n._loop&&!t.tension&&t.cubicInterpolationMode!=="monotone"&&!t.stepped&&!e?Vbe:zbe}function Ube(n){return n.stepped?uj:n.tension||n.cubicInterpolationMode==="monotone"?pj:Fp}function jbe(n,t,e,r){let o=t._path;o||(o=t._path=new Path2D,t.path(o,e,r)&&o.closePath()),vG(n,t.options),n.stroke(o)}function Gbe(n,t,e,r){let{segments:o,options:s}=t,i=y2(t);for(let a of o)vG(n,s,a.style),n.beginPath(),i(n,t,a,{start:e,end:e+r-1})&&n.closePath(),n.stroke()}var Wbe=typeof Path2D=="function";function Hbe(n,t,e,r){Wbe&&!t.options.segment?jbe(n,t,e,r):Gbe(n,t,e,r)}var VS=(()=>{class n extends Gs{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,r){let o=this.options;if((o.tension||o.cubicInterpolationMode==="monotone")&&!o.stepped&&!this._pointsUpdated){let s=o.spanGaps?this._loop:this._fullLoop;aj(this._points,o,e,s,r),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=dj(this,this.options.segment))}first(){let e=this.segments,r=this.points;return e.length&&r[e[0].start]}last(){let e=this.segments,r=this.points,o=e.length;return o&&r[e[o-1].end]}interpolate(e,r){let o=this.options,s=e[r],i=this.points,a=QR(this,{property:r,start:s,end:s});if(!a.length)return;let l=[],c=Ube(o),u,p;for(u=0,p=a.length;u<p;++u){let{start:f,end:d}=a[u],h=i[f],m=i[d];if(h===m){l.push(h);continue}let g=Math.abs((s-h[r])/(m[r]-h[r])),x=c(h,m,g,o.stepped);x[r]=e[r],l.push(x)}return l.length===1?l[0]:l}pathSegment(e,r,o){return y2(this)(e,this,r,o)}path(e,r,o){let s=this.segments,i=y2(this),a=this._loop;r=r||0,o=o||this.points.length-r;for(let l of s)a&=i(e,this,l,{start:r,end:r+o-1});return!!a}draw(e,r,o,s){let i=this.options||{};(this.points||[]).length&&i.borderWidth&&(e.save(),Hbe(e,this,o,s),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}return n.id="line",n.defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0},n.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"},n.descriptors={_scriptable:!0,_indexable:t=>t!=="borderDash"&&t!=="fill"},n})();function Bj(n,t,e,r){let o=n.options,{[e]:s}=n.getProps([e],r);return Math.abs(t-s)<o.radius+o.hitRadius}var qbe=(()=>{class n extends Gs{constructor(e){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,r,o){let s=this.options,{x:i,y:a}=this.getProps(["x","y"],o);return Math.pow(e-i,2)+Math.pow(r-a,2)<Math.pow(s.hitRadius+s.radius,2)}inXRange(e,r){return Bj(this,e,"x",r)}inYRange(e,r){return Bj(this,e,"y",r)}getCenterPoint(e){let{x:r,y:o}=this.getProps(["x","y"],e);return{x:r,y:o}}size(e){e=e||this.options||{};let r=e.radius||0;r=Math.max(r,r&&e.hoverRadius||0);let o=r&&e.borderWidth||0;return(r+o)*2}draw(e,r){let o=this.options;this.skip||o.radius<.1||!Yg(this,r,this.size(o)/2)||(e.strokeStyle=o.borderColor,e.lineWidth=o.borderWidth,e.fillStyle=o.backgroundColor,CS(e,o,this.x,this.y))}getRange(){let e=this.options||{};return e.radius+e.hitRadius}}return n.id="point",n.defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0},n.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"},n})();function CG(n,t){let{x:e,y:r,base:o,width:s,height:i}=n.getProps(["x","y","base","width","height"],t),a,l,c,u,p;return n.horizontal?(p=i/2,a=Math.min(e,o),l=Math.max(e,o),c=r-p,u=r+p):(p=s/2,a=e-p,l=e+p,c=Math.min(r,o),u=Math.max(r,o)),{left:a,top:c,right:l,bottom:u}}function Gp(n,t,e,r){return n?0:Hr(t,e,r)}function Kbe(n,t,e){let r=n.options.borderWidth,o=n.borderSkipped,s=VR(r);return{t:Gp(o.top,s.top,0,e),r:Gp(o.right,s.right,0,t),b:Gp(o.bottom,s.bottom,0,e),l:Gp(o.left,s.left,0,t)}}function Xbe(n,t,e){let{enableBorderRadius:r}=n.getProps(["enableBorderRadius"]),o=n.options.borderRadius,s=Vp(o),i=Math.min(t,e),a=n.borderSkipped,l=r||Lt(o);return{topLeft:Gp(!l||a.top||a.left,s.topLeft,0,i),topRight:Gp(!l||a.top||a.right,s.topRight,0,i),bottomLeft:Gp(!l||a.bottom||a.left,s.bottomLeft,0,i),bottomRight:Gp(!l||a.bottom||a.right,s.bottomRight,0,i)}}function Ybe(n){let t=CG(n),e=t.right-t.left,r=t.bottom-t.top,o=Kbe(n,e/2,r/2),s=Xbe(n,e/2,r/2);return{outer:{x:t.left,y:t.top,w:e,h:r,radius:s},inner:{x:t.left+o.l,y:t.top+o.t,w:e-o.l-o.r,h:r-o.t-o.b,radius:{topLeft:Math.max(0,s.topLeft-Math.max(o.t,o.l)),topRight:Math.max(0,s.topRight-Math.max(o.t,o.r)),bottomLeft:Math.max(0,s.bottomLeft-Math.max(o.b,o.l)),bottomRight:Math.max(0,s.bottomRight-Math.max(o.b,o.r))}}}}function s2(n,t,e,r){let o=t===null,s=e===null,a=n&&!(o&&s)&&CG(n,r);return a&&(o||nl(t,a.left,a.right))&&(s||nl(e,a.top,a.bottom))}function Zbe(n){return n.topLeft||n.topRight||n.bottomLeft||n.bottomRight}function Qbe(n,t){n.rect(t.x,t.y,t.w,t.h)}function i2(n,t,e={}){let r=n.x!==e.x?-t:0,o=n.y!==e.y?-t:0,s=(n.x+n.w!==e.x+e.w?t:0)-r,i=(n.y+n.h!==e.y+e.h?t:0)-o;return{x:n.x+r,y:n.y+o,w:n.w+s,h:n.h+i,radius:n.radius}}var ax=class extends Gs{constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){let{inflateAmount:e,options:{borderColor:r,backgroundColor:o}}=this,{inner:s,outer:i}=Ybe(this),a=Zbe(i.radius)?tx:Qbe;t.save(),(i.w!==s.w||i.h!==s.h)&&(t.beginPath(),a(t,i2(i,e,s)),t.clip(),a(t,i2(s,-e,i)),t.fillStyle=r,t.fill("evenodd")),t.beginPath(),a(t,i2(s,e)),t.fillStyle=o,t.fill(),t.restore()}inRange(t,e,r){return s2(this,t,e,r)}inXRange(t,e){return s2(this,t,null,e)}inYRange(t,e){return s2(this,null,t,e)}getCenterPoint(t){let{x:e,y:r,base:o,horizontal:s}=this.getProps(["x","y","base","horizontal"],t);return{x:s?(e+o)/2:e,y:s?r:(r+o)/2}}getRange(t){return t==="x"?this.width/2:this.height/2}};ax.id="bar";ax.defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};ax.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};var Jbe=Object.freeze({__proto__:null,ArcElement:ix,LineElement:VS,PointElement:qbe,BarElement:ax});function eve(n,t,e,r,o){let s=o.samples||r;if(s>=e)return n.slice(t,t+e);let i=[],a=(e-2)/(s-2),l=0,c=t+e-1,u=t,p,f,d,h,m;for(i[l++]=n[u],p=0;p<s-2;p++){let g=0,x=0,b,w=Math.floor((p+1)*a)+1+t,v=Math.min(Math.floor((p+2)*a)+1,e)+t,S=v-w;for(b=w;b<v;b++)g+=n[b].x,x+=n[b].y;g/=S,x/=S;let k=Math.floor(p*a)+1+t,A=Math.min(Math.floor((p+1)*a)+1,e)+t,{x:$,y:L}=n[u];for(d=h=-1,b=k;b<A;b++)h=.5*Math.abs(($-g)*(n[b].y-L)-($-n[b].x)*(x-L)),h>d&&(d=h,f=n[b],m=b);i[l++]=f,u=m}return i[l++]=n[c],i}function tve(n,t,e,r){let o=0,s=0,i,a,l,c,u,p,f,d,h,m,g=[],x=t+e-1,b=n[t].x,v=n[x].x-b;for(i=t;i<t+e;++i){a=n[i],l=(a.x-b)/v*r,c=a.y;let S=l|0;if(S===u)c<h?(h=c,p=i):c>m&&(m=c,f=i),o=(s*o+a.x)/++s;else{let k=i-1;if(!Ht(p)&&!Ht(f)){let A=Math.min(p,f),$=Math.max(p,f);A!==d&&A!==k&&g.push(lr(Ge({},n[A]),{x:o})),$!==d&&$!==k&&g.push(lr(Ge({},n[$]),{x:o}))}i>0&&k!==d&&g.push(n[k]),g.push(a),u=S,s=0,h=m=c,p=f=d=i}}return g}function IG(n){if(n._decimated){let t=n._data;delete n._decimated,delete n._data,Object.defineProperty(n,"data",{value:t})}}function zj(n){n.data.datasets.forEach(t=>{IG(t)})}function nve(n,t){let e=t.length,r=0,o,{iScale:s}=n,{min:i,max:a,minDefined:l,maxDefined:c}=s.getUserBounds();return l&&(r=Hr(el(t,s.axis,i).lo,0,e-1)),c?o=Hr(el(t,s.axis,a).hi+1,r,e)-r:o=e-r,{start:r,count:o}}var rve={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(n,t,e)=>{if(!e.enabled){zj(n);return}let r=n.width;n.data.datasets.forEach((o,s)=>{let{_data:i,indexAxis:a}=o,l=n.getDatasetMeta(s),c=i||o.data;if(nx([a,n.options.indexAxis])==="y"||!l.controller.supportsDecimation)return;let u=n.scales[l.xAxisID];if(u.type!=="linear"&&u.type!=="time"||n.options.parsing)return;let{start:p,count:f}=nve(l,c),d=e.threshold||4*r;if(f<=d){IG(o);return}Ht(i)&&(o._data=c,delete o.data,Object.defineProperty(o,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(m){this._data=m}}));let h;switch(e.algorithm){case"lttb":h=eve(c,p,f,r,e);break;case"min-max":h=tve(c,p,f,r);break;default:throw new Error(`Unsupported decimation algorithm '${e.algorithm}'`)}o._decimated=h})},destroy(n){zj(n)}};function ove(n,t,e){let r=n.segments,o=n.points,s=t.points,i=[];for(let a of r){let{start:l,end:c}=a;c=w2(l,c,o);let u=b2(e,o[l],o[c],a.loop);if(!t.segments){i.push({source:a,target:u,start:o[l],end:o[c]});continue}let p=QR(t,u);for(let f of p){let d=b2(e,s[f.start],s[f.end],f.loop),h=ZR(a,o,d);for(let m of h)i.push({source:m,target:f,start:{[e]:Vj(u,d,"start",Math.max)},end:{[e]:Vj(u,d,"end",Math.min)}})}}return i}function b2(n,t,e,r){if(r)return;let o=t[n],s=e[n];return n==="angle"&&(o=vs(o),s=vs(s)),{property:n,start:o,end:s}}function sve(n,t){let{x:e=null,y:r=null}=n||{},o=t.points,s=[];return t.segments.forEach(({start:i,end:a})=>{a=w2(i,a,o);let l=o[i],c=o[a];r!==null?(s.push({x:l.x,y:r}),s.push({x:c.x,y:r})):e!==null&&(s.push({x:e,y:l.y}),s.push({x:e,y:c.y}))}),s}function w2(n,t,e){for(;t>n;t--){let r=e[t];if(!isNaN(r.x)&&!isNaN(r.y))break}return t}function Vj(n,t,e,r){return n&&t?r(n[e],t[e]):n?n[e]:t?t[e]:0}function SG(n,t){let e=[],r=!1;return $n(n)?(r=!0,e=n):e=sve(n,t),e.length?new VS({points:e,options:{tension:0},_loop:r,_fullLoop:r}):null}function Uj(n){return n&&n.fill!==!1}function ive(n,t,e){let o=n[t].fill,s=[t],i;if(!e)return o;for(;o!==!1&&s.indexOf(o)===-1;){if(!xr(o))return o;if(i=n[o],!i)return!1;if(i.visible)return o;s.push(o),o=i.fill}return!1}function ave(n,t,e){let r=pve(n);if(Lt(r))return isNaN(r.value)?!1:r;let o=parseFloat(r);return xr(o)&&Math.floor(o)===o?lve(r[0],t,o,e):["origin","start","end","stack","shape"].indexOf(r)>=0&&r}function lve(n,t,e,r){return(n==="-"||n==="+")&&(e=t+e),e===t||e<0||e>=r?!1:e}function cve(n,t){let e=null;return n==="start"?e=t.bottom:n==="end"?e=t.top:Lt(n)?e=t.getPixelForValue(n.value):t.getBasePixel&&(e=t.getBasePixel()),e}function uve(n,t,e){let r;return n==="start"?r=e:n==="end"?r=t.options.reverse?t.min:t.max:Lt(n)?r=n.value:r=t.getBaseValue(),r}function pve(n){let t=n.options,e=t.fill,r=St(e&&e.target,e);return r===void 0&&(r=!!t.backgroundColor),r===!1||r===null?!1:r===!0?"origin":r}function fve(n){let{scale:t,index:e,line:r}=n,o=[],s=r.segments,i=r.points,a=dve(t,e);a.push(SG({x:null,y:t.bottom},r));for(let l=0;l<s.length;l++){let c=s[l];for(let u=c.start;u<=c.end;u++)hve(o,i[u],a)}return new VS({points:o,options:{}})}function dve(n,t){let e=[],r=n.getMatchingVisibleMetas("line");for(let o=0;o<r.length;o++){let s=r[o];if(s.index===t)break;s.hidden||e.unshift(s.dataset)}return e}function hve(n,t,e){let r=[];for(let o=0;o<e.length;o++){let s=e[o],{first:i,last:a,point:l}=mve(s,t,"x");if(!(!l||i&&a)){if(i)r.unshift(l);else if(n.push(l),!a)break}}n.push(...r)}function mve(n,t,e){let r=n.interpolate(t,e);if(!r)return{};let o=r[e],s=n.segments,i=n.points,a=!1,l=!1;for(let c=0;c<s.length;c++){let u=s[c],p=i[u.start][e],f=i[u.end][e];if(nl(o,p,f)){a=o===p,l=o===f;break}}return{first:a,last:l,point:r}}var LS=class{constructor(t){this.x=t.x,this.y=t.y,this.radius=t.radius}pathSegment(t,e,r){let{x:o,y:s,radius:i}=this;return e=e||{start:0,end:wn},t.arc(o,s,i,e.end,e.start,!0),!r.bounds}interpolate(t){let{x:e,y:r,radius:o}=this,s=t.angle;return{x:e+Math.cos(s)*o,y:r+Math.sin(s)*o,angle:s}}};function gve(n){let{chart:t,fill:e,line:r}=n;if(xr(e))return xve(t,e);if(e==="stack")return fve(n);if(e==="shape")return!0;let o=yve(n);return o instanceof LS?o:SG(o,r)}function xve(n,t){let e=n.getDatasetMeta(t);return e&&n.isDatasetVisible(t)?e.dataset:null}function yve(n){return(n.scale||{}).getPointPositionForValue?vve(n):bve(n)}function bve(n){let{scale:t={},fill:e}=n,r=cve(e,t);if(xr(r)){let o=t.isHorizontal();return{x:o?r:null,y:o?null:r}}return null}function vve(n){let{scale:t,fill:e}=n,r=t.options,o=t.getLabels().length,s=r.reverse?t.max:t.min,i=uve(e,t,s),a=[];if(r.grid.circular){let l=t.getPointPositionForValue(0,s);return new LS({x:l.x,y:l.y,radius:t.getDistanceFromCenterForValue(i)})}for(let l=0;l<o;++l)a.push(t.getPointPositionForValue(l,i));return a}function a2(n,t,e){let r=gve(t),{line:o,scale:s,axis:i}=t,a=o.options,l=a.fill,c=a.backgroundColor,{above:u=c,below:p=c}=l||{};r&&o.points.length&&(rv(n,e),wve(n,{line:o,target:r,above:u,below:p,area:e,scale:s,axis:i}),ov(n))}function wve(n,t){let{line:e,target:r,above:o,below:s,area:i,scale:a}=t,l=e._loop?"angle":t.axis;n.save(),l==="x"&&s!==o&&(jj(n,r,i.top),Gj(n,{line:e,target:r,color:o,scale:a,property:l}),n.restore(),n.save(),jj(n,r,i.bottom)),Gj(n,{line:e,target:r,color:s,scale:a,property:l}),n.restore()}function jj(n,t,e){let{segments:r,points:o}=t,s=!0,i=!1;n.beginPath();for(let a of r){let{start:l,end:c}=a,u=o[l],p=o[w2(l,c,o)];s?(n.moveTo(u.x,u.y),s=!1):(n.lineTo(u.x,e),n.lineTo(u.x,u.y)),i=!!t.pathSegment(n,a,{move:i}),i?n.closePath():n.lineTo(p.x,e)}n.lineTo(t.first().x,e),n.closePath(),n.clip()}function Gj(n,t){let{line:e,target:r,property:o,color:s,scale:i}=t,a=ove(e,r,o);for(let{source:l,target:c,start:u,end:p}of a){let{style:{backgroundColor:f=s}={}}=l,d=r!==!0;n.save(),n.fillStyle=f,Cve(n,i,d&&b2(o,u,p)),n.beginPath();let h=!!e.pathSegment(n,l),m;if(d){h?n.closePath():Wj(n,r,p,o);let g=!!r.pathSegment(n,c,{move:h,reverse:!0});m=h&&g,m||Wj(n,r,u,o)}n.closePath(),n.fill(m?"evenodd":"nonzero"),n.restore()}}function Cve(n,t,e){let{top:r,bottom:o}=t.chart.chartArea,{property:s,start:i,end:a}=e||{};s==="x"&&(n.beginPath(),n.rect(i,r,a-i,o-r),n.clip())}function Wj(n,t,e,r){let o=t.interpolate(e,r);o&&n.lineTo(o.x,o.y)}var Ive={id:"filler",afterDatasetsUpdate(n,t,e){let r=(n.data.datasets||[]).length,o=[],s,i,a,l;for(i=0;i<r;++i)s=n.getDatasetMeta(i),a=s.dataset,l=null,a&&a.options&&a instanceof VS&&(l={visible:n.isDatasetVisible(i),index:i,fill:ave(a,i,r),chart:n,axis:s.controller.options.indexAxis,scale:s.vScale,line:a}),s.$filler=l,o.push(l);for(i=0;i<r;++i)l=o[i],!(!l||l.fill===!1)&&(l.fill=ive(o,i,e.propagate))},beforeDraw(n,t,e){let r=e.drawTime==="beforeDraw",o=n.getSortedVisibleDatasetMetas(),s=n.chartArea;for(let i=o.length-1;i>=0;--i){let a=o[i].$filler;a&&(a.line.updateControlPoints(s,a.axis),r&&a.fill&&a2(n.ctx,a,s))}},beforeDatasetsDraw(n,t,e){if(e.drawTime!=="beforeDatasetsDraw")return;let r=n.getSortedVisibleDatasetMetas();for(let o=r.length-1;o>=0;--o){let s=r[o].$filler;Uj(s)&&a2(n.ctx,s,n.chartArea)}},beforeDatasetDraw(n,t,e){let r=t.meta.$filler;!Uj(r)||e.drawTime!=="beforeDatasetDraw"||a2(n.ctx,r,n.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}},Hj=(n,t)=>{let{boxHeight:e=t,boxWidth:r=t}=n;return n.usePointStyle&&(e=Math.min(e,t),r=n.pointStyleWidth||Math.min(r,t)),{boxWidth:r,boxHeight:e,itemHeight:Math.max(t,e)}},Sve=(n,t)=>n!==null&&t!==null&&n.datasetIndex===t.datasetIndex&&n.index===t.index,BS=class extends Gs{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e,r){this.maxWidth=t,this.maxHeight=e,this._margins=r,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){let t=this.options.labels||{},e=Ln(t.generateLabels,[this.chart],this)||[];t.filter&&(e=e.filter(r=>t.filter(r,this.chart.data))),t.sort&&(e=e.sort((r,o)=>t.sort(r,o,this.chart.data))),this.options.reverse&&e.reverse(),this.legendItems=e}fit(){let{options:t,ctx:e}=this;if(!t.display){this.width=this.height=0;return}let r=t.labels,o=Mr(r.font),s=o.size,i=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=Hj(r,s),c,u;e.font=o.string,this.isHorizontal()?(c=this.maxWidth,u=this._fitRows(i,s,a,l)+10):(u=this.maxHeight,c=this._fitCols(i,s,a,l)+10),this.width=Math.min(c,t.maxWidth||this.maxWidth),this.height=Math.min(u,t.maxHeight||this.maxHeight)}_fitRows(t,e,r,o){let{ctx:s,maxWidth:i,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],u=o+a,p=t;s.textAlign="left",s.textBaseline="middle";let f=-1,d=-u;return this.legendItems.forEach((h,m)=>{let g=r+e/2+s.measureText(h.text).width;(m===0||c[c.length-1]+g+2*a>i)&&(p+=u,c[c.length-(m>0?0:1)]=0,d+=u,f++),l[m]={left:0,top:d,row:f,width:g,height:o},c[c.length-1]+=g+a}),p}_fitCols(t,e,r,o){let{ctx:s,maxHeight:i,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],u=i-t,p=a,f=0,d=0,h=0,m=0;return this.legendItems.forEach((g,x)=>{let b=r+e/2+s.measureText(g.text).width;x>0&&d+o+2*a>u&&(p+=f+a,c.push({width:f,height:d}),h+=f+a,m++,f=d=0),l[x]={left:h,top:d,col:m,width:b,height:o},f=Math.max(f,b),d+=o+a}),p+=f,c.push({width:f,height:d}),p}adjustHitBoxes(){if(!this.options.display)return;let t=this._computeTitleHeight(),{legendHitBoxes:e,options:{align:r,labels:{padding:o},rtl:s}}=this,i=Fd(s,this.left,this.width);if(this.isHorizontal()){let a=0,l=bo(r,this.left+o,this.right-this.lineWidths[a]);for(let c of e)a!==c.row&&(a=c.row,l=bo(r,this.left+o,this.right-this.lineWidths[a])),c.top+=this.top+t+o,c.left=i.leftForLtr(i.x(l),c.width),l+=c.width+o}else{let a=0,l=bo(r,this.top+t+o,this.bottom-this.columnSizes[a].height);for(let c of e)c.col!==a&&(a=c.col,l=bo(r,this.top+t+o,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+o,c.left=i.leftForLtr(i.x(c.left),c.width),l+=c.height+o}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){let t=this.ctx;rv(t,this),this._draw(),ov(t)}}_draw(){let{options:t,columnSizes:e,lineWidths:r,ctx:o}=this,{align:s,labels:i}=t,a=Mt.color,l=Fd(t.rtl,this.left,this.width),c=Mr(i.font),{color:u,padding:p}=i,f=c.size,d=f/2,h;this.drawTitle(),o.textAlign=l.textAlign("left"),o.textBaseline="middle",o.lineWidth=.5,o.font=c.string;let{boxWidth:m,boxHeight:g,itemHeight:x}=Hj(i,f),b=function(A,$,L){if(isNaN(m)||m<=0||isNaN(g)||g<0)return;o.save();let z=St(L.lineWidth,1);if(o.fillStyle=St(L.fillStyle,a),o.lineCap=St(L.lineCap,"butt"),o.lineDashOffset=St(L.lineDashOffset,0),o.lineJoin=St(L.lineJoin,"miter"),o.lineWidth=z,o.strokeStyle=St(L.strokeStyle,a),o.setLineDash(St(L.lineDash,[])),i.usePointStyle){let W={radius:g*Math.SQRT2/2,pointStyle:L.pointStyle,rotation:L.rotation,borderWidth:z},Q=l.xPlus(A,m/2),ne=$+d;zR(o,W,Q,ne,i.pointStyleWidth&&m)}else{let W=$+Math.max((f-g)/2,0),Q=l.leftForLtr(A,m),ne=Vp(L.borderRadius);o.beginPath(),Object.values(ne).some(se=>se!==0)?tx(o,{x:Q,y:W,w:m,h:g,radius:ne}):o.rect(Q,W,m,g),o.fill(),z!==0&&o.stroke()}o.restore()},w=function(A,$,L){zp(o,L.text,A,$+x/2,c,{strikethrough:L.hidden,textAlign:l.textAlign(L.textAlign)})},v=this.isHorizontal(),S=this._computeTitleHeight();v?h={x:bo(s,this.left+p,this.right-r[0]),y:this.top+p+S,line:0}:h={x:this.left+p,y:bo(s,this.top+S+p,this.bottom-e[0].height),line:0},XR(this.ctx,t.textDirection);let k=x+p;this.legendItems.forEach((A,$)=>{o.strokeStyle=A.fontColor||u,o.fillStyle=A.fontColor||u;let L=o.measureText(A.text).width,z=l.textAlign(A.textAlign||(A.textAlign=i.textAlign)),W=m+d+L,Q=h.x,ne=h.y;l.setWidth(this.width),v?$>0&&Q+W+p>this.right&&(ne=h.y+=k,h.line++,Q=h.x=bo(s,this.left+p,this.right-r[h.line])):$>0&&ne+k>this.bottom&&(Q=h.x=Q+e[h.line].width+p,h.line++,ne=h.y=bo(s,this.top+S+p,this.bottom-e[h.line].height));let se=l.x(Q);b(se,ne,A),Q=q4(z,Q+m+d,v?Q+W:this.right,t.rtl),w(l.x(Q),ne,A),v?h.x+=W+p:h.y+=k}),YR(this.ctx,t.textDirection)}drawTitle(){let t=this.options,e=t.title,r=Mr(e.font),o=vo(e.padding);if(!e.display)return;let s=Fd(t.rtl,this.left,this.width),i=this.ctx,a=e.position,l=r.size/2,c=o.top+l,u,p=this.left,f=this.width;if(this.isHorizontal())f=Math.max(...this.lineWidths),u=this.top+c,p=bo(t.align,p,this.right-f);else{let h=this.columnSizes.reduce((m,g)=>Math.max(m,g.height),0);u=c+bo(t.align,this.top,this.bottom-h-t.labels.padding-this._computeTitleHeight())}let d=bo(a,p,p+f);i.textAlign=s.textAlign(vS(a)),i.textBaseline="middle",i.strokeStyle=e.color,i.fillStyle=e.color,i.font=r.string,zp(i,e.text,d,u,r)}_computeTitleHeight(){let t=this.options.title,e=Mr(t.font),r=vo(t.padding);return t.display?e.lineHeight+r.height:0}_getLegendItemAt(t,e){let r,o,s;if(nl(t,this.left,this.right)&&nl(e,this.top,this.bottom)){for(s=this.legendHitBoxes,r=0;r<s.length;++r)if(o=s[r],nl(t,o.left,o.left+o.width)&&nl(e,o.top,o.top+o.height))return this.legendItems[r]}return null}handleEvent(t){let e=this.options;if(!Tve(t.type,e))return;let r=this._getLegendItemAt(t.x,t.y);if(t.type==="mousemove"||t.type==="mouseout"){let o=this._hoveredItem,s=Sve(o,r);o&&!s&&Ln(e.onLeave,[t,o,this],this),this._hoveredItem=r,r&&!s&&Ln(e.onHover,[t,r,this],this)}else r&&Ln(e.onClick,[t,r,this],this)}};function Tve(n,t){return!!((n==="mousemove"||n==="mouseout")&&(t.onHover||t.onLeave)||t.onClick&&(n==="click"||n==="mouseup"))}var Eve={id:"legend",_element:BS,start(n,t,e){let r=n.legend=new BS({ctx:n.ctx,options:e,chart:n});Ao.configure(n,r,e),Ao.addBox(n,r)},stop(n){Ao.removeBox(n,n.legend),delete n.legend},beforeUpdate(n,t,e){let r=n.legend;Ao.configure(n,r,e),r.options=e},afterUpdate(n){let t=n.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(n,t){t.replay||n.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(n,t,e){let r=t.datasetIndex,o=e.chart;o.isDatasetVisible(r)?(o.hide(r),t.hidden=!0):(o.show(r),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:n=>n.chart.options.color,boxWidth:40,padding:10,generateLabels(n){let t=n.data.datasets,{labels:{usePointStyle:e,pointStyle:r,textAlign:o,color:s}}=n.legend.options;return n._getSortedDatasetMetas().map(i=>{let a=i.controller.getStyle(e?0:void 0),l=vo(a.borderWidth);return{text:t[i.index].label,fillStyle:a.backgroundColor,fontColor:s,hidden:!i.visible,lineCap:a.borderCapStyle,lineDash:a.borderDash,lineDashOffset:a.borderDashOffset,lineJoin:a.borderJoinStyle,lineWidth:(l.width+l.height)/4,strokeStyle:a.borderColor,pointStyle:r||a.pointStyle,rotation:a.rotation,textAlign:o||a.textAlign,borderRadius:0,datasetIndex:i.index}},this)}},title:{color:n=>n.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:n=>!n.startsWith("on"),labels:{_scriptable:n=>!["generateLabels","filter","sort"].includes(n)}}},dv=class extends Gs{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e){let r=this.options;if(this.left=0,this.top=0,!r.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=t,this.height=this.bottom=e;let o=$n(r.text)?r.text.length:1;this._padding=vo(r.padding);let s=o*Mr(r.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=s:this.width=s}isHorizontal(){let t=this.options.position;return t==="top"||t==="bottom"}_drawArgs(t){let{top:e,left:r,bottom:o,right:s,options:i}=this,a=i.align,l=0,c,u,p;return this.isHorizontal()?(u=bo(a,r,s),p=e+t,c=s-r):(i.position==="left"?(u=r+t,p=bo(a,o,e),l=Zn*-.5):(u=s-t,p=bo(a,e,o),l=Zn*.5),c=o-e),{titleX:u,titleY:p,maxWidth:c,rotation:l}}draw(){let t=this.ctx,e=this.options;if(!e.display)return;let r=Mr(e.font),s=r.lineHeight/2+this._padding.top,{titleX:i,titleY:a,maxWidth:l,rotation:c}=this._drawArgs(s);zp(t,e.text,0,0,r,{color:e.color,maxWidth:l,rotation:c,textAlign:vS(e.align),textBaseline:"middle",translation:[i,a]})}};function Nve(n,t){let e=new dv({ctx:n.ctx,options:t,chart:n});Ao.configure(n,e,t),Ao.addBox(n,e),n.titleBlock=e}var Dve={id:"title",_element:dv,start(n,t,e){Nve(n,e)},stop(n){let t=n.titleBlock;Ao.removeBox(n,t),delete n.titleBlock},beforeUpdate(n,t,e){let r=n.titleBlock;Ao.configure(n,r,e),r.options=e},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}},_S=new WeakMap,kve={id:"subtitle",start(n,t,e){let r=new dv({ctx:n.ctx,options:e,chart:n});Ao.configure(n,r,e),Ao.addBox(n,r),_S.set(n,r)},stop(n){Ao.removeBox(n,_S.get(n)),_S.delete(n)},beforeUpdate(n,t,e){let r=_S.get(n);Ao.configure(n,r,e),r.options=e},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}},pv={average(n){if(!n.length)return!1;let t,e,r=0,o=0,s=0;for(t=0,e=n.length;t<e;++t){let i=n[t].element;if(i&&i.hasValue()){let a=i.tooltipPosition();r+=a.x,o+=a.y,++s}}return{x:r/s,y:o/s}},nearest(n,t){if(!n.length)return!1;let e=t.x,r=t.y,o=Number.POSITIVE_INFINITY,s,i,a;for(s=0,i=n.length;s<i;++s){let l=n[s].element;if(l&&l.hasValue()){let c=l.getCenterPoint(),u=mS(t,c);u<o&&(o=u,a=l)}}if(a){let l=a.tooltipPosition();e=l.x,r=l.y}return{x:e,y:r}}};function rl(n,t){return t&&($n(t)?Array.prototype.push.apply(n,t):n.push(t)),n}function Vc(n){return(typeof n=="string"||n instanceof String)&&n.indexOf(`
`)>-1?n.split(`
`):n}function _ve(n,t){let{element:e,datasetIndex:r,index:o}=t,s=n.getDatasetMeta(r).controller,{label:i,value:a}=s.getLabelAndValue(o);return{chart:n,label:i,parsed:s.getParsed(o),raw:n.data.datasets[r].data[o],formattedValue:a,dataset:s.getDataset(),dataIndex:o,datasetIndex:r,element:e}}function qj(n,t){let e=n.chart.ctx,{body:r,footer:o,title:s}=n,{boxWidth:i,boxHeight:a}=t,l=Mr(t.bodyFont),c=Mr(t.titleFont),u=Mr(t.footerFont),p=s.length,f=o.length,d=r.length,h=vo(t.padding),m=h.height,g=0,x=r.reduce((v,S)=>v+S.before.length+S.lines.length+S.after.length,0);if(x+=n.beforeBody.length+n.afterBody.length,p&&(m+=p*c.lineHeight+(p-1)*t.titleSpacing+t.titleMarginBottom),x){let v=t.displayColors?Math.max(a,l.lineHeight):l.lineHeight;m+=d*v+(x-d)*l.lineHeight+(x-1)*t.bodySpacing}f&&(m+=t.footerMarginTop+f*u.lineHeight+(f-1)*t.footerSpacing);let b=0,w=function(v){g=Math.max(g,e.measureText(v).width+b)};return e.save(),e.font=c.string,gn(n.title,w),e.font=l.string,gn(n.beforeBody.concat(n.afterBody),w),b=t.displayColors?i+2+t.boxPadding:0,gn(r,v=>{gn(v.before,w),gn(v.lines,w),gn(v.after,w)}),b=0,e.font=u.string,gn(n.footer,w),e.restore(),g+=h.width,{width:g,height:m}}function Ave(n,t){let{y:e,height:r}=t;return e<r/2?"top":e>n.height-r/2?"bottom":"center"}function Rve(n,t,e,r){let{x:o,width:s}=r,i=e.caretSize+e.caretPadding;if(n==="left"&&o+s+i>t.width||n==="right"&&o-s-i<0)return!0}function Mve(n,t,e,r){let{x:o,width:s}=e,{width:i,chartArea:{left:a,right:l}}=n,c="center";return r==="center"?c=o<=(a+l)/2?"left":"right":o<=s/2?c="left":o>=i-s/2&&(c="right"),Rve(c,n,t,e)&&(c="center"),c}function Kj(n,t,e){let r=e.yAlign||t.yAlign||Ave(n,e);return{xAlign:e.xAlign||t.xAlign||Mve(n,t,e,r),yAlign:r}}function Ove(n,t){let{x:e,width:r}=n;return t==="right"?e-=r:t==="center"&&(e-=r/2),e}function Fve(n,t,e){let{y:r,height:o}=n;return t==="top"?r+=e:t==="bottom"?r-=o+e:r-=o/2,r}function Xj(n,t,e,r){let{caretSize:o,caretPadding:s,cornerRadius:i}=n,{xAlign:a,yAlign:l}=e,c=o+s,{topLeft:u,topRight:p,bottomLeft:f,bottomRight:d}=Vp(i),h=Ove(t,a),m=Fve(t,l,c);return l==="center"?a==="left"?h+=c:a==="right"&&(h-=c):a==="left"?h-=Math.max(u,f)+o:a==="right"&&(h+=Math.max(p,d)+o),{x:Hr(h,0,r.width-t.width),y:Hr(m,0,r.height-t.height)}}function AS(n,t,e){let r=vo(e.padding);return t==="center"?n.x+n.width/2:t==="right"?n.x+n.width-r.right:n.x+r.left}function Yj(n){return rl([],Vc(n))}function Pve(n,t,e){return Bc(n,{tooltip:t,tooltipItems:e,type:"tooltip"})}function Zj(n,t){let e=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return e?n.override(e):n}var Qj=(()=>{class n extends Gs{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart||e._chart,this._chart=this.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){let e=this._cachedAnimations;if(e)return e;let r=this.chart,o=this.options.setContext(this.getContext()),s=o.enabled&&r.options.animation&&o.animations,i=new OS(this.chart,s);return s._cacheable&&(this._cachedAnimations=Object.freeze(i)),i}getContext(){return this.$context||(this.$context=Pve(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,r){let{callbacks:o}=r,s=o.beforeTitle.apply(this,[e]),i=o.title.apply(this,[e]),a=o.afterTitle.apply(this,[e]),l=[];return l=rl(l,Vc(s)),l=rl(l,Vc(i)),l=rl(l,Vc(a)),l}getBeforeBody(e,r){return Yj(r.callbacks.beforeBody.apply(this,[e]))}getBody(e,r){let{callbacks:o}=r,s=[];return gn(e,i=>{let a={before:[],lines:[],after:[]},l=Zj(o,i);rl(a.before,Vc(l.beforeLabel.call(this,i))),rl(a.lines,l.label.call(this,i)),rl(a.after,Vc(l.afterLabel.call(this,i))),s.push(a)}),s}getAfterBody(e,r){return Yj(r.callbacks.afterBody.apply(this,[e]))}getFooter(e,r){let{callbacks:o}=r,s=o.beforeFooter.apply(this,[e]),i=o.footer.apply(this,[e]),a=o.afterFooter.apply(this,[e]),l=[];return l=rl(l,Vc(s)),l=rl(l,Vc(i)),l=rl(l,Vc(a)),l}_createItems(e){let r=this._active,o=this.chart.data,s=[],i=[],a=[],l=[],c,u;for(c=0,u=r.length;c<u;++c)l.push(_ve(this.chart,r[c]));return e.filter&&(l=l.filter((p,f,d)=>e.filter(p,f,d,o))),e.itemSort&&(l=l.sort((p,f)=>e.itemSort(p,f,o))),gn(l,p=>{let f=Zj(e.callbacks,p);s.push(f.labelColor.call(this,p)),i.push(f.labelPointStyle.call(this,p)),a.push(f.labelTextColor.call(this,p))}),this.labelColors=s,this.labelPointStyles=i,this.labelTextColors=a,this.dataPoints=l,l}update(e,r){let o=this.options.setContext(this.getContext()),s=this._active,i,a=[];if(!s.length)this.opacity!==0&&(i={opacity:0});else{let l=pv[o.position].call(this,s,this._eventPosition);a=this._createItems(o),this.title=this.getTitle(a,o),this.beforeBody=this.getBeforeBody(a,o),this.body=this.getBody(a,o),this.afterBody=this.getAfterBody(a,o),this.footer=this.getFooter(a,o);let c=this._size=qj(this,o),u=Object.assign({},l,c),p=Kj(this.chart,o,u),f=Xj(o,u,p,this.chart);this.xAlign=p.xAlign,this.yAlign=p.yAlign,i={opacity:1,x:f.x,y:f.y,width:c.width,height:c.height,caretX:l.x,caretY:l.y}}this._tooltipItems=a,this.$context=void 0,i&&this._resolveAnimations().update(this,i),e&&o.external&&o.external.call(this,{chart:this.chart,tooltip:this,replay:r})}drawCaret(e,r,o,s){let i=this.getCaretPosition(e,o,s);r.lineTo(i.x1,i.y1),r.lineTo(i.x2,i.y2),r.lineTo(i.x3,i.y3)}getCaretPosition(e,r,o){let{xAlign:s,yAlign:i}=this,{caretSize:a,cornerRadius:l}=o,{topLeft:c,topRight:u,bottomLeft:p,bottomRight:f}=Vp(l),{x:d,y:h}=e,{width:m,height:g}=r,x,b,w,v,S,k;return i==="center"?(S=h+g/2,s==="left"?(x=d,b=x-a,v=S+a,k=S-a):(x=d+m,b=x+a,v=S-a,k=S+a),w=x):(s==="left"?b=d+Math.max(c,p)+a:s==="right"?b=d+m-Math.max(u,f)-a:b=this.caretX,i==="top"?(v=h,S=v-a,x=b-a,w=b+a):(v=h+g,S=v+a,x=b+a,w=b-a),k=v),{x1:x,x2:b,x3:w,y1:v,y2:S,y3:k}}drawTitle(e,r,o){let s=this.title,i=s.length,a,l,c;if(i){let u=Fd(o.rtl,this.x,this.width);for(e.x=AS(this,o.titleAlign,o),r.textAlign=u.textAlign(o.titleAlign),r.textBaseline="middle",a=Mr(o.titleFont),l=o.titleSpacing,r.fillStyle=o.titleColor,r.font=a.string,c=0;c<i;++c)r.fillText(s[c],u.x(e.x),e.y+a.lineHeight/2),e.y+=a.lineHeight+l,c+1===i&&(e.y+=o.titleMarginBottom-l)}}_drawColorBox(e,r,o,s,i){let a=this.labelColors[o],l=this.labelPointStyles[o],{boxHeight:c,boxWidth:u,boxPadding:p}=i,f=Mr(i.bodyFont),d=AS(this,"left",i),h=s.x(d),m=c<f.lineHeight?(f.lineHeight-c)/2:0,g=r.y+m;if(i.usePointStyle){let x={radius:Math.min(u,c)/2,pointStyle:l.pointStyle,rotation:l.rotation,borderWidth:1},b=s.leftForLtr(h,u)+u/2,w=g+c/2;e.strokeStyle=i.multiKeyBackground,e.fillStyle=i.multiKeyBackground,CS(e,x,b,w),e.strokeStyle=a.borderColor,e.fillStyle=a.backgroundColor,CS(e,x,b,w)}else{e.lineWidth=Lt(a.borderWidth)?Math.max(...Object.values(a.borderWidth)):a.borderWidth||1,e.strokeStyle=a.borderColor,e.setLineDash(a.borderDash||[]),e.lineDashOffset=a.borderDashOffset||0;let x=s.leftForLtr(h,u-p),b=s.leftForLtr(s.xPlus(h,1),u-p-2),w=Vp(a.borderRadius);Object.values(w).some(v=>v!==0)?(e.beginPath(),e.fillStyle=i.multiKeyBackground,tx(e,{x,y:g,w:u,h:c,radius:w}),e.fill(),e.stroke(),e.fillStyle=a.backgroundColor,e.beginPath(),tx(e,{x:b,y:g+1,w:u-2,h:c-2,radius:w}),e.fill()):(e.fillStyle=i.multiKeyBackground,e.fillRect(x,g,u,c),e.strokeRect(x,g,u,c),e.fillStyle=a.backgroundColor,e.fillRect(b,g+1,u-2,c-2))}e.fillStyle=this.labelTextColors[o]}drawBody(e,r,o){let{body:s}=this,{bodySpacing:i,bodyAlign:a,displayColors:l,boxHeight:c,boxWidth:u,boxPadding:p}=o,f=Mr(o.bodyFont),d=f.lineHeight,h=0,m=Fd(o.rtl,this.x,this.width),g=function(L){r.fillText(L,m.x(e.x+h),e.y+d/2),e.y+=d+i},x=m.textAlign(a),b,w,v,S,k,A,$;for(r.textAlign=a,r.textBaseline="middle",r.font=f.string,e.x=AS(this,x,o),r.fillStyle=o.bodyColor,gn(this.beforeBody,g),h=l&&x!=="right"?a==="center"?u/2+p:u+2+p:0,S=0,A=s.length;S<A;++S){for(b=s[S],w=this.labelTextColors[S],r.fillStyle=w,gn(b.before,g),v=b.lines,l&&v.length&&(this._drawColorBox(r,e,S,m,o),d=Math.max(f.lineHeight,c)),k=0,$=v.length;k<$;++k)g(v[k]),d=f.lineHeight;gn(b.after,g)}h=0,d=f.lineHeight,gn(this.afterBody,g),e.y-=i}drawFooter(e,r,o){let s=this.footer,i=s.length,a,l;if(i){let c=Fd(o.rtl,this.x,this.width);for(e.x=AS(this,o.footerAlign,o),e.y+=o.footerMarginTop,r.textAlign=c.textAlign(o.footerAlign),r.textBaseline="middle",a=Mr(o.footerFont),r.fillStyle=o.footerColor,r.font=a.string,l=0;l<i;++l)r.fillText(s[l],c.x(e.x),e.y+a.lineHeight/2),e.y+=a.lineHeight+o.footerSpacing}}drawBackground(e,r,o,s){let{xAlign:i,yAlign:a}=this,{x:l,y:c}=e,{width:u,height:p}=o,{topLeft:f,topRight:d,bottomLeft:h,bottomRight:m}=Vp(s.cornerRadius);r.fillStyle=s.backgroundColor,r.strokeStyle=s.borderColor,r.lineWidth=s.borderWidth,r.beginPath(),r.moveTo(l+f,c),a==="top"&&this.drawCaret(e,r,o,s),r.lineTo(l+u-d,c),r.quadraticCurveTo(l+u,c,l+u,c+d),a==="center"&&i==="right"&&this.drawCaret(e,r,o,s),r.lineTo(l+u,c+p-m),r.quadraticCurveTo(l+u,c+p,l+u-m,c+p),a==="bottom"&&this.drawCaret(e,r,o,s),r.lineTo(l+h,c+p),r.quadraticCurveTo(l,c+p,l,c+p-h),a==="center"&&i==="left"&&this.drawCaret(e,r,o,s),r.lineTo(l,c+f),r.quadraticCurveTo(l,c,l+f,c),r.closePath(),r.fill(),s.borderWidth>0&&r.stroke()}_updateAnimationTarget(e){let r=this.chart,o=this.$animations,s=o&&o.x,i=o&&o.y;if(s||i){let a=pv[e.position].call(this,this._active,this._eventPosition);if(!a)return;let l=this._size=qj(this,e),c=Object.assign({},a,this._size),u=Kj(r,e,c),p=Xj(e,c,u,r);(s._to!==p.x||i._to!==p.y)&&(this.xAlign=u.xAlign,this.yAlign=u.yAlign,this.width=l.width,this.height=l.height,this.caretX=a.x,this.caretY=a.y,this._resolveAnimations().update(this,p))}}_willRender(){return!!this.opacity}draw(e){let r=this.options.setContext(this.getContext()),o=this.opacity;if(!o)return;this._updateAnimationTarget(r);let s={width:this.width,height:this.height},i={x:this.x,y:this.y};o=Math.abs(o)<.001?0:o;let a=vo(r.padding),l=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;r.enabled&&l&&(e.save(),e.globalAlpha=o,this.drawBackground(i,e,s,r),XR(e,r.textDirection),i.y+=a.top,this.drawTitle(i,e,r),this.drawBody(i,e,r),this.drawFooter(i,e,r),YR(e,r.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,r){let o=this._active,s=e.map(({datasetIndex:l,index:c})=>{let u=this.chart.getDatasetMeta(l);if(!u)throw new Error("Cannot find a dataset at index "+l);return{datasetIndex:l,element:u.data[c],index:c}}),i=!tv(o,s),a=this._positionChanged(s,r);(i||a)&&(this._active=s,this._eventPosition=r,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,r,o=!0){if(r&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;let s=this.options,i=this._active||[],a=this._getActiveElements(e,i,r,o),l=this._positionChanged(a,e),c=r||!tv(a,i)||l;return c&&(this._active=a,(s.enabled||s.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,r))),c}_getActiveElements(e,r,o,s){let i=this.options;if(e.type==="mouseout")return[];if(!s)return r;let a=this.chart.getElementsAtEventForMode(e,i.mode,i,o);return i.reverse&&a.reverse(),a}_positionChanged(e,r){let{caretX:o,caretY:s,options:i}=this,a=pv[i.position].call(this,e,r);return a!==!1&&(o!==a.x||s!==a.y)}}return n.positioners=pv,n})(),$ve={id:"tooltip",_element:Qj,positioners:pv,afterInit(n,t,e){e&&(n.tooltip=new Qj({chart:n,options:e}))},beforeUpdate(n,t,e){n.tooltip&&n.tooltip.initialize(e)},reset(n,t,e){n.tooltip&&n.tooltip.initialize(e)},afterDraw(n){let t=n.tooltip;if(t&&t._willRender()){let e={tooltip:t};if(n.notifyPlugins("beforeTooltipDraw",e)===!1)return;t.draw(n.ctx),n.notifyPlugins("afterTooltipDraw",e)}},afterEvent(n,t){if(n.tooltip){let e=t.replay;n.tooltip.handleEvent(t.event,e,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(n,t)=>t.bodyFont.size,boxWidth:(n,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:{beforeTitle:tl,title(n){if(n.length>0){let t=n[0],e=t.chart.data.labels,r=e?e.length:0;if(this&&this.options&&this.options.mode==="dataset")return t.dataset.label||"";if(t.label)return t.label;if(r>0&&t.dataIndex<r)return e[t.dataIndex]}return""},afterTitle:tl,beforeBody:tl,beforeLabel:tl,label(n){if(this&&this.options&&this.options.mode==="dataset")return n.label+": "+n.formattedValue||n.formattedValue;let t=n.dataset.label||"";t&&(t+=": ");let e=n.formattedValue;return Ht(e)||(t+=e),t},labelColor(n){let e=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{borderColor:e.borderColor,backgroundColor:e.backgroundColor,borderWidth:e.borderWidth,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(n){let e=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{pointStyle:e.pointStyle,rotation:e.rotation}},afterLabel:tl,afterBody:tl,beforeFooter:tl,footer:tl,afterFooter:tl}},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:n=>n!=="filter"&&n!=="itemSort"&&n!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},Lve=Object.freeze({__proto__:null,Decimation:rve,Filler:Ive,Legend:Eve,SubTitle:kve,Title:Dve,Tooltip:$ve}),Bve=(n,t,e,r)=>(typeof t=="string"?(e=n.push(t)-1,r.unshift({index:e,label:t})):isNaN(t)&&(e=null),e);function zve(n,t,e,r){let o=n.indexOf(t);if(o===-1)return Bve(n,t,e,r);let s=n.lastIndexOf(t);return o!==s?e:o}var Vve=(n,t)=>n===null?null:Hr(Math.round(n),0,t),lx=class extends $d{constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){let e=this._addedLabels;if(e.length){let r=this.getLabels();for(let{index:o,label:s}of e)r[o]===s&&r.splice(o,1);this._addedLabels=[]}super.init(t)}parse(t,e){if(Ht(t))return null;let r=this.getLabels();return e=isFinite(e)&&r[e]===t?e:zve(r,t,St(e,t),this._addedLabels),Vve(e,r.length-1)}determineDataLimits(){let{minDefined:t,maxDefined:e}=this.getUserBounds(),{min:r,max:o}=this.getMinMax(!0);this.options.bounds==="ticks"&&(t||(r=0),e||(o=this.getLabels().length-1)),this.min=r,this.max=o}buildTicks(){let t=this.min,e=this.max,r=this.options.offset,o=[],s=this.getLabels();s=t===0&&e===s.length-1?s:s.slice(t,e+1),this._valueRange=Math.max(s.length-(r?0:1),1),this._startValue=this.min-(r?.5:0);for(let i=t;i<=e;i++)o.push({value:i});return o}getLabelForValue(t){let e=this.getLabels();return t>=0&&t<e.length?e[t]:t}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return typeof t!="number"&&(t=this.parse(t)),t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){let e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}};lx.id="category";lx.defaults={ticks:{callback:lx.prototype.getLabelForValue}};function Uve(n,t){let e=[],{bounds:o,step:s,min:i,max:a,precision:l,count:c,maxTicks:u,maxDigits:p,includeBounds:f}=n,d=s||1,h=u-1,{min:m,max:g}=t,x=!Ht(i),b=!Ht(a),w=!Ht(c),v=(g-m)/(p+1),S=TR((g-m)/h/d)*d,k,A,$,L;if(S<1e-14&&!x&&!b)return[{value:m},{value:g}];L=Math.ceil(g/S)-Math.floor(m/S),L>h&&(S=TR(L*S/h/d)*d),Ht(l)||(k=Math.pow(10,l),S=Math.ceil(S*k)/k),o==="ticks"?(A=Math.floor(m/S)*S,$=Math.ceil(g/S)*S):(A=m,$=g),x&&b&&s&&z4((a-i)/s,S/1e3)?(L=Math.round(Math.min((a-i)/S,u)),S=(a-i)/L,A=i,$=a):w?(A=x?i:A,$=b?a:$,L=c-1,S=($-A)/L):(L=($-A)/S,Jg(L,Math.round(L),S/1e3)?L=Math.round(L):L=Math.ceil(L));let z=Math.max(NR(S),NR(A));k=Math.pow(10,Ht(l)?z:l),A=Math.round(A*k)/k,$=Math.round($*k)/k;let W=0;for(x&&(f&&A!==i?(e.push({value:i}),A<i&&W++,Jg(Math.round((A+W*S)*k)/k,i,Jj(i,v,n))&&W++):A<i&&W++);W<L;++W)e.push({value:Math.round((A+W*S)*k)/k});return b&&f&&$!==a?e.length&&Jg(e[e.length-1].value,a,Jj(a,v,n))?e[e.length-1].value=a:e.push({value:a}):(!b||$===a)&&e.push({value:$}),e}function Jj(n,t,{horizontal:e,minRotation:r}){let o=di(r),s=(e?Math.sin(o):Math.cos(o))||.001,i=.75*t*(""+n).length;return Math.min(t/s,i)}var cx=class extends $d{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,e){return Ht(t)||(typeof t=="number"||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){let{beginAtZero:t}=this.options,{minDefined:e,maxDefined:r}=this.getUserBounds(),{min:o,max:s}=this,i=l=>o=e?o:l,a=l=>s=r?s:l;if(t){let l=Xi(o),c=Xi(s);l<0&&c<0?a(0):l>0&&c>0&&i(0)}if(o===s){let l=1;(s>=Number.MAX_SAFE_INTEGER||o<=Number.MIN_SAFE_INTEGER)&&(l=Math.abs(s*.05)),a(s+l),t||i(o-l)}this.min=o,this.max=s}getTickLimit(){let t=this.options.ticks,{maxTicksLimit:e,stepSize:r}=t,o;return r?(o=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,o>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${r} would result generating up to ${o} ticks. Limiting to 1000.`),o=1e3)):(o=this.computeTickLimit(),e=e||11),e&&(o=Math.min(e,o)),o}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){let t=this.options,e=t.ticks,r=this.getTickLimit();r=Math.max(2,r);let o={maxTicks:r,bounds:t.bounds,min:t.min,max:t.max,precision:e.precision,step:e.stepSize,count:e.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:e.minRotation||0,includeBounds:e.includeBounds!==!1},s=this._range||this,i=Uve(o,s);return t.bounds==="ticks"&&ER(i,this,"value"),t.reverse?(i.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),i}configure(){let t=this.ticks,e=this.min,r=this.max;if(super.configure(),this.options.offset&&t.length){let o=(r-e)/Math.max(t.length-1,1)/2;e-=o,r+=o}this._startValue=e,this._endValue=r,this._valueRange=r-e}getLabelForValue(t){return rx(t,this.chart.options.locale,this.options.ticks.format)}},hv=class extends cx{determineDataLimits(){let{min:t,max:e}=this.getMinMax(!0);this.min=xr(t)?t:0,this.max=xr(e)?e:1,this.handleTickRangeOptions()}computeTickLimit(){let t=this.isHorizontal(),e=t?this.width:this.height,r=di(this.options.ticks.minRotation),o=(t?Math.sin(r):Math.cos(r))||.001,s=this._resolveTickFontOptions(0);return Math.ceil(e/Math.min(40,s.lineHeight/o))}getPixelForValue(t){return t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}};hv.id="linear";hv.defaults={ticks:{callback:zS.formatters.numeric}};function eG(n){return n/Math.pow(10,Math.floor(js(n)))===1}function jve(n,t){let e=Math.floor(js(t.max)),r=Math.ceil(t.max/Math.pow(10,e)),o=[],s=Us(n.min,Math.pow(10,Math.floor(js(t.min)))),i=Math.floor(js(s)),a=Math.floor(s/Math.pow(10,i)),l=i<0?Math.pow(10,Math.abs(i)):1;do o.push({value:s,major:eG(s)}),++a,a===10&&(a=1,++i,l=i>=0?1:l),s=Math.round(a*Math.pow(10,i)*l)/l;while(i<e||i===e&&a<r);let c=Us(n.max,s);return o.push({value:c,major:eG(s)}),o}var mv=class extends $d{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(t,e){let r=cx.prototype.parse.apply(this,[t,e]);if(r===0){this._zero=!0;return}return xr(r)&&r>0?r:null}determineDataLimits(){let{min:t,max:e}=this.getMinMax(!0);this.min=xr(t)?Math.max(0,t):null,this.max=xr(e)?Math.max(0,e):null,this.options.beginAtZero&&(this._zero=!0),this.handleTickRangeOptions()}handleTickRangeOptions(){let{minDefined:t,maxDefined:e}=this.getUserBounds(),r=this.min,o=this.max,s=l=>r=t?r:l,i=l=>o=e?o:l,a=(l,c)=>Math.pow(10,Math.floor(js(l))+c);r===o&&(r<=0?(s(1),i(10)):(s(a(r,-1)),i(a(o,1)))),r<=0&&s(a(o,-1)),o<=0&&i(a(r,1)),this._zero&&this.min!==this._suggestedMin&&r===a(this.min,0)&&s(a(r,-1)),this.min=r,this.max=o}buildTicks(){let t=this.options,e={min:this._userMin,max:this._userMax},r=jve(e,this);return t.bounds==="ticks"&&ER(r,this,"value"),t.reverse?(r.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),r}getLabelForValue(t){return t===void 0?"0":rx(t,this.chart.options.locale,this.options.ticks.format)}configure(){let t=this.min;super.configure(),this._startValue=js(t),this._valueRange=js(this.max)-js(t)}getPixelForValue(t){return(t===void 0||t===0)&&(t=this.min),t===null||isNaN(t)?NaN:this.getPixelForDecimal(t===this.min?0:(js(t)-this._startValue)/this._valueRange)}getValueForPixel(t){let e=this.getDecimalForPixel(t);return Math.pow(10,this._startValue+e*this._valueRange)}};mv.id="logarithmic";mv.defaults={ticks:{callback:zS.formatters.logarithmic,major:{enabled:!0}}};function v2(n){let t=n.ticks;if(t.display&&n.display){let e=vo(t.backdropPadding);return St(t.font&&t.font.size,Mt.font.size)+e.height}return 0}function Gve(n,t,e){return e=$n(e)?e:[e],{w:J4(n,t.string,e),h:e.length*t.lineHeight}}function tG(n,t,e,r,o){return n===r||n===o?{start:t-e/2,end:t+e/2}:n<r||n>o?{start:t-e,end:t}:{start:t,end:t+e}}function Wve(n){let t={l:n.left+n._padding.left,r:n.right-n._padding.right,t:n.top+n._padding.top,b:n.bottom-n._padding.bottom},e=Object.assign({},t),r=[],o=[],s=n._pointLabels.length,i=n.options.pointLabels,a=i.centerPointLabels?Zn/s:0;for(let l=0;l<s;l++){let c=i.setContext(n.getPointLabelContext(l));o[l]=c.padding;let u=n.getPointPosition(l,n.drawingArea+o[l],a),p=Mr(c.font),f=Gve(n.ctx,p,n._pointLabels[l]);r[l]=f;let d=vs(n.getIndexAngle(l)+a),h=Math.round(yS(d)),m=tG(h,u.x,f.w,0,180),g=tG(h,u.y,f.h,90,270);Hve(e,t,d,m,g)}n.setCenterPoint(t.l-e.l,e.r-t.r,t.t-e.t,e.b-t.b),n._pointLabelItems=qve(n,r,o)}function Hve(n,t,e,r,o){let s=Math.abs(Math.sin(e)),i=Math.abs(Math.cos(e)),a=0,l=0;r.start<t.l?(a=(t.l-r.start)/s,n.l=Math.min(n.l,t.l-a)):r.end>t.r&&(a=(r.end-t.r)/s,n.r=Math.max(n.r,t.r+a)),o.start<t.t?(l=(t.t-o.start)/i,n.t=Math.min(n.t,t.t-l)):o.end>t.b&&(l=(o.end-t.b)/i,n.b=Math.max(n.b,t.b+l))}function qve(n,t,e){let r=[],o=n._pointLabels.length,s=n.options,i=v2(s)/2,a=n.drawingArea,l=s.pointLabels.centerPointLabels?Zn/o:0;for(let c=0;c<o;c++){let u=n.getPointPosition(c,a+i+e[c],l),p=Math.round(yS(vs(u.angle+ur))),f=t[c],d=Yve(u.y,f.h,p),h=Kve(p),m=Xve(u.x,f.w,h);r.push({x:u.x,y:d,textAlign:h,left:m,top:d,right:m+f.w,bottom:d+f.h})}return r}function Kve(n){return n===0||n===180?"center":n<180?"left":"right"}function Xve(n,t,e){return e==="right"?n-=t:e==="center"&&(n-=t/2),n}function Yve(n,t,e){return e===90||e===270?n-=t/2:(e>270||e<90)&&(n-=t),n}function Zve(n,t){let{ctx:e,options:{pointLabels:r}}=n;for(let o=t-1;o>=0;o--){let s=r.setContext(n.getPointLabelContext(o)),i=Mr(s.font),{x:a,y:l,textAlign:c,left:u,top:p,right:f,bottom:d}=n._pointLabelItems[o],{backdropColor:h}=s;if(!Ht(h)){let m=Vp(s.borderRadius),g=vo(s.backdropPadding);e.fillStyle=h;let x=u-g.left,b=p-g.top,w=f-u+g.width,v=d-p+g.height;Object.values(m).some(S=>S!==0)?(e.beginPath(),tx(e,{x,y:b,w,h:v,radius:m}),e.fill()):e.fillRect(x,b,w,v)}zp(e,n._pointLabels[o],a,l+i.lineHeight/2,i,{color:s.color,textAlign:c,textBaseline:"middle"})}}function TG(n,t,e,r){let{ctx:o}=n;if(e)o.arc(n.xCenter,n.yCenter,t,0,wn);else{let s=n.getPointPosition(0,t);o.moveTo(s.x,s.y);for(let i=1;i<r;i++)s=n.getPointPosition(i,t),o.lineTo(s.x,s.y)}}function Qve(n,t,e,r){let o=n.ctx,s=t.circular,{color:i,lineWidth:a}=t;!s&&!r||!i||!a||e<0||(o.save(),o.strokeStyle=i,o.lineWidth=a,o.setLineDash(t.borderDash),o.lineDashOffset=t.borderDashOffset,o.beginPath(),TG(n,e,s,r),o.closePath(),o.stroke(),o.restore())}function Jve(n,t,e){return Bc(n,{label:e,index:t,type:"pointLabel"})}var Bd=class extends cx{constructor(t){super(t),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){let t=this._padding=vo(v2(this.options)/2),e=this.width=this.maxWidth-t.width,r=this.height=this.maxHeight-t.height;this.xCenter=Math.floor(this.left+e/2+t.left),this.yCenter=Math.floor(this.top+r/2+t.top),this.drawingArea=Math.floor(Math.min(e,r)/2)}determineDataLimits(){let{min:t,max:e}=this.getMinMax(!1);this.min=xr(t)&&!isNaN(t)?t:0,this.max=xr(e)&&!isNaN(e)?e:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/v2(this.options))}generateTickLabels(t){cx.prototype.generateTickLabels.call(this,t),this._pointLabels=this.getLabels().map((e,r)=>{let o=Ln(this.options.pointLabels.callback,[e,r],this);return o||o===0?o:""}).filter((e,r)=>this.chart.getDataVisibility(r))}fit(){let t=this.options;t.display&&t.pointLabels.display?Wve(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(t,e,r,o){this.xCenter+=Math.floor((t-e)/2),this.yCenter+=Math.floor((r-o)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(t,e,r,o))}getIndexAngle(t){let e=wn/(this._pointLabels.length||1),r=this.options.startAngle||0;return vs(t*e+di(r))}getDistanceFromCenterForValue(t){if(Ht(t))return NaN;let e=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-t)*e:(t-this.min)*e}getValueForDistanceFromCenter(t){if(Ht(t))return NaN;let e=t/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-e:this.min+e}getPointLabelContext(t){let e=this._pointLabels||[];if(t>=0&&t<e.length){let r=e[t];return Jve(this.getContext(),t,r)}}getPointPosition(t,e,r=0){let o=this.getIndexAngle(t)-ur+r;return{x:Math.cos(o)*e+this.xCenter,y:Math.sin(o)*e+this.yCenter,angle:o}}getPointPositionForValue(t,e){return this.getPointPosition(t,this.getDistanceFromCenterForValue(e))}getBasePosition(t){return this.getPointPositionForValue(t||0,this.getBaseValue())}getPointLabelPosition(t){let{left:e,top:r,right:o,bottom:s}=this._pointLabelItems[t];return{left:e,top:r,right:o,bottom:s}}drawBackground(){let{backgroundColor:t,grid:{circular:e}}=this.options;if(t){let r=this.ctx;r.save(),r.beginPath(),TG(this,this.getDistanceFromCenterForValue(this._endValue),e,this._pointLabels.length),r.closePath(),r.fillStyle=t,r.fill(),r.restore()}}drawGrid(){let t=this.ctx,e=this.options,{angleLines:r,grid:o}=e,s=this._pointLabels.length,i,a,l;if(e.pointLabels.display&&Zve(this,s),o.display&&this.ticks.forEach((c,u)=>{if(u!==0){a=this.getDistanceFromCenterForValue(c.value);let p=o.setContext(this.getContext(u-1));Qve(this,p,a,s)}}),r.display){for(t.save(),i=s-1;i>=0;i--){let c=r.setContext(this.getPointLabelContext(i)),{color:u,lineWidth:p}=c;!p||!u||(t.lineWidth=p,t.strokeStyle=u,t.setLineDash(c.borderDash),t.lineDashOffset=c.borderDashOffset,a=this.getDistanceFromCenterForValue(e.ticks.reverse?this.min:this.max),l=this.getPointPosition(i,a),t.beginPath(),t.moveTo(this.xCenter,this.yCenter),t.lineTo(l.x,l.y),t.stroke())}t.restore()}}drawBorder(){}drawLabels(){let t=this.ctx,e=this.options,r=e.ticks;if(!r.display)return;let o=this.getIndexAngle(0),s,i;t.save(),t.translate(this.xCenter,this.yCenter),t.rotate(o),t.textAlign="center",t.textBaseline="middle",this.ticks.forEach((a,l)=>{if(l===0&&!e.reverse)return;let c=r.setContext(this.getContext(l)),u=Mr(c.font);if(s=this.getDistanceFromCenterForValue(this.ticks[l].value),c.showLabelBackdrop){t.font=u.string,i=t.measureText(a.label).width,t.fillStyle=c.backdropColor;let p=vo(c.backdropPadding);t.fillRect(-i/2-p.left,-s-u.size/2-p.top,i+p.width,u.size+p.height)}zp(t,a.label,0,-s,u,{color:c.color})}),t.restore()}drawTitle(){}};Bd.id="radialLinear";Bd.defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:zS.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(n){return n},padding:5,centerPointLabels:!1}};Bd.defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"};Bd.descriptors={angleLines:{_fallback:"grid"}};var US={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},ws=Object.keys(US);function e0e(n,t){return n-t}function nG(n,t){if(Ht(t))return null;let e=n._adapter,{parser:r,round:o,isoWeekday:s}=n._parseOpts,i=t;return typeof r=="function"&&(i=r(i)),xr(i)||(i=typeof r=="string"?e.parse(i,r):e.parse(i)),i===null?null:(o&&(i=o==="week"&&(Od(s)||s===!0)?e.startOf(i,"isoWeek",s):e.startOf(i,o)),+i)}function rG(n,t,e,r){let o=ws.length;for(let s=ws.indexOf(n);s<o-1;++s){let i=US[ws[s]],a=i.steps?i.steps:Number.MAX_SAFE_INTEGER;if(i.common&&Math.ceil((e-t)/(a*i.size))<=r)return ws[s]}return ws[o-1]}function t0e(n,t,e,r,o){for(let s=ws.length-1;s>=ws.indexOf(e);s--){let i=ws[s];if(US[i].common&&n._adapter.diff(o,r,i)>=t-1)return i}return ws[e?ws.indexOf(e):0]}function n0e(n){for(let t=ws.indexOf(n)+1,e=ws.length;t<e;++t)if(US[ws[t]].common)return ws[t]}function oG(n,t,e){if(!e)n[t]=!0;else if(e.length){let{lo:r,hi:o}=bS(e,t),s=e[r]>=t?e[r]:e[o];n[s]=!0}}function r0e(n,t,e,r){let o=n._adapter,s=+o.startOf(t[0].value,r),i=t[t.length-1].value,a,l;for(a=s;a<=i;a=+o.add(a,1,r))l=e[a],l>=0&&(t[l].major=!0);return t}function sG(n,t,e){let r=[],o={},s=t.length,i,a;for(i=0;i<s;++i)a=t[i],o[a]=i,r.push({value:a,major:!1});return s===0||!e?r:r0e(n,r,o,e)}var C2=(()=>{class n extends $d{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,r){let o=e.time||(e.time={}),s=this._adapter=new Hye._date(e.adapters.date);s.init(r),Qg(o.displayFormats,s.formats()),this._parseOpts={parser:o.parser,round:o.round,isoWeekday:o.isoWeekday},super.init(e),this._normalized=r.normalized}parse(e,r){return e===void 0?null:nG(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){let e=this.options,r=this._adapter,o=e.time.unit||"day",{min:s,max:i,minDefined:a,maxDefined:l}=this.getUserBounds();function c(u){!a&&!isNaN(u.min)&&(s=Math.min(s,u.min)),!l&&!isNaN(u.max)&&(i=Math.max(i,u.max))}(!a||!l)&&(c(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&c(this.getMinMax(!1))),s=xr(s)&&!isNaN(s)?s:+r.startOf(Date.now(),o),i=xr(i)&&!isNaN(i)?i:+r.endOf(Date.now(),o)+1,this.min=Math.min(s,i-1),this.max=Math.max(s+1,i)}_getLabelBounds(){let e=this.getLabelTimestamps(),r=Number.POSITIVE_INFINITY,o=Number.NEGATIVE_INFINITY;return e.length&&(r=e[0],o=e[e.length-1]),{min:r,max:o}}buildTicks(){let e=this.options,r=e.time,o=e.ticks,s=o.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&s.length&&(this.min=this._userMin||s[0],this.max=this._userMax||s[s.length-1]);let i=this.min,a=this.max,l=j4(s,i,a);return this._unit=r.unit||(o.autoSkip?rG(r.minUnit,this.min,this.max,this._getLabelCapacity(i)):t0e(this,l.length,r.minUnit,this.min,this.max)),this._majorUnit=!o.major.enabled||this._unit==="year"?void 0:n0e(this._unit),this.initOffsets(s),e.reverse&&l.reverse(),sG(this,l,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e){let r=0,o=0,s,i;this.options.offset&&e.length&&(s=this.getDecimalForValue(e[0]),e.length===1?r=1-s:r=(this.getDecimalForValue(e[1])-s)/2,i=this.getDecimalForValue(e[e.length-1]),e.length===1?o=i:o=(i-this.getDecimalForValue(e[e.length-2]))/2);let a=e.length<3?.5:.25;r=Hr(r,0,a),o=Hr(o,0,a),this._offsets={start:r,end:o,factor:1/(r+1+o)}}_generate(){let e=this._adapter,r=this.min,o=this.max,s=this.options,i=s.time,a=i.unit||rG(i.minUnit,r,o,this._getLabelCapacity(r)),l=St(i.stepSize,1),c=a==="week"?i.isoWeekday:!1,u=Od(c)||c===!0,p={},f=r,d,h;if(u&&(f=+e.startOf(f,"isoWeek",c)),f=+e.startOf(f,u?"day":a),e.diff(o,r,a)>1e5*l)throw new Error(r+" and "+o+" are too far apart with stepSize of "+l+" "+a);let m=s.ticks.source==="data"&&this.getDataTimestamps();for(d=f,h=0;d<o;d=+e.add(d,l,a),h++)oG(p,d,m);return(d===o||s.bounds==="ticks"||h===1)&&oG(p,d,m),Object.keys(p).sort((g,x)=>g-x).map(g=>+g)}getLabelForValue(e){let r=this._adapter,o=this.options.time;return o.tooltipFormat?r.format(e,o.tooltipFormat):r.format(e,o.displayFormats.datetime)}_tickFormatFunction(e,r,o,s){let i=this.options,a=i.time.displayFormats,l=this._unit,c=this._majorUnit,u=l&&a[l],p=c&&a[c],f=o[r],d=c&&p&&f&&f.major,h=this._adapter.format(e,s||(d?p:u)),m=i.ticks.callback;return m?Ln(m,[h,r,o],this):h}generateTickLabels(e){let r,o,s;for(r=0,o=e.length;r<o;++r)s=e[r],s.label=this._tickFormatFunction(s.value,r,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){let r=this._offsets,o=this.getDecimalForValue(e);return this.getPixelForDecimal((r.start+o)*r.factor)}getValueForPixel(e){let r=this._offsets,o=this.getDecimalForPixel(e)/r.factor-r.end;return this.min+o*(this.max-this.min)}_getLabelSize(e){let r=this.options.ticks,o=this.ctx.measureText(e).width,s=di(this.isHorizontal()?r.maxRotation:r.minRotation),i=Math.cos(s),a=Math.sin(s),l=this._resolveTickFontOptions(0).size;return{w:o*i+l*a,h:o*a+l*i}}_getLabelCapacity(e){let r=this.options.time,o=r.displayFormats,s=o[r.unit]||o.millisecond,i=this._tickFormatFunction(e,0,sG(this,[e],this._majorUnit),s),a=this._getLabelSize(i),l=Math.floor(this.isHorizontal()?this.width/a.w:this.height/a.h)-1;return l>0?l:1}getDataTimestamps(){let e=this._cache.data||[],r,o;if(e.length)return e;let s=this.getMatchingVisibleMetas();if(this._normalized&&s.length)return this._cache.data=s[0].controller.getAllParsedValues(this);for(r=0,o=s.length;r<o;++r)e=e.concat(s[r].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){let e=this._cache.labels||[],r,o;if(e.length)return e;let s=this.getLabels();for(r=0,o=s.length;r<o;++r)e.push(nG(this,s[r]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return _R(e.sort(e0e))}}return n.id="time",n.defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",major:{enabled:!1}}},n})();function RS(n,t,e){let r=0,o=n.length-1,s,i,a,l;e?(t>=n[r].pos&&t<=n[o].pos&&({lo:r,hi:o}=el(n,"pos",t)),{pos:s,time:a}=n[r],{pos:i,time:l}=n[o]):(t>=n[r].time&&t<=n[o].time&&({lo:r,hi:o}=el(n,"time",t)),{time:s,pos:a}=n[r],{time:i,pos:l}=n[o]);let c=i-s;return c?a+(l-a)*(t-s)/c:a}var gv=class extends C2{constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){let t=this._getTimestampsForTable(),e=this._table=this.buildLookupTable(t);this._minPos=RS(e,this.min),this._tableRange=RS(e,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){let{min:e,max:r}=this,o=[],s=[],i,a,l,c,u;for(i=0,a=t.length;i<a;++i)c=t[i],c>=e&&c<=r&&o.push(c);if(o.length<2)return[{time:e,pos:0},{time:r,pos:1}];for(i=0,a=o.length;i<a;++i)u=o[i+1],l=o[i-1],c=o[i],Math.round((u+l)/2)!==c&&s.push({time:c,pos:i/(a-1)});return s}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;let e=this.getDataTimestamps(),r=this.getLabelTimestamps();return e.length&&r.length?t=this.normalize(e.concat(r)):t=e.length?e:r,t=this._cache.all=t,t}getDecimalForValue(t){return(RS(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){let e=this._offsets,r=this.getDecimalForPixel(t)/e.factor-e.end;return RS(this._table,r*this._tableRange+this._minPos,!0)}};gv.id="timeseries";gv.defaults=C2.defaults;var o0e=Object.freeze({__proto__:null,CategoryScale:lx,LinearScale:hv,LogarithmicScale:mv,RadialLinearScale:Bd,TimeScale:C2,TimeSeriesScale:gv}),EG=[Gye,Jbe,Lve,o0e];var s0e=typeof global=="object"&&global&&global.Object===Object&&global,jS=s0e;var i0e=typeof self=="object"&&self&&self.Object===Object&&self,a0e=jS||i0e||Function("return this")(),hi=a0e;var l0e=hi.Symbol,ux=l0e;var NG=Object.prototype,c0e=NG.hasOwnProperty,u0e=NG.toString,yv=ux?ux.toStringTag:void 0;function p0e(n){var t=c0e.call(n,yv),e=n[yv];try{n[yv]=void 0;var r=!0}catch{}var o=u0e.call(n);return r&&(t?n[yv]=e:delete n[yv]),o}var DG=p0e;var f0e=Object.prototype,d0e=f0e.toString;function h0e(n){return d0e.call(n)}var kG=h0e;var m0e="[object Null]",g0e="[object Undefined]",_G=ux?ux.toStringTag:void 0;function x0e(n){return n==null?n===void 0?g0e:m0e:_G&&_G in Object(n)?DG(n):kG(n)}var Wp=x0e;function y0e(n){return n!=null&&typeof n=="object"}var il=y0e;var b0e=Array.isArray,bv=b0e;function v0e(n){var t=typeof n;return n!=null&&(t=="object"||t=="function")}var Cs=v0e;function w0e(n){return n}var GS=w0e;var C0e="[object AsyncFunction]",I0e="[object Function]",S0e="[object GeneratorFunction]",T0e="[object Proxy]";function E0e(n){if(!Cs(n))return!1;var t=Wp(n);return t==I0e||t==S0e||t==C0e||t==T0e}var px=E0e;var N0e=hi["__core-js_shared__"],WS=N0e;var AG=function(){var n=/[^.]+$/.exec(WS&&WS.keys&&WS.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}();function D0e(n){return!!AG&&AG in n}var RG=D0e;var k0e=Function.prototype,_0e=k0e.toString;function A0e(n){if(n!=null){try{return _0e.call(n)}catch{}try{return n+""}catch{}}return""}var MG=A0e;var R0e=/[\\^$.*+?()[\]{}|]/g,M0e=/^\[object .+?Constructor\]$/,O0e=Function.prototype,F0e=Object.prototype,P0e=O0e.toString,$0e=F0e.hasOwnProperty,L0e=RegExp("^"+P0e.call($0e).replace(R0e,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function B0e(n){if(!Cs(n)||RG(n))return!1;var t=px(n)?L0e:M0e;return t.test(MG(n))}var OG=B0e;function z0e(n,t){return n?.[t]}var FG=z0e;function V0e(n,t){var e=FG(n,t);return OG(e)?e:void 0}var fx=V0e;var PG=Object.create,U0e=function(){function n(){}return function(t){if(!Cs(t))return{};if(PG)return PG(t);n.prototype=t;var e=new n;return n.prototype=void 0,e}}(),$G=U0e;function j0e(n,t,e){switch(e.length){case 0:return n.call(t);case 1:return n.call(t,e[0]);case 2:return n.call(t,e[0],e[1]);case 3:return n.call(t,e[0],e[1],e[2])}return n.apply(t,e)}var LG=j0e;function G0e(n,t){var e=-1,r=n.length;for(t||(t=Array(r));++e<r;)t[e]=n[e];return t}var BG=G0e;var W0e=800,H0e=16,q0e=Date.now;function K0e(n){var t=0,e=0;return function(){var r=q0e(),o=H0e-(r-e);if(e=r,o>0){if(++t>=W0e)return arguments[0]}else t=0;return n.apply(void 0,arguments)}}var zG=K0e;function X0e(n){return function(){return n}}var VG=X0e;var Y0e=function(){try{var n=fx(Object,"defineProperty");return n({},"",{}),n}catch{}}(),dx=Y0e;var Z0e=dx?function(n,t){return dx(n,"toString",{configurable:!0,enumerable:!1,value:VG(t),writable:!0})}:GS,UG=Z0e;var Q0e=zG(UG),jG=Q0e;var J0e=9007199254740991,ewe=/^(?:0|[1-9]\d*)$/;function twe(n,t){var e=typeof n;return t=t??J0e,!!t&&(e=="number"||e!="symbol"&&ewe.test(n))&&n>-1&&n%1==0&&n<t}var HS=twe;function nwe(n,t,e){t=="__proto__"&&dx?dx(n,t,{configurable:!0,enumerable:!0,value:e,writable:!0}):n[t]=e}var hx=nwe;function rwe(n,t){return n===t||n!==n&&t!==t}var Hp=rwe;var owe=Object.prototype,swe=owe.hasOwnProperty;function iwe(n,t,e){var r=n[t];(!(swe.call(n,t)&&Hp(r,e))||e===void 0&&!(t in n))&&hx(n,t,e)}var GG=iwe;function awe(n,t,e,r){var o=!e;e||(e={});for(var s=-1,i=t.length;++s<i;){var a=t[s],l=r?r(e[a],n[a],a,e,n):void 0;l===void 0&&(l=n[a]),o?hx(e,a,l):GG(e,a,l)}return e}var WG=awe;var HG=Math.max;function lwe(n,t,e){return t=HG(t===void 0?n.length-1:t,0),function(){for(var r=arguments,o=-1,s=HG(r.length-t,0),i=Array(s);++o<s;)i[o]=r[t+o];o=-1;for(var a=Array(t+1);++o<t;)a[o]=r[o];return a[t]=e(i),LG(n,this,a)}}var qG=lwe;function cwe(n,t){return jG(qG(n,t,GS),n+"")}var KG=cwe;var uwe=9007199254740991;function pwe(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=uwe}var qS=pwe;function fwe(n){return n!=null&&qS(n.length)&&!px(n)}var mx=fwe;function dwe(n,t,e){if(!Cs(e))return!1;var r=typeof t;return(r=="number"?mx(e)&&HS(t,e.length):r=="string"&&t in e)?Hp(e[t],n):!1}var XG=dwe;function hwe(n){return KG(function(t,e){var r=-1,o=e.length,s=o>1?e[o-1]:void 0,i=o>2?e[2]:void 0;for(s=n.length>3&&typeof s=="function"?(o--,s):void 0,i&&XG(e[0],e[1],i)&&(s=o<3?void 0:s,o=1),t=Object(t);++r<o;){var a=e[r];a&&n(t,a,r,s)}return t})}var YG=hwe;var mwe=Object.prototype;function gwe(n){var t=n&&n.constructor,e=typeof t=="function"&&t.prototype||mwe;return n===e}var KS=gwe;function xwe(n,t){for(var e=-1,r=Array(n);++e<n;)r[e]=t(e);return r}var ZG=xwe;var ywe="[object Arguments]";function bwe(n){return il(n)&&Wp(n)==ywe}var I2=bwe;var QG=Object.prototype,vwe=QG.hasOwnProperty,wwe=QG.propertyIsEnumerable,Cwe=I2(function(){return arguments}())?I2:function(n){return il(n)&&vwe.call(n,"callee")&&!wwe.call(n,"callee")},vv=Cwe;function Iwe(){return!1}var JG=Iwe;var nW=typeof exports=="object"&&exports&&!exports.nodeType&&exports,eW=nW&&typeof module=="object"&&module&&!module.nodeType&&module,Swe=eW&&eW.exports===nW,tW=Swe?hi.Buffer:void 0,Twe=tW?tW.isBuffer:void 0,Ewe=Twe||JG,XS=Ewe;var Nwe="[object Arguments]",Dwe="[object Array]",kwe="[object Boolean]",_we="[object Date]",Awe="[object Error]",Rwe="[object Function]",Mwe="[object Map]",Owe="[object Number]",Fwe="[object Object]",Pwe="[object RegExp]",$we="[object Set]",Lwe="[object String]",Bwe="[object WeakMap]",zwe="[object ArrayBuffer]",Vwe="[object DataView]",Uwe="[object Float32Array]",jwe="[object Float64Array]",Gwe="[object Int8Array]",Wwe="[object Int16Array]",Hwe="[object Int32Array]",qwe="[object Uint8Array]",Kwe="[object Uint8ClampedArray]",Xwe="[object Uint16Array]",Ywe="[object Uint32Array]",Qn={};Qn[Uwe]=Qn[jwe]=Qn[Gwe]=Qn[Wwe]=Qn[Hwe]=Qn[qwe]=Qn[Kwe]=Qn[Xwe]=Qn[Ywe]=!0;Qn[Nwe]=Qn[Dwe]=Qn[zwe]=Qn[kwe]=Qn[Vwe]=Qn[_we]=Qn[Awe]=Qn[Rwe]=Qn[Mwe]=Qn[Owe]=Qn[Fwe]=Qn[Pwe]=Qn[$we]=Qn[Lwe]=Qn[Bwe]=!1;function Zwe(n){return il(n)&&qS(n.length)&&!!Qn[Wp(n)]}var rW=Zwe;function Qwe(n){return function(t){return n(t)}}var oW=Qwe;var sW=typeof exports=="object"&&exports&&!exports.nodeType&&exports,wv=sW&&typeof module=="object"&&module&&!module.nodeType&&module,Jwe=wv&&wv.exports===sW,S2=Jwe&&jS.process,eCe=function(){try{var n=wv&&wv.require&&wv.require("util").types;return n||S2&&S2.binding&&S2.binding("util")}catch{}}(),T2=eCe;var iW=T2&&T2.isTypedArray,tCe=iW?oW(iW):rW,YS=tCe;var nCe=Object.prototype,rCe=nCe.hasOwnProperty;function oCe(n,t){var e=bv(n),r=!e&&vv(n),o=!e&&!r&&XS(n),s=!e&&!r&&!o&&YS(n),i=e||r||o||s,a=i?ZG(n.length,String):[],l=a.length;for(var c in n)(t||rCe.call(n,c))&&!(i&&(c=="length"||o&&(c=="offset"||c=="parent")||s&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||HS(c,l)))&&a.push(c);return a}var aW=oCe;function sCe(n,t){return function(e){return n(t(e))}}var lW=sCe;function iCe(n){var t=[];if(n!=null)for(var e in Object(n))t.push(e);return t}var cW=iCe;var aCe=Object.prototype,lCe=aCe.hasOwnProperty;function cCe(n){if(!Cs(n))return cW(n);var t=KS(n),e=[];for(var r in n)r=="constructor"&&(t||!lCe.call(n,r))||e.push(r);return e}var uW=cCe;function uCe(n){return mx(n)?aW(n,!0):uW(n)}var ZS=uCe;var pCe=fx(Object,"create"),Uc=pCe;function fCe(){this.__data__=Uc?Uc(null):{},this.size=0}var pW=fCe;function dCe(n){var t=this.has(n)&&delete this.__data__[n];return this.size-=t?1:0,t}var fW=dCe;var hCe="__lodash_hash_undefined__",mCe=Object.prototype,gCe=mCe.hasOwnProperty;function xCe(n){var t=this.__data__;if(Uc){var e=t[n];return e===hCe?void 0:e}return gCe.call(t,n)?t[n]:void 0}var dW=xCe;var yCe=Object.prototype,bCe=yCe.hasOwnProperty;function vCe(n){var t=this.__data__;return Uc?t[n]!==void 0:bCe.call(t,n)}var hW=vCe;var wCe="__lodash_hash_undefined__";function CCe(n,t){var e=this.__data__;return this.size+=this.has(n)?0:1,e[n]=Uc&&t===void 0?wCe:t,this}var mW=CCe;function gx(n){var t=-1,e=n==null?0:n.length;for(this.clear();++t<e;){var r=n[t];this.set(r[0],r[1])}}gx.prototype.clear=pW;gx.prototype.delete=fW;gx.prototype.get=dW;gx.prototype.has=hW;gx.prototype.set=mW;var E2=gx;function ICe(){this.__data__=[],this.size=0}var gW=ICe;function SCe(n,t){for(var e=n.length;e--;)if(Hp(n[e][0],t))return e;return-1}var qp=SCe;var TCe=Array.prototype,ECe=TCe.splice;function NCe(n){var t=this.__data__,e=qp(t,n);if(e<0)return!1;var r=t.length-1;return e==r?t.pop():ECe.call(t,e,1),--this.size,!0}var xW=NCe;function DCe(n){var t=this.__data__,e=qp(t,n);return e<0?void 0:t[e][1]}var yW=DCe;function kCe(n){return qp(this.__data__,n)>-1}var bW=kCe;function _Ce(n,t){var e=this.__data__,r=qp(e,n);return r<0?(++this.size,e.push([n,t])):e[r][1]=t,this}var vW=_Ce;function xx(n){var t=-1,e=n==null?0:n.length;for(this.clear();++t<e;){var r=n[t];this.set(r[0],r[1])}}xx.prototype.clear=gW;xx.prototype.delete=xW;xx.prototype.get=yW;xx.prototype.has=bW;xx.prototype.set=vW;var Kp=xx;var ACe=fx(hi,"Map"),QS=ACe;function RCe(){this.size=0,this.__data__={hash:new E2,map:new(QS||Kp),string:new E2}}var wW=RCe;function MCe(n){var t=typeof n;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?n!=="__proto__":n===null}var CW=MCe;function OCe(n,t){var e=n.__data__;return CW(t)?e[typeof t=="string"?"string":"hash"]:e.map}var Xp=OCe;function FCe(n){var t=Xp(this,n).delete(n);return this.size-=t?1:0,t}var IW=FCe;function PCe(n){return Xp(this,n).get(n)}var SW=PCe;function $Ce(n){return Xp(this,n).has(n)}var TW=$Ce;function LCe(n,t){var e=Xp(this,n),r=e.size;return e.set(n,t),this.size+=e.size==r?0:1,this}var EW=LCe;function yx(n){var t=-1,e=n==null?0:n.length;for(this.clear();++t<e;){var r=n[t];this.set(r[0],r[1])}}yx.prototype.clear=wW;yx.prototype.delete=IW;yx.prototype.get=SW;yx.prototype.has=TW;yx.prototype.set=EW;var NW=yx;var BCe=lW(Object.getPrototypeOf,Object),JS=BCe;var zCe="[object Object]",VCe=Function.prototype,UCe=Object.prototype,DW=VCe.toString,jCe=UCe.hasOwnProperty,GCe=DW.call(Object);function WCe(n){if(!il(n)||Wp(n)!=zCe)return!1;var t=JS(n);if(t===null)return!0;var e=jCe.call(t,"constructor")&&t.constructor;return typeof e=="function"&&e instanceof e&&DW.call(e)==GCe}var kW=WCe;function HCe(){this.__data__=new Kp,this.size=0}var _W=HCe;function qCe(n){var t=this.__data__,e=t.delete(n);return this.size=t.size,e}var AW=qCe;function KCe(n){return this.__data__.get(n)}var RW=KCe;function XCe(n){return this.__data__.has(n)}var MW=XCe;var YCe=200;function ZCe(n,t){var e=this.__data__;if(e instanceof Kp){var r=e.__data__;if(!QS||r.length<YCe-1)return r.push([n,t]),this.size=++e.size,this;e=this.__data__=new NW(r)}return e.set(n,t),this.size=e.size,this}var OW=ZCe;function bx(n){var t=this.__data__=new Kp(n);this.size=t.size}bx.prototype.clear=_W;bx.prototype.delete=AW;bx.prototype.get=RW;bx.prototype.has=MW;bx.prototype.set=OW;var FW=bx;var BW=typeof exports=="object"&&exports&&!exports.nodeType&&exports,PW=BW&&typeof module=="object"&&module&&!module.nodeType&&module,QCe=PW&&PW.exports===BW,$W=QCe?hi.Buffer:void 0,LW=$W?$W.allocUnsafe:void 0;function JCe(n,t){if(t)return n.slice();var e=n.length,r=LW?LW(e):new n.constructor(e);return n.copy(r),r}var zW=JCe;var eIe=hi.Uint8Array,N2=eIe;function tIe(n){var t=new n.constructor(n.byteLength);return new N2(t).set(new N2(n)),t}var VW=tIe;function nIe(n,t){var e=t?VW(n.buffer):n.buffer;return new n.constructor(e,n.byteOffset,n.length)}var UW=nIe;function rIe(n){return typeof n.constructor=="function"&&!KS(n)?$G(JS(n)):{}}var jW=rIe;function oIe(n){return function(t,e,r){for(var o=-1,s=Object(t),i=r(t),a=i.length;a--;){var l=i[n?a:++o];if(e(s[l],l,s)===!1)break}return t}}var GW=oIe;var sIe=GW(),WW=sIe;function iIe(n,t,e){(e!==void 0&&!Hp(n[t],e)||e===void 0&&!(t in n))&&hx(n,t,e)}var Cv=iIe;function aIe(n){return il(n)&&mx(n)}var HW=aIe;function lIe(n,t){if(!(t==="constructor"&&typeof n[t]=="function")&&t!="__proto__")return n[t]}var Iv=lIe;function cIe(n){return WG(n,ZS(n))}var qW=cIe;function uIe(n,t,e,r,o,s,i){var a=Iv(n,e),l=Iv(t,e),c=i.get(l);if(c){Cv(n,e,c);return}var u=s?s(a,l,e+"",n,t,i):void 0,p=u===void 0;if(p){var f=bv(l),d=!f&&XS(l),h=!f&&!d&&YS(l);u=l,f||d||h?bv(a)?u=a:HW(a)?u=BG(a):d?(p=!1,u=zW(l,!0)):h?(p=!1,u=UW(l,!0)):u=[]:kW(l)||vv(l)?(u=a,vv(a)?u=qW(a):(!Cs(a)||px(a))&&(u=jW(l))):p=!1}p&&(i.set(l,u),o(u,l,r,s,i),i.delete(l)),Cv(n,e,u)}var KW=uIe;function XW(n,t,e,r,o){n!==t&&WW(t,function(s,i){if(o||(o=new FW),Cs(s))KW(n,t,i,e,XW,r,o);else{var a=r?r(Iv(n,i),s,i+"",n,t,o):void 0;a===void 0&&(a=s),Cv(n,i,a)}},ZS)}var YW=XW;var pIe=YG(function(n,t,e){YW(n,t,e)}),D2=pIe;var fIe=[[255,99,132],[54,162,235],[255,206,86],[231,233,237],[75,192,192],[151,187,205],[220,220,220],[247,70,74],[70,191,189],[253,180,92],[148,159,177],[77,83,96]],dIe={datasets:{line:{backgroundColor:n=>Jo(es(n.datasetIndex),.4),borderColor:n=>Jo(es(n.datasetIndex),1),pointBackgroundColor:n=>Jo(es(n.datasetIndex),1),pointBorderColor:"#fff",pointHoverBackgroundColor:"#fff",pointHoverBorderColor:n=>Jo(es(n.datasetIndex),.8)},bar:{backgroundColor:n=>Jo(es(n.datasetIndex),.6),borderColor:n=>Jo(es(n.datasetIndex),1),hoverBackgroundColor:n=>Jo(es(n.datasetIndex),.8),hoverBorderColor:n=>Jo(es(n.datasetIndex),1)},get radar(){return this.line},doughnut:{backgroundColor:n=>Jo(es(n.dataIndex),.6),borderColor:"#fff",hoverBackgroundColor:n=>Jo(es(n.dataIndex),1),hoverBorderColor:n=>Jo(es(n.dataIndex),1)},get pie(){return this.doughnut},polarArea:{backgroundColor:n=>Jo(es(n.dataIndex),.6),borderColor:n=>Jo(es(n.dataIndex),1),hoverBackgroundColor:n=>Jo(es(n.dataIndex),.8),hoverBorderColor:n=>Jo(es(n.dataIndex),1)},get bubble(){return this.doughnut},get scatter(){return this.doughnut},get area(){return this.polarArea}}};function Jo(n,t){return"rgba("+n.concat(t).join(",")+")"}function k2(n,t){return Math.floor(Math.random()*(t-n+1))+n}function hIe(){return[k2(0,255),k2(0,255),k2(0,255)]}function es(n=0){return fIe[n]||hIe()}var ZW=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=Ze({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();Ld.register(...EG);var QW=(()=>{class n{constructor(e){e?.plugins&&Ld.register(...e?.plugins);let r=D2(dIe,e?.defaults||{});Mt.set(r)}static forRoot(e){return{ngModule:n,providers:[{provide:ZW,useValue:e}]}}}return n.\u0275fac=function(e){return new(e||n)(Xe(ZW,8))},n.\u0275mod=Yo({type:n}),n.\u0275inj=Xo({imports:[[]]}),n})();var Et="primary",Lv=Symbol("RouteTitle"),O2=class{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){let e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){let e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}};function Sx(n){return new O2(n)}function mIe(n,t,e){let r=e.path.split("/");if(r.length>n.length||e.pathMatch==="full"&&(t.hasChildren()||r.length<n.length))return null;let o={};for(let s=0;s<r.length;s++){let i=r[s],a=n[s];if(i.startsWith(":"))o[i.substring(1)]=a;else if(i!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:o}}function gIe(n,t){if(n.length!==t.length)return!1;for(let e=0;e<n.length;++e)if(!al(n[e],t[e]))return!1;return!0}function al(n,t){let e=n?F2(n):void 0,r=t?F2(t):void 0;if(!e||!r||e.length!=r.length)return!1;let o;for(let s=0;s<e.length;s++)if(o=e[s],!aH(n[o],t[o]))return!1;return!0}function F2(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function aH(n,t){if(Array.isArray(n)&&Array.isArray(t)){if(n.length!==t.length)return!1;let e=[...n].sort(),r=[...t].sort();return e.every((o,s)=>r[s]===o)}else return n===t}function lH(n){return n.length>0?n[n.length-1]:null}function Jp(n){return Kk(n)?n:Ub(n)?cr(Promise.resolve(n)):ut(n)}var xIe={exact:uH,subset:pH},cH={exact:yIe,subset:bIe,ignored:()=>!0};function JW(n,t,e){return xIe[e.paths](n.root,t.root,e.matrixParams)&&cH[e.queryParams](n.queryParams,t.queryParams)&&!(e.fragment==="exact"&&n.fragment!==t.fragment)}function yIe(n,t){return al(n,t)}function uH(n,t,e){if(!Vd(n.segments,t.segments)||!nT(n.segments,t.segments,e)||n.numberOfChildren!==t.numberOfChildren)return!1;for(let r in t.children)if(!n.children[r]||!uH(n.children[r],t.children[r],e))return!1;return!0}function bIe(n,t){return Object.keys(t).length<=Object.keys(n).length&&Object.keys(t).every(e=>aH(n[e],t[e]))}function pH(n,t,e){return fH(n,t,t.segments,e)}function fH(n,t,e,r){if(n.segments.length>e.length){let o=n.segments.slice(0,e.length);return!(!Vd(o,e)||t.hasChildren()||!nT(o,e,r))}else if(n.segments.length===e.length){if(!Vd(n.segments,e)||!nT(n.segments,e,r))return!1;for(let o in t.children)if(!n.children[o]||!pH(n.children[o],t.children[o],r))return!1;return!0}else{let o=e.slice(0,n.segments.length),s=e.slice(n.segments.length);return!Vd(n.segments,o)||!nT(n.segments,o,r)||!n.children[Et]?!1:fH(n.children[Et],t,s,r)}}function nT(n,t,e){return t.every((r,o)=>cH[e](n[o].parameters,r.parameters))}var Yp=class{constructor(t=new xn([],{}),e={},r=null){this.root=t,this.queryParams=e,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Sx(this.queryParams),this._queryParamMap}toString(){return CIe.serialize(this)}},xn=class{constructor(t,e){this.segments=t,this.children=e,this.parent=null,Object.values(e).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return rT(this)}},zd=class{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap??=Sx(this.parameters),this._parameterMap}toString(){return hH(this)}};function vIe(n,t){return Vd(n,t)&&n.every((e,r)=>al(e.parameters,t[r].parameters))}function Vd(n,t){return n.length!==t.length?!1:n.every((e,r)=>e.path===t[r].path)}function wIe(n,t){let e=[];return Object.entries(n.children).forEach(([r,o])=>{r===Et&&(e=e.concat(t(o,r)))}),Object.entries(n.children).forEach(([r,o])=>{r!==Et&&(e=e.concat(t(o,r)))}),e}var Bv=(()=>{let t=class t{};t.\u0275fac=function(o){return new(o||t)},t.\u0275prov=Ze({token:t,factory:()=>new _v,providedIn:"root"});let n=t;return n})(),_v=class{parse(t){let e=new $2(t);return new Yp(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){let e=`/${Sv(t.root,!0)}`,r=TIe(t.queryParams),o=typeof t.fragment=="string"?`#${IIe(t.fragment)}`:"";return`${e}${r}${o}`}},CIe=new _v;function rT(n){return n.segments.map(t=>hH(t)).join("/")}function Sv(n,t){if(!n.hasChildren())return rT(n);if(t){let e=n.children[Et]?Sv(n.children[Et],!1):"",r=[];return Object.entries(n.children).forEach(([o,s])=>{o!==Et&&r.push(`${o}:${Sv(s,!1)}`)}),r.length>0?`${e}(${r.join("//")})`:e}else{let e=wIe(n,(r,o)=>o===Et?[Sv(n.children[Et],!1)]:[`${o}:${Sv(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[Et]!=null?`${rT(n)}/${e[0]}`:`${rT(n)}/(${e.join("//")})`}}function dH(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function eT(n){return dH(n).replace(/%3B/gi,";")}function IIe(n){return encodeURI(n)}function P2(n){return dH(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function oT(n){return decodeURIComponent(n)}function eH(n){return oT(n.replace(/\+/g,"%20"))}function hH(n){return`${P2(n.path)}${SIe(n.parameters)}`}function SIe(n){return Object.entries(n).map(([t,e])=>`;${P2(t)}=${P2(e)}`).join("")}function TIe(n){let t=Object.entries(n).map(([e,r])=>Array.isArray(r)?r.map(o=>`${eT(e)}=${eT(o)}`).join("&"):`${eT(e)}=${eT(r)}`).filter(e=>e);return t.length?`?${t.join("&")}`:""}var EIe=/^[^\/()?;#]+/;function _2(n){let t=n.match(EIe);return t?t[0]:""}var NIe=/^[^\/()?;=#]+/;function DIe(n){let t=n.match(NIe);return t?t[0]:""}var kIe=/^[^=?&#]+/;function _Ie(n){let t=n.match(kIe);return t?t[0]:""}var AIe=/^[^&#]+/;function RIe(n){let t=n.match(AIe);return t?t[0]:""}var $2=class{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new xn([],{}):new xn([],this.parseChildren())}parseQueryParams(){let t={};if(this.consumeOptional("?"))do this.parseQueryParam(t);while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(r[Et]=new xn(t,e)),r}parseSegment(){let t=_2(this.remaining);if(t===""&&this.peekStartsWith(";"))throw new Je(4009,!1);return this.capture(t),new zd(oT(t),this.parseMatrixParams())}parseMatrixParams(){let t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){let e=DIe(this.remaining);if(!e)return;this.capture(e);let r="";if(this.consumeOptional("=")){let o=_2(this.remaining);o&&(r=o,this.capture(r))}t[oT(e)]=oT(r)}parseQueryParam(t){let e=_Ie(this.remaining);if(!e)return;this.capture(e);let r="";if(this.consumeOptional("=")){let i=RIe(this.remaining);i&&(r=i,this.capture(r))}let o=eH(e),s=eH(r);if(t.hasOwnProperty(o)){let i=t[o];Array.isArray(i)||(i=[i],t[o]=i),i.push(s)}else t[o]=s}parseParens(t){let e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=_2(this.remaining),o=this.remaining[r.length];if(o!=="/"&&o!==")"&&o!==";")throw new Je(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):t&&(s=Et);let i=this.parseChildren();e[s]=Object.keys(i).length===1?i[Et]:new xn([],i),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return this.peekStartsWith(t)?(this.remaining=this.remaining.substring(t.length),!0):!1}capture(t){if(!this.consumeOptional(t))throw new Je(4011,!1)}};function mH(n){return n.segments.length>0?new xn([],{[Et]:n}):n}function gH(n){let t={};for(let[r,o]of Object.entries(n.children)){let s=gH(o);if(r===Et&&s.segments.length===0&&s.hasChildren())for(let[i,a]of Object.entries(s.children))t[i]=a;else(s.segments.length>0||s.hasChildren())&&(t[r]=s)}let e=new xn(n.segments,t);return MIe(e)}function MIe(n){if(n.numberOfChildren===1&&n.children[Et]){let t=n.children[Et];return new xn(n.segments.concat(t.segments),t.children)}return n}function Tx(n){return n instanceof Yp}function OIe(n,t,e=null,r=null){let o=xH(n);return yH(o,t,e,r)}function xH(n){let t;function e(s){let i={};for(let l of s.children){let c=e(l);i[l.outlet]=c}let a=new xn(s.url,i);return s===n&&(t=a),a}let r=e(n.root),o=mH(r);return t??o}function yH(n,t,e,r){let o=n;for(;o.parent;)o=o.parent;if(t.length===0)return A2(o,o,o,e,r);let s=FIe(t);if(s.toRoot())return A2(o,o,new xn([],{}),e,r);let i=PIe(s,o,n),a=i.processChildren?Nv(i.segmentGroup,i.index,s.commands):vH(i.segmentGroup,i.index,s.commands);return A2(o,i.segmentGroup,a,e,r)}function sT(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function Av(n){return typeof n=="object"&&n!=null&&n.outlets}function A2(n,t,e,r,o){let s={};r&&Object.entries(r).forEach(([l,c])=>{s[l]=Array.isArray(c)?c.map(u=>`${u}`):`${c}`});let i;n===t?i=e:i=bH(n,t,e);let a=mH(gH(i));return new Yp(a,s,o)}function bH(n,t,e){let r={};return Object.entries(n.children).forEach(([o,s])=>{s===t?r[o]=e:r[o]=bH(s,t,e)}),new xn(n.segments,r)}var iT=class{constructor(t,e,r){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=r,t&&r.length>0&&sT(r[0]))throw new Je(4003,!1);let o=r.find(Av);if(o&&o!==lH(r))throw new Je(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function FIe(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new iT(!0,0,n);let t=0,e=!1,r=n.reduce((o,s,i)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([l,c])=>{a[l]=typeof c=="string"?c.split("/"):c}),[...o,{outlets:a}]}if(s.segmentPath)return[...o,s.segmentPath]}return typeof s!="string"?[...o,s]:i===0?(s.split("/").forEach((a,l)=>{l==0&&a==="."||(l==0&&a===""?e=!0:a===".."?t++:a!=""&&o.push(a))}),o):[...o,s]},[]);return new iT(e,t,r)}var Cx=class{constructor(t,e,r){this.segmentGroup=t,this.processChildren=e,this.index=r}};function PIe(n,t,e){if(n.isAbsolute)return new Cx(t,!0,0);if(!e)return new Cx(t,!1,NaN);if(e.parent===null)return new Cx(e,!0,0);let r=sT(n.commands[0])?0:1,o=e.segments.length-1+r;return $Ie(e,o,n.numberOfDoubleDots)}function $Ie(n,t,e){let r=n,o=t,s=e;for(;s>o;){if(s-=o,r=r.parent,!r)throw new Je(4005,!1);o=r.segments.length}return new Cx(r,!1,o-s)}function LIe(n){return Av(n[0])?n[0].outlets:{[Et]:n}}function vH(n,t,e){if(n??=new xn([],{}),n.segments.length===0&&n.hasChildren())return Nv(n,t,e);let r=BIe(n,t,e),o=e.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let s=new xn(n.segments.slice(0,r.pathIndex),{});return s.children[Et]=new xn(n.segments.slice(r.pathIndex),n.children),Nv(s,0,o)}else return r.match&&o.length===0?new xn(n.segments,{}):r.match&&!n.hasChildren()?L2(n,t,e):r.match?Nv(n,0,o):L2(n,t,e)}function Nv(n,t,e){if(e.length===0)return new xn(n.segments,{});{let r=LIe(e),o={};if(Object.keys(r).some(s=>s!==Et)&&n.children[Et]&&n.numberOfChildren===1&&n.children[Et].segments.length===0){let s=Nv(n.children[Et],t,e);return new xn(n.segments,s.children)}return Object.entries(r).forEach(([s,i])=>{typeof i=="string"&&(i=[i]),i!==null&&(o[s]=vH(n.children[s],t,i))}),Object.entries(n.children).forEach(([s,i])=>{r[s]===void 0&&(o[s]=i)}),new xn(n.segments,o)}}function BIe(n,t,e){let r=0,o=t,s={match:!1,pathIndex:0,commandIndex:0};for(;o<n.segments.length;){if(r>=e.length)return s;let i=n.segments[o],a=e[r];if(Av(a))break;let l=`${a}`,c=r<e.length-1?e[r+1]:null;if(o>0&&l===void 0)break;if(l&&c&&typeof c=="object"&&c.outlets===void 0){if(!nH(l,c,i))return s;r+=2}else{if(!nH(l,{},i))return s;r++}o++}return{match:!0,pathIndex:o,commandIndex:r}}function L2(n,t,e){let r=n.segments.slice(0,t),o=0;for(;o<e.length;){let s=e[o];if(Av(s)){let l=zIe(s.outlets);return new xn(r,l)}if(o===0&&sT(e[0])){let l=n.segments[t];r.push(new zd(l.path,tH(e[0]))),o++;continue}let i=Av(s)?s.outlets[Et]:`${s}`,a=o<e.length-1?e[o+1]:null;i&&a&&sT(a)?(r.push(new zd(i,tH(a))),o+=2):(r.push(new zd(i,{})),o++)}return new xn(r,{})}function zIe(n){let t={};return Object.entries(n).forEach(([e,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(t[e]=L2(new xn([],{}),0,r))}),t}function tH(n){let t={};return Object.entries(n).forEach(([e,r])=>t[e]=`${r}`),t}function nH(n,t,e){return n==e.path&&al(t,e.parameters)}var Dv="imperative",so=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(so||{}),mi=class{constructor(t,e){this.id=t,this.url=e}},Ex=class extends mi{constructor(t,e,r="imperative",o=null){super(t,e),this.type=so.NavigationStart,this.navigationTrigger=r,this.restoredState=o}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},jc=class extends mi{constructor(t,e,r){super(t,e),this.urlAfterRedirects=r,this.type=so.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Hs=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(Hs||{}),aT=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(aT||{}),Zp=class extends mi{constructor(t,e,r,o){super(t,e),this.reason=r,this.code=o,this.type=so.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Qp=class extends mi{constructor(t,e,r,o){super(t,e),this.reason=r,this.code=o,this.type=so.NavigationSkipped}},Rv=class extends mi{constructor(t,e,r,o){super(t,e),this.error=r,this.target=o,this.type=so.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},lT=class extends mi{constructor(t,e,r,o){super(t,e),this.urlAfterRedirects=r,this.state=o,this.type=so.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},B2=class extends mi{constructor(t,e,r,o){super(t,e),this.urlAfterRedirects=r,this.state=o,this.type=so.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},z2=class extends mi{constructor(t,e,r,o,s){super(t,e),this.urlAfterRedirects=r,this.state=o,this.shouldActivate=s,this.type=so.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},V2=class extends mi{constructor(t,e,r,o){super(t,e),this.urlAfterRedirects=r,this.state=o,this.type=so.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},U2=class extends mi{constructor(t,e,r,o){super(t,e),this.urlAfterRedirects=r,this.state=o,this.type=so.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},j2=class{constructor(t){this.route=t,this.type=so.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},G2=class{constructor(t){this.route=t,this.type=so.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},W2=class{constructor(t){this.snapshot=t,this.type=so.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},H2=class{constructor(t){this.snapshot=t,this.type=so.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},q2=class{constructor(t){this.snapshot=t,this.type=so.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},K2=class{constructor(t){this.snapshot=t,this.type=so.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},cT=class{constructor(t,e,r){this.routerEvent=t,this.position=e,this.anchor=r,this.type=so.Scroll}toString(){let t=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${t}')`}},Mv=class{},Ov=class{constructor(t){this.url=t}};var X2=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new zv,this.attachRef=null}},zv=(()=>{let t=class t{constructor(){this.contexts=new Map}onChildOutletCreated(r,o){let s=this.getOrCreateContext(r);s.outlet=o,this.contexts.set(r,s)}onChildOutletDestroyed(r){let o=this.getContext(r);o&&(o.outlet=null,o.attachRef=null)}onOutletDeactivated(){let r=this.contexts;return this.contexts=new Map,r}onOutletReAttached(r){this.contexts=r}getOrCreateContext(r){let o=this.getContext(r);return o||(o=new X2,this.contexts.set(r,o)),o}getContext(r){return this.contexts.get(r)||null}};t.\u0275fac=function(o){return new(o||t)},t.\u0275prov=Ze({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})(),uT=class{constructor(t){this._root=t}get root(){return this._root.value}parent(t){let e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){let e=Y2(t,this._root);return e?e.children.map(r=>r.value):[]}firstChild(t){let e=Y2(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){let e=Z2(t,this._root);return e.length<2?[]:e[e.length-2].children.map(o=>o.value).filter(o=>o!==t)}pathFromRoot(t){return Z2(t,this._root).map(e=>e.value)}};function Y2(n,t){if(n===t.value)return t;for(let e of t.children){let r=Y2(n,e);if(r)return r}return null}function Z2(n,t){if(n===t.value)return[t];for(let e of t.children){let r=Z2(n,e);if(r.length)return r.unshift(t),r}return[]}var Ws=class{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}};function wx(n){let t={};return n&&n.children.forEach(e=>t[e.value.outlet]=e),t}var pT=class extends uT{constructor(t,e){super(t),this.snapshot=e,aM(this,t)}toString(){return this.snapshot.toString()}};function wH(n){let t=VIe(n),e=new go([new zd("",{})]),r=new go({}),o=new go({}),s=new go({}),i=new go(""),a=new Nx(e,r,s,i,o,Et,n,t.root);return a.snapshot=t.root,new pT(new Ws(a,[]),t)}function VIe(n){let t={},e={},r={},o="",s=new Fv([],t,r,o,e,Et,n,null,{});return new fT("",new Ws(s,[]))}var Nx=class{constructor(t,e,r,o,s,i,a,l){this.urlSubject=t,this.paramsSubject=e,this.queryParamsSubject=r,this.fragmentSubject=o,this.dataSubject=s,this.outlet=i,this.component=a,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(At(c=>c[Lv]))??ut(void 0),this.url=t,this.params=e,this.queryParams=r,this.fragment=o,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(At(t=>Sx(t))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(At(t=>Sx(t))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function iM(n,t,e="emptyOnly"){let r,{routeConfig:o}=n;return t!==null&&(e==="always"||o?.path===""||!t.component&&!t.routeConfig?.loadComponent)?r={params:Ge(Ge({},t.params),n.params),data:Ge(Ge({},t.data),n.data),resolve:Ge(Ge(Ge(Ge({},n.data),t.data),o?.data),n._resolvedData)}:r={params:Ge({},n.params),data:Ge({},n.data),resolve:Ge(Ge({},n.data),n._resolvedData??{})},o&&IH(o)&&(r.resolve[Lv]=o.title),r}var Fv=class{get title(){return this.data?.[Lv]}constructor(t,e,r,o,s,i,a,l,c){this.url=t,this.params=e,this.queryParams=r,this.fragment=o,this.data=s,this.outlet=i,this.component=a,this.routeConfig=l,this._resolve=c}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Sx(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Sx(this.queryParams),this._queryParamMap}toString(){let t=this.url.map(r=>r.toString()).join("/"),e=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${t}', path:'${e}')`}},fT=class extends uT{constructor(t,e){super(e),this.url=t,aM(this,e)}toString(){return CH(this._root)}};function aM(n,t){t.value._routerState=n,t.children.forEach(e=>aM(n,e))}function CH(n){let t=n.children.length>0?` { ${n.children.map(CH).join(", ")} } `:"";return`${n.value}${t}`}function R2(n){if(n.snapshot){let t=n.snapshot,e=n._futureSnapshot;n.snapshot=e,al(t.queryParams,e.queryParams)||n.queryParamsSubject.next(e.queryParams),t.fragment!==e.fragment&&n.fragmentSubject.next(e.fragment),al(t.params,e.params)||n.paramsSubject.next(e.params),gIe(t.url,e.url)||n.urlSubject.next(e.url),al(t.data,e.data)||n.dataSubject.next(e.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function Q2(n,t){let e=al(n.params,t.params)&&vIe(n.url,t.url),r=!n.parent!=!t.parent;return e&&!r&&(!n.parent||Q2(n.parent,t.parent))}function IH(n){return typeof n.title=="string"||n.title===null}var lM=(()=>{let t=class t{constructor(){this.activated=null,this._activatedRoute=null,this.name=Et,this.activateEvents=new Do,this.deactivateEvents=new Do,this.attachEvents=new Do,this.detachEvents=new Do,this.parentContexts=ke(zv),this.location=ke(Mp),this.changeDetector=ke(jb),this.environmentInjector=ke(ko),this.inputBinder=ke(xT,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(r){if(r.name){let{firstChange:o,previousValue:s}=r.name;if(o)return;this.isTrackedInParentContexts(s)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(s)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(r){return this.parentContexts.getContext(r)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let r=this.parentContexts.getContext(this.name);r?.route&&(r.attachRef?this.attach(r.attachRef,r.route):this.activateWith(r.route,r.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Je(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Je(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Je(4012,!1);this.location.detach();let r=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(r.instance),r}attach(r,o){this.activated=r,this._activatedRoute=o,this.location.insert(r.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(r.instance)}deactivate(){if(this.activated){let r=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(r)}}activateWith(r,o){if(this.isActivated)throw new Je(4013,!1);this._activatedRoute=r;let s=this.location,a=r.snapshot.component,l=this.parentContexts.getOrCreateContext(this.name).children,c=new J2(r,l,s.injector);this.activated=s.createComponent(a,{index:s.length,injector:c,environmentInjector:o??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};t.\u0275fac=function(o){return new(o||t)},t.\u0275dir=wd({type:t,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Lb]});let n=t;return n})(),J2=class n{__ngOutletInjector(t){return new n(this.route,this.childContexts,t)}constructor(t,e,r){this.route=t,this.childContexts=e,this.parent=r}get(t,e){return t===Nx?this.route:t===zv?this.childContexts:this.parent.get(t,e)}},xT=new ot(""),rH=(()=>{let t=class t{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(r){this.unsubscribeFromRouteData(r),this.subscribeToRouteData(r)}unsubscribeFromRouteData(r){this.outletDataSubscriptions.get(r)?.unsubscribe(),this.outletDataSubscriptions.delete(r)}subscribeToRouteData(r){let{activatedRoute:o}=r,s=Cb([o.queryParams,o.params,o.data]).pipe(xs(([i,a,l],c)=>(l=Ge(Ge(Ge({},i),a),l),c===0?ut(l):Promise.resolve(l)))).subscribe(i=>{if(!r.isActivated||!r.activatedComponentRef||r.activatedRoute!==o||o.component===null){this.unsubscribeFromRouteData(r);return}let a=OU(o.component);if(!a){this.unsubscribeFromRouteData(r);return}for(let{templateName:l}of a.inputs)r.activatedComponentRef.setInput(l,i[l])});this.outletDataSubscriptions.set(r,s)}};t.\u0275fac=function(o){return new(o||t)},t.\u0275prov=Ze({token:t,factory:t.\u0275fac});let n=t;return n})();function UIe(n,t,e){let r=Pv(n,t._root,e?e._root:void 0);return new pT(r,t)}function Pv(n,t,e){if(e&&n.shouldReuseRoute(t.value,e.value.snapshot)){let r=e.value;r._futureSnapshot=t.value;let o=jIe(n,t,e);return new Ws(r,o)}else{if(n.shouldAttach(t.value)){let s=n.retrieve(t.value);if(s!==null){let i=s.route;return i.value._futureSnapshot=t.value,i.children=t.children.map(a=>Pv(n,a)),i}}let r=GIe(t.value),o=t.children.map(s=>Pv(n,s));return new Ws(r,o)}}function jIe(n,t,e){return t.children.map(r=>{for(let o of e.children)if(n.shouldReuseRoute(r.value,o.value.snapshot))return Pv(n,r,o);return Pv(n,r)})}function GIe(n){return new Nx(new go(n.url),new go(n.params),new go(n.queryParams),new go(n.fragment),new go(n.data),n.outlet,n.component,n)}var SH="ngNavigationCancelingError";function TH(n,t){let{redirectTo:e,navigationBehaviorOptions:r}=Tx(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,o=EH(!1,Hs.Redirect);return o.url=e,o.navigationBehaviorOptions=r,o}function EH(n,t){let e=new Error(`NavigationCancelingError: ${n||""}`);return e[SH]=!0,e.cancellationCode=t,e}function WIe(n){return NH(n)&&Tx(n.url)}function NH(n){return!!n&&n[SH]}var HIe=(()=>{let t=class t{};t.\u0275fac=function(o){return new(o||t)},t.\u0275cmp=ui({type:t,selectors:[["ng-component"]],standalone:!0,features:[vU],decls:1,vars:0,template:function(o,s){o&1&&Qo(0,"router-outlet")},dependencies:[lM],encapsulation:2});let n=t;return n})();function qIe(n,t){return n.providers&&!n._injector&&(n._injector=VI(n.providers,t,`Route: ${n.path}`)),n._injector??t}function cM(n){let t=n.children&&n.children.map(cM),e=t?lr(Ge({},n),{children:t}):Ge({},n);return!e.component&&!e.loadComponent&&(t||e.loadChildren)&&e.outlet&&e.outlet!==Et&&(e.component=HIe),e}function ll(n){return n.outlet||Et}function KIe(n,t){let e=n.filter(r=>ll(r)===t);return e.push(...n.filter(r=>ll(r)!==t)),e}function Vv(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let t=n.parent;t;t=t.parent){let e=t.routeConfig;if(e?._loadedInjector)return e._loadedInjector;if(e?._injector)return e._injector}return null}var XIe=(n,t,e,r)=>At(o=>(new eM(t,o.targetRouterState,o.currentRouterState,e,r).activate(n),o)),eM=class{constructor(t,e,r,o,s){this.routeReuseStrategy=t,this.futureState=e,this.currState=r,this.forwardEvent=o,this.inputBindingEnabled=s}activate(t){let e=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,r,t),R2(this.futureState.root),this.activateChildRoutes(e,r,t)}deactivateChildRoutes(t,e,r){let o=wx(e);t.children.forEach(s=>{let i=s.value.outlet;this.deactivateRoutes(s,o[i],r),delete o[i]}),Object.values(o).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(t,e,r){let o=t.value,s=e?e.value:null;if(o===s)if(o.component){let i=r.getContext(o.outlet);i&&this.deactivateChildRoutes(t,e,i.children)}else this.deactivateChildRoutes(t,e,r);else s&&this.deactivateRouteAndItsChildren(e,r)}deactivateRouteAndItsChildren(t,e){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){let r=e.getContext(t.value.outlet),o=r&&t.value.component?r.children:e,s=wx(t);for(let i of Object.values(s))this.deactivateRouteAndItsChildren(i,o);if(r&&r.outlet){let i=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:i,route:t,contexts:a})}}deactivateRouteAndOutlet(t,e){let r=e.getContext(t.value.outlet),o=r&&t.value.component?r.children:e,s=wx(t);for(let i of Object.values(s))this.deactivateRouteAndItsChildren(i,o);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(t,e,r){let o=wx(e);t.children.forEach(s=>{this.activateRoutes(s,o[s.value.outlet],r),this.forwardEvent(new K2(s.value.snapshot))}),t.children.length&&this.forwardEvent(new H2(t.value.snapshot))}activateRoutes(t,e,r){let o=t.value,s=e?e.value:null;if(R2(o),o===s)if(o.component){let i=r.getOrCreateContext(o.outlet);this.activateChildRoutes(t,e,i.children)}else this.activateChildRoutes(t,e,r);else if(o.component){let i=r.getOrCreateContext(o.outlet);if(this.routeReuseStrategy.shouldAttach(o.snapshot)){let a=this.routeReuseStrategy.retrieve(o.snapshot);this.routeReuseStrategy.store(o.snapshot,null),i.children.onOutletReAttached(a.contexts),i.attachRef=a.componentRef,i.route=a.route.value,i.outlet&&i.outlet.attach(a.componentRef,a.route.value),R2(a.route.value),this.activateChildRoutes(t,null,i.children)}else{let a=Vv(o.snapshot);i.attachRef=null,i.route=o,i.injector=a,i.outlet&&i.outlet.activateWith(o,i.injector),this.activateChildRoutes(t,null,i.children)}}else this.activateChildRoutes(t,null,r)}},dT=class{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}},Ix=class{constructor(t,e){this.component=t,this.route=e}};function YIe(n,t,e){let r=n._root,o=t?t._root:null;return Tv(r,o,e,[r.value])}function ZIe(n){let t=n.routeConfig?n.routeConfig.canActivateChild:null;return!t||t.length===0?null:{node:n,guards:t}}function kx(n,t){let e=Symbol(),r=t.get(n,e);return r===e?typeof n=="function"&&!S3(n)?n:t.get(n):r}function Tv(n,t,e,r,o={canDeactivateChecks:[],canActivateChecks:[]}){let s=wx(t);return n.children.forEach(i=>{QIe(i,s[i.value.outlet],e,r.concat([i.value]),o),delete s[i.value.outlet]}),Object.entries(s).forEach(([i,a])=>kv(a,e.getContext(i),o)),o}function QIe(n,t,e,r,o={canDeactivateChecks:[],canActivateChecks:[]}){let s=n.value,i=t?t.value:null,a=e?e.getContext(n.value.outlet):null;if(i&&s.routeConfig===i.routeConfig){let l=JIe(i,s,s.routeConfig.runGuardsAndResolvers);l?o.canActivateChecks.push(new dT(r)):(s.data=i.data,s._resolvedData=i._resolvedData),s.component?Tv(n,t,a?a.children:null,r,o):Tv(n,t,e,r,o),l&&a&&a.outlet&&a.outlet.isActivated&&o.canDeactivateChecks.push(new Ix(a.outlet.component,i))}else i&&kv(t,a,o),o.canActivateChecks.push(new dT(r)),s.component?Tv(n,null,a?a.children:null,r,o):Tv(n,null,e,r,o);return o}function JIe(n,t,e){if(typeof e=="function")return e(n,t);switch(e){case"pathParamsChange":return!Vd(n.url,t.url);case"pathParamsOrQueryParamsChange":return!Vd(n.url,t.url)||!al(n.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Q2(n,t)||!al(n.queryParams,t.queryParams);case"paramsChange":default:return!Q2(n,t)}}function kv(n,t,e){let r=wx(n),o=n.value;Object.entries(r).forEach(([s,i])=>{o.component?t?kv(i,t.children.getContext(s),e):kv(i,null,e):kv(i,t,e)}),o.component?t&&t.outlet&&t.outlet.isActivated?e.canDeactivateChecks.push(new Ix(t.outlet.component,o)):e.canDeactivateChecks.push(new Ix(null,o)):e.canDeactivateChecks.push(new Ix(null,o))}function Uv(n){return typeof n=="function"}function eSe(n){return typeof n=="boolean"}function tSe(n){return n&&Uv(n.canLoad)}function nSe(n){return n&&Uv(n.canActivate)}function rSe(n){return n&&Uv(n.canActivateChild)}function oSe(n){return n&&Uv(n.canDeactivate)}function sSe(n){return n&&Uv(n.canMatch)}function DH(n){return n instanceof Ec||n?.name==="EmptyError"}var tT=Symbol("INITIAL_VALUE");function Dx(){return xs(n=>Cb(n.map(t=>t.pipe(Dc(1),Qk(tT)))).pipe(At(t=>{for(let e of t)if(e!==!0){if(e===tT)return tT;if(e===!1||e instanceof Yp)return e}return!0}),gs(t=>t!==tT),Dc(1)))}function iSe(n,t){return Rr(e=>{let{targetSnapshot:r,currentSnapshot:o,guards:{canActivateChecks:s,canDeactivateChecks:i}}=e;return i.length===0&&s.length===0?ut(lr(Ge({},e),{guardsResult:!0})):aSe(i,r,o,n).pipe(Rr(a=>a&&eSe(a)?lSe(r,s,n,t):ut(a)),At(a=>lr(Ge({},e),{guardsResult:a})))})}function aSe(n,t,e,r){return cr(n).pipe(Rr(o=>dSe(o.component,o.route,e,t,r)),Va(o=>o!==!0,!0))}function lSe(n,t,e,r){return cr(t).pipe(Nc(o=>Cg(uSe(o.route.parent,r),cSe(o.route,r),fSe(n,o.path,e),pSe(n,o.route,e))),Va(o=>o!==!0,!0))}function cSe(n,t){return n!==null&&t&&t(new q2(n)),ut(!0)}function uSe(n,t){return n!==null&&t&&t(new W2(n)),ut(!0)}function pSe(n,t,e){let r=t.routeConfig?t.routeConfig.canActivate:null;if(!r||r.length===0)return ut(!0);let o=r.map(s=>qC(()=>{let i=Vv(t)??e,a=kx(s,i),l=nSe(a)?a.canActivate(t,n):Wi(i,()=>a(t,n));return Jp(l).pipe(Va())}));return ut(o).pipe(Dx())}function fSe(n,t,e){let r=t[t.length-1],s=t.slice(0,t.length-1).reverse().map(i=>ZIe(i)).filter(i=>i!==null).map(i=>qC(()=>{let a=i.guards.map(l=>{let c=Vv(i.node)??e,u=kx(l,c),p=rSe(u)?u.canActivateChild(r,n):Wi(c,()=>u(r,n));return Jp(p).pipe(Va())});return ut(a).pipe(Dx())}));return ut(s).pipe(Dx())}function dSe(n,t,e,r,o){let s=t&&t.routeConfig?t.routeConfig.canDeactivate:null;if(!s||s.length===0)return ut(!0);let i=s.map(a=>{let l=Vv(t)??o,c=kx(a,l),u=oSe(c)?c.canDeactivate(n,t,e,r):Wi(l,()=>c(n,t,e,r));return Jp(u).pipe(Va())});return ut(i).pipe(Dx())}function hSe(n,t,e,r){let o=t.canLoad;if(o===void 0||o.length===0)return ut(!0);let s=o.map(i=>{let a=kx(i,n),l=tSe(a)?a.canLoad(t,e):Wi(n,()=>a(t,e));return Jp(l)});return ut(s).pipe(Dx(),kH(r))}function kH(n){return Gk(ro(t=>{if(Tx(t))throw TH(n,t)}),At(t=>t===!0))}function mSe(n,t,e,r){let o=t.canMatch;if(!o||o.length===0)return ut(!0);let s=o.map(i=>{let a=kx(i,n),l=sSe(a)?a.canMatch(t,e):Wi(n,()=>a(t,e));return Jp(l)});return ut(s).pipe(Dx(),kH(r))}var $v=class{constructor(t){this.segmentGroup=t||null}},hT=class extends Error{constructor(t){super(),this.urlTree=t}};function vx(n){return vg(new $v(n))}function gSe(n){return vg(new Je(4e3,!1))}function xSe(n){return vg(EH(!1,Hs.GuardRejected))}var tM=class{constructor(t,e){this.urlSerializer=t,this.urlTree=e}lineralizeSegments(t,e){let r=[],o=e.root;for(;;){if(r=r.concat(o.segments),o.numberOfChildren===0)return ut(r);if(o.numberOfChildren>1||!o.children[Et])return gSe(t.redirectTo);o=o.children[Et]}}applyRedirectCommands(t,e,r){let o=this.applyRedirectCreateUrlTree(e,this.urlSerializer.parse(e),t,r);if(e.startsWith("/"))throw new hT(o);return o}applyRedirectCreateUrlTree(t,e,r,o){let s=this.createSegmentGroup(t,e.root,r,o);return new Yp(s,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){let r={};return Object.entries(t).forEach(([o,s])=>{if(typeof s=="string"&&s.startsWith(":")){let a=s.substring(1);r[o]=e[a]}else r[o]=s}),r}createSegmentGroup(t,e,r,o){let s=this.createSegments(t,e.segments,r,o),i={};return Object.entries(e.children).forEach(([a,l])=>{i[a]=this.createSegmentGroup(t,l,r,o)}),new xn(s,i)}createSegments(t,e,r,o){return e.map(s=>s.path.startsWith(":")?this.findPosParam(t,s,o):this.findOrReturn(s,r))}findPosParam(t,e,r){let o=r[e.path.substring(1)];if(!o)throw new Je(4001,!1);return o}findOrReturn(t,e){let r=0;for(let o of e){if(o.path===t.path)return e.splice(r),o;r++}return t}},nM={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function ySe(n,t,e,r,o){let s=uM(n,t,e);return s.matched?(r=qIe(t,r),mSe(r,t,e,o).pipe(At(i=>i===!0?s:Ge({},nM)))):ut(s)}function uM(n,t,e){if(t.path==="**")return bSe(e);if(t.path==="")return t.pathMatch==="full"&&(n.hasChildren()||e.length>0)?Ge({},nM):{matched:!0,consumedSegments:[],remainingSegments:e,parameters:{},positionalParamSegments:{}};let o=(t.matcher||mIe)(e,n,t);if(!o)return Ge({},nM);let s={};Object.entries(o.posParams??{}).forEach(([a,l])=>{s[a]=l.path});let i=o.consumed.length>0?Ge(Ge({},s),o.consumed[o.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:o.consumed,remainingSegments:e.slice(o.consumed.length),parameters:i,positionalParamSegments:o.posParams??{}}}function bSe(n){return{matched:!0,parameters:n.length>0?lH(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function oH(n,t,e,r){return e.length>0&&CSe(n,e,r)?{segmentGroup:new xn(t,wSe(r,new xn(e,n.children))),slicedSegments:[]}:e.length===0&&ISe(n,e,r)?{segmentGroup:new xn(n.segments,vSe(n,e,r,n.children)),slicedSegments:e}:{segmentGroup:new xn(n.segments,n.children),slicedSegments:e}}function vSe(n,t,e,r){let o={};for(let s of e)if(yT(n,t,s)&&!r[ll(s)]){let i=new xn([],{});o[ll(s)]=i}return Ge(Ge({},r),o)}function wSe(n,t){let e={};e[Et]=t;for(let r of n)if(r.path===""&&ll(r)!==Et){let o=new xn([],{});e[ll(r)]=o}return e}function CSe(n,t,e){return e.some(r=>yT(n,t,r)&&ll(r)!==Et)}function ISe(n,t,e){return e.some(r=>yT(n,t,r))}function yT(n,t,e){return(n.hasChildren()||t.length>0)&&e.pathMatch==="full"?!1:e.path===""}function SSe(n,t,e,r){return ll(n)!==r&&(r===Et||!yT(t,e,n))?!1:uM(t,n,e).matched}function TSe(n,t,e){return t.length===0&&!n.children[e]}var rM=class{};function ESe(n,t,e,r,o,s,i="emptyOnly"){return new oM(n,t,e,r,o,i,s).recognize()}var NSe=31,oM=class{constructor(t,e,r,o,s,i,a){this.injector=t,this.configLoader=e,this.rootComponentType=r,this.config=o,this.urlTree=s,this.paramsInheritanceStrategy=i,this.urlSerializer=a,this.applyRedirects=new tM(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(t){return new Je(4002,`'${t.segmentGroup}'`)}recognize(){let t=oH(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(t).pipe(At(e=>{let r=new Fv([],Object.freeze({}),Object.freeze(Ge({},this.urlTree.queryParams)),this.urlTree.fragment,{},Et,this.rootComponentType,null,{}),o=new Ws(r,e),s=new fT("",o),i=OIe(r,[],this.urlTree.queryParams,this.urlTree.fragment);return i.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(i),this.inheritParamsAndData(s._root,null),{state:s,tree:i}}))}match(t){return this.processSegmentGroup(this.injector,this.config,t,Et).pipe(Tp(r=>{if(r instanceof hT)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof $v?this.noMatchError(r):r}))}inheritParamsAndData(t,e){let r=t.value,o=iM(r,e,this.paramsInheritanceStrategy);r.params=Object.freeze(o.params),r.data=Object.freeze(o.data),t.children.forEach(s=>this.inheritParamsAndData(s,r))}processSegmentGroup(t,e,r,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(t,e,r):this.processSegment(t,e,r,r.segments,o,!0).pipe(At(s=>s instanceof Ws?[s]:[]))}processChildren(t,e,r){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return cr(o).pipe(Nc(s=>{let i=r.children[s],a=KIe(e,s);return this.processSegmentGroup(t,a,i,s)}),Zk((s,i)=>(s.push(...i),s)),Ep(null),Yk(),Rr(s=>{if(s===null)return vx(r);let i=_H(s);return DSe(i),ut(i)}))}processSegment(t,e,r,o,s,i){return cr(e).pipe(Nc(a=>this.processSegmentAgainstRoute(a._injector??t,e,a,r,o,s,i).pipe(Tp(l=>{if(l instanceof $v)return ut(null);throw l}))),Va(a=>!!a),Tp(a=>{if(DH(a))return TSe(r,o,s)?ut(new rM):vx(r);throw a}))}processSegmentAgainstRoute(t,e,r,o,s,i,a){return SSe(r,o,s,i)?r.redirectTo===void 0?this.matchSegmentAgainstRoute(t,o,r,s,i):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(t,o,e,r,s,i):vx(o):vx(o)}expandSegmentAgainstRouteUsingRedirect(t,e,r,o,s,i){let{matched:a,consumedSegments:l,positionalParamSegments:c,remainingSegments:u}=uM(e,o,s);if(!a)return vx(e);o.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>NSe&&(this.allowRedirects=!1));let p=this.applyRedirects.applyRedirectCommands(l,o.redirectTo,c);return this.applyRedirects.lineralizeSegments(o,p).pipe(Rr(f=>this.processSegment(t,r,e,f.concat(u),i,!1)))}matchSegmentAgainstRoute(t,e,r,o,s){let i=ySe(e,r,o,t,this.urlSerializer);return r.path==="**"&&(e.children={}),i.pipe(xs(a=>a.matched?(t=r._injector??t,this.getChildConfig(t,r,o).pipe(xs(({routes:l})=>{let c=r._loadedInjector??t,{consumedSegments:u,remainingSegments:p,parameters:f}=a,d=new Fv(u,f,Object.freeze(Ge({},this.urlTree.queryParams)),this.urlTree.fragment,_Se(r),ll(r),r.component??r._loadedComponent??null,r,ASe(r)),{segmentGroup:h,slicedSegments:m}=oH(e,u,p,l);if(m.length===0&&h.hasChildren())return this.processChildren(c,l,h).pipe(At(x=>x===null?null:new Ws(d,x)));if(l.length===0&&m.length===0)return ut(new Ws(d,[]));let g=ll(r)===s;return this.processSegment(c,l,h,m,g?Et:s,!0).pipe(At(x=>new Ws(d,x instanceof Ws?[x]:[])))}))):vx(e)))}getChildConfig(t,e,r){return e.children?ut({routes:e.children,injector:t}):e.loadChildren?e._loadedRoutes!==void 0?ut({routes:e._loadedRoutes,injector:e._loadedInjector}):hSe(t,e,r,this.urlSerializer).pipe(Rr(o=>o?this.configLoader.loadChildren(t,e).pipe(ro(s=>{e._loadedRoutes=s.routes,e._loadedInjector=s.injector})):xSe(e))):ut({routes:[],injector:t})}};function DSe(n){n.sort((t,e)=>t.value.outlet===Et?-1:e.value.outlet===Et?1:t.value.outlet.localeCompare(e.value.outlet))}function kSe(n){let t=n.value.routeConfig;return t&&t.path===""}function _H(n){let t=[],e=new Set;for(let r of n){if(!kSe(r)){t.push(r);continue}let o=t.find(s=>r.value.routeConfig===s.value.routeConfig);o!==void 0?(o.children.push(...r.children),e.add(o)):t.push(r)}for(let r of e){let o=_H(r.children);t.push(new Ws(r.value,o))}return t.filter(r=>!e.has(r))}function _Se(n){return n.data||{}}function ASe(n){return n.resolve||{}}function RSe(n,t,e,r,o,s){return Rr(i=>ESe(n,t,e,r,i.extractedUrl,o,s).pipe(At(({state:a,tree:l})=>lr(Ge({},i),{targetSnapshot:a,urlAfterRedirects:l}))))}function MSe(n,t){return Rr(e=>{let{targetSnapshot:r,guards:{canActivateChecks:o}}=e;if(!o.length)return ut(e);let s=new Set(o.map(l=>l.route)),i=new Set;for(let l of s)if(!i.has(l))for(let c of AH(l))i.add(c);let a=0;return cr(i).pipe(Nc(l=>s.has(l)?OSe(l,r,n,t):(l.data=iM(l,l.parent,n).resolve,ut(void 0))),ro(()=>a++),Ig(1),Rr(l=>a===i.size?ut(e):Ls))})}function AH(n){let t=n.children.map(e=>AH(e)).flat();return[n,...t]}function OSe(n,t,e,r){let o=n.routeConfig,s=n._resolve;return o?.title!==void 0&&!IH(o)&&(s[Lv]=o.title),FSe(s,n,t,r).pipe(At(i=>(n._resolvedData=i,n.data=iM(n,n.parent,e).resolve,null)))}function FSe(n,t,e,r){let o=F2(n);if(o.length===0)return ut({});let s={};return cr(o).pipe(Rr(i=>PSe(n[i],t,e,r).pipe(Va(),ro(a=>{s[i]=a}))),Ig(1),Xk(s),Tp(i=>DH(i)?Ls:vg(i)))}function PSe(n,t,e,r){let o=Vv(t)??r,s=kx(n,o),i=s.resolve?s.resolve(t,e):Wi(o,()=>s(t,e));return Jp(i)}function M2(n){return xs(t=>{let e=n(t);return e?cr(e).pipe(At(()=>t)):ut(t)})}var RH=(()=>{let t=class t{buildTitle(r){let o,s=r.root;for(;s!==void 0;)o=this.getResolvedTitleForRoute(s)??o,s=s.children.find(i=>i.outlet===Et);return o}getResolvedTitleForRoute(r){return r.data[Lv]}};t.\u0275fac=function(o){return new(o||t)},t.\u0275prov=Ze({token:t,factory:()=>ke($Se),providedIn:"root"});let n=t;return n})(),$Se=(()=>{let t=class t extends RH{constructor(r){super(),this.title=r}updateTitle(r){let o=this.buildTitle(r);o!==void 0&&this.title.setTitle(o)}};t.\u0275fac=function(o){return new(o||t)(Xe(b4))},t.\u0275prov=Ze({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})(),jv=new ot("",{providedIn:"root",factory:()=>({})}),mT=new ot(""),pM=(()=>{let t=class t{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=ke(qI)}loadComponent(r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return ut(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let o=Jp(r.loadComponent()).pipe(At(MH),ro(i=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=i}),Np(()=>{this.componentLoaders.delete(r)})),s=new bg(o,()=>new qo).pipe(yg());return this.componentLoaders.set(r,s),s}loadChildren(r,o){if(this.childrenLoaders.get(o))return this.childrenLoaders.get(o);if(o._loadedRoutes)return ut({routes:o._loadedRoutes,injector:o._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(o);let i=LSe(o,this.compiler,r,this.onLoadEndListener).pipe(Np(()=>{this.childrenLoaders.delete(o)})),a=new bg(i,()=>new qo).pipe(yg());return this.childrenLoaders.set(o,a),a}};t.\u0275fac=function(o){return new(o||t)},t.\u0275prov=Ze({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})();function LSe(n,t,e,r){return Jp(n.loadChildren()).pipe(At(MH),Rr(o=>o instanceof Ob||Array.isArray(o)?ut(o):cr(t.compileModuleAsync(o))),At(o=>{r&&r(n);let s,i,a=!1;return Array.isArray(o)?(i=o,a=!0):(s=o.create(e).injector,i=s.get(mT,[],{optional:!0,self:!0}).flat()),{routes:i.map(cM),injector:s}}))}function BSe(n){return n&&typeof n=="object"&&"default"in n}function MH(n){return BSe(n)?n.default:n}var fM=(()=>{let t=class t{};t.\u0275fac=function(o){return new(o||t)},t.\u0275prov=Ze({token:t,factory:()=>ke(zSe),providedIn:"root"});let n=t;return n})(),zSe=(()=>{let t=class t{shouldProcessUrl(r){return!0}extract(r){return r}merge(r,o){return r}};t.\u0275fac=function(o){return new(o||t)},t.\u0275prov=Ze({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})(),OH=new ot(""),FH=new ot("");function VSe(n,t,e){let r=n.get(FH),o=n.get(_o);return n.get(Tn).runOutsideAngular(()=>{if(!o.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(c=>setTimeout(c));let s,i=new Promise(c=>{s=c}),a=o.startViewTransition(()=>(s(),USe(n))),{onViewTransitionCreated:l}=r;return l&&Wi(n,()=>l({transition:a,from:t,to:e})),i})}function USe(n){return new Promise(t=>{zI(t,{injector:n})})}var dM=(()=>{let t=class t{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new qo,this.transitionAbortSubject=new qo,this.configLoader=ke(pM),this.environmentInjector=ke(ko),this.urlSerializer=ke(Bv),this.rootContexts=ke(zv),this.location=ke(Gg),this.inputBindingEnabled=ke(xT,{optional:!0})!==null,this.titleStrategy=ke(RH),this.options=ke(jv,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=ke(fM),this.createViewTransition=ke(OH,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>ut(void 0),this.rootComponentType=null;let r=s=>this.events.next(new j2(s)),o=s=>this.events.next(new G2(s));this.configLoader.onLoadEndListener=o,this.configLoader.onLoadStartListener=r}complete(){this.transitions?.complete()}handleNavigationRequest(r){let o=++this.navigationId;this.transitions?.next(lr(Ge(Ge({},this.transitions.value),r),{id:o}))}setupNavigations(r,o,s){return this.transitions=new go({id:0,currentUrlTree:o,currentRawUrl:o,extractedUrl:this.urlHandlingStrategy.extract(o),urlAfterRedirects:this.urlHandlingStrategy.extract(o),rawUrl:o,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Dv,restoredState:null,currentSnapshot:s.snapshot,targetSnapshot:null,currentRouterState:s,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(gs(i=>i.id!==0),At(i=>lr(Ge({},i),{extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),xs(i=>{let a=!1,l=!1;return ut(i).pipe(xs(c=>{if(this.navigationId>i.id)return this.cancelNavigationTransition(i,"",Hs.SupersededByNewNavigation),Ls;this.currentTransition=i,this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?lr(Ge({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let u=!r.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),p=c.extras.onSameUrlNavigation??r.onSameUrlNavigation;if(!u&&p!=="reload"){let f="";return this.events.next(new Qp(c.id,this.urlSerializer.serialize(c.rawUrl),f,aT.IgnoredSameUrlNavigation)),c.resolve(null),Ls}if(this.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return ut(c).pipe(xs(f=>{let d=this.transitions?.getValue();return this.events.next(new Ex(f.id,this.urlSerializer.serialize(f.extractedUrl),f.source,f.restoredState)),d!==this.transitions?.getValue()?Ls:Promise.resolve(f)}),RSe(this.environmentInjector,this.configLoader,this.rootComponentType,r.config,this.urlSerializer,this.paramsInheritanceStrategy),ro(f=>{i.targetSnapshot=f.targetSnapshot,i.urlAfterRedirects=f.urlAfterRedirects,this.currentNavigation=lr(Ge({},this.currentNavigation),{finalUrl:f.urlAfterRedirects});let d=new lT(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(d)}));if(u&&this.urlHandlingStrategy.shouldProcessUrl(c.currentRawUrl)){let{id:f,extractedUrl:d,source:h,restoredState:m,extras:g}=c,x=new Ex(f,this.urlSerializer.serialize(d),h,m);this.events.next(x);let b=wH(this.rootComponentType).snapshot;return this.currentTransition=i=lr(Ge({},c),{targetSnapshot:b,urlAfterRedirects:d,extras:lr(Ge({},g),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=d,ut(i)}else{let f="";return this.events.next(new Qp(c.id,this.urlSerializer.serialize(c.extractedUrl),f,aT.IgnoredByUrlHandlingStrategy)),c.resolve(null),Ls}}),ro(c=>{let u=new B2(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(u)}),At(c=>(this.currentTransition=i=lr(Ge({},c),{guards:YIe(c.targetSnapshot,c.currentSnapshot,this.rootContexts)}),i)),iSe(this.environmentInjector,c=>this.events.next(c)),ro(c=>{if(i.guardsResult=c.guardsResult,Tx(c.guardsResult))throw TH(this.urlSerializer,c.guardsResult);let u=new z2(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(u)}),gs(c=>c.guardsResult?!0:(this.cancelNavigationTransition(c,"",Hs.GuardRejected),!1)),M2(c=>{if(c.guards.canActivateChecks.length)return ut(c).pipe(ro(u=>{let p=new V2(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(p)}),xs(u=>{let p=!1;return ut(u).pipe(MSe(this.paramsInheritanceStrategy,this.environmentInjector),ro({next:()=>p=!0,complete:()=>{p||this.cancelNavigationTransition(u,"",Hs.NoDataFromResolver)}}))}),ro(u=>{let p=new U2(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(p)}))}),M2(c=>{let u=p=>{let f=[];p.routeConfig?.loadComponent&&!p.routeConfig._loadedComponent&&f.push(this.configLoader.loadComponent(p.routeConfig).pipe(ro(d=>{p.component=d}),At(()=>{})));for(let d of p.children)f.push(...u(d));return f};return Cb(u(c.targetSnapshot.root)).pipe(Ep(null),Dc(1))}),M2(()=>this.afterPreactivation()),xs(()=>{let{currentSnapshot:c,targetSnapshot:u}=i,p=this.createViewTransition?.(this.environmentInjector,c.root,u.root);return p?cr(p).pipe(At(()=>i)):ut(i)}),At(c=>{let u=UIe(r.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return this.currentTransition=i=lr(Ge({},c),{targetRouterState:u}),this.currentNavigation.targetRouterState=u,i}),ro(()=>{this.events.next(new Mv)}),XIe(this.rootContexts,r.routeReuseStrategy,c=>this.events.next(c),this.inputBindingEnabled),Dc(1),ro({next:c=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new jc(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects))),this.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{a=!0}}),Jk(this.transitionAbortSubject.pipe(ro(c=>{throw c}))),Np(()=>{!a&&!l&&this.cancelNavigationTransition(i,"",Hs.SupersededByNewNavigation),this.currentTransition?.id===i.id&&(this.currentNavigation=null,this.currentTransition=null)}),Tp(c=>{if(l=!0,NH(c))this.events.next(new Zp(i.id,this.urlSerializer.serialize(i.extractedUrl),c.message,c.cancellationCode)),WIe(c)?this.events.next(new Ov(c.url)):i.resolve(!1);else{this.events.next(new Rv(i.id,this.urlSerializer.serialize(i.extractedUrl),c,i.targetSnapshot??void 0));try{i.resolve(r.errorHandler(c))}catch(u){this.options.resolveNavigationPromiseOnError?i.resolve(!1):i.reject(u)}}return Ls}))}))}cancelNavigationTransition(r,o,s){let i=new Zp(r.id,this.urlSerializer.serialize(r.extractedUrl),o,s);this.events.next(i),r.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}};t.\u0275fac=function(o){return new(o||t)},t.\u0275prov=Ze({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})();function jSe(n){return n!==Dv}var GSe=(()=>{let t=class t{};t.\u0275fac=function(o){return new(o||t)},t.\u0275prov=Ze({token:t,factory:()=>ke(WSe),providedIn:"root"});let n=t;return n})(),sM=class{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}},WSe=(()=>{let t=class t extends sM{};t.\u0275fac=(()=>{let r;return function(s){return(r||(r=vA(t)))(s||t)}})(),t.\u0275prov=Ze({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})(),PH=(()=>{let t=class t{};t.\u0275fac=function(o){return new(o||t)},t.\u0275prov=Ze({token:t,factory:()=>ke(HSe),providedIn:"root"});let n=t;return n})(),HSe=(()=>{let t=class t extends PH{constructor(){super(...arguments),this.location=ke(Gg),this.urlSerializer=ke(Bv),this.options=ke(jv,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=ke(fM),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Yp,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=wH(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(r){return this.location.subscribe(o=>{o.type==="popstate"&&r(o.url,o.state)})}handleRouterEvent(r,o){if(r instanceof Ex)this.stateMemento=this.createStateMemento();else if(r instanceof Qp)this.rawUrlTree=o.initialUrl;else if(r instanceof lT){if(this.urlUpdateStrategy==="eager"&&!o.extras.skipLocationChange){let s=this.urlHandlingStrategy.merge(o.finalUrl,o.initialUrl);this.setBrowserUrl(s,o)}}else r instanceof Mv?(this.currentUrlTree=o.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(o.finalUrl,o.initialUrl),this.routerState=o.targetRouterState,this.urlUpdateStrategy==="deferred"&&(o.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,o))):r instanceof Zp&&(r.code===Hs.GuardRejected||r.code===Hs.NoDataFromResolver)?this.restoreHistory(o):r instanceof Rv?this.restoreHistory(o,!0):r instanceof jc&&(this.lastSuccessfulId=r.id,this.currentPageId=this.browserPageId)}setBrowserUrl(r,o){let s=this.urlSerializer.serialize(r);if(this.location.isCurrentPathEqualTo(s)||o.extras.replaceUrl){let i=this.browserPageId,a=Ge(Ge({},o.extras.state),this.generateNgRouterState(o.id,i));this.location.replaceState(s,"",a)}else{let i=Ge(Ge({},o.extras.state),this.generateNgRouterState(o.id,this.browserPageId+1));this.location.go(s,"",i)}}restoreHistory(r,o=!1){if(this.canceledNavigationResolution==="computed"){let s=this.browserPageId,i=this.currentPageId-s;i!==0?this.location.historyGo(i):this.currentUrlTree===r.finalUrl&&i===0&&(this.resetState(r),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(o&&this.resetState(r),this.resetUrlToCurrentUrlTree())}resetState(r){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,r.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(r,o){return this.canceledNavigationResolution==="computed"?{navigationId:r,\u0275routerPageId:o}:{navigationId:r}}};t.\u0275fac=(()=>{let r;return function(s){return(r||(r=vA(t)))(s||t)}})(),t.\u0275prov=Ze({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})(),Ev=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(Ev||{});function $H(n,t){n.events.pipe(gs(e=>e instanceof jc||e instanceof Zp||e instanceof Rv||e instanceof Qp),At(e=>e instanceof jc||e instanceof Qp?Ev.COMPLETE:(e instanceof Zp?e.code===Hs.Redirect||e.code===Hs.SupersededByNewNavigation:!1)?Ev.REDIRECTING:Ev.FAILED),gs(e=>e!==Ev.REDIRECTING),Dc(1)).subscribe(()=>{t()})}function qSe(n){throw n}var KSe={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},XSe={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},ts=(()=>{let t=class t{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=ke(UI),this.stateManager=ke(PH),this.options=ke(jv,{optional:!0})||{},this.pendingTasks=ke(Id),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=ke(dM),this.urlSerializer=ke(Bv),this.location=ke(Gg),this.urlHandlingStrategy=ke(fM),this._events=new qo,this.errorHandler=this.options.errorHandler||qSe,this.navigated=!1,this.routeReuseStrategy=ke(GSe),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=ke(mT,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!ke(xT,{optional:!0}),this.eventsSubscription=new Wr,this.isNgZoneEnabled=ke(Tn)instanceof Tn&&Tn.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:r=>{this.console.warn(r)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let r=this.navigationTransitions.events.subscribe(o=>{try{let s=this.navigationTransitions.currentTransition,i=this.navigationTransitions.currentNavigation;if(s!==null&&i!==null){if(this.stateManager.handleRouterEvent(o,i),o instanceof Zp&&o.code!==Hs.Redirect&&o.code!==Hs.SupersededByNewNavigation)this.navigated=!0;else if(o instanceof jc)this.navigated=!0;else if(o instanceof Ov){let a=this.urlHandlingStrategy.merge(o.url,s.currentRawUrl),l={info:s.extras.info,skipLocationChange:s.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||jSe(s.source)};this.scheduleNavigation(a,Dv,null,l,{resolve:s.resolve,reject:s.reject,promise:s.promise})}}ZSe(o)&&this._events.next(o)}catch(s){this.navigationTransitions.transitionAbortSubject.next(s)}});this.eventsSubscription.add(r)}resetRootComponentType(r){this.routerState.root.component=r,this.navigationTransitions.rootComponentType=r}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Dv,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((r,o)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(r,"popstate",o)},0)})}navigateToSyncWithBrowser(r,o,s){let i={replaceUrl:!0},a=s?.navigationId?s:null;if(s){let c=Ge({},s);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(i.state=c)}let l=this.parseUrl(r);this.scheduleNavigation(l,o,a,i)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(r){this.config=r.map(cM),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(r,o={}){let{relativeTo:s,queryParams:i,fragment:a,queryParamsHandling:l,preserveFragment:c}=o,u=c?this.currentUrlTree.fragment:a,p=null;switch(l){case"merge":p=Ge(Ge({},this.currentUrlTree.queryParams),i);break;case"preserve":p=this.currentUrlTree.queryParams;break;default:p=i||null}p!==null&&(p=this.removeEmptyProps(p));let f;try{let d=s?s.snapshot:this.routerState.snapshot.root;f=xH(d)}catch{(typeof r[0]!="string"||!r[0].startsWith("/"))&&(r=[]),f=this.currentUrlTree.root}return yH(f,r,p,u??null)}navigateByUrl(r,o={skipLocationChange:!1}){let s=Tx(r)?r:this.parseUrl(r),i=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(i,Dv,null,o)}navigate(r,o={skipLocationChange:!1}){return YSe(r),this.navigateByUrl(this.createUrlTree(r,o),o)}serializeUrl(r){return this.urlSerializer.serialize(r)}parseUrl(r){try{return this.urlSerializer.parse(r)}catch{return this.urlSerializer.parse("/")}}isActive(r,o){let s;if(o===!0?s=Ge({},KSe):o===!1?s=Ge({},XSe):s=o,Tx(r))return JW(this.currentUrlTree,r,s);let i=this.parseUrl(r);return JW(this.currentUrlTree,i,s)}removeEmptyProps(r){return Object.entries(r).reduce((o,[s,i])=>(i!=null&&(o[s]=i),o),{})}scheduleNavigation(r,o,s,i,a){if(this.disposed)return Promise.resolve(!1);let l,c,u;a?(l=a.resolve,c=a.reject,u=a.promise):u=new Promise((f,d)=>{l=f,c=d});let p=this.pendingTasks.add();return $H(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(p))}),this.navigationTransitions.handleNavigationRequest({source:o,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:r,extras:i,resolve:l,reject:c,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(f=>Promise.reject(f))}};t.\u0275fac=function(o){return new(o||t)},t.\u0275prov=Ze({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})();function YSe(n){for(let t=0;t<n.length;t++)if(n[t]==null)throw new Je(4008,!1)}function ZSe(n){return!(n instanceof Mv)&&!(n instanceof Ov)}var gT=class{};var QSe=(()=>{let t=class t{constructor(r,o,s,i,a){this.router=r,this.injector=s,this.preloadingStrategy=i,this.loader=a}setUpPreloading(){this.subscription=this.router.events.pipe(gs(r=>r instanceof jc),Nc(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(r,o){let s=[];for(let i of o){i.providers&&!i._injector&&(i._injector=VI(i.providers,r,`Route: ${i.path}`));let a=i._injector??r,l=i._loadedInjector??a;(i.loadChildren&&!i._loadedRoutes&&i.canLoad===void 0||i.loadComponent&&!i._loadedComponent)&&s.push(this.preloadConfig(a,i)),(i.children||i._loadedRoutes)&&s.push(this.processRoutes(l,i.children??i._loadedRoutes))}return cr(s).pipe(wg())}preloadConfig(r,o){return this.preloadingStrategy.preload(o,()=>{let s;o.loadChildren&&o.canLoad===void 0?s=this.loader.loadChildren(r,o):s=ut(null);let i=s.pipe(Rr(a=>a===null?ut(void 0):(o._loadedRoutes=a.routes,o._loadedInjector=a.injector,this.processRoutes(a.injector??r,a.routes))));if(o.loadComponent&&!o._loadedComponent){let a=this.loader.loadComponent(o);return cr([i,a]).pipe(wg())}else return i})}};t.\u0275fac=function(o){return new(o||t)(Xe(ts),Xe(qI),Xe(ko),Xe(gT),Xe(pM))},t.\u0275prov=Ze({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})(),LH=new ot(""),JSe=(()=>{let t=class t{constructor(r,o,s,i,a={}){this.urlSerializer=r,this.transitions=o,this.viewportScroller=s,this.zone=i,this.options=a,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},this.environmentInjector=ke(ko),a.scrollPositionRestoration||="disabled",a.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof Ex?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=r.navigationTrigger,this.restoredId=r.restoredState?r.restoredState.navigationId:0):r instanceof jc?(this.lastId=r.id,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.urlAfterRedirects).fragment)):r instanceof Qp&&r.code===aT.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof cT&&(r.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(r.position):r.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(r.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(r,o){this.zone.runOutsideAngular(()=>ee(this,null,function*(){yield new Promise(s=>{setTimeout(()=>{s()}),zI(()=>{s()},{injector:this.environmentInjector})}),this.zone.run(()=>{this.transitions.events.next(new cT(r,this.lastSource==="popstate"?this.store[this.restoredId]:null,o))})}))}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}};t.\u0275fac=function(o){KV()},t.\u0275prov=Ze({token:t,factory:t.\u0275fac});let n=t;return n})();function eTe(n){return n.routerState.root}function Gv(n,t){return{\u0275kind:n,\u0275providers:t}}function tTe(){let n=ke(Za);return t=>{let e=n.get(Dd);if(t!==e.components[0])return;let r=n.get(ts),o=n.get(BH);n.get(hM)===1&&r.initialNavigation(),n.get(zH,null,Ot.Optional)?.setUpPreloading(),n.get(LH,null,Ot.Optional)?.init(),r.resetRootComponentType(e.componentTypes[0]),o.closed||(o.next(),o.complete(),o.unsubscribe())}}var BH=new ot("",{factory:()=>new qo}),hM=new ot("",{providedIn:"root",factory:()=>1});function nTe(){return Gv(2,[{provide:hM,useValue:0},{provide:WI,multi:!0,deps:[Za],useFactory:t=>{let e=t.get(GU,Promise.resolve());return()=>e.then(()=>new Promise(r=>{let o=t.get(ts),s=t.get(BH);$H(o,()=>{r(!0)}),t.get(dM).afterPreactivation=()=>(r(!0),s.closed?ut(void 0):s),o.initialNavigation()}))}}])}function rTe(){return Gv(3,[{provide:WI,multi:!0,useFactory:()=>{let t=ke(ts);return()=>{t.setUpLocationChangeListener()}}},{provide:hM,useValue:2}])}var zH=new ot("");function oTe(n){return Gv(0,[{provide:zH,useExisting:QSe},{provide:gT,useExisting:n}])}function sTe(){return Gv(8,[rH,{provide:xT,useExisting:rH}])}function iTe(n){let t=[{provide:OH,useValue:VSe},{provide:FH,useValue:Ge({skipNextTransition:!!n?.skipInitialTransition},n)}];return Gv(9,t)}var sH=new ot("ROUTER_FORROOT_GUARD"),aTe=[Gg,{provide:Bv,useClass:_v},ts,zv,{provide:Nx,useFactory:eTe,deps:[ts]},pM,[]],mM=(()=>{let t=class t{constructor(r){}static forRoot(r,o){return{ngModule:t,providers:[aTe,[],{provide:mT,multi:!0,useValue:r},{provide:sH,useFactory:pTe,deps:[[ts,new NI,new nA]]},{provide:jv,useValue:o||{}},o?.useHash?cTe():uTe(),lTe(),o?.preloadingStrategy?oTe(o.preloadingStrategy).\u0275providers:[],o?.initialNavigation?fTe(o):[],o?.bindToComponentInputs?sTe().\u0275providers:[],o?.enableViewTransitions?iTe().\u0275providers:[],dTe()]}}static forChild(r){return{ngModule:t,providers:[{provide:mT,multi:!0,useValue:r}]}}};t.\u0275fac=function(o){return new(o||t)(Xe(sH,8))},t.\u0275mod=Yo({type:t}),t.\u0275inj=Xo({});let n=t;return n})();function lTe(){return{provide:LH,useFactory:()=>{let n=ke(QU),t=ke(Tn),e=ke(jv),r=ke(dM),o=ke(Bv);return e.scrollOffset&&n.setOffset(e.scrollOffset),new JSe(o,r,n,t,e)}}}function cTe(){return{provide:_d,useClass:HU}}function uTe(){return{provide:_d,useClass:tR}}function pTe(n){return"guarded"}function fTe(n){return[n.initialNavigation==="disabled"?rTe().\u0275providers:[],n.initialNavigation==="enabledBlocking"?nTe().\u0275providers:[]]}var iH=new ot("");function dTe(){return[{provide:iH,useFactory:tTe},{provide:HI,multi:!0,useExisting:iH}]}var VH=(()=>{let t=class t{constructor(r){this.router=r}openObjectDetection(){this.router.navigate(["/object-detection"])}openImageClassification(){this.router.navigate(["/image-classification"])}openHandGesture(){this.router.navigate(["/hand-gesture"])}};t.\u0275fac=function(o){return new(o||t)(Tr(ts))},t.\u0275cmp=ui({type:t,selectors:[["app-dashboard"]],decls:24,vars:0,consts:[[1,"dashboard"],[1,"card-container"],[1,"card",3,"click"],["src","assets/images/object-detection.png","alt","Object Detection"],["src","assets/images/image-classification.png","alt","Image Classification"],["src","assets/images/hand-gesture.png","alt","Hand Gesture Detection"]],template:function(o,s){o&1&&(Ft(0,"div",0)(1,"h1"),Pn(2,"Vision X"),zt(),Ft(3,"p"),Pn(4," Hi! Trying out some cool features of Web Development and Computer Vision "),zt(),Ft(5,"div",1)(6,"div",2),zs("click",function(){return s.openObjectDetection()}),Qo(7,"img",3),Ft(8,"h2"),Pn(9,"Object Detection"),zt(),Ft(10,"p"),Pn(11,"Detect objects in real-time using your device's camera."),zt()(),Ft(12,"div",2),zs("click",function(){return s.openImageClassification()}),Qo(13,"img",4),Ft(14,"h2"),Pn(15,"Image Classification"),zt(),Ft(16,"p"),Pn(17,"Classify images from uploaded photos. Coming soon!"),zt()(),Ft(18,"div",2),zs("click",function(){return s.openHandGesture()}),Qo(19,"img",5),Ft(20,"h2"),Pn(21,"Hand Gesture Detection"),zt(),Ft(22,"p"),Pn(23,"Detect hand gestures in real-time using your camera. Coming soon!"),zt()()()())},styles:["body[_ngcontent-%COMP%]{background:radial-gradient(circle,#0e0e0e,#1a1a1a);font-family:Roboto,sans-serif;color:#0fc}.dashboard[_ngcontent-%COMP%]{text-align:center;padding:40px}.dashboard[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:3em;color:#0fc;margin-bottom:30px;text-transform:uppercase;letter-spacing:2px;text-shadow:0 0 15px rgba(0,255,204,.7)}.dashboard[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.3em;color:#b0b0b0;margin-bottom:50px;line-height:1.5;max-width:800px;margin-left:auto;margin-right:auto;text-shadow:0 0 10px rgba(0,255,204,.4)}.card-container[_ngcontent-%COMP%]{display:flex;justify-content:space-around;flex-wrap:wrap;gap:20px}.card[_ngcontent-%COMP%]{background-color:#1a1a1a;border-radius:10px;box-shadow:0 6px 12px #00ffcc1a;width:300px;padding:30px;text-align:center;transition:transform .3s,box-shadow .3s;cursor:pointer;margin:20px;border:1px solid #00ffcc}.card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100px;height:100px;margin-bottom:20px;filter:drop-shadow(0 0 5px #00ffcc)}.card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.8em;color:#0fc;margin-bottom:15px;font-weight:700;text-shadow:0 0 10px rgba(0,255,204,.7)}.card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#a3a3a3;font-size:1em;text-shadow:0 0 5px rgba(0,255,204,.4)}.card[_ngcontent-%COMP%]:hover{transform:translateY(-10px);box-shadow:0 12px 24px #0fc6}.future-feature[_ngcontent-%COMP%]{opacity:.6;pointer-events:none;cursor:not-allowed}@media (max-width: 768px){.card-container[_ngcontent-%COMP%]{flex-direction:column;align-items:center}.card[_ngcontent-%COMP%]{width:90%;margin-bottom:20px}}"]});let n=t;return n})();var Vle=ad(DX());N();G();vt();Ue();hy();var hE={kernelName:Wc,inputsToSave:["x"],gradFunc:(n,t)=>{let[e]=t;return{x:()=>B(n,ei(fe(e,"float32"),-1))}}};G();vt();Zt();Lr();kn();fa();br();on();var kX={kernelName:fl,inputsToSave:["x"],gradFunc:(n,t)=>{let[e]=t;return{x:()=>{let r=lt(fe(e,"float32")),o=qt(be(Ie(1),r));return pt(xe(n,o))}}}};G();vt();Zt();fa();br();on();var _X={kernelName:dl,inputsToSave:["x"],gradFunc:(n,t)=>{let[e]=t;return{x:()=>{let r=qt(be(lt(fe(e,"float32")),1));return xe(n,r)}}}};G();bn();Oe();Jn();var AX={kernelName:gi,inputsToSave:["a","b"],gradFunc:(n,t)=>{let[e,r]=t,o=rt(e.shape,r.shape);return{a:()=>{let a=n,l=nn(e.shape,o);return l.length>0&&(a=Ee(a,l)),V(a,e.shape)},b:()=>{let a=n,l=nn(r.shape,o);return l.length>0&&(a=Ee(a,l)),V(a,r.shape)}}}};G();var RX={kernelName:Hc,saveAllInputs:!0,gradFunc:(n,t)=>{let e={};return t.forEach((r,o)=>{e[o]=()=>n.clone()}),e}};G();Dn();var MX={kernelName:qc,inputsToSave:["x"],gradFunc:(n,t)=>{let[e]=t;return{x:()=>ze(e)}}};G();Dn();var OX={kernelName:Kc,inputsToSave:["x"],gradFunc:(n,t)=>{let[e]=t;return{x:()=>ze(e)}}};G();vt();Zt();kn();fa();br();on();var FX={kernelName:hl,inputsToSave:["x"],gradFunc:(n,t)=>{let[e]=t;return{x:()=>xe(n,qt(be(Ie(1),lt(fe(e,"float32")))))}}};G();Nn();vt();Zt();kn();fa();br();var PX={kernelName:ml,inputsToSave:["x"],gradFunc:(n,t)=>{let[e]=t;return{x:()=>{let r=qt(ae(Ie(1),lt(fe(e,"float32"))));return xe(n,r)}}}};G();Nn();bn();Zt();Ue();Lr();Oe();br();Jn();var $X={kernelName:yl,inputsToSave:["a","b"],gradFunc:(n,t)=>{let[e,r]=t,o=rt(e.shape,r.shape);return{a:()=>{let a=ae(lt(e),lt(r)),l=B(n,xe(r,a)),c=nn(e.shape,o);return c.length>0&&(l=Ee(l,c)),V(l,e.shape)},b:()=>{let a=ae(lt(e),lt(r)),l=pt(B(n,xe(e,a))),c=nn(r.shape,o);return c.length>0&&(l=Ee(l,c)),V(l,r.shape)}}}};G();Nn();vt();Zt();br();var LX={kernelName:gl,inputsToSave:["x"],gradFunc:(n,t)=>{let[e]=t;return{x:()=>xe(n,ae(lt(fe(e,"float32")),1))}}};G();vt();Zt();br();on();kn();var BX={kernelName:xl,inputsToSave:["x"],gradFunc:(n,t)=>{let[e]=t;return{x:()=>xe(n,be(Ie(1),lt(fe(e,"float32"))))}}};G();oe();G();J();ce();Nr();Z();Oe();function p2e(n,t,e,r,o,s){let i=T(n,"dy","avgPool3dGrad"),a=T(t,"input","avgPool3dGrad"),l=i,c=a,u=!1;a.rank===4&&(u=!0,l=V(i,[1,i.shape[0],i.shape[1],i.shape[2],i.shape[3]]),c=V(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]])),O(l.rank===5,()=>`Error in avgPool3dGrad: dy must be rank 5 but got rank ${l.rank}.`),O(c.rank===5,()=>`Error in avgPool3dGrad: input must be rank 5 but got rank ${c.rank}.`),dn("avgPool3dGrad",o,s);let p={dy:l,input:c},f={filterSize:e,strides:r,pad:o,dimRoundingMode:s},d=R.runKernel(Kd,p,f);return u?V(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}var zX=_({avgPool3dGrad_:p2e});var VX={kernelName:Yc,inputsToSave:["x"],gradFunc:(n,t,e)=>{let[r]=t,{filterSize:o,strides:s,pad:i,dimRoundingMode:a}=e;return{x:()=>zX(n,r,o,s,i,a)}}};G();oe();G();J();ce();Z();Oe();function f2e(n,t,e,r,o){let s=T(n,"dy","avgPoolGrad"),i=T(t,"input","avgPoolGrad");O(i.rank===s.rank,()=>`Rank of input (${i.rank}) does not match rank of dy (${s.rank})`);let a=i,l=s,c=!1;i.rank===3&&(c=!0,a=V(i,[1,i.shape[0],i.shape[1],i.shape[2]]),l=V(s,[1,s.shape[0],s.shape[1],s.shape[2]])),O(l.rank===4,()=>`Error in avgPoolGrad: dy must be rank 4 but got rank ${l.rank}.`),O(a.rank===4,()=>`Error in avgPoolGrad: input must be rank 4 but got rank ${a.rank}.`);let u={dy:l,input:a},p={filterSize:e,strides:r,pad:o},f=R.runKernel(qd,u,p);return c?V(f,[f.shape[1],f.shape[2],f.shape[3]]):f}var UX=_({avgPoolGrad_:f2e});var jX={kernelName:Xc,inputsToSave:["x"],gradFunc:(n,t,e)=>{let[r]=t,{filterSize:o,strides:s,pad:i}=e;return{x:()=>UX(n,r,o,s,i)}}};G();ia();var GX={kernelName:Zc,inputsToSave:["a","b"],gradFunc:(n,t,e)=>{let[r,o]=t,{transposeA:s,transposeB:i}=e;return!s&&!i?{a:()=>st(n,o,!1,!0),b:()=>st(r,n,!0,!1)}:!s&&i?{a:()=>st(n,o,!1,!1),b:()=>st(n,r,!0,!1)}:s&&!i?{a:()=>st(o,n,!1,!0),b:()=>st(r,n,!1,!1)}:{a:()=>st(o,n,!0,!0),b:()=>st(n,r,!0,!0)}}};G();rw();var WX={kernelName:Qc,gradFunc:(n,t,e)=>{let{blockShape:r,crops:o}=e;return{x:()=>tp(n,r,o)}}};G();Jn();var HX={kernelName:TM,gradFunc:(n,t,e)=>{let r=e,o=r.inputShape,s=r.shape,i=Array.from(s);for(let l=o.length-1;l>=0;l--)if(o[l]===s[l])i[l]=1;else if(o[l]!==1)throw new Error(`broadcastTo(): [${o}] cannot be broadcast to [${s}].`);let a=[];for(let l=0;l<i.length;l++)i[l]>1&&a.push(l);return{x:()=>Ee(n,a,!0)}}};G();var qX={kernelName:Zi,gradFunc:n=>({x:()=>n.clone()})};G();Dn();var KX={kernelName:bl,gradFunc:n=>({x:()=>ze(n)})};G();gm();Df();ym();Js();Dn();var XX={kernelName:vl,inputsToSave:["x"],gradFunc:(n,t,e)=>{let[r]=t,{clipValueMin:o,clipValueMax:s}=e;return{x:()=>rn(Zr(Co(r,o),ss(r,s)),n,ze(n))}}};G();var YX={kernelName:Jc,inputsToSave:["x"],gradFunc:hE.gradFunc};G();Mm();ce();var ZX={kernelName:eu,saveAllInputs:!0,gradFunc:(n,t,e)=>{let r=t.map(l=>l.shape),{axis:o}=e,s=yr(o,t[0].shape)[0],i=r.map(l=>l[s]);return dr(n,i,s).map(l=>()=>l)}};G();T1();WT();Nr();ce();var QX={kernelName:tu,inputsToSave:["x","filter"],gradFunc:(n,t,e)=>{let[r,o]=t,{dilations:s,strides:i,pad:a,dataFormat:l}=e;return O(Xs(s),()=>`Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${s}'`),{x:()=>oy(r.shape,n,o,i,a,l),filter:()=>yy(r,n,o.shape,i,a,l)}}};G();um();T1();var JX={kernelName:nu,inputsToSave:["dy","filter"],gradFunc:(n,t,e)=>{let[r,o]=t,{strides:s,pad:i,dataFormat:a,dimRoundingMode:l}=e;return{dy:()=>Po(n,o,s,i,a,1,l),filter:()=>yy(n,r,o.shape,s,i,a,l)}}};G();oe();G();ce();Z();Oe();function d2e(n,t,e,r,o){let s=n;n.rank===4&&(s=V(n,[1,n.shape[0],n.shape[1],n.shape[2],n.shape[3]]));let i=t;i.rank===4&&(i=V(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]])),O(s.rank===5,()=>`Error in conv3dDerFilter: input must be rank 5, but got shape ${s.shape}.`),O(i.rank===5,()=>`Error in conv3dDerFilter: dy must be rank 5, but got shape ${i.shape}.`),O(e.length===5,()=>`Error in conv3dDerFilter: filterShape must be length 5, but got ${e}.`),O(s.shape[4]===e[3],()=>`Error in conv3dDerFilter: depth of input ${s.shape[4]}) must match input depth in filter (${e[3]}.`),O(i.shape[4]===e[4],()=>`Error in conv3dDerFilter: depth of dy (${i.shape[4]}) must match output depth for filter (${e[4]}).`);let a={x:s,dy:i},l={strides:r,pad:o,filterShape:e};return R.runKernel(Jd,a,l)}var eY=_({conv3DBackpropFilter_:d2e});wO();Nr();ce();var tY={kernelName:ru,inputsToSave:["x","filter"],gradFunc:(n,t,e)=>{let{dilations:r,strides:o,pad:s}=e;O(Xs(r),()=>`Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${r}'`);let[i,a]=t;return{x:()=>HT(i.shape,n,a,o,s),filter:()=>eY(i,n,a.shape,o,s)}}};G();vt();Ue();Lr();DF();var nY={kernelName:wl,inputsToSave:["x"],gradFunc:(n,t)=>{let[e]=t;return{x:()=>B(pt(Dm(fe(e,"float32"))),n)}}};G();vt();Ue();kF();var rY={kernelName:Cl,inputsToSave:["x"],gradFunc:(n,t)=>{let[e]=t;return{x:()=>B(km(fe(e,"float32")),n)}}};G();pa();XT();ip();var oY={kernelName:ou,inputsToSave:["x"],gradFunc:(n,t,e)=>{let[r]=t,{axis:o,exclusive:s,reverse:i}=e;return{x:()=>{let a=RO([o],r.rank),l=hm(n,o,s,!i);return a!=null&&(l=it(l,a)),l}}}};G();Nr();UF();jF();ce();var sY={kernelName:su,inputsToSave:["x","filter"],gradFunc:(n,t,e)=>{let{dilations:r,strides:o,pad:s,dimRoundingMode:i}=e,a=r??[1,1];O(Xs(a),()=>`Error in gradient of depthwiseConv2dNative: dilation rates greater than 1 are not yet supported. Got dilations '${a}'`);let[l,c]=t;return O(l.rank===4,()=>`Error in gradient of depthwiseConv2dNative: input must be rank 4, but got rank ${l.rank}.`),O(c.rank===4,()=>`Error in gradient of depthwiseConv2dNative: filter must be rank 4, but got rank ${c.rank}.`),O(l.shape[3]===c.shape[2],()=>`Error in gradient of depthwiseConv2d: number of input channels (${l.shape[3]}) must match the inChannels dimension in filter ${c.shape[2]}.`),O(Xr(o,a),()=>`Error in gradient of depthwiseConv2d: Either strides or dilations must be  1. Got strides ${o} and dilations '${a}'.`),dn("depthwiseConv2d",s,i),{x:()=>N1(l.shape,n,c,o,s,a,i),filter:()=>E1(l,n,c.shape,o,s,a,i)}}};oe();G();var iY={kernelName:iu,inputsToSave:["x","filter"],gradFunc:(n,t,e)=>{let[r,o]=t,s={x:r,filter:o,dy:n},i={x:r,filter:o,dy:n};return{x:()=>R.runKernel(Fx,s,e),filter:()=>R.runKernel(Px,i,e)}}};oe();G();var aY={kernelName:Sl,outputsToSave:[!0],gradFunc:(n,t)=>{let[e]=t,r={dy:n,y:e};return{x:()=>R.runKernel(ch,r)}}};G();uc();Ue();Lr();br();var lY={kernelName:Tl,inputsToSave:["x"],gradFunc:(n,t)=>{let[e]=t,r=B(vn(pt(lt(e))),2/Math.sqrt(Math.PI));return{x:()=>B(n,r)}}};G();Ue();var cY={kernelName:El,outputsToSave:[!0],gradFunc:(n,t)=>{let[e]=t;return{x:()=>B(n,e)}}};G();Oe();var uY={kernelName:au,inputsToSave:["input"],gradFunc:(n,t)=>{let[e]=t;return{input:()=>V(n,e.shape)}}};G();uc();Ue();var pY={kernelName:Nl,inputsToSave:["x"],gradFunc:(n,t)=>{let[e]=t;return{x:()=>B(n,vn(e))}}};G();Dn();var fY={kernelName:Dl,gradFunc:n=>({x:()=>ze(n)})};G();bn();vt();Zt();Ue();Lr();Oe();br();Jn();var dY={kernelName:kl,inputsToSave:["a","b"],gradFunc:(n,t)=>{let[e,r]=t,o=rt(e.shape,r.shape);return{a:()=>{let a=xe(n,fe(r,"float32")),l=nn(e.shape,o);return l.length>0?V(Ee(a,l),e.shape):a},b:()=>{let a=B(n,fe(e,"float32")),l=nn(r.shape,o);l.length>0&&(a=V(Ee(a,l),r.shape));let c=lt(r);return pt(xe(a,fe(c,"float32")))}}}};G();Nn();bn();Ue();Oe();SF();kn();on();Jn();ly();var hY={kernelName:lu,inputsToSave:["x","mean","variance","scale"],gradFunc:(n,t,e)=>{let{varianceEpsilon:r}=e,[o,s,i,a]=t,l=a??Ie(1),c=nn(s.shape,o.shape),u=[];if(s.rank===1){for(let v=0;v<o.shape.length-1;++v)u.push(o.shape[v]);u.push(1)}let p=be(o,s),f=B(n,l),d=Tm(ae(i,Ie(r))),h=B(B(B(d,d),d),Ie(-.5));return{x:()=>s.rank===1?V(B(B(n,$r(V(d,[1,1,1,s.shape[0]]),u)),l),o.shape):V(B(B(n,d),l),o.shape),mean:()=>{let v=B(B(d,Ie(-1)),f);return s.rank===1&&(v=Ee(v,c)),V(v,s.shape)},variance:()=>{let v=B(B(h,p),f);return s.rank===1&&(v=Ee(v,c)),V(v,s.shape)},scale:()=>{let v=B(p,d),S=B(n,v);return s.rank===1&&(S=Ee(S,c)),V(S,s.shape)},offset:()=>{let v=n;return s.rank===1&&(v=Ee(v,c)),V(v,s.shape)}}}};G();pa();Oe();Mf();ip();w1();ce();var xY={kernelName:cu,inputsToSave:["x","indices"],gradFunc:(n,t,e)=>{let[r,o]=t,{axis:s,batchDims:i}=e,a=yr(s,r.shape)[0],l=(c,u,p)=>()=>{let f=c.shape,d=u.size,h=f.slice(0,a),m=h.length,g=f.slice(s,f.length).slice(1),x=g.length,b=mY(0,m),w=mY(m+1,m+1+x),v=gY([h,[d],g]),S=V(p,v),k=V(u,[d]),A=gY([[m],b,w]),$=it(S,A),L=Pm($,k,c.shape[a]),z=P0(A);return L=it(L,z),L};if(i===1){let c=r.shape[0],u=r.split(c,0);return{x:()=>An(u.map((d,h)=>l(d,o.slice(h,1),n.slice(h,1))())).reshape(r.shape),indices:()=>o}}else return{x:l(r,o,n),indices:()=>o}}};function mY(n,t){let e=[];for(let r=n;r<t;++r)e.push(r);return e}function gY(n){let t=[];for(let e=0;e<n.length;++e)for(let r=0;r<n[e].length;++r)t.push(n[e][r]);return t}G();Dn();var yY={kernelName:_l,inputsToSave:["a","b"],gradFunc:(n,t)=>{let[e,r]=t;return{a:()=>ze(e),b:()=>ze(r)}}};G();vt();var bY={kernelName:Qi,gradFunc:n=>({x:()=>fe(n,"float32")})};G();Dn();var vY={kernelName:Al,gradFunc:n=>({x:()=>ze(n)})};G();Dn();var wY={kernelName:Rl,gradFunc:n=>({x:()=>ze(n)})};G();Dn();var CY={kernelName:Ml,gradFunc:n=>({x:()=>ze(n)})};G();pc();Ue();Js();var IY={kernelName:uu,inputsToSave:["x"],gradFunc:(n,t,e)=>{let[r]=t,{alpha:o}=e,s=_n(r,0);return{x:()=>rn(s,n,B(n,o))}}};G();Nn();Zt();var SY={kernelName:Fl,inputsToSave:["x"],gradFunc:(n,t)=>{let[e]=t;return{x:()=>xe(n,ae(e,1))}}};G();vt();Zt();var TY={kernelName:Ol,inputsToSave:["x"],gradFunc:(n,t)=>{let[e]=t;return{x:()=>xe(n,fe(e,"float32"))}}};G();uc();Ue();on();Jn();var EY={kernelName:EM,inputsToSave:[],outputsToSave:[!0],gradFunc:(n,t,e)=>{let[r]=t,{axis:o}=e;return{logits:()=>{let i=vn(r);return be(n,B(Ee(n,o,!0),i))}}}};G();oe();G();Z();function h2e(n,t,e,r=5,o=1,s=1,i=.5){let a={x:n,y:t,dy:e},l={depthRadius:r,bias:o,alpha:s,beta:i};return R.runKernel(xh,a,l)}var NY=_({localResponseNormalizationBackprop_:h2e});var DY={kernelName:pu,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(n,t,e)=>{let[r,o]=t,{depthRadius:s,bias:i,alpha:a,beta:l}=e;return{x:()=>NY(r,o,n,s,i,a,l)}}};G();ce();pa();vt();M0();Ue();Oe();function mE(n,t,e,r){return t.rank<e.rank&&(t=V(t,wi(t.shape,r))),n.rank<e.rank&&(n=V(n,wi(n.shape,r))),{x:()=>B(n,fe(lo(e,t),n.dtype))}}var qP={kernelName:fu,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(n,t,e)=>{let r=e,{reductionIndices:o}=r,s=t[0],i=t[1],a=yr(o,s.shape),l=mE(n,i,s,a);return{x:()=>l.x()}}};G();vt();gm();W0();Ue();var kY={kernelName:Pl,inputsToSave:["a","b"],gradFunc:(n,t)=>{let[e,r]=t;return{a:()=>B(n,fe(Co(e,r),"float32")),b:()=>B(n,fe(fc(e,r),"float32"))}}};G();oe();G();J();ce();Nr();Z();Oe();function m2e(n,t,e,r,o,s,i){let a=T(n,"dy","maxPool3dGrad"),l=T(t,"input","maxPool3dGrad"),c=T(e,"output","maxPool3dGrad"),u=a,p=l,f=c,d=!1;l.rank===4&&(d=!0,u=V(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]]),p=V(l,[1,l.shape[0],l.shape[1],l.shape[2],l.shape[3]]),f=V(c,[1,c.shape[0],c.shape[1],c.shape[2],c.shape[3]])),O(u.rank===5,()=>`Error in maxPool3dGrad: dy must be rank 5 but got rank ${u.rank}.`),O(p.rank===5,()=>`Error in maxPool3dGrad: input must be rank 5 but got rank ${p.rank}.`),O(f.rank===5,()=>`Error in maxPool3dGrad: output must be rank 5 but got rank ${f.rank}.`),dn("maxPool3dGrad",s,i);let h={dy:u,input:p,output:f},m={filterSize:r,strides:o,pad:s,dimRoundingMode:i},g=R.runKernel(bh,h,m);return d?V(g,[g.shape[1],g.shape[2],g.shape[3],g.shape[4]]):g}var _Y=_({maxPool3dGrad_:m2e});var AY={kernelName:hu,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(n,t,e)=>{let[r,o]=t,{filterSize:s,strides:i,pad:a,dimRoundingMode:l}=e;return{x:()=>_Y(n,r,o,s,i,a,l)}}};G();oe();G();J();ce();Nr();Z();function g2e(n,t,e,r,o,s,i){let a=T(n,"dy","maxPoolGrad"),l=T(t,"input","maxPoolGrad"),c=T(e,"output","maxPoolGrad");O(l.rank===a.rank,()=>`Rank of input (${l.rank}) does not match rank of dy (${a.rank})`),O(a.rank===4,()=>`Error in maxPoolGrad: dy must be rank 4 but got rank ${a.rank}.`),O(l.rank===4,()=>`Error in maxPoolGrad: input must be rank 4 but got rank ${l.rank}.`),dn("maxPoolGrad",s,i);let u={dy:a,input:l,output:c},p={filterSize:r,strides:o,pad:s,dimRoundingMode:i};return R.runKernel(yh,u,p)}var RY=_({maxPoolGrad_:g2e});var MY={kernelName:du,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(n,t,e)=>{let[r,o]=t,{filterSize:s,strides:i,pad:a}=e;return{x:()=>RY(n,r,o,s,i,a)}}};G();pa();Zt();Ue();vm();Oe();ce();var OY={kernelName:mu,inputsToSave:["x"],gradFunc:(n,t,e)=>{let[r]=t,{axis:o}=e,s=yr(o,r.shape),a=AO(r.shape,s)[1],l=yt(a);return{x:()=>{let u=r.shape.slice();s.forEach(d=>{u[d]=1});let p=V(n,u);return xe(B(p,er(r.shape,"float32")),l)}}}};G();ce();var FY={kernelName:gu,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(n,t,e)=>{let r=e,{axis:o}=r,[s,i]=t,a=yr(o,s.shape),l=mE(n,i,s,a);return{x:()=>l.x()}}};G();vt();pc();Df();Ue();var PY={kernelName:$l,inputsToSave:["a","b"],gradFunc:(n,t)=>{let[e,r]=t;return{a:()=>B(n,fe(ss(e,r),"float32")),b:()=>B(n,fe(_n(e,r),"float32"))}}};G();rs();var $Y={kernelName:xu,inputsToSave:["x"],gradFunc:(n,t,e)=>{let r=t[0],{paddings:o}=e,s=o.map(i=>i[0]);return{x:()=>$e(n,s,r.shape)}}};G();bn();Zt();QT();Ue();Lr();Oe();Jn();var LY={kernelName:Ll,inputsToSave:["a","b"],gradFunc:(n,t)=>{let[e,r]=t,o=rt(e.shape,r.shape);return{a:()=>{let a=nn(e.shape,o);return a.length>0?V(Ee(n,a),e.shape):n},b:()=>{let a=B(n,pt(da(xe(e,r)))),l=nn(r.shape,o);return l.length>0?V(Ee(a,l),r.shape):a}}}};G();bn();vt();Ue();Oe();Jn();var BY={kernelName:Bl,inputsToSave:["a","b"],gradFunc:(n,t)=>{let[e,r]=t,o=rt(e.shape,r.shape);return{a:()=>{let a=B(n,fe(r,"float32")),l=nn(e.shape,o);return l.length>0?V(Ee(a,l),e.shape):a},b:()=>{let a=B(n,fe(e,"float32")),l=nn(r.shape,o);return l.length>0?V(Ee(a,l),r.shape):a}}}};G();Lr();var zY={kernelName:yu,gradFunc:n=>({x:()=>pt(n)})};G();py();var VY={kernelName:vu,inputsToSave:["indices"],gradFunc:(n,t)=>{let e=t[0];return{indices:()=>Kt(e.shape,"float32")}}};G();Dn();var UY={kernelName:bu,gradFunc:n=>({x:()=>ze(n)})};G();gy();var jY={kernelName:wu,saveAllInputs:!0,gradFunc:(n,t,e)=>{let{axis:r}=e;return hr(n,r).map(s=>()=>s)}};G();rs();var KP={kernelName:Cu,inputsToSave:["x"],gradFunc:(n,t,e)=>{let r=t[0],{paddings:o}=e,s=o.map(i=>i[0]);return{x:()=>$e(n,s,r.shape)}}};G();bn();vt();pc();cy();Ue();Ef();Oe();kn();on();Jn();Js();Dn();var GY={kernelName:zl,inputsToSave:["a","b"],outputsToSave:[!0],gradFunc:(n,t)=>{let[e,r,o]=t,s=e,i=r,a=rt(s.shape,i.shape);return{a:()=>{let u=fe(i,"float32"),p=B(n,B(u,Yr(s,be(u,Ie(1))))),f=nn(s.shape,a);return f.length>0&&(p=Ee(p,f)),V(p,s.shape)},b:()=>{let u=_n(s,0),p=rn(u,kr(s),ze(s)),f=B(n,B(o,p)),d=nn(i.shape,a);return d.length>0&&(f=Ee(f,d)),V(f,i.shape)}}}};G();bn();pc();Ue();Oe();Jn();Js();Dn();var WY={kernelName:Iu,inputsToSave:["x","alpha"],gradFunc:(n,t)=>{let[e,r]=t,o=_n(e,0);return{x:()=>rn(o,n,B(n,r)),alpha:()=>{let s=rn(o,ze(n),B(n,e)),i=nn(r.shape,n.shape);return i.length>0&&(s=Ee(s,i)),V(s,r.shape)}}}};yP();G();KT();Ue();Oe();ip();function x2e(n,t,e){let r=n.shape.slice();r[e]=1;let o=V(t,r),s=Tf(n,e,!0,!1),i=Tf(n,e,!0,!0),a=B(s,i);return B(o,a)}function y2e(n,t,e){let r=n.shape.length,o=r-e.length,s=M.getAxesPermutation(e,r),i=n;s!=null&&(i=it(n,s));let a=i.shape.slice(),c=a.splice(r-e.length,e.length).reduce((f,d)=>f*d,1);a.push(c);let u=i.reshape(a),p=x2e(u,t,o);if(p=p.reshape(i.shape),s!=null){let f=M.getUndoAxesPermutation(s);p=it(p,f)}return p}var HY={kernelName:Su,inputsToSave:["x"],gradFunc:(n,t,e)=>{let[r]=t,{axis:o}=e,s=[];return o==null?s=r.shape.map((i,a)=>a):typeof o=="number"?s=[o]:s=o,{x:()=>y2e(r,n,s)}}};G();bn();vt();Zt();Ue();Lr();Oe();br();Jn();var qY={kernelName:Il,inputsToSave:["a","b"],gradFunc:(n,t)=>{let[e,r]=t,o=rt(e.shape,r.shape);return{a:()=>{let a=xe(n,fe(r,"float32")),l=nn(e.shape,o);return l.length>0?V(Ee(a,l),e.shape):a},b:()=>{let a=B(n,fe(e,"float32")),l=nn(r.shape,o);l.length>0&&(a=V(Ee(a,l),r.shape));let c=lt(r);return pt(xe(a,fe(c,"float32")))}}}};G();Zt();Lr();br();var KY={kernelName:Vl,inputsToSave:["x"],gradFunc:(n,t)=>{let[e]=t;return{x:()=>xe(n,pt(lt(e)))}}};G();vt();Df();Ue();hy();var XY={kernelName:jl,inputsToSave:["x"],gradFunc:(n,t)=>{let[e]=t,r=B(ss(e,6),ei(e));return{x:()=>B(n,fe(r,"float32"))}}};G();vt();Ue();hy();var YY={kernelName:Ul,inputsToSave:["x"],gradFunc:(n,t)=>{let[e]=t;return{x:()=>B(n,fe(ei(e),"float32"))}}};G();Oe();var ZY={kernelName:Tu,inputsToSave:["x"],gradFunc:(n,t)=>{let[e]=t;return{x:()=>V(n,e.shape)}}};oe();G();var QY={kernelName:Nu,inputsToSave:["images"],gradFunc:(n,t,e)=>{let[r]=t,o={dy:n,images:r};return{images:()=>R.runKernel(Ah,o,e)}}};oe();G();var JY={kernelName:Eu,inputsToSave:["images"],gradFunc:(n,t,e)=>{let[r]=t,o={dy:n,images:r};return{images:()=>R.runKernel(_h,o,e)}}};G();rp();ce();var eZ={kernelName:Du,gradFunc:(n,t,e)=>{let{dims:r}=e,o=yr(r,n.shape);return{x:()=>fr(n,o)}}};G();Dn();var tZ={kernelName:Gl,gradFunc:n=>({x:()=>ze(n)})};G();Zt();Ue();Lr();Ef();var nZ={kernelName:Wl,inputsToSave:["x"],gradFunc:(n,t)=>{let[e]=t;return{x:()=>pt(xe(n,B(Yr(e,1.5),2)))}}};G();vt();X0();Ue();Dn();var rZ={kernelName:ku,inputsToSave:["condition"],gradFunc:(n,t)=>{let[e]=t;return{condition:()=>fe(ze(e),"float32"),t:()=>B(n,fe(e,n.dtype)),e:()=>B(n,fe(Ju(e),n.dtype))}}};G();vt();uc();pc();Ue();kn();mP();Js();var oZ={kernelName:Hl,inputsToSave:["x"],gradFunc:(n,t)=>{let[e]=t;return{x:()=>{let r=_n(e,Ie(0)),o=Ie(dP),s=Ie(hP),i=B(n,s),a=B(B(n,o),vn(fe(e,"float32")));return rn(r,i,a)}}}};G();Ue();kn();on();var sZ={kernelName:Yl,outputsToSave:[!0],gradFunc:(n,t)=>{let[e]=t;return{x:()=>B(n,B(e,be(Ie(1),e)))}}};G();Dn();var iZ={kernelName:Xl,gradFunc:n=>({x:()=>ze(n)})};G();vt();qT();Ue();var aZ={kernelName:ql,inputsToSave:["x"],gradFunc:(n,t)=>{let[e]=t;return{x:()=>B(Hu(fe(e,"float32")),n)}}};G();vt();CO();Ue();var lZ={kernelName:Kl,inputsToSave:["x"],gradFunc:(n,t)=>{let[e]=t;return{x:()=>B(dm(fe(e,"float32")),n)}}};G();_f();q1();var cZ={kernelName:_u,inputsToSave:["x"],gradFunc:(n,t,e)=>{let[r]=t,{begin:o,size:s}=e,i=r.shape,[a,l]=cP(r,o,s),c=[];for(let u=0;u<n.rank;u++)c.push([a[u],i[u]-a[u]-l[u]]);return{x:()=>So(n,c)}}};G();Ue();on();Jn();var uZ={kernelName:Ou,outputsToSave:[!0],gradFunc:(n,t,e)=>{let[r]=t,{dim:o}=e,s=!0,i=B(n,r);return{logits:()=>be(i,B(Ee(i,[o],s),r))}}};G();Ue();ty();var pZ={kernelName:Zl,inputsToSave:["x"],gradFunc:(n,t)=>{let[e]=t;return{x:()=>B(n,Pr(e))}}};G();y0();var XP={kernelName:Ru,gradFunc:(n,t,e)=>{let{blockShape:r,paddings:o}=e;return{x:()=>Wu(n,r,o)}}};G();Zs();var YP={kernelName:Mu,gradFunc:(n,t,e)=>{let{axis:r}=e;return{x:()=>Tt(n,r)}}};G();vt();Zt();Ue();fa();var fZ={kernelName:Ql,inputsToSave:["x"],gradFunc:(n,t)=>{let[e]=t;return{x:()=>xe(n,B(qt(fe(e,"float32")),2))}}};G();vt();Ue();var dZ={kernelName:zh,inputsToSave:["x"],gradFunc:(n,t)=>{let[e]=t;return{x:()=>B(n,B(fe(e,"float32"),2))}}};G();Ue();kn();on();var hZ={kernelName:Jl,inputsToSave:["a","b"],gradFunc:(n,t)=>{let[e,r]=t,o=Ie(2);return{a:()=>B(n,B(o,be(e,r))),b:()=>B(n,B(o,be(r,e)))}}};G();Dn();var mZ={kernelName:rc,gradFunc:n=>({x:()=>ze(n)})};G();bn();Lr();Oe();Jn();var gZ={kernelName:ec,inputsToSave:["a","b"],gradFunc:(n,t)=>{let[e,r]=t,o=rt(e.shape,r.shape);return{a:()=>{let a=n,l=nn(e.shape,o);return l.length>0&&(a=Ee(a,l)),V(a,e.shape)},b:()=>{let a=n,l=nn(r.shape,o);return l.length>0&&(a=Ee(a,l)),V(pt(a),r.shape)}}}};G();Ue();vm();Oe();ce();var xZ={kernelName:Au,inputsToSave:["x"],gradFunc:(n,t,e)=>{let[r]=t,o=r.shape.slice(),{axis:s}=e;yr(s,r.shape).forEach(c=>{o[c]=1});let a=V(n,o),l=B(a,er(r.shape,"float32"));return{x:()=>l}}};G();qT();Zt();br();var yZ={kernelName:tc,inputsToSave:["x"],gradFunc:(n,t)=>{let[e]=t;return{x:()=>xe(n,lt(Hu(e)))}}};G();Ue();kn();br();on();var bZ={kernelName:nc,outputsToSave:[!0],gradFunc:(n,t)=>{let[e]=t;return{x:()=>B(be(Ie(1),lt(e)),n)}}};G();Nn();rs();Dn();var vZ={kernelName:Ji,inputsToSave:["x"],gradFunc:(n,t,e)=>{let[r]=t,{reps:o}=e;return{x:()=>{let i=ze(r);if(r.rank===1)for(let a=0;a<o[0];++a)i=ae(i,$e(n,[a*r.shape[0]],[r.shape[0]]));else if(r.rank===2)for(let a=0;a<o[0];++a)for(let l=0;l<o[1];++l)i=ae(i,$e(n,[a*r.shape[0],l*r.shape[1]],[r.shape[0],r.shape[1]]));else if(r.rank===3)for(let a=0;a<o[0];++a)for(let l=0;l<o[1];++l)for(let c=0;c<o[2];++c)i=ae(i,$e(n,[a*r.shape[0],l*r.shape[1],c*r.shape[2]],[r.shape[0],r.shape[1],r.shape[2]]));else if(r.rank===4)for(let a=0;a<o[0];++a)for(let l=0;l<o[1];++l)for(let c=0;c<o[2];++c)for(let u=0;u<o[3];++u)i=ae(i,$e(n,[a*r.shape[0],l*r.shape[1],c*r.shape[2],u*r.shape[3]],[r.shape[0],r.shape[1],r.shape[2],r.shape[3]]));else throw new Error(`Gradient for tile operation is not implemented for rank-${r.rank} tensors yet.`);return i}}}};G();pa();ip();var wZ={kernelName:ea,gradFunc:(n,t,e)=>{let r=e,{perm:o}=r,s=P0(o);return{x:()=>it(n,s)}}};G();Mf();var CZ={kernelName:Fu,gradFunc:(n,t,e)=>{let r=e,{axis:o}=r;return{value:()=>An(n,o)}}};G();ay();z0();gm();ym();Q0();vm();kn();Js();Dn();var IZ={kernelName:Pu,inputsToSave:["segmentIds"],gradFunc:(n,t)=>{let[e]=t;return{x:()=>b2e(n,e)}}};function b2e(n,t){let e=$o(t,ze(t)),r=ha(n,e),o=Co(t,Ie(0,"int32")),s=r.rank-o.rank;for(let a=0;a<s;++a)o=Cn(o,a+1);o=Zr(o,er(r.shape,"bool"));let i=ze(r);return rn(o,r,i)}G();Dn();var SZ={kernelName:$u,gradFunc:n=>({x:()=>ze(n)})};Yv();var v2e=[hE,kX,_X,AX,RX,MX,OX,FX,PX,$X,LX,BX,VX,jX,GX,WX,HX,qX,KX,XX,YX,ZX,JX,QX,tY,nY,rY,oY,sY,iY,qY,aY,lY,cY,uY,pY,dY,fY,hY,xY,yY,bY,vY,wY,CY,IY,SY,TY,EY,DY,qP,qP,kY,AY,MY,OY,FY,PY,$Y,LY,BY,zY,VY,UY,jY,KP,KP,GY,WY,HY,KY,XY,YY,ZY,QY,JY,eZ,tZ,nZ,rZ,oZ,sZ,iZ,aZ,lZ,cZ,uZ,pZ,XP,XP,YP,YP,fZ,hZ,dZ,mZ,gZ,xZ,yZ,bZ,vZ,wZ,CZ,IZ,SZ];for(let n of v2e)NM(n);et();ue();U().prototype.abs=function(){return this.throwIfDisposed(),fn(this)};et();ue();U().prototype.acos=function(){return this.throwIfDisposed(),a0(this)};et();ue();U().prototype.acosh=function(){return this.throwIfDisposed(),l0(this)};Nn();ue();U().prototype.add=function(n){return this.throwIfDisposed(),ae(this,n)};iO();ue();U().prototype.all=function(n,t){return this.throwIfDisposed(),lm(this,n,t)};aO();ue();U().prototype.any=function(n,t){return this.throwIfDisposed(),Sf(this,n,t)};lO();ue();U().prototype.argMax=function(n){return this.throwIfDisposed(),sa(this,n)};cO();ue();U().prototype.argMin=function(n){return this.throwIfDisposed(),c0(this,n)};Oe();ue();ce();U().prototype.asScalar=function(){return this.throwIfDisposed(),O(this.size===1,()=>"The array must have only 1 element."),V(this,[])};et();ue();U().prototype.asType=function(n){return this.throwIfDisposed(),fe(this,n)};Oe();ue();U().prototype.as1D=function(){return this.throwIfDisposed(),V(this,[this.size])};Oe();ue();U().prototype.as2D=function(n,t){return this.throwIfDisposed(),V(this,[n,t])};Oe();ue();U().prototype.as3D=function(n,t,e){return this.throwIfDisposed(),V(this,[n,t,e])};Oe();ue();U().prototype.as4D=function(n,t,e,r){return this.throwIfDisposed(),V(this,[n,t,e,r])};Oe();ue();U().prototype.as5D=function(n,t,e,r,o){return this.throwIfDisposed(),V(this,[n,t,e,r,o])};et();ue();U().prototype.asin=function(){return this.throwIfDisposed(),u0(this)};et();ue();U().prototype.asinh=function(){return this.throwIfDisposed(),p0(this)};et();ue();U().prototype.atan=function(){return this.throwIfDisposed(),f0(this)};uO();ue();U().prototype.atan2=function(n){return this.throwIfDisposed(),d0(this,n)};et();ue();U().prototype.atanh=function(){return this.throwIfDisposed(),h0(this)};jT();ue();U().prototype.avgPool=function(n,t,e,r){return this.throwIfDisposed(),Gu(this,n,t,e,r)};y0();ue();U().prototype.batchToSpaceND=function(n,t){return this.throwIfDisposed(),Wu(this,n,t)};ny();ue();U().prototype.batchNorm=function(n,t,e,r,o){return this.throwIfDisposed(),aa(this,n,t,e,r,o)};GT();ue();U().prototype.broadcastTo=function(n){return this.throwIfDisposed(),la(this,n)};et();ue();U().prototype.cast=function(n){return this.throwIfDisposed(),fe(this,n)};et();ue();U().prototype.ceil=function(){return this.throwIfDisposed(),I0(this)};et();ue();U().prototype.clipByValue=function(n,t){return this.throwIfDisposed(),pr(this,n,t)};Zs();ue();U().prototype.concat=function(n,t){return this.throwIfDisposed(),n instanceof tt&&(n=[n]),Tt([this,...n],t)};bO();ue();U().prototype.conv1d=function(n,t,e,r,o,s){return this.throwIfDisposed(),pm(this,n,t,e,r,o,s)};vO();ue();U().prototype.conv2dTranspose=function(n,t,e,r,o){return this.throwIfDisposed(),fm(this,n,t,e,r,o)};um();ue();U().prototype.conv2d=function(n,t,e,r,o,s){return this.throwIfDisposed(),Po(this,n,t,e,r,o,s)};et();ue();U().prototype.cos=function(){return this.throwIfDisposed(),Hu(this)};et();ue();U().prototype.cosh=function(){return this.throwIfDisposed(),dm(this)};KT();ue();U().prototype.cumprod=function(n,t,e){return this.throwIfDisposed(),Tf(this,n,t,e)};XT();ue();U().prototype.cumsum=function(n,t,e){return this.throwIfDisposed(),hm(this,n,t,e)};IO();ue();U().prototype.depthToSpace=function(n,t){return this.throwIfDisposed(),_0(this,n,t)};A0();ue();U().prototype.depthwiseConv2d=function(n,t,e,r,o,s){return this.throwIfDisposed(),ca(this,n,t,e,r,o,s)};TO();ue();U().prototype.dilation2d=function(n,t,e,r,o){return this.throwIfDisposed(),R0(this,n,t,e,r,o)};EO();ue();U().prototype.divNoNan=function(n){return this.throwIfDisposed(),O0(this,n)};Zt();ue();U().prototype.div=function(n){return this.throwIfDisposed(),xe(this,n)};NO();ue();U().prototype.dot=function(n){return this.throwIfDisposed(),F0(this,n)};YT();ue();U().prototype.elu=function(){return this.throwIfDisposed(),ua(this)};M0();ue();U().prototype.equal=function(n){return this.throwIfDisposed(),lo(this,n)};et();ue();U().prototype.erf=function(){return this.throwIfDisposed(),mm(this)};OO();ue();U().prototype.euclideanNorm=function(n,t){return this.throwIfDisposed(),L0(this,n,t)};et();ue();U().prototype.exp=function(){return this.throwIfDisposed(),vn(this)};ay();ue();U().prototype.expandDims=function(n){return this.throwIfDisposed(),Cn(this,n)};et();ue();U().prototype.expm1=function(){return this.throwIfDisposed(),B0(this)};et();ue();U().prototype.fft=function(){return this.throwIfDisposed(),op(this)};Oe();ue();U().prototype.flatten=function(){return this.throwIfDisposed(),V(this,[this.size])};et();ue();U().prototype.floor=function(){return this.throwIfDisposed(),da(this)};UT();ue();U().prototype.floorDiv=function(n){return this.throwIfDisposed(),im(this,n)};z0();ue();U().prototype.gather=function(n,t,e){return this.throwIfDisposed(),ha(this,n,t,e)};gm();ue();U().prototype.greaterEqual=function(n){return this.throwIfDisposed(),Co(this,n)};pc();ue();U().prototype.greater=function(n){return this.throwIfDisposed(),_n(this,n)};et();ue();U().prototype.ifft=function(){return this.throwIfDisposed(),hc(this)};et();ue();U().prototype.irfft=function(){return this.throwIfDisposed(),Rm(this)};et();ue();U().prototype.isFinite=function(){return this.throwIfDisposed(),U0(this)};et();ue();U().prototype.isInf=function(){return this.throwIfDisposed(),j0(this)};et();ue();U().prototype.isNaN=function(){return this.throwIfDisposed(),G0(this)};JT();ue();U().prototype.leakyRelu=function(n){return this.throwIfDisposed(),Xu(this,n)};Df();ue();U().prototype.lessEqual=function(n){return this.throwIfDisposed(),ss(this,n)};W0();ue();U().prototype.less=function(n){return this.throwIfDisposed(),fc(this,n)};$O();ue();U().prototype.localResponseNormalization=function(n,t,e,r){return this.throwIfDisposed(),H0(this,n,t,e,r)};et();ue();U().prototype.logSigmoid=function(){return this.throwIfDisposed(),K0(this)};et();ue();U().prototype.logSoftmax=function(n){return this.throwIfDisposed(),xm(this,n)};t1();ue();U().prototype.logSumExp=function(n,t){return this.throwIfDisposed(),Qu(this,n,t)};et();ue();U().prototype.log=function(){return this.throwIfDisposed(),kr(this)};et();ue();U().prototype.log1p=function(){return this.throwIfDisposed(),Yu(this)};ym();ue();U().prototype.logicalAnd=function(n){return this.throwIfDisposed(),Zr(this,n)};X0();ue();U().prototype.logicalNot=function(){return this.throwIfDisposed(),Ju(this)};n1();ue();U().prototype.logicalOr=function(n){return this.throwIfDisposed(),bm(this,n)};zO();ue();U().prototype.logicalXor=function(n){return this.throwIfDisposed(),Y0(this,n)};ia();ue();U().prototype.matMul=function(n,t,e){return this.throwIfDisposed(),st(this,n,t,e)};s1();ue();U().prototype.maxPool=function(n,t,e,r){return this.throwIfDisposed(),ep(this,n,t,e,r)};iy();ue();U().prototype.max=function(n,t){return this.throwIfDisposed(),Dr(this,n,t)};Q0();ue();U().prototype.maximum=function(n){return this.throwIfDisposed(),$o(this,n)};J0();ue();U().prototype.mean=function(n,t){return this.throwIfDisposed(),sn(this,n,t)};ZT();ue();U().prototype.min=function(n,t){return this.throwIfDisposed(),lc(this,n,t)};ew();ue();U().prototype.minimum=function(n){return this.throwIfDisposed(),Ns(this,n)};GO();ue();U().prototype.mirrorPad=function(n,t){return this.throwIfDisposed(),tw(this,n,t)};WO();ue();U().prototype.mod=function(n){return this.throwIfDisposed(),nw(this,n)};Ue();ue();U().prototype.mul=function(n){return this.throwIfDisposed(),B(this,n)};et();ue();U().prototype.neg=function(){return this.throwIfDisposed(),pt(this)};et();ue();U().prototype.norm=function(n,t,e){return this.throwIfDisposed(),cc(this,n,t,e)};i1();ue();U().prototype.notEqual=function(n){return this.throwIfDisposed(),Ii(this,n)};a1();ue();U().prototype.oneHot=function(n,t=1,e=0){return this.throwIfDisposed(),ma(this,n,t,e)};et();ue();U().prototype.onesLike=function(){return this.throwIfDisposed(),vr(this)};_f();ue();U().prototype.pad=function(n,t){return this.throwIfDisposed(),So(this,n,t)};JO();ue();U().prototype.pool=function(n,t,e,r,o,s){return this.throwIfDisposed(),ow(this,n,t,e,r,o,s)};Ef();ue();U().prototype.pow=function(n){return this.throwIfDisposed(),Yr(this,n)};l1();ue();U().prototype.prelu=function(n){return this.throwIfDisposed(),np(this,n)};eF();ue();U().prototype.prod=function(n,t){return this.throwIfDisposed(),sw(this,n,t)};et();ue();U().prototype.reciprocal=function(){return this.throwIfDisposed(),cw(this)};fy();ue();U().prototype.relu=function(){return this.throwIfDisposed(),Br(this)};m1();ue();U().prototype.relu6=function(){return this.throwIfDisposed(),Im(this)};Oe();ue();U().prototype.reshapeAs=function(n){return this.throwIfDisposed(),V(this,n.shape)};Oe();ue();U().prototype.reshape=function(n){return this.throwIfDisposed(),V(this,n)};qF();ue();U().prototype.resizeBilinear=function(n,t,e){return this.throwIfDisposed(),M1(this,n,t,e)};KF();ue();U().prototype.resizeNearestNeighbor=function(n,t,e){return this.throwIfDisposed(),O1(this,n,t,e)};rp();ue();U().prototype.reverse=function(n){return this.throwIfDisposed(),fr(this,n)};et();ue();U().prototype.rfft=function(){return this.throwIfDisposed(),sp(this)};et();ue();U().prototype.round=function(){return this.throwIfDisposed(),Sm(this)};et();ue();U().prototype.rsqrt=function(){return this.throwIfDisposed(),Tm(this)};TF();ue();U().prototype.selu=function(){return this.throwIfDisposed(),Em(this)};EF();ue();U().prototype.separableConv2d=function(n,t,e,r,o,s){return this.throwIfDisposed(),Nm(this,n,t,e,r,o,s)};et();ue();U().prototype.sigmoid=function(){return this.throwIfDisposed(),Pr(this)};et();ue();U().prototype.sign=function(){return this.throwIfDisposed(),uw(this)};et();ue();U().prototype.sin=function(){return this.throwIfDisposed(),Dm(this)};et();ue();U().prototype.sinh=function(){return this.throwIfDisposed(),km(this)};et();ue();U().prototype.slice=function(n,t){return this.throwIfDisposed(),$e(this,n,t)};et();ue();U().prototype.softmax=function(n){return this.throwIfDisposed(),xa(this,n)};et();ue();U().prototype.softplus=function(){return this.throwIfDisposed(),Ci(this)};rw();ue();U().prototype.spaceToBatchND=function(n,t){return this.throwIfDisposed(),tp(this,n,t)};Mm();ue();U().prototype.split=function(n,t){return this.throwIfDisposed(),dr(this,n,t)};et();ue();U().prototype.sqrt=function(){return this.throwIfDisposed(),qt(this)};et();ue();U().prototype.square=function(){return this.throwIfDisposed(),lt(this)};b1();ue();U().prototype.squaredDifference=function(n){return this.throwIfDisposed(),Om(this,n)};pw();ue();U().prototype.squeeze=function(n){return this.throwIfDisposed(),Qt(this,n)};Mf();ue();U().prototype.stack=function(n,t){this.throwIfDisposed();let e=n instanceof tt?[this,n]:[this,...n];return An(e,t)};et();ue();U().prototype.step=function(n){return this.throwIfDisposed(),ei(this,n)};et();ue();U().prototype.stridedSlice=function(n,t,e,r,o,s,i,a){return this.throwIfDisposed(),fw(this,n,t,e,r,o,s,i,a)};on();ue();U().prototype.sub=function(n){return this.throwIfDisposed(),be(this,n)};Jn();ue();U().prototype.sum=function(n,t){return this.throwIfDisposed(),Ee(this,n,t)};et();ue();U().prototype.tan=function(){return this.throwIfDisposed(),dw(this)};et();ue();U().prototype.tanh=function(){return this.throwIfDisposed(),vi(this)};ly();ue();U().prototype.tile=function(n){return this.throwIfDisposed(),$r(this,n)};et();ue();U().prototype.toBool=function(){return this.throwIfDisposed(),fe(this,"bool")};et();ue();U().prototype.toFloat=function(){return this.throwIfDisposed(),fe(this,"float32")};et();ue();U().prototype.toInt=function(){return this.throwIfDisposed(),fe(this,"int32")};$F();ue();U().prototype.topk=function(n,t){return this.throwIfDisposed(),xw(this,n,t)};ip();ue();U().prototype.transpose=function(n){return this.throwIfDisposed(),it(this,n)};LF();ue();U().prototype.unique=function(n){return this.throwIfDisposed(),yw(this,n)};w1();ue();U().prototype.unsortedSegmentSum=function(n,t){return this.throwIfDisposed(),Pm(this,n,t)};gy();ue();U().prototype.unstack=function(n){return this.throwIfDisposed(),hr(this,n)};Js();ue();U().prototype.where=function(n,t){return this.throwIfDisposed(),rn(n,this,t)};et();ue();U().prototype.zerosLike=function(){return this.throwIfDisposed(),ze(this)};N();N();N();var ni=class n extends Error{constructor(t){super(t),Object.setPrototypeOf(this,n.prototype)}},zo=class n extends Error{constructor(t){super(t),Object.setPrototypeOf(this,n.prototype)}},X=class n extends Error{constructor(t){super(t),Object.setPrototypeOf(this,n.prototype)}},We=class n extends Error{constructor(t){super(t),Object.setPrototypeOf(this,n.prototype)}},gE=class n extends Error{constructor(t){super(t),Object.setPrototypeOf(this,n.prototype)}};var _w=class{constructor(t){this.maxEntries=t||100,this.cache=new Map}get(t){let e;return this.cache.has(t)&&(e=this.cache.get(t),this.cache.delete(t),this.cache.set(t,e)),e}put(t,e){if(this.cache.has(t))this.cache.delete(t);else if(this.cache.size>=this.maxEntries){let r=this.cache.keys().next().value;this.cache.delete(r)}this.cache.set(t,e)}getMaxEntries(){return this.maxEntries}setMaxEntries(t){if(t<0)throw new Error(`The maxEntries of LRU caches must be at least 0, but got ${t}.`);if(this.maxEntries>t)for(let e=0;e<this.maxEntries-t;e++){let r=this.cache.keys().next().value;this.cache.delete(r)}this.maxEntries=t}};N();function Ei(n,t){if(Array.isArray(n)){let e=[];for(let r=0;r<t;r++)e=e.concat(n);return e}else{let e=new Array(t);return e.fill(n),e}}function ri(n,t){if(!n)throw new gE(t)}function QP(n,t){let e=0;for(let r of n)r===t&&e++;return e}function Vr(n){return n.length===1?n[0]:n}function Vt(n){return Array.isArray(n)?n:[n]}function Ni(n){let e=n.replace(/(.)([A-Z][a-z0-9]+)/g,"$1_$2").replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase();return e[0]!=="_"?e:"private"+e}function cp(n){return n.length<=1||n.indexOf("_")===-1?n:n.replace(/[_]+(\w|$)/g,(t,e)=>e.toUpperCase())}var Ti={};function Ny(n){if(n==null)return null;let t={};return t.className=n.getClassName(),t.config=n.getConfig(),t}function ZP(n){if(!(n==null||typeof n!="object"))if(Array.isArray(n))n.forEach(t=>ZP(t));else{let t=Object.keys(n);for(let e of t){let r=n[e];r!=null&&typeof r=="object"&&(!Array.isArray(r)&&r.type==="ndarray"&&typeof r.value=="number"?n[e]=r.value:ZP(r))}}}function xc(n,t={},e={},r="object",o=!1){if(typeof n=="string"){let s=n,i;if(s in e)i=e[s];else if(s in Ti)i=Ti[s];else if(i=t[s],i==null)throw new X(`Unknown ${r}: ${n}. This may be due to one of the following reasons:
1. The ${r} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.
2. The custom ${r} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);return i}else{let s=n;if(s.className==null||s.config==null)throw new X(`${r}: Improper config format: ${JSON.stringify(s)}.
'className' and 'config' must set.`);let i=s.className,a,l;if(i in e?[a,l]=e[i]:i in Ti?[a,l]=Ti.className:i in t&&([a,l]=t[i]),a==null)throw new X(`Unknown ${r}: ${i}. This may be due to one of the following reasons:
1. The ${r} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.
2. The custom ${r} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);if(l!=null){let c={};for(let d of Object.keys(Ti))c[d]=Ti[d];for(let d of Object.keys(e))c[d]=e[d];let u=s.config;u.customObjects=c;let p=Object.assign({},Ti);for(let d of Object.keys(e))Ti[d]=e[d];ZP(s.config);let f=l(a,s.config,e,o);return Ti=Object.assign({},p),f}else{let c=Object.assign({},Ti);for(let p of Object.keys(e))Ti[p]=e[p];let u=new a(s.config);return Ti=Object.assign({},c),u}}}function w2e(n,t){return n<t?-1:n>t?1:0}function Aw(n,t){return-1*w2e(n,t)}function Di(n){if(n==null)return n;let t=[];for(let e of n)t.indexOf(e)===-1&&t.push(e);return t}function TZ(n){if(n==null)throw new X(`Invalid value in obj: ${JSON.stringify(n)}`);for(let t in n)if(n.hasOwnProperty(t))return!1;return!0}function yc(n,t,e){if(e!=null&&n.indexOf(e)<0)throw new X(`${e} is not a valid ${t}.  Valid values are ${n} or null/undefined.`)}function xE(n,t,e=0,r=1/0){return ri(e>=0),ri(r>=e),Array.isArray(n)&&n.length>=e&&n.length<=r&&n.every(o=>typeof o===t)}function rr(n,t){Array.isArray(n)?(C.assert(n.length>0,()=>`${t} is unexpectedly an empty array.`),n.forEach((e,r)=>rr(e,`element ${r+1} of ${t}`))):C.assert(Number.isInteger(n)&&n>0,()=>`Expected ${t} to be a positive integer, but got ${EZ(n)}.`)}function EZ(n){return n===null?"null":Array.isArray(n)?"["+n.map(t=>EZ(t)).join(",")+"]":typeof n=="string"?`"${n}"`:`${n}`}function NZ(n,t,e){let r=e!=null?e():C.now(),o;return(...i)=>{let a=e!=null?e():C.now();return a-r<t||(r=a,o=n(...i)),o}}function yE(n){return n==="relu"?"relu":n==="linear"?"linear":n==="elu"?"elu":null}N();var C2e=0;function vE(){return C2e++}var bE={};function Wf(n=""){return n in bE||(bE[n]=0),bE[n]+=1,n+bE[n].toString()}N();var DZ=["channelsFirst","channelsLast"],kZ=["nearest","bilinear"],_Z=["valid","same","causal"],AZ=["max","avg"],RZ=["sum","mul","concat","ave"];var Dy=new Map;function Rn(n){yc(DZ,"DataFormat",n)}function OZ(n){yc(kZ,"InterpolationFormat",n)}function Vo(n){yc(_Z,"PaddingMode",n)}function JP(n){yc(AZ,"PoolMode",n)}var Rw=[],MZ="/";function Ia(n,t){Rw.push(n);try{let e=t();return Rw.pop(),e}catch(e){throw Rw.pop(),e}}function I2e(){return Rw.length===0?"":Rw.join(MZ)+MZ}function wE(n){if(!FZ(n))throw new Error("Not a valid tensor name: '"+n+"'");return I2e()+n}function CE(n){if(!FZ(n))throw new Error("Not a valid tensor name: '"+n+"'");Dy.has(n)||Dy.set(n,0);let t=Dy.get(n);if(Dy.set(n,Dy.get(n)+1),t>0){let e=`${n}_${t}`;return Dy.set(e,1),e}else return n}var S2e=new RegExp(/^[A-Za-z0-9][-A-Za-z0-9\._\/]*$/);function FZ(n){return!!n.match(S2e)}N();N();N();function PZ(n){return n===parseInt(n.toString(),10)}function ki(n,t,e){t==null&&(t=0),e==null&&(e=n.length);let r=1;for(let o=t;o<e;++o)r*=n[o];return r}function jm(n){if(n.length===0)return Number.NaN;let t=Number.POSITIVE_INFINITY;for(let e=0;e<n.length;e++){let r=n[e];r<t&&(t=r)}return t}function Sa(n){if(n.length===0)return Number.NaN;let t=Number.NEGATIVE_INFINITY;for(let e=0;e<n.length;e++){let r=n[e];r>t&&(t=r)}return t}function Uo(n,t){if(t<n)throw new X(`end (${t}) < begin (${n}) is forbidden.`);let e=[];for(let r=n;r<t;++r)e.push(r);return e}N();var e$;function gr(){return e$==null&&(e$=o0().epsilon()),e$}function jo(){return"channelsLast"}function To(n,t){return fe(n,t)}function pp(n,t=-1){let e=n.shape.slice();return t<0&&(t=e.length+t+1),e.splice(t,0,1),V(n,e)}function $Z(n,t){return K(()=>{if(n.shape.length!==2)throw new X(`repeat() expects a rank-2 tensor, but received a rank-${n.shape.length} tensor.`);let e=pp(n,1);return SE(e,[1,t,1])})}function LZ(n){let t=[ki(n.shape)];return V(n,t)}function BZ(n){if(n.rank<=1)throw new X(`batchFlatten requires a minimum rank of 2. Got rank: ${n.rank}.`);let t=[n.shape[0],ki(n.shape,1)];return V(n,t)}function up(n,t,e){return K(()=>{switch(n.rank){case 1:return _m(n,t,e);case 2:return dy(n,[t,0],[e,n.shape[1]]);case 3:return Am(n,[t,0,0],[e,n.shape[1],n.shape[2]]);case 4:return Rf(n,[t,0,0,0],[e,n.shape[1],n.shape[2],n.shape[3]]);case 5:return $e(n,[t,0,0,0,0],[e,n.shape[1],n.shape[2],n.shape[3],n.shape[4]]);case 6:return $e(n,[t,0,0,0,0,0],[e,n.shape[1],n.shape[2],n.shape[3],n.shape[4],n.shape[5]]);default:throw new X(`sliceAlongFirstAxis() received an unsupported tensor rank: ${n.rank}`)}})}function t$(n,t,e){return K(()=>{switch(n.rank){case 1:return _m(n,t,e);case 2:return dy(n,[0,t],[n.shape[0],e]);case 3:return Am(n,[0,0,t],[n.shape[0],n.shape[1],e]);case 4:return Rf(n,[0,0,0,t],[n.shape[0],n.shape[1],n.shape[2],e]);default:throw new X(`sliceAlongLastAxis() received an unsupported tensor rank: ${n.rank}`)}})}function Mw(n,t,e,r){return K(()=>{switch(n.rank){case 1:return _m(n,t,e);case 2:switch(r){case 1:return up(n,t,e);case 2:return t$(n,t,e);default:throw new X(`The axis is not within the rank of the tensor ${r}`)}case 3:switch(r){case 1:return up(n,t,e);case 2:return Am(n,[0,t,0],[n.shape[0],e,n.shape[2]]);case 3:return t$(n,t,e);default:throw new X(`The axis is not within the rank of the tensor ${r}`)}case 4:switch(r){case 1:return up(n,t,e);case 2:return Rf(n,[0,t,0,0],[n.shape[0],e,n.shape[2],n.shape[3]]);case 3:return Rf(n,[0,0,t,0],[n.shape[0],n.shape[1],e,n.shape[3]]);case 4:return t$(n,t,e);default:throw new X(`The axis is not within the rank of the tensor ${r}`)}default:throw new X(`sliceAlongLastAxis() received an unsupported tensor rank: ${n.rank}`)}})}function ky(n,t=-1){let e;return t<0&&(e=n[0].rank,e!==0?t=e:t=0),t===n[0].rank&&(t=-1),Tt(n,t)}function r$(n,t){switch(n.rank){case 1:return S0([n,t]);case 2:return T0([n,t],0);case 3:return E0([n,t],0);case 4:return N0([n,t],0);default:throw new X(`concatAlongFirstAxis() received an unsupported tensor rank: ${n.rank}`)}}function SE(n,t){if(Array.isArray(t)||(t=[t]),n.rank!==t.length)throw new X(`The length of input n (${t.length}) does not match the number of dimensions in input x (${n.rank})`);return $r(n,t)}function _y(n,t=0,e=1,r,o){return Af(n,t,e,r,o)}function _i(n,t,e,r){if(n.rank<2||t.rank<2)throw new We(`dot requires both inputs to be rank >= 2 but got x shape = ${n.shape} and y shape = ${t.shape}`);if(t.rank>=3){let o=n.shape.slice(-1)[0],s=t.shape.slice(-2)[0];if(o!==s)throw new We(`If rank y >= 3, then the second last dim of y must equal the last dim of x but got x shape = ${n.shape} and  y shape = ${t.shape}`)}if(n.rank===2&&t.rank===2)return ap.matMul({a:n,b:t,transposeA:!1,transposeB:!1,bias:r?n$(n.rank,r,jo()):null,activation:e});{let o=n.shape.slice(),s=o.pop();n=V(n,[-1,s]);let i=t.shape.slice(),a=i.pop(),l=i.pop(),c=[...i,a],u=Array.from({length:t.rank},(h,m)=>m===0?t.rank-2:m<=t.rank-2?m-1:m);t=V(it(t,u),[l,-1]);let p=[...o,...c];return V(ap.matMul({a:n,b:t,transposeA:!1,transposeB:!1,bias:r?n$(n.rank,r,jo()):null,activation:e}),p)}}function TE(n,t,e){return K(()=>(Array.isArray(t)?t=Xt(t,"int32"):t=fe(t,"int32"),ha(n,t,e)))}function Gm(n){return B(n,n)}function n$(n,t,e){let r=t.shape;if(t.rank!==1&&t.rank!==n)throw new X(`Unexpected bias dimensions: ${t.rank}; expected it to be 1 or ${n}`);if(n===5){if(e==="channelsFirst")return r.length===1?V(t,[1,r[0],1,1,1]):V(t,[1,r[3],r[0],r[1],r[2]]);if(e==="channelsLast")return r.length===1?V(t,[1,1,1,1,r[0]]):V(t,[1].concat(r))}else if(n===4){if(e==="channelsFirst")return r.length===1?V(t,[1,r[0],1,1]):V(t,[1,r[2],r[0],r[1]]);if(e==="channelsLast")return r.length===1?V(t,[1,1,1,r[0]]):V(t,[1].concat(r))}else if(n===3){if(e==="channelsFirst")return r.length===1?V(t,[1,r[0],1]):V(t,[1,r[1],r[0]]);if(e==="channelsLast")return r.length===1?V(t,[1,1,r[0]]):V(t,[1].concat(r))}else if(n<3)return t;throw new X(`Unsupported input rank by biasAdd: ${t.rank}`)}function Go(n,t,e){return K(()=>(e==null&&(e=jo()),Rn(e),ae(n,n$(n.rank,t,e))))}function zZ(n,t=1){if(t!==1)throw new We(`Support for alpha values other than 1 (${t}) is not implemented yet.`);return ua(n)}function VZ(n){return K(()=>xe(n,ae(fn(n),1)))}function EE(n,t,e,r){return K(()=>I1(n,t,e,r))}function UZ(n){return K(()=>{let t=ae(.5,B(.2,n));return pr(t,0,1)})}function Hf(n,t,e=!1){return e?n():t()}var jZ=["fanIn","fanOut","fanAvg"],GZ=["normal","uniform","truncatedNormal"];function T2e(n){yc(jZ,"FanMode",n)}function E2e(n){yc(GZ,"Distribution",n)}var Wo=class extends he.Serializable{fromConfigUsesCustomObjects(){return!1}getConfig(){return{}}},qZ=(()=>{class n extends Wo{apply(e,r){return Kt(e,r)}}return n.className="Zeros",n})();he.registerClass(qZ);var NE=(()=>{class n extends Wo{apply(e,r){return er(e,r)}}return n.className="Ones",n})();he.registerClass(NE);var KZ=(()=>{class n extends Wo{constructor(e){if(super(),typeof e!="object")throw new X(`Expected argument of type ConstantConfig but got ${e}`);if(e.value===void 0)throw new X(`config must have value set but got ${e}`);this.value=e.value}apply(e,r){return K(()=>B(Ie(this.value),er(e,r)))}getConfig(){return{value:this.value}}}return n.className="Constant",n})();he.registerClass(KZ);var XZ=(()=>{class n extends Wo{constructor(e){super(),this.DEFAULT_MINVAL=-.05,this.DEFAULT_MAXVAL=.05,this.minval=e.minval||this.DEFAULT_MINVAL,this.maxval=e.maxval||this.DEFAULT_MAXVAL,this.seed=e.seed}apply(e,r){return is(e,this.minval,this.maxval,r,this.seed)}getConfig(){return{minval:this.minval,maxval:this.maxval,seed:this.seed}}}return n.className="RandomUniform",n})();he.registerClass(XZ);var YZ=(()=>{class n extends Wo{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,r){if(r=r||"float32",r!=="float32"&&r!=="int32")throw new We(`randomNormal does not support dType ${r}.`);return _y(e,this.mean,this.stddev,r,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}return n.className="RandomNormal",n})();he.registerClass(YZ);var ZZ=(()=>{class n extends Wo{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,r){if(r=r||"float32",r!=="float32"&&r!=="int32")throw new We(`truncatedNormal does not support dType ${r}.`);return Fm(e,this.mean,this.stddev,r,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}return n.className="TruncatedNormal",n})();he.registerClass(ZZ);var QZ=(()=>{class n extends Wo{constructor(e){super(),this.gain=e.gain!=null?e.gain:1}apply(e,r){return K(()=>{if(e.length!==2||e[0]!==e[1])throw new X("Identity matrix initializer can only be used for 2D square matrices.");return B(this.gain,Nf(e[0]))})}getConfig(){return{gain:this.gain}}}return n.className="Identity",n})();he.registerClass(QZ);function N2e(n,t="channelsLast"){let e,r;if(Rn(t),n.length===2)e=n[0],r=n[1];else if([3,4,5].indexOf(n.length)!==-1){if(t==="channelsFirst"){let o=ki(n,2);e=n[1]*o,r=n[0]*o}else if(t==="channelsLast"){let o=ki(n,0,n.length-2);e=n[n.length-2]*o,r=n[n.length-1]*o}}else{let o=ki(n);e=Math.sqrt(o),r=Math.sqrt(o)}return[e,r]}var _s=(()=>{class n extends Wo{constructor(e){if(super(),e.scale<0)throw new X(`scale must be a positive float. Got: ${e.scale}`);this.scale=e.scale==null?1:e.scale,this.mode=e.mode==null?"fanIn":e.mode,T2e(this.mode),this.distribution=e.distribution==null?"normal":e.distribution,E2e(this.distribution),this.seed=e.seed}apply(e,r){let o=N2e(e),s=o[0],i=o[1],a=this.scale;if(this.mode==="fanIn"?a/=Math.max(1,s):this.mode==="fanOut"?a/=Math.max(1,i):a/=Math.max(1,(s+i)/2),this.distribution==="normal"){let l=Math.sqrt(a);if(r=r||"float32",r!=="float32"&&r!=="int32")throw new We(`${this.getClassName()} does not support dType ${r}.`);return Fm(e,0,l,r,this.seed)}else{let l=Math.sqrt(3*a);return is(e,-l,l,r,this.seed)}}getConfig(){return{scale:this.scale,mode:this.mode,distribution:this.distribution,seed:this.seed}}}return n.className="VarianceScaling",n})();he.registerClass(_s);var o$=(()=>{class n extends _s{constructor(e){super({scale:1,mode:"fanAvg",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return _s.className}}return n.className="GlorotUniform",n})();he.registerClass(o$);var s$=(()=>{class n extends _s{constructor(e){super({scale:1,mode:"fanAvg",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return _s.className}}return n.className="GlorotNormal",n})();he.registerClass(s$);var i$=(()=>{class n extends _s{constructor(e){super({scale:2,mode:"fanIn",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return _s.className}}return n.className="HeNormal",n})();he.registerClass(i$);var a$=(()=>{class n extends _s{constructor(e){super({scale:2,mode:"fanIn",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return _s.className}}return n.className="HeUniform",n})();he.registerClass(a$);var l$=(()=>{class n extends _s{constructor(e){super({scale:1,mode:"fanIn",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return _s.className}}return n.className="LeCunNormal",n})();he.registerClass(l$);var c$=(()=>{class n extends _s{constructor(e){super({scale:1,mode:"fanIn",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return _s.className}}return n.className="LeCunUniform",n})();he.registerClass(c$);var JZ=(()=>{class n extends Wo{constructor(e){super(),this.DEFAULT_GAIN=1,this.ELEMENTS_WARN_SLOW=2e3,this.gain=e.gain==null?this.DEFAULT_GAIN:e.gain,this.seed=e.seed}apply(e,r){return K(()=>{if(e.length<2)throw new We("Shape must be at least 2D.");if(r!=="int32"&&r!=="float32"&&r!==void 0)throw new TypeError(`Unsupported data type ${r}.`);r=r;let o=C.sizeFromShape(e.slice(0,-1)),s=e[e.length-1],i=o*s;i>this.ELEMENTS_WARN_SLOW&&console.warn(`Orthogonal initializer is being called on a matrix with more than ${this.ELEMENTS_WARN_SLOW} (${i}) elements: Slowness may result.`);let a=[Math.max(s,o),Math.min(s,o)],l=_y(a,0,1,r,this.seed),c=F1.qr(l,!1),u=c[0],f=c[1].flatten().stridedSlice([0],[Math.min(s,o)*Math.min(s,o)],[Math.min(s,o)+1]);return u=B(u,f.sign()),o<s&&(u=u.transpose()),B(Ie(this.gain),u.reshape(e))})}getConfig(){return{gain:this.gain,seed:this.seed}}}return n.className="Orthogonal",n})();he.registerClass(JZ);var WZ={constant:"Constant",glorotNormal:"GlorotNormal",glorotUniform:"GlorotUniform",heNormal:"HeNormal",heUniform:"HeUniform",identity:"Identity",leCunNormal:"LeCunNormal",leCunUniform:"LeCunUniform",ones:"Ones",orthogonal:"Orthogonal",randomNormal:"RandomNormal",randomUniform:"RandomUniform",truncatedNormal:"TruncatedNormal",varianceScaling:"VarianceScaling",zeros:"Zeros"};function HZ(n,t={}){return xc(n,he.SerializationMap.getMap().classNameMap,t,"initializer")}function hn(n){return Ny(n)}function Jt(n){if(typeof n=="string"){let t=n in WZ?WZ[n]:n;if(t==="GlorotNormal")return new s$;if(t==="GlorotUniform")return new o$;if(t==="HeNormal")return new i$;if(t==="HeUniform")return new a$;if(t==="LeCunNormal")return new l$;if(t==="LeCunUniform")return new c$;{let e={};return e.className=t,e.config={},HZ(e)}}else return n instanceof Wo?n:HZ(n)}function DE(n){return Array.isArray(n)&&Array.isArray(n[0])}function Ay(n){return n.length===0?[]:Array.isArray(n[0])?n:[n]}function Ve(n){let t;if(Array.isArray(n)){if(n.length!==1)throw new X(`Expected Tensor length to be 1; got ${n.length}`);t=n[0]}else t=n;return t}function ct(n){if(Array.isArray(n)&&Array.isArray(n[0])){if(n.length===1)return n=n,n[0];throw new X(`Expected exactly 1 Shape; got ${n.length}`)}else return n}function Ry(n){let t=0;for(let e of n)e.shape.length===0?t+=1:t+=e.shape.reduce((r,o)=>r*o);return t}N();N();var tQ="Variable",Ow=class{constructor(t,e="float32",r=tQ,o=!0,s=null){this.dtype=e??"float32",this.shape=t.shape,this.id=vE(),r=r??tQ,this.originalName=wE(r),this.name=CE(this.originalName),this.trainable_=o,this.constraint=s,this.val=bw(t,this.trainable_,this.name,this.dtype)}read(){return this.assertNotDisposed(),this.val}write(t){return this.assertNotDisposed(),k2e(this.val,t),this.val.id!==t.id&&(this.val.assign(t),this.constraint!=null&&this.val.assign(this.constraint.apply(this.val))),this}dispose(){this.assertNotDisposed(),this.val.dispose()}assertNotDisposed(){if(this.val.isDisposed)throw new Error(`LayersVariable ${this.name} is already disposed.`)}get trainable(){return this.trainable_}set trainable(t){this.trainable_=t,this.val.trainable=t}};function k2e(n,t){if(n.shape.toString()!==t.shape.toString())throw new Error("Shape mismatch: "+JSON.stringify(n.shape)+" vs. "+JSON.stringify(t.shape))}function Fw(n){return n.map(t=>t.read())}function My(n){n.forEach(t=>{t[0].write(t[1])})}var an=class{constructor(t){this.dtype=t.dtype,this.shape=t.shape,t.shape!=null?this.ndim=t.shape.length:this.ndim=t.ndim,this.maxNDim=t.maxNDim,this.minNDim=t.minNDim,this.axes=t.axes||{}}},Eo=class{constructor(t,e,r,o,s,i,a){this.dtype=t,this.shape=e,this.sourceLayer=r,this.inputs=o,this.callArgs=s,this.outputTensorIndex=a,this.id=vE(),i!=null&&(this.originalName=wE(i),this.name=CE(this.originalName)),this.rank=e.length}},_2e=0,fp=class{constructor(t,e){this.callArgs=e,this.id=_2e++,this.outboundLayer=t.outboundLayer,this.inboundLayers=t.inboundLayers,this.nodeIndices=t.nodeIndices,this.tensorIndices=t.tensorIndices,this.inputTensors=t.inputTensors,this.outputTensors=t.outputTensors,this.inputMasks=t.inputMasks,this.outputMasks=t.outputMasks,this.inputShapes=t.inputShapes,this.outputShapes=t.outputShapes;for(let r of t.inboundLayers)r?.outboundNodes.push(this);t.outboundLayer.inboundNodes.push(this)}getConfig(){let t=[];for(let e of this.inboundLayers)e!=null?t.push(e.name):t.push(null);return{outboundLayer:this.outboundLayer?this.outboundLayer.name:null,inboundLayers:t,nodeIndices:this.nodeIndices,tensorIndices:this.tensorIndices}}},A2e=0,He=class extends he.Serializable{constructor(t={}){super(),this._callHook=null,this._addedWeightNames=[],this._stateful=!1,this.id=A2e++,this.activityRegularizer=null,this.inputSpec=null,this.supportsMasking=!1,this._trainableWeights=[],this._nonTrainableWeights=[],this._losses=[],this._updates=[],this._built=!1,this.inboundNodes=[],this.outboundNodes=[];let e=t.name;if(!e){let r=this.getClassName();e=Ni(r)+"_"+Wf(r)}if(this.name=e,this.trainable_=t.trainable==null?!0:t.trainable,t.inputShape!=null||t.batchInputShape!=null){let r;if(t.batchInputShape!=null)r=t.batchInputShape;else if(t.inputShape!=null){let s=null;t.batchSize!=null&&(s=t.batchSize),r=[s].concat(t.inputShape)}this.batchInputShape=r;let o=t.dtype;o==null&&(o=t.inputDType),o==null&&(o="float32"),this.dtype=o}t.weights!=null?this.initialWeights=t.weights:this.initialWeights=null,this._refCount=null,this.fastWeightInitDuringBuild=!1}static nodeKey(t,e){return t.name+"_ib-"+e.toString()}getNodeAtIndex(t,e){if(this.inboundNodes.length===0)throw new zo(`The layer has never been called and thus has no defined ${e}.`);if(this.inboundNodes.length<=t)throw new X(`Asked to get ${e} at node ${t}, but the layer has only ${this.inboundNodes.length} inbound nodes.`);return this.inboundNodes[t]}getInputAt(t){return Vr(this.getNodeAtIndex(t,"input").inputTensors)}getOutputAt(t){return Vr(this.getNodeAtIndex(t,"output").outputTensors)}get input(){if(this.inboundNodes.length>1)throw new ni(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer input" is ill-defined. Use \`getInputAt(nodeIndex)\` instead.`);if(this.inboundNodes.length===0)throw new ni(`Layer ${this.name} is not connected, no input to return.`);return Vr(this.getNodeAtIndex(0,"input").inputTensors)}get output(){if(this.inboundNodes.length===0)throw new ni(`Layer ${this.name} has no inbound nodes.`);if(this.inboundNodes.length>1)throw new ni(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer output" is ill-defined. Use \`getOutputAt(nodeIndex)\` instead.`);return Vr(this.getNodeAtIndex(0,"output").outputTensors)}get losses(){return this._losses}calculateLosses(){return this.losses.map(t=>t())}get updates(){return this._updates}get built(){return this._built}set built(t){this._built=t}get trainable(){return this.trainable_}set trainable(t){this._trainableWeights.forEach(e=>e.trainable=t),this.trainable_=t}get trainableWeights(){return this.trainable_?this._trainableWeights.filter(t=>t.trainable):[]}set trainableWeights(t){this._trainableWeights=t}get nonTrainableWeights(){return this.trainable?this._trainableWeights.filter(t=>!t.trainable).concat(this._nonTrainableWeights):this._trainableWeights.concat(this._nonTrainableWeights)}set nonTrainableWeights(t){this._nonTrainableWeights=t}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}get stateful(){return this._stateful}resetStates(){if(!this.stateful)throw new Error("Cannot call the resetStates() method of a non-stateful Layer object.")}assertInputCompatibility(t){let e=Vt(t);if(this.inputSpec==null||this.inputSpec.length===0)return;let r=Vt(this.inputSpec);if(e.length!==r.length)throw new X(`Layer ${this.name} expects ${r.length} inputs, but it received ${e.length} input tensors. Input received: ${t}`);for(let o=0;o<e.length;o++){let s=e[o],i=r[o];if(i==null)continue;let a=s.rank;if(i.ndim!=null&&a!==i.ndim)throw new X(`Input ${o} is incompatible with layer ${this.name}: expected ndim=${i.ndim}, found ndim=${a}`);if(i.maxNDim!=null&&a>i.maxNDim)throw new X(`Input ${o} is incompatible with layer ${this.name}: expected max_ndim=${i.maxNDim}, found ndim=${a}`);if(i.minNDim!=null&&a<i.minNDim)throw new X(`Input ${o} is incompatible with layer ${this.name}: expected min_ndim=${i.minNDim}, found ndim=${a}.`);if(i.dtype!=null&&s.dtype!==i.dtype)throw new X(`Input ${o} is incompatible with layer ${this.name} : expected dtype=${i.dtype}, found dtype=${s.dtype}.`);if(i.axes){let l=s.shape;for(let c in i.axes){let u=Number(c),p=i.axes[c],f=u>=0?l[u]:l[l.length+u];if(p!=null&&[p,null].indexOf(f)===-1)throw new X(`Input ${o} is incompatible with layer ${this.name}: expected axis ${u} of input shape to have value ${p} but got shape ${l}.`)}}if(i.shape!=null)for(let l=0;l<i.shape.length;++l){let c=i.shape[l],u=s.shape[l];if(c!=null&&u!=null&&c!==u)throw new X(`Input ${o} is incompatible with layer ${this.name}: expected shape=${i.shape}, found shape=${s.shape}.`)}}}call(t,e){return t}invokeCallHook(t,e){this._callHook!=null&&this._callHook(t,e)}setCallHook(t){this._callHook=t}clearCallHook(){this._callHook=null}apply(t,e){e=e||{},this.assertNotDisposed();let r=Vt(t),o=O2e(t),s=F2e(t);if(o===s)throw new X("Arguments to apply() must be all SymbolicTensors or all Tensors");return Ia(this.name,()=>{if(!this.built){this.assertInputCompatibility(t);let i=[];for(let a of Vt(t))i.push(a.shape);this.build(Vr(i)),this.built=!0,this.initialWeights&&this.setWeights(this.initialWeights),this._refCount===null&&s&&(this._refCount=1)}if(this.assertInputCompatibility(t),s){let i=this.call(t,e);this.supportsMasking&&this.setMaskMetadata(t,i);let a=Vt(i),l=[];for(let c of a)r.indexOf(c)!==-1&&(c=c.clone()),l.push(c);if(i=Vr(l),this.activityRegularizer!=null)throw new We("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return i}else{let i=R2e(t),a=this.computeOutputShape(i),l,c=M2e(t);if(this.warnOnIncompatibleInputShape(Array.isArray(t)?i[0]:i),a!=null&&a.length>0&&Array.isArray(a[0])?l=a.map((u,p)=>new Eo(c,u,this,Vt(t),e,this.name,p)):l=new Eo(c,a,this,Vt(t),e,this.name),this.addInboundNode(t,l,null,null,i,a,e),this._refCount++,this.activityRegularizer!=null)throw new We("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return l}})}warnOnIncompatibleInputShape(t){if(this.batchInputShape!=null)if(t.length!==this.batchInputShape.length)console.warn(`The rank of the input tensor provided (shape: ${JSON.stringify(t)}) does not match that of the batchInputShape (${JSON.stringify(this.batchInputShape)}) of the layer ${this.name}`);else{let e=!1;this.batchInputShape.forEach((r,o)=>{r!=null&&t[o]!=null&&t[o]!==r&&(e=!0)}),e&&console.warn(`The shape of the input tensor (${JSON.stringify(t)}) does not match the expectation of layer ${this.name}: ${JSON.stringify(this.batchInputShape)}`)}}get outputShape(){if(this.inboundNodes==null||this.inboundNodes.length===0)throw new ni(`The layer ${this.name} has never been called and thus has no defined output shape.`);let t=[];for(let e of this.inboundNodes){let r=JSON.stringify(e.outputShapes);t.indexOf(r)===-1&&t.push(r)}if(t.length===1){let e=this.inboundNodes[0].outputShapes;return Array.isArray(e)&&Array.isArray(e[0])&&e.length===1?e[0]:e}else throw new ni(`The layer ${this.name} has multiple inbound nodes with different output shapes. Hence the notion of "output shape" is ill-defined for the layer.`)}countParams(){if(!this.built)throw new zo(`You tried to call countParams() on ${this.name}, but the layer is not built yet. Build it first by calling build(batchInputShape).`);return Ry(this.weights)}build(t){this.built=!0}getWeights(t=!1){return Fw(t?this.trainableWeights:this.weights)}setWeights(t){K(()=>{let e=this.weights;if(e.length!==t.length)throw new X(`You called setWeights(weights) on layer "${this.name}" with a weight list of length ${t.length}, but the layer was expecting ${e.length} weights. Provided weights: ${t}...`);if(e.length===0)return;let r=[],o=Fw(e);for(let s=0;s<o.length;++s){let i=o[s],a=e[s],l=t[s];if(!C.arraysEqual(i.shape,l.shape))throw new X(`Layer weight shape ${i.shape} not compatible with provided weight shape ${l.shape}`);r.push([a,l])}My(r)})}addWeight(t,e,r,o,s,i,a,l){if(this._addedWeightNames.indexOf(t)!==-1)throw new X(`Duplicate weight name ${t} for layer ${this.name}`);this._addedWeightNames.push(t),r==null&&(r="float32"),this.fastWeightInitDuringBuild&&(o=l!=null?l():Jt("zeros"));let c=o.apply(e,r),u=new Ow(c,r,t,i,a);return c.dispose(),s!=null&&this.addLoss(()=>s.apply(u.read())),i==null&&(i=!0),i?this._trainableWeights.push(u):this._nonTrainableWeights.push(u),u}setFastWeightInitDuringBuild(t){this.fastWeightInitDuringBuild=t}addLoss(t){t==null||Array.isArray(t)&&t.length===0||(t=Vt(t),this._losses!==void 0&&this._losses!==null&&this.losses.push(...t))}computeOutputShape(t){return t}computeMask(t,e){if(!this.supportsMasking){if(e!=null)if(Array.isArray(e))e.forEach(r=>{if(r!=null)throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`)});else throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`);return null}return e}setMaskMetadata(t,e,r){if(!this.supportsMasking)return;let o=this.computeMask(t,r),s=Vt(e),i=Vt(o);if(s.length!==i.length)throw new Error(`${this.name} outputs ${s.length} tensors but ${s.length} masks for those tensors`);for(let a=0;a<s.length;a++)s[a].kerasMask=i[a]}addInboundNode(t,e,r,o,s,i,a=null){let l=Vt(t);e=Vt(e),r=Vt(r),o=Vt(o),s=Ay(s),i=Ay(i);let c=[],u=[],p=[];for(let f of l)c.push(f.sourceLayer),u.push(f.nodeIndex),p.push(f.tensorIndex);new fp({outboundLayer:this,inboundLayers:c,nodeIndices:u,tensorIndices:p,inputTensors:l,outputTensors:e,inputMasks:r,outputMasks:o,inputShapes:s,outputShapes:i},a);for(let f=0;f<e.length;f++)e[f].sourceLayer=this,e[f].nodeIndex=this.inboundNodes.length-1,e[f].tensorIndex=f}getConfig(){let t={name:this.name,trainable:this.trainable};return this.batchInputShape!=null&&(t.batchInputShape=this.batchInputShape),this.dtype!=null&&(t.dtype=this.dtype),t}disposeWeights(){return this.weights.forEach(t=>t.dispose()),this.weights.length}assertNotDisposed(){if(this._refCount===0)throw new Error(`Layer '${this.name}' is already disposed.`)}dispose(){if(!this.built)throw new Error(`Cannot dispose Layer ${this.name} because it has not been built yet.`);if(this._refCount===null)throw new Error(`Cannot dispose Layer ${this.name} because it has not been used yet.`);this.assertNotDisposed();let t=0;return--this._refCount===0&&(t=this.disposeWeights()),{refCountAfterDispose:this._refCount,numDisposedVariables:t}}};function R2e(n){n=Vt(n);let t=[];for(let e of n)t.push(e.shape);return Vr(t)}function M2e(n){return"float32"}function u$(n,t,e){if((t==null||e!=null&&e>0)&&(t=n.sourceLayer,e=n.nodeIndex),t.inboundNodes.length===0)return[n];{let r=t.inboundNodes[e];if(r.inboundLayers.length===0)return r.inputTensors;{let o=[];for(let s=0;s<r.inboundLayers.length;s++){let i=r.inputTensors[s],a=r.inboundLayers[s],l=r.nodeIndices[s],c=u$(i,a,l);for(let u of c)o.indexOf(u)===-1&&o.push(u)}return o}}}function O2e(n){let t=!0;for(let e of Vt(n))if(!(e instanceof Eo)){t=!1;break}return t}function F2e(n){let t=!0;for(let e of Vt(n))if(e instanceof Eo){t=!1;break}return t}var Wm=(()=>{class n extends He{constructor(e){if(super({dtype:e.dtype,name:e.name!=null?e.name:Wf("input").toString()}),e.batchSize==null&&(e.batchSize=null),e.sparse==null&&(e.sparse=!1),this.trainable=!1,this.built=!0,this.sparse=e.sparse,e.inputShape!=null&&e.batchInputShape!=null)throw new X("Only provide the inputShape OR batchInputShape argument to inputLayer, not both at the same time.");let r=e.batchInputShape;if(r==null){if(e.inputShape==null)throw new X("An InputLayer should be passed either a `batchInputShape` or an `inputShape`.");r=[e.batchSize].concat(e.inputShape)}else if(e.batchSize!=null)throw new X("Cannot specify batchSize if batchInputShape is specified when creating an InputLayer.");let o=e.dtype||"float32";this.batchInputShape=r,this.dtype=o,this.inputSpec=[{shape:r}];let s=new Eo(this.dtype,this.batchInputShape,this,[],{},this.name);s.nodeIndex=0,s.tensorIndex=0,new fp({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:[s],outputTensors:[s],inputMasks:[null],outputMasks:[null],inputShapes:[r],outputShapes:[r]})}apply(e,r){throw new X(`Cannot pass any input to an InputLayer's apply() method. InputLayer name: ${this.name}`)}dispose(){return{refCountAfterDispose:this._refCount,numDisposedVariables:0}}getConfig(){return{batchInputShape:this.batchInputShape,dtype:this.dtype,sparse:this.sparse,name:this.name}}}return n.className="InputLayer",n})();he.registerClass(Wm);function p$(n){if(n.batchShape==null&&n.shape==null)throw new Error("Please provide to Input either a `shape` or a `batchShape` argument. Note that `shape` does not include the batch dimension.");if(n.batchShape!=null&&n.shape!=null)throw new X("Please provide either a `shape` or `batchShape` argument to Input, but not both.");let t=n.batchShape;n.shape!=null&&t==null&&(t=[null].concat(n.shape));let e=n.dtype;return e==null&&(e="float32"),new Wm({batchInputShape:t,name:n.name,dtype:e,sparse:n.sparse}).inboundNodes[0].outputTensors[0]}function P2e(n,t){if(n.dtype==null||n.dtype===t.dtype)return t;try{return fe(t,n.dtype)}catch{throw new X(`The dtype of the feed (${t.dtype}) can not be cast to the dtype of the key '${n.name}' (${n.dtype}).`)}}var bc=class n{constructor(t){if(this.id2Value={},this.id2Mask={},this.name2Id={},t instanceof n)for(let e in t.id2Value)this.id2Value[e]=t.id2Value[e],e in t.id2Mask&&(this.id2Mask[e]=t.id2Mask[e]);else{if(t==null)return;for(let e of t)this.add(e.key,e.value)}}add(t,e,r){if(this.id2Value[t.id]==null)this.id2Value[t.id]=P2e(t,e),this.name2Id[t.name]=t.id,r!=null&&(this.id2Mask[t.id]=r);else throw new X(`Duplicate key: name=${t.name}, id=${t.id}`);return this}addFeed(t){this.add(t.key,t.value)}hasKey(t){return this.id2Value[t.id]!=null}names(){return Object.keys(this.name2Id)}getValue(t){if(t instanceof Eo){if(this.id2Value[t.id]==null)throw new X(`Nonexistent key: ${t.name}`);return this.id2Value[t.id]}else{let e=this.name2Id[t];if(e==null)throw new X(`Feed dict has no SymbolicTensor name: ${t}`);return this.id2Value[e]}}getMask(t){if(t instanceof Eo){if(this.id2Value[t.id]==null)throw new X(`Nonexistent key: ${t.name}`);return this.id2Mask[t.id]}else{let e=this.name2Id[t];if(e==null)throw new X(`Feed dict has no SymbolicTensor name: ${t}`);return this.id2Mask[e]}}disposeMasks(){this.id2Mask!=null&&Be(this.id2Mask)}},kE=new _w,_E=new _w;function rQ(n){kE?.setMaxEntries(n),_E?.setMaxEntries(n)}function Hm(n,t,e,r){let o=e==null?!1:e.training,s=Array.isArray(n),i=s?n:[n],a=i.map(h=>h.name),l=[],c=t.names();for(let h of a)c.indexOf(h)!==-1?l.push(t.getValue(h)):l.push(null);r!=null&&(r.maxNumTensors=-1/0,r.minNumTensors=1/0);let u=a.join(",")+"|"+t.names().sort().join(","),p=kE.get(u),f;if(p==null){let h=$2e(i,t);p=h.sorted,f=h.recipientCounts,kE.put(u,p),_E.put(u,f)}f={},o||Object.assign(f,_E.get(u));let d=new bc(t);for(let h=0;h<p.length;++h){if(r!=null){let L=Kx().numTensors;L>r.maxNumTensors&&(r.maxNumTensors=L),L<r.minNumTensors&&(r.minNumTensors=L)}let m=p[h],g=m.sourceLayer;if(g instanceof Wm)continue;let x=[],b=[],w=[],v=!1;for(let L of m.inputs){let z=d.getValue(L),W=d.getMask(L);x.push(z),b.push(W),W!=null&&(v=!0),o||(f[L.name]--,f[L.name]===0&&!t.hasKey(L)&&a.indexOf(L.name)===-1&&!z.isDisposed&&L.sourceLayer.stateful!==!0&&w.push(z))}v&&(e=e||{},e.mask=b[0]);let S=Vt(g.apply(x,e)),k=null;g.supportsMasking&&(k=g.computeMask(x,b));let A=B2e(m),$=Array.isArray(A)?A:[A];for(let L=0;L<$.length;++L){d.hasKey($[L])||d.add($[L],S[L],Array.isArray(k)?k[0]:k);let z=a.indexOf($[L].name);z!==-1&&(l[z]=S[L])}o||Be(w)}return d.disposeMasks(),s?l:l[0]}function $2e(n,t){C.assert(n!=null&&n.length>0,()=>"Expected at least one fetch, got none");let e=[],r={};if(n.length===1){let o=nQ(n[0],t);e=o.sorted,r=o.recipientMap}else{let o=new Set;for(let s of n){let{sorted:i,recipientMap:a}=nQ(s,t);for(let l of i)o.has(l.name)||(e.push(l),o.add(l.name));for(let l in a)r[l]==null&&(r[l]=new Set),a[l].forEach(c=>r[l].add(c))}}return{sorted:e,recipientCounts:L2e(r)}}function L2e(n){let t={};for(let e in n)t[e]=n[e].size;return t}function nQ(n,t){let e=new Set,r=[],o={};for(let a of t.names())e.add(a);let s=[],i=[];for(s.push(n);s.length>0;){let a=s[s.length-1];if(e.has(a.name)){s.pop();continue}let l=i[i.length-1]===s.length-1;if(a.inputs.length===0||l)s.pop(),r.push(a),e.add(a.name),l&&i.pop();else{i.push(s.length-1);for(let c of a.inputs)o[c.name]==null&&(o[c.name]=new Set),o[c.name].add(a.name),!e.has(c.name)&&s.push(c)}}return{sorted:r,recipientMap:o}}function B2e(n){let t;if(n.sourceLayer.inboundNodes.length===1)t=n.sourceLayer.output;else{let e=null;for(let r=0;r<n.sourceLayer.inboundNodes.length;++r)for(let o of n.sourceLayer.inboundNodes[r].outputTensors)if(o.id===n.id){e=r;break}t=n.sourceLayer.getOutputAt(e)}return t}var z2e=Y();z2e.registerFlag("TOPOLOGICAL_SORT_CACHE_MAX_ENTRIES",()=>100,rQ);N();N();N();function f$(n,t){return K(()=>qt(Ee(B(n,n),t,!0)))}var qm=class extends he.Serializable{getConfig(){return{}}},iQ=(()=>{class n extends qm{constructor(e){super(),this.defaultMaxValue=2,this.defaultAxis=0,this.maxValue=e.maxValue!=null?e.maxValue:this.defaultMaxValue,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return K(()=>{let r=f$(e,this.axis),o=pr(r,0,this.maxValue);return B(e,xe(o,ae(gr(),r)))})}getConfig(){return{maxValue:this.maxValue,axis:this.axis}}}return n.className="MaxNorm",n})();he.registerClass(iQ);var aQ=(()=>{class n extends qm{constructor(e){super(),this.defaultAxis=0,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return K(()=>xe(e,ae(gr(),f$(e,this.axis))))}getConfig(){return{axis:this.axis}}}return n.className="UnitNorm",n})();he.registerClass(aQ);var lQ=(()=>{class n extends qm{apply(e){return Br(e)}}return n.className="NonNeg",n})();he.registerClass(lQ);var cQ=(()=>{class n extends qm{constructor(e){super(),this.defaultMinValue=0,this.defaultMaxValue=1,this.defaultRate=1,this.defaultAxis=0,this.minValue=e.minValue!=null?e.minValue:this.defaultMinValue,this.maxValue=e.maxValue!=null?e.maxValue:this.defaultMaxValue,this.rate=e.rate!=null?e.rate:this.defaultRate,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return K(()=>{let r=f$(e,this.axis),o=ae(B(this.rate,pr(r,this.minValue,this.maxValue)),B(1-this.rate,r));return B(e,xe(o,ae(gr(),r)))})}getConfig(){return{minValue:this.minValue,maxValue:this.maxValue,rate:this.rate,axis:this.axis}}}return n.className="MinMaxNorm",n})();he.registerClass(cQ);var oQ={maxNorm:"MaxNorm",minMaxNorm:"MinMaxNorm",nonNeg:"NonNeg",unitNorm:"UnitNorm"};function Un(n){return Ny(n)}function sQ(n,t={}){return xc(n,he.SerializationMap.getMap().classNameMap,t,"constraint")}function jn(n){if(n==null)return null;if(typeof n=="string"){let e={className:n in oQ?oQ[n]:n,config:{}};return sQ(e)}else return n instanceof qm?n:sQ(n)}N();N();function dp(n){return ee(this,null,function*(){if(n==null)return;let t=[],e=[],r=[];for(let o in n){let s=n[o];if(typeof s!="number"){let i=s;t.push(i.data()),e.push(o),r.push(i)}}if(t.length>0){let o=yield Promise.all(t);for(let s=0;s<o.length;++s)n[e[s]]=o[s][0];Be(r)}})}function AE(n){if(n!=null)for(let t in n){let e=n[t];typeof e!="number"&&e.dispose()}}var j2e=125,qf=class{constructor(){this.validationData=null}setParams(t){this.params=t}onEpochBegin(t,e){return ee(this,null,function*(){})}onEpochEnd(t,e){return ee(this,null,function*(){})}onBatchBegin(t,e){return ee(this,null,function*(){})}onBatchEnd(t,e){return ee(this,null,function*(){})}onTrainBegin(t){return ee(this,null,function*(){})}onTrainEnd(t){return ee(this,null,function*(){})}setModel(t){}},RE=class{constructor(t,e=10){t==null&&(t=[]),this.callbacks=t,this.queueLength=e}append(t){this.callbacks.push(t)}setParams(t){for(let e of this.callbacks)e.setParams(t)}setModel(t){for(let e of this.callbacks)e.setModel(t)}onEpochBegin(t,e){return ee(this,null,function*(){e==null&&(e={});for(let r of this.callbacks)yield r.onEpochBegin(t,e)})}onEpochEnd(t,e){return ee(this,null,function*(){e==null&&(e={});for(let r of this.callbacks)yield r.onEpochEnd(t,e)})}onBatchBegin(t,e){return ee(this,null,function*(){e==null&&(e={});for(let r of this.callbacks)yield r.onBatchBegin(t,e)})}onBatchEnd(t,e){return ee(this,null,function*(){e==null&&(e={});for(let r of this.callbacks)yield r.onBatchEnd(t,e)})}onTrainBegin(t){return ee(this,null,function*(){t==null&&(t={});for(let e of this.callbacks)yield e.onTrainBegin(t)})}onTrainEnd(t){return ee(this,null,function*(){t==null&&(t={});for(let e of this.callbacks)yield e.onTrainEnd(t)})}},d$=class extends qf{constructor(){super()}onEpochBegin(t){return ee(this,null,function*(){this.seen=0,this.totals={}})}onBatchEnd(t,e){return ee(this,null,function*(){e==null&&(e={});let r=e.size==null?0:e.size;this.seen+=r;for(let o in e){let s=e[o];if(typeof s=="number")this.totals.hasOwnProperty(o)||(this.totals[o]=0),this.totals[o]=this.totals[o]+s*r;else{let i;o in this.totals?i=this.totals[o]:this.totals[o]=0;let a=K(()=>ae(this.totals[o],B(s,r)));this.totals[o]=a,i?.dispose()}}})}onEpochEnd(t,e){return ee(this,null,function*(){if(e!=null)for(let r of this.params.metrics)this.totals[r]!=null&&(typeof this.totals[r]=="number"?e[r]=this.totals[r]/this.seen:K(()=>{let o=B(xe(1,this.seen),this.totals[r]);e[r]=o,this.totals[r].dispose(),yn(e[r])}))})}},ME=class extends qf{onTrainBegin(t){return ee(this,null,function*(){this.epoch=[],this.history={}})}onEpochEnd(t,e){return ee(this,null,function*(){e==null&&(e={}),this.epoch.push(t);for(let r in e)this.history[r]==null&&(this.history[r]=[]),this.history[r].push(e[r])})}syncData(){return ee(this,null,function*(){let t=[],e=[],r=[];for(let s in this.history){let i=this.history[s];for(let a=0;a<i.length;++a)if(typeof i[a]!="number"){let l=i[a];t.push(l.data()),e.push(s),r.push(a)}}let o=yield Promise.all(t);for(let s=0;s<o.length;++s)this.history[e[s]][r[s]].dispose(),this.history[e[s]][r[s]]=o[s][0]})}},OE=class extends qf{constructor(t,e){if(super(),this.currentEpoch=0,this.nowFunc=t.nowFunc,this.nextFrameFunc=t.nextFrameFunc||wy,this.yieldEvery=e||"auto",this.yieldEvery==="auto"&&(this.yieldEvery=j2e),this.yieldEvery==="never"&&t.onYield!=null)throw new Error("yieldEvery is `never` but you provided an `onYield` callback. Either change `yieldEvery` or remove the callback");C.isNumber(this.yieldEvery)&&(this.maybeWait=NZ(this.maybeWait.bind(this),this.yieldEvery,this.nowFunc)),this.trainBegin=t.onTrainBegin,this.trainEnd=t.onTrainEnd,this.epochBegin=t.onEpochBegin,this.epochEnd=t.onEpochEnd,this.batchBegin=t.onBatchBegin,this.batchEnd=t.onBatchEnd,this.yield=t.onYield}maybeWait(t,e,r){return ee(this,null,function*(){let o=[];this.yield!=null&&(yield dp(r),o.push(this.yield(t,e,r))),o.push(this.nextFrameFunc()),yield Promise.all(o)})}onEpochBegin(t,e){return ee(this,null,function*(){this.currentEpoch=t,this.epochBegin!=null&&(yield dp(e),yield this.epochBegin(t,e))})}onEpochEnd(t,e){return ee(this,null,function*(){let r=[];this.epochEnd!=null&&(yield dp(e),r.push(this.epochEnd(t,e))),this.yieldEvery==="epoch"&&r.push(this.nextFrameFunc()),yield Promise.all(r)})}onBatchBegin(t,e){return ee(this,null,function*(){this.batchBegin!=null&&(yield dp(e),yield this.batchBegin(t,e))})}onBatchEnd(t,e){return ee(this,null,function*(){let r=[];this.batchEnd!=null&&(yield dp(e),r.push(this.batchEnd(t,e))),this.yieldEvery==="batch"?r.push(this.nextFrameFunc()):C.isNumber(this.yieldEvery)&&r.push(this.maybeWait(this.currentEpoch,t,e)),yield Promise.all(r)})}onTrainBegin(t){return ee(this,null,function*(){this.trainBegin!=null&&(yield dp(t),yield this.trainBegin(t))})}onTrainEnd(t){return ee(this,null,function*(){this.trainEnd!=null&&(yield dp(t),yield this.trainEnd(t))})}};function FE(n,t){return n==null&&(n={}),n instanceof qf?[n]:Array.isArray(n)&&n[0]instanceof qf?n:Vt(n).map(r=>new OE(r,t))}var uQ=(()=>{class n{constructor(){}static registerCallbackConstructor(e,r){C.assert(e>=0&&Number.isInteger(e),()=>`Verbosity level is expected to be an integer >= 0, but got ${e}`),n.checkForDuplicate(r),n.constructors[e]==null&&(n.constructors[e]=[]),n.constructors[e].push(r)}static checkForDuplicate(e){for(let r in n.constructors)n.constructors[+r].forEach(s=>{if(s===e)throw new X("Duplicate callback constructor.")})}static clear(){n.constructors={}}static createCallbacks(e){let r=[];for(let o in n.constructors){let s=+o;e>=s&&r.push(...n.constructors[s])}return r.map(o=>new o)}}return n.constructors={},n})();function PE(n,t,e,r,o,s,i,a,l){let c=new ME,u=[new d$,...uQ.createCallbacks(t)];n!=null&&u.push(...n),u.push(c);let p=new RE(u);return p.setParams({epochs:e,initialEpoch:r,samples:o,steps:s,batchSize:i,verbose:t,doValidation:a,metrics:l}),{callbackList:p,history:c}}N();N();N();function As(n,t={},e=!1){return xc(n,he.SerializationMap.getMap().classNameMap,t,"layer",e)}N();N();function Pw(n,t){return K(()=>{n.dtype!=="float32"&&(n=fe(n,"float32"));let e=Ee(Gm(n),t,!0),r=Qs(e.shape,gr()),o=qt($o(e,r));return xe(n,o)})}function Km(n,t){return K(()=>sn(Gm(be(t,n)),-1))}function Lw(n,t){return K(()=>sn(fn(be(t,n)),-1))}function Bw(n,t){return K(()=>{let e=be(n,t),r=pr(fn(n),gr(),Number.MAX_VALUE),o=fn(xe(e,r));return B(100,sn(o,-1))})}function G2e(n,t){return K(()=>{let e=pr(t,gr(),Number.MAX_VALUE),r=kr(ae(1,e)),o=pr(n,gr(),Number.MAX_VALUE),s=kr(ae(1,o));return sn(Gm(be(r,s)),-1)})}function W2e(n,t){return K(()=>{let e=$o(0,be(1,B(n,t)));return sn(Gm(e),-1)})}function H2e(n,t){return K(()=>{let e=$o(0,be(1,B(n,t)));return sn(e,-1)})}function q2e(n,t){return K(()=>{let e=Ee(B(n,t),-1),r=Dr(B(be(1,n),t),-1);return $o(0,ae(1,be(r,e)))})}function K2e(n,t){return K(()=>{let e=Math.log(2),r=be(t,n),o=be(ae(r,Ci(B(-2,r))),e);return sn(o,-1)})}function Xm(n,t,e=!1){return K(()=>{if(e)t=xa(t);else{let r=Ee(t,t.shape.length-1,!0);t=xe(t,r)}return t=pr(t,gr(),1-gr()),pt(Ee(B(fe(n,"float32"),kr(t)),t.shape.length-1))})}function Oy(n,t,e=!1){return K(()=>{let r=fe(da(LZ(n)),"int32");t=pr(t,gr(),1-gr());let o=t.shape,s=V(ma(r,o[o.length-1]),o);return Xm(s,t,e)})}function X2e(n,t){if(!C.arraysEqual(n.shape,t.shape))throw new X(`logits and labels must have the same shape, but got shapes ${JSON.stringify(n.shape)} and ${JSON.stringify(t.shape)}`);return K(()=>{let e=Br(t),r=pt(fn(t));return ae(be(e,B(t,n)),Yu(vn(r)))})}function Fy(n,t){return K(()=>{let e;return e=pr(t,gr(),1-gr()),e=kr(xe(e,be(1,e))),sn(X2e(n,e),-1)})}function Y2e(n,t){return K(()=>{let e=pr(n,gr(),1),r=pr(t,gr(),1);return Ee(B(n,kr(xe(e,r))),-1)})}function Z2e(n,t){return K(()=>{let e=kr(ae(gr(),t));return sn(be(t,B(n,e)),-1)})}function $E(n,t){return K(()=>{let e=Pw(n,-1),r=Pw(t,-1),o=B(e,r);return pt(Ee(o,-1))})}var $w={meanSquaredError:Km,meanAbsoluteError:Lw,meanAbsolutePercentageError:Bw,meanSquaredLogarithmicError:G2e,squaredHinge:W2e,hinge:H2e,categoricalHinge:q2e,logcosh:K2e,categoricalCrossentropy:Xm,sparseCategoricalCrossentropy:Oy,binaryCrossentropy:Fy,kullbackLeiblerDivergence:Y2e,poisson:Z2e,cosineProximity:$E};function LE(n){if(typeof n=="string"){if(n in $w)return $w[n];let t=`Unknown loss ${n}`;throw n.toLowerCase().includes("softmaxcrossentropy")&&(t=`Unknown loss ${n}. Use "categoricalCrossentropy" as the string name for tf.losses.softmaxCrossEntropy`),new X(t)}else return n}N();N();function zE(n,t){return K(()=>{let e=B(.5,vr(t)),r=To(_n(t,e),n.dtype);return sn(lo(n,r),-1)})}function VE(n,t){return K(()=>To(lo(sa(n,-1),sa(t,-1)),"float32"))}function Q2e(n,t){return K(()=>fe(Ee(Zr(lo(n,1),lo(t,1))),"float32"))}function J2e(n,t){return K(()=>fe(Ee(Zr(lo(n,0),lo(t,1))),"float32"))}function fQ(n,t){return K(()=>{let e=Q2e(n,t),r=J2e(n,t),o=ae(e,r);return fe(rn(_n(o,0),xe(e,o),0),"float32")})}function h$(n,t){return Fy(n,t)}function m$(n,t){return n.rank===t.rank&&(n=Qt(n,[n.rank-1])),t=sa(t,-1),t.dtype!==n.dtype&&(t=fe(t,n.dtype)),fe(lo(n,t),"float32")}var eMe=Km,tMe=Km,nMe=Lw,rMe=Lw,oMe=Bw,sMe=Bw,UE=Xm,iMe=$E,g$=Oy,BE={binaryAccuracy:zE,categoricalAccuracy:VE,precision:fQ,categoricalCrossentropy:UE,sparseCategoricalCrossentropy:g$,mse:eMe,MSE:tMe,mae:nMe,MAE:rMe,mape:oMe,MAPE:sMe,cosine:iMe};function dQ(n){if(typeof n=="string"&&n in BE)return BE[n];if(typeof n!="string"&&n!=null)return n;throw new X(`Unknown metric ${n}`)}function zw(n){if(ri(n!==null,`Unknown LossOrMetricFn ${n}`),typeof n=="string")return n;{let t;for(let e of Object.keys($w))if($w[e]===n){t=e;break}if(t!==void 0)return t;for(let e of Object.keys(BE))if(BE[e]===n){t=e;break}return t!==void 0?t:n.name}}N();function mQ(n){let t={Adagrad:()=>Uf.adagrad(.01),Adadelta:()=>Uf.adadelta(1,.95,gr()),Adam:()=>Uf.adam(.001,.9,.999,gr()),Adamax:()=>Uf.adamax(.002,.9,.999,gr(),0),RMSProp:()=>Uf.rmsprop(.001,.9,0,gr()),SGD:()=>Uf.sgd(.01)};if(t.adagrad=t.Adagrad,t.adadelta=t.Adadelta,t.adam=t.Adam,t.adamax=t.Adamax,t.rmsprop=t.RMSProp,t.sgd=t.SGD,n in t)return t[n]();throw new X(`Unknown Optimizer ${n}`)}function y$(n,t,e=!1){if(n==null||typeof n!="object"||Object.getPrototypeOf(n)!==Object.prototype||!x$(n))throw new Error("User-defined metadata is expected to be a JSON object, but is not.");if(e){let r=JSON.stringify(n);r.length>1048576&&console.warn(`User-defined metadata of model "${t}" is too large in size (length=${r.length} when serialized). It is not recommended to store such large objects in user-defined metadata. Please make sure its serialized length is <= 1048576.`)}}function x$(n){if(n===null)return!0;if(typeof n=="object")if(Object.getPrototypeOf(n)===Object.prototype){let t=Object.keys(n);for(let e of t)if(typeof e!="string"||!x$(n[e]))return!1;return!0}else if(Array.isArray(n)){for(let t of n)if(!x$(t))return!1;return!0}else return!1;else{let t=typeof n;return t==="string"||t==="number"||t==="boolean"}}function gQ(n,t,e,r=console.log){let o=cMe(n),s=["Layer (type)","Input Shape","Output shape","Param #"];o?(t=t||90,e=e||[.32,.61,.89,1]):(t=t||115,e=e||[.24,.48,.7,.8,1]),e[e.length-1]<=1&&(e=e.map(u=>Math.floor(t*u)));let i;if(!o){s.push("Receives inputs"),i=[];for(let u in n.nodesByDepth)i.push(...n.nodesByDepth[u])}r("_".repeat(t)),jE(s,e,r),r("=".repeat(t));let a=n.layers;for(let u=0;u<a.length;++u)o?uMe(a[u],e,r):pMe(a[u],e,i,r),r((u===a.length-1?"=":"_").repeat(t));n.checkTrainableWeightsConsistency();let l=lMe(n),c=Ry(n.nonTrainableWeights);r(`Total params: ${l+c}`),r(`Trainable params: ${l}`),r(`Non-trainable params: ${c}`),r("_".repeat(t))}function lMe(n){let t;return n.collectedTrainableWeights!=null?t=Ry(n.collectedTrainableWeights):t=Ry(n.trainableWeights),t}function cMe(n){let t=!0,e=[],r=[];for(let o in n.nodesByDepth)e.push(n.nodesByDepth[o]);for(let o of e){if(o.length>1||o.length===1&&o[0].inboundLayers.length>1){t=!1;break}r.push(...o)}if(t)for(let o of n.layers){let s=!1;for(let i of o.inboundNodes)if(r.indexOf(i)!==-1)if(s){t=!1;break}else s=!0;if(!t)break}return t}function jE(n,t,e=console.log){let r="";for(let o=0;o<n.length;++o)o>0&&(r=r.slice(0,r.length-1)+" "),r+=n[o],r=r.slice(0,t[o]),r+=" ".repeat(t[o]-r.length);e(r)}function uMe(n,t,e){let r,o;try{o=n.inboundNodes.map(l=>JSON.stringify(l.inputShapes)).join(",")}catch{o="multiple"}try{r=JSON.stringify(n.outputShape)}catch{r="multiple"}let s=n.name,i=n.getClassName(),a=[`${s} (${i})`,o,r,n.countParams().toString()];jE(a,t,e)}function pMe(n,t,e,r){let o,s;try{s=n.inboundNodes.map(p=>JSON.stringify(p.inputShapes)).join(",")}catch{s="multiple"}try{o=JSON.stringify(n.outputShape)}catch{o="multiple"}let i=[];for(let p of n.inboundNodes)if(!(e!=null&&e.length>0&&e.indexOf(p)===-1))for(let f=0;f<p.inboundLayers.length;++f){let d=p.inboundLayers[f].name,h=p.nodeIndices[f],m=p.tensorIndices[f];i.push(`${d}[${h}][${m}]`)}let a=n.name,l=n.getClassName(),c=i.length===0?"":i[0],u=[`${a} (${l})`,s,o,n.countParams().toString(),c];jE(u,t,r);for(let p=1;p<i.length;++p)jE(["","","","",i[p]],t,r)}function xQ(n,t,e){return(n==="inboundNodes"||n==="outputLayers"||n==="inputLayers")&&t===0&&typeof e=="string"}function Vw(n,t){if(n===null)return null;if(typeof n=="string")return cp(n);if(typeof n=="number"||typeof n=="boolean")return n;if(n instanceof Array){let e=[],r=n.length;for(let o=0;o<r;++o){let s=n[o];xQ(t,o,s)?e.push(s):e.push(Vw(s,t))}return e}else{let e={};for(let r of Object.keys(n)){let o=n[r];if(r==="name"&&typeof o=="string")e[r]=o;else{let s=cp(r);e[s]=Vw(o,s)}}return e}}function GE(n,t){if(n==null)return null;if(typeof n=="string")return Ni(n);if(typeof n=="number"||typeof n=="boolean")return n;if(n instanceof Array){let e=[],r=n.length;for(let o=0;o<r;++o){let s=n[o];xQ(t,o,s)?e.push(s):e.push(GE(s,t))}return e}else{let e={};for(let r of Object.keys(n)){let o=n[r],s=Ni(r);(r==="name"||r==="className")&&typeof o=="string"?e[s]=o:e[s]=GE(o,r)}return e}}var Py="4.21.0";N();var fMe=n=>{let t=Object.keys(n);if(t.length===0)return!1;let e=t[0].split("/");return!isNaN(parseInt(e[e.length-1],10))},WE=class n extends He{constructor(t){if(super({}),this.containerNodes=new Set,this.name=t.name,this.name==null){let b=this.getClassName().toLowerCase();this.name=Wf(b)}if(this.supportsMasking=!1,this.trainable_=!0,Array.isArray(t.inputs)?this.inputs=t.inputs.slice():this.inputs=[t.inputs],Array.isArray(t.outputs)?this.outputs=t.outputs.slice():this.outputs=[t.outputs],Di(this.inputs).length!==this.inputs.length)throw new X(`The list of inputs passed to the model is redundant. All inputs should only appear once. Found: ${this.inputs.map(b=>b.name)}`);Di(this.outputs).length!==this.outputs.length&&console.warn(`The list of outputs passed to the model is redundant. All outputs should only appear once. Found: ${this.outputs.map(b=>b.name)}`),this.inputLayers=[],this.inputLayersNodeIndices=[],this.inputLayersTensorIndices=[],this.outputLayers=[],this.outputLayersNodeIndices=[],this.outputLayersTensorIndices=[],this.layers=[],this.internalContainerRefs=[];for(let b of this.outputs){let w=b.sourceLayer,v=b.nodeIndex,S=b.tensorIndex;this.outputLayers.push(w),this.outputLayersNodeIndices.push(v),this.outputLayersTensorIndices.push(S)}for(let b of this.inputs){let w=b.sourceLayer,v=b.nodeIndex,S=b.tensorIndex;ri(v===0,"input layer has >1 nodes"),ri(S===0,"input layer has >1 tensors"),this.inputLayers.push(w),this.inputLayersNodeIndices.push(v),this.inputLayersTensorIndices.push(S)}this.inputNames=[],this.outputNames=[],this.feedInputShapes=[],this.feedInputNames=[],this.feedOutputNames=[];for(let b=0;b<this.inputLayers.length;b++){let w=this.inputLayers[b];if(!(w instanceof Wm))throw new TypeError(`Input layers to a LayersModel must be InputLayer objects. Received inputs: ${t.inputs}. Input ${b} (0-based) originates from layer type ${w.getClassName()}.`);this.inputNames.push(w.name),this.feedInputShapes.push(w.batchInputShape),this.feedInputNames.push(w.name)}for(let b of this.outputLayers)this.outputNames.push(b.name);this.internalInputShapes=this.inputs.map(b=>b.shape),this.internalOutputShapes=this.outputs.map(b=>b.shape);let e={},r={},o={},s={},i={},a=[],l=(b,w,v,S,k,A)=>{(S==null||k==null||A==null)&&(S=b.sourceLayer,k=b.nodeIndex,A=b.tensorIndex);let $=S.inboundNodes[k];if(v.indexOf($)!==-1)throw new zo(`The tensor ${b.name} at layer "${S.name}" is part of a cycle.`);if(w.indexOf($)!==-1)return;this.containerNodes.add(n.nodeKey(S,k)),S.id in i||(i[S.id]=Object.keys(i).length),v.indexOf($)===-1&&v.push($);let L=$.inboundLayers.length;for(let z=0;z<L;z++){let W=$.inputTensors[z],Q=$.inboundLayers[z],ne=$.nodeIndices[z],se=$.tensorIndices[z];l(W,w,v,Q,ne,se)}for(w.push($);v.indexOf($)>=0;)v.splice(v.indexOf($),1);a.push($)},c=[],u=[];for(let b of this.outputs)l(b,c,u);let p=a.slice().reverse();for(let b of p){r[b.id]=b,b.id in e||(e[b.id]=0);let w=e[b.id],v=o[b.outboundLayer.id]==null?0:o[b.outboundLayer.id];w=Math.max(w,v),o[b.outboundLayer.id]=w,s[b.outboundLayer.id]=b.outboundLayer,e[b.id]=w;for(let S=0;S<b.inboundLayers.length;S++){let k=b.inboundLayers[S],A=b.nodeIndices[S],$=k.inboundNodes[A],L=e[$.id]==null?0:e[$.id];e[$.id]=Math.max(w+1,L),r[$.id]=$}}let f={};for(let b in e){let w=e[b];w in f||(f[w]=[]),f[w].push(r[b])}let d={};for(let b in o){let w=o[b];w in d||(d[w]=[]),d[w].push(s[b])}let h=Object.keys(d).map(b=>parseInt(b,10)).sort(Aw);this.layers=[];for(let b of h){let w=d[b];w.sort((v,S)=>{let k=i[v.id],A=i[S.id];return k<A?-1:k>A?1:0});for(let v of w)v instanceof n&&this.internalContainerRefs.push(v),this.layers.push(v)}this.layersByDepth=d,h=Object.keys(f).map(b=>parseInt(b,10)).sort(Aw);let m=this.inputs.slice(),g=[];for(let b of h)for(let w of f[b]){let v=w.outboundLayer;if(v!=null){for(let S of w.inputTensors)if(m.indexOf(S)===-1)throw new zo(`Graph disconnected: cannot obtain value for tensor ${S} at layer "${v.name}". The following previous layers were accessed without issue: ${g}`);for(let S of w.outputTensors)m.push(S);g.push(v.name)}}this.nodesByDepth=f;let x=this.layers.map(b=>b.name);for(let b of x){let w=x.filter(v=>v===b).length;if(w!==1)throw new zo(`The name "${b}" is used ${w} times in the model. All layer names should be unique. Layer names: `+JSON.stringify(x))}this.outboundNodes=[],this.inboundNodes=[],new fp({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:this.inputs.map(b=>null),outputMasks:this.outputs.map(b=>null),inputShapes:this.inputs.map(b=>b.shape),outputShapes:this.outputs.map(b=>b.shape)}),this.built=!0,this._refCount=1}assertNotDisposed(){if(this._refCount===0)throw new Error(`Container '${this.name}' is already disposed.`)}dispose(){this.assertNotDisposed();let t={refCountAfterDispose:null,numDisposedVariables:0};if(--this._refCount===0){for(let e of this.layers)t.numDisposedVariables+=e.dispose().numDisposedVariables;for(let e of this.internalContainerRefs)t.numDisposedVariables+=e.dispose().numDisposedVariables}return t.refCountAfterDispose=this._refCount,t}get trainable(){return this.trainable_}set trainable(t){this.layers.forEach(e=>{e._trainableWeights.forEach(r=>r.trainable=t)}),this.trainable_=t}get trainableWeights(){if(this._trainableWeights.length>0)throw new X("Container instance unexpectedly contains _trainableWeights.The trainable weights of a Container are a union of the trainable weights of its consituent Layers. Its own _trainableWeights must remain an empty Array.");if(!this.trainable)return[];let t=[];for(let e of this.layers)t=t.concat(e.trainableWeights);return t}get nonTrainableWeights(){let t=[];for(let e of this.layers)t.push(...e.nonTrainableWeights);if(!this.trainable){let e=[];for(let r of this.layers)e.push(...r.trainableWeights);return e.concat(t)}return t}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}loadWeights(t,e=!0){let r={},o=0,s=fMe(t);s&&this.parseWeights(t);for(let a of this.layers)for(let[l,c]of a.weights.entries()){let u=s?`${c.name.split("/").slice(0,-1).join("/")+"/"}${l}`:c.originalName;if(r[u]!=null)throw new X(`Duplicate weight name: ${u}`);r[u]=c,o++}let i=[];for(let a in t){let l=a;if(r[a]==null){let c=a.split("/");l=c.slice(0,-2).concat([c[c.length-1]]).join("/")}if(r[l]!=null)i.push([r[l],t[a]]);else if(e)throw new X(`Provided weight data has no target variable: ${a}`);delete r[l]}if(e){let a=[];for(let l in r)a.push(l);if(a.length>0)throw new X(`${a.length} of ${o} weights are not set: ${a}`)}My(i)}parseWeights(t){for(let e in Object.keys(t)){let r=e.split("/"),o=["vars","layer_checkpoint_dependencies"],s=r.map(i=>i.startsWith("_")?i.slice(1):i).filter(i=>!o.includes(i)).join("/");s!==e&&(t[s]=t[e],delete t[e])}}updatedConfig(){let t=this.getConfig(),e={};return e.className=this.getClassName(),e.config=t,e.kerasVersion=`tfjs-layers ${Py}`,e.backend="TensorFlow.js",e}toJSON(t,e=!0){let r=GE(this.updatedConfig());return e?JSON.stringify(r):r}call(t,e){return K(()=>{t=Vt(t);let r=new bc;for(let o=0;o<this.inputs.length;++o)r.add(this.inputs[o],t[o]);return Hm(this.outputs,r,e)})}computeMask(t,e){return K(()=>{t=Vt(t);let r;return e==null?r=Ei(null,t.length):r=Vt(e),this.runInternalGraph(t,r)[1]})}computeOutputShape(t){let e=Ay(t);if(e.length!==this.inputLayers.length)throw new X(`Invalid inputShape argument ${t}: model has ${this.inputLayers.length} tensor inputs.`);let r={};for(let a=0;a<e.length;a++){let l=this.inputLayers[a],c=e[a],u=l.name+"_0_0";r[u]=c}let o=Object.keys(this.nodesByDepth).map(a=>parseInt(a,10)).sort(Aw);if(o.length>1)for(let a of o){let l=this.nodesByDepth[a];for(let c of l){let u=c.outboundLayer;if(this.inputLayers.map(m=>m.id).indexOf(u.id)!==-1)continue;let p=[];for(let m=0;m<c.inboundLayers.length;m++){let g=c.inboundLayers[m],x=c.nodeIndices[m],b=c.tensorIndices[m],w=`${g.name}_${x}_${b}`,v=r[w];p.push(v)}let f=u.computeOutputShape(Vr(p)),d=Ay(f),h=u.inboundNodes.indexOf(c);for(let m=0;m<d.length;m++){let g=`${u.name}_${h}_${m}`;r[g]=d[m]}}}let s=[],i=[];for(let a=0;a<this.outputLayers.length;a++){let l=this.outputLayers[a],c=this.outputLayersNodeIndices[a],u=this.outputLayersTensorIndices[a],p=`${l.name}_${c}_${u}`;i.push(p)}for(let a=0;a<i.length;a++){let l=i[a];ri(l in r),s.push(r[l])}return Vr(s)}runInternalGraph(t,e){e==null&&(e=Ei(null,t.length));let r={};for(let l=0;l<this.inputs.length;++l){let c=this.inputs[l],u=t[l],p=e[l];r[c.id]=[u,p]}let o=Object.keys(this.nodesByDepth).map(l=>parseInt(l,10)).sort(Aw);for(let l of o){let c=this.nodesByDepth[l];for(let u of c){let p=u.outboundLayer,f=u.inputTensors,d=u.outputTensors,h=new Array;for(let m of f)m.id in r&&h.push(r[m.id]);if(h.length===f.length){let m={},g,x,b,w;if(u.callArgs!=null&&(m=u.callArgs),h.length===1){let[v,S]=h[0];m.mask==null&&(m.mask=S),b=Vt(p.call(v,m)),w=Vt(p.computeMask(v,S)),g=[v],x=[S]}else g=h.map(v=>v[0]),x=h.map(v=>v[1]),m.mask==null&&(m.mask=x),b=Vt(p.call(g,m)),w=Vt(p.computeMask(g,x));if(p.activityRegularizer)throw new We("LayersModel invocation with concrete Tensor value(s) in the presence of activity regularizer(s) is not supported yet.");for(let v=0;v<d.length;++v){let S=d[v],k=b[v],A=w[v];r[S.id]=[k,A]}}}}let s=[],i=[],a=[];for(let l of this.outputs){ri(l.id in r,`Could not compute output ${l.name} : ${l.id}`);let[c,u]=r[l.id];a.push(c.shape),s.push(c),i.push(u)}return[s,i,a]}buildNodeConversionMap(t){let e={},r;for(let o of this.layers){r=o instanceof n?1:0;for(let s=0;s<o.inboundNodes.length;s++){let i=n.nodeKey(o,s);this.containerNodes.has(i)&&(e[i]=r,r+=1)}}return e}getLayer(t,e){if(e!=null)return this.findLayer(e);if(t==null)throw new X("Provide either a layer name or layer index");if(typeof t=="number")return this.findLayer(t);for(let r of this.layers)if(r.name===t)return r;throw new X(`No such layer: ${t}`)}findLayer(t){if(this.layers.length<=t)throw new X(`Was asked to retrieve layer at index ${t}, but model only has ${this.layers.length} layer(s).`);return this.layers[t]}calculateLosses(){return K(()=>{let t=[];for(let e of this.layers)for(let r=0;r<e.inboundNodes.length;++r){let o=n.nodeKey(e,r);this.containerNodes.has(o)&&t.push(...e.calculateLosses())}return t})}getConfig(){let t={name:this.name},e=this.buildNodeConversionMap(this.layers),r=[];for(let i of this.layers){let a=i.getClassName(),l=i.getConfig(),c=[];for(let p=0;p<i.inboundNodes.length;p++){let f=i.inboundNodes[p],d=n.nodeKey(i,p),h={};if(this.containerNodes.has(d)){if(f.callArgs)try{JSON.stringify(f.callArgs),h=f.callArgs}catch{console.warn(`Layer ${i.name} was passed non-serializable keyword arguments: ${f.callArgs}. They will not be included in the serialized model (and thus will be missing at deserialization time).`),h={}}if(f.inboundLayers.length>0){let m=[];for(let g=0;g<f.inboundLayers.length;g++){let x=f.inboundLayers[g],b=f.nodeIndices[g],w=f.tensorIndices[g],v=n.nodeKey(x,b),S=e[v];S==null&&(S=0),m.push([x.name,S,w,h])}c.push(m)}}}let u={};u.name=i.name,u.className=a,u.config=l,u.inboundNodes=c,r.push(u)}t.layers=r;let o=[];for(let i=0;i<this.inputLayers.length;i++){let a=this.inputLayers[i],l=this.inputLayersNodeIndices[i],c=n.nodeKey(a,l);if(!this.containerNodes.has(c))continue;let u=e[c];u==null&&(u=0);let p=this.inputLayersTensorIndices[i];o.push([a.name,u,p])}t.inputLayers=o;let s=[];for(let i=0;i<this.outputLayers.length;i++){let a=this.outputLayers[i],l=this.outputLayersNodeIndices[i],c=n.nodeKey(a,l);if(!this.containerNodes.has(c))continue;let u=e[c];u==null&&(u=0);let p=this.outputLayersTensorIndices[i];s.push([a.name,u,p])}return t.outputLayers=s,t}static fromConfig(t,e,r={},o=!1){let s={},i={};function a(g,x){g.name in i?i[g.name].push(x):i[g.name]=[x]}function l(g,x){let b=[],w;for(let v of x){let S=v[0],k=v[1],A=v[2];if(w=v[3]==null?{}:v[3],!(S in s)){a(g,x);return}let $=s[S];if($.inboundNodes.length<=k){a(g,x);return}let L=$.inboundNodes[k];b.push(L.outputTensors[A])}b.length>0&&g.apply(Vr(b),w)}function c(g){let x=g.name,b=As(g,e.customObjects!=null?e.customObjects:{});b.setFastWeightInitDuringBuild(o),s[x]=b,g.inboundNodes.forEach(v=>{if(!(v instanceof Array))throw new X(`Corrupted configuration, expected array for nodeData: ${v}`);a(b,v)})}let u=e.name,p=e.layers;for(let g of p)c(g);for(;!TZ(i);)for(let g of p){let x=s[g.name];if(x.name in i){let b=i[x.name];delete i[x.name];for(let w of b)l(x,w)}}let f=[],d=[],h=e.inputLayers;for(let g of h){let x=g[0],b=g[1],w=g[2];ri(x in s);let S=s[x].inboundNodes[b].outputTensors;f.push(S[w])}let m=e.outputLayers;for(let g of m){let x=g[0],b=g[1],w=g[2];ri(x in s);let S=s[x].inboundNodes[b].outputTensors;d.push(S[w])}return new t({inputs:f,outputs:d,name:u})}get stateful(){if(this._stateful)throw new X("Container instance unexpectedly has _stateful = true. The statefulness of a Container is determined by the Layers it contains. Its _stateful property must remain the default false.");for(let t of this.layers)if(t.stateful)return!0;return!1}resetStates(){K(()=>{this.layers.forEach(t=>{t.stateful&&t.resetStates()})})}};N();N();N();function dMe(n,t,e){let r=t.length;if(n==null||Array.isArray(n)&&n.length===0)return t.map(o=>null);if(r===1)return Array.isArray(n)&&n.length===1?n:typeof n=="object"&&t[0]in n?[n[t[0]]]:[n];if(Array.isArray(n)){if(n.length!==r)throw new Error(`Provided ${e} is an array of ${n.length} element(s), but the model has ${r} outputs. Make sure a set of weights is provided for each model output.`);return n}else if(typeof n=="object"&&Object.keys(n).length>0&&typeof n[Object.keys(n)[0]]=="object"){let o=[];return t.forEach(s=>{s in n?o.push(n[s]):o.push(null)}),o}else throw new Error(`The model has multiple (${r}) outputs, so ${e} must be either an array with ${r} elements or an object with ${t} keys. Provided ${e} not understood: ${JSON.stringify(n)}`)}function HE(n,t){return dMe(n,t,"classWeight")}function qE(n,t,e,r){return ee(this,null,function*(){if(t!=null||r!=null)throw new Error("Support sampleWeight is not implemented yet");if(e!=null){let o=K(()=>{if(n.shape.length===1)return wo(n);if(n.shape.length===2){if(n.shape[1]>1)return sa(n,1);if(n.shape[1]===1)return V(n,[n.shape[0]]);throw new Error(`Encountered unexpected last-dimension size (${n.shape[1]}) during handling of class weights. The size is expected to be >= 1.`)}else throw new Error(`Unexpected rank of target (y) tensor (${n.rank}) during handling of class weights. The rank is expected to be 1 or 2.`)}),s=Array.from(yield o.data());Be(o);let i=[];return s.forEach(a=>{if(e[a]==null)throw new Error(`classWeight must contain all classes in the training data. The class ${a} exists in the data but not in classWeight`);i.push(e[a])}),Xt(i,"float32")}else return null})}function yQ(n,t){return B(n,t)}var hMe=32;function wQ(n,t){let e,r,o=t;e=o.xs,r=o.ys,C.assert(e!=null&&r!=null,()=>`A Dataset iterator for fitDataset() is expected to generate objects of the form \`{xs: xVal, ys: yVal}\`, where the two values may be \`tf.Tensor\`, an array of Tensors, or a map of string to Tensor.  The provided Dataset instead generates ${t}`);let s=bQ("input",n.inputNames,e),i=bQ("output",n.outputNames,r),a=s[0].shape[0];C.assert(s.length===n.inputs.length,()=>`LayersModel has ${n.inputs.length} inputs, but the dataset provides ${s.length} inputs.  (Expected input keys: ${JSON.stringify(n.inputNames)})`),C.assert(i.length===n.outputs.length,()=>`LayersModel has ${n.outputs.length} outputs, but the dataset provides ${i.length} outputs.  (Expected output keys: ${JSON.stringify(n.outputNames)})`);for(let l=0;l<s.length;l++)C.assert(s[l].shape[0]===a,()=>`Batch size mismatch: input ${n.inputNames[l]} has ${s[l].shape[0]}; expected  ${a} based on input ${n.inputNames[0]}.`);for(let l=0;l<i.length;l++)C.assert(i[l].shape[0]===a,()=>`Batch size mismatch: output ${n.outputNames[l]} has ${i[l].shape[0]}; expected  ${a} based on input ${n.inputNames[0]}.`);return{xs:s,ys:i}}function bQ(n,t,e){if(e instanceof tt)return[e];if(Array.isArray(e))return C.assert(e.length===t.length,()=>`Received an array of ${e.length} Tensors, but expected ${t.length} to match the ${n} keys ${t}.`),e;{let r=[];for(let o of t){if(e[o]==null)throw new X(`The feature data generated by the dataset lacks the required ${n} key '${o}'.`);r.push(e[o])}return r}}function mMe(n){if(n.length===3)throw new We("Validation with sample weights is not implemented yet.");return{xs:n[0],ys:n[1]}}function CQ(n,t,e){return ee(this,null,function*(){let r=e.batchesPerEpoch!=null;if(C.assert(n.optimizer!=null,()=>"You must compile a model before training/testing. Use LayersModel.compile(modelCompileConfig)."),C.assert(e!=null,()=>"For fitDataset(), the 2nd argument (config) is required, but it is not provided in this call."),C.assert(e.epochs!=null&&e.epochs>0&&Number.isInteger(e.epochs),()=>`For fitDataset(), config.epochs is expected to be a positive integer, but got ${e.epochs}`),C.assert(!r||e.batchesPerEpoch>0&&Number.isInteger(e.batchesPerEpoch),()=>`For fitDataset(), config.batchesPerEpoch is expected to be a positive integer if specified, but got ${e.batchesPerEpoch}`),C.assert(e.validationSplit==null,()=>"`validationSplit` is not supported by `fitDataset()`. Use validationData instead."),n.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");n.isTraining=!0;try{let o=e.validationData!=null,s,i;if(o)if(vQ(e.validationData))C.assert(e.validationBatches==null||e.validationBatches>0&&Number.isInteger(e.validationBatches),()=>`For fitDataset() with dataset-based validation, config.validationBatches is expected not to be provided, or to be a positive integer, but got ${e.validationBatches}`);else{let g=mMe(e.validationData);s=g.xs,i=g.ys}let a=n.makeTrainFunction(),l=n.getDedupedMetricsNames(),c;o?c=l.slice().concat(l.map(g=>"val_"+g)):c=l.slice();let u=FE(e.callbacks,e.yieldEvery),p=e.verbose==null?1:e.verbose,{callbackList:f,history:d}=PE(u,p,e.epochs,null,null,gMe(t,e),null,o,c);f.setModel(n),n.history=d,yield f.onTrainBegin(),n.stopTraining_=!1;let h=e.initialEpoch==null?0:e.initialEpoch,m=yield t.iterator();for(;h<e.epochs;){let g={};yield f.onEpochBegin(h);let x=0,b=0;for(r||(m=yield t.iterator());!r||x<e.batchesPerEpoch;){let w=yield m.next();if(r&&w.done){console.warn(`You provided \`batchesPerEpoch\` as ${e.batchesPerEpoch}, but your dataset iterator ran out of data after ${x} batches; interrupting training. Make sure that your dataset can generate at least \`batchesPerEpoch * epochs\` batches (in this case, ${e.batchesPerEpoch*e.epochs} batches). You may need to use the repeat() function when building your dataset.`);break}if(w.value!=null){let{xs:v,ys:S}=wQ(n,w.value),k={};k.batch=b,k.size=v[0].shape[0],yield f.onBatchBegin(b,k);let A=[];if(e.classWeight!=null){let z=HE(e.classWeight,n.outputNames);for(let W=0;W<z.length;++W)A.push(yield qE(S[W],null,z[W]))}let $=v.concat(S).concat(A),L=a($);Be($);for(let z=0;z<l.length;++z){let W=l[z],Q=L[z];k[W]=Q,yn(Q)}yield f.onBatchEnd(b,k),AE(k),b++,x++}if(r?x>=e.batchesPerEpoch:w.done){if(o){let v;vQ(e.validationData)?v=Vt(yield n.evaluateDataset(e.validationData,{batches:e.validationBatches})):v=Vt(n.evaluate(s,i,{batchSize:e.validationBatchSize==null?hMe:e.validationBatchSize,verbose:0}));for(let S=0;S<n.metricsNames.length;++S)g[`val_${n.metricsNames[S]}`]=v[S]}break}if(n.stopTraining_)break}if(yield f.onEpochEnd(h,g),h++,n.stopTraining_)break}return yield f.onTrainEnd(),yield n.history.syncData(),n.history}finally{n.isTraining=!1}})}function gMe(n,t){let e=null;return t.batchesPerEpoch!=null?e=t.batchesPerEpoch:Number.isFinite(n.size)&&(e=n.size),e}function vQ(n){return typeof n.iterator=="function"}function xMe(n){return typeof n.next=="function"}function IQ(n,t,e){return ee(this,null,function*(){e=e||{};let r=e.batches!=null,o=n.testFunction,s=[];if(e.verbose>0)throw new We("Verbose mode is not implemented yet.");C.assert(!r||e.batches>0&&Number.isInteger(e.batches),()=>`Test loop expects \`batches\` to be a positive integer, but received ${JSON.stringify(e.batches)}`);let i=xMe(t)?t:yield t.iterator(),a=0,l=0;for(;!r||l<e.batches;){let c=yield i.next();if(s=K(()=>{if(c.value){let{xs:u,ys:p}=wQ(n,c.value),f=u.concat(p),d=K(()=>o(f));if(Be(f),l===0)for(let m=0;m<d.length;++m)s.push(Ie(0));let h=f[0].shape[0];for(let m=0;m<d.length;++m){let g=d[m],x=s[m];s[m]=K(()=>ae(s[m],B(h,g))),l>0&&Be(x)}Be(d),a+=h,++l}return s}),c.done){r&&console.warn(`Your dataset iterator ran out of data during evaluateDataset(). Interrupting evalution. Make sure that your dataset can generate at least \`batches\` batches (in this case, ${e.batches} batches). You may need to use the repeat() function when building your dataset.`);break}}for(let c=0;c<s.length;++c){let u=s[c];s[c]=xe(s[c],a),Be(u)}return Vr(s)})}N();N();function KE(n){C.assert(n>0&&Number.isInteger(n),()=>`batchSize is required to be a positive integer, but got ${n}`)}function $y(n,t,e){return n==null?[null]:Array.isArray(n)?n.map(r=>up(r,t,e-t)):up(n,t,e-t)}function XE(n,t){return K(()=>n==null?null:Array.isArray(n)?n.map(e=>XE(e,t)):TE(n,t.dtype==="int32"?t:fe(t,"int32")))}function YE(n,t){let e=[],r=0,o=null;for(;r<n;)o=r+t,o>=n&&(o=n),e.push([r,o]),r=o;return e}function b$(n){let t=[];n instanceof tt&&(n=[n]);for(let e=0;e<n.length;++e){let r=n[e];if(r.rank===1)t.push(pp(r,1));else{if(r.rank===0)throw new Error("Expected tensor to be at least 1D, but received a 0D tensor (scalar).");t.push(r)}}return t}function Ai(n,t){if(n==null)return;let e=[];if(t instanceof tt)e.push(t.id);else if(Array.isArray(t))t.forEach(o=>e.push(o.id));else if(t!=null)for(let o in t){let s=t[o];e.push(s.id)}let r=[];if(n instanceof tt)e.indexOf(n.id)===-1&&r.push(n);else if(Array.isArray(n))n.forEach(o=>{e.indexOf(o.id)===-1&&r.push(o)});else if(n!=null)for(let o in n){let s=n[o];e.indexOf(s.id)===-1&&r.push(s)}r.forEach(o=>{o.isDisposed||o.dispose()})}function yMe(n){return n instanceof tt}function v$(n){return Array.isArray(n)}function SQ(n){return!yMe(n)&&!v$(n)}function TQ(n,t,e,r=!0,o=""){if(t==null||t.length===0){if(n!=null){let i=!1;if(v$(n)&&n.length>0)i=!0;else if(SQ(n)){for(let a in n)if(n.hasOwnProperty(a)){i=!0;break}}else i=!0;if(i)throw new X(`Error when checking model ${o} expected no data, but got ${n}`)}return[]}if(n==null)return t.map(i=>null);let s;if(SQ(n)){n=n,s=[];for(let i of t){if(n[i]==null)throw new X(`No data provided for "${i}". Need data for each key in: ${t}`);s.push(n[i])}}else if(v$(n)){if(n=n,n.length!==t.length)throw new X(`Error when checking model ${o}: the Array of Tensors that you are passing to your model is not the size the model expected. Expected to see ${t.length} Tensor(s), but instead got the following list of Tensor(s): ${n}`);s=n}else{if(n=n,t.length>1)throw new X(`The model ${o} expects ${t.length} Tensor(s), but only received one Tensor. Found: Tensor with shape ${n.shape}`);s=[n]}if(s=b$(s),e!=null)for(let i=0;i<t.length;++i){if(e[i]==null)continue;let a=s[i];if(a.shape.length!==e[i].length)throw new X(`Error when checking ${o}: expected ${t[i]} to have ${e[i].length} dimension(s). but got array with shape ${a.shape}`);for(let l=0;l<e[i].length;++l){if(l===0&&!r)continue;let c=a.shape[l],u=e[i][l];if(u!=null&&u>=0&&c!==u)throw new X(`${o} expected a batch of elements where each example has shape [${e[i].slice(1,e[i].length)}] (i.e.,tensor shape [*,${e[i].slice(1,e[i].length)}]) but the ${o} received an input with ${a.shape[0]} examples, each with shape [${a.shape.slice(1,a.shape.length)}] (tensor shape [${a.shape}])`)}}return s}function bMe(n,t,e){let r=Di(n.map(s=>s.shape[0]));r.sort();let o=Di(t.map(s=>s.shape[0]));if(o.sort(),r.length>1)throw new X(`All input Tensors (x) should have the same number of samples. Got array shapes: ${JSON.stringify(n.map(s=>s.shape))}`);if(o.length>1)throw new X(`All target Tensors (y) should have the same number of samples. Got array shapes: ${JSON.stringify(t.map(s=>s.shape))}`);if(r.length>0&&o.length>0&&!C.arraysEqual(r,o))throw new X(`Input Tensors should have the same number of samples as target Tensors. Found ${r[0]} input sample(s) and ${o[0]} target sample(s).`)}function vMe(n,t,e){let r=[Km,Fy,Xm];for(let o=0;o<n.length;++o){let s=n[o],i=t[o],a=e[o];if(i!=null){if(i===Xm&&s.shape[s.shape.length-1]===1)throw new X(`You are passing a target array of shape ${s.shape} while using a loss 'categorical_crossentropy'. 'categorical_crossentropy'expects targets to be binary matrices (1s and 0s) of shape [samples, classes].`);if(r.indexOf(i)!==-1){let l=s.shape.slice(1),c=a.slice(1);for(let u=0;u<l.length;++u){let p=l[u],f=c[u];if(f!=null&&p!==f)throw new X(`A target Tensor with shape ${s.shape} was passed for an output of shape ${a}, while using a loss function that expects targets to have the same shape as the output.`)}}}}}function EQ(n,t,e,r=!0,o=""){let s;if(Array.isArray(n)){if(n.length!==t.length)throw new X(`Error when checking model ${o}: the Array of Tensors that you are passing to your model is not the size the the model expected. Expected to see ${t.length} Tensor(s), but instead got ${n.length} Tensors(s).`);s=n}else{if(t.length>1)throw new X(`The model expects ${t.length} ${o} Tensors, but only received one Tensor. Found: array with shape ${JSON.stringify(n.shape)}.`);s=[n]}if(e!=null)for(let i=0;i<t.length;++i){if(e[i]==null)continue;let a=s[i];if(a.shape.length!==e[i].length)throw new X(`Error when checking ${o}: expected ${t[i]} to have ${e[i].length} dimension(s), but got array with shape ${JSON.stringify(a.shape)}`);for(let l=0;l<e[i].length;++l){if(l===0&&!r)continue;let c=a.shape[l],u=e[i][l];if(u!=null&&u!==c)throw new X(`Error when checking ${o}: expected ${t[i]} to have shape ${JSON.stringify(e[i])} but got array with shape ${JSON.stringify(a.shape)}.`)}}}function wMe(n,t){if(n==null||Array.isArray(n)&&n.length===0)return t.map(r=>[]);let e;if(typeof n=="string"||typeof n=="function")e=[n];else if(Array.isArray(n)||typeof n=="object")e=n;else throw new TypeError(`Type of metrics argument not understood. Expected an string,function, Array, or Object, found: ${n}`);if(Array.isArray(e))return t.map(r=>e);{let r=[];for(let o of t){let s=e.hasOwnProperty(o)?e[o]:[];Array.isArray(s)||(s=[s]),r.push(s)}return r}}var CMe="layers-model",hp=(()=>{class n extends WE{constructor(e){super(e),this.isTraining=!1}summary(e,r,o=console.log){if(!this.built)throw new X("This model has never been called, thus its weights have not been created yet. So no summary can be displayed. Build the model first (e.g., by calling it on some test data).");gQ(this,e,r,o)}compile(e){if(e.loss==null&&(e.loss=[]),this.loss=e.loss,typeof e.optimizer=="string")this.optimizer_=mQ(e.optimizer),this.isOptimizerOwned=!0;else{if(!(e.optimizer instanceof Qr))throw new X("User-defined optimizer must be an instance of tf.Optimizer.");this.optimizer_=e.optimizer,this.isOptimizerOwned=!1}let r=[];if(!Array.isArray(e.loss)&&typeof e.loss!="string"&&typeof e.loss!="function"){e.loss=e.loss;for(let a in e.loss)if(this.outputNames.indexOf(a)===-1)throw new X(`Unknown entry in loss dictionary: "${a}". Only expected the following keys: ${this.outputNames}`);for(let a of this.outputNames)e.loss[a]==null&&console.warn(`Output "${a}" is missing from loss dictionary. We assume this was done on purpose, and we will not be expecting data to be passed to ${a} during training`),r.push(LE(e.loss[a]))}else if(Array.isArray(e.loss)){if(e.loss.length!==this.outputs.length)throw new X(`When passing an Array as loss, it should have one entry per model output. The model has ${this.outputs.length} output(s), but you passed loss=${e.loss}.`);r=e.loss.map(l=>LE(l))}else{let a=LE(e.loss);this.outputs.forEach(l=>{r.push(a)})}this.lossFunctions=r,this.feedOutputNames=[],this.feedOutputShapes=[],this.feedLossFns=[];for(let a=0;a<this.outputs.length;++a){let l=this.internalOutputShapes[a],c=this.outputNames[a];this.feedOutputNames.push(c),this.feedOutputShapes.push(l),this.feedLossFns.push(this.lossFunctions[a])}let o=[];this.metrics=e.metrics,this.metricsNames=["loss"],this.metricsTensors=[],Ia("loss",()=>{for(let a=0;a<this.outputs.length;++a){if(o.indexOf(a)!==-1)continue;let l=this.lossFunctions[a];this.outputs.length>1&&(this.metricsTensors.push([l,a]),this.metricsNames.push(this.outputNames[a]+"_loss"))}});let s=wMe(e.metrics,this.outputNames),i=(a,l,c)=>{this.outputNames.length>1&&(l=this.outputNames[a]+"_"+l),this.metricsNames.push(l),this.metricsTensors.push([c,a])};Ia("metric",()=>{for(let a=0;a<this.outputs.length;++a){if(o.indexOf(a)!==-1)continue;let l=s[a];(u=>{let p="",f,d,h;for(let m of u){if(typeof m=="string"&&["accuracy","acc","crossentropy","ce"].indexOf(m)!==-1){let x=this.internalOutputShapes[a];x[x.length-1]===1||this.lossFunctions[a]===Fy?["accuracy","acc"].indexOf(m)!==-1?d=zE:["crossentropy","ce"].indexOf(m)!==-1&&(d=h$):this.lossFunctions[a]===Oy?["accuracy","acc"].indexOf(m)!==-1?d=m$:["crossentropy","ce"].indexOf(m)!==-1&&(d=g$):["accuracy","acc"].indexOf(m)!==-1?d=VE:["crossentropy","ce"].indexOf(m)!==-1&&(d=UE);let b;["accuracy","acc"].indexOf(m)!==-1?b="acc":["crossentropy","ce"].indexOf(m)!==-1&&(b="ce"),h=d,f=p+b}else h=dQ(m),f=p+zw(m);let g;Ia(f,()=>{g=h}),i(a,f,g)}})(l)}}),this.collectedTrainableWeights=this.trainableWeights}checkTrainableWeightsConsistency(){this.collectedTrainableWeights!=null&&this.trainableWeights.length!==this.collectedTrainableWeights.length&&console.warn("Discrepancy between trainableweights and collected trainable weights. Did you set `model.trainable` without calling `model.compile()` afterwards?")}evaluate(e,r,o={}){let s=o.batchSize==null?32:o.batchSize;KE(s);let a=this.standardizeUserDataXY(e,r,!0,s);try{let l=a[0].concat(a[1]);this.makeTestFunction();let c=this.testFunction,u=this.testLoop(c,l,s,o.verbose,o.steps);return Vr(u)}finally{Ai(a[0],e),Ai(a[1],r)}}evaluateDataset(e,r){return ee(this,null,function*(){return this.makeTestFunction(),IQ(this,e,r)})}checkNumSamples(e,r,o,s="steps"){let i;if(o!=null){if(i=null,r!=null)throw new X(`If ${s} is set, batchSize must be null or undefined.Got batchSize = ${r}`)}else if(e!=null)Array.isArray(e)?i=e[0].shape[0]:i=e.shape[0];else throw new X(`Either the input data should have a defined shape, or ${s} shoud be specified.`);return i}execute(e,r){if(Array.isArray(r)&&r.length===0)throw new X("`outputs` is an empty Array, which is not allowed.");let o=Array.isArray(r),s=o?r:[r],i=this.retrieveSymbolicTensors(s),a=new bc;if(e instanceof tt&&(e=[e]),Array.isArray(e)){if(e.length!==this.inputs.length)throw new X(`The number of inputs provided (${e.length}) does not match the number of inputs of this model (${this.inputs.length}).`);for(let c=0;c<this.inputs.length;++c)a.add(this.inputs[c],e[c])}else for(let c of this.inputs){let u=e[c.name];if(u==null)throw new X(`No value is provided for the model's input ${c.name}`);a.add(c,u)}let l=Hm(i,a);return o?l:l[0]}retrieveSymbolicTensors(e){let r=Ei(null,e.length),o=e.length;for(let s of this.layers){let i=Array.isArray(s.output)?s.output:[s.output],a=i.map(l=>l.name);for(let l=0;l<e.length;++l){let c=a.indexOf(e[l]);if(c!==-1&&(r[l]=i[c],o--),o===0)break}if(o===0)break}if(o>0){let s=[];throw r.forEach((i,a)=>{i==null&&s.push(e[a])}),new X(`Cannot find SymbolicTensors for output name(s): ${JSON.stringify(s)}`)}return r}predictLoop(e,r=32,o=!1){return K(()=>{let s=this.checkNumSamples(e);if(o)throw new We("Verbose predictLoop() is not implemented yet.");let i=YE(s,r),a=this.outputs.map(l=>[]);for(let l=0;l<i.length;++l)K(()=>{let u=i[l][0],p=i[l][1],f=$y(e,u,p),d=[];if(Array.isArray(f))for(let m=0;m<f.length;++m)d.push({key:this.inputs[m],value:f[m]});else d.push({key:this.inputs[0],value:f});let h=new bc(d);return Hm(this.outputs,h)}).forEach((u,p)=>a[p].push(u));return Vr(a.map(l=>Tt(l,0)))})}predict(e,r={}){let o=b$(e);EQ(o,this.inputNames,this.feedInputShapes,!1);try{let s=r.batchSize==null?32:r.batchSize;return KE(s),this.predictLoop(o,s)}finally{Ai(o,e)}}predictOnBatch(e){EQ(e,this.inputNames,this.feedInputShapes,!0);let r=(Array.isArray(e)?e[0]:e).shape[0];return this.predictLoop(e,r)}standardizeUserDataXY(e,r,o=!0,s){if(this.optimizer_==null)throw new zo("You must compile a model before training/testing. Use LayersModel.compile(modelCompileArgs).");let i=[];for(let a=0;a<this.feedOutputShapes.length;++a){let l=this.feedOutputShapes[a];this.feedLossFns[a]===Oy?i.push(l.slice(0,l.length-1).concat([1])):i.push(l)}if(e=TQ(e,this.feedInputNames,this.feedInputShapes,!1,"input"),r=TQ(r,this.feedOutputNames,i,!1,"target"),bMe(e,r,null),vMe(r,this.feedLossFns,this.feedOutputShapes),this.stateful&&s!=null&&s>0&&e[0].shape[0]%s!==0)throw new X(`In a stateful network, you should only pass inputs with a number of samples that is divisible by the batch size ${s}. Found: ${e[0].shape[0]} sample(s).`);return[e,r]}standardizeUserData(e,r,o,s,i=!0,a){return ee(this,null,function*(){let[l,c]=this.standardizeUserDataXY(e,r,i,a);if(o!=null)throw new Error("sample weight is not supported yet.");let u=null;if(s!=null){let p=HE(s,this.outputNames);u=[];for(let f=0;f<p.length;++f)u.push(yield qE(c[f],null,p[f]))}return[l,c,u]})}testLoop(e,r,o,s=0,i){return K(()=>{let a=this.checkNumSamples(r,o,i,"steps"),l=[];if(s>0)throw new We("Verbose mode is not implemented yet.");if(i!=null)throw new We("steps mode in testLoop() is not implemented yet");{let c=YE(a,o),u=Xt(Uo(0,a));for(let p=0;p<c.length;++p){let f=c[p][0],d=c[p][1],h=up(u,f,d-f),m=XE(r,h),g=e(m);if(p===0)for(let x=0;x<g.length;++x)l.push(Ie(0));for(let x=0;x<g.length;++x){let b=g[x];l[x]=ae(l[x],B(d-f,b))}}for(let p=0;p<l.length;++p)l[p]=xe(l[p],a)}return l})}getDedupedMetricsNames(){let e=this.metricsNames,r=[];for(let o=0;o<e.length;++o){let s=e[o],i=s;if(QP(e,s)>1){let a=QP(e.slice(0,o),s);i+=`_${a}`}r.push(i)}return r}makeTrainFunction(){return e=>{let r=[],o=e.slice(0,this.inputs.length),s=e.slice(this.inputs.length,this.inputs.length+this.outputs.length),i=e.slice(this.inputs.length+this.outputs.length,this.inputs.length+this.outputs.length*2),a=[],l=()=>{let f=[];for(let g=0;g<this.inputs.length;++g)f.push({key:this.inputs[g],value:o[g]});let d=new bc(f),h=Hm(this.outputs,d,{training:!0}),m;for(let g=0;g<this.lossFunctions.length;++g){let x=this.lossFunctions[g],b=x(s[g],h[g]);i[g]!=null&&(b=yQ(b,i[g]));let w=sn(b);r.push(w),g===0?m=b:m=ae(m,b)}for(let g=0;g<this.metricsTensors.length;++g){let x;if(this.outputs.length>1&&g<this.outputs.length)x=r[g];else{let b=this.metricsTensors[g][0],w=this.metricsTensors[g][1];x=sn(b(s[w],h[w]))}yn(x),a.push(x)}return m=sn(m),this.calculateLosses().forEach(g=>{m=ae(m,g)}),m},c=this.collectedTrainableWeights.map(f=>f.read());return[this.optimizer_.minimize(l,!0,c)].concat(a)}}makeTestFunction(){this.testFunction=e=>K(()=>{let r=[],o,s=e.slice(0,this.inputs.length),i=e.slice(this.inputs.length,this.inputs.length+this.outputs.length),a=[];for(let u=0;u<this.inputs.length;++u)a.push({key:this.inputs[u],value:s[u]});let l=new bc(a),c=Hm(this.outputs,l);for(let u=0;u<this.lossFunctions.length;++u){let p=this.lossFunctions[u],f=sn(p(i[u],c[u]));u===0?o=f:o=ae(o,f),r.push(o)}for(let u=0;u<this.metricsTensors.length;++u){let p=this.metricsTensors[u][0],f=this.metricsTensors[u][1],d=sn(p(i[f],c[f]));r.push(d)}return r})}fit(s,i){return ee(this,arguments,function*(e,r,o={}){if(this.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");this.isTraining=!0;let a,l,c,u,p,f,d,h,m;try{let g=o.batchSize==null?32:o.batchSize;KE(g);let b=yield this.standardizeUserData(e,r,o.sampleWeight,o.classWeight,!1,g);a=b[0],l=b[1],m=b[2];let w=!1,v;if(o.validationData!=null&&o.validationData.length>0){if(w=!0,o.validationData.length===2)p=o.validationData[0],f=o.validationData[1];else throw o.validationData.length===3?new We("validationData including sample weights is not supported yet."):new X(`When passing validation data, it must contain 2 (valX, valY) or 3 (valX, valY, valSampleWeight) items; ${o.validationData} is invalid.`);let ne=yield this.standardizeUserData(p,f,null,null,!0,g);d=ne[0],h=ne[1],v=d.concat(h)}else if(o.validationSplit!=null&&o.validationSplit>0&&o.validationSplit<1){w=!0;let Q=Math.floor(a[0].shape[0]*(1-o.validationSplit)),ne=a[0].shape[0];d=$y(a,Q,ne),c=a,a=$y(a,0,Q),h=$y(l,Q,ne),u=l,l=$y(l,0,Q),v=d.concat(h)}else o.validationSteps!=null&&(w=!0);let S=a.concat(l).concat(m);this.checkTrainableWeightsConsistency();let k=this.makeTrainFunction(),A=this.getDedupedMetricsNames(),$,L;w?(this.makeTestFunction(),$=this.testFunction,L=A.slice().concat(A.map(Q=>"val_"+Q))):($=null,v=[],L=A.slice());let z=FE(o.callbacks,o.yieldEvery);return yield this.fitLoop(k,S,A,g,o.epochs,o.verbose,z,$,v,o.shuffle,L,o.initialEpoch,null,null)}finally{this.isTraining=!1,Ai(a,e),Ai(l,r),Ai(c,e),Ai(u,r),Ai(d,p),Ai(h,f),m!=null&&Be(m)}})}fitLoop(e,r,o,s,i,a,l,c,u,p,f,d,h,m){return ee(this,null,function*(){s==null&&(s=32),i==null&&(i=1),p==null&&(p=!0),d==null&&(d=0);let g=!1;if(c!=null&&u!=null&&(g=!0),m!=null&&(g=!0,h==null))throw new X("Can only use `validationSteps` when doing step-wise training, i.e., `stepsPerEpoch` must be set.");let x=this.checkNumSamples(r,s,h,"steps_per_epoch"),b;x!=null&&(b=Uo(0,x)),a==null&&(a=1);let{callbackList:w,history:v}=PE(l,a,i,d,x,h,s,g,f);w.setModel(this),this.history=v,yield w.onTrainBegin(),this.stopTraining_=!1;for(let S=d;S<i;++S){yield w.onEpochBegin(S);let k={};if(h!=null)throw new We("stepsPerEpoch mode is not implemented yet.");{if(p==="batch")throw new We("batch shuffling is not implemneted yet");p&&C.shuffle(b);let A=Xt(b),$=YE(x,s);for(let L=0;L<$.length;++L){let z={};if(yield w.onBatchBegin(L,z),K(()=>{let W=$[L][0],Q=$[L][1],ne=up(A,W,Q-W);z.batch=L,z.size=Q-W;let se=XE(r,ne),te=e(se);for(let ie=0;ie<o.length;++ie){let le=o[ie],pe=te[ie];z[le]=pe,yn(pe)}if(L===$.length-1&&g){let ie=this.testLoop(c,u,s);for(let le=0;le<o.length;++le){let pe=o[le],me=ie[le];yn(me),k["val_"+pe]=me}}}),yield w.onBatchEnd(L,z),AE(z),this.stopTraining_)break}A.dispose()}if(yield w.onEpochEnd(S,k),this.stopTraining_)break}return yield w.onTrainEnd(),yield this.history.syncData(),this.history})}fitDataset(e,r){return ee(this,null,function*(){return CQ(this,e,r)})}trainOnBatch(e,r){return ee(this,null,function*(){let o=yield this.standardizeUserData(e,r),s=o[0],i=o[1],l=this.makeTrainFunction()(s.concat(i)),c=[];for(let u of l){let p=yield u.data();c.push(p[0])}return Be(l),Ai(o[0],e),Ai(o[1],r),Vr(c)})}getNamedWeights(e){let r=[],o=e!=null&&e.trainableOnly,s=o?this.trainableWeights:this.weights,i=this.getWeights(o);for(let a=0;a<s.length;++a)o&&!s[a].trainable||r.push({name:s[a].originalName,tensor:i[a]});return r}set stopTraining(e){this.stopTraining_=e}get stopTraining(){return this.stopTraining_}get optimizer(){return this.optimizer_}set optimizer(e){this.optimizer_!==e&&(this.optimizer_=e,this.isOptimizerOwned=!1)}dispose(){let e=super.dispose();if(e.refCountAfterDispose===0&&this.optimizer!=null&&this.isOptimizerOwned){let r=Kx().numTensors;this.optimizer_.dispose(),e.numDisposedVariables+=r-Kx().numTensors}return e}getLossIdentifiers(){let e;if(typeof this.loss=="string")e=Ni(this.loss);else if(Array.isArray(this.loss)){for(let r of this.loss)if(typeof r!="string")throw new Error("Serialization of non-string loss is not supported.");e=this.loss.map(r=>Ni(r))}else{let r=Object.keys(this.loss);e={};let o=this.loss;for(let s of r)if(typeof o[s]=="string")e[s]=Ni(o[s]);else throw new Error("Serialization of non-string loss is not supported.")}return e}getMetricIdentifiers(){if(typeof this.metrics=="string"||typeof this.metrics=="function")return[Ni(zw(this.metrics))];if(Array.isArray(this.metrics))return this.metrics.map(e=>Ni(zw(e)));{let e={};for(let r in this.metrics)e[r]=Ni(zw(this.metrics[r]));return e}}getTrainingConfig(){return{loss:this.getLossIdentifiers(),metrics:this.getMetricIdentifiers(),optimizer_config:{class_name:this.optimizer.getClassName(),config:this.optimizer.getConfig()}}}loadTrainingConfig(e){if(e.weighted_metrics!=null)throw new Error("Loading weight_metrics is not supported yet.");if(e.loss_weights!=null)throw new Error("Loading loss_weights is not supported yet.");if(e.sample_weight_mode!=null)throw new Error("Loading sample_weight_mode is not supported yet.");let r=Vw(e.optimizer_config),o=As(r),s;if(typeof e.loss=="string")s=cp(e.loss);else if(Array.isArray(e.loss))s=e.loss.map(a=>cp(a));else if(e.loss!=null){s={};for(let a in e.loss)s[a]=cp(e.loss[a])}let i;if(Array.isArray(e.metrics))i=e.metrics.map(a=>cp(a));else if(e.metrics!=null){i={};for(let a in e.metrics)i[a]=cp(e.metrics[a])}this.compile({loss:s,metrics:i,optimizer:o})}save(e,r){return ee(this,null,function*(){if(typeof e=="string"){let u=Lo.getSaveHandlers(e);if(u.length===0)throw new X(`Cannot find any save handlers for URL '${e}'`);if(u.length>1)throw new X(`Found more than one (${u.length}) save handlers for URL '${e}'`);e=u[0]}if(e.save==null)throw new X("LayersModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");let o=yield Lo.encodeWeights(this.getNamedWeights(r)),l={modelTopology:this.toJSON(null,!1),format:CMe,generatedBy:`TensorFlow.js tfjs-layers v${Py}`,convertedBy:null};if((r==null?!1:r.includeOptimizer)&&this.optimizer!=null){l.trainingConfig=this.getTrainingConfig();let u="optimizer",{data:p,specs:f}=yield Lo.encodeWeights(yield this.optimizer.getWeights(),u);o.specs.push(...f),o.data=Lo.concatenateArrayBuffers([o.data,p])}return this.userDefinedMetadata!=null&&(y$(this.userDefinedMetadata,this.name,!0),l.userDefinedMetadata=this.userDefinedMetadata),l.weightData=o.data,l.weightSpecs=o.specs,e.save(l)})}setUserDefinedMetadata(e){y$(e,this.name),this.userDefinedMetadata=e}getUserDefinedMetadata(){return this.userDefinedMetadata}}return n.className="Model",n})();he.registerClass(hp);var IMe=(()=>{class n extends hp{}return n.className="Functional",n})();he.registerClass(IMe);N();var w$=(()=>{class n extends hp{constructor(e){if(super({inputs:[],outputs:[]}),e=e||{},this.trainable=!0,this.built=!1,this.name=e.name!=null?e.name:Wf("sequential_"),e.layers!=null)for(let r of e.layers)this.add(r)}checkShape(e){if(e.inboundNodes[0].outputTensors[0].shape.some(o=>o<0))throw new X(`Negative dimension size caused by adding layer ${e.name} with input shape [${e.inboundNodes[0].inputTensors[0].shape}]`)}add(e){let r=e instanceof n||e instanceof hp,o;if(r){if(o=e,o.outputs.length!==1)throw new X("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");if(o.inputs.length!==1)throw new X("All layers in a Sequential model should have a single input tensor. For multi-input layers, use the functional API.")}if(this.outputs.length===0){if(e.inboundNodes.length===0){if(e.batchInputShape==null)throw new X("The first layer in a Sequential model must get an `inputShape` or `batchInputShape` argument.");let s=p$({batchShape:e.batchInputShape,dtype:e.dtype,name:e.name+"_input"});e.apply(s)}if(r)this.outputs=o.outputs,this.inputs=o.inputs;else{if(e.inboundNodes.length!==1)throw new X(`A layer added to a Sequential model must not already be connected somewhere else. LayersModel received layer ${e.name} which has ${e.inboundNodes.length} pre-existing inbound connections.`);if(e.inboundNodes[0].outputTensors.length!==1)throw new X("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[e.inboundNodes[0].outputTensors[0]],this.inputs=u$(this.outputs[0])}this.inboundNodes=[],new fp({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:Ei(null,this.inputs.length),outputMasks:[null],inputShapes:this.inputs.map(s=>s.shape),outputShapes:this.outputs[0].shape})}else{let s=e.apply(this.outputs[0]);if(Array.isArray(s))throw new TypeError("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[s],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}this.layers.push(e),this.built=!1}pop(){if(this.layers.length===0)throw new TypeError("There are no layers in the model.");if(this.layers.pop(),this.layers.length===0)this.outputs=[],this.inboundNodes=[],this.outboundNodes=[];else{let e=this.layers.length-1;this.layers[e].outboundNodes=[],this.outputs=[this.layers[e].output],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}}call(e,r){return this.model==null&&this.build(),this.model.call(e,r)}build(e){if(ct(e),this.inputs.length===0||this.outputs.length===0)throw new TypeError("Sequential model cannot be built: model is empty. Add some layers first.");this.model=new hp({inputs:this.inputs,outputs:this.outputs[0],name:this.name+"_model"}),this.model.trainable=this.trainable,this.supportsMasking=this.model.supportsMasking,this.inputLayers=this.model.inputLayers,this.inputLayersNodeIndices=this.model.inputLayersNodeIndices,this.inputLayersTensorIndices=this.model.inputLayersTensorIndices,this.outputLayers=this.model.outputLayers,this.outputLayersNodeIndices=this.model.outputLayersNodeIndices,this.outputLayersTensorIndices=this.model.outputLayersTensorIndices,this.nodesByDepth=this.model.nodesByDepth,this.containerNodes=this.model.containerNodes,this.outputNames=this.model.outputNames,this.inputNames=this.model.inputNames,this.built=!0}countParams(){return this.built||this.build(),super.countParams()}summary(e,r,o=console.log){this.built||this.build(),super.summary(e,r,o)}setWeights(e){this.model==null&&this.build(),this.model.setWeights(e)}evaluate(e,r,o={}){if(!this.built)throw new zo("The model needs to be compiled before being used.");return this.model.evaluate(e,r,o)}evaluateDataset(e,r){return ee(this,null,function*(){if(!this.built)throw new zo("The model needs to be compiled before being used.");return this.model.evaluateDataset(e,r)})}predict(e,r={}){return this.model==null&&this.build(),this.model.predict(e,r)}predictOnBatch(e){return this.model==null&&this.build(),this.model.predictOnBatch(e)}compile(e){this.build(),this.model.compile(e),this.optimizer_=this.model.optimizer,this.isOptimizerOwned=this.model.isOptimizerOwned,this.loss=this.model.loss,this.metrics=this.model.metrics,this.metricsTensors=this.model.metricsTensors,this.metricsNames=this.model.metricsNames}get optimizer(){return this.model==null?void 0:this.model.optimizer}set optimizer(e){this.model.optimizer=e}fit(s,i){return ee(this,arguments,function*(e,r,o={}){if(!this.built)throw new zo("The model needs to be compiled before being used.");return this.model.fit(e,r,o)})}fitDataset(e,r){return ee(this,null,function*(){if(!this.built)throw new zo("The model needs to be compiled before being used.");return this.model.fitDataset(e,r)})}trainOnBatch(e,r){return ee(this,null,function*(){return this.model.trainOnBatch(e,r)})}static fromConfig(e,r,o={},s=!1){let i,a={};if(r instanceof Array){if(r[0].className==null||r[0].className==="Merge")throw new X("Legacy serialization format not supported yet.");i=r}else C.assert(r.layers!=null,()=>"When the config data for a Sequential model is not an Array, it must be an Object that contains the 'layers' field."),i=r.layers,delete r.layers,a=r;let l=new e(a);if(!(l instanceof n))throw new We(`Sequential.fromConfig called on non-Sequential input: ${l}`);for(let c of i){let p=As(c,void 0,s);s&&p.setFastWeightInitDuringBuild(!0),l.add(p)}return l}set stopTraining(e){if(this.model==null)throw new X("Cannot set the stopTraining property of a sequential model before it is compiled.");this.model.stopTraining=e}get stopTraining(){if(this.model==null)throw new X("Cannot get the stopTraining property of a sequential model before it is compiled.");return this.model.stopTraining}getConfig(){let e=[];for(let r of this.layers){let o={};o.className=r.getClassName(),o.config=r.getConfig(),e.push(o)}return{name:this.name,layers:e}}}return n.className="Sequential",n})();he.registerClass(w$);N();N();N();var eo=class extends he.Serializable{getConfig(){return{}}},TMe=(()=>{class n extends eo{apply(e,r=1){return zZ(e,r)}}return n.className="elu",n})();he.registerClass(TMe);var EMe=(()=>{class n extends eo{apply(e){return Em(e)}}return n.className="selu",n})();he.registerClass(EMe);var NMe=(()=>{class n extends eo{apply(e){return Br(e)}}return n.className="relu",n})();he.registerClass(NMe);var DMe=(()=>{class n extends eo{apply(e){return K(()=>Ns(6,Br(e)))}}return n.className="relu6",n})();he.registerClass(DMe);var kMe=(()=>{class n extends eo{apply(e){return e}}return n.className="linear",n})();he.registerClass(kMe);var _Me=(()=>{class n extends eo{apply(e){return Pr(e)}}return n.className="sigmoid",n})();he.registerClass(_Me);var AMe=(()=>{class n extends eo{apply(e){return UZ(e)}}return n.className="hardSigmoid",n})();he.registerClass(AMe);var RMe=(()=>{class n extends eo{apply(e){return Ci(e)}}return n.className="softplus",n})();he.registerClass(RMe);var MMe=(()=>{class n extends eo{apply(e){return VZ(e)}}return n.className="softsign",n})();he.registerClass(MMe);var OMe=(()=>{class n extends eo{apply(e){return vi(e)}}return n.className="tanh",n})();he.registerClass(OMe);var I$=(()=>{class n extends eo{apply(e,r=-1){return xa(e,r)}}return n.className="softmax",n})();he.registerClass(I$);var FMe=(()=>{class n extends eo{apply(e,r=-1){return xm(e,r)}}return n.className="logSoftmax",n})();he.registerClass(FMe);var PMe=(()=>{class n extends eo{apply(e){return K(()=>K(()=>{let r=Math.sqrt(2),o=B(.5,ae(1,mm(xe(e,r))));return B(e,o)}))}}return n.className="gelu",n})();he.registerClass(PMe);var $Me=(()=>{class n extends eo{apply(e){return K(()=>B(.5,B(e,ae(1,vi(B(qt(xe(2,Math.PI)),ae(e,B(.044715,Yr(e,3)))))))))}}return n.className="gelu_new",n})();he.registerClass($Me);var LMe=(()=>{class n extends eo{apply(e){return K(()=>B(e,vi(Ci(e))))}}return n.className="mish",n})();he.registerClass(LMe);var BMe=(()=>{class n extends eo{apply(e,r=1){return K(()=>B(Pr(B(e,r)),e))}}return n.className="swish",n})();he.registerClass(BMe);function Ta(n){return n.getClassName()}function C$(n,t={}){return xc(n,he.SerializationMap.getMap().classNameMap,t,"activation")}function Ea(n){if(n==null){let t={};return t.className="linear",t.config={},C$(t)}if(typeof n=="string"){let t={};return t.className=n,t.config={},C$(t)}else return n instanceof eo?n:C$(n)}N();N();function zMe(n){if(n!=null&&typeof n!="object")throw new Error(`Argument to L1L2 regularizer's constructor is expected to be an object, but received: ${n}`)}var ZE=class extends he.Serializable{},kQ=(()=>{class n extends ZE{constructor(e){super(),zMe(e),this.l1=e==null||e.l1==null?.01:e.l1,this.l2=e==null||e.l2==null?.01:e.l2,this.hasL1=this.l1!==0,this.hasL2=this.l2!==0}apply(e){return K(()=>{let r=Kt([1]);return this.hasL1&&(r=ae(r,Ee(B(this.l1,fn(e))))),this.hasL2&&(r=ae(r,Ee(B(this.l2,Gm(e))))),V(r,[])})}getConfig(){return{l1:this.l1,l2:this.l2}}static fromConfig(e,r){return new e({l1:r.l1,l2:r.l2})}}return n.className="L1L2",n})();he.registerClass(kQ);var NQ={l1l2:"L1L2"};function jt(n){return Ny(n)}function DQ(n,t={}){return xc(n,he.SerializationMap.getMap().classNameMap,t,"regularizer")}function ln(n){if(n==null)return null;if(typeof n=="string"){let e={className:n in NQ?NQ[n]:n,config:{}};return DQ(e)}else return n instanceof ZE?n:DQ(n)}var _Q=(()=>{class n extends He{constructor(e){super(e??{}),this.supportsMasking=!0,e!=null&&(this.maxValue=e.maxValue)}call(e,r){e=Ve(e);let o=Br(e);return this.maxValue!=null&&(o=pr(o,0,this.maxValue)),o}computeOutputShape(e){return e}getConfig(){let e={maxValue:this.maxValue},r=super.getConfig();return Object.assign(e,r),e}}return n.className="ReLU",n})();he.registerClass(_Q);var AQ=(()=>{class n extends He{constructor(e){super(e??{}),this.DEFAULT_ALPHA=.3,e==null&&(e={}),this.alpha=e.alpha==null?this.DEFAULT_ALPHA:e.alpha}call(e,r){let o=Ve(e);return Xu(o,this.alpha)}computeOutputShape(e){return e}getConfig(){let e={alpha:this.alpha},r=super.getConfig();return Object.assign(e,r),e}}return n.className="LeakyReLU",n})();he.registerClass(AQ);var RQ=(()=>{class n extends He{constructor(e){if(super(e??{}),this.DEFAULT_ALPHA_INITIALIZER="zeros",e==null&&(e={}),this.supportsMasking=!0,this.alphaInitializer=Jt(e.alphaInitializer||this.DEFAULT_ALPHA_INITIALIZER),this.alphaRegularizer=ln(e.alphaRegularizer),this.alphaConstraint=jn(e.alphaConstraint),e.sharedAxes==null)this.sharedAxes=null;else if(Array.isArray(e.sharedAxes))this.sharedAxes=e.sharedAxes;else if(typeof e.sharedAxes=="number")this.sharedAxes=[e.sharedAxes];else throw new X(`Expected sharedAxes to be a number or an array of numbers, but got ${e.sharedAxes}`)}build(e){e=ct(e);let r=e.slice(1);if(this.sharedAxes!=null)for(let s of this.sharedAxes)r[s-1]=1;this.alpha=this.addWeight("alpha",r,"float32",this.alphaInitializer,this.alphaRegularizer,!0,this.alphaConstraint);let o={};if(this.sharedAxes!=null)for(let s=1;s<e.length;++s)o[s]=e[s];this.inputSpec=[new an({ndim:e.length,axes:o})],this.built=!0}call(e,r){return e=Ve(e),np(e,this.alpha.read())}getConfig(){let e={alphaInitializer:hn(this.alphaInitializer),alphaRegularizer:jt(this.alphaRegularizer),alphaConstraint:Un(this.alphaConstraint),sharedAxes:this.sharedAxes},r=super.getConfig();return Object.assign(e,r),e}}return n.className="PReLU",n})();he.registerClass(RQ);var MQ=(()=>{class n extends He{constructor(e){if(super(e??{}),this.DEFAULT_ALPHA=1,e==null&&(e={}),e.alpha!=null&&e.alpha!==this.DEFAULT_ALPHA)throw new We(`Non-default alpha value (${e.alpha}) is not supported by the ELU layer yet.`);this.alpha=e.alpha==null?this.DEFAULT_ALPHA:e.alpha}call(e,r){let o=Ve(e);return ua(o)}computeOutputShape(e){return e}getConfig(){let e={alpha:this.alpha},r=super.getConfig();return Object.assign(e,r),e}}return n.className="ELU",n})();he.registerClass(MQ);var OQ=(()=>{class n extends He{constructor(e){super(e??{}),this.DEFAULT_THETA=1,e==null&&(e={}),this.theta=e.theta==null?this.DEFAULT_THETA:e.theta}call(e,r){let o=Ve(e);return B(o,fe(_n(o,this.theta),"float32"))}computeOutputShape(e){return e}getConfig(){let e={theta:this.theta},r=super.getConfig();return Object.assign(e,r),e}}return n.className="ThresholdedReLU",n})();he.registerClass(OQ);var FQ=(()=>{class n extends He{constructor(e){super(e??{}),this.DEFAULT_AXIS=1,e==null&&(e={}),this.softmax=new I$().apply,this.axis=e.axis==null?this.DEFAULT_AXIS:e.axis}call(e,r){return K(()=>{let o=Ve(e),s=r.mask;if(s!=null){let i=B(be(er(o.shape),fe(s,o.dtype)),Ie(-1e9));o=ae(o,i)}return this.axis instanceof Array?this.axis.length>1?vn(be(o,Qu(o,this.axis,!0))):this.softmax(o,this.axis[0]):this.softmax(o,this.axis)})}computeOutputShape(e){return e}getConfig(){let e={axis:this.axis},r=super.getConfig();return Object.assign(e,r),e}}return n.className="Softmax",n})();he.registerClass(FQ);N();N();function Kf(n,t,e){if(typeof n=="number")return Ei(n,t);if(n.length!==t)throw new X(`The ${e} argument must be an integer or tuple of ${t} integers. Received: ${n.length} elements.`);for(let r=0;r<t;++r){let o=n[r];if(!PZ(o))throw new X(`The ${e} argument must be an integer or tuple of ${t} integers. Received: ${JSON.stringify(n)} including a non-integer number ${o}`)}return n}function as(n,t,e,r,o=1){if(n==null)return n;let s=t+(t-1)*(o-1),i;return e==="same"?i=n:i=n-s+1,Math.floor((i+r-1)/r)}function Na(n,t,e,r){if(n==null)return null;if(r==="valid")n=n*t+Sa([e-t,0]);else if(r==="same")n=n*t;else throw new X(`Unsupport padding mode: ${r}.`);return n}function jw(n,t){return K(()=>(Rn(t),t==="channelsFirst"?it(n,[0,2,3,1]):n))}function S$(n,t){return K(()=>(Rn(t),t==="channelsFirst"?it(n,[0,2,3,4,1]):n))}function UMe(n,t,e,r=1,o="valid",s,i=1){return K(()=>{if(s==null&&(s=jo()),Rn(s),n.shape.length!==3)throw new X(`The input of a conv1dWithBias operation should be 3, but is ${n.shape.length} instead.`);if(t.shape.length!==3)throw new X(`The kernel for a conv1dWithBias operation should be 3, but is ${t.shape.length} instead`);if(e!=null&&e.shape.length!==1)throw new X(`The bias for a conv1dWithBias operation should be 1, but is ${e.shape.length} instead`);if(s==="channelsFirst"&&(n=it(n,[0,2,1])),o==="causal")throw new We("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");let a=pm(n,t,r,o==="same"?"same":"valid","NWC",i);return e!=null&&(a=Go(a,e)),a})}function PQ(n,t,e,r=[1,1],o="valid",s,i,a=null){return K(()=>{if(s==null&&(s=jo()),Rn(s),n.rank!==3&&n.rank!==4)throw new X(`conv2dWithBiasActivation expects input to be of rank 3 or 4, but received ${n.rank}.`);if(t.rank!==3&&t.rank!==4)throw new X(`conv2dWithBiasActivation expects kernel to be of rank 3 or 4, but received ${n.rank}.`);let l=jw(n,s);if(o==="causal")throw new We("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");return l=ap.conv2d({x:l,filter:t,strides:r,pad:o==="same"?"same":"valid",dilations:i,dataFormat:"NHWC",bias:e,activation:a}),s==="channelsFirst"&&(l=it(l,[0,3,1,2])),l})}function jMe(n,t,e,r=[1,1,1],o="valid",s,i){return K(()=>{if(s==null&&(s=jo()),Rn(s),n.rank!==4&&n.rank!==5)throw new X(`conv3dWithBias expects input to be of rank 4 or 5, but received ${n.rank}.`);if(t.rank!==4&&t.rank!==5)throw new X(`conv3dWithBias expects kernel to be of rank 4 or 5, but received ${n.rank}.`);let a=S$(n,s);if(o==="causal")throw new We("The support for CAUSAL padding mode in conv3dWithBias is not implemented yet.");return a=D0(a,t,r,o==="same"?"same":"valid","NDHWC",i),e!=null&&(a=Go(a,e)),s==="channelsFirst"&&(a=it(a,[0,4,1,2,3])),a})}var Uw=class n extends He{constructor(t,e){if(super(e),this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",n.verifyArgs(e),this.rank=t,rr(this.rank,"rank"),this.rank!==1&&this.rank!==2&&this.rank!==3)throw new We(`Convolution layer for rank other than 1, 2, or 3 (${this.rank}) is not implemented yet.`);if(this.kernelSize=Kf(e.kernelSize,t,"kernelSize"),this.strides=Kf(e.strides==null?1:e.strides,t,"strides"),this.padding=e.padding==null?"valid":e.padding,Vo(this.padding),this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,Rn(this.dataFormat),this.activation=Ea(e.activation),this.useBias=e.useBias==null?!0:e.useBias,this.biasInitializer=Jt(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.biasConstraint=jn(e.biasConstraint),this.biasRegularizer=ln(e.biasRegularizer),this.activityRegularizer=ln(e.activityRegularizer),this.dilationRate=Kf(e.dilationRate==null?1:e.dilationRate,t,"dilationRate"),this.rank===1&&Array.isArray(this.dilationRate)&&this.dilationRate.length!==1)throw new X(`dilationRate must be a number or an array of a single number for 1D convolution, but received ${JSON.stringify(this.dilationRate)}`);if(this.rank===2){if(typeof this.dilationRate=="number")this.dilationRate=[this.dilationRate,this.dilationRate];else if(this.dilationRate.length!==2)throw new X(`dilationRate must be a number or array of two numbers for 2D convolution, but received ${JSON.stringify(this.dilationRate)}`)}else if(this.rank===3){if(typeof this.dilationRate=="number")this.dilationRate=[this.dilationRate,this.dilationRate,this.dilationRate];else if(this.dilationRate.length!==3)throw new X(`dilationRate must be a number or array of three numbers for 3D convolution, but received ${JSON.stringify(this.dilationRate)}`)}}static verifyArgs(t){if(ri("kernelSize"in t,"required key 'kernelSize' not in config"),typeof t.kernelSize!="number"&&!xE(t.kernelSize,"number",1,3))throw new X(`BaseConv expects config.kernelSize to be number or number[] with length 1, 2, or 3, but received ${JSON.stringify(t.kernelSize)}.`)}getConfig(){let t={kernelSize:this.kernelSize,strides:this.strides,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,activation:Ta(this.activation),useBias:this.useBias,biasInitializer:hn(this.biasInitializer),biasRegularizer:jt(this.biasRegularizer),activityRegularizer:jt(this.activityRegularizer),biasConstraint:Un(this.biasConstraint)},e=super.getConfig();return Object.assign(t,e),t}},Ly=class n extends Uw{constructor(t,e){super(t,e),this.kernel=null,n.verifyArgs(e),this.filters=e.filters,rr(this.filters,"filters"),this.kernelInitializer=Jt(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.kernelConstraint=jn(e.kernelConstraint),this.kernelRegularizer=ln(e.kernelRegularizer)}build(t){t=ct(t);let e=this.dataFormat==="channelsFirst"?1:t.length-1;if(t[e]==null)throw new X(`The channel dimension of the input should be defined. Found ${t[e]}`);let r=t[e],o=this.kernelSize.concat([r,this.filters]);this.kernel=this.addWeight("kernel",o,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[{ndim:this.rank+2,axes:{[e]:r}}],this.built=!0}call(t,e){return K(()=>{t=Ve(t);let r,o=this.bias==null?null:this.bias.read(),s=yE(this.activation.getClassName());if(s!=null&&this.rank===2)r=PQ(t,this.kernel.read(),o,this.strides,this.padding,this.dataFormat,this.dilationRate,s);else{if(this.rank===1)r=UMe(t,this.kernel.read(),o,this.strides[0],this.padding,this.dataFormat,this.dilationRate[0]);else if(this.rank===2)r=PQ(t,this.kernel.read(),o,this.strides,this.padding,this.dataFormat,this.dilationRate);else if(this.rank===3)r=jMe(t,this.kernel.read(),o,this.strides,this.padding,this.dataFormat,this.dilationRate);else throw new We("convolutions greater than 3D are not implemented yet.");this.activation!=null&&(r=this.activation.apply(r))}return r})}computeOutputShape(t){t=ct(t);let e=[],r=this.dataFormat==="channelsLast"?t.slice(1,t.length-1):t.slice(2);for(let s=0;s<r.length;++s){let i=as(r[s],this.kernelSize[s],this.padding,this.strides[s],typeof this.dilationRate=="number"?this.dilationRate:this.dilationRate[s]);e.push(i)}let o=[t[0]];return this.dataFormat==="channelsLast"?(o=o.concat(e),o.push(this.filters)):(o.push(this.filters),o=o.concat(e)),o}getConfig(){let t={filters:this.filters,kernelInitializer:hn(this.kernelInitializer),kernelRegularizer:jt(this.kernelRegularizer),kernelConstraint:Un(this.kernelConstraint)},e=super.getConfig();return Object.assign(t,e),t}static verifyArgs(t){if(!("filters"in t)||typeof t.filters!="number"||t.filters<1)throw new X(`Convolution layer expected config.filters to be a 'number' > 0 but got ${JSON.stringify(t.filters)}`)}},T$=(()=>{class n extends Ly{constructor(e){super(2,e),n.verifyArgs(e)}getConfig(){let e=super.getConfig();return delete e.rank,e}static verifyArgs(e){if(typeof e.kernelSize!="number"&&!xE(e.kernelSize,"number",1,2))throw new X(`Conv2D expects config.kernelSize to be number or number[] with length 1 or 2, but received ${JSON.stringify(e.kernelSize)}.`)}}return n.className="Conv2D",n})();he.registerClass(T$);var E$=(()=>{class n extends Ly{constructor(e){super(3,e),n.verifyArgs(e)}getConfig(){let e=super.getConfig();return delete e.rank,e}static verifyArgs(e){if(typeof e.kernelSize!="number"&&!(Array.isArray(e.kernelSize)&&(e.kernelSize.length===1||e.kernelSize.length===3)))throw new X(`Conv3D expects config.kernelSize to be number or [number, number, number], but received ${JSON.stringify(e.kernelSize)}.`)}}return n.className="Conv3D",n})();he.registerClass(E$);var $Q=(()=>{class n extends T${constructor(e){if(super(e),this.inputSpec=[new an({ndim:4})],this.padding!=="same"&&this.padding!=="valid")throw new X(`Conv2DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ${this.padding}`)}build(e){if(e=ct(e),e.length!==4)throw new X("Input should have rank 4; Received input shape: "+JSON.stringify(e));let r=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[r]==null)throw new X("The channel dimension of the inputs should be defined. Found `None`.");let o=e[r],s=this.kernelSize.concat([this.filters,o]);this.kernel=this.addWeight("kernel",s,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new an({ndim:4,axes:{[r]:o}})],this.built=!0}call(e,r){return K(()=>{let o=Ve(e);if(o.shape.length!==4)throw new X(`Conv2DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-${o.shape.length}`);let s=o.shape,i=s[0],a,l;this.dataFormat==="channelsFirst"?(a=2,l=3):(a=1,l=2);let c=s[a],u=s[l],p=this.kernelSize[0],f=this.kernelSize[1],d=this.strides[0],h=this.strides[1],m=Na(c,d,p,this.padding),g=Na(u,h,f,this.padding),x=[i,m,g,this.filters];this.dataFormat!=="channelsLast"&&(o=it(o,[0,2,3,1]));let b=fm(o,this.kernel.read(),x,this.strides,this.padding);return this.dataFormat!=="channelsLast"&&(b=it(b,[0,3,1,2])),this.bias!=null&&(b=Go(b,this.bias.read(),this.dataFormat)),this.activation!=null&&(b=this.activation.apply(b)),b})}computeOutputShape(e){e=ct(e);let r=e.slice(),o,s,i;this.dataFormat==="channelsFirst"?(o=1,s=2,i=3):(o=3,s=1,i=2);let a=this.kernelSize[0],l=this.kernelSize[1],c=this.strides[0],u=this.strides[1];return r[o]=this.filters,r[s]=Na(r[s],c,a,this.padding),r[i]=Na(r[i],u,l,this.padding),r}getConfig(){let e=super.getConfig();return delete e.dilationRate,e}}return n.className="Conv2DTranspose",n})();he.registerClass($Q);var LQ=(()=>{class n extends E${constructor(e){if(super(e),this.inputSpec=[new an({ndim:5})],this.padding!=="same"&&this.padding!=="valid")throw new X(`Conv3DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ${this.padding}`)}build(e){if(e=ct(e),e.length!==5)throw new X("Input should have rank 5; Received input shape: "+JSON.stringify(e));let r=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[r]==null)throw new X("The channel dimension of the inputs should be defined. Found `None`.");let o=e[r],s=this.kernelSize.concat([this.filters,o]);this.kernel=this.addWeight("kernel",s,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new an({ndim:5,axes:{[r]:o}})],this.built=!0}call(e,r){return K(()=>{let o=Ve(e);if(o.shape.length!==5)throw new X(`Conv3DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-${o.shape.length}`);let s=o.shape,i=s[0],a,l,c;this.dataFormat==="channelsFirst"?(c=2,a=3,l=4):(c=1,a=2,l=3);let u=s[c],p=s[a],f=s[l],d=this.kernelSize[0],h=this.kernelSize[1],m=this.kernelSize[2],g=this.strides[0],x=this.strides[1],b=this.strides[2],w=Na(u,g,d,this.padding),v=Na(p,x,h,this.padding),S=Na(f,b,m,this.padding),k=[i,w,v,S,this.filters];this.dataFormat!=="channelsLast"&&(o=it(o,[0,2,3,4,1]));let A=k0(o,this.kernel.read(),k,this.strides,this.padding);return this.dataFormat!=="channelsLast"&&(A=it(A,[0,4,1,2,3])),this.bias!==null&&(A=Go(A,this.bias.read(),this.dataFormat)),this.activation!==null&&(A=this.activation.apply(A)),A})}computeOutputShape(e){e=ct(e);let r=e.slice(),o,s,i,a;this.dataFormat==="channelsFirst"?(o=1,s=2,i=3,a=4):(o=4,s=1,i=2,a=3);let l=this.kernelSize[0],c=this.kernelSize[1],u=this.kernelSize[2],p=this.strides[0],f=this.strides[1],d=this.strides[2];return r[o]=this.filters,r[s]=Na(r[s],p,l,this.padding),r[i]=Na(r[i],f,c,this.padding),r[a]=Na(r[a],d,u,this.padding),r}getConfig(){let e=super.getConfig();return delete e.dilationRate,e}}return n.className="Conv3DTranspose",n})();he.registerClass(LQ);var GMe=(()=>{class n extends Ly{constructor(e,r){if(super(e,r),this.DEFAULT_DEPTHWISE_INITIALIZER="glorotUniform",this.DEFAULT_POINTWISE_INITIALIZER="glorotUniform",this.depthwiseKernel=null,this.pointwiseKernel=null,r.filters==null)throw new X("The `filters` configuration field is required by SeparableConv, but is unspecified.");if(r.kernelInitializer!=null||r.kernelRegularizer!=null||r.kernelConstraint!=null)throw new X("Fields kernelInitializer, kernelRegularizer and kernelConstraint are invalid for SeparableConv2D. Use depthwiseInitializer, depthwiseRegularizer, depthwiseConstraint, pointwiseInitializer, pointwiseRegularizer and pointwiseConstraint instead.");if(r.padding!=null&&r.padding!=="same"&&r.padding!=="valid")throw new X(`SeparableConv${this.rank}D supports only padding modes: 'same' and 'valid', but received ${JSON.stringify(r.padding)}`);this.depthMultiplier=r.depthMultiplier==null?1:r.depthMultiplier,this.depthwiseInitializer=Jt(r.depthwiseInitializer||this.DEFAULT_DEPTHWISE_INITIALIZER),this.depthwiseRegularizer=ln(r.depthwiseRegularizer),this.depthwiseConstraint=jn(r.depthwiseConstraint),this.pointwiseInitializer=Jt(r.depthwiseInitializer||this.DEFAULT_POINTWISE_INITIALIZER),this.pointwiseRegularizer=ln(r.pointwiseRegularizer),this.pointwiseConstraint=jn(r.pointwiseConstraint)}build(e){if(e=ct(e),e.length<this.rank+2)throw new X(`Inputs to SeparableConv${this.rank}D should have rank ${this.rank+2}, but received input shape: ${JSON.stringify(e)}`);let r=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[r]==null||e[r]<0)throw new X(`The channel dimension of the inputs should be defined, but found ${JSON.stringify(e[r])}`);let o=e[r],s=this.kernelSize.concat([o,this.depthMultiplier]),i=[];for(let l=0;l<this.rank;++l)i.push(1);i.push(o*this.depthMultiplier,this.filters);let a=!0;this.depthwiseKernel=this.addWeight("depthwise_kernel",s,"float32",this.depthwiseInitializer,this.depthwiseRegularizer,a,this.depthwiseConstraint),this.pointwiseKernel=this.addWeight("pointwise_kernel",i,"float32",this.pointwiseInitializer,this.pointwiseRegularizer,a,this.pointwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,a,this.biasConstraint):this.bias=null,this.inputSpec=[new an({ndim:this.rank+2,axes:{[r]:o}})],this.built=!0}call(e,r){return K(()=>{e=Ve(e);let o;if(this.rank===1)throw new We("1D separable convolution is not implemented yet.");return this.rank===2&&(this.dataFormat==="channelsFirst"&&(e=it(e,[0,2,3,1])),o=Nm(e,this.depthwiseKernel.read(),this.pointwiseKernel.read(),this.strides,this.padding,this.dilationRate,"NHWC")),this.useBias&&(o=Go(o,this.bias.read(),this.dataFormat)),this.activation!=null&&(o=this.activation.apply(o)),this.dataFormat==="channelsFirst"&&(o=it(o,[0,3,1,2])),o})}getConfig(){let e=super.getConfig();return delete e.rank,delete e.kernelInitializer,delete e.kernelRegularizer,delete e.kernelConstraint,e.depthwiseInitializer=hn(this.depthwiseInitializer),e.pointwiseInitializer=hn(this.pointwiseInitializer),e.depthwiseRegularizer=jt(this.depthwiseRegularizer),e.pointwiseRegularizer=jt(this.pointwiseRegularizer),e.depthwiseConstraint=Un(this.depthwiseConstraint),e.pointwiseConstraint=Un(this.pointwiseConstraint),e}}return n.className="SeparableConv",n})();var BQ=(()=>{class n extends GMe{constructor(e){super(2,e)}}return n.className="SeparableConv2D",n})();he.registerClass(BQ);var zQ=(()=>{class n extends Ly{constructor(e){super(1,e),n.verifyArgs(e),this.inputSpec=[{ndim:3}]}getConfig(){let e=super.getConfig();return delete e.rank,delete e.dataFormat,e}static verifyArgs(e){if(typeof e.kernelSize!="number"&&!xE(e.kernelSize,"number",1,1))throw new X(`Conv1D expects config.kernelSize to be number or number[] with length 1, but received ${JSON.stringify(e.kernelSize)}.`)}}return n.className="Conv1D",n})();he.registerClass(zQ);var VQ=(()=>{class n extends He{constructor(e){super(e),typeof e.cropping=="number"?this.cropping=[[e.cropping,e.cropping],[e.cropping,e.cropping]]:typeof e.cropping[0]=="number"?this.cropping=[[e.cropping[0],e.cropping[0]],[e.cropping[1],e.cropping[1]]]:this.cropping=e.cropping,this.dataFormat=e.dataFormat===void 0?"channelsLast":e.dataFormat,this.inputSpec=[{ndim:4}]}computeOutputShape(e){return this.dataFormat==="channelsFirst"?[e[0],e[1],e[2]-this.cropping[0][0]-this.cropping[0][1],e[3]-this.cropping[1][0]-this.cropping[1][1]]:[e[0],e[1]-this.cropping[0][0]-this.cropping[0][1],e[2]-this.cropping[1][0]-this.cropping[1][1],e[3]]}call(e,r){return K(()=>{if(e=Ve(e),this.dataFormat==="channelsLast"){let o=Mw(e,this.cropping[0][0],e.shape[1]-this.cropping[0][0]-this.cropping[0][1],2);return Mw(o,this.cropping[1][0],e.shape[2]-this.cropping[1][1]-this.cropping[1][0],3)}else{let o=Mw(e,this.cropping[0][0],e.shape[2]-this.cropping[0][0]-this.cropping[0][1],3);return Mw(o,this.cropping[1][0],e.shape[3]-this.cropping[1][1]-this.cropping[1][0],4)}})}getConfig(){let e={cropping:this.cropping,dataFormat:this.dataFormat},r=super.getConfig();return Object.assign(e,r),e}}return n.className="Cropping2D",n})();he.registerClass(VQ);var UQ=(()=>{class n extends He{constructor(e){super(e),this.DEFAULT_SIZE=[2,2],this.inputSpec=[{ndim:4}],this.size=e.size==null?this.DEFAULT_SIZE:e.size,this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,Rn(this.dataFormat),this.interpolation=e.interpolation==null?"nearest":e.interpolation,OZ(this.interpolation)}computeOutputShape(e){if(this.dataFormat==="channelsFirst"){let r=e[2]==null?null:this.size[0]*e[2],o=e[3]==null?null:this.size[1]*e[3];return[e[0],e[1],r,o]}else{let r=e[1]==null?null:this.size[0]*e[1],o=e[2]==null?null:this.size[1]*e[2];return[e[0],r,o,e[3]]}}call(e,r){return K(()=>{let o=Ve(e),s=o.shape;if(this.dataFormat==="channelsFirst"){o=it(o,[0,2,3,1]);let i=this.size[0]*s[2],a=this.size[1]*s[3],l=this.interpolation==="nearest"?wr.resizeNearestNeighbor(o,[i,a]):wr.resizeBilinear(o,[i,a]);return it(l,[0,3,1,2])}else{let i=this.size[0]*s[1],a=this.size[1]*s[2];return this.interpolation==="nearest"?wr.resizeNearestNeighbor(o,[i,a]):wr.resizeBilinear(o,[i,a])}})}getConfig(){let e={size:this.size,dataFormat:this.dataFormat,interpolation:this.interpolation},r=super.getConfig();return Object.assign(e,r),e}}return n.className="UpSampling2D",n})();he.registerClass(UQ);N();N();function WMe(n,t,e=[1,1],r="valid",o,s){return K(()=>{o==null&&(o=jo()),Rn(o);let i=jw(n,o);if(n.rank!==4)throw new X(`Input for depthwiseConv2d is required to be 4-D, but is instead ${n.rank}-D`);if(t.rank!==4)throw new X(`depthwiseKernel is required to be 4-D, but is instead ${t.rank}-D`);return i=ca(i,t,e,r==="same"?"same":"valid","NHWC",s),o==="channelsFirst"&&(i=it(i,[0,3,1,2])),i})}var jQ=(()=>{class n extends Uw{constructor(e){super(2,e),this.depthwiseKernel=null,this.depthMultiplier=e.depthMultiplier==null?1:e.depthMultiplier,this.depthwiseInitializer=Jt(e.depthwiseInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.depthwiseConstraint=jn(e.depthwiseConstraint),this.depthwiseRegularizer=ln(e.depthwiseRegularizer)}build(e){if(e=ct(e),e.length<4)throw new X(`Inputs to DepthwiseConv2D should have rank 4. Received input shape: ${JSON.stringify(e)}.`);let r=this.dataFormat==="channelsFirst"?1:3;if(e[r]==null||e[r]<0)throw new X(`The channel dimension of the inputs to DepthwiseConv2D should be defined, but is not (${e[r]}).`);let o=e[r],s=[this.kernelSize[0],this.kernelSize[1],o,this.depthMultiplier];this.depthwiseKernel=this.addWeight("depthwise_kernel",s,null,this.depthwiseInitializer,this.depthwiseRegularizer,!0,this.depthwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[o*this.depthMultiplier],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,r){return K(()=>{e=Ve(e);let o=WMe(e,this.depthwiseKernel.read(),this.strides,this.padding,this.dataFormat,null);return this.useBias&&(o=Go(o,this.bias.read(),this.dataFormat)),this.activation!=null&&(o=this.activation.apply(o)),o})}computeOutputShape(e){e=ct(e);let r=this.dataFormat==="channelsFirst"?e[2]:e[1],o=this.dataFormat==="channelsFirst"?e[3]:e[2],s=this.dataFormat==="channelsFirst"?e[1]*this.depthMultiplier:e[3]*this.depthMultiplier,i=as(r,this.kernelSize[0],this.padding,this.strides[0]),a=as(o,this.kernelSize[1],this.padding,this.strides[1]);return this.dataFormat==="channelsFirst"?[e[0],s,i,a]:[e[0],i,a,s]}getConfig(){let e=super.getConfig();return e.depthMultiplier=this.depthMultiplier,e.depthwiseInitializer=hn(this.depthwiseInitializer),e.depthwiseRegularizer=jt(this.depthwiseRegularizer),e.depthwiseConstraint=Un(this.depthwiseRegularizer),e}}return n.className="DepthwiseConv2D",n})();he.registerClass(jQ);N();N();N();N();function N$(n,t,e,r){if(Array.isArray(n)){if(t!=null||e!=null)throw new X("When inputs is an array, neither initialState or constants should be provided");r!=null&&(e=n.slice(n.length-r,n.length),n=n.slice(0,n.length-r)),n.length>1&&(t=n.slice(1,n.length)),n=n[0]}function o(s){return s==null||Array.isArray(s)?s:[s]}return t=o(t),e=o(e),{inputs:n,initialState:t,constants:e}}function D$(n,t,e,r=!1,o,s,i=!1,a=!1){return K(()=>{let l=t.shape.length;if(l<3)throw new X(`Input should be at least 3D, but is ${l}D.`);let c=[1,0].concat(Uo(2,l));if(t=it(t,c),s!=null)throw new We("The rnn() functoin of the deeplearn.js backend does not support constants yet.");i&&console.warn("Backend rnn(): the unroll = true option is not applicable to the imperative deeplearn.js backend."),o!=null&&(o=fe(fe(o,"bool"),"float32"),o.rank===l-1&&(o=Cn(o,-1)),o=it(o,c)),r&&(t=fr(t,0),o!=null&&(o=fr(o,0)));let u=[],p,f=e,d=t.shape[0],h=hr(t),m;o!=null&&(m=hr(o));for(let x=0;x<d;++x){let b=h[x],w=K(()=>n(b,f));if(o==null)p=w[0],f=w[1];else{let v=K(()=>{let S=m[x],k=be(vr(S),S),A=ae(B(w[0],S),B(f[0],k)),$=f.map((L,z)=>ae(B(w[1][z],S),B(L,k)));return{output:A,newStates:$}});p=v.output,f=v.newStates}a&&u.push(p)}let g;return a&&(g=An(u,1)),[p,g,f]})}var Yf=(()=>{class n extends He{constructor(e){super(e);let r;if(e.cell==null)throw new X("cell property is missing for the constructor of RNN.");if(Array.isArray(e.cell)?r=new A$({cells:e.cell}):r=e.cell,r.stateSize==null)throw new X("The RNN cell should have an attribute `stateSize` (tuple of integers, one integer per RNN state).");this.cell=r,this.returnSequences=e.returnSequences==null?!1:e.returnSequences,this.returnState=e.returnState==null?!1:e.returnState,this.goBackwards=e.goBackwards==null?!1:e.goBackwards,this._stateful=e.stateful==null?!1:e.stateful,this.unroll=e.unroll==null?!1:e.unroll,this.supportsMasking=!0,this.inputSpec=[new an({ndim:3})],this.stateSpec=null,this.states_=null,this.numConstants=null,this.keptStates=[]}getStates(){if(this.states_==null){let e=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;return Uo(0,e).map(r=>null)}else return this.states_}setStates(e){this.states_=e}computeOutputShape(e){DE(e)&&(e=e[0]),e=e;let r=this.cell.stateSize;Array.isArray(r)||(r=[r]);let o=r[0],s;if(this.returnSequences?s=[e[0],e[1],o]:s=[e[0],o],this.returnState){let i=[];for(let a of r)i.push([e[0],a]);return[s].concat(i)}else return s}computeMask(e,r){return K(()=>{Array.isArray(r)&&(r=r[0]);let o=this.returnSequences?r:null;if(this.returnState){let s=this.states.map(i=>null);return[o].concat(s)}else return o})}get states(){if(this.states_==null){let e=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1,r=[];for(let o=0;o<e;++o)r.push(null);return r}else return this.states_}set states(e){this.states_=e}build(e){if(this.numConstants!=null)throw new We("Constants support is not implemented in RNN yet.");DE(e)&&(e=e[0]),e=e;let o=this.stateful?e[0]:null,s=e.slice(2);this.inputSpec[0]=new an({shape:[o,null,...s]});let i=[e[0]].concat(e.slice(2));this.cell.build(i);let a;if(Array.isArray(this.cell.stateSize)?a=this.cell.stateSize:a=[this.cell.stateSize],this.stateSpec!=null){if(!C.arraysEqual(this.stateSpec.map(l=>l.shape[l.shape.length-1]),a))throw new X(`An initialState was passed that is not compatible with cell.stateSize. Received stateSpec=${this.stateSpec}; However cell.stateSize is ${this.cell.stateSize}`)}else this.stateSpec=a.map(l=>new an({shape:[null,l]}));this.stateful&&this.resetStates()}resetStates(e,r=!1){K(()=>{if(!this.stateful)throw new ni("Cannot call resetStates() on an RNN Layer that is not stateful.");let o=this.inputSpec[0].shape[0];if(o==null)throw new X("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(this.states_==null)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(s=>Kt([o,s])):this.states_=[Kt([o,this.cell.stateSize])];else if(e==null)Be(this.states_),this.keptStates!=null&&(Be(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(s=>Kt([o,s])):this.states_[0]=Kt([o,this.cell.stateSize]);else{if(Array.isArray(e)||(e=[e]),e.length!==this.states_.length)throw new X(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${e.length} state value(s). Input received: ${e}`);r===!0?this.keptStates.push(this.states_.slice()):Be(this.states_);for(let s=0;s<this.states_.length;++s){let i=e[s],a=Array.isArray(this.cell.stateSize)?this.cell.stateSize[s]:this.cell.stateSize,l=[o,a];if(!C.arraysEqual(i.shape,l))throw new X(`State ${s} is incompatible with layer ${this.name}: expected shape=${l}, received shape=${i.shape}`);this.states_[s]=i}}this.states_=this.states_.map(s=>yn(s.clone()))})}apply(e,r){let o=r==null?null:r.initialState,s=r==null?null:r.constants;r==null&&(r={});let i=N$(e,o,s,this.numConstants);e=i.inputs,o=i.initialState,s=i.constants;let a=[],l=[];if(o!=null){r.initialState=o,a=a.concat(o),this.stateSpec=[];for(let u of o)this.stateSpec.push(new an({shape:u.shape}));l=l.concat(this.stateSpec)}if(s!=null&&(r.constants=s,a=a.concat(s),this.numConstants=s.length),a[0]instanceof Eo){let u=[e].concat(a),p=this.inputSpec.concat(l),f=this.inputSpec;this.inputSpec=p;let d=super.apply(u,r);return this.inputSpec=f,d}else return super.apply(e,r)}call(e,r){return K(()=>{let o=r==null?null:r.mask,s=r==null?null:r.training,i=r==null?null:r.initialState;e=Ve(e),i==null&&(this.stateful?i=this.states_:i=this.getInitialState(e));let a=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;if(i.length!==a)throw new X(`RNN Layer has ${a} state(s) but was passed ${i.length} initial state(s).`);this.unroll&&console.warn("Ignoring unroll = true for RNN layer, due to imperative backend.");let l={training:s},u=D$((m,g)=>{let x=this.cell.call([m].concat(g),l);return[x[0],x.slice(1)]},e,i,this.goBackwards,o,null,this.unroll,this.returnSequences),p=u[0],f=u[1],d=u[2];this.stateful&&this.resetStates(d,s);let h=this.returnSequences?f:p;return this.returnState?[h].concat(d):h})}getInitialState(e){return K(()=>{let r=Kt(e.shape);return r=Ee(r,[1,2]),r=pp(r),Array.isArray(this.cell.stateSize)?this.cell.stateSize.map(o=>o>1?SE(r,[1,o]):r):this.cell.stateSize>1?[SE(r,[1,this.cell.stateSize])]:[r]})}get trainableWeights(){return this.trainable?this.cell.trainableWeights:[]}get nonTrainableWeights(){return this.trainable?this.cell.nonTrainableWeights:this.cell.weights}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),this.cell!=null&&this.cell.setFastWeightInitDuringBuild(e)}getConfig(){let e=super.getConfig(),r={returnSequences:this.returnSequences,returnState:this.returnState,goBackwards:this.goBackwards,stateful:this.stateful,unroll:this.unroll};this.numConstants!=null&&(r.numConstants=this.numConstants);let o=this.cell.getConfig();return this.getClassName()===n.className&&(r.cell={className:this.cell.getClassName(),config:o}),Object.assign(Object.assign(Object.assign({},o),e),r)}static fromConfig(e,r,o={}){let s=r.cell,i=As(s,o);return new e(Object.assign(r,{cell:i}))}}return n.className="RNN",n})();he.registerClass(Yf);var Xf=class extends He{},k$=(()=>{class n extends Xf{constructor(e){super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=e.units,rr(this.units,"units"),this.activation=Ea(e.activation==null?this.DEFAULT_ACTIVATION:e.activation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=Jt(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=Jt(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=Jt(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=ln(e.kernelRegularizer),this.recurrentRegularizer=ln(e.recurrentRegularizer),this.biasRegularizer=ln(e.biasRegularizer),this.kernelConstraint=jn(e.kernelConstraint),this.recurrentConstraint=jn(e.recurrentConstraint),this.biasConstraint=jn(e.biasConstraint),this.dropout=jm([1,Sa([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=jm([1,Sa([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){e=ct(e),this.kernel=this.addWeight("kernel",[e[e.length-1],this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,r){return K(()=>{if(e=e,e.length!==2)throw new X(`SimpleRNNCell expects 2 input Tensors, got ${e.length}.`);let o=e[1];e=e[0];let s=r.training==null?!1:r.training;0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=mp({ones:()=>vr(e),rate:this.dropout,training:s,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=mp({ones:()=>vr(o),rate:this.recurrentDropout,training:s,dropoutFunc:this.dropoutFunc}));let i,a=this.dropoutMask,l=this.recurrentDropoutMask;a!=null?i=_i(B(e,a),this.kernel.read()):i=_i(e,this.kernel.read()),this.bias!=null&&(i=Go(i,this.bias.read())),l!=null&&(o=B(o,l));let c=ae(i,_i(o,this.recurrentKernel.read()));return this.activation!=null&&(c=this.activation.apply(c)),[c,c]})}getConfig(){let e=super.getConfig(),r={units:this.units,activation:Ta(this.activation),useBias:this.useBias,kernelInitializer:hn(this.kernelInitializer),recurrentInitializer:hn(this.recurrentInitializer),biasInitializer:hn(this.biasInitializer),kernelRegularizer:jt(this.kernelRegularizer),recurrentRegularizer:jt(this.recurrentRegularizer),biasRegularizer:jt(this.biasRegularizer),activityRegularizer:jt(this.activityRegularizer),kernelConstraint:Un(this.kernelConstraint),recurrentConstraint:Un(this.recurrentConstraint),biasConstraint:Un(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout};return Object.assign(Object.assign({},e),r)}}return n.className="SimpleRNNCell",n})();he.registerClass(k$);var GQ=(()=>{class n extends Yf{constructor(e){e.cell=new k$(e),super(e)}call(e,r){return K(()=>{this.cell.dropoutMask!=null&&(Be(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(Be(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);let o=r==null?null:r.mask,s=r==null?null:r.training,i=r==null?null:r.initialState;return super.call(e,{mask:o,training:s,initialState:i})})}static fromConfig(e,r){return new e(r)}}return n.className="SimpleRNN",n})();he.registerClass(GQ);var _$=(()=>{class n extends Xf{constructor(e){if(super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",e.resetAfter)throw new X("GRUCell does not support reset_after parameter set to true.");this.units=e.units,rr(this.units,"units"),this.activation=Ea(e.activation===void 0?this.DEFAULT_ACTIVATION:e.activation),this.recurrentActivation=Ea(e.recurrentActivation===void 0?this.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=Jt(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=Jt(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=Jt(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=ln(e.kernelRegularizer),this.recurrentRegularizer=ln(e.recurrentRegularizer),this.biasRegularizer=ln(e.biasRegularizer),this.kernelConstraint=jn(e.kernelConstraint),this.recurrentConstraint=jn(e.recurrentConstraint),this.biasConstraint=jn(e.biasConstraint),this.dropout=jm([1,Sa([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=jm([1,Sa([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.implementation=e.implementation,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){e=ct(e);let r=e[e.length-1];this.kernel=this.addWeight("kernel",[r,this.units*3],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units*3],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units*3],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,r){return K(()=>{if(e=e,e.length!==2)throw new X(`GRUCell expects 2 input Tensors (inputs, h, c), got ${e.length}.`);let o=r.training==null?!1:r.training,s=e[1];e=e[0],0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=mp({ones:()=>vr(e),rate:this.dropout,training:o,count:3,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=mp({ones:()=>vr(s),rate:this.recurrentDropout,training:o,count:3,dropoutFunc:this.dropoutFunc}));let i=this.dropoutMask,a=this.recurrentDropoutMask,l,c,u;0<this.dropout&&this.dropout<1&&(e=B(e,i[0]));let p=_i(e,this.kernel.read());this.useBias&&(p=Go(p,this.bias.read())),0<this.recurrentDropout&&this.recurrentDropout<1&&(s=B(s,a[0]));let f=this.recurrentKernel.read(),[d,h]=dr(f,[2*this.units,this.units],f.rank-1),m=_i(s,d),[g,x,b]=dr(p,3,p.rank-1),[w,v]=dr(m,2,m.rank-1);l=this.recurrentActivation.apply(ae(g,w)),c=this.recurrentActivation.apply(ae(x,v));let S=_i(B(c,s),h);u=this.activation.apply(ae(b,S));let k=ae(B(l,s),B(ae(1,pt(l)),u));return[k,k]})}getConfig(){let e=super.getConfig(),r={units:this.units,activation:Ta(this.activation),recurrentActivation:Ta(this.recurrentActivation),useBias:this.useBias,kernelInitializer:hn(this.kernelInitializer),recurrentInitializer:hn(this.recurrentInitializer),biasInitializer:hn(this.biasInitializer),kernelRegularizer:jt(this.kernelRegularizer),recurrentRegularizer:jt(this.recurrentRegularizer),biasRegularizer:jt(this.biasRegularizer),activityRegularizer:jt(this.activityRegularizer),kernelConstraint:Un(this.kernelConstraint),recurrentConstraint:Un(this.recurrentConstraint),biasConstraint:Un(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation,resetAfter:!1};return Object.assign(Object.assign({},e),r)}}return n.className="GRUCell",n})();he.registerClass(_$);var WQ=(()=>{class n extends Yf{constructor(e){e.implementation===0&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new _$(e),super(e)}call(e,r){return K(()=>{this.cell.dropoutMask!=null&&(Be(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(Be(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);let o=r==null?null:r.mask,s=r==null?null:r.training,i=r==null?null:r.initialState;return super.call(e,{mask:o,training:s,initialState:i})})}static fromConfig(e,r){return r.implmentation===0&&(r.implementation=1),new e(r)}}return n.className="GRU",n})();he.registerClass(WQ);var Gw=(()=>{class n extends Xf{constructor(e){super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=e.units,rr(this.units,"units"),this.activation=Ea(e.activation===void 0?this.DEFAULT_ACTIVATION:e.activation),this.recurrentActivation=Ea(e.recurrentActivation===void 0?this.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=Jt(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=Jt(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=Jt(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.unitForgetBias=e.unitForgetBias,this.kernelRegularizer=ln(e.kernelRegularizer),this.recurrentRegularizer=ln(e.recurrentRegularizer),this.biasRegularizer=ln(e.biasRegularizer),this.kernelConstraint=jn(e.kernelConstraint),this.recurrentConstraint=jn(e.recurrentConstraint),this.biasConstraint=jn(e.biasConstraint),this.dropout=jm([1,Sa([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=jm([1,Sa([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.implementation=e.implementation,this.stateSize=[this.units,this.units],this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){var r;e=ct(e);let o=e[e.length-1];this.kernel=this.addWeight("kernel",[o,this.units*4],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units*4],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint);let s;if(this.useBias){if(this.unitForgetBias){let i=this.biasInitializer,a=this.units;s=new(r=class extends Wo{apply(c,u){let p=i.apply([a]),f=new NE().apply([a]),d=i.apply([a*2]);return r$(r$(p,f),d)}},r.className="CustomInit",r)}else s=this.biasInitializer;this.bias=this.addWeight("bias",[this.units*4],null,s,this.biasRegularizer,!0,this.biasConstraint)}else this.bias=null;this.built=!0}call(e,r){return K(()=>{let o=r.training==null?!1:r.training;if(e=e,e.length!==3)throw new X(`LSTMCell expects 3 input Tensors (inputs, h, c), got ${e.length}.`);let s=e[1],i=e[2];e=e[0],0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=mp({ones:()=>vr(e),rate:this.dropout,training:o,count:4,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=mp({ones:()=>vr(s),rate:this.recurrentDropout,training:o,count:4,dropoutFunc:this.dropoutFunc}));let a=this.dropoutMask,l=this.recurrentDropoutMask,c,u,p,f;0<this.dropout&&this.dropout<1&&(e=B(e,a[0]));let d=_i(e,this.kernel.read());0<this.recurrentDropout&&this.recurrentDropout<1&&(s=B(s,l[0])),d=ae(d,_i(s,this.recurrentKernel.read())),this.useBias&&(d=Go(d,this.bias.read()));let[h,m,g,x]=dr(d,4,d.rank-1);c=this.recurrentActivation.apply(h),u=this.recurrentActivation.apply(m),p=ae(B(u,i),B(c,this.activation.apply(g))),f=this.recurrentActivation.apply(x);let b=B(f,this.activation.apply(p));return[b,b,p]})}getConfig(){let e=super.getConfig(),r={units:this.units,activation:Ta(this.activation),recurrentActivation:Ta(this.recurrentActivation),useBias:this.useBias,kernelInitializer:hn(this.kernelInitializer),recurrentInitializer:hn(this.recurrentInitializer),biasInitializer:hn(this.biasInitializer),unitForgetBias:this.unitForgetBias,kernelRegularizer:jt(this.kernelRegularizer),recurrentRegularizer:jt(this.recurrentRegularizer),biasRegularizer:jt(this.biasRegularizer),activityRegularizer:jt(this.activityRegularizer),kernelConstraint:Un(this.kernelConstraint),recurrentConstraint:Un(this.recurrentConstraint),biasConstraint:Un(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation};return Object.assign(Object.assign({},e),r)}}return n.className="LSTMCell",n})();he.registerClass(Gw);var HQ=(()=>{class n extends Yf{constructor(e){e.implementation===0&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new Gw(e),super(e)}call(e,r){return K(()=>{this.cell.dropoutMask!=null&&(Be(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(Be(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);let o=r==null?null:r.mask,s=r==null?null:r.training,i=r==null?null:r.initialState;return super.call(e,{mask:o,training:s,initialState:i})})}static fromConfig(e,r){return r.implmentation===0&&(r.implementation=1),new e(r)}}return n.className="LSTM",n})();he.registerClass(HQ);var A$=(()=>{class n extends Xf{constructor(e){super(e),this.cells=e.cells}get stateSize(){let e=[];for(let r of this.cells.slice().reverse())Array.isArray(r.stateSize)?e.push(...r.stateSize):e.push(r.stateSize);return e}call(e,r){return K(()=>{e=e;let o=e.slice(1),s=[];for(let l of this.cells.slice().reverse())Array.isArray(l.stateSize)?s.push(o.splice(0,l.stateSize.length)):s.push(o.splice(0,1));s.reverse();let i=[],a;for(let l=0;l<this.cells.length;++l){let c=this.cells[l];o=s[l],l===0?a=[e[0]].concat(o):a=[a[0]].concat(o),a=c.call(a,r),i.push(a.slice(1))}o=[];for(let l of i.slice().reverse())o.push(...l);return[a[0]].concat(o)})}build(e){DE(e)&&(e=e[0]),e=e;let r;this.cells.forEach((o,s)=>{Ia(`RNNCell_${s}`,()=>{o.build(e),Array.isArray(o.stateSize)?r=o.stateSize[0]:r=o.stateSize,e=[e[0],r]})}),this.built=!0}getConfig(){let e=super.getConfig(),r=i=>({className:i.getClassName(),config:i.getConfig()}),s={cells:this.cells.map(r)};return Object.assign(Object.assign({},e),s)}static fromConfig(e,r,o={}){let s=[];for(let i of r.cells)s.push(As(i,o));return new e({cells:s})}get trainableWeights(){if(!this.trainable)return[];let e=[];for(let r of this.cells)e.push(...r.trainableWeights);return e}get nonTrainableWeights(){let e=[];for(let r of this.cells)e.push(...r.nonTrainableWeights);if(!this.trainable){let r=[];for(let o of this.cells)r.push(...o.trainableWeights);return r.concat(e)}return e}getWeights(){let e=[];for(let r of this.cells)e.push(...r.weights);return Fw(e)}setWeights(e){let r=[];for(let o of this.cells){let s=o.weights.length,i=e.splice(s);for(let a=0;a<o.weights.length;++a)r.push([o.weights[a],i[a]])}My(r)}}return n.className="StackedRNNCells",n})();he.registerClass(A$);function mp(n){let{ones:t,rate:e,training:r=!1,count:o=1,dropoutFunc:s}=n,i=()=>s!=null?s(t(),e):EE(t(),e),a=()=>Hf(i,t,r);return!o||o<=1?yn(a().clone()):Array(o).fill(void 0).map(a).map(c=>yn(c.clone()))}var HMe=function(n,t){var e={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&t.indexOf(r)<0&&(e[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(n);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(n,r[o])&&(e[r[o]]=n[r[o]]);return e};var qMe=(()=>{class n extends Yf{constructor(e){if(e.unroll)throw new We("Unrolling is not possible with convolutional RNNs.");if(Array.isArray(e.cell))throw new We("It is not possible at the moment to stack convolutional cells.");super(e),this.inputSpec=[new an({ndim:5})]}call(e,r){return K(()=>{if(this.cell.dropoutMask!=null&&(Be(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(Be(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null),r&&r.constants)throw new X("ConvRNN2D cell does not support constants");let o=r==null?null:r.mask,s=r==null?null:r.training,i=r==null?null:r.initialState;return super.call(e,{mask:o,training:s,initialState:i})})}computeOutputShape(e){let r=this.computeSingleOutputShape(e);return this.returnSequences||(r=[r[0],...r.slice(2)]),this.returnState&&(r=[r,...Array(2).fill([e[0],...r.slice(-3)])]),r}getInitialState(e){return K(()=>{let{stateSize:r}=this.cell,o=e.shape,s=this.computeSingleOutputShape(o),i=[s[0],...s.slice(2)],a=Kt(i);return Array.isArray(r)?Array(r.length).fill(a):[a]})}resetStates(e,r=!1){K(()=>{if(!this.stateful)throw new ni("Cannot call resetStates() on an RNN Layer that is not stateful.");let o=this.inputSpec[0].shape,s=this.computeSingleOutputShape(o),i=[s[0],...s.slice(2)];if(o[0]==null)throw new X("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(this.getStates()==null)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>Kt(i)):this.states_=[Kt(i)];else if(e==null)Be(this.states_),this.keptStates!=null&&(Be(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>Kt(i)):this.states_[0]=Kt(i);else{if(Array.isArray(e)||(e=[e]),e.length!==this.states_.length)throw new X(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${e.length} state value(s). Input received: ${e}`);r?this.keptStates.push(this.states_.slice()):Be(this.states_);for(let l=0;l<this.states_.length;++l){let c=e[l],u=i;if(!C.arraysEqual(c.shape,u))throw new X(`State ${l} is incompatible with layer ${this.name}: expected shape=${u}, received shape=${c.shape}`);this.states_[l]=c}}this.states_=this.states_.map(l=>yn(l.clone()))})}computeSingleOutputShape(e){let{dataFormat:r,filters:o,kernelSize:s,padding:i,strides:a,dilationRate:l}=this.cell,c=r==="channelsFirst",u=e[c?3:2],p=e[c?4:3],f=as(u,s[0],i,a[0],l[0]),d=as(p,s[1],i,a[1],l[1]);return[...e.slice(0,2),...c?[o,f,d]:[f,d,o]]}}return n.className="ConvRNN2D",n})(),R$=(()=>{class n extends Gw{constructor(e){let{filters:r,kernelSize:o,strides:s,padding:i,dataFormat:a,dilationRate:l}=e;super(Object.assign(Object.assign({},e),{units:r})),this.filters=r,rr(this.filters,"filters"),this.kernelSize=Kf(o,2,"kernelSize"),this.kernelSize.forEach(c=>rr(c,"kernelSize")),this.strides=Kf(s||1,2,"strides"),this.strides.forEach(c=>rr(c,"strides")),this.padding=i||"valid",Vo(this.padding),this.dataFormat=a||"channelsLast",Rn(this.dataFormat),this.dilationRate=Kf(l||1,2,"dilationRate"),this.dilationRate.forEach(c=>rr(c,"dilationRate"))}build(e){var r;e=ct(e);let o=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[o]==null)throw new X(`The channel dimension of the input should be defined. Found ${e[o]}`);let s=e[o],i=4,a=this.kernelSize.concat([s,this.filters*i]);this.kernel=this.addWeight("kernel",a,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint);let l=this.kernelSize.concat([this.filters,this.filters*i]);if(this.recurrentKernel=this.addWeight("recurrent_kernel",l,null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){let c;if(this.unitForgetBias){let u=this.biasInitializer,p=this.filters;c=new(r=class extends Wo{apply(d,h){let m=u.apply([p]),g=er([p]),x=u.apply([p*2]);return ky([m,g,x])}},r.className="CustomInit",r)}else c=this.biasInitializer;this.bias=this.addWeight("bias",[this.filters*i],null,c,this.biasRegularizer,!0,this.biasConstraint)}this.built=!0}call(e,r){return K(()=>{if(e.length!==3)throw new X(`ConvLSTM2DCell expects 3 input Tensors (inputs, h, c), got ${e.length}.`);let o=r.training||!1,s=e[0],i=e[1],a=e[2],l=4;0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=mp({ones:()=>vr(s),rate:this.dropout,training:o,count:l,dropoutFunc:this.dropoutFunc}));let c=this.dropoutMask,u=(we,Se,Ce)=>!Se||!Se[Ce]?we:B(Se[Ce],we),p=u(s,c,0),f=u(s,c,1),d=u(s,c,2),h=u(s,c,3);0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=mp({ones:()=>vr(i),rate:this.recurrentDropout,training:o,count:l,dropoutFunc:this.dropoutFunc}));let m=this.recurrentDropoutMask,g=u(i,m,0),x=u(i,m,1),b=u(i,m,2),w=u(i,m,3),v=3,[S,k,A,$]=dr(this.kernel.read(),l,v),[L,z,W,Q]=this.useBias?dr(this.bias.read(),l):[null,null,null,null];p=this.inputConv(p,S,L,this.padding),f=this.inputConv(f,k,z,this.padding),d=this.inputConv(d,A,W,this.padding),h=this.inputConv(h,$,Q,this.padding);let[ne,se,te,ie]=dr(this.recurrentKernel.read(),l,v);g=this.recurrentConv(g,ne),x=this.recurrentConv(x,se),b=this.recurrentConv(b,te),w=this.recurrentConv(w,ie);let le=this.recurrentActivation.apply(ae(p,g)),pe=this.recurrentActivation.apply(ae(f,x)),me=ae(B(pe,a),B(le,this.activation.apply(ae(d,b)))),ve=B(this.recurrentActivation.apply(ae(h,w)),this.activation.apply(me));return[ve,ve,me]})}getConfig(){let e=super.getConfig(),{units:r}=e,o=HMe(e,["units"]),s={filters:this.filters,kernelSize:this.kernelSize,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,strides:this.strides};return Object.assign(Object.assign({},o),s)}inputConv(e,r,o,s){let i=Po(e,r,this.strides,s||"valid",this.dataFormat==="channelsFirst"?"NCHW":"NHWC",this.dilationRate);return o?Go(i,o,this.dataFormat):i}recurrentConv(e,r){return Po(e,r,1,"same",this.dataFormat==="channelsFirst"?"NCHW":"NHWC")}}return n.className="ConvLSTM2DCell",n})();he.registerClass(R$);var qQ=(()=>{class n extends qMe{constructor(e){let r=new R$(e);super(Object.assign(Object.assign({},e),{cell:r}))}static fromConfig(e,r){return new e(r)}}return n.className="ConvLSTM2D",n})();he.registerClass(qQ);N();var M$=(()=>{class n extends He{constructor(e){super(e),this.rate=Math.max(Math.min(e.rate,1),0),this.noiseShape=e.noiseShape,this.seed=e.seed,this.supportsMasking=!0}getNoiseShape(e){if(this.noiseShape==null)return this.noiseShape;let r=e.shape,o=[];for(let s=0;s<this.noiseShape.length;++s)o.push(this.noiseShape[s]==null?r[s]:this.noiseShape[s]);return o}call(e,r){return K(()=>{this.invokeCallHook(e,r);let o=Ve(e);if(0<this.rate&&this.rate<1){let s=r.training==null?!1:r.training,i=this.getNoiseShape(o);return Hf(()=>EE(o,this.rate,i,this.seed),()=>o,s)}return e})}getConfig(){let e={rate:this.rate,noiseShape:this.noiseShape,seed:this.seed},r=super.getConfig();return Object.assign(e,r),e}dispose(){return super.dispose()}}return n.className="Dropout",n})();he.registerClass(M$);var KQ=(()=>{class n extends M${constructor(e){super(e),this.inputSpec=[{ndim:3}]}getNoiseShape(e){let r=e.shape;return[r[0],1,r[2]]}}return n.className="SpatialDropout1D",n})();he.registerClass(KQ);var XQ=(()=>{class n extends He{constructor(e){if(super(e),this.activation=null,this.useBias=!0,this.kernel=null,this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",e.batchInputShape==null&&e.inputShape==null&&e.inputDim!=null){let r=null;e.batchSize!=null&&(r=e.batchSize),this.batchInputShape=[r,e.inputDim]}this.units=e.units,rr(this.units,"units"),this.activation=Ea(e.activation),e.useBias!=null&&(this.useBias=e.useBias),this.kernelInitializer=Jt(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.biasInitializer=Jt(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelConstraint=jn(e.kernelConstraint),this.biasConstraint=jn(e.biasConstraint),this.kernelRegularizer=ln(e.kernelRegularizer),this.biasRegularizer=ln(e.biasRegularizer),this.activityRegularizer=ln(e.activityRegularizer),this.supportsMasking=!0,this.inputSpec=[{minNDim:2}]}build(e){e=ct(e);let r=e[e.length-1];this.kernel==null&&(this.kernel=this.addWeight("kernel",[r,this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint))),this.inputSpec=[{minNDim:2,axes:{[-1]:r}}],this.built=!0}computeOutputShape(e){e=ct(e);let r=e.slice();return r[r.length-1]=this.units,r}call(e,r){return K(()=>{this.invokeCallHook(e,r);let o=Ve(e),s=yE(this.activation.getClassName()),i;return s!=null?i=_i(o,this.kernel.read(),s,this.bias?this.bias.read():null):(i=_i(o,this.kernel.read()),this.bias!=null&&(i=Go(i,this.bias.read())),this.activation!=null&&(i=this.activation.apply(i))),i})}getConfig(){let e={units:this.units,activation:Ta(this.activation),useBias:this.useBias,kernelInitializer:hn(this.kernelInitializer),biasInitializer:hn(this.biasInitializer),kernelRegularizer:jt(this.kernelRegularizer),biasRegularizer:jt(this.biasRegularizer),activityRegularizer:jt(this.activityRegularizer),kernelConstraint:Un(this.kernelConstraint),biasConstraint:Un(this.biasConstraint)},r=super.getConfig();return Object.assign(e,r),e}}return n.className="Dense",n})();he.registerClass(XQ);var YQ=(()=>{class n extends He{constructor(e){e=e||{},super(e),this.inputSpec=[{minNDim:3}],this.dataFormat=e.dataFormat}computeOutputShape(e){e=ct(e);for(let r of e.slice(1))if(r==null)throw new X(`The shape of the input to "Flatten" is not fully defined (got ${e.slice(1)}). Make sure to pass a complete "input_shape" or "batch_input_shape" argument to the first layer in your model.`);return[e[0],ki(e,1)]}call(e,r){return K(()=>{this.invokeCallHook(e,r);let o=Ve(e);if(this.dataFormat==="channelsFirst"&&o.rank>1){let s=[0];for(let i=2;i<o.rank;++i)s.push(i);s.push(1),o=it(o,s)}return BZ(o)})}getConfig(){let e={};this.dataFormat!=null&&(e.dataFormat=this.dataFormat);let r=super.getConfig();return Object.assign(e,r),e}}return n.className="Flatten",n})();he.registerClass(YQ);var ZQ=(()=>{class n extends He{constructor(e){super(e),this.supportsMasking=!0,this.activation=Ea(e.activation)}call(e,r){return K(()=>{this.invokeCallHook(e,r);let o=Ve(e);return this.activation.apply(o)})}getConfig(){let e={activation:Ta(this.activation)},r=super.getConfig();return Object.assign(e,r),e}}return n.className="Activation",n})();he.registerClass(ZQ);var QQ=(()=>{class n extends He{constructor(e){super(e),this.n=e.n,this.inputSpec=[{ndim:2}]}computeOutputShape(e){return[e[0],this.n,e[1]]}call(e,r){return K(()=>(e=Ve(e),$Z(e,this.n)))}getConfig(){let e={n:this.n},r=super.getConfig();return Object.assign(e,r),e}}return n.className="RepeatVector",n})();he.registerClass(QQ);var JQ=(()=>{class n extends He{constructor(e){super(e),this.targetShape=e.targetShape;for(let r=0;r<this.targetShape.length;++r)this.isUnknown(this.targetShape[r])&&(this.targetShape[r]=null)}isUnknown(e){return e<0||e==null}fixUnknownDimension(e,r){let o="Total size of new array must be unchanged.",s=r.slice(),i=1,a=null;for(let c=0;c<s.length;++c){let u=s[c];if(this.isUnknown(u))if(a===null)a=c;else throw new X("Can only specifiy one unknown dimension.");else i*=u}let l=ki(e);if(a!==null){if(i===0||l%i!==0)throw new X(o);s[a]=l/i}else if(l!==i)throw new X(o);return s}computeOutputShape(e){let r=!1;for(let o=0;o<e.length;++o)if(this.isUnknown(e[o])){r=!0;break}return r?e.slice(0,1).concat(this.targetShape):e.slice(0,1).concat(this.fixUnknownDimension(e.slice(1),this.targetShape))}call(e,r){return K(()=>{this.invokeCallHook(e,r);let o=Ve(e),s=o.shape,i=s.slice(0,1).concat(this.fixUnknownDimension(s.slice(1),this.targetShape));return V(o,i)})}getConfig(){let e={targetShape:this.targetShape},r=super.getConfig();return Object.assign(e,r),e}}return n.className="Reshape",n})();he.registerClass(JQ);var eJ=(()=>{class n extends He{constructor(e){if(super(e),e.dims==null)throw new Error("Required configuration field `dims` is missing during Permute constructor call.");if(!Array.isArray(e.dims))throw new Error(`Permute constructor requires \`dims\` to be an Array, but received ${e.dims} instead.`);let r=Uo(1,e.dims.length+1);if(!C.arraysEqual(e.dims.slice().sort(),r))throw new Error("Invalid permutation `dims`: "+JSON.stringify(e.dims)+" `dims` must contain consecutive integers starting from 1.");this.dims=e.dims,this.dimsIncludingBatch=[0].concat(this.dims),this.inputSpec=[new an({ndim:this.dims.length+1})]}computeOutputShape(e){e=ct(e);let r=e.slice();return this.dims.forEach((o,s)=>{r[s+1]=e[o]}),r}call(e,r){return it(Ve(e),this.dimsIncludingBatch)}getConfig(){let e={dims:this.dims},r=super.getConfig();return Object.assign(e,r),e}}return n.className="Permute",n})();he.registerClass(eJ);var tJ=(()=>{class n extends He{constructor(e){super(e??{}),this.supportsMasking=!0,e!=null?this.maskValue=e.maskValue==null?0:e.maskValue:this.maskValue=0}computeOutputShape(e){return e}getConfig(){let e=super.getConfig(),r={maskValue:this.maskValue};return Object.assign(r,e),r}computeMask(e,r){let o=Ve(e);return Sf(Ii(o,this.maskValue),-1)}call(e,r){return K(()=>{this.invokeCallHook(e,r);let o=Ve(e),a=Sf(Ii(o,this.maskValue),-1,!0);return B(o,fe(a,o.dtype))})}}return n.className="Masking",n})();he.registerClass(tJ);N();var nJ=(()=>{class n extends He{constructor(e){if(super(e),this.embeddings=null,this.DEFAULT_EMBEDDINGS_INITIALIZER="randomUniform",e.batchInputShape==null&&e.inputShape==null){let r=null;e.batchSize!=null&&(r=e.batchSize),e.inputLength==null?this.batchInputShape=[r,null]:this.batchInputShape=[r].concat(Vt(e.inputLength))}this.inputDim=e.inputDim,rr(this.inputDim,"inputDim"),this.outputDim=e.outputDim,rr(this.outputDim,"outputDim"),this.embeddingsInitializer=Jt(e.embeddingsInitializer||this.DEFAULT_EMBEDDINGS_INITIALIZER),this.embeddingsRegularizer=ln(e.embeddingsRegularizer),this.activityRegularizer=ln(e.activityRegularizer),this.embeddingsConstraint=jn(e.embeddingsConstraint),this.maskZero=e.maskZero,this.supportsMasking=e.maskZero,this.inputLength=e.inputLength}build(e){this.embeddings=this.addWeight("embeddings",[this.inputDim,this.outputDim],this.dtype,this.embeddingsInitializer,this.embeddingsRegularizer,!0,this.embeddingsConstraint),this.built=!0}warnOnIncompatibleInputShape(e){}computeMask(e,r){return K(()=>this.maskZero?(e=Ve(e),Ii(e,ze(e))):null)}computeOutputShape(e){if(e=ct(e),this.inputLength==null)return[...e,this.outputDim];let r=Vt(this.inputLength);if(r.length!==e.length-1)throw new X(`"inputLength" is ${this.inputLength}, but received input shape has shape ${e}`);{let o=0;for(let s=0;s<r.length;++s){let i=r[s],a=e[s+1];if(i!=null&&a!=null&&i!==a)throw new X(`"inputLength" is ${this.inputLength}, but received input shape has shape ${e}`);i==null&&(r[o]=a),o++}}return[e[0],...r,this.outputDim]}call(e,r){return K(()=>{this.invokeCallHook(e,r);let o=Ve(e);o.dtype!=="int32"&&(o=To(o,"int32"));let s=TE(this.embeddings.read(),V(o,[o.size]));return V(s,ct(this.computeOutputShape(o.shape)))})}getConfig(){let e={inputDim:this.inputDim,outputDim:this.outputDim,embeddingsInitializer:hn(this.embeddingsInitializer),embeddingsRegularizer:jt(this.embeddingsRegularizer),activityRegularizer:jt(this.activityRegularizer),embeddingsConstraint:Un(this.embeddingsConstraint),maskZero:this.maskZero,inputLength:this.inputLength},r=super.getConfig();return Object.assign(e,r),e}}return n.className="Embedding",n})();he.registerClass(nJ);N();N();var gp=class extends He{constructor(t){super(t||{}),this.supportsMasking=!0}mergeFunction(t){throw new We}computeElementwiseOpOutputShape(t,e){if(t==null||e==null)return null;if(t.length<e.length)return this.computeElementwiseOpOutputShape(e,t);if(e.length===0)return t;let r=t.slice(0,t.length-e.length);for(let o=0;o<e.length;++o){let s=t[t.length-e.length+o],i=e[o];if(s==null||i==null||s<0||i<0)r.push(null);else if(s===1)r.push(i);else if(i===1)r.push(s);else{if(s!==i)throw new X("Operands could not be broadcast together with shapes "+JSON.stringify(t)+" "+JSON.stringify(e));r.push(s)}}return r}build(t){if(Array.isArray(t)&&!Array.isArray(t[0])&&(t=[ct(t)]),t=t,t.length<2)throw new X(`A merge layer should be called on an Array of at least 2 inputs. Got ${t.length} input(s).`);let e=[];for(let s of t)s!=null&&s[0]!==null&&e.push(s[0]);if(e=Di(e),e.length>1)throw new X(`Can not merge tensors with different batch sizes. Got tensors with shapes: ${JSON.stringify(t)}.`);let r=t[0]==null?null:t[0].slice(1);for(let s=1;s<t.length;++s){let i=t[s]==null?null:t[s].slice(1);r=this.computeElementwiseOpOutputShape(r,i)}let o=t.map(s=>s.length);t.indexOf(null)===-1&&Di(o).length===1?this.reshapeRequired=!1:this.reshapeRequired=!0}call(t,e){return K(()=>{if(t=t,this.reshapeRequired){let r=[],o=t.map(s=>s.rank);if(o.indexOf(null)===-1){let s=Sa(o);for(let i of t){let a=i.rank;for(let l=0;l<s-a;++l)i=pp(i,1);r.push(i)}return this.mergeFunction(r)}else{let s=!1;for(let l of t){let c=l.rank;if(c==null){let u=l.shape,p=u[0],f=u.slice(1).concat([p]),d=V(l,[p].concat(ki(u.slice(1))));d=it(d,[1,0]),d=V(d,f),r.push(d),s=!0}else if(c>1){let u=Uo(1,c).concat([0]);r.push(it(l,u)),s=!0}else r.push(l)}let i=this.mergeFunction(r),a=i.rank;if(s){if(a==null){let l=i.shape,c=l.length,u=l[c-1],p=[u].concat(l.slice(0,l.length-1));i=V(it(V(i,[-1,u]),[1,0]),p)}else if(a>1){let l=[a-1].concat(Uo(0,a-1));i=it(i,l)}}return i}}else return this.mergeFunction(t)})}computeOutputShape(t){t=t;let e;t[0]==null?e=null:e=t[0].slice(1);for(let o=1;o<t.length;++o){let s=t[o]==null?null:t[o].slice(1);e=this.computeElementwiseOpOutputShape(e,s)}let r=[];for(let o of t)o!=null&&o[0]!==null&&r.push(o[0]);return r=Di(r),r.length===1?e=r.concat(e):e=[null].concat(e),e}computeMask(t,e){return K(()=>{if(e==null)return null;if(!Array.isArray(e))throw new X("`mask` should be an Array");if(!Array.isArray(t))throw new X("`inputs` should be an Array");if(e.length!==t.length)throw new X(`The Array 'inputs' and 'mask' are expected to have the same length, but have different lengths (${t.length} vs ${e.length})`);if(e.every(o=>o==null))return null;e=e.map(o=>o==null?o:Cn(o,0));let r=e[0];for(let o=1;o<e.length-1;++o)r=Zr(r,e[o]);return r})}},rJ=(()=>{class n extends gp{constructor(e){super(e)}mergeFunction(e){return K(()=>{let r=e[0].clone();for(let o=1;o<e.length;++o)r=ae(r,e[o]);return r})}}return n.className="Add",n})();he.registerClass(rJ);var oJ=(()=>{class n extends gp{constructor(e){super(e)}mergeFunction(e){return K(()=>{let r=e[0].clone();for(let o=1;o<e.length;++o)r=B(r,e[o]);return r})}}return n.className="Multiply",n})();he.registerClass(oJ);var sJ=(()=>{class n extends gp{constructor(e){super(e)}mergeFunction(e){return K(()=>{let r=e[0].clone();for(let o=1;o<e.length;++o)r=ae(r,e[o]);return B(1/e.length,r)})}}return n.className="Average",n})();he.registerClass(sJ);var iJ=(()=>{class n extends gp{constructor(e){super(e)}mergeFunction(e){return K(()=>{let r=e[0];for(let o=1;o<e.length;++o)r=$o(r,e[o]);return r})}}return n.className="Maximum",n})();he.registerClass(iJ);var aJ=(()=>{class n extends gp{constructor(e){super(e)}mergeFunction(e){return K(()=>{let r=e[0];for(let o=1;o<e.length;++o)r=Ns(r,e[o]);return r})}}return n.className="Minimum",n})();he.registerClass(aJ);var lJ=(()=>{class n extends gp{constructor(e){super(e),this.DEFAULT_AXIS=-1,e==null&&(e={}),this.axis=e.axis==null?this.DEFAULT_AXIS:e.axis,this.supportsMasking=!0,this.reshapeRequired=!1}build(e){if(!(Array.isArray(e)&&Array.isArray(e[0]))||e.length===1)throw new X("A `Concatenate` layer should be called on a list of at least 2 inputs");e=e;let r=!0;for(let s of e)if(s!=null){r=!1;break}if(r)return;let o=[];for(let s=0;s<e.length;++s){let i=e[s].slice();i.splice(this.axis,1);let a=!1;for(let l of o)if(C.arraysEqual(l,i)){a=!0;break}a||o.push(i)}if(o.length>1)throw new X("A `Concatenate` layer requires inputs with matching shapes except for the concat axis. Got input shapes: "+JSON.stringify(e))}mergeFunction(e){return K(()=>ky(e,this.axis))}computeOutputShape(e){if(!(Array.isArray(e)&&Array.isArray(e[0])))throw new X("A `Concatenate` layer should be called on a list of inputs.");let r=e,o=r[0].slice(),s=this.axis<0?o.length+this.axis:this.axis;for(let i of r.slice(1)){if(o[s]==null||i[s]==null){o[s]=null;break}o[s]+=i[s]}return o}computeMask(e,r){if(r==null)return null;if(!Array.isArray(r))throw new X("`mask` should be an array for Concatenate");if(!Array.isArray(e))throw new X("`inputs` should be an array for Concatenate");if(r.length!==e.length)throw new X(`Mismatch in the length of mask (${r.length}) and the legnth of inputs (${e.length})`);return K(()=>{let o=!0;if(r.forEach(a=>{if(a!=null){o=!1;return}}),o)return null;let s=[];for(let a=0;a<e.length;++a)r[a]==null?s.push(fe(vr(e[a]),"bool")):r[a].rank<e[a].rank?s.push(Cn(r[a],-1)):s.push(r[a]);let i=Tt(s,this.axis);return lm(i,-1,!1)})}getConfig(){let e={axis:this.axis},r=super.getConfig();return Object.assign(e,r),e}}return n.className="Concatenate",n})();he.registerClass(lJ);function Ww(n,t){for(;n<0;)n+=t;return n}function KMe(n,t,e){if(n.shape.length>3||t.shape.length>3)throw new We("batchDot is not implemented for tensors of 4D or higher rank yet");if(C.assert(n.shape.length>=2,()=>`batchDot requires the rank of x to be >= 2, but got ${n.shape.length}`),C.assert(n.shape.length>=2,()=>`batchDot requires the rank of y to be >= 2, but got ${t.shape.length}`),typeof e=="number"&&(e=[e,e]),n.dtype==="complex64"||t.dtype==="complex64")throw new We("batchDot is not implemented for complex64-type Tensors yet.");let r=n.shape.length,o=t.shape.length;e==null&&(e=[r-1,o-2]);let s=e;return K(()=>{let i;if(r>o){i=r-o;let l=[];for(let c=0;c<i;++c)l.push(1);t=V(t,t.shape.concat(l))}else if(o>r){i=o-r;let l=[];for(let c=0;c<i;++c)l.push(1);n=V(n,n.shape.concat(l))}else i=0;let a;if(n.shape.length===2&&t.shape.length===2)s[0]===s[1]?a=Ee(B(n,t),s[0]):a=Ee(B(it(n,[1,0]),t),s[1]);else{let l=s[0]!==n.shape.length-1,c=s[1]===t.shape.length-1;a=st(n,t,l,c)}if(i>0){let l;r>o?l=r+o-3:l=r-1;let c=[];for(let u=l;u<l+i;++u)c.push(u);a=Qt(a,c)}return a.shape.length===1&&(a=Cn(a,1)),a})}var cJ=(()=>{class n extends gp{constructor(e){super(e),this.axes=e.axes,this.normalize=e.normalize==null?!1:e.normalize,this.supportsMasking=!0,this.reshapeRequired=!1}build(e){C.assert(Array.isArray(e)&&e.length===2&&Array.isArray(e[0])&&Array.isArray(e[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");let r=e[0],o=e[1];if(r.length>3||o.length>3)throw new We("Dot layer does not support tensors of 4D or higher rank yet.");let s=this.interpretAxes(r,o);if(r[s[0]]!==o[s[1]])throw new X(`Dimension incompatibility: ${r[s[0]]} !== ${o[s[1]]}`)}mergeFunction(e){if(e.length!==2)throw new X(`A \`Dot\` layer must be called on exactly 2 inputs, but received ${e.length} input(s).`);let r=e[0],o=e[1],s;return Array.isArray(this.axes)?s=this.axes.map((i,a)=>Ww(i,e[a].shape.length)):s=[Ww(this.axes,r.shape.length),Ww(this.axes,o.shape.length)],this.normalize&&(r=Pw(r,s[0]),o=Pw(o,s[1])),KMe(r,o,s)}interpretAxes(e,r){let o;return Array.isArray(this.axes)?o=this.axes:o=[Ww(this.axes,e.length),Ww(this.axes,r.length)],o}computeOutputShape(e){C.assert(Array.isArray(e)&&e.length===2&&Array.isArray(e[0])&&Array.isArray(e[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");let r=e[0].slice(),o=e[1].slice();if(r.length>3||o.length>3)throw new We("Dot layer does not support tensors of 4D or higher rank yet.");let s=this.interpretAxes(r,o);r.splice(s[0],1),o.splice(s[1],1),o.splice(0,1);let i=r.concat(o);return i.length===1&&i.push(1),i}computeMask(e,r){return null}getConfig(){let e={axes:this.axes,normalize:this.normalize},r=super.getConfig();return Object.assign(e,r),e}}return n.className="Dot",n})();he.registerClass(cJ);N();var uJ=(()=>{class n extends He{constructor(e){super(e),this.supportsMasking=!0,this.stddev=e.stddev}computeOutputShape(e){return e}getConfig(){let e=super.getConfig(),r={stddev:this.stddev};return Object.assign(r,e),r}call(e,r){return K(()=>{this.invokeCallHook(e,r);let o=Ve(e);return Hf(()=>ae(_y(o.shape,0,this.stddev),o),()=>o,r.training||!1)})}}return n.className="GaussianNoise",n})();he.registerClass(uJ);var pJ=(()=>{class n extends He{constructor(e){super(e),this.supportsMasking=!0,this.rate=e.rate}computeOutputShape(e){return e}getConfig(){let e=super.getConfig(),r={rate:this.rate};return Object.assign(r,e),r}call(e,r){return K(()=>{this.invokeCallHook(e,r);let o=Ve(e);return this.rate>0&&this.rate<1?Hf(()=>{let i=Math.sqrt(this.rate/(1-this.rate));return B(o,_y(o.shape,1,i))},()=>o,r.training||!1):o})}}return n.className="GaussianDropout",n})();he.registerClass(pJ);var fJ=(()=>{class n extends He{constructor(e){super(e),this.supportsMasking=!0,this.rate=e.rate,this.noiseShape=e.noiseShape}_getNoiseShape(e){return this.noiseShape||Ve(e).shape}computeOutputShape(e){return e}getConfig(){let e=super.getConfig(),r={rate:this.rate};return Object.assign(r,e),r}call(e,r){return K(()=>{if(this.rate<1&&this.rate>0){let o=this._getNoiseShape(e);return Hf(()=>{let i=Ve(e),c=-1.6732632423543772*1.0507009873554805,u=Co(is(o),this.rate);u=To(u,"float32");let p=((1-this.rate)*(1+this.rate*c**2))**-.5,f=-p*c*this.rate,d=ae(B(i,u),B(ae(u,-1),c));return ae(B(d,p),f)},()=>Ve(e),r.training||!1)}return e})}}return n.className="AlphaDropout",n})();he.registerClass(fJ);N();N();function Hw(n,t,e,r,o,s=.001){let i;if(n.rank===2)i=b0(n,t,e,r,o,s);else if(n.rank===3)i=v0(n,t,e,r,o,s);else if(n.rank===4)i=w0(n,t,e,r,o,s);else throw new We(`batchNormalization is not implemented for array of rank ${n.rank} yet`);return i}function XMe(n,t,e,r,o=.001){return K(()=>{let s=kf(n,r),i=s.mean,a=s.variance;return[Hw(n,i,a,e,t,o),i,a]})}function YMe(n,t,e,r,o=.001){return K(()=>{let s=kf(n,r),i=s.mean,a=s.variance,l=[];for(let h of Uo(0,n.rank))r.indexOf(h)!==-1?l.push(1):l.push(n.shape[h]);let c=V(i,l),u=V(a,l),p=t==null?null:V(t,l),f=e==null?null:V(e,l);return[Hw(n,c,u,f,p,o),i,a]})}function ZMe(n,t,e,r,o=.001){return C.arraysEqual(r.slice().sort(),Uo(0,n.rank-1))?XMe(n,t,e,r,o):YMe(n,t,e,r,o)}var dJ=(()=>{class n extends He{constructor(e){e==null&&(e={}),super(e),this.supportsMasking=!0,this.axis=e.axis==null?-1:e.axis,this.momentum=e.momentum==null?.99:e.momentum,this.epsilon=e.epsilon==null?.001:e.epsilon,this.center=e.center==null?!0:e.center,this.scale=e.scale==null?!0:e.scale,this.betaInitializer=Jt(e.betaInitializer||"zeros"),this.gammaInitializer=Jt(e.gammaInitializer||"ones"),this.movingMeanInitializer=Jt(e.movingMeanInitializer||"zeros"),this.movingVarianceInitializer=Jt(e.movingVarianceInitializer||"ones"),this.betaConstraint=jn(e.betaConstraint),this.gammaConstraint=jn(e.gammaConstraint),this.betaRegularizer=ln(e.betaRegularizer),this.gammaRegularizer=ln(e.gammaRegularizer)}build(e){e=ct(e);let r=this.axis>=0?this.axis:this.axis+e.length,o=e[r];if(o==null)throw new X(`Axis ${r} of input tensor should have a defined dimension but the layer received an input with shape ${JSON.stringify(e)}.`);this.inputSpec=[new an({ndim:e.length,axes:{[r]:o}})];let s=[o];this.scale&&(this.gamma=this.addWeight("gamma",s,null,this.gammaInitializer,this.gammaRegularizer,!0,this.gammaConstraint)),this.center&&(this.beta=this.addWeight("beta",s,null,this.betaInitializer,this.betaRegularizer,!0,this.betaConstraint)),this.movingMean=this.addWeight("moving_mean",s,null,this.movingMeanInitializer,null,!1),this.movingVariance=this.addWeight("moving_variance",s,null,this.movingVarianceInitializer,null,!1),this.built=!0}call(e,r){return K(()=>{let o=r.training==null?!1:r.training,s=Ve(e),i=s.shape,a=i.length,l=Uo(0,a),c=this.axis>=0?this.axis:this.axis+a;l.splice(c,1);let u=Ei(1,a);u[c]=i[c];let p=l.slice();p.sort();let f=!C.arraysEqual(p,Uo(0,a).slice(0,a-1)),d=()=>{if(f){let w=V(this.movingMean.read(),u),v=V(this.movingVariance.read(),u),S=this.center?V(this.beta.read(),u):null,k=this.scale?V(this.gamma.read(),u):null;return Hw(s,w,v,S,k,this.epsilon)}else return Hw(s,this.movingMean.read(),this.movingVariance.read(),this.beta==null?null:this.beta.read(),this.gamma==null?null:this.gamma.read(),this.epsilon)};if(!o)return d();let[h,m,g]=ZMe(s,this.gamma.read(),this.beta.read(),l,this.epsilon),x=(w,v,S)=>{K(()=>{let k=1-S,A=w.read(),$=B(be(A,v),k);w.write(be(A,$))})};return(()=>{x(this.movingMean,m,this.momentum),x(this.movingVariance,g,this.momentum)})(),h})}getConfig(){let e={axis:this.axis,momentum:this.momentum,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:hn(this.betaInitializer),gammaInitializer:hn(this.gammaInitializer),movingMeanInitializer:hn(this.movingMeanInitializer),movingVarianceInitializer:hn(this.movingVarianceInitializer),betaRegularizer:jt(this.betaRegularizer),gammaRegularizer:jt(this.gammaRegularizer),betaConstraint:Un(this.betaConstraint),gammaConstraint:Un(this.gammaConstraint)},r=super.getConfig();return Object.assign(e,r),e}}return n.className="BatchNormalization",n})();he.registerClass(dJ);var hJ=(()=>{class n extends He{constructor(e){if(e==null&&(e={}),super(e),this.axis=e.axis==null?-1:e.axis,typeof this.axis=="number"){if(!Number.isInteger(this.axis))throw new Error(`Expected axis to be an integer, but received ${this.axis}`)}else if(Array.isArray(this.axis)){for(let r of this.axis)if(!Number.isInteger(r))throw new Error(`Expected axis to be an array of integers, but received ${JSON.stringify(this.axis)}`)}else throw new Error(`Expected axis to be an integer or an array of integers, but received ${JSON.stringify(this.axis)}`);this.epsilon=e.epsilon==null?.001:e.epsilon,this.center=e.center==null?!0:e.center,this.scale=e.scale==null?!0:e.scale,this.betaInitializer=Jt(e.betaInitializer||"zeros"),this.gammaInitializer=Jt(e.gammaInitializer||"ones"),this.betaRegularizer=ln(e.betaRegularizer),this.gammaRegularizer=ln(e.gammaRegularizer),this.supportsMasking=!0}build(e){e=ct(e);let r=e.length;typeof this.axis=="number"&&(this.axis=[this.axis]);for(let i=0;i<this.axis.length;++i)this.axis[i]<0&&(this.axis[i]+=r);for(let i of this.axis)if(i<0||i>=r)throw new Error(`Invalid axis: ${i}`);if(this.axis.length!==Di(this.axis).length)throw new Error(`Found duplicate axes in: ${this.axis}`);let o=this.axis.map(i=>e[i]),s=!0;this.scale?this.gamma=this.addWeight("gamma",o,"float32",this.gammaInitializer,this.gammaRegularizer,s):this.gamma=null,this.center?this.beta=this.addWeight("beta",o,"float32",this.betaInitializer,this.betaRegularizer,s):this.beta=null,this.built=!0}call(e,r){let o=Ve(e),s=o.shape,i=s.length;return K(()=>{let{mean:l,variance:c}=kf(o,this.axis,!0),u=Ei(1,i);for(let g of this.axis)u[g]=s[g];let p=g=>g!=null&&g.shape.length!==i?V(g,u):g,f=this.scale?p(this.gamma.read()):null,d=this.center?p(this.beta.read()):null,h=[],m=[];for(let g=0;g<i;++g)this.axis.indexOf(g)!==-1?(h.push(s[g]),m.push(1)):(h.push(1),m.push(s[g]));return l=$r(l,h),c=$r(c,h),f!=null&&(f=$r(f,m)),d!=null&&(d=$r(d,m)),Hw(o,l,c,d,f,this.epsilon)})}getConfig(){let e={axis:this.axis,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:hn(this.betaInitializer),gammaInitializer:hn(this.gammaInitializer),betaRegularizer:jt(this.betaRegularizer),gammaRegularizer:jt(this.gammaRegularizer)},r=super.getConfig();return Object.assign(e,r),e}}return n.className="LayerNormalization",n})();he.registerClass(hJ);N();N();function QMe(n,t,e){return K(()=>{if(n.rank!==4)throw new X(`temporalPadding expects input tensor to be 4-D, but received a ${n.rank}-D tensor.`);if(t==null&&(t=[[1,1],[1,1]]),t.length!==2||t[0].length!==2||t[1].length!==2)throw new X("spatial2dPadding expects `padding` to be an Array of two Arrays, each of which is an Array of two integers.");if(e==null&&(e=jo()),e!=="channelsLast"&&e!=="channelsFirst")throw new X(`Unknown data format: ${e}. Supported data formats are 'channelsLast' and 'channelsFirst.`);let r;return e==="channelsFirst"?r=[[0,0],[0,0],t[0],t[1]]:r=[[0,0],t[0],t[1],[0,0]],So(n,r)})}var mJ=(()=>{class n extends He{constructor(e){if(e==null&&(e={}),super(e),this.dataFormat=e.dataFormat==null?jo():e.dataFormat,e.padding==null)this.padding=[[1,1],[1,1]];else if(typeof e.padding=="number")this.padding=[[e.padding,e.padding],[e.padding,e.padding]];else{if(e.padding=e.padding,e.padding.length!==2)throw new X(`ZeroPadding2D expects padding to be a length-2 array, but received a length-${e.padding.length} array.`);let r,o;if(typeof e.padding[0]=="number")r=[e.padding[0],e.padding[0]],o=[e.padding[1],e.padding[1]];else{if(e.padding=e.padding,e.padding[0].length!==2)throw new X(`ZeroPadding2D expects height padding to be a length-2 array, but received a length-${e.padding[0].length} array.`);if(r=e.padding[0],e.padding[1].length!==2)throw new X(`ZeroPadding2D expects width padding to be a length-2 array, but received a length-${e.padding[1].length} array.`);o=e.padding[1]}this.padding=[r,o]}this.inputSpec=[new an({ndim:4})]}computeOutputShape(e){e=ct(e);let r,o;return this.dataFormat==="channelsFirst"?(e[2]!=null&&e[2]>=0?r=e[2]+this.padding[0][0]+this.padding[0][1]:r=null,e[3]!=null&&e[3]>=0?o=e[3]+this.padding[1][0]+this.padding[1][1]:o=null,[e[0],e[1],r,o]):(e[1]!=null&&e[1]>=0?r=e[1]+this.padding[0][0]+this.padding[0][1]:r=null,e[2]!=null&&e[2]>=0?o=e[2]+this.padding[1][0]+this.padding[1][1]:o=null,[e[0],r,o,e[3]])}call(e,r){return K(()=>QMe(Ve(e),this.padding,this.dataFormat))}getConfig(){let e={padding:this.padding,dataFormat:this.dataFormat},r=super.getConfig();return Object.assign(e,r),e}}return n.className="ZeroPadding2D",n})();he.registerClass(mJ);N();N();function rN(n,t,e,r,o,s){return K(()=>{Rn(o),JP(s),Vo(r),e==null&&(e=[1,1]),r==null&&(r="valid"),o==null&&(o=jo()),s==null&&(s="max"),n=jw(n,o);let i,a=r==="same"?"same":"valid";return s==="max"?i=ep(n,t,e,a):i=Gu(n,t,e,a),o==="channelsFirst"&&(i=it(i,[0,3,1,2])),i})}function gJ(n,t,e,r,o,s){return K(()=>{Rn(o),JP(s),Vo(r),e==null&&(e=[1,1,1]),r==null&&(r="valid"),o==null&&(o=jo()),s==null&&(s="max"),n=S$(n,o);let i,a=r==="same"?"same":"valid";return s==="max"?i=Z0(n,t,e,a):i=x0(n,t,e,a),o==="channelsFirst"&&(i=it(i,[0,4,1,2,3])),i})}var QE=class extends He{constructor(t){if(t.poolSize==null&&(t.poolSize=2),super(t),typeof t.poolSize=="number")this.poolSize=[t.poolSize];else if(Array.isArray(t.poolSize)&&t.poolSize.length===1&&typeof t.poolSize[0]=="number")this.poolSize=t.poolSize;else throw new X(`poolSize for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(t.poolSize)}`);if(rr(this.poolSize,"poolSize"),t.strides==null)this.strides=this.poolSize;else if(typeof t.strides=="number")this.strides=[t.strides];else if(Array.isArray(t.strides)&&t.strides.length===1&&typeof t.strides[0]=="number")this.strides=t.strides;else throw new X(`strides for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(t.strides)}`);rr(this.strides,"strides"),this.padding=t.padding==null?"valid":t.padding,Vo(this.padding),this.inputSpec=[new an({ndim:3})]}computeOutputShape(t){t=ct(t);let e=as(t[1],this.poolSize[0],this.padding,this.strides[0]);return[t[0],e,t[2]]}call(t,e){return K(()=>{this.invokeCallHook(t,e),t=pp(Ve(t),2);let r=this.poolingFunction(Ve(t),[this.poolSize[0],1],[this.strides[0],1],this.padding,"channelsLast");return Qt(r,[2])})}getConfig(){let t={poolSize:this.poolSize,padding:this.padding,strides:this.strides},e=super.getConfig();return Object.assign(t,e),t}},xJ=(()=>{class n extends QE{constructor(e){super(e)}poolingFunction(e,r,o,s,i){return Rn(i),Vo(s),rN(e,r,o,s,i,"max")}}return n.className="MaxPooling1D",n})();he.registerClass(xJ);var yJ=(()=>{class n extends QE{constructor(e){super(e)}poolingFunction(e,r,o,s,i){return Rn(i),Vo(s),rN(e,r,o,s,i,"avg")}}return n.className="AveragePooling1D",n})();he.registerClass(yJ);var JE=class extends He{constructor(t){if(t.poolSize==null&&(t.poolSize=[2,2]),super(t),this.poolSize=Array.isArray(t.poolSize)?t.poolSize:[t.poolSize,t.poolSize],t.strides==null)this.strides=this.poolSize;else if(Array.isArray(t.strides)){if(t.strides.length!==2)throw new X(`If the strides property of a 2D pooling layer is an Array, it is expected to have a length of 2, but received length ${t.strides.length}.`);this.strides=t.strides}else this.strides=[t.strides,t.strides];rr(this.poolSize,"poolSize"),rr(this.strides,"strides"),this.padding=t.padding==null?"valid":t.padding,this.dataFormat=t.dataFormat==null?"channelsLast":t.dataFormat,Rn(this.dataFormat),Vo(this.padding),this.inputSpec=[new an({ndim:4})]}computeOutputShape(t){t=ct(t);let e=this.dataFormat==="channelsFirst"?t[2]:t[1],r=this.dataFormat==="channelsFirst"?t[3]:t[2];return e=as(e,this.poolSize[0],this.padding,this.strides[0]),r=as(r,this.poolSize[1],this.padding,this.strides[1]),this.dataFormat==="channelsFirst"?[t[0],t[1],e,r]:[t[0],e,r,t[3]]}call(t,e){return K(()=>(this.invokeCallHook(t,e),this.poolingFunction(Ve(t),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){let t={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},e=super.getConfig();return Object.assign(t,e),t}},bJ=(()=>{class n extends JE{constructor(e){super(e)}poolingFunction(e,r,o,s,i){return Rn(i),Vo(s),rN(e,r,o,s,i,"max")}}return n.className="MaxPooling2D",n})();he.registerClass(bJ);var vJ=(()=>{class n extends JE{constructor(e){super(e)}poolingFunction(e,r,o,s,i){return Rn(i),Vo(s),rN(e,r,o,s,i,"avg")}}return n.className="AveragePooling2D",n})();he.registerClass(vJ);var eN=class extends He{constructor(t){if(t.poolSize==null&&(t.poolSize=[2,2,2]),super(t),this.poolSize=Array.isArray(t.poolSize)?t.poolSize:[t.poolSize,t.poolSize,t.poolSize],t.strides==null)this.strides=this.poolSize;else if(Array.isArray(t.strides)){if(t.strides.length!==3)throw new X(`If the strides property of a 3D pooling layer is an Array, it is expected to have a length of 3, but received length ${t.strides.length}.`);this.strides=t.strides}else this.strides=[t.strides,t.strides,t.strides];rr(this.poolSize,"poolSize"),rr(this.strides,"strides"),this.padding=t.padding==null?"valid":t.padding,this.dataFormat=t.dataFormat==null?"channelsLast":t.dataFormat,Rn(this.dataFormat),Vo(this.padding),this.inputSpec=[new an({ndim:5})]}computeOutputShape(t){t=ct(t);let e=this.dataFormat==="channelsFirst"?t[2]:t[1],r=this.dataFormat==="channelsFirst"?t[3]:t[2],o=this.dataFormat==="channelsFirst"?t[4]:t[3];return e=as(e,this.poolSize[0],this.padding,this.strides[0]),r=as(r,this.poolSize[1],this.padding,this.strides[1]),o=as(o,this.poolSize[2],this.padding,this.strides[2]),this.dataFormat==="channelsFirst"?[t[0],t[1],e,r,o]:[t[0],e,r,o,t[4]]}call(t,e){return K(()=>(this.invokeCallHook(t,e),this.poolingFunction(Ve(t),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){let t={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},e=super.getConfig();return Object.assign(t,e),t}},wJ=(()=>{class n extends eN{constructor(e){super(e)}poolingFunction(e,r,o,s,i){return Rn(i),Vo(s),gJ(e,r,o,s,i,"max")}}return n.className="MaxPooling3D",n})();he.registerClass(wJ);var CJ=(()=>{class n extends eN{constructor(e){super(e)}poolingFunction(e,r,o,s,i){return Rn(i),Vo(s),gJ(e,r,o,s,i,"avg")}}return n.className="AveragePooling3D",n})();he.registerClass(CJ);var tN=class extends He{constructor(t){super(t),this.inputSpec=[new an({ndim:3})]}computeOutputShape(t){return[t[0],t[2]]}call(t,e){throw new We}},IJ=(()=>{class n extends tN{constructor(e){super(e||{})}call(e,r){return K(()=>{let o=Ve(e);return sn(o,1)})}}return n.className="GlobalAveragePooling1D",n})();he.registerClass(IJ);var SJ=(()=>{class n extends tN{constructor(e){super(e||{})}call(e,r){return K(()=>{let o=Ve(e);return Dr(o,1)})}}return n.className="GlobalMaxPooling1D",n})();he.registerClass(SJ);var nN=class extends He{constructor(t){super(t),this.dataFormat=t.dataFormat==null?"channelsLast":t.dataFormat,Rn(this.dataFormat),this.inputSpec=[new an({ndim:4})]}computeOutputShape(t){return t=t,this.dataFormat==="channelsLast"?[t[0],t[3]]:[t[0],t[1]]}call(t,e){throw new We}getConfig(){let t={dataFormat:this.dataFormat},e=super.getConfig();return Object.assign(t,e),t}},TJ=(()=>{class n extends nN{call(e,r){return K(()=>{let o=Ve(e);return this.dataFormat==="channelsLast"?sn(o,[1,2]):sn(o,[2,3])})}}return n.className="GlobalAveragePooling2D",n})();he.registerClass(TJ);var EJ=(()=>{class n extends nN{call(e,r){return K(()=>{let o=Ve(e);return this.dataFormat==="channelsLast"?Dr(o,[1,2]):Dr(o,[2,3])})}}return n.className="GlobalMaxPooling2D",n})();he.registerClass(EJ);N();N();var oN=class extends He{constructor(t){super(t),this.layer=t.layer}build(t){this.built=!0}get trainable(){return this.layer!=null?this.layer.trainable:!1}set trainable(t){this.layer!=null&&(this.layer.trainable=t)}get trainableWeights(){return this.layer.trainableWeights}get nonTrainableWeights(){return this.layer.nonTrainableWeights}get updates(){return this.layer._updates}get losses(){return this.layer.losses}getWeights(){return this.layer.getWeights()}setWeights(t){this.layer.setWeights(t)}getConfig(){let t={layer:{className:this.layer.getClassName(),config:this.layer.getConfig()}},e=super.getConfig();return Object.assign(t,e),t}setFastWeightInitDuringBuild(t){super.setFastWeightInitDuringBuild(t),this.layer!=null&&this.layer.setFastWeightInitDuringBuild(t)}static fromConfig(t,e,r={}){let o=e.layer,s=As(o,r);delete e.layer;let i={layer:s};return Object.assign(i,e),new t(i)}},NJ=(()=>{class n extends oN{constructor(e){super(e),this.supportsMasking=!0}build(e){if(e=ct(e),e.length<3)throw new X(`TimeDistributed layer expects an input shape >= 3D, but received input shape ${JSON.stringify(e)}`);this.inputSpec=[{shape:e}];let r=[e[0]].concat(e.slice(2));this.layer.built||(this.layer.build(r),this.layer.built=!0),super.build(e)}computeOutputShape(e){e=ct(e);let r=[e[0]].concat(e.slice(2)),o=this.layer.computeOutputShape(r),s=e[1];return[o[0],s].concat(o.slice(1))}call(e,r){return K(()=>(e=Ve(e),D$((a,l)=>[Ve(this.layer.call(a,r)),[]],e,[],!1,null,null,!1,!0)[1]))}}return n.className="TimeDistributed",n})();he.registerClass(NJ);function JMe(n){yc(RZ,"BidirectionalMergeMode",n)}var eOe="concat",DJ=(()=>{class n extends oN{constructor(e){super(e);let r=e.layer.getConfig(),o={};o.className=e.layer.getClassName(),o.config=r,this.forwardLayer=As(o),r.goBackwards=r.goBackwards!==!0;let s={};if(s.className=e.layer.getClassName(),s.config=r,this.backwardLayer=As(s),this.forwardLayer.name="forward_"+this.forwardLayer.name,this.backwardLayer.name="backward_"+this.backwardLayer.name,this.mergeMode=e.mergeMode===void 0?eOe:e.mergeMode,JMe(this.mergeMode),e.weights)throw new We("weights support is not implemented for Bidirectional layer yet.");this._stateful=e.layer.stateful,this.returnSequences=e.layer.returnSequences,this.returnState=e.layer.returnState,this.supportsMasking=!0,this._trainable=!0,this.inputSpec=e.layer.inputSpec,this.numConstants=null}get trainable(){return this._trainable}set trainable(e){this._trainable=e,this.forwardLayer!=null&&(this.forwardLayer.trainable=e),this.backwardLayer!=null&&(this.backwardLayer.trainable=e)}getWeights(){return this.forwardLayer.getWeights().concat(this.backwardLayer.getWeights())}setWeights(e){let r=e.length,o=Math.floor(r/2);this.forwardLayer.setWeights(e.slice(0,o)),this.backwardLayer.setWeights(e.slice(o))}computeOutputShape(e){let r=this.forwardLayer.computeOutputShape(e);Array.isArray(r)&&Array.isArray(r[0])||(r=[r]),r=r;let o,s,i;return this.returnState&&(i=r.slice(1)),o=r[0],o=o,this.mergeMode==="concat"?(o[o.length-1]*=2,s=[o]):this.mergeMode==null?s=[o,o.slice()]:s=[o],this.returnState?this.mergeMode==null?s.concat(i).concat(i.slice()):[o].concat(i).concat(i.slice()):Vr(s)}apply(e,r){let o=r==null?null:r.initialState,s=r==null?null:r.constants;r==null&&(r={});let i=N$(e,o,s,this.numConstants);if(e=i.inputs,o=i.initialState,s=i.constants,Array.isArray(e)&&(o=e.slice(1),e=e[0]),(o==null||o.length===0)&&s==null)return super.apply(e,r);let a=[],l=[];if(o!=null){let u=o.length;if(u%2>0)throw new X("When passing `initialState` to a Bidrectional RNN, the state should be an Array containing the states of the underlying RNNs.");r.initialState=o,a.push(...o);let p=o.map(f=>new an({shape:f.shape}));this.forwardLayer.stateSpec=p.slice(0,u/2),this.backwardLayer.stateSpec=p.slice(u/2),l.push(...p)}if(s!=null)throw new We("Support for constants in Bidirectional layers is not implemented yet.");let c=a[0]instanceof Eo;for(let u of a)if(u instanceof Eo!==c)throw new X("The initial state of a Bidirectional layer cannot be specified as a mix of symbolic and non-symbolic tensors");if(c){let u=[e].concat(a),p=this.inputSpec.concat(l),f=this.inputSpec;this.inputSpec=p;let d=super.apply(u,r);return this.inputSpec=f,d}else return super.apply(e,r)}call(e,r){return K(()=>{let o=r.initialState,s,i;if(o==null)s=this.forwardLayer.call(e,r),i=this.backwardLayer.call(e,r);else{let c=o.slice(0,o.length/2),u=o.slice(o.length/2);s=this.forwardLayer.call(e,Object.assign(r,{initialState:c})),i=this.backwardLayer.call(e,Object.assign(r,{initialState:u}))}let a;this.returnState&&(Array.isArray(s)&&(a=s.slice(1).concat(i.slice(1))),s=s[0],i=i[0]),this.returnSequences&&(i=fr(i,1));let l;return this.mergeMode==="concat"?l=ky([s,i]):this.mergeMode==="sum"?l=ae(s,i):this.mergeMode==="ave"?l=B(.5,ae(s,i)):this.mergeMode==="mul"?l=B(s,i):this.mergeMode==null&&(l=[s,i]),this.returnState?this.mergeMode==null?l.concat(a):[l].concat(a):l})}resetStates(e){this.forwardLayer.resetStates(),this.backwardLayer.resetStates()}build(e){Ia(this.forwardLayer.name,()=>{this.forwardLayer.build(e)}),Ia(this.backwardLayer.name,()=>{this.backwardLayer.build(e)}),this.built=!0}computeMask(e,r){Array.isArray(r)&&(r=r[0]);let o;if(this.returnSequences?this.mergeMode==null?o=[r,r]:o=r:this.mergeMode==null?o=[null,null]:o=null,this.returnState){let i=this.forwardLayer.states.map(a=>null);return Array.isArray(o)?o.concat(i).concat(i):[o].concat(i).concat(i)}else return o}get trainableWeights(){return this.forwardLayer.trainableWeights.concat(this.backwardLayer.trainableWeights)}get nonTrainableWeights(){return this.forwardLayer.nonTrainableWeights.concat(this.backwardLayer.nonTrainableWeights)}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),this.forwardLayer!=null&&this.forwardLayer.setFastWeightInitDuringBuild(e),this.backwardLayer!=null&&this.backwardLayer.setFastWeightInitDuringBuild(e)}getConfig(){let e={mergeMode:this.mergeMode},r=super.getConfig();return Object.assign(e,r),e}static fromConfig(e,r){let o=As(r.layer);if(delete r.layer,r.numConstants!=null)throw new We("Deserialization of a Bidirectional layer with numConstants present is not supported yet.");let s=r;return s.layer=o,new e(s)}}return n.className="Bidirectional",n})();he.registerClass(DJ);N();var kJ=(()=>{class n extends He{constructor(e){super(e),this.scale=e.scale,e.offset?this.offset=e.offset:this.offset=0}getConfig(){let e={scale:this.scale,offset:this.offset},r=super.getConfig();return Object.assign(e,r),e}call(e,r){return K(()=>(e=Ve(e),e.dtype!=="float32"&&(e=To(e,"float32")),ae(B(e,this.scale),this.offset)))}}return n.className="Rescaling",n})();he.registerClass(kJ);N();var{resizeBilinear:tOe,cropAndResize:nOe}=wr,_J=(()=>{class n extends He{constructor(e){super(e),this.height=e.height,this.width=e.width}centerCrop(e,r,o,s,i,a,l,c){return K(()=>{let u,p=!1,f=r/a,d=o/l,h=(s+r)/a,m=(i+o)/l,g=[f,d,h,m],x=[];e.rank===3?(p=!0,u=An([e])):u=e;for(let k=0;k<u.shape[0];k++)x.push(g);let b=Er(x,[x.length,4]),w=ga(0,x.length,1,"int32"),S=nOe(u,b,w,[s,i],"nearest");return p?To(Ve(hr(S)),c):To(S,c)})}upsize(e,r,o,s){return K(()=>{let i=tOe(e,[r,o]);return To(i,s)})}call(e,r){return K(()=>{let o=Ve(e),s=o.dtype,i=o.shape,a=i[i.length-3],l=i[i.length-2],c=0;a!==this.height&&(c=Math.floor((a-this.height)/2));let u=0;return l!==this.width&&(u=Math.floor((l-this.width)/2),u===0&&(u=1)),c>=0&&u>=0?this.centerCrop(o,c,u,this.height,this.width,a,l,s):this.upsize(e,this.height,this.width,s)})}getConfig(){let e={height:this.height,width:this.width},r=super.getConfig();return Object.assign(e,r),e}computeOutputShape(e){e=ct(e);let r=e.length-3,o=e.length-2;return e[r]=this.height,e[o]=this.width,e}}return n.className="CenterCrop",n})();he.registerClass(_J);N();N();N();N();function AJ(n,t,e,r){let o=Ve(n);if(o.dtype!=="int32"&&(o=To(o,"int32")),t==="int")return o;let s=o.shape;if(o.rank===0&&(o=Cn(o,-1)),t==="oneHot"&&o.shape[o.shape.length-1]!==1&&(o=Cn(o,-1)),o.rank>2)throw new X(`When outputMode is not int, maximum output rank is 2 Received outputMode ${t} and input shape ${s} which would result in output rank ${o.rank}.`);let i=["multiHot","oneHot"].includes(t),a=o,l;if(typeof r<"u"&&t==="count"?l=sy(a,r,e,i):l=sy(a,[],e,i),t!=="tfIdf")return l;if(r)return B(l,r);throw new X("When outputMode is 'tfIdf', weights must be provided.")}var RJ=(()=>{class n extends He{constructor(e){super(e),this.numTokens=e.numTokens,e.outputMode?this.outputMode=e.outputMode:this.outputMode="multiHot"}getConfig(){let e={numTokens:this.numTokens,outputMode:this.outputMode},r=super.getConfig();return Object.assign(e,r),e}computeOutputShape(e){return e=ct(e),e==null?[this.numTokens]:this.outputMode==="oneHot"&&e[e.length-1]!==1?(e.push(this.numTokens),e):(e[e.length-1]=this.numTokens,e)}call(e,r){return K(()=>{e=Ve(e),e.dtype!=="int32"&&(e=To(e,"int32"));let o;if(typeof r.countWeights<"u"){if(this.outputMode!=="count")throw new X(`countWeights is not used when outputMode !== count.
              Received countWeights=${r.countWeights}`);o=Ve(r.countWeights)}let s=Dr(e),i=lc(e),a=_n(this.numTokens,s).bufferSync().get(0),l=Co(i,0).bufferSync().get(0);if(!(a&&l))throw new X(`Input values must be between 0 < values <= numTokens with numTokens=${this.numTokens}`);return AJ(e,this.outputMode,this.numTokens,o)})}}return n.className="CategoryEncoding",n})();he.registerClass(RJ);N();var oOe=["bilinear","nearest"],MJ=new Set(oOe),OJ=(()=>{class n extends He{constructor(e){if(super(e),this.height=e.height,this.width=e.width,e.interpolation)if(MJ.has(e.interpolation))this.interpolation=e.interpolation;else throw new X(`Invalid interpolation parameter: ${e.interpolation} is not implemented`);else this.interpolation="bilinear";this.cropToAspectRatio=!!e.cropToAspectRatio}computeOutputShape(e){e=ct(e);let r=e[2];return[this.height,this.width,r]}getConfig(){let e={height:this.height,width:this.width,interpolation:this.interpolation,cropToAspectRatio:this.cropToAspectRatio},r=super.getConfig();return Object.assign(e,r),e}call(e,r){return K(()=>{let o=[this.height,this.width];if(this.interpolation==="bilinear")return wr.resizeBilinear(e,o,!this.cropToAspectRatio);if(this.interpolation==="nearest")return wr.resizeNearestNeighbor(e,o,!this.cropToAspectRatio);throw new Error(`Interpolation is ${this.interpolation} but only ${[...MJ]} are supported`)})}}return n.className="Resizing",n})();he.registerClass(OJ);N();var FJ=(()=>{class n{constructor(e){this.seed=e}next(){if(this.seed!==void 0)return this.seed++}}return n.className="RandomSeed",n})();var PJ=(()=>{class n extends He{constructor(e){super(e),this.randomGenerator=new FJ(e.seed)}getConfig(){let e={seed:this.randomGenerator.seed},r=super.getConfig();return Object.assign(e,r),e}}return n.className="BaseRandomLayer",n})();N();var sOe=["bilinear","nearest"],$J=new Set(sOe),LJ=(()=>{class n extends PJ{constructor(e){super(e);let{factor:r,interpolation:o="bilinear"}=e;if(this.factor=r,Array.isArray(this.factor)&&this.factor.length===2)this.widthLower=this.factor[0],this.widthUpper=this.factor[1];else if(!Array.isArray(this.factor)&&this.factor>0)this.widthLower=-this.factor,this.widthUpper=this.factor;else throw new X(`Invalid factor: ${this.factor}. Must be positive number or tuple of 2 numbers`);if(this.widthLower<-1||this.widthUpper<-1)throw new X(`factor must have values larger than -1. Got: ${this.factor}`);if(this.widthUpper<this.widthLower)throw new X(`factor cannot have upper bound less than lower bound.
        Got upper bound: ${this.widthUpper}.
        Got lower bound: ${this.widthLower}
      `);if(o)if($J.has(o))this.interpolation=o;else throw new X(`Invalid interpolation parameter: ${o} is not implemented`)}getConfig(){let e={factor:this.factor,interpolation:this.interpolation},r=super.getConfig();return Object.assign(e,r),e}computeOutputShape(e){e=ct(e);let r=e[2];return[this.imgHeight,-1,r]}call(e,r){return K(()=>{let o=Ve(e);this.imgHeight=o.shape[o.shape.length-3];let s=o.shape[o.shape.length-2];this.widthFactor=is([1],1+this.widthLower,1+this.widthUpper,"float32",this.randomGenerator.next());let i=this.widthFactor.dataSync()[0]*s;i=Math.round(i);let a=[this.imgHeight,i];switch(this.interpolation){case"bilinear":return wr.resizeBilinear(e,a);case"nearest":return wr.resizeNearestNeighbor(e,a);default:throw new Error(`Interpolation is ${this.interpolation}
          but only ${[...$J]} are supported`)}})}}return n.className="RandomWidth",n})();he.registerClass(LJ);Ey();N();var gOe=ad(iw());N();var hOe=ad(iw());N();N();N();var hQt=Symbol("out"),mQt=Symbol("field"),gQt=Symbol("quote"),xQt=Symbol("quoteafterquote"),yQt=Symbol("quoteinquote");N();N();N();N();N();N();N();N();N();function ge(n,t){Array.isArray(n)||(n=[n]),n.forEach(e=>{e!=null&&C.assert(e.dtype!=="complex64",()=>`${t} does not support complex64 tensors in the CPU backend.`)})}var NOe=Jr.whereImpl,zJ=(()=>{class n extends cl{nextDataId(){return n.nextDataId++}constructor(){super(),this.blockSize=48,this.firstUse=!0,this.data=new ef(this,Ks())}write(e,r,o){this.firstUse&&(this.firstUse=!1,Y().get("IS_NODE")&&M.warn(`
============================
Hi, looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, visit https://github.com/tensorflow/tfjs-node for more details. 
============================`));let s={id:this.nextDataId()};return this.data.set(s,{values:e,dtype:o,refCount:1}),s}makeTensorInfo(e,r,o){let s;if(r==="string"&&o!=null&&o.length>0&&C.isString(o[0])){let i=o.map(a=>C.encodeString(a));s=this.write(i,e,r)}else s=this.write(o,e,r);return{dataId:s,shape:e,dtype:r}}refCount(e){return this.data.has(e)?this.data.get(e).refCount:0}incRef(e){let r=this.data.get(e);r.refCount++}decRef(e){if(this.data.has(e)){let r=this.data.get(e);r.refCount--}}move(e,r,o,s,i){this.data.set(e,{values:r,dtype:s,refCount:i})}numDataIds(){return this.data.numDataIds()}read(e){return ee(this,null,function*(){return this.readSync(e)})}readSync(e){let{dtype:r,complexTensorInfos:o}=this.data.get(e);if(r==="complex64"){let s=this.readSync(o.real.dataId),i=this.readSync(o.imag.dataId);return M.mergeRealAndImagArrays(s,i)}return C.convertBackendValuesAndArrayBuffer(this.data.get(e).values,r)}bufferSync(e){let r=this.readSync(e.dataId);if(e.dtype==="string")try{let o=r.map(s=>C.decodeString(s));return Pe(e.shape,e.dtype,o)}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return Pe(e.shape,e.dtype,r)}makeOutput(e,r,o){return Ks().makeTensorFromTensorInfo(this.makeTensorInfo(r,o,e),this)}disposeData(e,r=!1){if(this.data.has(e)){if(this.data.get(e).refCount--,!r&&this.data.get(e).refCount>0)return!1;let{complexTensorInfos:o}=this.data.get(e);o!=null&&(this.disposeData(o.real.dataId,!0),this.disposeData(o.imag.dataId,!0)),this.data.delete(e)}return!0}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}time(e){return ee(this,null,function*(){let r=C.now();return e(),{kernelMs:C.now()-r}})}memory(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}}where(e){ge([e],"where");let r=this.readSync(e.dataId);return NOe(e.shape,r)}dispose(){}floatPrecision(){return 32}epsilon(){return super.epsilon()}}return n.nextDataId=0,n})();var pL={};_t(pL,{addImpl:()=>$$,bincountImpl:()=>Vy,bincountReduceImpl:()=>sN,bitwiseAndImpl:()=>L$,castImpl:()=>P$,ceilImpl:()=>B$,concatImpl:()=>iN,equalImpl:()=>z$,expImpl:()=>U$,expm1Impl:()=>G$,floorDivImpl:()=>H$,floorImpl:()=>W$,gatherNdImpl:()=>aN,gatherV2Impl:()=>lN,greaterEqualImpl:()=>K$,greaterImpl:()=>q$,lessEqualImpl:()=>Y$,lessImpl:()=>X$,linSpaceImpl:()=>cN,logImpl:()=>Z$,maxImpl:()=>uN,maximumImpl:()=>Q$,minimumImpl:()=>J$,multiplyImpl:()=>qw,negImpl:()=>eL,notEqualImpl:()=>tL,prodImpl:()=>nL,raggedGatherImpl:()=>pN,raggedRangeImpl:()=>fN,raggedTensorToTensorImpl:()=>dN,rangeImpl:()=>hN,rsqrtImpl:()=>oL,scatterImpl:()=>Da,sigmoidImpl:()=>xee,simpleAbsImpl:()=>F$,sliceImpl:()=>iL,sparseFillEmptyRowsImpl:()=>mN,sparseReshapeImpl:()=>gN,sparseSegmentReductionImpl:()=>jy,sqrtImpl:()=>vee,squaredDifferenceImpl:()=>aL,staticRegexReplaceImpl:()=>lL,stridedSliceImpl:()=>xN,stringNGramsImpl:()=>yN,stringSplitImpl:()=>bN,stringToHashBucketFastImpl:()=>vN,subImpl:()=>uL,tileImpl:()=>wN,topKImpl:()=>CN,transposeImpl:()=>Uy,uniqueImpl:()=>IN});N();function F$(n){let t=new Float32Array(n.length);for(let e=0;e<n.length;++e)t[e]=Math.abs(n[e]);return t}var DOe=n=>{let{x:t}=n.inputs,e=n.backend;ge(t,"abs");let r=new Float32Array(C.sizeFromShape(t.shape)),o=e.data.get(t.dataId).values;return r=F$(o),e.makeOutput(r,t.shape,t.dtype)},VJ={kernelName:Wc,backendName:"cpu",kernelFunc:DOe};N();N();function wt(n){return(t,e,r,o,s)=>{let i=M.assertAndGetBroadcastShape(t,e),a=i.length,l=C.computeStrides(i),c=C.sizeFromShape(i),u=C.getTypedArrayFromDType(s,c),p=t.length,f=e.length,d=C.computeStrides(t),h=C.computeStrides(e),m=M.getBroadcastDims(t,i),g=M.getBroadcastDims(e,i);if(m.length+g.length===0)for(let x=0;x<u.length;++x)u[x]=n(r[x%r.length],o[x%o.length]);else for(let x=0;x<u.length;++x){let b=C.indexToLoc(x,a,l),w=b.slice(-p);m.forEach(A=>w[A]=0);let v=C.locToIndex(w,p,d),S=b.slice(-f);g.forEach(A=>S[A]=0);let k=C.locToIndex(S,f,h);u[x]=n(r[v],o[k])}return[u,i]}}N();N();N();N();function Ar(n){let{inputs:t,backend:e}=n,{real:r,imag:o}=t,s=e.data.get(r.dataId).values,i=e.data.get(o.dataId).values,a=e.makeTensorInfo(r.shape,"complex64"),l=e.data.get(a.dataId);return l.complexTensorInfos={real:e.makeTensorInfo(r.shape,"float32",s),imag:e.makeTensorInfo(o.shape,"float32",i)},a}var UJ={kernelName:Zd,backendName:"cpu",kernelFunc:Ar};function By(n,t,e="float32"){if(e==="complex64"){let o=By(n,t,"float32"),s=By(n,t,"float32");return Ar({inputs:{real:o,imag:s},backend:n})}let r=C.makeZerosTypedArray(C.sizeFromShape(t),e);return n.makeTensorInfo(t,e,r)}N();function uo(n){let{inputs:t,backend:e}=n,{x:r}=t;return e.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}var jJ={kernelName:Qi,backendName:"cpu",kernelFunc:uo};N();function Ri(n){let{inputs:t,backend:e}=n,{input:r}=t,o=e.data.get(r.dataId).complexTensorInfos.real,s=e.data.get(o.dataId).values;return e.makeTensorInfo(o.shape,o.dtype,s)}var GJ={kernelName:kh,backendName:"cpu",kernelFunc:Ri};function P$(n,t,e,r){if(r==="int32"){let o=Int32Array.from(n);return[t,"int32",o]}if(r==="bool"){let o=C.toTypedArray([0],e),[s,i]=wt((a,l)=>a!==l?1:0)(t,[],n,o,"bool");return[i,"bool",s]}throw new Error(`Error in Cast: failed to cast ${e} to ${r}`)}function Mi(n){let{inputs:t,backend:e,attrs:r}=n,{x:o}=t,{dtype:s}=r;if(s==="complex64"){if(o.dtype==="complex64")return uo({inputs:{x:o},backend:e});let u=By(e,o.shape,o.dtype),p=Mi({inputs:{x:o},backend:e,attrs:{dtype:"float32"}}),f=Ar({inputs:{real:p,imag:u},backend:e});return e.disposeIntermediateTensorInfo(u),e.disposeIntermediateTensorInfo(p),f}if(o.dtype==="complex64"){let u=Ri({inputs:{input:o},backend:e}),p=Mi({inputs:{x:u},backend:e,attrs:{dtype:s}});return e.disposeIntermediateTensorInfo(u),p}if(!C.hasEncodingLoss(o.dtype,s)){let u=uo({inputs:{x:o},backend:e});return{dataId:u.dataId,shape:u.shape,dtype:s}}let i=e.data.get(o.dataId).values,[a,l,c]=P$(i,o.shape,o.dtype,s);return e.makeTensorInfo(a,l,c)}var WJ={kernelName:Zi,backendName:"cpu",kernelFunc:Mi};function Nt(n,t,e,r){return e==null?({inputs:o,backend:s})=>{let{a:i,b:a}=o,l=s;ge([i,a],n);let c=l.data.get(i.dataId).values,u=l.data.get(a.dataId).values,p=i.dtype==="string"?M.fromUint8ToStringArray(c):c,f=i.dtype==="string"?M.fromUint8ToStringArray(u):u,d=r||i.dtype,[h,m]=t(i.shape,a.shape,p,f,d);return l.makeTensorInfo(m,d,h)}:({inputs:o,backend:s})=>{let{a:i,b:a}=o,l=s;if(i.dtype==="complex64"||a.dtype==="complex64"){let c=Mi({inputs:{x:i},backend:l,attrs:{dtype:"complex64"}}),u=l.data.get(c.dataId),p=u.complexTensorInfos.real,f=u.complexTensorInfos.imag,d=l.data.get(p.dataId).values,h=l.data.get(f.dataId).values,m=Mi({inputs:{x:a},backend:l,attrs:{dtype:"complex64"}}),g=l.data.get(m.dataId),x=g.complexTensorInfos.real,b=g.complexTensorInfos.imag,w=l.data.get(x.dataId).values,v=l.data.get(b.dataId).values,[S,k,A]=e(i.shape,a.shape,d,h,w,v),$=l.makeTensorInfo(A,"float32",S),L=l.makeTensorInfo(A,"float32",k),z=Ar({inputs:{real:$,imag:L},backend:l});return l.disposeIntermediateTensorInfo(c),l.disposeIntermediateTensorInfo(m),l.disposeIntermediateTensorInfo($),l.disposeIntermediateTensorInfo(L),z}else{let c=l.data.get(i.dataId).values,u=l.data.get(a.dataId).values,p=r||i.dtype,[f,d]=t(i.shape,a.shape,c,u,p);return l.makeTensorInfo(d,p,f)}}}function zy(n){return(t,e,r,o,s,i)=>{let a=M.assertAndGetBroadcastShape(t,e),l=C.sizeFromShape(a),c=a.length,u=C.computeStrides(a),p=C.getTypedArrayFromDType("float32",l),f=C.getTypedArrayFromDType("float32",l),d=M.getBroadcastDims(t,a),h=M.getBroadcastDims(e,a),m=M.mergeRealAndImagArrays(r,o),g=M.mergeRealAndImagArrays(s,i),x=t.length,b=C.computeStrides(t),w=e.length,v=C.computeStrides(e);if(d.length+h.length===0)for(let S=0;S<p.length;S++){let k=S%m.length,A=S%g.length,$=n(m[k*2],m[k*2+1],g[A*2],g[A*2+1]);p[S]=$.real,f[S]=$.imag}else for(let S=0;S<p.length;S++){let k=C.indexToLoc(S,c,u),A=k.slice(-x);d.forEach(Q=>A[Q]=0);let $=C.locToIndex(A,x,b),L=k.slice(-w);h.forEach(Q=>L[Q]=0);let z=C.locToIndex(L,w,v),W=n(m[$*2],m[$*2+1],g[z*2],g[z*2+1]);p[S]=W.real,f[S]=W.imag}return[p,f,a]}}var $$=wt((n,t)=>n+t),kOe=zy((n,t,e,r)=>({real:n+e,imag:t+r})),vc=Nt(gi,$$,kOe),HJ={kernelName:gi,backendName:"cpu",kernelFunc:vc};N();function Vy(n,t,e,r,o){let s=C.sizeFromShape(r),i=C.makeZerosTypedArray(o,e);for(let a=0;a<n.length;a++){let l=n[a];if(l<0)throw new Error("Input x must be non-negative!");l>=o||(s>0?i[l]+=t[a]:i[l]+=1)}return i}function sN(n,t,e,r=!1){let o=n.shape[0],s=n.shape[1],i=Pe([o,e],t.dtype);for(let a=0;a<o;a++)for(let l=0;l<s;l++){let c=n.get(a,l);if(c<0)throw new Error("Input x must be non-negative!");c>=e||(r?i.set(1,a,c):t.size>0?i.set(i.get(a,c)+t.get(a,l),a,c):i.set(i.get(a,c)+1,a,c))}return i}N();var L$=wt((n,t)=>n&t),_Oe=Nt(nf,L$),qJ={kernelName:nf,backendName:"cpu",kernelFunc:_Oe};N();N();function jr(n){return(t,e,r)=>{let o=C.getArrayFromDType(e,t.length);for(let s=0;s<t.length;++s)o[s]=n(t[s],r);return o}}N();function Ke(n,t,e){let r=jr(t);return ls(n,r,e)}function ls(n,t,e){return({inputs:r,attrs:o,backend:s})=>{let{x:i}=r;ge(i,n);let a=s,l=a.data.get(i.dataId).values,c;if(i.dtype==="string"){if(!Array.isArray(l))throw new Error("String tensor's value was not an instance of Array");c=M.fromUint8ToStringArray(l)}else c=l;let u=e||i.dtype,p=t(c,u,o);return a.makeTensorInfo(i.shape,u,p)}}var B$=jr(n=>Math.ceil(n)),AOe=ls(bl,B$),KJ={kernelName:bl,backendName:"cpu",kernelFunc:AOe};N();function iN(n,t,e,r){let o=C.getArrayFromDType(e,C.sizeFromShape(t));if(r&&e!=="string"){let s=0;n.forEach(i=>{let a=C.sizeFromShape(i.shape);o.set(i.vals,s),s+=a})}else{let s=0;n.forEach(i=>{let a=e==="string"?M.fromUint8ToStringArray(i.vals):i.vals,l=0;for(let c=0;c<i.shape[0];++c){let u=c*t[1]+s;for(let p=0;p<i.shape[1];++p)o[u+p]=a[l++]}s+=i.shape[1]})}return o}N();var z$=wt((n,t)=>n===t?1:0),V$=Nt(rf,z$,null,"bool"),XJ={kernelName:rf,backendName:"cpu",kernelFunc:V$};N();var U$=jr(n=>Math.exp(n)),j$=ls(El,U$,"float32"),YJ={kernelName:El,backendName:"cpu",kernelFunc:j$};N();var G$=jr(n=>Math.expm1(n)),ROe=ls(Nl,G$),ZJ={kernelName:Nl,backendName:"cpu",kernelFunc:ROe};N();var W$=jr(n=>Math.floor(n)),MOe=ls(Dl,W$),QJ={kernelName:Dl,backendName:"cpu",kernelFunc:MOe};N();var H$=wt((n,t)=>Math.floor(n/t)),OOe=Nt(kl,H$,null,"int32"),JJ={kernelName:kl,backendName:"cpu",kernelFunc:OOe};N();function aN(n,t,e,r,o,s,i,a,l){let c=Pe([r,s],e);for(let u=0;u<r;u++){let p=[],f=0;for(let d=0;d<o;d++){let h=n[u*o+d];f+=h*i[d],p.push(h)}if(f<0||f>=l/s)throw new Error(`Invalid indices: ${p} does not index into ${a}`);for(let d=0;d<s;d++)c.values[u*s+d]=t.get(...t.indexToLoc(f*s+d))}return c}N();function lN(n,t,e){let r=Pe(e,n.dtype);for(let o=0;o<r.size;++o){let i=r.indexToLoc(o).slice(),a=i[0],l=i[2],c=t.locToIndex([a,l]);i[2]=t.values[c];let u=n.locToIndex(i);0<=u&&u<n.values.length&&(r.values[o]=n.values[u])}return r}N();var q$=wt((n,t)=>n>t?1:0),FOe=Nt(of,q$,null,"bool"),eee={kernelName:of,backendName:"cpu",kernelFunc:FOe};N();var K$=wt((n,t)=>n>=t?1:0),POe=Nt(_l,K$,null,"bool"),tee={kernelName:_l,backendName:"cpu",kernelFunc:POe};N();var X$=wt((n,t)=>n<t?1:0),$Oe=Nt(sf,X$,null,"bool"),nee={kernelName:sf,backendName:"cpu",kernelFunc:$Oe};N();var Y$=wt((n,t)=>n<=t?1:0),LOe=Nt(af,Y$,null,"bool"),ree={kernelName:af,backendName:"cpu",kernelFunc:LOe};N();function cN(n,t,e){let r=(t-n)/(e-1),o=C.makeZerosTypedArray(e,"float32");o[0]=n;for(let s=1;s<o.length;s++)o[s]=o[s-1]+r;return o}N();var Z$=jr(n=>Math.log(n)),BOe=ls(Ol,Z$),oee={kernelName:Ol,backendName:"cpu",kernelFunc:BOe};N();function uN(n,t,e,r){let o=C.getTypedArrayFromDType(r,C.sizeFromShape(e));for(let s=0;s<o.length;++s){let i=s*t,a=n[i];for(let l=0;l<t;++l){let c=n[i+l];(Number.isNaN(c)||c>a)&&(a=c)}o[s]=a}return o}N();var Q$=wt((n,t)=>Math.max(n,t)),zOe=Nt(Pl,Q$),see={kernelName:Pl,backendName:"cpu",kernelFunc:zOe};N();var J$=wt((n,t)=>Math.min(n,t)),VOe=Nt($l,J$),iee={kernelName:$l,backendName:"cpu",kernelFunc:VOe};N();var qw=wt((n,t)=>n*t),UOe=zy((n,t,e,r)=>({real:n*e-t*r,imag:n*r+t*e})),Ym=Nt(Bl,qw,UOe),aee={kernelName:Bl,backendName:"cpu",kernelFunc:Ym};N();function eL(n,t,e){let r=C.createScalarValue(-1,e);return qw([],t,r,n,e)}function jOe(n){let{inputs:t,backend:e}=n,{x:r}=t;ge(r,"neg");let o=e.data.get(r.dataId).values,[s,i]=eL(o,r.shape,r.dtype);return e.makeTensorInfo(i,r.dtype,s)}var lee={kernelName:yu,backendName:"cpu",kernelFunc:jOe};N();var tL=wt((n,t)=>n!==t?1:0),GOe=Nt(pf,tL,null,"bool"),cee={kernelName:pf,backendName:"cpu",kernelFunc:GOe};N();N();N();function Uy(n,t,e,r,o){let s=t.length,i=C.sizeFromShape(t),a=C.computeStrides(t),l=C.computeStrides(o),c=C.getTypedArrayFromDType(e,C.sizeFromShape(o));for(let u=0;u<i;++u){let p=C.indexToLoc(u,s,a),f=new Array(p.length);for(let h=0;h<f.length;h++)f[h]=p[r[h]];let d=C.locToIndex(f,s,l);c[d]=n[u]}return c}function Gn(n){let{inputs:t,attrs:e,backend:r}=n,{x:o}=t,{perm:s}=e;ge(o,"transpose");let i=o.shape.length,a=new Array(i);for(let p=0;p<a.length;p++)a[p]=o.shape[s[p]];let l=r.data.get(o.dataId).values,c=Uy(l,o.shape,o.dtype,s,a);return{dataId:r.write(c,a,o.dtype),shape:a,dtype:o.dtype}}var uee={kernelName:ea,backendName:"cpu",kernelFunc:Gn};function nL(n,t,e,r){let[o,s]=M.computeOutAndReduceShapes(n,r),i=ar(t,"int32"),a=C.makeZerosTypedArray(C.sizeFromShape(o),i),l=C.sizeFromShape(s);for(let c=0;c<a.length;++c){let u=c*l,p=1;for(let f=0;f<l;++f)p*=e[u+f];a[c]=p}return{outVals:a,outShape:o,outDtype:i}}function WOe(n){let{inputs:t,backend:e,attrs:r}=n,{x:o}=t,{axis:s,keepDims:i}=r;ge(o,"prod");let a=o.shape.length,l=C.parseAxisParam(s,o.shape),c=M.getAxesPermutation(l,a),u=l,p=o,f=[];c!=null&&(p=Gn({inputs:{x:o},backend:e,attrs:{perm:c}}),f.push(p),u=M.getInnerMostAxes(u.length,a));let d=e.data.get(p.dataId).values,{outVals:h,outShape:m,outDtype:g}=nL(p.shape,p.dtype,d,u),x=m;return i&&(x=M.expandShapeToKeepDim(m,l)),f.forEach(b=>e.disposeIntermediateTensorInfo(b)),e.makeTensorInfo(x,g,h)}var pee={kernelName:Su,backendName:"cpu",kernelFunc:WOe};N();function HOe(n,t,e){n.forEach((r,o)=>{if(r<0||r>=e){let s=C.indexToLoc(o,t.length,C.computeStrides(t)).join(",");throw new Error(`indices[${s}] = ${r} is not in [0, ${e})`)}})}function qOe(n,t){for(let e=0;e<n.length;++e){let r=n[e],o=e===n.length-1?t:n[e+1].length;if(r.length===0)throw new Error("Ragged splits may not be empty");if(r[0]<0)throw new Error("Ragged splits must be non-negative");if(r[r.length-1]>o)throw new Error("Ragged splits must not point past values");for(let s=1;s<r.length;++s)if(r[s-1]>r[s])throw new Error("Ragged splits must be sorted in ascending order")}}function KOe(n,t,e,r){let o=[],s=0,i=t.length-1+e.length,a=new Array(i).fill(null).map(()=>[0]);qOe(e,r);let l=1;for(let c=0;c<t.length-1;++c){l*=t[c];let u=t[c+1];for(let p=1;p<l+1;++p)a[c].push(p*u)}for(let c=0;c<n.length;++c){let u=n[c],p=n[c]+1;for(let f=0;f<e.length;++f){let d=e[f],h=f+t.length-1;if(h>=0){let m=a[h],g=m[m.length-1]-d[u];for(let x=u;x<p;++x)a[h].push(d[x+1]+g)}u=d[u],p=d[p]}p!==u&&(o.push([u,p]),s+=p-u)}return{outSplits:a,valueSlices:o,numValues:s}}function XOe(n){let t=[];for(let e=0;e<n.length;++e){let r=n[e].length,o=C.getArrayFromDType("int32",r);t.push(o),n[e].forEach((s,i)=>o[i]=s)}return t}function fee(n,t){let e=n.slice(0,t);for(;e.length<t;)e.push(1);for(let r=t;r<n.length;r++)e[t-1]*=n[r];return e}function YOe(n,t,e,r,o,s){let i=fee(t,2)[1],a=fee(s,2)[1],l=0;for(let c of e)for(let u=c[0];u<c[1];++u){for(let p=0;p<r;++p)o[l*a+p]=n[u*i+p];++l}}function ZOe(n,t,e,r,o){let s=t.slice();s[0]=o;let i=C.getArrayFromDType(e,C.sizeFromShape(s)),a=n.length,l=a===0?0:a/t[0];return YOe(n,t,r,l,i,s),[i,s]}function pN(n,t,e,r,o,s,i,a){if(n.length===0)throw new Error("paramsNestedSplits must be non empty");if(t[0].length===0)throw new Error("Split tensors must not be scalars");let l=t[0][0]-1;if(HOe(s,i,l),r.length===0)throw new Error("params.rank must be nonzero");let c=r[0],{outSplits:u,valueSlices:p,numValues:f}=KOe(s,i,n,c),d=XOe(u),h=ZOe(e,r,o,p,f);return[d,h[0],h[1]]}N();var dee=2147483647;function fN(n,t,e,r,o,s,i){if(t.length>1)throw new Error("starts must be a scalar or vector");if(o.length>1)throw new Error("limits must be a scalar or vector");if(i.length>1)throw new Error("deltas must be a scalar or vector");let a=t.length===0,l=o.length===0,c=i.length===0,u=[];a||u.push(t[0]),l||u.push(o[0]),c||u.push(i[0]);for(let g=1;g<u.length;++g)if(u[g]!==u[g-1])throw new Error("starts, limits, and deltas must have the same shape");let p=u.length===0?1:u[0],f=C.getArrayFromDType("int32",p+1);f[0]=0;for(let g=0;g<p;++g){let x=a?n[0]:n[g],b=l?r[0]:r[g],w=c?s[0]:s[g];if(w===0)throw new Error("Requires delta != 0");let v;if(w>0&&b<x||w<0&&b>x)v=0;else if(v=Math.ceil(Math.abs((b-x)/w)),v>dee)throw new Error(`Requires ((limit - start) / delta) <= ${dee}`);f[g+1]=f[g]+v}let d=f[p],h=C.getArrayFromDType(e,d),m=0;for(let g=0;g<p;++g){let x=f[g+1]-f[g],b=a?n[0]:n[g],w=c?s[0]:s[g];for(let v=0;v<x;++v)h[m++]=b,b+=w}return[f,h]}N();var Oi=M.RowPartitionType,rL=class n{constructor(t,e,r,o,s,i,a,l,c,u){this.shape=t,this.shapeShape=e,this.values=r,this.valuesShape=o,this.valuesDType=s,this.defaultValue=i,this.defaultValueShape=a,this.rowPartitionValues=l,this.rowPartitionValuesShapes=c,this.rowPartitionTypes=M.getRowPartitionTypesHelper(u),this.raggedRank=M.getRaggedRank(this.rowPartitionTypes)}getRowPartitionTypeByDimension(t){return this.rowPartitionTypes[0]===Oi.FIRST_DIM_SIZE?this.rowPartitionTypes[t+1]:this.rowPartitionTypes[t]}getRowPartitionTensor(t){return this.rowPartitionTypes[0]===Oi.FIRST_DIM_SIZE?this.rowPartitionValues[t+1]:this.rowPartitionValues[t]}getMaxWidth(t){let e=this.getRowPartitionTensor(t-1);switch(this.getRowPartitionTypeByDimension(t-1)){case Oi.VALUE_ROWIDS:return n.getMaxWidthValueRowID(e);case Oi.ROW_SPLITS:return n.getMaxWidthRowSplit(e);default:throw new Error(`Cannot handle partition type ${Oi[this.getRowPartitionTypeByDimension(t-1)]}`)}}static getMaxWidthRowSplit(t){let e=t.length;if(e===0||e===1)return 0;let r=0;for(let o=0;o<e-1;++o){let s=t[o+1]-t[o];s>r&&(r=s)}return r}static getMaxWidthValueRowID(t){let e=t.length;if(e===0)return 0;let r=0,o=t[0],s=0;for(let i=1;i<e;++i){let a=t[i];a!==o&&(o=a,s=Math.max(i-r,s),r=i)}return Math.max(e-r,s)}tensorShapeFromTensor(t,e,r=!0){if(e.length===0){if(t[0]===-1)return[];throw new Error("The only valid scalar shape tensor is the fully unknown shape specified as -1.")}return mee(t,r)}calculateOutputSize(t){let e=this.valuesShape,r=this.defaultValueShape;M.validateDefaultValueShape(r,e);let o=this.tensorShapeFromTensor(this.shape,this.shapeShape),i=M.combineRaggedTensorToTensorShapes(this.raggedRank,o,e);i[0]<0&&(i[0]=t);for(let a=1;a<=this.raggedRank;++a)i[a]<0&&(i[a]=this.getMaxWidth(a));return i}calculateFirstParentOutputIndex(t,e,r){let o=Math.min(t,r),s=[],i=0;for(let a=0;a<o;++a,i+=e)s.push(i);for(let a=o;a<t;++a)s.push(-1);return C.assert(s.length===t,()=>"Final length of result must be equal to firstDimension."),s}calculateOutputIndexRowSplit(t,e,r,o){let s=t.length,i=[];for(let a=0;a<s-1;++a){let l=t[a+1]-t[a],c=Math.min(o,l),u=e[a];u===-1&&(c=0);for(let p=0;p<c;++p)i.push(u),u+=r;for(let p=0;p<l-c;++p)i.push(-1)}if(s>0&&i.length!==t[s-1])throw new Error("Invalid row split size.");return i}calculateOutputIndexValueRowID(t,e,r,o){let s=t.length,i=[];if(s===0)return[];let a=0,l=t[0];if(l>=e.length)throw new Error(`Got currentValueRowId=${l}, which is not less than ${e.length}`);let c=e[l];i.push(c);for(let u=1;u<s;++u){let p=t[u];if(p===l)c>=0&&(++a,a<o?c+=r:c=-1);else{if(a=0,l=p,p>=e.length)throw new Error(`Got nextValueRowId=${p} which is not less than ${e.length}`);c=e[p]}i.push(c)}if(i.length!==t.length)throw new Error("Invalid row ids.");return i}calculateOutputIndex(t,e,r,o){let s=this.getRowPartitionTensor(t),i=this.getRowPartitionTypeByDimension(t);switch(i){case Oi.VALUE_ROWIDS:return this.calculateOutputIndexValueRowID(s,e,r,o);case Oi.ROW_SPLITS:if(s.length-1>e.length)throw new Error(`Row partition size is greater than output size: ${s.length-1} > ${e.length}`);return this.calculateOutputIndexRowSplit(s,e,r,o);default:throw new Error(`Unsupported partition type: ${Oi[i]}`)}}getFirstDimensionSize(){let t=this.rowPartitionValues[0];if(this.rowPartitionTypes.length===0)throw new Error("No row_partition_types given.");let e=this.rowPartitionTypes[0];switch(e){case Oi.FIRST_DIM_SIZE:return t[0];case Oi.VALUE_ROWIDS:throw new Error("Cannot handle VALUE_ROWIDS in first dimension.");case Oi.ROW_SPLITS:return this.rowPartitionValuesShapes[0][0]-1;default:throw new Error(`Cannot handle type ${Oi[e]}`)}}compute(){if(this.rowPartitionValues[0].length<=0)throw new Error("Invalid first partition input. Tensor requires at least one element.");let e=this.getFirstDimensionSize(),r=this.calculateOutputSize(e),o=new Array(this.raggedRank+1);o[o.length-1]=1;for(let l=o.length-2;l>=0;--l)o[l]=o[l+1]*r[l+1];let s=mee(r,!1),i=C.getArrayFromDType(this.valuesDType,C.sizeFromShape(s));if(o[0]*r[0]>0){let l=this.calculateFirstParentOutputIndex(e,o[0],r[0]);for(let c=1;c<=this.raggedRank;++c)l=this.calculateOutputIndex(c-1,l,o[c],r[c]);this.setOutput(this.raggedRank,l,i,s)}return[s,i]}setOutput(t,e,r,o){if(r.length===0)return;let s=this.values,i=r,a=o.slice();a=a.slice(t+1);let l=C.sizeFromShape(a),c=e.length,u=this.defaultValue;if(u.length!==l&&u.length!==1){let h=this.defaultValueShape;K(()=>{let m=V(u,h);u=la(m,a).dataSync()})}let p=0,f=0,d=0;for(let h=0;h<=c;++h){let m=h<c?e[h]:-1;if(m===d){++d;continue}if(f<d){let g=s.subarray(p*l),x=i.subarray(f*l),b=(d-f)*l;hee(x,g,b)}if(h>=c){let g=r.length;m=Math.floor(g/l)}if(m>d)if(this.defaultValue.length===1)i.subarray(d*l,m*l).fill(this.defaultValue[0]),d=m;else for(;m>d;){let g=i.slice(d*l);hee(g,u,l),++d}m<0?(p=h+1,f=d):(p=h,f=d,d=f+1)}}};function hee(n,t,e){for(let r=0;r<e;r++)n[r]=t[r]}function mee(n,t){let e=[];for(let r of n){if(r<0){if(!t)throw new Error(`Dimension ${r} must be >= 0`);if(r<-1)throw new Error(`Dimension ${r} must be >= -1`);r=-1}e.push(r)}return e}function dN(n,t,e,r,o,s,i,a,l,c){return new rL(n,t,e,r,o,s,i,a,l,c).compute()}N();function hN(n,t,e,r){let o=n===t,s=n<t&&e<0,i=t<n&&e>1;if(o||s||i)return C.makeZerosTypedArray(0,r);let a=Math.abs(Math.ceil((t-n)/e)),l=C.makeZerosTypedArray(a,r);t<n&&e===1&&(e=-1),l[0]=n;for(let c=1;c<l.length;c++)l[c]=l[c-1]+e;return l}N();var oL=jr(n=>1/Math.sqrt(n)),QOe=ls(Wl,oL),gee={kernelName:Wl,backendName:"cpu",kernelFunc:QOe};N();function Da(n,t,e,r,o,s,i,a,l,c){let u=[r/o,o],p=n.values,f=t.values;if(r===0)return Pe(e,t.dtype);let d=l instanceof Pt?l:Pe(u,t.dtype);typeof l=="string"||typeof l=="number"?d.values.fill(l):typeof l=="boolean"&&d.values.fill(+l);for(let h=0;h<s;h++){let m=[],g=0;for(let x=0;x<i;x++){let b=p[h*i+x];m.push(b),g+=b*a[x]}if(g<0||g>=r/o)throw new Error(`Invalid indices: ${m} does not index into ${e}`);for(let x=0;x<o;x++)c?d.values[g*o+x]+=f[h*o+x]:d.values[g*o+x]=t.rank===0?f[0]:f[h*o+x]}return d}N();var xee=jr(n=>1/(1+Math.exp(-n))),sL=Ke(Yl,n=>1/(1+Math.exp(-n))),yee={kernelName:Yl,backendName:"cpu",kernelFunc:sL};N();function iL(n,t,e,r,o){let s=_r.isSliceContinous(r,t,e),i=C.sizeFromShape(e),a=C.computeStrides(r);if(s){let p=_r.computeFlatOffset(t,a);return o==="string"?n.slice(p,p+i):n.subarray(p,p+i)}let l=o==="string"?M.fromUint8ToStringArray(n):n,c=Pe(r,o,l),u=Pe(e,o);for(let p=0;p<u.size;++p){let f=u.indexToLoc(p),d=f.map((h,m)=>h+t[m]);u.set(c.get(...d),...f)}return o==="string"?M.fromStringArrayToUint8(u.values):u.values}function Fi(n){let{inputs:t,backend:e,attrs:r}=n,{x:o}=t,{begin:s,size:i}=r;ge(o,"slice");let[a,l]=_r.parseSliceParams(o,s,i);_r.assertParamsValid(o,a,l);let c=e.data.get(o.dataId).values,u=iL(c,a,l,o.shape,o.dtype);return e.makeTensorInfo(l,o.dtype,u)}var bee={kernelName:_u,backendName:"cpu",kernelFunc:Fi};N();function mN(n,t,e,r,o,s,i){let a=t[0],l=s[0],c=new Array(l),u=new Array(a),p=t[1];if(l===0){if(a!==0)throw new Error(M.getSparseFillEmptyRowsIndicesDenseShapeMismatch(a));let g=C.getArrayFromDType(e,0),x=C.getArrayFromDType(o,0);return[g,[0,p],x,c,u]}let f=!0,d=0,h=new Array(l).fill(0);for(let g=0;g<a;++g){let x=n[g*p];if(x<0)throw new Error(M.getSparseFillEmptyRowsNegativeIndexErrorMessage(g,x));if(x>=l)throw new Error(M.getSparseFillEmptyRowsOutOfRangeIndexErrorMessage(g,x,l));++h[x],f=f&&x>=d,d=x}let m=!0;for(let g=0;g<l;++g){let x=h[g]===0;c[g]=x,m=m&&!x,h[g]=Math.max(h[g],1),g>0&&(h[g]+=h[g-1])}if(m&&f){let g=n,x=r;for(let b=0;b<a;++b)u[b]=b;return[g,[a,p],x,c,u]}else{let g=h[l-1],x=C.getArrayFromDType(e,g*p),b=C.getArrayFromDType(o,g),w=new Array(l).fill(0);for(let v=0;v<a;++v){let S=n[v*p],k=w[S],A=(S===0?0:h[S-1])+k;w[S]++;for(let $=0;$<p;++$)x[A*p+$]=n[v*p+$];b[A]=r[v],u[v]=A}for(let v=0;v<l;++v)if(w[v]===0){let k=v===0?0:h[v-1];x[k*p+0]=v;for(let A=1;A<p;++A)x[k*p+A]=0;b[k]=i}return[x,[g,p],b,c,u]}}N();function gN(n,t,e,r,o){let s=C.sizeFromShape(r),i=t[0],a=o.length,l=[],c=1,u=-1;for(let g=0;g<a;++g){let x=o[g];if(x===-1){if(u!==-1)throw new Error(M.getSparseReshapeMultipleNegativeOneOutputDimErrorMessage(u,g));u=g,l.push(1)}else{if(x<0)throw new Error(M.getSparseReshapeNegativeOutputDimErrorMessage(g,x));c*=x,l.push(x)}}if(u!==-1){if(c<=0)throw new Error(M.getSparseReshapeEmptyTensorZeroOutputDimErrorMessage());let g=Math.trunc(s/c);if(c*g!==s)throw new Error(M.getSparseReshapeInputOutputMultipleErrorMessage(r,l));l[u]=g}if(C.sizeFromShape(l)!==s)throw new Error(M.getSparseReshapeInputOutputMismatchErrorMessage(r,l));let f=r.length,d=[];if(f>0){d[f-1]=1;for(let g=f-2;g>=0;--g)d[g]=d[g+1]*r[g+1]}let h=[];if(a>0){h[a-1]=1;for(let g=a-2;g>=0;--g)h[g]=h[g+1]*l[g+1]}let m=C.getArrayFromDType(e,i*a);for(let g=0;g<i;++g){let x=0;for(let b=0;b<f;++b)x+=n[g*f+b]*d[b];for(let b=0;b<a;++b)m[g*a+b]=Math.trunc(x/h[b]),x%=h[b]}return[m,[i,a],l]}N();function jy(n,t,e,r,o,s=!1,i=0){let a=r.length,l=[t[0],n.length/t[0]],c=l[1],p=a>0?o[a-1]+1:0;if(p<0)throw new Error(M.getSparseSegmentReductionNegativeSegmentIdsErrorMessage());let f=t.slice();f[0]=p;let d=f.reduce((w,v)=>w*v,1),h=C.getArrayFromDType(e,d);if(a===0)return p>0&&h.fill(i),[h,f];if(p<=0)throw new Error(M.getSparseSegmentReductionNegativeSegmentIdsErrorMessage());let m=0,g=1,x=0,b=o[m];for(;;){let w=0;if(g<a){if(w=o[g],b===w){++g;continue}if(b>=w)throw new Error(M.getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage())}if(b<0||b>=p)throw new Error(M.getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage(b,p));b>x&&h.fill(i,x*c,b*c);for(let v=m;v<g;++v){let S=r[v];if(S<0||S>=l[0])throw new Error(M.getSparseSegmentReductionIndicesOutOfRangeErrorMessage(v,r[v],l[0]));for(let k=0;k<c;k++)h[b*c+k]+=n[S*c+k]}if(s)for(let v=0;v<c;v++)h[b*c+v]/=g-m;if(m=g,++g,x=b+1,b=w,g>a)break}return x<p&&h.fill(i,x*c,p*c),[h,f]}N();var vee=jr(n=>Math.sqrt(n)),JOe=Ke(Ql,n=>Math.sqrt(n)),wee={kernelName:Ql,backendName:"cpu",kernelFunc:JOe};N();var aL=wt((n,t)=>{let e=n-t;return e*e}),eFe=Nt(Jl,aL),Cee={kernelName:Jl,backendName:"cpu",kernelFunc:eFe};N();var lL=jr((n,t)=>{let{pattern:e,replaceGlobal:r,rewrite:o}=t;return n.replace(new RegExp(e,r?"g":""),o)}),tFe=ls(ff,lL),Iee={kernelName:ff,backendName:"cpu",kernelFunc:tFe};N();function xN(n,t,e,r){let o=Pe(n,t.dtype);for(let s=0;s<o.size;s++){let i=o.indexToLoc(s),a=new Array(i.length);for(let l=0;l<a.length;l++)a[l]=i[l]*e[l]+r[l];o.set(t.get(...a),...i)}return o}N();var cL=class{constructor(t,e,r,o,s,i){this.separator=C.encodeString(t),this.nGramWidths=e,this.leftPad=C.encodeString(r),this.rightPad=C.encodeString(o),this.padWidth=s,this.preserveShort=i}getPadWidth(t){return Math.min(this.padWidth<0?t-1:this.padWidth,t-1)}getNumNGrams(t,e){let r=this.getPadWidth(e);return Math.max(0,t+2*r-e+1)}createNGrams(t,e,r,o,s,i){for(let a=0;a<s;++a){let l=this.getPadWidth(i),c=Math.max(0,l-a),u=Math.max(0,l-(s-(a+1))),p=i-(c+u),f=e+(c>0?0:a-l),d=0;d+=c*this.leftPad.length;for(let b=0;b<p;++b)d+=t[f+b].length;d+=u*this.rightPad.length;let h=c+u+p-1;d+=h*this.separator.length,r[o+a]=new Uint8Array(d);let m=r[o+a],g=0,x=b=>b.forEach(w=>m[g++]=w);for(let b=0;b<c;++b)x(this.leftPad),x(this.separator);for(let b=0;b<p-1;++b)x(t[f+b]),x(this.separator);if(p>0){x(t[f+p-1]);for(let b=0;b<u;++b)x(this.separator),x(this.rightPad)}else{for(let b=0;b<u-1;++b)x(this.rightPad),x(this.separator);x(this.rightPad)}}}compute(t,e){let r=t.length,o=e.length;if(o>0){let l=e[0];if(l!==0)throw new Error(`First split value must be 0, got ${l}`);for(let c=1;c<o;++c){let u=e[c]>=l;if(u=u&&e[c]<=r,!u)throw new Error(`Invalid split value ${e[c]}, must be in [${l}, ${r}]`);l=e[c]}if(l!==r)throw new Error(`Last split value must be data size. Expected ${r}, got ${l}`)}let s=o-1,i=C.getArrayFromDType("int32",o);if(r===0||o===0){let l=new Array(r);for(let c=0;c<=s;++c)i[c]=0;return[l,i]}i[0]=0;for(let l=1;l<=s;++l){let c=e[l]-e[l-1],u=0;this.nGramWidths.forEach(p=>{u+=this.getNumNGrams(c,p)}),this.preserveShort&&c>0&&u===0&&(u=1),i[l]=i[l-1]+u}let a=new Array(i[s]);for(let l=0;l<s;++l){let c=e[l],u=i[l];if(this.nGramWidths.forEach(p=>{let f=e[l+1]-e[l],d=this.getNumNGrams(f,p);this.createNGrams(t,c,a,u,d,p),u+=d}),this.preserveShort&&u===i[l]){let p=e[l+1]-e[l];if(p===0)continue;let f=p+2*this.padWidth;this.createNGrams(t,c,a,u,1,f)}}return[a,i]}};function yN(n,t,e,r,o,s,i,a){return new cL(e,r,o,s,i,a).compute(n,t)}N();function nFe(n,t,e,r){if(!n.length)return;if(t.length===0){for(let s=0;s<n.length;++s)r.push(n.subarray(s,s+1));return}if(t.length===1){let s=t[0],i=n.indexOf(s);for(;i!==-1;){let a=n.subarray(0,i);(!e||a.length!==0)&&r.push(a),n=n.subarray(i+1),i=n.indexOf(s)}(!e||n.length!==0)&&r.push(n);return}let o=0;for(let s=0;s<n.length+1;s++)if(s===n.length||t.indexOf(n[s])!==-1){let i=n.subarray(o,s);(!e||i.length!==0)&&r.push(i),o=s+1}}function bN(n,t,e){let r=n.length,o=[],s=0,i=0,a=new Array(r);for(let f=0;f<r;++f){let d=o.length;nFe(n[f],t,e,o);let h=o.length-d;a[f]=h,s+=h,i=Math.max(i,h)}let l=C.getArrayFromDType("int32",s*2),c=new Array(s),u=[r,i],p=0;for(let f=0;f<r;++f)for(let d=0;d<a[f];++d)l[p*2]=f,l[p*2+1]=d,c[p]=o[p],++p;return[l,c,u]}N();function vN(n,t){let e=C.getArrayFromDType("int32",n.length);for(let r=0;r<n.length;++r)e[r]=C.fingerPrint64(n[r]).modulo(t).getLowBitsUnsigned();return e}N();var uL=wt((n,t)=>n-t),rFe=zy((n,t,e,r)=>({real:n-e,imag:t-r})),Kw=Nt(ec,uL,rFe),See={kernelName:ec,backendName:"cpu",kernelFunc:Kw};N();function wN(n,t){let e=new Array(n.rank);for(let o=0;o<e.length;o++)e[o]=n.shape[o]*t[o];let r=Pe(e,n.dtype);for(let o=0;o<r.values.length;++o){let s=r.indexToLoc(o),i=new Array(n.rank);for(let l=0;l<i.length;l++)i[l]=s[l]%n.shape[l];let a=n.locToIndex(i);r.values[o]=n.values[a]}return r}N();var Xw=(n,t)=>{let e=t.value-n.value;return e===0?n.index-t.index:e};function Tee(n,t,e=0,r=n.length-1){for(;r>e;){if(r-e>600){let a=r-e+1,l=t-e+1,c=Math.log(a),u=.5*Math.exp(2*c/3),p=.5*Math.sqrt(c*u*(a-u)/a)*Math.sign(l-a/2),f=Math.max(e,Math.floor(t-l*u/a+p)),d=Math.min(r,Math.floor(t+(a-l)*u/a+p));Tee(n,t,f,d)}let o=n[t],s=e,i=r;for(C.swap(n,e,t),Xw(n[r],o)>0&&C.swap(n,e,r);s<i;){for(C.swap(n,s,i),s++,i--;Xw(n[s],o)<0;)s=s+1;for(;Xw(n[i],o)>0;)i=i-1}Xw(n[e],o)===0?C.swap(n,e,i):(i=i+1,C.swap(n,i,r)),i<=t&&(e=i+1),t<=i&&(r=i-1)}}function CN(n,t,e,r,o){let s=t[t.length-1],[i,a]=[n.length/s,s],l=C.getTypedArrayFromDType(e,i*r),c=C.getTypedArrayFromDType("int32",i*r);for(let p=0;p<i;p++){let f=p*a,d=n.subarray(f,f+a),h=new Array(d.length);d.forEach((b,w)=>h[w]={value:b,index:w}),r<h.length&&(Tee(h,r),h=h.slice(0,r)),o&&h.sort(Xw);let m=p*r,g=l.subarray(m,m+r),x=c.subarray(m,m+r);for(let b=0;b<r;b++)g[b]=h[b].value,x[b]=h[b].index}let u=t.slice();return u[u.length-1]=r,[Pe(u,e,l),Pe(u,"int32",c)]}N();function IN(n,t,e,r){let o=C.parseAxisParam(t,e)[0],s=[1,e[0],1];for(let h=0;h<o;h++)s[0]*=e[h];s[1]=e[o];for(let h=o+1;h<e.length;h++)s[2]*=e[h];let i=new Map,a=new Int32Array(e[o]),l=new Pt(s,r,n),c=[],u=s[0]===1&&s[2]===1;for(let h=0;h<e[o];h++){let m;if(u)m=n[h].toString();else{let x=[];for(let b=0;b<s[0];b++)for(let w=0;w<s[2];w++)x.push(l.get(b,h,w));m=x.join(",")}let g=i.get(m);if(g!=null)a[h]=g;else{let x=i.size;i.set(m,x),a[h]=x,c.push(h)}}let p=s.slice();p[1]=i.size;let f=new Pt(p,r);c.forEach((h,m)=>{for(let g=0;g<s[0];g++)for(let x=0;x<s[2];x++)f.set(l.get(g,h,x),g,m,x)});let d=e.slice();return d[o]=p[1],{outputValues:f.values,outputShape:d,indices:a}}r0("cpu",()=>new zJ,1);N();N();N();var fL=Ke(Sl,n=>n>=0?n:Math.exp(n)-1),Eee={kernelName:Sl,backendName:"cpu",kernelFunc:fL};N();function dL(n){let{inputs:t,backend:e,attrs:r}=n,{x:o}=t,{alpha:s}=r;ge([o],"leakyRelu");let i=C.sizeFromShape(o.shape),a=e.data.get(o.dataId).values,l=C.getTypedArrayFromDType("float32",i);for(let c=0;c<a.length;c++)l[c]=a[c]<0?s*a[c]:a[c];return e.makeTensorInfo(o.shape,"float32",l)}var Nee={kernelName:uu,backendName:"cpu",kernelFunc:dL};N();var oFe=wt((n,t)=>n<0?t*n:n);function hL(n){let{inputs:t,backend:e}=n,{x:r,alpha:o}=t;ge([r,o],"prelu");let s=e.data.get(r.dataId).values,i=e.data.get(o.dataId).values,[a,l]=oFe(r.shape,o.shape,s,i,"float32");return e.makeTensorInfo(l,"float32",a)}var Dee={kernelName:Iu,backendName:"cpu",kernelFunc:hL};N();var mL=Ke(Ul,n=>Math.max(0,n)),kee={kernelName:Ul,backendName:"cpu",kernelFunc:mL};N();var gL=Ke(jl,n=>Math.min(Math.max(0,n),6)),_ee={kernelName:jl,backendName:"cpu",kernelFunc:gL};function Zm(n,t,e,r,o){if(e==="linear")return uo({inputs:{x:t},backend:n});if(e==="relu")return mL({inputs:{x:t},backend:n});if(e==="elu")return fL({inputs:{x:t},backend:n});if(e==="relu6")return gL({inputs:{x:t},backend:n});if(e==="prelu")return hL({inputs:{x:t,alpha:r},backend:n});if(e==="leakyrelu")return dL({inputs:{x:t},backend:n,attrs:{alpha:o}});if(e==="sigmoid")return sL({inputs:{x:t},backend:n});throw new Error(`Activation ${e} has not been implemented for the CPU backend.`)}N();N();function Ct(n){let{inputs:t,backend:e,attrs:r}=n,{x:o}=t,{shape:s}=r,i=C.sizeFromShape(o.shape),a=C.inferFromImplicitShape(s,i),l=C.sizeFromShape(a);C.assert(i===l,()=>`The new shape (${a}) has ${l} elements and the old shape (${o.shape}) has ${i} elements. The new shape and old shape must have the same number of elements.`),e.incRef(o.dataId);let c=e.data.get(o.dataId);if(c.complexTensorInfos!=null){let u=c.complexTensorInfos.real,p=c.complexTensorInfos.imag;u.shape=a,p.shape=a}return{dataId:o.dataId,shape:a,dtype:o.dtype}}var Aee={kernelName:Tu,backendName:"cpu",kernelFunc:Ct};function xL(n){let{inputs:t,backend:e,attrs:r}=n,{a:o,b:s}=t,{transposeA:i,transposeB:a}=r;ge([o,s],"matMul");let l=o.shape.length,c=s.shape.length,u=i?o.shape[l-2]:o.shape[l-1],p=a?s.shape[c-1]:s.shape[c-2],f=i?o.shape[l-1]:o.shape[l-2],d=a?s.shape[c-2]:s.shape[c-1],h=o.shape.slice(0,-2),m=s.shape.slice(0,-2),g=C.sizeFromShape(h),x=C.sizeFromShape(m),w=os.assertAndGetBroadcastShape(o.shape.slice(0,-2),s.shape.slice(0,-2)).concat([f,d]);C.assert(u===p,()=>`Error in matMul: inner shapes (${u}) and (${p}) of Tensors with shapes ${o.shape} and ${s.shape} and transposeA=${i} and transposeB=${a} must match.`);let v=i?[g,u,f]:[g,f,u],S=a?[x,d,p]:[x,p,d],k=Ct({inputs:{x:o},backend:e,attrs:{shape:v}}),A=Ct({inputs:{x:s},backend:e,attrs:{shape:S}}),$=i?k.shape[1]:k.shape[2],L=i?k.shape[2]:k.shape[1],z=a?A.shape[1]:A.shape[2],W=Math.max(g,x),Q=e.data.get(k.dataId).values,ne=e.data.get(A.dataId).values,se=C.computeStrides(k.shape),te=C.computeStrides(A.shape),[ie,le,pe]=i?[se[0],1,se[1]]:[se[0],se[1],1],[me,ve,we]=a?[1,te[1],te[0]]:[te[1],1,te[0]],Se=L*z,Ce=Pe([W,L,z],k.dtype),De=Ce.values,Ne=e.blockSize;for(let Re=0;Re<W;Re++){let qe=Re%g,nt=Re%x;for(let Qe=0;Qe<L;Qe+=Ne){let xt=Math.min(Qe+Ne,L);for(let ht=0;ht<z;ht+=Ne){let en=Math.min(ht+Ne,z);for(let mt=0;mt<$;mt+=Ne){let Dt=Math.min(mt+Ne,$);for(let mn=Qe;mn<xt;mn++)for(let cn=ht;cn<en;cn++){let On=0;for(let Sn=mt;Sn<Dt;Sn++){let si=Q[qe*ie+mn*le+Sn*pe],Ir=ne[Sn*me+cn*ve+nt*we];On+=si*Ir}De[Re*Se+(mn*z+cn)]+=On}}}}}return e.disposeIntermediateTensorInfo(k),e.disposeIntermediateTensorInfo(A),e.makeTensorInfo(w,Ce.dtype,Ce.values)}var Ree={kernelName:Zc,backendName:"cpu",kernelFunc:xL};function sFe(n){let{inputs:t,backend:e,attrs:r}=n,{a:o,b:s,bias:i,preluActivationWeights:a}=t,{transposeA:l,transposeB:c,activation:u,leakyreluAlpha:p}=r,f,d,h,m=[];f=xL({inputs:{a:o,b:s},attrs:{transposeA:l,transposeB:c},backend:e}),i&&(d=vc({inputs:{a:f,b:i},backend:e}),m.push(f),f=d),u&&(h=Zm(e,f,u,a,p),m.push(f),f=h);for(let x of m)e.disposeIntermediateTensorInfo(x);return f}var Mee={kernelName:df,backendName:"cpu",kernelFunc:sFe};N();var iFe=Ke(fl,n=>Math.acos(n)),Oee={kernelName:fl,backendName:"cpu",kernelFunc:iFe};N();var aFe=Ke(dl,n=>Math.acosh(n)),Fee={kernelName:dl,backendName:"cpu",kernelFunc:aFe};N();function lFe(n){let{inputs:t,backend:e}=n,r=t;ge(t,"addN");let o=r.map(a=>e.data.get(a.dataId).values),s=Pe(r[0].shape,r[0].dtype),i=s.values;for(let a=0;a<r.length;a++){let l=o[a];for(let c=0;c<i.length;c++)i[c]+=l[c]}return e.makeTensorInfo(s.shape,s.dtype,s.values)}var Pee={kernelName:Hc,backendName:"cpu",kernelFunc:lFe};N();function cFe(n){let{inputs:t,backend:e,attrs:r}=n,{x:o}=t,{axis:s,keepDims:i}=r;ge(o,"all");let a=C.parseAxisParam(s,o.shape),l=a,c=M.getAxesPermutation(l,o.shape.length),u=o;c!=null&&(u=Gn({inputs:{x:o},backend:e,attrs:{perm:c}}),l=M.getInnerMostAxes(l.length,o.shape.length)),M.assertAxesAreInnerMostDims("all",l,u.shape.length);let[p,f]=M.computeOutAndReduceShapes(u.shape,l),d=C.sizeFromShape(f),h=C.makeZerosTypedArray(C.sizeFromShape(p),u.dtype),m=e.data.get(u.dataId).values;for(let x=0;x<h.length;++x){let b=x*d,w=m[b];for(let v=0;v<d;++v){let S=m[b+v];w=w&&S}h[x]=w}c!=null&&e.disposeIntermediateTensorInfo(u);let g=e.makeTensorInfo(p,u.dtype,h);if(i){let x=M.expandShapeToKeepDim(p,a),b=Ct({inputs:{x:g},backend:e,attrs:{shape:x}});return e.disposeIntermediateTensorInfo(g),b}return g}var $ee={kernelName:Wd,backendName:"cpu",kernelFunc:cFe};N();function uFe(n){let{inputs:t,backend:e,attrs:r}=n,{x:o}=t,{axis:s,keepDims:i}=r;ge(o,"any");let a=C.parseAxisParam(s,o.shape),l=a,c=M.getAxesPermutation(l,o.shape.length),u=o;c!=null&&(u=Gn({inputs:{x:o},backend:e,attrs:{perm:c}}),l=M.getInnerMostAxes(l.length,o.shape.length)),M.assertAxesAreInnerMostDims("any",l,u.shape.length);let[p,f]=M.computeOutAndReduceShapes(u.shape,l),d=C.sizeFromShape(f),h=C.makeZerosTypedArray(C.sizeFromShape(p),u.dtype),m=e.data.get(u.dataId).values;for(let x=0;x<h.length;++x){let b=x*d,w=m[b];for(let v=0;v<d;++v){let S=m[b+v];w=w||S}h[x]=w}c!=null&&e.disposeIntermediateTensorInfo(u);let g=e.makeTensorInfo(p,u.dtype,h);if(i){let x=M.expandShapeToKeepDim(p,a),b=Ct({inputs:{x:g},backend:e,attrs:{shape:x}});return e.disposeIntermediateTensorInfo(g),b}return g}var Lee={kernelName:Hd,backendName:"cpu",kernelFunc:uFe};N();function pFe(n){let{inputs:t,backend:e,attrs:r}=n,{x:o}=t,{axis:s}=r;ge(o,"argMax");let i=C.parseAxisParam(s,o.shape),a=M.getAxesPermutation(i,o.shape.length),l=o,c=[];a!=null&&(l=Gn({inputs:{x:o},backend:e,attrs:{perm:a}}),c.push(l),i=M.getInnerMostAxes(i.length,l.shape.length)),i=[i[0]],M.assertAxesAreInnerMostDims("argMax",i,l.shape.length);let[u,p]=M.computeOutAndReduceShapes(l.shape,i),f=C.sizeFromShape(u),d=C.makeZerosTypedArray(f,"int32"),h=C.sizeFromShape(p),m=e.data.get(l.dataId).values;for(let g=0;g<d.length;++g){let x=g*h,b=m[x],w=0;for(let v=0;v<h;++v){let S=m[x+v];S>b&&(b=S,w=v)}d[g]=w}return c.forEach(g=>e.disposeIntermediateTensorInfo(g)),e.makeTensorInfo(u,"int32",d)}var Bee={kernelName:qc,backendName:"cpu",kernelFunc:pFe};N();function fFe(n){let{inputs:t,backend:e,attrs:r}=n,{x:o}=t,{axis:s}=r;ge(o,"argMin");let i=C.parseAxisParam(s,o.shape),a=M.getAxesPermutation(i,o.shape.length),l=o,c=[];a!=null&&(l=Gn({inputs:{x:o},backend:e,attrs:{perm:a}}),c.push(l),i=M.getInnerMostAxes(i.length,l.shape.length)),i=[i[0]],M.assertAxesAreInnerMostDims("argMin",i,l.shape.length);let[u,p]=M.computeOutAndReduceShapes(l.shape,i),f=C.sizeFromShape(u),d=C.makeZerosTypedArray(f,"int32"),h=C.sizeFromShape(p),m=e.data.get(l.dataId).values;for(let g=0;g<d.length;++g){let x=g*h,b=m[x],w=0;for(let v=0;v<h;++v){let S=m[x+v];S<b&&(b=S,w=v)}d[g]=w}return c.forEach(g=>e.disposeIntermediateTensorInfo(g)),e.makeTensorInfo(u,"int32",d)}var zee={kernelName:Kc,backendName:"cpu",kernelFunc:fFe};N();var dFe=Ke(hl,n=>Math.asin(n)),Vee={kernelName:hl,backendName:"cpu",kernelFunc:dFe};N();var hFe=Ke(ml,n=>Math.asinh(n)),Uee={kernelName:ml,backendName:"cpu",kernelFunc:hFe};N();var mFe=Ke(gl,n=>Math.atan(n)),jee={kernelName:gl,backendName:"cpu",kernelFunc:mFe};N();var gFe=wt((n,t)=>Math.atan2(n,t)),xFe=Nt(yl,gFe),Gee={kernelName:yl,backendName:"cpu",kernelFunc:xFe};N();var yFe=Ke(xl,n=>Math.atanh(n)),Wee={kernelName:xl,backendName:"cpu",kernelFunc:yFe};N();N();function Gy(n,t,e,r,o,s){let i=o.strideHeight,a=o.strideWidth,l=o.dilationHeight,c=o.dilationWidth,u=o.effectiveFilterHeight,p=o.effectiveFilterWidth,f=o.padInfo.top,d=o.padInfo.left,h=s==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,m=Pe(o.outShape,e),g=m.values,x=o.outShape[1]*o.outShape[2]*o.outShape[3],b=o.outShape[2]*o.outShape[3],w=o.outShape[3];for(let v=0;v<o.batchSize;++v){let S=v*x,k=v*r[0];for(let A=0;A<o.inChannels;++A)for(let $=0;$<o.outHeight;++$){let L=$*i-f,z=Math.max(0,L),W=Math.min(o.inHeight,u+L),Q=S+$*b;for(let ne=0;ne<o.outWidth;++ne){let se=ne*a-d,te=Math.max(0,se),ie=Math.min(o.inWidth,p+se),le=h,pe=0,me=0;for(let we=z;we<W;we+=l){let Se=k+we*r[1];for(let Ce=te;Ce<ie;Ce+=c){let De=Se+Ce*r[2],Ne=n[De+A];s==="max"&&Ne>le?le=Ne:s==="avg"&&(pe+=Ne,me++)}if(isNaN(le))break}let ve=Q+ne*w+A;g[ve]=s==="avg"?pe/me:le}}}return m}function SN(n,t,e,r,o=!1,s=!1){let i=Pe(r.outShape,"int32"),a=r.strideHeight,l=r.strideWidth,c=r.dilationHeight,u=r.dilationWidth,p=r.effectiveFilterHeight,f=r.effectiveFilterWidth,d=r.padInfo.top,h=r.padInfo.left,m=Pe(t,e,n);for(let g=0;g<r.batchSize;++g)for(let x=0;x<r.inChannels;++x)for(let b=0;b<r.outHeight;++b){let w=b*a-d,v=w;for(;v<0;)v+=c;let S=Math.min(r.inHeight,p+w);for(let k=0;k<r.outWidth;++k){let A=k*l-h,$=A;for(;$<0;)$+=u;let L=Math.min(r.inWidth,f+A),z=Number.NEGATIVE_INFINITY,W=-1;for(let Q=v;Q<S;Q+=c){let ne=Q-w;for(let se=$;se<L;se+=u){let te=se-A,ie=m.get(g,Q,se,x);ie>z&&(z=ie,o?W=s?((g*r.inHeight+Q)*r.inWidth+se)*r.inChannels+x:(Q*r.inWidth+se)*r.inChannels+x:W=ne*f+te)}}i.set(W,g,b,k,x)}}return i}function TN(n,t,e,r,o,s){let i=o.strideDepth,a=o.strideHeight,l=o.strideWidth,c=o.dilationDepth,u=o.dilationHeight,p=o.dilationWidth,f=o.effectiveFilterDepth,d=o.effectiveFilterHeight,h=o.effectiveFilterWidth,m=o.padInfo.front,g=o.padInfo.top,x=o.padInfo.left,b=s==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,w=Pe(o.outShape,e),v=w.values,S=o.outShape[1]*o.outShape[2]*o.outShape[3]*o.outShape[4],k=o.outShape[2]*o.outShape[3]*o.outShape[4],A=o.outShape[3]*o.outShape[4],$=o.outShape[4];for(let L=0;L<o.batchSize;++L){let z=L*S,W=L*r[0];for(let Q=0;Q<o.inChannels;++Q)for(let ne=0;ne<o.outDepth;++ne){let se=ne*i-m,te=se;for(;te<0;)te+=c;let ie=Math.min(o.inDepth,f+se),le=z+ne*k;for(let pe=0;pe<o.outHeight;++pe){let me=pe*a-g,ve=me;for(;ve<0;)ve+=u;let we=Math.min(o.inHeight,d+me),Se=le+pe*A;for(let Ce=0;Ce<o.outWidth;++Ce){let De=Ce*l-x,Ne=De;for(;Ne<0;)Ne+=p;let Re=Math.min(o.inWidth,h+De),qe=Se+Ce*$,nt=b,Qe=0,xt=0;for(let en=te;en<ie;en+=c){let mt=W+en*r[1];for(let Dt=ve;Dt<we;Dt+=u){let mn=mt+Dt*r[2];for(let cn=Ne;cn<Re;cn+=p){let On=mn+cn*r[3],Sn=n[On+Q];if(s==="max"&&Sn>nt?nt=Sn:s==="avg"&&(Qe+=Sn,xt++),isNaN(nt))break}if(isNaN(nt))break}if(isNaN(nt))break}let ht=qe+Q;v[ht]=s==="avg"?Qe/Math.max(xt,1):nt}}}}return w}function Hee(n,t){let e=Pe(t.outShape,"int32"),r=t.strideDepth,o=t.strideHeight,s=t.strideWidth,i=t.dilationDepth,a=t.dilationHeight,l=t.dilationWidth,c=t.effectiveFilterDepth,u=t.effectiveFilterHeight,p=t.effectiveFilterWidth,f=t.padInfo.front,d=t.padInfo.top,h=t.padInfo.left;for(let m=0;m<t.batchSize;++m)for(let g=0;g<t.inChannels;++g)for(let x=0;x<t.outDepth;++x){let b=x*r-f,w=b;for(;w<0;)w+=i;let v=Math.min(t.inDepth,c+b);for(let S=0;S<t.outHeight;++S){let k=S*o-d,A=k;for(;A<0;)A+=a;let $=Math.min(t.inHeight,u+k);for(let L=0;L<t.outWidth;++L){let z=L*s-h,W=z;for(;W<0;)W+=l;let Q=Math.min(t.inWidth,p+z),ne=Number.NEGATIVE_INFINITY,se=-1;for(let te=w;te<v;te+=i){let ie=te-b;for(let le=A;le<$;le+=a){let pe=le-k;for(let me=W;me<Q;me+=l){let ve=me-z,we=n.get(m,te,le,me,g);we>=ne&&(ne=we,se=ie*u*p+pe*u+ve)}}}e.set(se,m,x,S,L,g)}}}return e}function bFe(n){let{inputs:t,backend:e,attrs:r}=n,{x:o}=t;ge(o,"avgPool");let{filterSize:s,strides:i,pad:a,dimRoundingMode:l}=r,c=1;C.assert(M.eitherStridesOrDilationsAreOne(i,c),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${i} and dilations '${c}'`);let u=M.computePool2DInfo(o.shape,s,i,c,a,l),p;if(u.filterWidth===1&&u.filterHeight===1&&C.arraysEqual(u.inShape,u.outShape))p=uo({inputs:{x:o},backend:e});else{let f=e.data.get(o.dataId).values,d=C.computeStrides(o.shape),h=Gy(f,o.shape,o.dtype,d,u,"avg");p=e.makeTensorInfo(u.outShape,o.dtype,h.values)}return p}var qee={kernelName:Xc,backendName:"cpu",kernelFunc:bFe};N();function vFe(n){let{inputs:t,backend:e,attrs:r}=n,{x:o}=t,{filterSize:s,strides:i,pad:a,dimRoundingMode:l,dataFormat:c}=r;ge(o,"avgPool3d");let u=M.computePool3DInfo(o.shape,s,i,1,a,l,c),p=e.data.get(o.dataId).values,f=TN(p,o.shape,o.dtype,C.computeStrides(o.shape),u,"avg");return e.makeTensorInfo(f.shape,"float32",f.values)}var Kee={kernelName:Yc,backendName:"cpu",kernelFunc:vFe};N();function wFe(n){let{inputs:t,backend:e,attrs:r}=n,{dy:o,input:s}=t,{filterSize:i,strides:a,pad:l,dimRoundingMode:c}=r;ge([o,s],"avgPool3DGrad");let u=M.computePool3DInfo(s.shape,i,a,1,l,c),p=u.strideDepth,f=u.strideHeight,d=u.strideWidth,h=u.filterDepth,m=u.filterHeight,g=u.filterWidth,x=u.dilationDepth,b=u.dilationHeight,w=u.dilationWidth,v=u.effectiveFilterDepth,S=u.effectiveFilterHeight,k=u.effectiveFilterWidth,A=v-1-u.padInfo.front,$=k-1-u.padInfo.left,L=S-1-u.padInfo.top,z=Pe(s.shape,"float32"),W=1/(h*m*g),Q=e.bufferSync(o);for(let ne=0;ne<u.batchSize;++ne)for(let se=0;se<u.inChannels;++se)for(let te=0;te<u.inDepth;++te)for(let ie=0;ie<u.inHeight;++ie)for(let le=0;le<u.inWidth;++le){let pe=te-A,me=ie-L,ve=le-$,we=0;for(let Se=0;Se<v;Se+=x){let Ce=(pe+Se)/p;if(!(Ce<0||Ce>=u.outDepth||Math.floor(Ce)!==Ce))for(let De=0;De<S;De+=b){let Ne=(me+De)/f;if(!(Ne<0||Ne>=u.outHeight||Math.floor(Ne)!==Ne))for(let Re=0;Re<k;Re+=w){let qe=(ve+Re)/d;if(qe<0||qe>=u.outWidth||Math.floor(qe)!==qe)continue;let nt=Q.get(ne,Ce,Ne,qe,se);we+=nt}}}z.set(we*W,ne,te,ie,le,se)}return e.makeTensorInfo(z.shape,z.dtype,z.values)}var Xee={kernelName:Kd,backendName:"cpu",kernelFunc:wFe};N();function CFe(n){let{inputs:t,backend:e,attrs:r}=n,{dy:o,input:s}=t,i=s;ge([o,s],"avgPoolGrad");let{filterSize:a,strides:l,pad:c}=r,u=M.computePool2DInfo(i.shape,a,l,1,c),p=u.strideHeight,f=u.strideWidth,d=u.filterHeight,h=u.filterWidth,m=u.dilationHeight,g=u.dilationWidth,x=u.effectiveFilterHeight,b=u.effectiveFilterWidth,w=b-1-u.padInfo.left,v=x-1-u.padInfo.top,S=Pe(i.shape,"float32"),k=1/(d*h),A=e.data.get(o.dataId).values,$=Pe(o.shape,"float32",A);for(let L=0;L<u.batchSize;++L)for(let z=0;z<u.inChannels;++z)for(let W=0;W<u.inHeight;++W)for(let Q=0;Q<u.inWidth;++Q){let ne=W-v,se=Q-w,te=0;for(let ie=0;ie<x;ie+=m){let le=(ne+ie)/p;if(!(le<0||le>=u.outHeight||Math.floor(le)!==le))for(let pe=0;pe<b;pe+=g){let me=(se+pe)/f;if(me<0||me>=u.outWidth||Math.floor(me)!==me)continue;let ve=$.get(L,le,me,z);te+=ve}}S.set(te*k,L,W,Q,z)}return e.makeTensorInfo(S.shape,S.dtype,S.values)}var Yee={kernelName:qd,backendName:"cpu",kernelFunc:CFe};N();function IFe(n){let{inputs:t,backend:e,attrs:r}=n,{x:o,scale:s,offset:i,mean:a,variance:l}=t;C.assert(a.shape.length===l.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),C.assert(i==null||a.shape.length===i.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),C.assert(s==null||a.shape.length===s.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks."),ge([o,a,l,s,i],"batchNorm");let{varianceEpsilon:c}=r;c==null&&(c=.001);let u=e.data.get(o.dataId).values,p=e.data.get(a.dataId).values,f=e.data.get(l.dataId).values,d=s?e.data.get(s.dataId).values:new Float32Array([1]),h=i?e.data.get(i.dataId).values:new Float32Array([0]),m=new Float32Array(u.length),g=h.length,x=d.length,b=f.length,w=p.length,v=0,S=0,k=0,A=0;for(let $=0;$<u.length;++$)m[$]=h[v++]+(u[$]-p[S++])*d[k++]/Math.sqrt(f[A++]+c),v>=g&&(v=0),S>=w&&(S=0),k>=x&&(k=0),A>=b&&(A=0);return e.makeTensorInfo(o.shape,o.dtype,m)}var Zee={kernelName:lu,backendName:"cpu",kernelFunc:IFe};N();function SFe(n){let{inputs:t,backend:e,attrs:r}=n,{x:o}=t,{blockShape:s,crops:i}=r;ge([o],"batchToSpaceND");let a=s.reduce((x,b)=>x*b),l=M.getReshaped(o.shape,s,a),c=M.getPermuted(l.length,s.length),u=M.getReshapedPermuted(o.shape,s,a),p=M.getSliceBeginCoords(i,s.length),f=M.getSliceSize(u,i,s.length),d=Ct({inputs:{x:o},backend:e,attrs:{shape:l}}),h=Gn({inputs:{x:d},backend:e,attrs:{perm:c}}),m=Ct({inputs:{x:h},backend:e,attrs:{shape:u}}),g=Fi({inputs:{x:m},backend:e,attrs:{begin:p,size:f}});return e.disposeIntermediateTensorInfo(d),e.disposeIntermediateTensorInfo(h),e.disposeIntermediateTensorInfo(m),g}var Qee={kernelName:Qc,backendName:"cpu",kernelFunc:SFe};N();function TFe(n){let{inputs:t,backend:e,attrs:r}=n,{x:o,weights:s}=t,{size:i}=r,a=e.data.get(o.dataId).values,l=e.data.get(s.dataId).values,c=Vy(a,l,s.dtype,s.shape,i);return e.makeTensorInfo([i],s.dtype,c)}var Jee={kernelName:Xd,backendName:"cpu",kernelFunc:TFe};N();function EFe(n){let{inputs:t,backend:e}=n,{s0:r,s1:o}=t,s=e.data.get(r.dataId).values,i=e.data.get(o.dataId).values,a=M.assertAndGetBroadcastShape(Array.from(s),Array.from(i));return e.makeTensorInfo([a.length],"int32",Int32Array.from(a))}var ete={kernelName:Yd,backendName:"cpu",kernelFunc:EFe};N();var NFe=Ke(vl,(n,t)=>{let e=t;return n>e.clipValueMax?e.clipValueMax:n<e.clipValueMin?e.clipValueMin:n}),tte={kernelName:vl,backendName:"cpu",kernelFunc:NFe};N();var DFe=n=>{let{x:t}=n.inputs,e=n.backend,r=new Float32Array(C.sizeFromShape(t.shape)),o=e.data.get(t.dataId),s=o.complexTensorInfos.real,i=o.complexTensorInfos.imag,a=e.data.get(s.dataId).values,l=e.data.get(i.dataId).values;for(let c=0;c<a.length;c++){let u=a[c],p=l[c];r[c]=Math.hypot(u,p)}return e.makeOutput(r,t.shape,"float32")},nte={kernelName:Jc,backendName:"cpu",kernelFunc:DFe};N();N();function wc(n){let{inputs:t,backend:e}=n,{input:r}=t,o=e.data.get(r.dataId).complexTensorInfos.imag,s=e.data.get(o.dataId).values;return e.makeTensorInfo(o.shape,o.dtype,s)}var rte={kernelName:mh,backendName:"cpu",kernelFunc:wc};function Zf(n){let{inputs:t,backend:e,attrs:r}=n,{axis:o}=r,s=C.parseAxisParam(o,t[0].shape)[0],i=t.map(m=>m.shape);M.assertParamsConsistent(i,s);let a=M.computeOutShape(t.map(m=>m.shape),s);if(C.sizeFromShape(a)===0)return e.makeTensorInfo(a,t[0].dtype,[]);let l=t.filter(m=>C.sizeFromShape(m.shape)>0);if(l.length===1)return uo({inputs:{x:l[0]},backend:e});if(l[0].dtype==="complex64"){let m=l.map(v=>Ri({inputs:{input:v},backend:e})),g=l.map(v=>wc({inputs:{input:v},backend:e})),x=Zf({inputs:m,backend:e,attrs:{axis:s}}),b=Zf({inputs:g,backend:e,attrs:{axis:s}}),w=Ar({inputs:{real:x,imag:b},backend:e});return m.forEach(v=>e.disposeIntermediateTensorInfo(v)),g.forEach(v=>e.disposeIntermediateTensorInfo(v)),e.disposeIntermediateTensorInfo(x),e.disposeIntermediateTensorInfo(b),w}let c=l.map(m=>{let x=[-1,C.sizeFromShape(m.shape.slice(s))];return Ct({inputs:{x:m},backend:e,attrs:{shape:x}})}),u=c.map(m=>({vals:e.data.get(m.dataId).values,shape:m.shape}));a=M.computeOutShape(c.map(m=>m.shape),1);let p=c[0].shape[0]===1,f=iN(u,a,t[0].dtype,p),d=M.computeOutShape(l.map(m=>m.shape),s),h=e.makeTensorInfo(d,t[0].dtype,f);return c.forEach(m=>e.disposeIntermediateTensorInfo(m)),h}var ote={kernelName:eu,backendName:"cpu",kernelFunc:Zf};N();function yL(n){let{inputs:t,backend:e,attrs:r}=n,{x:o,filter:s}=t,{strides:i,pad:a,dataFormat:l,dilations:c,dimRoundingMode:u}=r;ge([o,s],"conv2d");let p=M.convertConv2DDataFormat(l),f=M.computeConv2DInfo(o.shape,s.shape,i,c,a,u,!1,p),d=f.filterHeight,h=f.filterWidth,m=f.dilationHeight,g=f.dilationWidth,x=f.padInfo.left,b=f.padInfo.top,w=f.dataFormat==="channelsLast",v=new Pt(f.outShape,o.dtype),S=C.computeStrides(o.shape),k=C.computeStrides(s.shape),A=S[0],$=w?S[1]:S[2],L=w?S[2]:1,z=w?1:S[1],W=v.strides[0],Q=w?v.strides[1]:v.strides[2],ne=w?v.strides[2]:1,se=w?1:v.strides[1],te=e.data.get(o.dataId).values,ie=e.data.get(s.dataId).values,le=v.values;for(let pe=0;pe<f.batchSize;++pe){let me=pe*A,ve=pe*W;for(let we=0;we<f.outHeight;++we){let Se=ve+we*Q,Ce=we*f.strideHeight-b;for(let De=0;De<d;++De){let Ne=Ce+De*m;if(Ne<0||Ne>=f.inHeight)continue;let Re=De*k[0],qe=me+Ne*$;for(let nt=0;nt<f.outWidth;++nt){let Qe=Se+nt*ne,xt=nt*f.strideWidth-x;for(let ht=0;ht<h;++ht){let en=xt+ht*g;if(en<0||en>=f.inWidth)continue;let mt=Re+ht*k[1],Dt=qe+en*L,mn=mt;for(let cn=0;cn<f.inChannels;++cn){let On=te[Dt+cn*z];for(let Sn=0;Sn<f.outChannels;++Sn)le[Qe+Sn*se]+=On*ie[mn+Sn];mn+=f.outChannels}}}}}}return e.makeTensorInfo(v.shape,v.dtype,le)}var ste={kernelName:tu,backendName:"cpu",kernelFunc:yL};N();function kFe(n){let{inputs:t,backend:e,attrs:r}=n,{x:o,dy:s}=t,{strides:i,pad:a,dataFormat:l,dimRoundingMode:c,filterShape:u}=r;ge([o,s],"conv2dBackpropFilter");let p=M.convertConv2DDataFormat(l),f=M.computeConv2DInfo(o.shape,u,i,1,a,c,!1,p),{strideHeight:d,strideWidth:h,filterHeight:m,filterWidth:g}=f,x=f.dataFormat==="channelsLast",b=new Pt(f.filterShape,"float32"),w=f.padInfo.left,v=f.padInfo.top,S=e.data.get(o.dataId).values,k=e.data.get(s.dataId).values,A=new Pt(o.shape,o.dtype,S),$=new Pt(s.shape,s.dtype,k);for(let L=0;L<m;++L){let z=Math.max(0,Math.ceil((v-L)/d)),W=Math.min(f.outHeight,(f.inHeight+v-L)/d);for(let Q=0;Q<g;++Q){let ne=Math.max(0,Math.ceil((w-Q)/h)),se=Math.min(f.outWidth,(f.inWidth+w-Q)/h);for(let te=0;te<f.inChannels;++te)for(let ie=0;ie<f.outChannels;++ie){let le=0;for(let pe=0;pe<f.batchSize;++pe)for(let me=z;me<W;++me){let ve=L+me*d-v;for(let we=ne;we<se;++we){let Se=Q+we*h-w;x?le+=A.get(pe,ve,Se,te)*$.get(pe,me,we,ie):le+=A.get(pe,te,ve,Se)*$.get(pe,ie,me,we)}}b.set(le,L,Q,te,ie)}}}return e.makeTensorInfo(b.shape,b.dtype,b.values)}var ite={kernelName:Qd,backendName:"cpu",kernelFunc:kFe};N();function _Fe(n){let{inputs:t,backend:e,attrs:r}=n,{dy:o,filter:s}=t,{inputShape:i,strides:a,pad:l,dataFormat:c,dimRoundingMode:u}=r;ge([o,s],"conv2dBackpropInput");let p=C.computeStrides(s.shape),f=C.computeStrides(o.shape),d=M.convertConv2DDataFormat(c),h=M.computeConv2DInfo(i,s.shape,a,1,l,u,!1,d),m=new Pt(h.inShape,"float32"),g=m.values,x=e.data.get(o.dataId).values,b=e.data.get(s.dataId).values,[w,v,S]=p,{batchSize:k,filterHeight:A,filterWidth:$,inChannels:L,inHeight:z,inWidth:W,outChannels:Q,outHeight:ne,outWidth:se,strideHeight:te,strideWidth:ie}=h;d=h.dataFormat;let le=A-1-h.padInfo.top,pe=$-1-h.padInfo.left,me=d==="channelsLast",ve=m.strides[0],we=me?m.strides[1]:m.strides[2],Se=me?m.strides[2]:1,Ce=me?1:m.strides[1],De=f[0],Ne=me?f[1]:f[2],Re=me?f[2]:1,qe=me?1:f[1];for(let nt=0;nt<k;++nt)for(let Qe=0;Qe<L;++Qe)for(let xt=0;xt<z;++xt){let ht=xt-le,en=Math.max(0,Math.ceil(ht/te)),mt=Math.min(ne,(A+ht)/te);for(let Dt=0;Dt<W;++Dt){let mn=Dt-pe,cn=Math.max(0,Math.ceil(mn/ie)),On=Math.min(se,($+mn)/ie),Sn=0;for(let Ir=en;Ir<mt;++Ir){let $i=Ir*te-ht;for(let fo=cn;fo<On;++fo){let Oa=fo*ie-mn,Gr=De*nt+Ne*Ir+Re*fo,ii=w*(A-1-$i)+v*($-1-Oa)+S*Qe;for(let Ps=0;Ps<Q;++Ps){let ai=x[Gr+qe*Ps],Fa=b[ii+Ps];Sn+=ai*Fa}}}let si=ve*nt+we*xt+Se*Dt+Ce*Qe;g[si]=Sn}}return e.makeTensorInfo(m.shape,m.dtype,m.values)}var ate={kernelName:nu,backendName:"cpu",kernelFunc:_Fe};N();function AFe(n){let{inputs:t,backend:e,attrs:r}=n,{x:o,filter:s}=t,{strides:i,pad:a,dilations:l}=r;ge([o,s],"conv3d");let c=M.computeConv3DInfo(o.shape,s.shape,i,l,a),{filterDepth:u,filterHeight:p,filterWidth:f,dilationDepth:d,dilationHeight:h,dilationWidth:m,padInfo:g}=c,x=g.front,b=g.left,w=g.top,v=new Pt(c.outShape,o.dtype),S=e.data.get(o.dataId).values,k=e.data.get(s.dataId).values,A=v.values,$=C.computeStrides(o.shape),L=C.computeStrides(s.shape);for(let z=0;z<c.batchSize;++z){let W=z*$[0],Q=z*v.strides[0];for(let ne=0;ne<c.outDepth;++ne){let se=Q+ne*v.strides[1],te=ne*c.strideDepth-x;for(let ie=0;ie<u;++ie){let le=te+ie*d;if(le<0||le>=c.inDepth)continue;let pe=ie*L[0],me=W+le*$[1];for(let ve=0;ve<c.outHeight;++ve){let we=se+ve*v.strides[2],Se=ve*c.strideHeight-w;for(let Ce=0;Ce<p;++Ce){let De=Se+Ce*h;if(De<0||De>=c.inHeight)continue;let Ne=pe+Ce*L[1],Re=me+De*$[2];for(let qe=0;qe<c.outWidth;++qe){let nt=we+qe*c.outChannels,Qe=qe*c.strideWidth-b;for(let xt=0;xt<f;++xt){let ht=Qe+xt*m;if(ht<0||ht>=c.inWidth)continue;let en=Ne+xt*L[2],mt=Re+ht*c.inChannels,Dt=en;for(let mn=0;mn<c.inChannels;++mn){let cn=S[mt+mn];for(let On=0;On<c.outChannels;++On)A[nt+On]+=cn*k[Dt+On];Dt+=c.outChannels}}}}}}}}return e.makeTensorInfo(v.shape,v.dtype,v.values)}var lte={kernelName:ru,backendName:"cpu",kernelFunc:AFe};N();function RFe(n){let{inputs:t,backend:e,attrs:r}=n,{x:o,dy:s}=t,{strides:i,pad:a,filterShape:l}=r;ge([o,s],"conv3dBackpropFilterV2");let c=C.computeStrides(o.shape),u=C.computeStrides(s.shape),p=M.computeConv3DInfo(o.shape,l,i,1,a),f=p.strideDepth,d=p.strideHeight,h=p.strideWidth,m=p.filterDepth,g=p.filterHeight,x=p.filterWidth,b=new Pt(p.filterShape,"float32"),w=b.values,[v,S,k,A]=b.strides,$=e.data.get(s.dataId).values,[L,z,W,Q]=u,ne=e.data.get(o.dataId).values,[se,te,ie,le]=c,pe=p.padInfo.front,me=p.padInfo.left,ve=p.padInfo.top;for(let we=0;we<m;++we){let Se=Math.max(0,Math.ceil((pe-we)/f)),Ce=Math.min(p.outDepth,(p.inDepth+pe-we)/f),De=we*v;for(let Ne=0;Ne<g;++Ne){let Re=Math.max(0,Math.ceil((ve-Ne)/d)),qe=Math.min(p.outHeight,(p.inHeight+ve-Ne)/d),nt=Ne*S+De;for(let Qe=0;Qe<x;++Qe){let xt=Math.max(0,Math.ceil((me-Qe)/h)),ht=Math.min(p.outWidth,(p.inWidth+me-Qe)/h),en=Qe*k+nt;for(let mt=0;mt<p.inChannels;++mt){let Dt=mt*A+en;for(let mn=0;mn<p.outChannels;++mn){let cn=0;for(let On=0;On<p.batchSize;++On){let Sn=On*se,si=On*L;for(let Ir=Se;Ir<Ce;++Ir){let fo=(we+Ir*f-pe)*te+Sn,Oa=Ir*z+si;for(let Gr=Re;Gr<qe;++Gr){let Ps=(Ne+Gr*d-ve)*ie+fo,ai=Gr*W+Oa;for(let Fa=xt;Fa<ht;++Fa){let pb=(Qe+Fa*h-me)*le+Ps,cg=Fa*Q+ai;cn+=ne[pb+mt]*$[cg+mn]}}}}w[Dt+mn]=cn}}}}}return e.makeTensorInfo(b.shape,b.dtype,b.values)}var cte={kernelName:Jd,backendName:"cpu",kernelFunc:RFe};N();function MFe(n){let{inputs:t,backend:e,attrs:r}=n,{dy:o,filter:s}=t,{pad:i,strides:a,inputShape:l}=r;ge([o],"conv3dBackpropInputV2");let c=C.computeStrides(o.shape),u=C.computeStrides(s.shape),p=M.computeConv3DInfo(l,s.shape,a,1,i),f=new Pt(p.inShape,"float32"),d=f.values,[h,m,g,x]=f.strides,b=e.data.get(o.dataId).values,[w,v,S,k]=c,A=e.data.get(s.dataId).values,[$,L,z,W]=u,{batchSize:Q,filterDepth:ne,filterHeight:se,filterWidth:te,inChannels:ie,inDepth:le,inHeight:pe,inWidth:me,outChannels:ve,outDepth:we,outHeight:Se,outWidth:Ce,strideDepth:De,strideHeight:Ne,strideWidth:Re}=p,qe=ne-1-p.padInfo.front,nt=se-1-p.padInfo.top,Qe=te-1-p.padInfo.left;for(let xt=0;xt<Q;++xt)for(let ht=0;ht<ie;++ht)for(let en=0;en<le;++en){let mt=en-qe,Dt=Math.max(0,Math.ceil(mt/De)),mn=Math.min(we,(ne+mt)/De);for(let cn=0;cn<pe;++cn){let On=cn-nt,Sn=Math.max(0,Math.ceil(On/Ne)),si=Math.min(Se,(se+On)/Ne);for(let Ir=0;Ir<me;++Ir){let $i=Ir-Qe,fo=Math.max(0,Math.ceil($i/Re)),Oa=Math.min(Ce,(te+$i)/Re),Gr=0;for(let ii=Dt;ii<mn;++ii){let Ps=ii*De-mt;for(let ai=Sn;ai<si;++ai){let Fa=ai*Ne-On;for(let Cp=fo;Cp<Oa;++Cp){let pb=Cp*Re-$i,cg=w*xt+v*ii+S*ai+k*Cp,mC=$*(ne-1-Ps)+L*(se-1-Fa)+z*(te-1-pb)+W*ht;for(let Pa=0;Pa<ve;++Pa){let fb=b[cg+Pa],gC=A[mC+Pa];Gr+=fb*gC}}}}d[h*xt+m*en+g*cn+x*Ir+ht]=Gr}}}return e.makeTensorInfo(f.shape,f.dtype,f.values)}var ute={kernelName:eh,backendName:"cpu",kernelFunc:MFe};N();var OFe=Ke(wl,n=>Math.cos(n)),pte={kernelName:wl,backendName:"cpu",kernelFunc:OFe};N();var FFe=Ke(Cl,n=>Math.cosh(n)),fte={kernelName:Cl,backendName:"cpu",kernelFunc:FFe};N();function PFe(n){let{inputs:t,backend:e,attrs:r}=n,{image:o,boxes:s,boxInd:i}=t,{cropSize:a,method:l,extrapolationValue:c}=r,[u,p,f,d]=o.shape,h=s.shape[0],[m,g]=a,x=Pe([h,m,g,d],"float32"),b=e.data.get(s.dataId).values,w=e.data.get(i.dataId).values,v=e.data.get(o.dataId).values,S=C.computeStrides(o.shape),k=C.computeStrides(x.shape);for(let A=0;A<h;A++){let $=A*4,L=b[$],z=b[$+1],W=b[$+2],Q=b[$+3],ne=w[A];if(ne>=u)continue;let se=m>1?(W-L)*(p-1)/(m-1):0,te=g>1?(Q-z)*(f-1)/(g-1):0;for(let ie=0;ie<m;ie++){let le=m>1?L*(p-1)+ie*se:.5*(L+W)*(p-1);if(le<0||le>p-1){for(let pe=0;pe<g;pe++)for(let me=0;me<d;me++){let ve=me+pe*k[2]+ie*k[1]+A*k[0];x.values[ve]=c}continue}if(l==="bilinear"){let pe=Math.floor(le),me=Math.ceil(le),ve=le-pe;for(let we=0;we<g;we++){let Se=g>1?z*(f-1)+we*te:.5*(z+Q)*(f-1);if(Se<0||Se>f-1){for(let Re=0;Re<d;Re++){let qe=Re+we*k[2]+ie*k[1]+A*k[0];x.values[qe]=c}continue}let Ce=Math.floor(Se),De=Math.ceil(Se),Ne=Se-Ce;for(let Re=0;Re<d;Re++){let qe=Re+Ce*S[2]+pe*S[1]+ne*S[0],nt=v[qe];qe=Re+De*S[2]+pe*S[1]+ne*S[0];let Qe=v[qe];qe=Re+Ce*S[2]+me*S[1]+ne*S[0];let xt=v[qe];qe=Re+De*S[2]+me*S[1]+ne*S[0];let ht=v[qe],en=nt+(Qe-nt)*Ne,mt=xt+(ht-xt)*Ne;qe=Re+we*k[2]+ie*k[1]+A*k[0],x.values[qe]=en+(mt-en)*ve}}}else for(let pe=0;pe<g;++pe){let me=g>1?z*(f-1)+pe*te:.5*(z+Q)*(f-1);if(me<0||me>f-1){for(let Se=0;Se<d;Se++){let Ce=Se+pe*k[2]+ie*k[1]+A*k[0];x.values[Ce]=c}continue}let ve=Math.round(me),we=Math.round(le);for(let Se=0;Se<d;Se++){let Ce=Se+ve*S[2]+we*S[1]+ne*S[0],De=Se+pe*k[2]+ie*k[1]+A*k[0];x.values[De]=v[Ce]}}}}return e.makeTensorInfo(x.shape,x.dtype,x.values)}var dte={kernelName:nh,backendName:"cpu",kernelFunc:PFe};N();function $Fe(n){let{inputs:t,backend:e,attrs:r}=n,{x:o}=t,{axis:s,exclusive:i,reverse:a}=r;ge(o,"cumprod");let l=M.getAxesPermutation([s],o.shape.length),c=o;l!=null&&(c=Gn({inputs:{x:o},backend:e,attrs:{perm:l}}));let u=M.getInnerMostAxes(1,o.shape.length)[0];if(u!==c.shape.length-1)throw new Error(`backend.cumprod in CPU expects an inner-most axis=${c.shape.length-1} but got axis=${u}`);let p=ar(c.dtype,"int32"),f=C.makeOnesTypedArray(C.sizeFromShape(c.shape),p),d=e.data.get(c.dataId).values,h=c.shape[c.shape.length-1],m=a?(x,b)=>x+h-b-1:(x,b)=>x+b;for(let x=0;x<d.length;x+=h)for(let b=0;b<h;b++){let w=m(x,b);if(b===0)f[w]=i?1:d[w];else{let v=m(x,b-1);f[w]=i?d[v]*f[v]:d[w]*f[v]}}let g=e.makeTensorInfo(c.shape,p,f);if(l!=null){let x=M.getUndoAxesPermutation(l),b=Gn({inputs:{x:g},backend:e,attrs:{perm:x}});return e.disposeIntermediateTensorInfo(g),e.disposeIntermediateTensorInfo(c),b}return g}var hte={kernelName:th,backendName:"cpu",kernelFunc:$Fe};N();function LFe(n){let{inputs:t,backend:e,attrs:r}=n,{x:o}=t,{axis:s,exclusive:i,reverse:a}=r;ge(o,"cumsum");let l=M.getAxesPermutation([s],o.shape.length),c=o;l!=null&&(c=Gn({inputs:{x:o},backend:e,attrs:{perm:l}}));let u=M.getInnerMostAxes(1,o.shape.length)[0];if(u!==c.shape.length-1)throw new Error(`backend.cumsum in CPU expects an inner-most axis=${c.shape.length-1} but got axis=${u}`);let p=ar(c.dtype,"int32"),f=C.makeZerosTypedArray(C.sizeFromShape(c.shape),p),d=e.data.get(c.dataId).values,h=c.shape[c.shape.length-1],m=a?(x,b)=>x+h-b-1:(x,b)=>x+b;for(let x=0;x<d.length;x+=h)for(let b=0;b<h;b++){let w=m(x,b);if(b===0)f[w]=i?0:d[w];else{let v=m(x,b-1);f[w]=i?d[v]+f[v]:d[w]+f[v]}}let g=e.makeTensorInfo(c.shape,p,f);if(l!=null){let x=M.getUndoAxesPermutation(l),b=Gn({inputs:{x:g},backend:e,attrs:{perm:x}});return e.disposeIntermediateTensorInfo(g),e.disposeIntermediateTensorInfo(c),b}return g}var mte={kernelName:ou,backendName:"cpu",kernelFunc:LFe};N();function BFe(n){let{inputs:t,backend:e,attrs:r}=n,{x:o,weights:s}=t,{size:i,binaryOutput:a}=r;if(o.shape.length===1){let l=e.data.get(o.dataId).values,c=e.data.get(s.dataId).values,u=Vy(l,c,s.dtype,s.shape,i);return e.makeTensorInfo([i],s.dtype,u)}else if(o.shape.length===2){let l=e.bufferSync(o),c=e.bufferSync(s),u=sN(l,c,i,a);return e.makeTensorInfo(u.shape,s.dtype,u.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${o.shape.length}.`)}var gte={kernelName:rh,backendName:"cpu",kernelFunc:BFe};N();function zFe(n){let{inputs:t,backend:e,attrs:r}=n,{x:o}=t,{blockSize:s,dataFormat:i}=r;C.assert(i==="NHWC",()=>`Only NHWC dataFormat supported on CPU for depthToSpace. Got ${i}`);let a=o.shape[0],l=o.shape[1],c=o.shape[2],u=o.shape[3],p=l*s,f=c*s,d=u/(s*s),h=e.data.get(o.dataId).values,m=new Float32Array(a*p*f*d),g=0;for(let x=0;x<a;++x)for(let b=0;b<p;++b){let w=Math.floor(b/s),v=b%s;for(let S=0;S<f;++S){let k=Math.floor(S/s),A=S%s,$=(v*s+A)*d;for(let L=0;L<d;++L){let W=L+$+u*(k+c*(w+l*x));m[g++]=h[W]}}}return e.makeTensorInfo([a,p,f,d],o.dtype,m)}var xte={kernelName:oh,backendName:"cpu",kernelFunc:zFe};N();function bL(n){let{inputs:t,backend:e,attrs:r}=n,{x:o,filter:s}=t,{strides:i,pad:a,dilations:l,dimRoundingMode:c}=r;ge([o,s],"depthwiseConv2DNative");let u=C.computeStrides(o.shape),p=C.computeStrides(s.shape),f=l;f==null&&(f=[1,1]),C.assert(M.eitherStridesOrDilationsAreOne(i,f),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${i} and dilations '${f}'`);let d=M.computeConv2DInfo(o.shape,s.shape,i,f,a,c,!0),{filterHeight:h,filterWidth:m,dilationHeight:g,dilationWidth:x,padInfo:b}=d,w=b.left,v=b.top,S=d.outChannels/d.inChannels,k=new Pt(d.outShape,o.dtype),A=e.data.get(o.dataId).values,$=e.data.get(s.dataId).values,L=k.values;for(let z=0;z<d.batchSize;++z){let W=z*u[0],Q=z*k.strides[0];for(let ne=0;ne<d.outHeight;++ne){let se=Q+ne*k.strides[1],te=ne*d.strideHeight-v;for(let ie=0;ie<h;++ie){let le=te+ie*g;if(le<0||le>=d.inHeight)continue;let pe=ie*p[0],me=W+le*u[1];for(let ve=0;ve<d.outWidth;++ve){let we=se+ve*k.strides[2],Se=ve*d.strideWidth-w;for(let Ce=0;Ce<m;++Ce){let De=Se+Ce*x;if(De<0||De>=d.inWidth)continue;let Ne=pe+Ce*p[1],Re=me+De*d.inChannels,qe=we,nt=Ne;for(let Qe=0;Qe<d.inChannels;++Qe){let xt=A[Re+Qe];for(let ht=0;ht<S;++ht)L[qe+ht]+=xt*$[nt+ht];qe+=S,nt+=S}}}}}}return e.makeTensorInfo(k.shape,k.dtype,k.values)}var yte={kernelName:su,backendName:"cpu",kernelFunc:bL};N();function VFe(n){let{inputs:t,backend:e,attrs:r}=n,{x:o,dy:s}=t,{strides:i,dilations:a,pad:l,dimRoundingMode:c,filterShape:u}=r;ge([o,s],"depthwiseConv2dNativeBackpropFilter");let p=M.computeConv2DInfo(o.shape,u,i,a,l,c,!0),{strideHeight:f,strideWidth:d,filterHeight:h,filterWidth:m}=p,g=new Pt(p.filterShape,"float32"),x=p.padInfo.left,b=p.padInfo.top,w=p.outChannels/p.inChannels,v=e.data.get(o.dataId).values,S=new Pt(o.shape,o.dtype,v),k=e.data.get(s.dataId).values,A=new Pt(s.shape,s.dtype,k);for(let $=0;$<h;++$){let L=Math.max(0,Math.ceil((b-$)/f)),z=Math.min(p.outHeight,(p.inHeight+b-$)/f);for(let W=0;W<m;++W){let Q=Math.max(0,Math.ceil((x-W)/d)),ne=Math.min(p.outWidth,(p.inWidth+x-W)/d);for(let se=0;se<p.outChannels;++se){let te=Math.trunc(se/w),ie=se%w,le=0;for(let pe=0;pe<p.batchSize;++pe)for(let me=L;me<z;++me){let ve=$+me*f-b;for(let we=Q;we<ne;++we){let Se=W+we*d-x;le+=S.get(pe,ve,Se,te)*A.get(pe,me,we,se)}}g.set(le,$,W,te,ie)}}}return e.makeTensorInfo(g.shape,g.dtype,g.values)}var bte={kernelName:sh,backendName:"cpu",kernelFunc:VFe};N();function UFe(n){let{inputs:t,backend:e,attrs:r}=n,{dy:o,filter:s}=t,{strides:i,dilations:a,pad:l,dimRoundingMode:c,inputShape:u}=r;ge([o,s],"depthwiseConv2DNativeBackpropInput");let p=C.computeStrides(o.shape),f=C.computeStrides(s.shape),d=M.computeConv2DInfo(u,s.shape,i,a,l,c,!0),h=new Pt(d.inShape,"float32"),m=h.values,[g,x,b]=h.strides,w=e.data.get(o.dataId).values,[v,S,k]=p,A=e.data.get(s.dataId).values,[$,L,z]=f,{batchSize:W,filterHeight:Q,filterWidth:ne,inChannels:se,inHeight:te,inWidth:ie,outChannels:le,outHeight:pe,outWidth:me,strideHeight:ve,strideWidth:we}=d,Se=Q-1-d.padInfo.top,Ce=ne-1-d.padInfo.left,De=le/se;for(let Ne=0;Ne<W;++Ne)for(let Re=0;Re<se;++Re)for(let qe=0;qe<te;++qe){let nt=qe-Se,Qe=Math.max(0,Math.ceil(nt/ve)),xt=Math.min(pe,(Q+nt)/ve);for(let ht=0;ht<ie;++ht){let en=ht-Ce,mt=Math.max(0,Math.ceil(en/we)),Dt=Math.min(me,(ne+en)/we),mn=0;for(let cn=Qe;cn<xt;++cn){let On=cn*ve-nt;for(let Sn=mt;Sn<Dt;++Sn){let si=Sn*we-en,Ir=v*Ne+S*cn+k*Sn,$i=$*(Q-1-On)+L*(ne-1-si)+z*Re;for(let fo=0;fo<De;++fo){let Oa=Re*De+fo,Gr=w[Ir+Oa],ii=A[$i+fo];mn+=Gr*ii}}}m[g*Ne+x*qe+b*ht+Re]=mn}}return e.makeTensorInfo(h.shape,h.dtype,h.values)}var vte={kernelName:ih,backendName:"cpu",kernelFunc:UFe};N();function jFe(n){let{inputs:t,backend:e}=n,{x:r}=t,o=C.sizeFromShape(r.shape),s=e.data.get(r.dataId).values,i=Pe([o,o],r.dtype),a=i.values;for(let c=0;c<s.length;c++)a[c*o+c]=s[c];let l=[...r.shape,...r.shape];return e.makeTensorInfo(l,i.dtype,i.values)}var wte={kernelName:ah,backendName:"cpu",kernelFunc:jFe};N();var Cte={kernelName:iu,backendName:"cpu",kernelFunc:({inputs:n,backend:t,attrs:e})=>{let{x:r,filter:o}=n,{strides:s,pad:i,dilations:a}=e,l=t,c=l.data.get(r.dataId).values,u=r.shape.length,p=l.data.get(o.dataId).values,f=o.shape.length,{batchSize:d,inHeight:h,inWidth:m,inChannels:g,outHeight:x,outWidth:b,padInfo:w,strideHeight:v,strideWidth:S,filterHeight:k,filterWidth:A,dilationHeight:$,dilationWidth:L,outShape:z}=M.computeDilation2DInfo(r.shape,o.shape,s,i,"NHWC",a),W=C.sizeFromShape(z),Q=z.length,ne=C.getArrayFromDType(r.dtype,W);for(let te=0;te<d;++te)for(let ie=0;ie<x;++ie){let le=ie*v-w.top;for(let pe=0;pe<b;++pe){let me=pe*S-w.left;for(let ve=0;ve<g;++ve){let we=Number.MIN_SAFE_INTEGER;for(let Ce=0;Ce<k;++Ce){let De=le+Ce*$;if(De>=0&&De<h)for(let Ne=0;Ne<A;++Ne){let Re=me+Ne*L;if(Re>=0&&Re<m){let qe=C.locToIndex([te,De,Re,ve],u,C.computeStrides(r.shape)),nt=C.locToIndex([Ce,Ne,ve],f,C.computeStrides(o.shape)),Qe=c[qe]+p[nt];Qe>we&&(we=Qe)}}}let Se=C.locToIndex([te,ie,pe,ve],Q,C.computeStrides(z));ne[Se]=we}}}return{dataId:l.write(C.toTypedArray(ne,r.dtype),z,r.dtype),shape:z,dtype:r.dtype}}};N();var Ite={kernelName:Px,backendName:"cpu",kernelFunc:({inputs:n,backend:t,attrs:e})=>{let{x:r,filter:o,dy:s}=n,{strides:i,pad:a,dilations:l}=e,c=t,u=C.toNestedArray(r.shape,c.data.get(r.dataId).values),p=C.toNestedArray(o.shape,c.data.get(o.dataId).values),{batchSize:f,inHeight:d,inWidth:h,inChannels:m,outHeight:g,outWidth:x,padInfo:b,strideHeight:w,strideWidth:v,filterHeight:S,filterWidth:k,dilationHeight:A,dilationWidth:$,outShape:L}=M.computeDilation2DInfo(r.shape,o.shape,i,a,"NHWC",l);C.assert(s.rank===L.length,()=>`Error in ${Px}, dy must have the same rank as output ${L.length}, but got ${s.rank}`);let z=C.toNestedArray(L,c.data.get(s.dataId).values),W=C.makeZerosNestedTypedArray(o.shape,o.dtype);for(let ne=0;ne<f;++ne)for(let se=0;se<g;++se){let te=se*w-b.top;for(let ie=0;ie<x;++ie){let le=ie*v-b.left;for(let pe=0;pe<m;++pe){let me=Number.MIN_SAFE_INTEGER,ve=0,we=0;for(let Se=0;Se<S;++Se){let Ce=te+Se*A;if(Ce>=0&&Ce<d)for(let De=0;De<k;++De){let Ne=le+De*$;if(Ne>=0&&Ne<h){let Re=u[ne][Ce][Ne][pe]+p[Se][De][pe];Re>me&&(me=Re,ve=Se,we=De)}}}W[ve][we][pe]+=z[ne][se][ie][pe]}}}return{dataId:c.write(C.toTypedArray(W,r.dtype),o.shape,o.dtype),shape:o.shape,dtype:o.dtype}}};N();var Ste={kernelName:Fx,backendName:"cpu",kernelFunc:({inputs:n,backend:t,attrs:e})=>{let{x:r,filter:o,dy:s}=n,{strides:i,pad:a,dilations:l}=e,c=t,u=C.toNestedArray(r.shape,c.data.get(r.dataId).values),p=C.toNestedArray(o.shape,c.data.get(o.dataId).values),{batchSize:f,inHeight:d,inWidth:h,inChannels:m,outHeight:g,outWidth:x,padInfo:b,strideHeight:w,strideWidth:v,filterHeight:S,filterWidth:k,dilationHeight:A,dilationWidth:$,outShape:L}=M.computeDilation2DInfo(r.shape,o.shape,i,a,"NHWC",l);C.assert(s.rank===L.length,()=>`Error in ${Fx}, dy must have the same rank as output ${L.length}, but got ${s.rank}`);let z=C.toNestedArray(L,c.data.get(s.dataId).values),W=C.makeZerosNestedTypedArray(r.shape,r.dtype);for(let ne=0;ne<f;++ne)for(let se=0;se<g;++se){let te=se*w-b.top;for(let ie=0;ie<x;++ie){let le=ie*v-b.left;for(let pe=0;pe<m;++pe){let me=Number.MIN_SAFE_INTEGER,ve=te<0?0:te,we=le<0?0:le;for(let Se=0;Se<S;++Se){let Ce=te+Se*A;if(Ce>=0&&Ce<d)for(let De=0;De<k;++De){let Ne=le+De*$;if(Ne>=0&&Ne<h){let Re=u[ne][Ce][Ne][pe]+p[Se][De][pe];Re>me&&(me=Re,ve=Ce,we=Ne)}}}W[ne][ve][we][pe]+=z[ne][se][ie][pe]}}}return{dataId:c.write(C.toTypedArray(W,r.dtype),r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};N();function GFe(n){let{inputs:t,backend:e,attrs:r}=n,{image:o}=t,{canvas:s,options:i}=r,{contextOptions:a,imageOptions:l}=i||{},c=l?.alpha||1,u=a?.contextType||"2d";if(u!=="2d")throw new Error(`Context type ${a.contextType} is not supported by the CPU backend.`);let p=s.getContext(u,a?.contextAttributes||{});if(p==null)throw new Error(`Could not get the context with ${u} type.`);let[f,d]=o.shape.slice(0,2),h=o.shape.length===2?1:o.shape[2],m=e.data.get(o.dataId).values,g=o.dtype==="float32"?255:1,x=new Uint8ClampedArray(d*f*4);for(let w=0;w<f*d;++w){let v=[0,0,0,255*c];for(let k=0;k<h;k++){let A=m[w*h+k];if(o.dtype==="float32"){if(A<0||A>1)throw new Error(`Tensor values for a float32 Tensor must be in the range [0 - 1] but encountered ${A}.`)}else if(o.dtype==="int32"&&(A<0||A>255))throw new Error(`Tensor values for a int32 Tensor must be in the range [0 - 255] but encountered ${A}.`);h===1?(v[0]=A*g,v[1]=A*g,v[2]=A*g):v[k]=A*g}let S=w*4;x[S+0]=Math.round(v[0]),x[S+1]=Math.round(v[1]),x[S+2]=Math.round(v[2]),x[S+3]=Math.round(v[3])}s.width=d,s.height=f;let b=new ImageData(x,d,f);return p.putImageData(b,0,0),o}var Tte={kernelName:$x,backendName:"cpu",kernelFunc:GFe};N();N();function xp(n){let{inputs:t,backend:e,attrs:r}=n,{x:o}=t,{axis:s,keepDims:i}=r;ge(o,"sum");let a;o.dtype==="bool"?a=Mi({inputs:{x:o},backend:e,attrs:{dtype:"int32"}}):a=uo({inputs:{x:o},backend:e});let l=a.shape.length,c=C.parseAxisParam(s,a.shape),u=M.getAxesPermutation(c,l),p=c,f=a;u!=null&&(f=Gn({inputs:{x:a},backend:e,attrs:{perm:u}}),p=M.getInnerMostAxes(p.length,l)),M.assertAxesAreInnerMostDims("sum",p,f.shape.length);let[d,h]=M.computeOutAndReduceShapes(f.shape,p),m=M.upcastType(f.dtype,"int32"),g=By(e,d,m),x=C.sizeFromShape(h),b=e.data.get(g.dataId).values,w=e.data.get(f.dataId).values;for(let v=0;v<b.length;++v){let S=v*x,k=0;for(let A=0;A<x;++A)k+=w[S+A];b[v]=k}if(i){let v=M.expandShapeToKeepDim(g.shape,c),S=g;g=Ct({inputs:{x:g},backend:e,attrs:{shape:v}}),e.disposeIntermediateTensorInfo(S)}return e.disposeIntermediateTensorInfo(a),u!=null&&e.disposeIntermediateTensorInfo(f),g}var Ete={kernelName:Au,backendName:"cpu",kernelFunc:xp};function WFe(n){let{inputs:t,backend:e,attrs:r}=n,{equation:o}=r,s=t,{allDims:i,summedDims:a,idDims:l}=M.decodeEinsumEquation(o,s.length);M.checkEinsumDimSizes(i.length,l,s);let{path:c,steps:u}=M.getEinsumComputePath(a,l),p=u.length,f=null,d=i.length,h=[];for(let m=0;m<p;++m){for(let g of u[m]){let{permutationIndices:x,expandDims:b}=M.getEinsumPermutation(d,l[g]),w;M.isIdentityPermutation(x)?w=s[g]:(w=Gn({inputs:{x:s[g]},backend:e,attrs:{perm:x}}),h.push(w));let v=w.shape.slice();for(let S=0;S<b.length;++S)v.splice(b[S],0,1);C.arraysEqual(w.shape,v)||(w=Ct({inputs:{x:w},backend:e,attrs:{shape:v}}),h.push(w)),f===null?f=w:(f=Ym({inputs:{a:w,b:f},backend:e}),h.push(f))}m<p-1&&(c[m]>=0&&(f=xp({inputs:{x:f},backend:e,attrs:{axis:c[m]-(i.length-d),keepDims:!1}}),h.push(f)),d--)}for(let m of h)m!==f&&e.disposeIntermediateTensorInfo(m);return f}var Nte={kernelName:lh,backendName:"cpu",kernelFunc:WFe};N();function HFe(n){let{inputs:t,backend:e}=n,{dy:r,y:o}=t;ge([r,o],"eluGrad");let s=new Float32Array(C.sizeFromShape(o.shape)),i=e.data.get(o.dataId).values,a=e.data.get(r.dataId).values;for(let l=0;l<i.length;++l){let c=i[l];c>=0?s[l]=a[l]:s[l]=a[l]*(c+1)}return e.makeTensorInfo(o.shape,"float32",s)}var Dte={kernelName:ch,backendName:"cpu",kernelFunc:HFe};N();var qFe=M.ERF_P,KFe=M.ERF_A1,XFe=M.ERF_A2,YFe=M.ERF_A3,ZFe=M.ERF_A4,QFe=M.ERF_A5,JFe=Ke(Tl,n=>{let t=Math.sign(n),e=Math.abs(n),r=1/(1+qFe*e);return t*(1-((((QFe*r+ZFe)*r+YFe)*r+XFe)*r+KFe)*r*Math.exp(-e*e))}),kte={kernelName:Tl,backendName:"cpu",kernelFunc:JFe};N();function Wy(n){let{inputs:t,backend:e,attrs:r}=n,{input:o}=t,{dim:s}=r,i=o.shape.length,a=o.shape.slice(),l=s;return s<0&&(C.assert(-(i+1)<=s,()=>`Axis must be in the interval [${-(i+1)}, ${i}]`),l=i+s+1),a.splice(l,0,1),Ct({inputs:{x:o},backend:e,attrs:{shape:a}})}var _te={kernelName:au,backendName:"cpu",kernelFunc:Wy};N();N();N();var ePe=wt((n,t)=>n/t),Yw=Nt(Il,ePe),Zw={kernelName:Il,backendName:"cpu",kernelFunc:Yw};function EN(n,t,e){let r=n.shape,o=r[0],s=r[1],i=e.data.get(n.dataId),a=i.complexTensorInfos.real,l=i.complexTensorInfos.imag,c=[o,s],u=C.sizeFromShape(c),p=C.getTypedArrayFromDType("float32",u),f=C.getTypedArrayFromDType("float32",u);for(let g=0;g<o;g++){let x=Fi({inputs:{x:a},backend:e,attrs:{begin:[g,0],size:[1,s]}}),b=Fi({inputs:{x:l},backend:e,attrs:{begin:[g,0],size:[1,s]}}),w=Ar({inputs:{real:x,imag:b},backend:e}),{real:v,imag:S}=tPe(w,t,e),k=M.mergeRealAndImagArrays(v,S);for(let A=0;A<s;A++){let $=M.getComplexWithIndex(k,A);p[g*s+A]=$.real,f[g*s+A]=$.imag}e.disposeIntermediateTensorInfo(x),e.disposeIntermediateTensorInfo(b),e.disposeIntermediateTensorInfo(w)}let d=e.makeTensorInfo(c,"float32",p),h=e.makeTensorInfo(c,"float32",f),m=Ar({inputs:{real:d,imag:h},backend:e});return e.disposeIntermediateTensorInfo(d),e.disposeIntermediateTensorInfo(h),m}function tPe(n,t,e){let r=C.sizeFromShape(n.shape),o=e.data.get(n.dataId),s=e.data.get(o.complexTensorInfos.real.dataId).values,i=e.data.get(o.complexTensorInfos.imag.dataId).values;if(nPe(r)){let a=vL(s,i,r,t,e),l=[n.shape[0],n.shape[1]];if(t){let c=e.makeTensorInfo(l,"float32",a.real),u=e.makeTensorInfo(l,"float32",a.imag),p=e.makeTensorInfo([],"float32",C.createScalarValue(r,"float32")),f=uo({inputs:{x:p},backend:e}),d=Zw.kernelFunc({inputs:{a:c,b:p},backend:e}),h=Zw.kernelFunc({inputs:{a:u,b:f},backend:e}),m=e.data.get(d.dataId).values,g=e.data.get(h.dataId).values;return e.disposeIntermediateTensorInfo(c),e.disposeIntermediateTensorInfo(u),e.disposeIntermediateTensorInfo(p),e.disposeIntermediateTensorInfo(f),e.disposeIntermediateTensorInfo(d),e.disposeIntermediateTensorInfo(h),{real:m,imag:g}}return a}else{let a=M.mergeRealAndImagArrays(s,i),l=rPe(a,r,t);return M.splitRealAndImagArrays(l)}}function nPe(n){return(n&n-1)===0}function vL(n,t,e,r,o){if(e===1)return{real:n,imag:t};let s=M.mergeRealAndImagArrays(n,t),i=e/2,a=M.complexWithEvenIndex(s),l=a.real,c=a.imag,u=[l.length],p=o.makeTensorInfo(u,"float32",l),f=o.makeTensorInfo(u,"float32",c),d=Ar({inputs:{real:p,imag:f},backend:o}),h=M.complexWithOddIndex(s),m=h.real,g=h.imag,x=[m.length],b=o.makeTensorInfo(x,"float32",m),w=o.makeTensorInfo(x,"float32",g),v=Ar({inputs:{real:b,imag:w},backend:o}),S=vL(l,c,i,r,o),k=S.real,A=S.imag,$=[k.length],L=o.makeTensorInfo($,"float32",k),z=o.makeTensorInfo($,"float32",A),W=Ar({inputs:{real:L,imag:z},backend:o}),Q=vL(m,g,i,r,o),ne=Q.real,se=Q.imag,te=[ne.length],ie=o.makeTensorInfo(te,"float32",ne),le=o.makeTensorInfo(te,"float32",se),pe=Ar({inputs:{real:ie,imag:le},backend:o}),me=M.exponents(e,r),ve=[me.real.length],we=o.makeTensorInfo(ve,"float32",me.real),Se=o.makeTensorInfo(ve,"float32",me.imag),Ce=Ar({inputs:{real:we,imag:Se},backend:o}),De=Ym({inputs:{a:Ce,b:pe},backend:o}),Ne=vc({inputs:{a:W,b:De},backend:o}),Re=Kw({inputs:{a:W,b:De},backend:o}),qe=Ri({inputs:{input:Ne},backend:o}),nt=Ri({inputs:{input:Re},backend:o}),Qe=wc({inputs:{input:Ne},backend:o}),xt=wc({inputs:{input:Re},backend:o}),ht=Zf({inputs:[qe,nt],backend:o,attrs:{axis:0}}),en=Zf({inputs:[Qe,xt],backend:o,attrs:{axis:0}}),mt=o.data.get(ht.dataId).values,Dt=o.data.get(en.dataId).values;return o.disposeIntermediateTensorInfo(p),o.disposeIntermediateTensorInfo(f),o.disposeIntermediateTensorInfo(d),o.disposeIntermediateTensorInfo(b),o.disposeIntermediateTensorInfo(w),o.disposeIntermediateTensorInfo(v),o.disposeIntermediateTensorInfo(L),o.disposeIntermediateTensorInfo(z),o.disposeIntermediateTensorInfo(W),o.disposeIntermediateTensorInfo(ie),o.disposeIntermediateTensorInfo(le),o.disposeIntermediateTensorInfo(pe),o.disposeIntermediateTensorInfo(we),o.disposeIntermediateTensorInfo(Se),o.disposeIntermediateTensorInfo(Ce),o.disposeIntermediateTensorInfo(De),o.disposeIntermediateTensorInfo(Ne),o.disposeIntermediateTensorInfo(Re),o.disposeIntermediateTensorInfo(qe),o.disposeIntermediateTensorInfo(Qe),o.disposeIntermediateTensorInfo(nt),o.disposeIntermediateTensorInfo(xt),o.disposeIntermediateTensorInfo(ht),o.disposeIntermediateTensorInfo(en),{real:mt,imag:Dt}}function rPe(n,t,e){let r=new Float32Array(t*2);for(let o=0;o<t;o++){let s=0,i=0;for(let a=0;a<t;a++){let l=M.exponent(o*a,t,e),c=M.getComplexWithIndex(n,a);s+=c.real*l.real-c.imag*l.imag,i+=c.real*l.imag+c.imag*l.real}e&&(s/=t,i/=t),M.assignToTypedArray(r,s,i,o)}return r}function oPe(n){let{inputs:t,backend:e}=n,{input:r}=t,o=C.sizeFromShape(r.shape),s=r.shape[r.shape.length-1],i=o/s,a=Ct({inputs:{x:r},backend:e,attrs:{shape:[i,s]}}),l=EN(a,!1,e),c=Ct({inputs:{x:l},backend:e,attrs:{shape:r.shape}});return e.disposeIntermediateTensorInfo(a),e.disposeIntermediateTensorInfo(l),c}var Ate={kernelName:uh,backendName:"cpu",kernelFunc:oPe};N();function Qw(n){let{backend:t,attrs:e}=n,{shape:r,value:o,dtype:s}=e,i=s||C.inferDtype(o),a=C.getArrayFromDType(i,C.sizeFromShape(r));return sPe(a,o,i),t.makeTensorInfo(r,i,a)}var Rte={kernelName:ph,backendName:"cpu",kernelFunc:Qw};function sPe(n,t,e){n.fill(t)}N();var Mte={kernelName:fh,backendName:"cpu",kernelFunc:({inputs:n,attrs:t,backend:e})=>{let{image:r}=n,o=e,s=C.getTypedArrayFromDType(r.dtype,C.sizeFromShape(r.shape)),[i,a,l,c]=r.shape,u=o.data.get(r.dataId).values;for(let f=0;f<i;f++){let d=f*l*a*c;for(let h=0;h<a;h++){let m=h*(l*c);for(let g=0;g<l;g++){let x=g*c;for(let b=0;b<c;b++){let w=Math.round(l-g-1),v=d+m+x+b,S=u[v];if(w>=0&&w<l){let k=w*c,A=d+m+k+b;S=u[A]}s[v]=S}}}}return{dataId:o.write(s,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};N();function iPe(n){let{inputs:t,backend:e,attrs:r}=n,{x:o,filter:s,bias:i,preluActivationWeights:a}=t,{strides:l,pad:c,dataFormat:u,dilations:p,dimRoundingMode:f,activation:d,leakyreluAlpha:h}=r,m=yL({inputs:{x:o,filter:s},backend:e,attrs:{strides:l,pad:c,dataFormat:u,dilations:p,dimRoundingMode:f}});if(i){let g=m;if(u==="NCHW"&&i.shape.length===1&&i.shape[0]!==1){let x=Ct({inputs:{x:i},backend:e,attrs:{shape:[i.shape[0],1,1]}});m=vc({inputs:{a:m,b:x},backend:e}),e.disposeIntermediateTensorInfo(x)}else m=vc({inputs:{a:m,b:i},backend:e});e.disposeIntermediateTensorInfo(g)}if(d){let g=m;if(u==="NCHW"&&d==="prelu"&&a.shape.length===1&&a.shape[0]!==1){let x=Ct({inputs:{x:a},backend:e,attrs:{shape:[a.shape[0],1,1]}});m=Zm(e,m,d,x,h),e.disposeIntermediateTensorInfo(x)}else m=Zm(e,m,d,a,h);e.disposeIntermediateTensorInfo(g)}return m}var Ote={kernelName:hf,backendName:"cpu",kernelFunc:iPe};N();function aPe(n){let{inputs:t,backend:e,attrs:r}=n,{x:o,filter:s,bias:i,preluActivationWeights:a}=t,{strides:l,pad:c,dataFormat:u,dilations:p,dimRoundingMode:f,activation:d,leakyreluAlpha:h}=r,m=bL({inputs:{x:o,filter:s},backend:e,attrs:{strides:l,pad:c,dataFormat:u,dilations:p,dimRoundingMode:f}});if(i){let g=m;m=vc({inputs:{a:m,b:i},backend:e}),e.disposeIntermediateTensorInfo(g)}if(d){let g=m;m=Zm(e,m,d,a,h),e.disposeIntermediateTensorInfo(g)}return m}var Fte={kernelName:mf,backendName:"cpu",kernelFunc:aPe};N();function lPe(n){let{inputs:t,backend:e}=n,{params:r,indices:o}=t,s=C.sizeFromShape(r.shape),i=o.shape,a=i[i.length-1],[l,c,u,p]=M.prepareAndValidate(r,o);if(c===0)return e.makeTensorInfo(l,r.dtype,[]);let f=e.data.get(o.dataId).values,d=e.bufferSync(r),h=aN(f,d,r.dtype,c,a,u,p,r.shape,s);return e.makeTensorInfo(l,r.dtype,h.values)}var Pte={kernelName:dh,backendName:"cpu",kernelFunc:lPe};N();function cPe(n){let{inputs:t,backend:e,attrs:r}=n,{x:o,indices:s}=t,{axis:i,batchDims:a}=r;ge([o,s],"gatherV2");let l=C.parseAxisParam(i,o.shape)[0],c=e.data.get(s.dataId).values,u=o.shape[l];for(let v=0;v<c.length;++v){let S=c[v];C.assert(S<=u-1&&S>=0,()=>`GatherV2: the index value ${S} is not in [0, ${u-1}]`)}let p=a;a==null&&(p=0);let f=C.sizeFromShape(s.shape),d=M.segment_util.collectGatherOpShapeInfo(o,s,l,p),h=Ct({inputs:{x:o},backend:e,attrs:{shape:[d.batchSize,d.outerSize,d.dimSize,d.sliceSize]}}),m=Ct({inputs:{x:s},backend:e,attrs:{shape:[d.batchSize,f/d.batchSize]}}),g=[d.batchSize,d.outerSize,f/d.batchSize,d.sliceSize],x=e.bufferSync(m),b=e.bufferSync(h),w=lN(b,x,g);return e.disposeIntermediateTensorInfo(h),e.disposeIntermediateTensorInfo(m),e.makeTensorInfo(d.outputShape,w.dtype,w.values)}var $te={kernelName:cu,backendName:"cpu",kernelFunc:cPe};N();function uPe(n){let{inputs:t,backend:e}=n,{input:r}=t,o=C.sizeFromShape(r.shape),s=r.shape[r.shape.length-1],i=o/s,a=Ct({inputs:{x:r},backend:e,attrs:{shape:[i,s]}}),l=EN(a,!0,e),c=Ct({inputs:{x:l},backend:e,attrs:{shape:r.shape}});return e.disposeIntermediateTensorInfo(a),e.disposeIntermediateTensorInfo(l),c}var Lte={kernelName:hh,backendName:"cpu",kernelFunc:uPe};N();var pPe=Ke(Al,n=>Number.isFinite(n)?1:0,"bool"),Bte={kernelName:Al,backendName:"cpu",kernelFunc:pPe};N();var fPe=Ke(Rl,n=>Math.abs(n)===1/0?1:0,"bool"),zte={kernelName:Rl,backendName:"cpu",kernelFunc:fPe};N();var dPe=Ke(Ml,n=>Number.isNaN(n)?1:0,"bool"),Vte={kernelName:Ml,backendName:"cpu",kernelFunc:dPe};N();function hPe(n){let{backend:t,attrs:e}=n,{start:r,stop:o,num:s}=e,i=cN(r,o,s);return t.makeTensorInfo([i.length],"float32",i)}var Ute={kernelName:gh,backendName:"cpu",kernelFunc:hPe};N();var mPe=Ke(Fl,n=>Math.log1p(n)),jte={kernelName:Fl,backendName:"cpu",kernelFunc:mPe};N();var gPe=wt((n,t)=>n&&t),xPe=Nt(lf,gPe,null,"bool"),Gte={kernelName:lf,backendName:"cpu",kernelFunc:xPe};N();var yPe=Ke(cf,n=>n?0:1,"bool"),Wte={kernelName:cf,backendName:"cpu",kernelFunc:yPe};N();var bPe=wt((n,t)=>n||t),vPe=Nt(uf,bPe,null,"bool"),Hte={kernelName:uf,backendName:"cpu",kernelFunc:vPe};N();function wPe(n){let{inputs:t,backend:e,attrs:r}=n,{x:o}=t,{depthRadius:s,bias:i,alpha:a,beta:l}=r;ge(o,"LRN");let c=o.shape[3],u=c-1,p=e.data.get(o.dataId).values,f=C.sizeFromShape(o.shape),d=new Float32Array(f);function h(m){let g=m%c,x=m-g+Math.max(0,g-s),b=m-g+Math.min(g+s,u),w=0;for(;x<=b;x++){let v=p[x];w+=v*v}return w}for(let m=0;m<f;m++){let g=h(m),x=p[m]*Math.pow(i+a*g,-l);d[m]=x}return e.makeTensorInfo(o.shape,o.dtype,d)}var qte={kernelName:pu,backendName:"cpu",kernelFunc:wPe};N();function CPe(n){let{inputs:t,backend:e,attrs:r}=n,{x:o,y:s,dy:i}=t,{depthRadius:a,bias:l,alpha:c,beta:u}=r;ge(i,"LRNGrad");let p=C.sizeFromShape(i.shape),f=i.shape[3],d=e.data.get(i.dataId).values,h=e.data.get(o.dataId).values,m=e.data.get(s.dataId).values,g=new Float32Array(p),x=p;for(let b=0;b<x;b++){let w=b%f,v=b-w+Math.max(0,w-a),S=b-w+Math.min(f,w+a+1),k=0;for(let A=v;A<S;A++)k+=Math.pow(h[A],2);k=c*k+l;for(let A=v;A<S;A++){let $=-2*c*u*h[A]*m[b]/k;b===A&&($+=Math.pow(k,-u)),$*=d[b],g[A]+=$}}return e.makeTensorInfo(i.shape,o.dtype,g)}var Kte={kernelName:xh,backendName:"cpu",kernelFunc:CPe};N();N();N();function wL(n){let{inputs:t,backend:e,attrs:r}=n,{x:o}=t,{reductionIndices:s,keepDims:i}=r,a=e,l=o.shape,c=l.length,u=C.parseAxisParam(s,l),p=u,f=M.getAxesPermutation(p,c),d=a.data.get(o.dataId).values;if(f!=null){let v=new Array(c);for(let S=0;S<v.length;S++)v[S]=l[f[S]];d=Uy(d,l,o.dtype,f,v),p=M.getInnerMostAxes(p.length,c),l=v}ge(o,"max"),M.assertAxesAreInnerMostDims("max",p,c);let[h,m]=M.computeOutAndReduceShapes(l,p),g=C.sizeFromShape(m),x=uN(d,g,h,o.dtype),b=a.write(x,h,o.dtype),w=h;return i&&(w=M.expandShapeToKeepDim(h,u)),{dataId:b,shape:w,dtype:o.dtype}}var Xte={kernelName:fu,backendName:"cpu",kernelFunc:wL};N();function IPe(n){let{inputs:t,backend:e,attrs:r}=n,{x:o}=t;ge(o,"maxPool");let{filterSize:s,strides:i,pad:a,dimRoundingMode:l}=r,c=1;C.assert(M.eitherStridesOrDilationsAreOne(i,c),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${i} and dilations '${c}'`);let u=M.computePool2DInfo(o.shape,s,i,c,a,l),p;if(u.filterWidth===1&&u.filterHeight===1&&C.arraysEqual(u.inShape,u.outShape))p=uo({inputs:{x:o},backend:e});else{let f=e.data.get(o.dataId).values,d=C.computeStrides(o.shape),h=Gy(f,o.shape,o.dtype,d,u,"max");p=e.makeTensorInfo(u.outShape,o.dtype,h.values)}return p}var Yte={kernelName:du,backendName:"cpu",kernelFunc:IPe};N();function SPe(n){let{inputs:t,backend:e,attrs:r}=n,{x:o}=t,{filterSize:s,strides:i,pad:a,dimRoundingMode:l,dataFormat:c}=r;ge(o,"maxPool3d");let u=M.computePool3DInfo(o.shape,s,i,1,a,l,c),p=e.data.get(o.dataId).values,f=TN(p,o.shape,o.dtype,C.computeStrides(o.shape),u,"max");return e.makeTensorInfo(f.shape,"float32",f.values)}var Zte={kernelName:hu,backendName:"cpu",kernelFunc:SPe};N();function TPe(n){let{inputs:t,backend:e,attrs:r}=n,{dy:o,input:s}=t,{filterSize:i,strides:a,pad:l,dimRoundingMode:c}=r;ge([o,s],"maxPool3DGrad");let u=M.computePool3DInfo(s.shape,i,a,1,l,c),p=e.bufferSync(s),f=Hee(p,u),d=u.strideDepth,h=u.strideHeight,m=u.strideWidth,g=u.dilationDepth,x=u.dilationHeight,b=u.dilationWidth,w=u.effectiveFilterDepth,v=u.effectiveFilterHeight,S=u.effectiveFilterWidth,k=w-1-u.padInfo.front,A=S-1-u.padInfo.left,$=v-1-u.padInfo.top,L=Pe(s.shape,"float32"),z=e.bufferSync(o);for(let W=0;W<u.batchSize;++W)for(let Q=0;Q<u.inChannels;++Q)for(let ne=0;ne<u.inDepth;++ne)for(let se=0;se<u.inHeight;++se)for(let te=0;te<u.inWidth;++te){let ie=ne-k,le=se-$,pe=te-A,me=0;for(let ve=0;ve<w;ve+=g){let we=(ie+ve)/d;if(!(we<0||we>=u.outDepth||Math.floor(we)!==we))for(let Se=0;Se<v;Se+=x){let Ce=(le+Se)/h;if(!(Ce<0||Ce>=u.outHeight||Math.floor(Ce)!==Ce))for(let De=0;De<S;De+=b){let Ne=(pe+De)/m;if(Ne<0||Ne>=u.outWidth||Math.floor(Ne)!==Ne)continue;let Re=w*v*S-1-f.get(W,we,Ce,Ne,Q),qe=ve*v*S+Se*S+De,nt=Re===qe?1:0;if(nt===0)continue;let Qe=z.get(W,we,Ce,Ne,Q);me+=Qe*nt}}}L.set(me,W,ne,se,te,Q)}return e.makeTensorInfo(L.shape,L.dtype,L.values)}var Qte={kernelName:bh,backendName:"cpu",kernelFunc:TPe};N();function EPe(n){let{inputs:t,backend:e,attrs:r}=n,{dy:o,input:s,output:i}=t,a=s;ge([s,i],"maxPoolGrad");let{filterSize:l,strides:c,pad:u,dimRoundingMode:p}=r,f=M.computePool2DInfo(a.shape,l,c,1,u,p),d=e.data.get(a.dataId).values,h=Pe(f.outShape,a.dtype,SN(d,a.shape,a.dtype,f).values),m=f.strideHeight,g=f.strideWidth,x=f.dilationHeight,b=f.dilationWidth,w=f.effectiveFilterHeight,v=f.effectiveFilterWidth,S=v-1-f.padInfo.left,k=w-1-f.padInfo.top,A=Pe(a.shape,"float32"),$=e.data.get(o.dataId).values,L=Pe(o.shape,"float32",$);for(let z=0;z<f.batchSize;++z)for(let W=0;W<f.inChannels;++W)for(let Q=0;Q<f.inHeight;++Q)for(let ne=0;ne<f.inWidth;++ne){let se=Q-k,te=ne-S,ie=0;for(let le=0;le<w;le+=x){let pe=(se+le)/m;if(!(pe<0||pe>=f.outHeight||Math.floor(pe)!==pe))for(let me=0;me<v;me+=b){let ve=(te+me)/g;if(ve<0||ve>=f.outWidth||Math.floor(ve)!==ve)continue;let we=w*v-1-h.get(z,pe,ve,W),Se=le*v+me,Ce=we===Se?1:0;if(Ce===0)continue;let De=L.get(z,pe,ve,W);ie+=De*Ce}}A.set(ie,z,Q,ne,W)}return e.makeTensorInfo(A.shape,A.dtype,A.values)}var Jte={kernelName:yh,backendName:"cpu",kernelFunc:EPe};N();N();N();function ene(n,t,e,r,o){let s=C.computeStrides(t),i=Gy(n,t,e,s,o,"max"),a=SN(n,t,e,o,!0,r);return[i.values,a.values]}var tne={kernelName:vh,backendName:"cpu",kernelFunc:({inputs:n,attrs:t,backend:e})=>{let{x:r}=n,{filterSize:o,strides:s,pad:i,includeBatchInIndex:a}=t,l=e;ge(r,"MaxPoolWithArgmax");let c=l.data.get(r.dataId).values,u=M.computePool2DInfo(r.shape,o,s,[1,1],i),[p,f]=ene(c,r.shape,r.dtype,a,u),d=l.write(p,u.outShape,r.dtype),h=l.write(f,u.outShape,r.dtype);return[{dataId:d,shape:u.outShape,dtype:r.dtype},{dataId:h,shape:u.outShape,dtype:"int32"}]}};N();function NPe(n){let{inputs:t,backend:e,attrs:r}=n,{x:o}=t,{axis:s,keepDims:i}=r,a=C.parseAxisParam(s,o.shape),c=M.computeOutAndReduceShapes(o.shape,a)[1],u=C.sizeFromShape(c),p=[],f=e.makeTensorInfo([],"float32",new Float32Array([u]));p.push(f);let d=Mi({inputs:{x:o},backend:e,attrs:{dtype:"float32"}});p.push(d);let h=Yw({inputs:{a:d,b:f},backend:e});p.push(h);let m=xp({inputs:{x:h},backend:e,attrs:{axis:s,keepDims:i}});return p.forEach(g=>e.disposeIntermediateTensorInfo(g)),m}var nne={kernelName:mu,backendName:"cpu",kernelFunc:NPe};N();function DPe(n){let{inputs:t,backend:e,attrs:r}=n,{x:o}=t,{axis:s,keepDims:i}=r;ge(o,"min");let a=C.parseAxisParam(s,o.shape),l=a,c=M.getAxesPermutation(l,o.shape.length),u=o;c!=null&&(u=Gn({inputs:{x:o},backend:e,attrs:{perm:c}}),l=M.getInnerMostAxes(l.length,o.shape.length)),M.assertAxesAreInnerMostDims("min",l,u.shape.length);let[p,f]=M.computeOutAndReduceShapes(u.shape,l),d=C.sizeFromShape(f),h=C.makeZerosTypedArray(C.sizeFromShape(p),u.dtype),m=e.data.get(u.dataId).values;for(let x=0;x<h.length;++x){let b=x*d,w=m[b];for(let v=0;v<d;++v){let S=m[b+v];(Number.isNaN(S)||S<w)&&(w=S)}h[x]=w}c!=null&&e.disposeIntermediateTensorInfo(u);let g=e.makeTensorInfo(p,u.dtype,h);if(i){let x=M.expandShapeToKeepDim(p,a),b=Ct({inputs:{x:g},backend:e,attrs:{shape:x}});return e.disposeIntermediateTensorInfo(g),b}return g}var rne={kernelName:gu,backendName:"cpu",kernelFunc:DPe};N();function kPe(n){let{inputs:t,backend:e,attrs:r}=n,{x:o}=t,{paddings:s,mode:i}=r;ge(o,"mirrorPad");let a=s.map((w,v)=>w[0]+o.shape[v]+w[1]),l=s.map(w=>w[0]),c=s.map((w,v)=>w[0]+o.shape[v]),u=i==="reflect"?0:1,p=e.data.get(o.dataId).values,f=o.shape.length,d=C.computeStrides(o.shape),h=C.sizeFromShape(a),m=a.length,g=C.computeStrides(a),x=C.getTypedArrayFromDType(o.dtype,h);for(let w=0;w<h;w++){let v=C.indexToLoc(w,m,g);for(let k=0;k<m;k++)v[k]<l[k]?v[k]=l[k]*2-v[k]-u:v[k]>=c[k]&&(v[k]=(c[k]-1)*2-v[k]+u);v=v.map((k,A)=>k-l[A]);let S=C.locToIndex(v,f,d);x[w]=p[S]}return{dataId:e.write(x,a,o.dtype),shape:a,dtype:o.dtype}}var one={kernelName:xu,backendName:"cpu",kernelFunc:kPe};N();var _Pe=wt((n,t)=>{let e=n%t;return n<0&&t<0||n>=0&&t>=0?e:(e+t)%t}),APe=Nt(Ll,_Pe),sne={kernelName:Ll,backendName:"cpu",kernelFunc:APe};N();var ane=ad(iw());N();function CL(n){let{inputs:t,backend:e,attrs:r}=n,{logits:o}=t,{dim:s}=r,i=o.shape.length,a=s;if(a===-1&&(a=i-1),a!==i-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${i} and dim was ${a}`);let l=C.parseAxisParam([a],o.shape),c=wL({inputs:{x:o},backend:e,attrs:{reductionIndices:l,keepDims:!1}}),u=M.expandShapeToKeepDim(c.shape,l),p=Ct({inputs:{x:c},backend:e,attrs:{shape:u}}),f=Kw({inputs:{a:o,b:p},backend:e}),d=j$({inputs:{x:f},backend:e}),h=xp({inputs:{x:d},backend:e,attrs:{axis:l,keepDims:!1}}),m=Ct({inputs:{x:h},backend:e,attrs:{shape:u}}),g=Yw({inputs:{a:d,b:m},backend:e});return e.disposeIntermediateTensorInfo(c),e.disposeIntermediateTensorInfo(p),e.disposeIntermediateTensorInfo(f),e.disposeIntermediateTensorInfo(d),e.disposeIntermediateTensorInfo(h),e.disposeIntermediateTensorInfo(m),g}var ine={kernelName:Ou,backendName:"cpu",kernelFunc:CL};function RPe(n){let{inputs:t,backend:e,attrs:r}=n,{logits:o}=t,{numSamples:s,seed:i,normalized:a}=r;ge(o,"multinomial");let l=a?o:CL({inputs:{logits:o},backend:e,attrs:{dim:-1}}),c=l.shape[0],u=l.shape[1],p=e.data.get(l.dataId).values,f=[c,s],d=C.makeZerosTypedArray(C.sizeFromShape(f),"int32");for(let h=0;h<c;++h){let m=h*u,g=new Float32Array(u-1);g[0]=p[m];for(let w=1;w<g.length;++w)g[w]=g[w-1]+p[m+w];let x=ane.alea(i.toString()),b=h*s;for(let w=0;w<s;++w){let v=x();d[b+w]=g.length;for(let S=0;S<g.length;S++)if(v<g[S]){d[b+w]=S;break}}}return a||e.disposeIntermediateTensorInfo(l),e.makeTensorInfo(f,"int32",d)}var lne={kernelName:wh,backendName:"cpu",kernelFunc:RPe};N();var MPe=Jr.nonMaxSuppressionV3Impl;function OPe(n){let{inputs:t,backend:e,attrs:r}=n,{boxes:o,scores:s}=t,{maxOutputSize:i,iouThreshold:a,scoreThreshold:l}=r;ge(o,"NonMaxSuppression");let c=e.data.get(o.dataId).values,u=e.data.get(s.dataId).values,{selectedIndices:p}=MPe(c,u,i,a,l);return e.makeTensorInfo([p.length],"int32",new Int32Array(p))}var cne={kernelName:Ch,backendName:"cpu",kernelFunc:OPe};N();var FPe=Jr.nonMaxSuppressionV4Impl;function PPe(n){let{inputs:t,backend:e,attrs:r}=n,{boxes:o,scores:s}=t,{maxOutputSize:i,iouThreshold:a,scoreThreshold:l,padToMaxOutputSize:c}=r;ge(o,"NonMaxSuppressionPadded");let u=e.data.get(o.dataId).values,p=e.data.get(s.dataId).values,{selectedIndices:f,validOutputs:d}=FPe(u,p,i,a,l,c);return[e.makeTensorInfo([f.length],"int32",new Int32Array(f)),e.makeTensorInfo([],"int32",new Int32Array([d]))]}var une={kernelName:Ih,backendName:"cpu",kernelFunc:PPe};N();var $Pe=Jr.nonMaxSuppressionV5Impl;function LPe(n){let{inputs:t,backend:e,attrs:r}=n,{boxes:o,scores:s}=t,{maxOutputSize:i,iouThreshold:a,scoreThreshold:l,softNmsSigma:c}=r;ge(o,"NonMaxSuppressionWithScore");let u=e.data.get(o.dataId).values,p=e.data.get(s.dataId).values,f=i,d=a,h=l,m=c,{selectedIndices:g,selectedScores:x}=$Pe(u,p,f,d,h,m);return[e.makeTensorInfo([g.length],"int32",new Int32Array(g)),e.makeTensorInfo([x.length],"float32",new Float32Array(x))]}var pne={kernelName:Sh,backendName:"cpu",kernelFunc:LPe};N();function BPe(n){let{inputs:t,backend:e,attrs:r}=n,{indices:o}=t,{dtype:s,depth:i,onValue:a,offValue:l}=r;ge(o,"oneHot");let c=C.sizeFromShape(o.shape),u=new Float32Array(c*i);u.fill(l);let p=e.data.get(o.dataId).values;for(let f=0;f<c;++f)p[f]>=0&&p[f]<i&&(u[f*i+p[f]]=a);return e.makeTensorInfo([...o.shape,i],s,u)}var fne={kernelName:vu,backendName:"cpu",kernelFunc:BPe};N();N();function Jw(n){let{inputs:t,backend:e}=n,{x:r}=t;if(r.dtype==="string")throw new Error("zerosLike is not supported for string tensors");if(r.dtype==="complex64"){let o=Ri({inputs:{input:r},backend:e}),s=Jw({inputs:{x:o},backend:e}),i=wc({inputs:{input:r},backend:e}),a=Jw({inputs:{x:i},backend:e}),l=Ar({inputs:{real:s,imag:a},backend:e});return e.disposeIntermediateTensorInfo(o),e.disposeIntermediateTensorInfo(s),e.disposeIntermediateTensorInfo(i),e.disposeIntermediateTensorInfo(a),l}else return Qw({backend:e,attrs:{shape:r.shape,value:0,dtype:r.dtype}})}var dne={kernelName:$u,backendName:"cpu",kernelFunc:Jw};function hne(n){let{inputs:t,backend:e}=n,{x:r}=t;if(r.dtype==="string")throw new Error("onesLike is not supported for string tensors");if(r.dtype==="complex64"){let o=Ri({inputs:{input:r},backend:e}),s=hne({inputs:{x:o},backend:e}),i=wc({inputs:{input:r},backend:e}),a=Jw({inputs:{x:i},backend:e}),l=Ar({inputs:{real:s,imag:a},backend:e});return e.disposeIntermediateTensorInfo(o),e.disposeIntermediateTensorInfo(s),e.disposeIntermediateTensorInfo(i),e.disposeIntermediateTensorInfo(a),l}else return Qw({backend:e,attrs:{shape:r.shape,value:1,dtype:r.dtype}})}var mne={kernelName:bu,backendName:"cpu",kernelFunc:hne};N();function IL(n){let{inputs:t,backend:e,attrs:r}=n,{axis:o}=r;if(t.length===1)return Wy({inputs:{input:t[0]},backend:e,attrs:{dim:o}});let s=t[0].shape,i=t[0].dtype;t.forEach(u=>{C.assertShapesMatch(s,u.shape,"All tensors passed to stack must have matching shapes"),C.assert(i===u.dtype,()=>"All tensors passed to stack must have matching dtypes")});let a=[],l=t.map(u=>{let p=Wy({inputs:{input:u},backend:e,attrs:{dim:o}});return a.push(p),p}),c=Zf({inputs:l,backend:e,attrs:{axis:o}});return a.forEach(u=>e.disposeIntermediateTensorInfo(u)),c}var gne={kernelName:wu,backendName:"cpu",kernelFunc:IL};N();function zPe(n){let{inputs:t,backend:e,attrs:r}=n,{x:o}=t,{paddings:s,constantValue:i}=r;ge(o,"pad");let a=s.map((b,w)=>b[0]+o.shape[w]+b[1]),l=s.map(b=>b[0]),c=e.data.get(o.dataId).values,u=C.sizeFromShape(o.shape),p=o.shape.length,f=C.computeStrides(o.shape),d=C.sizeFromShape(a),h=a.length,m=C.computeStrides(a),g=C.getTypedArrayFromDType(o.dtype,d);i!==0&&g.fill(i);for(let b=0;b<u;b++){let v=C.indexToLoc(b,p,f).map((k,A)=>k+l[A]),S=C.locToIndex(v,h,m);g[S]=c[b]}return{dataId:e.write(g,a,o.dtype),shape:a,dtype:o.dtype}}var NN={kernelName:Cu,backendName:"cpu",kernelFunc:zPe};N();var VPe=wt((n,t)=>Math.pow(n,t)),UPe=Nt(zl,VPe),xne={kernelName:zl,backendName:"cpu",kernelFunc:UPe};N();function jPe(n){let{inputs:t,backend:e,attrs:r}=n,{paramsNestedSplits:o,paramsDenseValues:s,indices:i}=t,{outputRaggedRank:a}=r,l=o.map(x=>e.data.get(x.dataId).values),c=o.map(x=>x.shape),u=e.data.get(s.dataId).values,p=e.data.get(i.dataId).values,[f,d,h]=pN(l,c,u,s.shape,s.dtype,p,i.shape,a),m=f.map(x=>e.makeTensorInfo([x.length],"int32",x)),g=e.makeTensorInfo(h,s.dtype,d);return m.concat([g])}var yne={kernelName:Th,backendName:"cpu",kernelFunc:jPe};N();function GPe(n){let{inputs:t,backend:e}=n,{starts:r,limits:o,deltas:s}=t,i=e.data.get(r.dataId).values,a=e.data.get(o.dataId).values,l=e.data.get(s.dataId).values,[c,u]=fN(i,r.shape,r.dtype,a,o.shape,l,s.shape),p=e.makeTensorInfo([c.length],"int32",c),f=e.makeTensorInfo([u.length],r.dtype,u);return[p,f]}var bne={kernelName:Eh,backendName:"cpu",kernelFunc:GPe};N();function WPe(n){let{inputs:t,backend:e,attrs:r}=n,{shape:o,values:s,defaultValue:i,rowPartitionTensors:a}=t,{rowPartitionTypes:l}=r,c=e.data.get(o.dataId).values,u=e.data.get(s.dataId).values,p=e.data.get(i.dataId).values,f=a.map(g=>e.data.get(g.dataId).values),d=a.map(g=>g.shape),[h,m]=dN(c,o.shape,u,s.shape,s.dtype,p,i.shape,f,d,l);return e.makeTensorInfo(h,s.dtype,m)}var vne={kernelName:Nh,backendName:"cpu",kernelFunc:WPe};N();function HPe(n){let{backend:t,attrs:e}=n,{start:r,stop:o,dtype:s,step:i}=e,a=hN(r,o,i,s);return t.makeTensorInfo([a.length],s,a)}var wne={kernelName:Dh,backendName:"cpu",kernelFunc:HPe};N();var qPe=Ke(Vl,n=>1/n),Cne={kernelName:Vl,backendName:"cpu",kernelFunc:qPe};N();function KPe(n){let{inputs:t,backend:e,attrs:r}=n,{images:o}=t,{alignCorners:s,halfPixelCenters:i,size:a}=r;ge(o,"resizeBilinear");let l=C.computeStrides(o.shape),[c,u]=a,[p,f,d,h]=o.shape,m=e.data.get(o.dataId).values,g=new Float32Array(C.sizeFromShape([p,c,u,h])),x=[s&&c>1?f-1:f,s&&u>1?d-1:d],b=[s&&c>1?c-1:c,s&&u>1?u-1:u],w=0,v=x[0]/b[0],S=x[1]/b[1];for(let k=0;k<p;k++)for(let A=0;A<c;A++){let $;i?$=v*(A+.5)-.5:$=v*A;let L=Math.max(0,Math.floor($)),z=$-L,W=Math.min(f-1,Math.ceil($)),Q=k*l[0]+L*l[1],ne=k*l[0]+W*l[1];for(let se=0;se<u;se++){let te;i?te=S*(se+.5)-.5:te=S*se;let ie=Math.max(0,Math.floor(te)),le=te-ie,pe=Math.min(d-1,Math.ceil(te)),me=Q+ie*l[2],ve=ne+ie*l[2],we=Q+pe*l[2],Se=ne+pe*l[2];for(let Ce=0;Ce<h;Ce++){let De=m[me+Ce],Ne=m[ve+Ce],Re=m[we+Ce],qe=m[Se+Ce],nt=De+(Re-De)*le,Qe=Ne+(qe-Ne)*le,xt=nt+(Qe-nt)*z;g[w++]=xt}}}return e.makeTensorInfo([p,c,u,h],"float32",g)}var Ine={kernelName:Nu,backendName:"cpu",kernelFunc:KPe};N();function XPe(n){let{inputs:t,backend:e,attrs:r}=n,{images:o,dy:s}=t,{alignCorners:i}=r;ge([s,o],"resizeBilinearGrad");let a=C.computeStrides(o.shape),[l,c,u,p]=o.shape,[,f,d]=s.shape,h=new Float32Array(l*c*u*p),m=[i&&f>1?c-1:c,i&&d>1?u-1:u],g=[i&&f>1?f-1:f,i&&d>1?d-1:d],x=m[0]/g[0],b=m[1]/g[1],w=e.data.get(s.dataId).values,v=0;for(let S=0;S<l;S++){let k=S*a[0];for(let A=0;A<f;A++){let $=A*x,L=Math.floor($),z=Math.min(Math.ceil($),c-1),W=k+L*a[1],Q=k+z*a[1],ne=$-L,se=1-ne;for(let te=0;te<d;te++){let ie=te*b,le=Math.floor(ie),pe=Math.min(Math.ceil(ie),u-1),me=ie-le,ve=1-me,we=W+le*a[2],Se=W+pe*a[2],Ce=Q+le*a[2],De=Q+pe*a[2],Ne=se*ve,Re=se*me,qe=ne*ve,nt=ne*me;for(let Qe=0;Qe<p;Qe++){let xt=w[v++];h[we+Qe]+=xt*Ne,h[Se+Qe]+=xt*Re,h[Ce+Qe]+=xt*qe,h[De+Qe]+=xt*nt}}}}return e.makeTensorInfo([l,u,c,p],"float32",h)}var Sne={kernelName:Ah,backendName:"cpu",kernelFunc:XPe};N();function YPe(n){let{inputs:t,backend:e,attrs:r}=n,{images:o}=t,{alignCorners:s,halfPixelCenters:i,size:a}=r;ge(o,"resizeNearestNeighbor");let l=C.computeStrides(o.shape),[c,u]=a,[p,f,d,h]=o.shape,m=e.data.get(o.dataId).values,g=new Float32Array(p*c*u*h),x=[s&&c>1?f-1:f,s&&u>1?d-1:d],b=[s&&c>1?c-1:c,s&&u>1?u-1:u],w=x[0]/b[0],v=x[1]/b[1],S=0;for(let k=0;k<p;k++){let A=k*l[0];for(let $=0;$<c;$++){let L=i?w*($+.5):w*$,z=Math.min(f-1,s?Math.round(L):Math.floor(L));i&&(z=Math.max(0,z));let W=A+z*l[1];for(let Q=0;Q<u;Q++){let ne=i?v*(Q+.5):v*Q,se=Math.min(d-1,s?Math.round(ne):Math.floor(ne));i&&(se=Math.max(0,se));let te=W+se*l[2];for(let ie=0;ie<h;ie++){let le=m[te+ie];g[S++]=le}}}}return e.makeTensorInfo([p,c,u,h],o.dtype,g)}var Tne={kernelName:Eu,backendName:"cpu",kernelFunc:YPe};N();function ZPe(n){let{inputs:t,backend:e,attrs:r}=n,{images:o,dy:s}=t,{alignCorners:i}=r;ge([s,o],"resizeNearestNeighborGrad");let a=C.computeStrides(o.shape),l=C.computeStrides(s.shape),[c,u,p,f]=o.shape,[,d,h]=s.shape,m=new Float32Array(c*u*p*f),g=e.data.get(s.dataId).values,x=[i&&d>1?u-1:u,i&&h>1?p-1:p],b=[i&&d>1?d-1:d,i&&h>1?h-1:h],w=x[0]/b[0],v=x[1]/b[1],S=1/w,k=1/v,A=Math.ceil(S)*2+2,$=Math.ceil(k)*2+2;for(let L=0;L<c;L++){let z=L*a[0];for(let W=0;W<u;W++){let Q=z+W*a[1],ne=Math.floor(W*S),se=Math.floor(ne-A/2);for(let te=0;te<p;te++){let ie=Q+te*a[2],le=Math.floor(te*k),pe=Math.floor(le-$/2);for(let me=0;me<f;me++){let ve=0;for(let we=0;we<A;we++){let Se=we+se;if(Se<0||Se>=d)continue;let Ce=z+Se*l[1],De=Se*w,Ne=Math.min(u-1,i?Math.round(De):Math.floor(De));if(W===Ne)for(let Re=0;Re<$;Re++){let qe=Re+pe;if(qe<0||qe>=h)continue;let nt=Ce+qe*l[2],Qe=qe*v,xt=Math.min(p-1,i?Math.round(Qe):Math.floor(Qe));te===xt&&(ve+=g[nt+me])}}m[ie+me]=ve}}}}return e.makeTensorInfo(o.shape,o.dtype,m)}var Ene={kernelName:_h,backendName:"cpu",kernelFunc:ZPe};N();function QPe(n){let{inputs:t,backend:e,attrs:r}=n,{x:o}=t,{dims:s}=r;ge(o,"reverse");let i=o.shape.length,a=C.parseAxisParam(s,o.shape);if(i===0)return uo({inputs:{x:o},backend:e});let l=new Pt(o.shape,o.dtype),c=e.bufferSync(o);for(let u=0;u<l.size;u++){let p=l.indexToLoc(u),f=p.slice();a.forEach(d=>f[d]=o.shape[d]-1-f[d]),l.set(c.get(...f),...p)}return e.makeTensorInfo(l.shape,l.dtype,l.values)}var Nne={kernelName:Du,backendName:"cpu",kernelFunc:QPe};N();var Dne={kernelName:Kh,backendName:"cpu",kernelFunc:({inputs:n,attrs:t,backend:e})=>{let{image:r}=n,{radians:o,fillValue:s,center:i}=t,a=e,l=C.getTypedArrayFromDType(r.dtype,C.sizeFromShape(r.shape)),[c,u,p,f]=r.shape,[d,h]=M.getImageCenter(i,u,p),m=255,g=Math.sin(o),x=Math.cos(o),b=a.data.get(r.dataId).values;for(let v=0;v<c;v++){let S=v*p*u*f;for(let k=0;k<u;k++){let A=k*(p*f);for(let $=0;$<p;$++){let L=$*f;for(let z=0;z<f;z++){let W=[c,k,$,z],Q=W[2],ne=W[1],se=(Q-d)*x-(ne-h)*g,te=(Q-d)*g+(ne-h)*x;se=Math.round(se+d),te=Math.round(te+h);let ie=s;if(typeof s!="number"&&(z===3?ie=m:ie=s[z]),se>=0&&se<p&&te>=0&&te<u){let pe=te*(p*f),me=se*f,ve=S+pe+me+z;ie=b[ve]}let le=S+A+L+z;l[le]=ie}}}}return{dataId:a.write(l,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};N();var JPe=Ke(Gl,n=>{let t=Math.floor(n);return n-t<.5?Math.floor(n):n-t>.5?Math.ceil(n):t%2===0?t:t+1}),kne={kernelName:Gl,backendName:"cpu",kernelFunc:JPe};N();function e$e(n){let{inputs:t,backend:e,attrs:r}=n,{indices:o,updates:s}=t,{shape:i}=r,{sliceRank:a,numUpdates:l,sliceSize:c,strides:u,outputSize:p}=M.calculateShapes(s,o,i),f=!0,d=e.bufferSync(o),h=e.bufferSync(s),m=Da(d,h,i,p,c,l,a,u,0,f);return e.makeTensorInfo(i,m.dtype,m.values)}var _ne={kernelName:Rh,backendName:"cpu",kernelFunc:e$e};N();N();function t$e(n,t){let e=0,r=n.length,o=0;for(;e<r;)o=Math.floor((e+r)/2),n[o]<t?e=o+1:r=o;return r}function n$e(n,t){let e=0,r=n.length,o=0;for(;e<r;)o=Math.floor((e+r)/2),n[o]<=t?e=o+1:r=o;return r}function Ane(n,t,e,r,o,s){let i=C.getArrayFromDType("int32",e*o);for(let a=0;a<e;++a){let l=n.slice(a*r,(a+1)*r),c=a*o;for(let u=0;u<o;++u)i[c+u]=s==="left"?t$e(l,t[u+c]):n$e(l,t[u+c])}return i}function r$e(n){let{inputs:t,backend:e,attrs:r}=n,{sortedSequence:o,values:s}=t,{side:i}=r,a=e.data.get(o.dataId).values,l=e.data.get(s.dataId).values,c=Ane(a,l,o.shape[0],o.shape[1],s.shape[1],i);return e.makeTensorInfo(s.shape,"int32",c)}var Rne={kernelName:Oh,backendName:"cpu",kernelFunc:r$e};N();function o$e(n){let{inputs:t,backend:e}=n,{condition:r,t:o,e:s}=t;ge([r,o,s],"select");let i=r.shape.length,a=e.data.get(r.dataId).values,l=e.data.get(o.dataId).values,c=e.data.get(s.dataId).values,u=ar(o.dtype,s.dtype),p=C.makeZerosTypedArray(C.sizeFromShape(o.shape),u),f=0,d=i===0||i>1||o.shape.length===1?1:C.sizeFromShape(o.shape.slice(1));for(let h=0;h<a.length;h++)for(let m=0;m<d;m++)a[h]===1?p[f++]=l[h]:p[f++]=c[h];return e.makeTensorInfo(o.shape,u,p)}var Mne={kernelName:ku,backendName:"cpu",kernelFunc:o$e};N();var s$e=M.SELU_SCALEALPHA,i$e=M.SELU_SCALE,a$e=Ke(Hl,n=>n>=0?i$e*n:s$e*(Math.exp(n)-1)),One={kernelName:Hl,backendName:"cpu",kernelFunc:a$e};N();var l$e=Ke(Xl,n=>n<0?-1:n>0?1:0),Fne={kernelName:Xl,backendName:"cpu",kernelFunc:l$e};N();var c$e=Ke(ql,n=>Math.sin(n)),Pne={kernelName:ql,backendName:"cpu",kernelFunc:c$e};N();var u$e=Ke(Kl,n=>Math.sinh(n)),$ne={kernelName:Kl,backendName:"cpu",kernelFunc:u$e};N();var p$e=11920928955078125e-23,Lne=Math.log(p$e)+2,f$e=Ke(Zl,n=>{let t=n>-Lne,e=n<Lne,r=Math.exp(n),o;return e?o=r:t?o=n:o=Math.log(1+r),o}),Bne={kernelName:Zl,backendName:"cpu",kernelFunc:f$e};N();function d$e(n){let{inputs:t,backend:e,attrs:r}=n,{x:o}=t,{blockShape:s,paddings:i}=r;ge([o],"spaceToBatchND");let a=C.sizeFromShape(s),l=[[0,0]];l.push(...i);for(let k=1+s.length;k<o.shape.length;++k)l.push([0,0]);let c=NN.kernelFunc({inputs:{x:o},backend:e,attrs:{paddings:l,constantValue:0}}),u=M.getReshaped(c.shape,s,a,!1),p=M.getPermuted(u.length,s.length,!1),f=M.getReshapedPermuted(c.shape,s,a,!1),m=Ct({inputs:{x:c},backend:e,attrs:{shape:u}}),b=Gn({inputs:{x:m},backend:e,attrs:{perm:p}}),S=Ct({inputs:{x:b},backend:e,attrs:{shape:f}});return e.disposeIntermediateTensorInfo(c),e.disposeIntermediateTensorInfo(m),e.disposeIntermediateTensorInfo(b),S}var zne={kernelName:Ru,backendName:"cpu",kernelFunc:d$e};N();function h$e(n){let{inputs:t,backend:e}=n,{indices:r,values:o,denseShape:s,defaultValue:i}=t;if(s.shape.length!==1)throw new Error(`Dense shape must be a vector, saw:
        ${s.shape}`);if(r.shape.length!==2)throw new Error(`Indices must be a matrix, saw:
        ${r.shape}`);if(o.shape.length!==1)throw new Error(`Values must be a vector, saw:
        ${o.shape}`);if(i.shape.length!==0)throw new Error(`Default value must be a scalar, saw:
        ${i.shape}`);let a=e.data.get(r.dataId).values,l=e.data.get(o.dataId).values,c=e.data.get(s.dataId).values,u=e.data.get(i.dataId).values[0],[p,f,d,h,m]=mN(a,r.shape,r.dtype,l,o.dtype,c,u);return[e.makeTensorInfo(f,r.dtype,p),e.makeTensorInfo([f[0]],o.dtype,d),e.makeTensorInfo([h.length],"bool",new Uint8Array(h.map(g=>Number(g)))),e.makeTensorInfo([m.length],r.dtype,new Int32Array(m))]}var Vne={kernelName:Fh,backendName:"cpu",kernelFunc:h$e};N();function m$e(n){let{inputs:t,backend:e}=n,{inputIndices:r,inputShape:o,newShape:s}=t;if(r.shape.length!==2)throw new Error(`Input indices should be a matrix but received shape
        ${r.shape}`);if(o.shape.length!==1)throw new Error(`Input shape should be a vector but received shape
        ${o.shape}`);if(s.shape.length!==1)throw new Error(`Target shape should be a vector but received shape ${s.shape}`);let i=Array.from(e.data.get(o.dataId).values),a=e.data.get(r.dataId).values,l=Array.from(e.data.get(s.dataId).values),[c,u,p]=gN(a,r.shape,r.dtype,i,l);return[e.makeTensorInfo(u,r.dtype,c),e.makeTensorInfo([p.length],s.dtype,new Int32Array(p))]}var Une={kernelName:Ph,backendName:"cpu",kernelFunc:m$e};N();function g$e(n){let{inputs:t,backend:e}=n,{data:r,indices:o,segmentIds:s}=t;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(o.shape.length!==1)throw new Error(`Indices should be a vector but received shape
          ${o.shape}`);if(s.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
          ${s.shape}`);if(o.shape[0]!==s.shape[0])throw new Error("segmentIds and indices should have same size.");let i=e.data.get(r.dataId).values,a=e.data.get(o.dataId).values,l=e.data.get(s.dataId).values,[c,u]=jy(i,r.shape,r.dtype,a,l,!0);return e.makeTensorInfo(u,r.dtype,c)}var jne={kernelName:$h,backendName:"cpu",kernelFunc:g$e};N();function x$e(n){let{inputs:t,backend:e}=n,{data:r,indices:o,segmentIds:s}=t;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(o.shape.length!==1)throw new Error(`Indices should be a vector but received shape
         ${o.shape}`);if(s.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
         ${s.shape}`);if(o.shape[0]!==s.shape[0])throw new Error("segmentIds and indices should have same size.");let i=e.data.get(r.dataId).values,a=e.data.get(o.dataId).values,l=e.data.get(s.dataId).values,[c,u]=jy(i,r.shape,r.dtype,a,l);return e.makeTensorInfo(u,r.dtype,c)}var Gne={kernelName:Lh,backendName:"cpu",kernelFunc:x$e};N();function y$e(n){let{inputs:t,backend:e,attrs:r}=n,{sparseIndices:o,sparseValues:s,defaultValue:i}=t,{outputShape:a}=r,{sliceRank:l,numUpdates:c,sliceSize:u,strides:p,outputSize:f}=M.calculateShapes(s,o,a),d=!1,h=e.bufferSync(o),m;switch(s.dtype){case"bool":{let g=e.bufferSync(s),x=!!e.data.get(i.dataId).values[0];m=Da(h,g,a,f,u,c,l,p,x,d);break}case"float32":{let g=e.bufferSync(s),x=e.data.get(i.dataId).values[0];m=Da(h,g,a,f,u,c,l,p,x,d);break}case"int32":{let g=e.bufferSync(s),x=e.data.get(i.dataId).values[0];m=Da(h,g,a,f,u,c,l,p,x,d);break}case"string":{let g=e.bufferSync(s),x=C.decodeString(e.data.get(i.dataId).values[0]);m=Da(h,g,a,f,u,c,l,p,x,d);break}default:throw new Error(`Unsupported type ${s.dtype}`)}return e.makeTensorInfo(a,m.dtype,m.values)}var Wne={kernelName:Bh,backendName:"cpu",kernelFunc:y$e};N();N();function b$e(n){let{inputs:t,backend:e,attrs:r}=n,{x:o}=t,{numOrSizeSplits:s,axis:i}=r,a=C.parseAxisParam(i,o.shape)[0],l=M.prepareSplitSize(o,s,a),c=new Array(o.shape.length).fill(0),u=o.shape.slice();return l.map(p=>{let f=[...u];f[a]=p;let d=Fi({inputs:{x:o},backend:e,attrs:{begin:c,size:f}});return c[a]+=p,d})}var Hne={kernelName:Mu,backendName:"cpu",kernelFunc:b$e};N();var qne={kernelName:zh,backendName:"cpu",kernelFunc:({inputs:n,backend:t})=>{let{x:e}=n,r=t;ge(e,"square");let o=r.data.get(e.dataId).values,s=new Float32Array(o.length);for(let a=0;a<o.length;++a){let l=o[a];s[a]=l*l}return{dataId:r.write(s,e.shape,e.dtype),shape:e.shape,dtype:e.dtype}}};N();var v$e=Ke(rc,(n,t)=>{let e=t;return isNaN(n)?NaN:n>0?1:e.alpha}),Kne={kernelName:rc,backendName:"cpu",kernelFunc:v$e};N();function w$e(n){let{inputs:t,backend:e,attrs:r}=n,{x:o}=t,{begin:s,end:i,strides:a,beginMask:l,endMask:c,ellipsisMask:u,newAxisMask:p,shrinkAxisMask:f}=r;ge(o,"stridedSlice");let{finalShapeSparse:d,finalShape:h,isIdentity:m,sliceDim0:g,isSimpleSlice:x,begin:b,end:w,strides:v}=_r.sliceInfo(o.shape,s,i,a,l,c,u,p,f),S;if(m)S=Ct({inputs:{x:o},backend:e,attrs:{shape:h}});else if(g||x){C.assert(o.shape.length>=1,()=>`Input must have rank at least 1, got: ${o.shape.length}`);let k=_r.computeOutShape(b,w,v),A=Fi({inputs:{x:o},backend:e,attrs:{begin:b,size:k}});S=Ct({inputs:{x:A},backend:e,attrs:{shape:h}}),e.disposeIntermediateTensorInfo(A)}else{let k=e.bufferSync(o),A=xN(d,k,v,b);S=e.makeTensorInfo(h,A.dtype,A.values)}return S}var Xne={kernelName:Vh,backendName:"cpu",kernelFunc:w$e};N();function C$e(n){let{inputs:t,backend:e,attrs:r}=n,{separator:o,nGramWidths:s,leftPad:i,rightPad:a,padWidth:l,preserveShortSequences:c}=r,{data:u,dataSplits:p}=t,f=e.data.get(u.dataId).values,d=e.data.get(p.dataId).values,[h,m]=yN(f,d,o,s,i,a,l,c);return[e.makeTensorInfo([h.length],"string",h),e.makeTensorInfo(p.shape,"int32",m)]}var Yne={kernelName:Uh,backendName:"cpu",kernelFunc:C$e};N();function I$e(n){let{inputs:t,backend:e,attrs:r}=n,{skipEmpty:o}=r,{input:s,delimiter:i}=t;if(s.dtype!=="string")throw new Error("Input must be of datatype string");if(s.shape.length!==1)throw new Error(`Input must be a vector, got shape: ${s.shape}`);if(i.shape.length!==0)throw new Error(`Delimiter must be a scalar, got shape: ${i.shape}`);let a=e.data.get(s.dataId).values,l=e.data.get(i.dataId).values[0],[c,u,p]=bN(a,l,o),f=u.length;return[e.makeTensorInfo([f,2],"int32",c),e.makeTensorInfo([f],"string",u),e.makeTensorInfo([2],"int32",new Int32Array(p))]}var Zne={kernelName:jh,backendName:"cpu",kernelFunc:I$e};N();function S$e(n){let{inputs:t,backend:e,attrs:r}=n,{numBuckets:o}=r,{input:s}=t;if(s.dtype!=="string")throw new Error("Input must be of datatype string");if(o<=0)throw new Error("Number of buckets must be at least 1");let i=e.data.get(s.dataId).values,a=vN(i,o);return e.makeTensorInfo(s.shape,"int32",a)}var Qne={kernelName:Gh,backendName:"cpu",kernelFunc:S$e};N();var T$e=Ke(tc,n=>Math.tan(n)),Jne={kernelName:tc,backendName:"cpu",kernelFunc:T$e};N();var E$e=Ke(nc,n=>Math.tanh(n)),ere={kernelName:nc,backendName:"cpu",kernelFunc:E$e};N();function N$e(n){let{inputs:t,backend:e}=n,{tensor:r,indices:o,updates:s}=t,{sliceRank:i,numUpdates:a,sliceSize:l,strides:c,outputSize:u}=M.calculateShapes(s,o,r.shape),p=!1,f=e.bufferSync(o),d=e.bufferSync(s),h=e.bufferSync(r),m=Da(f,d,r.shape,u,l,a,i,c,h,p);return e.makeTensorInfo(r.shape,m.dtype,m.values)}var tre={kernelName:Mh,backendName:"cpu",kernelFunc:N$e};N();function D$e(n){let{inputs:t,backend:e,attrs:r}=n,{x:o}=t,{reps:s}=r;ge(o,"tile");let i=wN(e.bufferSync(o),s);return e.makeTensorInfo(i.shape,i.dtype,i.values)}var nre={kernelName:Ji,backendName:"cpu",kernelFunc:D$e};N();function k$e(n){let{inputs:t,backend:e,attrs:r}=n,{x:o}=t,{k:s,sorted:i}=r;ge(o,"topk");let a=e.data.get(o.dataId).values,[l,c]=CN(a,o.shape,o.dtype,s,i);return[e.makeTensorInfo(l.shape,l.dtype,l.values),e.makeTensorInfo(c.shape,c.dtype,c.values)]}var rre={kernelName:Wh,backendName:"cpu",kernelFunc:k$e};N();function _$e(n){let{inputs:t,attrs:e,backend:r}=n,{image:o,transforms:s}=t,{interpolation:i,fillMode:a,fillValue:l,outputShape:c}=e,[u,p,f,d]=o.shape,[h,m]=c??[p,f],g=[u,h,m,d],x=C.computeStrides(o.shape),b=x[0],w=x[1],v=x[2],S=C.computeStrides(g),k=S[0],A=S[1],$=S[2],L=C.getTypedArrayFromDType(o.dtype,C.sizeFromShape(g));L.fill(l);let z=r.data.get(o.dataId).values,W=r.data.get(s.dataId).values;for(let ne=0;ne<u;++ne){let se=s.shape[0]===1?W:W.subarray(ne*8,ne*8+8);for(let te=0;te<h;++te)for(let ie=0;ie<m;++ie)for(let le=0;le<d;++le){let pe,me=se[6]*ie+se[7]*te+1;if(me===0)continue;let ve=(se[0]*ie+se[1]*te+se[2])/me,we=(se[3]*ie+se[4]*te+se[5])/me,Se=ore(ve,f,a),Ce=ore(we,p,a);switch(i){case"nearest":pe=F$e(z,p,f,b,w,v,ne,Ce,Se,le,l);break;case"bilinear":pe=P$e(z,p,f,b,w,v,ne,Ce,Se,le,l);break;default:throw new Error(`Error in Transform: Expect 'nearest' or 'bilinear', but got ${i}`)}let De=ne*k+te*A+ie*$+le;L[De]=pe}return r.makeTensorInfo(g,o.dtype,L)}return{dataId:r.write(L,g,o.dtype),shape:o.shape,dtype:o.dtype}}var sre={kernelName:Hh,backendName:"cpu",kernelFunc:_$e};function ore(n,t,e){switch(e){case"reflect":return A$e(n,t);case"wrap":return R$e(n,t);case"nearest":return O$e(n,t);case"constant":default:return M$e(n,t)}}function A$e(n,t){let e=n;if(e<0)if(t<=1)e=0;else{let r=2*t;e<r&&(e=r*Math.trunc(-e/r)+e),e=e<-t?e+r:-e-1}else if(e>t-1)if(t<=1)e=0;else{let r=2*t;e-=r*Math.trunc(e/r),e>=t&&(e=r-e-1)}return C.clamp(0,e,t-1)}function R$e(n,t){let e=n;if(e<0)if(t<=1)e=0;else{let r=t-1;e+=t*(Math.trunc(-e/r)+1)}else if(e>t-1)if(t<=1)e=0;else{let r=t-1;e-=t*Math.trunc(e/r)}return C.clamp(0,e,t-1)}function M$e(n,t){return n}function O$e(n,t){return C.clamp(0,n,t-1)}function eC(n,t,e,r,o,s,i,a,l,c,u){let p=i*r+a*o+l*s+c;return 0<=a&&a<t&&0<=l&&l<e?n[p]:u}function F$e(n,t,e,r,o,s,i,a,l,c,u){let p=Math.round(a),f=Math.round(l);return eC(n,t,e,r,o,s,i,p,f,c,u)}function P$e(n,t,e,r,o,s,i,a,l,c,u){let p=Math.floor(a),f=Math.floor(l),d=p+1,h=f+1,m=(h-l)*eC(n,t,e,r,o,s,i,p,f,c,u)+(l-f)*eC(n,t,e,r,o,s,i,p,h,c,u),g=(h-l)*eC(n,t,e,r,o,s,i,d,f,c,u)+(l-f)*eC(n,t,e,r,o,s,i,d,h,c,u);return(d-a)*m+(a-p)*g}N();function $$e(n){let{inputs:t,attrs:e,backend:r}=n,{axis:o}=e,{x:s}=t;ge(s,"unique");let i=r.data.get(s.dataId).values,{outputValues:a,outputShape:l,indices:c}=IN(i,o,s.shape,s.dtype);return[r.makeTensorInfo(l,s.dtype,a),r.makeTensorInfo([c.length],"int32",c)]}var ire={kernelName:qh,backendName:"cpu",kernelFunc:$$e};N();function L$e(n){let{inputs:t,backend:e,attrs:r}=n,{value:o}=t,{axis:s}=r;s<0&&(s+=o.shape.length);let i=o.shape.length,a=o.shape[s],l=new Array(i-1),c=0;for(let d=0;d<i;d++)d!==s&&(l[c++]=o.shape[d]);let u=new Array(i).fill(0),p=o.shape.slice();p[s]=1;let f=new Array(a);for(let d=0;d<f.length;d++){u[s]=d;let h=Fi({inputs:{x:o},backend:e,attrs:{begin:u,size:p}});f[d]=Ct({inputs:{x:h},backend:e,attrs:{shape:l}}),e.disposeIntermediateTensorInfo(h)}return f}var are={kernelName:Fu,backendName:"cpu",kernelFunc:L$e};N();function B$e(n){let{inputs:t,backend:e,attrs:r}=n,{x:o,segmentIds:s}=t,{numSegments:i}=r;ge(o,"unsortedSegmentSum");let a=o.shape.length,l=s.shape.length,c=[],u=[],p=a-l,f=s;for(let h=0;h<p;++h){let m=Wy({inputs:{input:f},backend:e,attrs:{dim:h+1}});f=m,u.push(m)}for(let h=0;h<i;++h){let m=C.createScalarValue(h,"int32"),g=e.makeTensorInfo([],"int32",m),x=V$({inputs:{a:g,b:f},backend:e}),b=Mi({inputs:{x},backend:e,attrs:{dtype:"float32"}}),w=Ym({inputs:{a:b,b:o},backend:e}),v=xp({inputs:{x:w},backend:e,attrs:{axis:0,keepDims:!1}});c.push(v),u.push(g),u.push(x),u.push(b),u.push(w),u.push(v)}let d=IL({inputs:c,backend:e,attrs:{axis:0}});return u.forEach(h=>e.disposeIntermediateTensorInfo(h)),d}var lre={kernelName:Pu,backendName:"cpu",kernelFunc:B$e};var z$e=[Mee,VJ,Oee,Fee,HJ,Pee,$ee,Lee,Bee,zee,Vee,Uee,jee,Gee,Wee,qee,Kee,Xee,Yee,Ree,Zee,Qee,Jee,qJ,ete,WJ,KJ,tte,UJ,nte,ote,ste,ite,ate,lte,cte,ute,pte,fte,dte,hte,mte,gte,xte,yte,bte,vte,wte,Cte,Ite,Ste,Tte,Nte,Eee,Dte,XJ,kte,YJ,_te,ZJ,Ate,Rte,Mte,QJ,JJ,Ote,Fte,Pte,$te,eee,tee,jJ,Lte,rte,Bte,zte,Vte,Nee,nee,ree,Ute,oee,jte,Gte,Wte,Hte,qte,Kte,Xte,see,Yte,Zte,Qte,Jte,tne,nne,rne,iee,one,sne,lne,aee,lee,cne,une,pne,cee,fne,mne,gne,NN,xne,Dee,pee,yne,bne,vne,wne,GJ,Zw,Cne,kee,_ee,Aee,Ine,Sne,Tne,Ene,Nne,Dne,kne,gee,_ne,Rne,Mne,One,yee,Fne,Pne,$ne,bee,ine,Bne,zne,Vne,Une,jne,Gne,Wne,Hne,wee,qne,Cee,Iee,Kne,Xne,Yne,Zne,Qne,See,Ete,Jne,ere,tre,nre,rre,sre,uee,ire,are,lre,dne];for(let n of z$e)zx(n);N();N();N();N();var Qm={},DN={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function cre(n,t){Qm[n]=t}function Rs(n,t){if(!(n in Qm)||t!=null){let r=U$e(n,t);if(r!==null)Qm[n]=r;else return console.log("Could not get context for WebGL version",n),null}let e=Qm[n];return e==null||e.isContextLost()?(delete Qm[n],Rs(n)):(e.disable(e.DEPTH_TEST),e.disable(e.STENCIL_TEST),e.disable(e.BLEND),e.disable(e.DITHER),e.disable(e.POLYGON_OFFSET_FILL),e.disable(e.SAMPLE_COVERAGE),e.enable(e.SCISSOR_TEST),e.enable(e.CULL_FACE),e.cullFace(e.BACK),Qm[n])}function V$e(n){if(!Y().getBool("IS_SAFARI")&&typeof OffscreenCanvas<"u"&&n===2)return new OffscreenCanvas(300,150);if(typeof document<"u")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}function U$e(n,t){if(n!==1&&n!==2)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");let e=t??V$e(n);return e.addEventListener("webglcontextlost",r=>{r.preventDefault(),delete Qm[n]},!1),Y().getBool("SOFTWARE_WEBGL_ENABLED")&&(DN.failIfMajorPerformanceCaveat=!1),n===1?e.getContext("webgl",DN)||e.getContext("experimental-webgl",DN):e.getContext("webgl2",DN)}N();var Jm=function(n){return n[n.DENSE=0]="DENSE",n[n.SHARED_BATCH=1]="SHARED_BATCH",n}(Jm||{}),No=function(n){return n[n.RENDER=0]="RENDER",n[n.UPLOAD=1]="UPLOAD",n[n.PIXELS=2]="PIXELS",n[n.DOWNLOAD=3]="DOWNLOAD",n}(No||{}),po=function(n){return n[n.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",n[n.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",n[n.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",n[n.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",n[n.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16",n}(po||{});function eg(n,t){return[t,n]}function ure(n,t){return n*t}function tC(n){let t=C.sizeFromShape(n),e=Math.ceil(t/4);return C.sizeToSquarishShape(e)}function Cc(n,t){return[Math.max(1,Math.ceil(t/2)),Math.max(1,Math.ceil(n/2))]}function pre(n,t){let[e,r]=Cc(n,t);return e*r*4}function nC(n,t){let e=n,r,o,s,i,a,l,c,u,p,f;return Y().getNumber("WEBGL_VERSION")===2?(r=e.R32F,o=e.R16F,s=e.RGBA16F,i=e.RGBA32F,a=e.RED,c=4,u=1,p=e.HALF_FLOAT,f=e.FLOAT,l=e.RGBA8):(r=n.RGBA,o=n.RGBA,s=n.RGBA,i=e.RGBA,a=n.RGBA,c=4,u=4,p=t!=null?t.HALF_FLOAT_OES:null,f=n.FLOAT,l=n.RGBA),{internalFormatFloat:r,internalFormatHalfFloat:o,internalFormatPackedHalfFloat:s,internalFormatPackedFloat:i,textureFormatFloat:a,downloadTextureFormat:l,downloadUnpackNumChannels:c,defaultNumChannels:u,textureTypeHalfFloat:p,textureTypeFloat:f}}function Me(n,t){let e=t();return Y().getBool("DEBUG")&&j$e(n),e}function j$e(n){let t=n.getError();if(t!==n.NO_ERROR)throw new Error("WebGL Error: "+H$e(n,t))}var G$e=596e-10,W$e=65504;function fre(n){return!!(Y().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||n===0||G$e<Math.abs(n)&&Math.abs(n)<W$e)}function H$e(n,t){switch(t){case n.NO_ERROR:return"NO_ERROR";case n.INVALID_ENUM:return"INVALID_ENUM";case n.INVALID_VALUE:return"INVALID_VALUE";case n.INVALID_OPERATION:return"INVALID_OPERATION";case n.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case n.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case n.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return`Unknown error code ${t}`}}function rC(n,t){return yp(n,()=>n.getExtension(t),'Extension "'+t+'" not supported on this browser.')}function dre(n,t){let e=yp(n,()=>n.createShader(n.VERTEX_SHADER),"Unable to create vertex WebGLShader.");if(Me(n,()=>n.shaderSource(e,t)),Me(n,()=>n.compileShader(e)),n.getShaderParameter(e,n.COMPILE_STATUS)===!1)throw console.log(n.getShaderInfoLog(e)),new Error("Failed to compile vertex shader.");return e}function hre(n,t){let e=yp(n,()=>n.createShader(n.FRAGMENT_SHADER),"Unable to create fragment WebGLShader.");if(Me(n,()=>n.shaderSource(e,t)),Me(n,()=>n.compileShader(e)),Y().get("ENGINE_COMPILE_ONLY"))return e;if(n.getShaderParameter(e,n.COMPILE_STATUS)===!1)throw DL(t,n.getShaderInfoLog(e)),new Error("Failed to compile fragment shader.");return e}var q$e=/ERROR: [0-9]+:([0-9]+):/g;function DL(n,t){let e=q$e.exec(t);if(e==null){console.log(`Couldn't parse line number in error: ${t}`),console.log(n);return}let r=+e[1],o=n.split(`
`),s=o.length.toString().length+2,i=o.map((p,f)=>C.rightPad((f+1).toString(),s)+p),a=0;for(let p=0;p<i.length;p++)a=Math.max(i[p].length,a);let l=i.slice(0,r-1),c=i.slice(r-1,r),u=i.slice(r);console.log(l.join(`
`)),console.log(t.split(`
`)[0]),console.log(`%c ${C.rightPad(c[0],a)}`,"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(u.join(`
`))}function mre(n){return yp(n,()=>n.createProgram(),"Unable to create WebGLProgram.")}function gre(n,t){if(Me(n,()=>n.linkProgram(t)),!Y().get("ENGINE_COMPILE_ONLY")&&n.getProgramParameter(t,n.LINK_STATUS)===!1)throw console.log(n.getProgramInfoLog(t)),new Error("Failed to link vertex and fragment shaders.")}function _N(n,t){if(Me(n,()=>n.validateProgram(t)),n.getProgramParameter(t,n.VALIDATE_STATUS)===!1)throw console.log(n.getProgramInfoLog(t)),new Error("Shader program validation failed.")}function xre(n,t){let e=yp(n,()=>n.createBuffer(),"Unable to create WebGLBuffer");return Me(n,()=>n.bindBuffer(n.ARRAY_BUFFER,e)),Me(n,()=>n.bufferData(n.ARRAY_BUFFER,t,n.STATIC_DRAW)),e}function yre(n,t){let e=yp(n,()=>n.createBuffer(),"Unable to create WebGLBuffer");return Me(n,()=>n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,e)),Me(n,()=>n.bufferData(n.ELEMENT_ARRAY_BUFFER,t,n.STATIC_DRAW)),e}function bre(n){return yp(n,()=>n.createTexture(),"Unable to create WebGLTexture.")}function vre(n,t){let e=Y().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(n<=0||t<=0){let r=`[${n}x${t}]`;throw new Error("Requested texture size "+r+" is invalid.")}if(n>e||t>e){let r=`[${n}x${t}]`,o=`[${e}x${e}]`;throw new Error("Requested texture size "+r+" greater than WebGL maximum on this browser / GPU "+o+".")}}function wre(n){return yp(n,()=>n.createFramebuffer(),"Unable to create WebGLFramebuffer.")}function kL(n,t,e,r,o,s,i){let a=n.getAttribLocation(t,e);return a===-1?!1:(Me(n,()=>n.bindBuffer(n.ARRAY_BUFFER,r)),Me(n,()=>n.vertexAttribPointer(a,o,n.FLOAT,!1,s,i)),Me(n,()=>n.enableVertexAttribArray(a)),!0)}function K$e(n,t,e){Y$e(n,e),Me(n,()=>n.activeTexture(n.TEXTURE0+e)),Me(n,()=>n.bindTexture(n.TEXTURE_2D,t))}function Cre(n,t,e){return yp(n,()=>n.getUniformLocation(t,e),'uniform "'+e+'" not present in program.')}function Ire(n,t,e){return n.getUniformLocation(t,e)}function Sre(n,t,e,r){Me(n,()=>K$e(n,t,r)),Me(n,()=>n.uniform1i(e,r))}function AN(n,t,e){Me(n,()=>n.bindFramebuffer(n.FRAMEBUFFER,e)),Me(n,()=>n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,t,0))}function _L(n,t){Me(n,()=>n.bindFramebuffer(n.FRAMEBUFFER,t)),Me(n,()=>n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,null,0))}function oC(n){let t=n.checkFramebufferStatus(n.FRAMEBUFFER);if(t!==n.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+X$e(n,t))}function X$e(n,t){switch(t){case n.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case n.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case n.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case n.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return`unknown error ${t}`}}function yp(n,t,e){let r=Me(n,()=>t());if(r==null)throw new Error(e);return r}function Y$e(n,t){let e=n.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=t+n.TEXTURE0;if(r<n.TEXTURE0||r>e){let o=`[gl.TEXTURE0, gl.TEXTURE${e}]`;throw new Error(`textureUnit must be in ${o}.`)}}function Qf(n,t=2){return C.sizeFromShape(n.slice(0,n.length-t))}function Jf(n){if(n.length===0)throw Error("Cannot get rows and columns of an empty shape array.");return[n.length>1?n[n.length-2]:1,n[n.length-1]]}function sC(n){let t=[1,1,1];return n.length===0||n.length===1&&n[0]===1||(t=[Qf(n),...Jf(n)]),t}function Tre(n,t=!1){let e=Y().getNumber("WEBGL_MAX_TEXTURE_SIZE"),r=Y().getNumber("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE");r===1/0&&Y().getBool("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE")&&(r=e/2),t&&(e=e*2,r=r*2,n=n.map((a,l)=>l>=n.length-2?C.nearestLargerEven(n[l]):n[l]),n.length===1&&(n=[2,n[0]])),n.length!==2&&(n=C.squeezeShape(n).newShape);let o=C.sizeFromShape(n),s=null;n.length<=1&&o<=e?s=[1,o]:n.length===2&&n[0]<=e&&n[1]<=e?s=n:n.length===3&&n[0]*n[1]<=e&&n[2]<=e?s=[n[0]*n[1],n[2]]:n.length===3&&n[0]<=e&&n[1]*n[2]<=e?s=[n[0],n[1]*n[2]]:n.length===4&&n[0]*n[1]*n[2]<=e&&n[3]<=e?s=[n[0]*n[1]*n[2],n[3]]:n.length===4&&n[0]<=e&&n[1]*n[2]*n[3]<=e&&(s=[n[0],n[1]*n[2]*n[3]]);let i=s!=null&&Math.max(...s)>r&&Math.min(...s)<=(t?2:1)&&Math.min(...s)>0;if(s==null||i)if(t){let a=Qf(n),l=2,c=2;n.length&&([l,c]=Jf(n)),o=a*(l/2)*(c/2),s=C.sizeToSquarishShape(o).map(u=>u*2)}else s=C.sizeToSquarishShape(o);return s}function kN(n){return n%2===0}function tg(n,t){if(n=n.slice(-2),t=t.slice(-2),C.arraysEqual(n,t)||!n.length||!t.length||n[0]===0||n[1]===0||t[0]===0||t[1]===0)return!0;if(n.length!==t.length){let e=n[n.length-1],r=t[t.length-1];if(e===r||kN(e)&&kN(r)&&(n[0]===1||t[0]===1))return!0}return n[1]===t[1]&&kN(n[0])&&kN(t[0])}var TL,EL;function Ere(n){if(TL==null){let t=Rs(n);TL=t.getParameter(t.MAX_TEXTURE_SIZE)}return TL}function Nre(n){if(EL==null){let t=Rs(n);EL=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,EL)}function Dre(n){if(n===0)return 0;let t,e=Rs(n);return oi(e,"EXT_disjoint_timer_query_webgl2")&&n===2?t=2:oi(e,"EXT_disjoint_timer_query")?t=1:t=0,t}function oi(n,t){return n.getExtension(t)!=null}function AL(n){try{if(Rs(n)!=null)return!0}catch(t){return console.log("Error when getting WebGL context: ",t),!1}return!1}function kre(n){if(n===0)return!1;let t=Rs(n);if(n===1){if(!oi(t,"OES_texture_float"))return!1}else if(!oi(t,"EXT_color_buffer_float"))return!1;return NL(t)}function _re(n){if(n===0)return!1;let t=Rs(n);if(n===1){if(!oi(t,"OES_texture_float")||!oi(t,"WEBGL_color_buffer_float"))return!1}else{if(oi(t,"EXT_color_buffer_float"))return NL(t);let r="EXT_color_buffer_half_float";if(oi(t,r)){let o=t.getExtension(r);return Z$e(t,o)}return!1}return NL(t)}function NL(n){let t=nC(n),e=n.createTexture();n.bindTexture(n.TEXTURE_2D,e),n.texImage2D(n.TEXTURE_2D,0,t.internalFormatFloat,1,1,0,t.textureFormatFloat,t.textureTypeFloat,null);let s=n.createFramebuffer();n.bindFramebuffer(n.FRAMEBUFFER,s),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,e,0);let i=n.checkFramebufferStatus(n.FRAMEBUFFER)===n.FRAMEBUFFER_COMPLETE;return n.bindTexture(n.TEXTURE_2D,null),n.bindFramebuffer(n.FRAMEBUFFER,null),n.deleteTexture(e),n.deleteFramebuffer(s),i}function Z$e(n,t){let e=nC(n,t),r=n.createTexture();n.bindTexture(n.TEXTURE_2D,r),n.texImage2D(n.TEXTURE_2D,0,e.internalFormatHalfFloat,1,1,0,e.textureFormatFloat,e.textureTypeHalfFloat,null);let i=n.createFramebuffer();n.bindFramebuffer(n.FRAMEBUFFER,i),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,r,0);let a=n.checkFramebufferStatus(n.FRAMEBUFFER)===n.FRAMEBUFFER_COMPLETE;return n.bindTexture(n.TEXTURE_2D,null),n.bindFramebuffer(n.FRAMEBUFFER,null),n.deleteTexture(r),n.deleteFramebuffer(i),a}function Are(n){return n!==2?!1:Rs(n).fenceSync!=null}function Ic(n,t){Array.isArray(n)||(n=[n]),n.forEach(e=>{e!=null&&C.assert(e.dtype!=="complex64",()=>`${t} does not support complex64 tensors in the WebGL backend.`)})}var je=Y();je.registerFlag("HAS_WEBGL",()=>je.getNumber("WEBGL_VERSION")>0);je.registerFlag("WEBGL_VERSION",()=>AL(2)?2:AL(1)?1:0);je.registerFlag("WEBGL_CHECK_NUMERICAL_PROBLEMS",()=>!1);je.registerFlag("WEBGL_BUFFER_SUPPORTED",()=>je.get("WEBGL_VERSION")===2);je.registerFlag("WEBGL_CPU_FORWARD",()=>!0);je.registerFlag("WEBGL_FORCE_F16_TEXTURES",()=>!1);je.registerFlag("WEBGL_PACK",()=>je.getBool("HAS_WEBGL"));je.registerFlag("WEBGL_PACK_NORMALIZATION",()=>je.getBool("WEBGL_PACK"));je.registerFlag("WEBGL_PACK_CLIP",()=>je.getBool("WEBGL_PACK"));je.registerFlag("WEBGL_PACK_DEPTHWISECONV",()=>je.getBool("WEBGL_PACK"));je.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",()=>je.getBool("WEBGL_PACK"));je.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",()=>je.getBool("WEBGL_PACK"));je.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",()=>je.getBool("WEBGL_PACK"));je.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",()=>je.getBool("WEBGL_PACK"));je.registerFlag("WEBGL_PACK_REDUCE",()=>je.getBool("WEBGL_PACK"));je.registerFlag("WEBGL_LAZILY_UNPACK",()=>je.getBool("WEBGL_PACK"));je.registerFlag("WEBGL_CONV_IM2COL",()=>je.getBool("WEBGL_PACK"));je.registerFlag("WEBGL_PACK_CONV2DTRANSPOSE",()=>je.getBool("WEBGL_PACK"));je.registerFlag("WEBGL_MAX_TEXTURE_SIZE",()=>Ere(je.getNumber("WEBGL_VERSION")));je.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",()=>Nre(je.getNumber("WEBGL_VERSION")));je.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",()=>{let n=je.getNumber("WEBGL_VERSION");return n===0?0:Dre(n)});je.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",()=>je.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!Lu.isMobile());je.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",()=>kre(je.getNumber("WEBGL_VERSION")));je.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",()=>je.getBool("WEBGL_FORCE_F16_TEXTURES")?!1:je.getBool("WEBGL_RENDER_FLOAT32_CAPABLE"));je.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",()=>_re(je.getNumber("WEBGL_VERSION")));je.registerFlag("WEBGL_FENCE_API_ENABLED",()=>Are(je.getNumber("WEBGL_VERSION")));je.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",()=>je.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0);je.registerFlag("WEBGL_DELETE_TEXTURE_THRESHOLD",()=>-1,n=>{if(typeof n!="number")throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be a number but got ${n}.`);if(n<0&&n!==-1)throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be -1 (indicating never delete) or at least 0, but got ${n}.`)});je.registerFlag("WEBGL_FLUSH_THRESHOLD",()=>Lu.isMobile()?1:-1,n=>{if(typeof n!="number")throw new Error(`WEBGL_FLUSH_THRESHOLD must be a number but got ${n}.`);if(n<0&&n!==-1)throw new Error(`WEBGL_FLUSH_THRESHOLD must be -1 (indicating never manual flush) or at least 0, but got ${n}.`)});je.registerFlag("CPU_HANDOFF_SIZE_THRESHOLD",()=>128);je.registerFlag("WEBGL_USE_SHAPES_UNIFORMS",()=>!1);je.registerFlag("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD",()=>1e5);je.registerFlag("TOPK_K_CPU_HANDOFF_THRESHOLD",()=>128);je.registerFlag("WEBGL_EXP_CONV",()=>!1);je.registerFlag("SOFTWARE_WEBGL_ENABLED",()=>je.getBool("IS_TEST"));je.registerFlag("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE",()=>1/0);je.registerFlag("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE",()=>!1);je.registerFlag("WEBGL2_ISNAN_CUSTOM",()=>!1);je.registerFlag("ENGINE_COMPILE_ONLY",()=>!1);N();N();function Wn(){let n,t,e,r,o,s,i,a,l,c;return Y().getNumber("WEBGL_VERSION")===2?(n="#version 300 es",t="in",e="out",r="in",o="texture",s="outputColor",i="out vec4 outputColor;",a=Y().getBool("WEBGL2_ISNAN_CUSTOM")?`
      bool isnan_custom(float val) {
        uint floatToUint = floatBitsToUint(val);
        return (floatToUint & 0x7fffffffu) > 0x7f800000u;
      }

      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan_custom(val.x),
          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));
      }

      #define isnan(value) isnan_custom(value)
    `:"",l="",c=`
      #define round(value) newRound(value)
      int newRound(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 newRound(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `):(n="",t="attribute",e="varying",r="varying",o="texture2D",s="gl_FragColor",i="",a=`
      #define isnan(value) isnan_custom(value)
      bool isnan_custom(float val) {
        return (val > 0. || val < 1. || val == 0.) ? false : true;
      }
      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));
      }
    `,l=`
      uniform float INFINITY;

      bool isinf(float val) {
        return abs(val) == INFINITY;
      }
      bvec4 isinf(vec4 val) {
        return equal(abs(val), vec4(INFINITY));
      }
    `,c=`
      int round(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 round(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `),{version:n,attribute:t,varyingVs:e,varyingFs:r,texture2D:o,output:s,defineOutput:i,defineSpecialNaN:a,defineSpecialInf:l,defineRound:c}}N();N();N();function ka(n,t,e="index"){let r=C.computeStrides(t);return r.map((o,s)=>{let i=`int ${n[s]} = ${e} / ${o}`,a=s===r.length-1?`int ${n[s+1]} = ${e} - ${n[s]} * ${o}`:`index -= ${n[s]} * ${o}`;return`${i}; ${a};`}).join("")}function ng(n,t,e="index"){let r=C.computeStrides(t);return r.map((o,s)=>{let i=`int ${n[s]} = ${e} / outShapeStrides[${s}]`,a=s===r.length-1?`int ${n[s+1]} = ${e} - ${n[s]} * outShapeStrides[${s}]`:`index -= ${n[s]} * outShapeStrides[${s}]`;return`${i}; ${a};`}).join("")}function Q$e(n,t){let e=n.length,r=n.map(s=>`${t}[${s}]`),o=new Array(e-1);o[e-2]=r[e-1];for(let s=e-3;s>=0;--s)o[s]=`(${o[s+1]} * ${r[s+1]})`;return o}function Rre(n,t,e="index"){let r=n.map((s,i)=>i),o=Q$e(r,t);return o.map((s,i)=>{let a=`int ${n[i]} = ${e} / ${o[i]}`,l=i===o.length-1?`int ${n[i+1]} = ${e} - ${n[i]} * ${o[i]}`:`index -= ${n[i]} * ${o[i]}`;return`${a}; ${l};`}).join("")}function Hy(n){let t=C.computeStrides(n).map(e=>e.toString());return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * ${t[0]} + coords.y * ${t[1]} + coords.z;
  }
`}function qy(){return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;
  }
`}var MN=`
  const float FLOAT_MAX = 1.70141184e38;
  const float FLOAT_MIN = 1.17549435e-38;

  lowp vec4 encode_float(highp float v) {
    if (isnan(v)) {
      return vec4(255, 255, 255, 255);
    }

    highp float av = abs(v);

    if(av < FLOAT_MIN) {
      return vec4(0.0, 0.0, 0.0, 0.0);
    } else if(v > FLOAT_MAX) {
      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
    } else if(v < -FLOAT_MAX) {
      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
    }

    highp vec4 c = vec4(0,0,0,0);

    highp float e = floor(log2(av));
    highp float m = exp2(fract(log2(av))) - 1.0;

    c[2] = floor(128.0 * m);
    m -= c[2] / 128.0;
    c[1] = floor(32768.0 * m);
    m -= c[1] / 32768.0;
    c[0] = floor(8388608.0 * m);

    highp float ebias = e + 127.0;
    c[3] = floor(ebias / 2.0);
    ebias -= c[3] * 2.0;
    c[2] += floor(ebias) * 128.0;

    c[3] += 128.0 * step(0.0, -v);

    return c / 255.0;
  }
`;var{getBroadcastDims:Mre}=M;function Ore(n,t,e){let r=[];if(n.forEach(d=>{let h=C.sizeFromShape(d.shapeInfo.logicalShape);if(d.shapeInfo.isUniform?r.push(`uniform float ${d.name}${h>1?`[${h}]`:""};`):(r.push(`uniform sampler2D ${d.name};`),r.push(`uniform int offset${d.name};`)),e.enableShapeUniforms){let{uniformShape:m}=ON(e.packedInputs,d.shapeInfo.logicalShape,d.shapeInfo.texShape);switch(m.length){case 1:r.push(`uniform int ${d.name}Shape;`);break;case 2:r.push(`uniform ivec2 ${d.name}Shape;`);break;case 3:r.push(`uniform ivec3 ${d.name}Shape;`);break;case 4:r.push(`uniform ivec4 ${d.name}Shape;`);break;default:break}r.push(`uniform ivec2 ${d.name}TexShape;`)}}),e.enableShapeUniforms){switch(t.logicalShape.length){case 1:r.push("uniform int outShape;");break;case 2:r.push("uniform ivec2 outShape;"),r.push("uniform int outShapeStrides;");break;case 3:r.push("uniform ivec3 outShape;"),r.push("uniform ivec2 outShapeStrides;");break;case 4:r.push("uniform ivec4 outShape;"),r.push("uniform ivec3 outShapeStrides;");break;default:break}r.push("uniform ivec2 outTexShape;")}e.customUniforms&&e.customUniforms.forEach(d=>{r.push(`uniform ${d.type} ${d.name}${d.arrayIndex?`[${d.arrayIndex}]`:""};`)});let o=r.join(`
`),s=n.map(d=>J$e(d,t,e.packedInputs,e.enableShapeUniforms)).join(`
`),i=t.texShape,a=Wn(),l=nLe(a),c,u,p=sLe(a);return t.isPacked?(c=eLe(t.logicalShape,i,e.enableShapeUniforms),u=oLe(a)):(c=tLe(t.logicalShape,i,e.enableShapeUniforms),u=rLe(a)),e.packedInputs&&(p+=cLe),[p,l,u,o,c,s,e.userCode].join(`
`)}function Xy(n,t=!1){let e=n.shapeInfo.logicalShape;switch(e.length){case 0:return wLe(n,t);case 1:return ILe(n,t);case 2:return TLe(n,t);case 3:return NLe(n,t);case 4:return kLe(n,t);case 5:return _Le(n);case 6:return ALe(n);default:throw new Error(`${e.length}-D input sampling is not yet supported`)}}function Fre(n,t){switch(n.shapeInfo.logicalShape.length){case 0:return vLe(n);case 1:return CLe(n,t);case 2:return SLe(n,t);case 3:return ELe(n,t);default:return DLe(n,t)}}function J$e(n,t,e=!1,r){let o="";e?o+=Fre(n,r):o+=Xy(n,r);let s=n.shapeInfo.logicalShape,i=t.logicalShape;return s.length<=i.length&&(e?o+=RLe(n,t):o+=MLe(n,t)),o}function eLe(n,t,e){switch(n.length){case 0:return Pre();case 1:return uLe(n,t,e);case 2:return yLe(n,t,e);case 3:return fLe(n,t,e);default:return hLe(n,t,e)}}function tLe(n,t,e){switch(n.length){case 0:return Pre();case 1:return pLe(n,t,e);case 2:return bLe(n,t,e);case 3:return dLe(n,t,e);case 4:return mLe(n,t,e);case 5:return gLe(n,t);case 6:return xLe(n,t);default:throw new Error(`${n.length}-D output sampling is not yet supported`)}}function nLe(n){return`
    float sampleTexture(sampler2D textureSampler, vec2 uv) {
      return ${n.texture2D}(textureSampler, uv).r;
    }
  `}function rLe(n){return`
    void setOutput(float val) {
      ${n.output} = vec4(val, 0, 0, 0);
    }
  `}function oLe(n){return`
    void setOutput(vec4 val) {
      ${n.output} = val;
    }
  `}function sLe(n){return`${n.version}
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    ${n.varyingFs} vec2 resultUV;
    ${n.defineOutput}
    const vec2 halfCR = vec2(0.5, 0.5);

    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    uniform float NAN;
    ${n.defineSpecialNaN}
    ${n.defineSpecialInf}
    ${n.defineRound}

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    int idiv(int a, int b, float sign) {
      int res = a / b;
      int mod = imod(a, b);
      if (sign < 0. && mod != 0) {
        res -= 1;
      }
      return res;
    }

    //Based on the work of Dave Hoskins
    //https://www.shadertoy.com/view/4djSRW
    #define HASHSCALE1 443.8975
    float random(float seed){
      vec2 p = resultUV * seed;
      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);
      p3 += dot(p3, p3.yzx + 19.19);
      return fract((p3.x + p3.y) * p3.z);
    }

    ${iLe}
    ${aLe}
    ${lLe}
  `}var iLe=`
vec2 uvFromFlat(int texNumR, int texNumC, int index) {
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
  int texelIndex = index / 2;
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,aLe=`
vec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,
  int texNumC, int row, int col) {
  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,lLe=`
vec2 packedUVfrom3D(int texNumR, int texNumC,
    int texelsInBatch, int texelsInLogicalRow, int b,
    int row, int col) {
  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,cLe=`
  float getChannel(vec4 frag, vec2 innerDims) {
    vec2 modCoord = mod(innerDims, 2.);
    return modCoord.x == 0. ?
      (modCoord.y == 0. ? frag.r : frag.g) :
      (modCoord.y == 0. ? frag.b : frag.a);
  }
  float getChannel(vec4 frag, int dim) {
    float modCoord = mod(float(dim), 2.);
    return modCoord == 0. ? frag.r : frag.g;
  }
`;function Pre(){return`
    int getOutputCoords() {
      return 0;
    }
  `}function uLe(n,t,e){let r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];return r[0]===1?e?`
      int getOutputCoords() {
        return 2 * int(resultUV.x * ceil(float(outTexShape[1]) / 2.0));
      }
    `:`
      int getOutputCoords() {
        return 2 * int(resultUV.x * ${r[1]}.0);
      }
    `:r[1]===1?e?`
      int getOutputCoords() {
        return 2 * int(resultUV.y * ceil(float(outTexShape[0]) / 2.0));
      }
    `:`
      int getOutputCoords() {
        return 2 * int(resultUV.y * ${r[0]}.0);
      }
    `:e?`
    int getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      return 2 * (resTexRC.x * packedTexShape[1] + resTexRC.y);
    }
  `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      return 2 * (resTexRC.x * ${r[1]} + resTexRC.y);
    }
  `}function pLe(n,t,e){return t[0]===1?e?`
      int getOutputCoords() {
        return int(resultUV.x * float(outTexShape[1]));
      }
    `:`
      int getOutputCoords() {
        return int(resultUV.x * ${t[1]}.0);
      }
    `:t[1]===1?e?`
      int getOutputCoords() {
        return int(resultUV.y * float(outTexShape[0]));
      }
    `:`
      int getOutputCoords() {
        return int(resultUV.y * ${t[0]}.0);
      }
    `:e?`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(outTexShape[0], outTexShape[1]));
      return resTexRC.x * outTexShape[1] + resTexRC.y;
    }
  `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${t[0]}, ${t[1]}));
      return resTexRC.x * ${t[1]} + resTexRC.y;
    }
  `}function fLe(n,t,e){if(e)return`
    ivec3 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      int texelsInLogicalRow = int(ceil(float(outShape[2]) / 2.0));
      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;

      int b = index / texelsInBatch;
      index -= b * texelsInBatch;

      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec3(b, r, c);
    }
  `;let r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],o=Math.ceil(n[2]/2),s=o*Math.ceil(n[1]/2);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      int index = resTexRC.x * ${r[1]} + resTexRC.y;

      int b = index / ${s};
      index -= b * ${s};

      int r = 2 * (index / ${o});
      int c = imod(index, ${o}) * 2;

      return ivec3(b, r, c);
    }
  `}function dLe(n,t,e){if(e)return`
  ivec3 getOutputCoords() {
    ivec2 resTexRC = ivec2(resultUV.yx *
                           vec2(outTexShape[0], outTexShape[1]));
    int index = resTexRC.x * outTexShape[1] + resTexRC.y;
    ${ng(["r","c","d"],n)}
    return ivec3(r, c, d);
  }
`;let r=ka(["r","c","d"],n);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${t[0]}, ${t[1]}));
      int index = resTexRC.x * ${t[1]} + resTexRC.y;
      ${r}
      return ivec3(r, c, d);
    }
  `}function hLe(n,t,e){if(e)return`
    ivec4 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;

      int texelsInLogicalRow = int(ceil(float(outShape[3]) / 2.0));
      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[2]) / 2.0));
      int texelsInBatchN = texelsInBatch * outShape[1];

      int b2 = index / texelsInBatchN;
      index -= b2 * texelsInBatchN;

      int b = index / texelsInBatch;
      index -= b * texelsInBatch;

      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec4(b2, b, r, c);
    }
  `;let r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],o=Math.ceil(n[n.length-1]/2),s=o*Math.ceil(n[n.length-2]/2),i=s,a="",l="b, r, c";for(let c=2;c<n.length-1;c++)i*=n[n.length-c-1],a=`
      int b${c} = index / ${i};
      index -= b${c} * ${i};
    `+a,l=`b${c}, `+l;return`
    ivec${n.length} getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      int index = resTexRC.x * ${r[1]} + resTexRC.y;

      ${a}

      int b = index / ${s};
      index -= b * ${s};

      int r = 2 * (index / ${o});
      int c = imod(index, ${o}) * 2;

      return ivec${n.length}(${l});
    }
  `}function mLe(n,t,e){if(e)return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(outTexShape[0], outTexShape[1]));
      int index = resTexRC.x * outTexShape[1] + resTexRC.y;
      ${ng(["r","c","d","d2"],n)}
      return ivec4(r, c, d, d2);
    }
  `;let r=ka(["r","c","d","d2"],n);return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${t[0]}, ${t[1]}));
      int index = resTexRC.x * ${t[1]} + resTexRC.y;
      ${r}
      return ivec4(r, c, d, d2);
    }
  `}function gLe(n,t){let e=ka(["r","c","d","d2","d3"],n);return`
    ivec5 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx * vec2(${t[0]},
                             ${t[1]}));

      int index = resTexRC.x * ${t[1]} + resTexRC.y;

      ${e}

      ivec5 outShape = ivec5(r, c, d, d2, d3);
      return outShape;
    }
  `}function xLe(n,t){let e=ka(["r","c","d","d2","d3","d4"],n);return`
    ivec6 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${t[0]}, ${t[1]}));
      int index = resTexRC.x * ${t[1]} + resTexRC.y;

      ${e}

      ivec6 result = ivec6(r, c, d, d2, d3, d4);
      return result;
    }
  `}function yLe(n,t,e){let r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];if(C.arraysEqual(n,t))return e?`
      ivec2 getOutputCoords() {
        ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
        return 2 * ivec2(resultUV.yx * vec2(packedTexShape[0], packedTexShape[1]));
      }
    `:`
      ivec2 getOutputCoords() {
        return 2 * ivec2(resultUV.yx * vec2(${r[0]}, ${r[1]}));
      }
    `;let o=Math.ceil(n[1]/2);return e?`
    ivec2 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      int texelsInLogicalRow = int(ceil(float(outShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));

      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;
      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec2(r, c);
    }
  `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));

      int index = resTexRC.x * ${r[1]} + resTexRC.y;
      int r = 2 * (index / ${o});
      int c = imod(index, ${o}) * 2;

      return ivec2(r, c);
    }
  `}function bLe(n,t,e){return C.arraysEqual(n,t)?e?`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(outTexShape[0], outTexShape[1]));
      }
    `:`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(${t[0]}, ${t[1]}));
      }
    `:n[1]===1?e?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(outTexShape[0], outTexShape[1]));
        int index = resTexRC.x * outTexShape[1] + resTexRC.y;
        return ivec2(index, 0);
      }
    `:`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${t[0]}, ${t[1]}));
        int index = resTexRC.x * ${t[1]} + resTexRC.y;
        return ivec2(index, 0);
      }
    `:n[0]===1?e?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(outTexShape[0], outTexShape[1]));
        int index = resTexRC.x * outTexShape[1] + resTexRC.y;
        return ivec2(0, index);
      }
    `:`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${t[0]}, ${t[1]}));
        int index = resTexRC.x * ${t[1]} + resTexRC.y;
        return ivec2(0, index);
      }
    `:e?`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(outTexShape[0], outTexShape[1]));
      int index = resTexRC.x * outTexShape[1] + resTexRC.y;
      int r = index / outShape[1];
      int c = index - r * outShape[1];
      return ivec2(r, c);
    }
  `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${t[0]}, ${t[1]}));
      int index = resTexRC.x * ${t[1]} + resTexRC.y;
      int r = index / ${n[1]};
      int c = index - r * ${n[1]};
      return ivec2(r, c);
    }
  `}function rg(n){return`offset${n}`}function vLe(n){let t=n.name,e="get"+t.charAt(0).toUpperCase()+t.slice(1),r=Wn();return`
    vec4 ${e}() {
      return ${r.texture2D}(${t}, halfCR);
    }
  `}function wLe(n,t){let e=n.name,r="get"+e.charAt(0).toUpperCase()+e.slice(1);if(n.shapeInfo.isUniform)return`float ${r}() {return ${e};}`;let[o,s]=n.shapeInfo.texShape;if(o===1&&s===1)return`
      float ${r}() {
        return sampleTexture(${e}, halfCR);
      }
    `;let i=rg(e);if(t)return`
    float ${r}() {
      vec2 uv = uvFromFlat(${e}TexShape[0], ${e}TexShape[1], ${i});
      return sampleTexture(${e}, uv);
    }
  `;let[a,l]=n.shapeInfo.texShape;return`
    float ${r}() {
      vec2 uv = uvFromFlat(${a}, ${l}, ${i});
      return sampleTexture(${e}, uv);
    }
  `}function CLe(n,t){let e=n.name,r="get"+e.charAt(0).toUpperCase()+e.slice(1),o=n.shapeInfo.texShape,s=Wn();if(t)return`
    vec4 ${r}(int index) {
      ivec2 packedTexShape = ivec2(ceil(float(${e}TexShape[0]) / 2.0), ceil(float(${e}TexShape[1]) / 2.0));
      vec2 uv = packedUVfrom1D(
        packedTexShape[0], packedTexShape[1], index);
      return ${s.texture2D}(${e}, uv);
    }
  `;let i=[Math.ceil(o[0]/2),Math.ceil(o[1]/2)];return`
    vec4 ${r}(int index) {
      vec2 uv = packedUVfrom1D(
        ${i[0]}, ${i[1]}, index);
      return ${s.texture2D}(${e}, uv);
    }
  `}function ILe(n,t){let e=n.name,r="get"+e.charAt(0).toUpperCase()+e.slice(1);if(n.shapeInfo.isUniform)return`
      float ${r}(int index) {
        ${Yy(n)}
      }
    `;let o=n.shapeInfo.texShape,s=o[0],i=o[1];if(i===1&&s===1)return`
      float ${r}(int index) {
        return sampleTexture(${e}, halfCR);
      }
    `;let a=rg(e);return i===1?t?`
      float ${r}(int index) {
        vec2 uv = vec2(0.5, (float(index + ${a}) + 0.5) / float(${e}TexShape[0]));
        return sampleTexture(${e}, uv);
      }
    `:`
      float ${r}(int index) {
        vec2 uv = vec2(0.5, (float(index + ${a}) + 0.5) / ${s}.0);
        return sampleTexture(${e}, uv);
      }
    `:s===1?t?`
      float ${r}(int index) {
        vec2 uv = vec2((float(index + ${a}) + 0.5) / float(${e}TexShape[1]), 0.5);
        return sampleTexture(${e}, uv);
      }
    `:`
      float ${r}(int index) {
        vec2 uv = vec2((float(index + ${a}) + 0.5) / ${i}.0, 0.5);
        return sampleTexture(${e}, uv);
      }
    `:t?`
    float ${r}(int index) {
      vec2 uv = uvFromFlat(${e}TexShape[0], ${e}TexShape[1], index + ${a});
      return sampleTexture(${e}, uv);
    }
  `:`
    float ${r}(int index) {
      vec2 uv = uvFromFlat(${s}, ${i}, index + ${a});
      return sampleTexture(${e}, uv);
    }
  `}function SLe(n,t){let e=n.shapeInfo.logicalShape,r=n.name,o="get"+r.charAt(0).toUpperCase()+r.slice(1),s=n.shapeInfo.texShape,i=s[0],a=s[1],l=Wn();if(s!=null&&C.arraysEqual(e,s))return t?`
      vec4 ${o}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);

        return ${l.texture2D}(${r}, uv);
      }
    `:`
      vec4 ${o}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${a}.0, ${i}.0);

        return ${l.texture2D}(${r}, uv);
      }
    `;if(t)return`
    vec4 ${o}(int row, int col) {
      ivec2 packedTexShape = ivec2(ceil(float(${r}TexShape[0]) / 2.0), ceil(float(${r}TexShape[1]) / 2.0));
      int valuesPerRow = int(ceil(float(${r}Shape[1]) / 2.0));
      vec2 uv = packedUVfrom2D(valuesPerRow, packedTexShape[0], packedTexShape[1], row, col);
      return ${l.texture2D}(${r}, uv);
    }
  `;let c=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)],u=Math.ceil(e[1]/2);return`
    vec4 ${o}(int row, int col) {
      vec2 uv = packedUVfrom2D(${u}, ${c[0]}, ${c[1]}, row, col);
      return ${l.texture2D}(${r}, uv);
    }
  `}function TLe(n,t){let e=n.shapeInfo.logicalShape,r=n.name,o="get"+r.charAt(0).toUpperCase()+r.slice(1),s=n.shapeInfo.texShape;if(s!=null&&C.arraysEqual(e,s)){if(t)return`
      float ${o}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `;let f=s[0],d=s[1];return`
    float ${o}(int row, int col) {
      vec2 uv = (vec2(col, row) + halfCR) / vec2(${d}.0, ${f}.0);
      return sampleTexture(${r}, uv);
    }
  `}let{newShape:i,keptDims:a}=C.squeezeShape(e),l=i;if(l.length<e.length){let f=Zy(n,l),d=["row","col"];return`
      ${Xy(f,t)}
      float ${o}(int row, int col) {
        return ${o}(${Qy(d,a)});
      }
    `}if(n.shapeInfo.isUniform)return`
      float ${o}(int row, int col) {
        int index = round(dot(vec2(row, col), vec2(${e[1]}, 1)));
        ${Yy(n)}
      }
    `;let c=s[0],u=s[1],p=rg(r);return u===1?t?`
      float ${o}(int row, int col) {
        float index = dot(vec3(row, col, ${p}), vec3(${r}Shape[1], 1, 1));
        vec2 uv = vec2(0.5, (index + 0.5) / float(${r}TexShape[0]));
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${o}(int row, int col) {
      float index = dot(vec3(row, col, ${p}), vec3(${e[1]}, 1, 1));
      vec2 uv = vec2(0.5, (index + 0.5) / ${c}.0);
      return sampleTexture(${r}, uv);
    }
  `:c===1?t?`
      float ${o}(int row, int col) {
        float index = dot(vec3(row, col, ${p}), vec3(${r}Shape[1], 1, 1));
        vec2 uv = vec2((index + 0.5) / float(${r}TexShape[1]), 0.5);
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${o}(int row, int col) {
      float index = dot(vec3(row, col, ${p}), vec3(${e[1]}, 1, 1));
      vec2 uv = vec2((index + 0.5) / ${u}.0, 0.5);
      return sampleTexture(${r}, uv);
    }
  `:t?`
      float ${o}(int row, int col) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * ${r}Shape[1] + col + ${p};
        vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index);
        return sampleTexture(${r}, uv);
      }
    `:`
  float ${o}(int row, int col) {
    // Explicitly use integer operations as dot() only works on floats.
    int index = row * ${e[1]} + col + ${p};
    vec2 uv = uvFromFlat(${c}, ${u}, index);
    return sampleTexture(${r}, uv);
  }
`}function ELe(n,t){let e=n.shapeInfo.logicalShape,r=n.name,o="get"+r.charAt(0).toUpperCase()+r.slice(1),s=n.shapeInfo.texShape,i=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)];if(e[0]===1){let f=e.slice(1),d=[1,2],h=Zy(n,f),m=["b","row","col"];return`
        ${Fre(h,t)}
        vec4 ${o}(int b, int row, int col) {
          return ${o}(${Qy(m,d)});
        }
      `}let a=Wn();if(t)return`
    vec4 ${o}(int b, int row, int col) {
      ivec2 packedTexShape = ivec2(ceil(float(${r}TexShape[0]) / 2.0), ceil(float(${r}TexShape[1]) / 2.0));
      int valuesPerRow = int(ceil(float(${r}Shape[2]) / 2.0));
      int texelsInBatch = valuesPerRow * int(ceil(float(${r}Shape[1]) / 2.0));
      vec2 uv = packedUVfrom3D(
        packedTexShape[0], packedTexShape[1], texelsInBatch, valuesPerRow, b, row, col);
      return ${a.texture2D}(${r}, uv);
    }
  `;let l=i[0],c=i[1],u=Math.ceil(e[2]/2),p=u*Math.ceil(e[1]/2);return`
    vec4 ${o}(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        ${l}, ${c}, ${p}, ${u}, b, row, col);
      return ${a.texture2D}(${r}, uv);
    }
  `}function NLe(n,t){let e=n.shapeInfo.logicalShape,r=n.name,o="get"+r.charAt(0).toUpperCase()+r.slice(1),s=e[1]*e[2],i=e[2],{newShape:a,keptDims:l}=C.squeezeShape(e),c=a;if(c.length<e.length){let m=Zy(n,c),g=["row","col","depth"];return`
        ${Xy(m,t)}
        float ${o}(int row, int col, int depth) {
          return ${o}(${Qy(g,l)});
        }
      `}if(n.shapeInfo.isUniform)return`
      float ${o}(int row, int col, int depth) {
        int index = round(dot(vec3(row, col, depth),
                          vec3(${s}, ${i}, 1)));
        ${Yy(n)}
      }
    `;let u=n.shapeInfo.texShape,p=u[0],f=u[1],d=n.shapeInfo.flatOffset;if(f===s&&d==null)return t?`
      float ${o}(int row, int col, int depth) {
        int stride1 = ${r}Shape[2];
        float texR = float(row);
        float texC = dot(vec2(col, depth), vec2(stride1, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
        float ${o}(int row, int col, int depth) {
          float texR = float(row);
          float texC = dot(vec2(col, depth), vec2(${i}, 1));
          vec2 uv = (vec2(texC, texR) + halfCR) /
                     vec2(${f}.0, ${p}.0);
          return sampleTexture(${r}, uv);
        }
      `;if(f===i&&d==null)return t?`
      float ${o}(int row, int col, int depth) {
        float texR = dot(vec2(row, col), vec2(${r}Shape[1], 1));
        float texC = float(depth);
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${o}(int row, int col, int depth) {
      float texR = dot(vec2(row, col), vec2(${e[1]}, 1));
      float texC = float(depth);
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${f}.0, ${p}.0);
      return sampleTexture(${r}, uv);
    }
  `;let h=rg(r);return t?`
    float ${o}(int row, int col, int depth) {
      // Explicitly use integer operations as dot() only works on floats.
      int stride0 = ${r}Shape[1] * ${r}Shape[2];
      int stride1 = ${r}Shape[2];
      int index = row * stride0 + col * stride1 + depth + ${h};
      vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index);
      return sampleTexture(${r}, uv);
    }
    `:`
      float ${o}(int row, int col, int depth) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * ${s} + col * ${i} + depth + ${h};
        vec2 uv = uvFromFlat(${p}, ${f}, index);
        return sampleTexture(${r}, uv);
      }
  `}function DLe(n,t){let e=n.name,r="get"+e.charAt(0).toUpperCase()+e.slice(1),o=Wn();if(t)return`
    vec4 ${r}(int b2, int b, int row, int col) {
      int valuesPerRow = int(ceil(float(${e}Shape[3]) / 2.0));
      int texelsInBatch = valuesPerRow * int(ceil(float(${e}Shape[2]) / 2.0));
      int index = b * texelsInBatch + (row / 2) * valuesPerRow + (col / 2);
      texelsInBatch *= ${e}Shape[1];
      index = b2 * texelsInBatch + index;
      ivec2 packedTexShape = ivec2(ceil(float(${e}TexShape[0]) / 2.0), ceil(float(${e}TexShape[1]) / 2.0));
      int texR = index / packedTexShape[1];
      int texC = index - texR * packedTexShape[1];
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(packedTexShape[1], packedTexShape[0]); return ${o.texture2D}(${e}, uv);
    }
  `;let s=n.shapeInfo.logicalShape,i=s.length,a=n.shapeInfo.texShape,l=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)],c=l[0],u=l[1],p=Math.ceil(s[i-1]/2),f=p*Math.ceil(s[i-2]/2),d="int b, int row, int col",h=`b * ${f} + (row / 2) * ${p} + (col / 2)`;for(let m=2;m<i-1;m++)d=`int b${m}, `+d,f*=s[i-m-1],h=`b${m} * ${f} + `+h;return`
    vec4 ${r}(${d}) {
      int index = ${h};
      int texR = index / ${u};
      int texC = index - texR * ${u};
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${u}, ${c});
      return ${o.texture2D}(${e}, uv);
    }
  `}function kLe(n,t){let e=n.shapeInfo.logicalShape,r=n.name,o="get"+r.charAt(0).toUpperCase()+r.slice(1),s=e[3],i=e[2]*s,a=e[1]*i,{newShape:l,keptDims:c}=C.squeezeShape(e);if(l.length<e.length){let b=Zy(n,l),w=["row","col","depth","depth2"];return`
      ${Xy(b,t)}
      float ${o}(int row, int col, int depth, int depth2) {
        return ${o}(${Qy(w,c)});
      }
    `}if(n.shapeInfo.isUniform)return`
      float ${o}(int row, int col, int depth, int depth2) {
        int index = round(dot(vec4(row, col, depth, depth2),
                          vec4(${a}, ${i}, ${s}, 1)));
        ${Yy(n)}
      }
    `;let u=n.shapeInfo.flatOffset,p=n.shapeInfo.texShape,f=p[0],d=p[1],h=`int stride2 = ${r}Shape[3];`,m=`int stride1 = ${r}Shape[2] * stride2;`,g=`int stride0 = ${r}Shape[1] * stride1;`;if(d===a&&u==null)return t?`
      float ${o}(int row, int col, int depth, int depth2) {
        ${h}
        ${m}
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(stride1, stride2, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
      float ${o}(int row, int col, int depth, int depth2) {
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(${i}, ${s}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${d}.0, ${f}.0);
        return sampleTexture(${r}, uv);
      }
    `;if(d===s&&u==null)return t?`
      float ${o}(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(${r}Shape[1] * ${r}Shape[2], ${r}Shape[2], 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
      float ${o}(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(${e[1]*e[2]}, ${e[2]}, 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${d}.0, ${f}.0);
        return sampleTexture(${r}, uv);
      }
    `;let x=rg(r);return t?`
    float ${o}(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      ${h}
      ${m}
      ${g}
      int index = row * stride0 + col * stride1 +
          depth * stride2 + depth2;
      vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index + ${x});
      return sampleTexture(${r}, uv);
    }
  `:`
    float ${o}(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${a} + col * ${i} +
          depth * ${s} + depth2;
      vec2 uv = uvFromFlat(${f}, ${d}, index + ${x});
      return sampleTexture(${r}, uv);
    }
  `}function _Le(n){let t=n.shapeInfo.logicalShape,e=n.name,r="get"+e.charAt(0).toUpperCase()+e.slice(1),o=t[4],s=t[3]*o,i=t[2]*s,a=t[1]*i,{newShape:l,keptDims:c}=C.squeezeShape(t);if(l.length<t.length){let m=Zy(n,l),g=["row","col","depth","depth2","depth3"];return`
      ${Xy(m)}
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        return ${r}(${Qy(g,c)});
      }
    `}if(n.shapeInfo.isUniform)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        float index = dot(
          vec4(row, col, depth, depth2),
          vec4(${a}, ${i}, ${s}, ${o})) +
          depth3;
        ${Yy(n)}
      }
    `;let u=n.shapeInfo.flatOffset,p=n.shapeInfo.texShape,f=p[0],d=p[1];if(d===a&&u==null)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
                         vec4(${i}, ${s}, ${o}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${d}.0, ${f}.0);
        return sampleTexture(${e}, uv);
      }
    `;if(d===o&&u==null)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        float texR = dot(
          vec4(row, col, depth, depth2),
          vec4(${t[1]*t[2]*t[3]},
               ${t[2]*t[3]}, ${t[3]}, 1));
        int texC = depth3;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${d}.0, ${f}.0);
        return sampleTexture(${e}, uv);
      }
    `;let h=rg(e);return`
    float ${r}(int row, int col, int depth, int depth2, int depth3) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${a} + col * ${i} + depth * ${s} +
          depth2 * ${o} + depth3 + ${h};
      vec2 uv = uvFromFlat(${f}, ${d}, index);
      return sampleTexture(${e}, uv);
    }
  `}function ALe(n){let t=n.shapeInfo.logicalShape,e=n.name,r="get"+e.charAt(0).toUpperCase()+e.slice(1),{newShape:o,keptDims:s}=C.squeezeShape(t);if(o.length<t.length){let g=Zy(n,o),x=["row","col","depth","depth2","depth3","depth4"];return`
      ${Xy(g)}
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        return ${r}(${Qy(x,s)});
      }
    `}let i=t[5],a=t[4]*i,l=t[3]*a,c=t[2]*l,u=t[1]*c;if(n.shapeInfo.isUniform)return`
      float ${r}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
        int index = round(dot(
          vec4(row, col, depth, depth2),
          vec4(${u}, ${c}, ${l}, ${a})) +
          dot(
            vec2(depth3, depth4),
            vec2(${i}, 1)));
        ${Yy(n)}
      }
    `;let p=n.shapeInfo.flatOffset,f=n.shapeInfo.texShape,d=f[0],h=f[1];if(h===u&&p==null)return`
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
          vec4(${c}, ${l}, ${a}, ${i})) +
               float(depth4);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${h}.0, ${d}.0);
        return sampleTexture(${e}, uv);
      }
    `;if(h===i&&p==null)return`
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        float texR = dot(vec4(row, col, depth, depth2),
          vec4(${t[1]*t[2]*t[3]*t[4]},
               ${t[2]*t[3]*t[4]},
               ${t[3]*t[4]},
               ${t[4]})) + float(depth3);
        int texC = depth4;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${h}.0, ${d}.0);
        return sampleTexture(${e}, uv);
      }
    `;let m=rg(e);return`
    float ${r}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${u} + col * ${c} + depth * ${l} +
          depth2 * ${a} + depth3 * ${i} + depth4 + ${m};
      vec2 uv = uvFromFlat(${d}, ${h}, index);
      return sampleTexture(${e}, uv);
    }
  `}function Yy(n){let t=n.name,e=C.sizeFromShape(n.shapeInfo.logicalShape);return e<2?`return ${t};`:`
    for (int i = 0; i < ${e}; i++) {
      if (i == index) {
        return ${t}[i];
      }
    }
  `}function RLe(n,t){let e=n.name,r=e.charAt(0).toUpperCase()+e.slice(1),o="get"+r+"AtOutCoords",s=n.shapeInfo.logicalShape.length,i=t.logicalShape.length,a=Mre(n.shapeInfo.logicalShape,t.logicalShape),l=at(i),c=i-s,u,p=["x","y","z","w","u","v"];s===0?u="":i<2&&a.length>=1?u="coords = 0;":u=a.map(b=>`coords.${p[b+c]} = 0;`).join(`
`);let f="";i<2&&s>0?f="coords":f=n.shapeInfo.logicalShape.map((b,w)=>`coords.${p[w+c]}`).join(", ");let d="return outputValue;",m=C.sizeFromShape(n.shapeInfo.logicalShape)===1,x=C.sizeFromShape(t.logicalShape)===1;if(s===1&&!m&&!x)d=`
      return vec4(outputValue.xy, outputValue.xy);
    `;else if(m&&!x)i===1?d=`
        return vec4(outputValue.x, outputValue.x, 0., 0.);
      `:d=`
        return vec4(outputValue.x);
      `;else if(a.length){let b=s-2,w=s-1;a.indexOf(b)>-1&&a.indexOf(w)>-1?d="return vec4(outputValue.x);":a.indexOf(b)>-1?d="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":a.indexOf(w)>-1&&(d="return vec4(outputValue.xx, outputValue.zz);")}return`
    vec4 ${o}() {
      ${l} coords = getOutputCoords();
      ${u}
      vec4 outputValue = get${r}(${f});
      ${d}
    }
  `}function MLe(n,t){let e=n.name,r=e.charAt(0).toUpperCase()+e.slice(1),o="get"+r+"AtOutCoords",s=t.texShape,i=n.shapeInfo.texShape,a=n.shapeInfo.logicalShape.length,l=t.logicalShape.length;if(!n.shapeInfo.isUniform&&a===l&&n.shapeInfo.flatOffset==null&&C.arraysEqual(i,s))return`
      float ${o}() {
        return sampleTexture(${e}, resultUV);
      }
    `;let c=at(l),u=Mre(n.shapeInfo.logicalShape,t.logicalShape),p=l-a,f,d=["x","y","z","w","u","v"];a===0?f="":l<2&&u.length>=1?f="coords = 0;":f=u.map(m=>`coords.${d[m+p]} = 0;`).join(`
`);let h="";return l<2&&a>0?h="coords":h=n.shapeInfo.logicalShape.map((m,g)=>`coords.${d[g+p]}`).join(", "),`
    float ${o}() {
      ${c} coords = getOutputCoords();
      ${f}
      return get${r}(${h});
    }
  `}function at(n){if(n<=1)return"int";if(n===2)return"ivec2";if(n===3)return"ivec3";if(n===4)return"ivec4";if(n===5)return"ivec5";if(n===6)return"ivec6";throw Error(`GPU for rank ${n} is not yet supported`)}function ON(n,t,e){let{newShape:r,keptDims:o}=C.squeezeShape(t),s=t.length,i=n&&s===3&&t[0]===1,a=i?t.slice(1):r,l=!n&&s>1&&!C.arraysEqual(t,e)&&r.length<s||i;return{useSqueezeShape:l,uniformShape:l?a:t,keptDims:o}}function Zy(n,t){let e=JSON.parse(JSON.stringify(n));return e.shapeInfo.logicalShape=t,e}function Qy(n,t){return t.map(e=>n[e]).join(", ")}function Lre(n,t,e,r){let o=e.map((u,p)=>{let f={logicalShape:u.shape,texShape:u.isUniform?null:u.texData.texShape,isUniform:u.isUniform,isPacked:u.isUniform?!1:u.texData.isPacked,flatOffset:null};return u.texData!=null&&u.texData.slice!=null&&u.texData.slice.flatOffset>0&&(f.flatOffset=u.texData.slice.flatOffset),{name:t.variableNames[p],shapeInfo:f}}),s=o.map(u=>u.shapeInfo),i={logicalShape:r.shape,texShape:r.texData.texShape,isUniform:!1,isPacked:r.texData.isPacked,flatOffset:null},a=Ore(o,i,t),l=hre(n.gl,a),c=n.createProgram(l);return Y().get("ENGINE_COMPILE_ONLY")?{program:t,fragmentShader:l,source:a,webGLProgram:c,inShapeInfos:s,outShapeInfo:i,variablesLocations:null,customUniformLocations:null,infLoc:null,nanLoc:null,outShapeLocation:null,outShapeStridesLocation:null,outTexShapeLocation:null}:(n.buildVao(c),Object.assign({program:t,fragmentShader:l,source:a,webGLProgram:c,inShapeInfos:s,outShapeInfo:i},RL(n,t,c)))}function RL(n,t,e){let r=[],o=[],s,i,a,l=null,c=null;c=n.getUniformLocation(e,"NAN",!1),Y().getNumber("WEBGL_VERSION")===1&&(l=n.getUniformLocation(e,"INFINITY",!1));let u=!1;for(let p of t.variableNames){let f={name:p,uniform:n.getUniformLocation(e,p,u),offset:n.getUniformLocation(e,`offset${p}`,u)};t.enableShapeUniforms&&(f.shape=n.getUniformLocation(e,`${p}Shape`,u),f.texShape=n.getUniformLocation(e,`${p}TexShape`,u)),r.push(f)}if(t.enableShapeUniforms&&(s=n.getUniformLocation(e,"outShape",u),a=n.getUniformLocation(e,"outShapeStrides",u),i=n.getUniformLocation(e,"outTexShape",u)),t.customUniforms)for(let p of t.customUniforms)o.push(n.getUniformLocation(e,p.name,u));return{variablesLocations:r,customUniformLocations:o,infLoc:l,nanLoc:c,outShapeLocation:s,outShapeStridesLocation:a,outTexShapeLocation:i}}function $re(n,t){if(n.length!==t.length)throw Error(`Binary was compiled with ${n.length} inputs, but was executed with ${t.length} inputs`);n.forEach((e,r)=>{let o=e.logicalShape,s=t[r],i=s.shape;if(!C.arraysEqual(o,i))throw Error(`Binary was compiled with different shapes than the current args. Shapes ${o} and ${i} must match`);if(e.isUniform&&s.isUniform)return;let a=e.texShape,l=s.isUniform?null:s.texData.texShape;if(!C.arraysEqual(a,l))throw Error(`Binary was compiled with different texture shapes than the current args. Shape ${a} and ${l} must match`)})}function Bre(n,t,e,r,o){t.program.enableShapeUniforms||($re(t.inShapeInfos,e),$re([t.outShapeInfo],[r]));let s=r.texData.texture,i=r.texData.texShape;r.texData.isPacked?n.setOutputPackedMatrixTexture(s.texture,i[0],i[1]):n.setOutputMatrixTexture(s.texture,i[0],i[1]),n.setProgram(t.webGLProgram),n.bindVertexArray(t.webGLProgram.vao),Y().getNumber("WEBGL_VERSION")===1&&t.infLoc!==null&&n.gl.uniform1f(t.infLoc,1/0),t.nanLoc!==null&&n.gl.uniform1f(t.nanLoc,NaN);for(let l=0;l<e.length;++l){let c=e[l],{uniform:u,offset:p,shape:f,texShape:d}=t.variablesLocations[l];if(f){let{uniformShape:h}=ON(t.program.packedInputs,c.shape,c.texData.texShape);switch(h.length){case 1:n.gl.uniform1iv(f,new Int32Array(h));break;case 2:n.gl.uniform2iv(f,new Int32Array(h));break;case 3:n.gl.uniform3iv(f,new Int32Array(h));break;case 4:n.gl.uniform4iv(f,new Int32Array(h));break;default:break}}if(d&&n.gl.uniform2i(d,c.texData.texShape[0],c.texData.texShape[1]),u!=null){if(c.isUniform){if(C.sizeFromShape(c.shape)<2)n.gl.uniform1f(u,c.uniformValues[0]);else{let h=c.uniformValues;h instanceof Float32Array||(h=new Float32Array(h)),n.gl.uniform1fv(u,h)}continue}c.texData.slice!=null&&p!=null&&n.gl.uniform1i(p,c.texData.slice.flatOffset),n.setInputMatrixTexture(c.texData.texture.texture,u,l)}}let a=t.outShapeLocation;if(a)switch(r.shape.length){case 1:n.gl.uniform1iv(a,new Int32Array(r.shape));break;case 2:n.gl.uniform2iv(a,new Int32Array(r.shape));break;case 3:n.gl.uniform3iv(a,new Int32Array(r.shape));break;case 4:n.gl.uniform4iv(a,new Int32Array(r.shape));break;default:break}if(t.outShapeStridesLocation){let l=C.computeStrides(r.shape);switch(r.shape.length){case 2:n.gl.uniform1iv(t.outShapeStridesLocation,new Int32Array(l));break;case 3:n.gl.uniform2iv(t.outShapeStridesLocation,new Int32Array(l));break;case 4:n.gl.uniform3iv(t.outShapeStridesLocation,new Int32Array(l));break;default:break}}if(t.outTexShapeLocation&&n.gl.uniform2i(t.outTexShapeLocation,r.texData.texShape[0],r.texData.texShape[1]),t.program.customUniforms&&o)for(let l=0;l<t.program.customUniforms.length;++l){let c=t.program.customUniforms[l],u=t.customUniformLocations[l],p=o[l];if(c.type==="float")n.gl.uniform1fv(u,p);else if(c.type==="vec2")n.gl.uniform2fv(u,p);else if(c.type==="vec3")n.gl.uniform3fv(u,p);else if(c.type==="vec4")n.gl.uniform4fv(u,p);else if(c.type==="int")n.gl.uniform1iv(u,p);else if(c.type==="ivec2")n.gl.uniform2iv(u,p);else if(c.type==="ivec3")n.gl.uniform3iv(u,p);else if(c.type==="ivec4")n.gl.uniform4iv(u,p);else throw Error(`uniform type ${c.type} is not supported yet.`)}n.executeProgram()}function zre(n,t,e){let r="";t.concat(e).forEach(i=>{let a=i.texData!=null&&i.texData.slice!=null&&i.texData.slice.flatOffset>0;if(n.enableShapeUniforms&&!i.isUniform){let l=i.texData.texShape,{useSqueezeShape:c,uniformShape:u,keptDims:p}=ON(n.packedInputs,i.shape,l),f="",d="",h="";if(u.length===1&&n.packedInputs){let S=[Math.ceil(l[0]/2),Math.ceil(l[1]/2)];f=`${S[0]>1}_${S[1]>1}`}else if(u.length===2&&!n.packedInputs)d=`${u[0]>1}_${u[1]>1}`;else if(u.length>2&&!n.packedInputs){let S=C.computeStrides(u);h=`${S[0]===l[1]}_${S[S.length-1]===l[1]}`}let m=i.shape.length,g=u.length===2&&C.arraysEqual(i.shape,l),x=C.sizeFromShape(i.shape)===1,b=M.getBroadcastDims(i.shape,e.shape),w=!n.packedInputs&&m===e.shape.length&&C.arraysEqual(l,e.texData.texShape),v=n.packedInputs||u.length>2?"":`${l[0]>1}_${l[1]>1}`;r+=`${m}_${w}_${c?p:""}_${u.length}_${x}_${b}_${g}_${f}_${d}_${h}_${v}_${a}`}else{let l=i.isUniform?"uniform":i.texData.texShape;r+=`${i.shape}_${l}_${a}`}});let o=n.userCode,s=n.constructor.name;return s+="_"+r+"_"+o+`${Y().getNumber("WEBGL_VERSION")}`,s}function Yt(n){return Y().getBool("WEBGL_USE_SHAPES_UNIFORMS")&&n<=4}var FN=class{constructor(t){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=Jm.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];let e=Wn();this.outputShape=t,this.enableShapeUniforms=Yt(this.outputShape.length),this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${this.enableShapeUniforms?ng(["r","c","d"],t):ka(["r","c","d"],t)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));
        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getA(rc.x, rc.y, rc.z);
        }

        ${e.output} = result;
      }
    `}};var PN=class{constructor(t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=Jm.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];let e=Wn();this.outputShape=t,this.enableShapeUniforms=Yt(this.outputShape.length),this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${this.enableShapeUniforms?ng(["r","c","d"],t):ka(["r","c","d"],t)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));
        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));
        }

        ${e.output} = result;
      }
    `}};var $N=class{constructor(t){this.variableNames=["A"],this.outTexUsage=No.DOWNLOAD;let e=Wn();this.outputShape=t,this.userCode=`
      ${MN}

      void main() {
        float x = getAAtOutCoords();
        ${e.output} = encode_float(x);
      }
    `}};var LN=class{constructor(t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=No.DOWNLOAD;let e=Wn();this.outputShape=t,this.userCode=`
      ${MN}

      void main() {
        ivec3 coords = getOutputCoords();
        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));
        ${e.output} = encode_float(x);
      }
    `}};var PLe={R:0,G:1,B:2,A:3},iC=class{constructor(t,e=!1,r="RGBA"){this.variableNames=["A"],this.customUniforms=[{name:"texShape",type:"ivec2"}];let o=Wn();this.outputShape=t,this.enableShapeUniforms=Yt(this.outputShape.length);let s="result";e&&(s="floor(result * 255. + 0.5)");let i="";for(let a=0;a<r.length;a++){let l=r[a];i+=`
          if(offset == ${a}) {
            result = values[${PLe[l]}];
          }`}this.userCode=`
      ${this.enableShapeUniforms?qy():Hy(t)}

      void main() {
        ivec3 coords = getOutputCoords();
        int flatIndex = getFlatIndex(coords);
        float result = 0.;
        int offset = imod(flatIndex, ${r.length});

        flatIndex = idiv(flatIndex, ${r.length}, 1.);

        int r = flatIndex / texShape[1];
        if (r < texShape[0]) {
          int c = imod(flatIndex, texShape[1]);
          vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);
          vec4 values = ${o.texture2D}(A, uv);
          ${i}
        }
        ${o.output} = vec4(${s}, 0., 0., 0.);
      }
    `}};var BN=class{constructor(t,e=!1){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.customUniforms=[{name:"texShape",type:"ivec2"}];let r=Wn();this.outputShape=t,this.enableShapeUniforms=Yt(this.outputShape.length);let o="",s="result";e&&(s="floor(result * 255. + 0.5)");for(let i=0;i<=1;i++)for(let a=0;a<=1;a++){let l=i*2+a;o+=`
          localCoords = coords;
          if(localCoords[2] + ${a} < ${this.enableShapeUniforms?"outShape[2]":`${t[2]}`}) {
          localCoords[2] += ${a};
          if (localCoords[1] + ${i} < ${this.enableShapeUniforms?"outShape[1]":`${t[1]}`}) {
            localCoords[1] += ${i};

            flatIndex = getFlatIndex(localCoords);
            offset = imod(flatIndex, 4);

            flatIndex = idiv(flatIndex, 4, 1.);

            int r = flatIndex / texShape[1];
            int c = imod(flatIndex, texShape[1]);
            vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);
            values = ${r.texture2D}(A, uv);

            if (offset == 0) {
              result[${l}] = values[0];
            } else if (offset == 1) {
              result[${l}] = values[1];
            } else if (offset == 2) {
              result[${l}] = values[2];
            } else {
              result[${l}] = values[3];
            }
          }
        }
        `}this.userCode=`
        ${this.enableShapeUniforms?qy():Hy(t)}

        void main() {
          ivec3 coords = getOutputCoords();

          vec4 result = vec4(0.);
          int flatIndex, r, c, offset;
          ivec3 localCoords;
          vec2 uv;
          vec4 values;

          ${o}

          ${r.output} = ${s};
        }
    `}};N();N();function Vre(n){let t=Wn(),e=`${t.version}
    precision highp float;
    ${t.attribute} vec3 clipSpacePos;
    ${t.attribute} vec2 uv;
    ${t.varyingVs} vec2 resultUV;

    void main() {
      gl_Position = vec4(clipSpacePos, 1);
      resultUV = uv;
    }`;return dre(n,e)}function Ure(n){let t=new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]);return xre(n,t)}function jre(n){let t=new Uint16Array([0,1,2,2,1,3]);return yre(n,t)}function aC(n,t,e,r,o,s){vre(t,e);let i=bre(n),a=n.TEXTURE_2D;return Me(n,()=>n.bindTexture(a,i)),Me(n,()=>n.texParameteri(a,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE)),Me(n,()=>n.texParameteri(a,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE)),Me(n,()=>n.texParameteri(a,n.TEXTURE_MIN_FILTER,n.NEAREST)),Me(n,()=>n.texParameteri(a,n.TEXTURE_MAG_FILTER,n.NEAREST)),Y().getNumber("WEBGL_VERSION")===1?Me(n,()=>n.texImage2D(a,0,r,t,e,0,o,s,null)):Me(n,()=>n.texStorage2D(a,1,r,t,e)),Me(n,()=>n.bindTexture(n.TEXTURE_2D,null)),{texture:i,texShape:[e,t]}}function ML(n){return n.internalFormatFloat}function Gre(n,t,e,r){let[o,s]=eg(t,e);return aC(n,o,s,ML(r),r.textureFormatFloat,n.FLOAT)}function OL(n){return n.internalFormatHalfFloat}function Wre(n,t,e,r){let[o,s]=eg(t,e);return aC(n,o,s,OL(r),r.textureFormatFloat,r.textureTypeHalfFloat)}function FL(n){return n.downloadTextureFormat}function Hre(n,t,e,r){let[o,s]=eg(t,e);return aC(n,o,s,FL(r),n.RGBA,n.UNSIGNED_BYTE)}function PL(n){return n.internalFormatPackedFloat}function qre(n,t,e,r){let[o,s]=Cc(t,e);return aC(n,o,s,PL(r),n.RGBA,n.FLOAT)}function $L(n){return n.internalFormatPackedHalfFloat}function Kre(n,t,e,r){let[o,s]=Cc(t,e);return aC(n,o,s,$L(r),n.RGBA,r.textureTypeHalfFloat)}function Xre(n,t,e){return Me(n,()=>n.bindBuffer(n.ARRAY_BUFFER,e)),kL(n,t,"clipSpacePos",e,3,20,0)&&kL(n,t,"uv",e,2,20,12)}function Yre(n,t,e,r,o,s){Me(n,()=>n.bindTexture(n.TEXTURE_2D,t));let i,a,l;o instanceof Uint8Array?(i=new Uint8Array(e*r*4),a=n.UNSIGNED_BYTE,l=n.RGBA):(i=new Float32Array(e*r*4),a=n.FLOAT,l=s.internalFormatPackedFloat),i.set(o),Y().getNumber("WEBGL_VERSION")===2?Me(n,()=>n.texSubImage2D(n.TEXTURE_2D,0,0,0,e,r,n.RGBA,a,i)):Me(n,()=>n.texImage2D(n.TEXTURE_2D,0,l,e,r,0,n.RGBA,a,i)),Me(n,()=>n.bindTexture(n.TEXTURE_2D,null))}function Zre(n,t,e){Me(n,()=>n.bindTexture(n.TEXTURE_2D,t)),e.data instanceof Uint8Array?Y().getNumber("WEBGL_VERSION")===2?Me(n,()=>n.texSubImage2D(n.TEXTURE_2D,0,0,0,e.width,e.height,n.RGBA,n.UNSIGNED_BYTE,e.data)):Me(n,()=>n.texImage2D(n.TEXTURE_2D,0,n.RGBA,e.width,e.height,0,n.RGBA,n.UNSIGNED_BYTE,e.data)):Y().getNumber("WEBGL_VERSION")===2?Me(n,()=>n.texSubImage2D(n.TEXTURE_2D,0,0,0,n.RGBA,n.UNSIGNED_BYTE,e)):Me(n,()=>n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,e)),Me(n,()=>n.bindTexture(n.TEXTURE_2D,null))}function Qre(n,t,e,r){let o=n.createBuffer();Me(n,()=>n.bindBuffer(n.PIXEL_PACK_BUFFER,o));let a=4*4*t*e;return Me(n,()=>n.bufferData(n.PIXEL_PACK_BUFFER,a,n.STREAM_READ)),Me(n,()=>n.readPixels(0,0,e,t,n.RGBA,n.FLOAT,0)),Me(n,()=>n.bindBuffer(n.PIXEL_PACK_BUFFER,null)),o}function Jre(n,t,e){let r=n,o=new Float32Array(e);return r.bindBuffer(r.PIXEL_PACK_BUFFER,t),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,o),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),o}function eoe(n,t,e,r){let[o,s]=eg(t,e),i=4,a=new Uint8Array(ure(t*e,i));return Me(n,()=>n.readPixels(0,0,o,s,r.downloadTextureFormat,n.UNSIGNED_BYTE,a)),new Float32Array(a.buffer)}function toe(n,t,e,r,o,s,i,a){let l=n,c=new Float32Array(pre(s,i));return l.bindBuffer(l.PIXEL_PACK_BUFFER,t),l.getBufferSubData(l.PIXEL_PACK_BUFFER,0,c),l.bindBuffer(l.PIXEL_PACK_BUFFER,null),c}function noe(n,t,e){let r=new Float32Array(t*e*4);return Me(n,()=>n.readPixels(0,0,e,t,n.RGBA,n.FLOAT,r)),r}var Jy=class{constructor(t){this.outputTexture=null,this.program=null,this.disposed=!1,this.itemsToPoll=[];let e=Y().getNumber("WEBGL_VERSION");if(t!=null?(this.gl=t,cre(e,t)):this.gl=Rs(e),t=this.gl,Y().getNumber("WEBGL_VERSION")===2){let s=t;this.createVertexArray=()=>Me(s,()=>s.createVertexArray()),this.bindVertexArray=i=>Me(s,()=>s.bindVertexArray(i)),this.deleteVertexArray=i=>Me(s,()=>s.deleteVertexArray(i)),this.getVertexArray=()=>Me(s,()=>s.getParameter(s.VERTEX_ARRAY_BINDING))}else if(t!=null){let s=t.getExtension("OES_vertex_array_object");if(s==null)throw new Error("All WebGL1 implementations are expected to offer OES_vertex_array_object.");this.createVertexArray=()=>Me(t,()=>s.createVertexArrayOES()),this.bindVertexArray=i=>Me(t,()=>s.bindVertexArrayOES(i)),this.deleteVertexArray=i=>Me(t,()=>s.deleteVertexArrayOES(i)),this.getVertexArray=()=>Me(t,()=>t.getParameter(s.VERTEX_ARRAY_BINDING_OES))}let r="WEBGL_color_buffer_float",o="EXT_color_buffer_half_float";if(this.parallelCompilationExtension=this.gl.getExtension("KHR_parallel_shader_compile"),Y().getNumber("WEBGL_VERSION")===1){let s="OES_texture_float",i="OES_texture_half_float";if(this.textureFloatExtension=rC(this.gl,s),oi(this.gl,i))this.textureHalfFloatExtension=rC(this.gl,i);else if(Y().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(r),oi(this.gl,o))this.colorBufferHalfFloatExtension=rC(this.gl,o);else if(Y().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(r="EXT_color_buffer_float",oi(this.gl,r))this.colorBufferFloatExtension=this.gl.getExtension(r);else if(oi(this.gl,o))this.colorBufferHalfFloatExtension=this.gl.getExtension(o);else throw new Error("GL context does not support color renderable floats");this.vertexBuffer=Ure(this.gl),this.indexBuffer=jre(this.gl),this.framebuffer=wre(this.gl),this.textureConfig=nC(this.gl,this.textureHalfFloatExtension)}get debug(){return Y().getBool("DEBUG")}dispose(){if(this.disposed)return;this.program!=null&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),this.outputTexture!=null&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");let t=this.gl;Me(t,()=>t.finish()),Me(t,()=>t.bindFramebuffer(t.FRAMEBUFFER,null)),Me(t,()=>t.deleteFramebuffer(this.framebuffer)),Me(t,()=>t.bindBuffer(t.ARRAY_BUFFER,null)),Me(t,()=>t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null)),Me(t,()=>t.deleteBuffer(this.indexBuffer)),this.disposed=!0}createFloat32MatrixTexture(t,e){return this.throwIfDisposed(),Gre(this.gl,t,e,this.textureConfig)}createFloat16MatrixTexture(t,e){return this.throwIfDisposed(),Wre(this.gl,t,e,this.textureConfig)}createUnsignedBytesMatrixTexture(t,e){return this.throwIfDisposed(),Hre(this.gl,t,e,this.textureConfig)}uploadPixelDataToTexture(t,e){this.throwIfDisposed(),Zre(this.gl,t,e)}uploadDenseMatrixToTexture(t,e,r,o){this.throwIfDisposed(),Yre(this.gl,t,e,r,o,this.textureConfig)}createFloat16PackedMatrixTexture(t,e){return this.throwIfDisposed(),Kre(this.gl,t,e,this.textureConfig)}createPackedMatrixTexture(t,e){return this.throwIfDisposed(),qre(this.gl,t,e,this.textureConfig)}deleteMatrixTexture(t){this.throwIfDisposed(),this.outputTexture===t&&(_L(this.gl,this.framebuffer),this.outputTexture=null),Me(this.gl,()=>this.gl.deleteTexture(t))}downloadByteEncodedFloatMatrixFromOutputTexture(t,e,r){return this.downloadMatrixDriver(t,()=>eoe(this.gl,e,r,this.textureConfig))}downloadPackedMatrixFromBuffer(t,e,r,o,s,i){return toe(this.gl,t,e,r,o,s,i,this.textureConfig)}downloadFloat32MatrixFromBuffer(t,e){return Jre(this.gl,t,e)}createBufferFromTexture(t,e,r){this.bindTextureToFrameBuffer(t);let o=Qre(this.gl,e,r,this.textureConfig);return this.unbindTextureToFrameBuffer(),o}createAndWaitForFence(){let t=this.createFence(this.gl);return this.pollFence(t)}createFence(t){let e,r;if(Y().getBool("WEBGL_FENCE_API_ENABLED")){let o=t,s=o.fenceSync(o.SYNC_GPU_COMMANDS_COMPLETE,0);t.flush(),r=()=>{let i=o.clientWaitSync(s,0,0);return i===o.ALREADY_SIGNALED||i===o.CONDITION_SATISFIED},e=s}else Y().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(e=this.beginQuery(),this.endQuery(),r=()=>this.isQueryAvailable(e,Y().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))):r=()=>!0;return{query:e,isFencePassed:r}}downloadMatrixFromPackedTexture(t,e,r){return this.downloadMatrixDriver(t,()=>noe(this.gl,e,r))}createProgram(t){this.throwIfDisposed();let e=this.gl;this.vertexShader==null&&(this.vertexShader=Vre(e));let r=mre(e);Me(e,()=>e.attachShader(r,this.vertexShader)),Me(e,()=>e.attachShader(r,t)),gre(e,r);let o=Object.assign(r,{vao:this.createVertexArray()});return this.debug&&_N(e,o),o}buildVao(t){this.setProgram(t),this.bindVertexArray(t.vao);let e=this.gl;Me(e,()=>e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.indexBuffer)),Xre(e,t,this.vertexBuffer)}deleteProgram(t){this.throwIfDisposed(),t===this.program&&(this.program=null),t!=null&&(Me(this.gl,()=>this.gl.deleteProgram(t)),this.deleteVertexArray(t.vao))}setProgram(t){this.throwIfDisposed(),this.program=t,this.program!=null&&this.debug&&_N(this.gl,this.program),Me(this.gl,()=>this.gl.useProgram(t))}getUniformLocation(t,e,r=!0){return this.throwIfDisposed(),r?Cre(this.gl,t,e):Ire(this.gl,t,e)}getAttributeLocation(t,e){return this.throwIfDisposed(),Me(this.gl,()=>this.gl.getAttribLocation(t,e))}getUniformLocationNoThrow(t,e){return this.throwIfDisposed(),this.gl.getUniformLocation(t,e)}setInputMatrixTexture(t,e,r){this.throwIfDisposed(),this.throwIfNoProgram(),Sre(this.gl,t,e,r)}setOutputMatrixTexture(t,e,r){this.setOutputMatrixTextureDriver(t,r,e)}setOutputPackedMatrixTexture(t,e,r){this.throwIfDisposed();let[o,s]=Cc(e,r);this.setOutputMatrixTextureDriver(t,o,s)}setOutputMatrixWriteRegion(t,e,r,o){this.setOutputMatrixWriteRegionDriver(r,t,o,e)}setOutputPackedMatrixWriteRegion(t,e,r,o){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")}debugValidate(){this.program!=null&&_N(this.gl,this.program),oC(this.gl)}executeProgram(){this.throwIfDisposed(),this.throwIfNoProgram();let t=this.gl;if(this.debug){let e=this.getVertexArray();console.assert(e===this.program.vao,"VAO changed between setProgram and executeProgram!"),this.debugValidate()}Me(t,()=>t.drawElements(t.TRIANGLES,6,t.UNSIGNED_SHORT,0))}blockUntilAllProgramsCompleted(){this.throwIfDisposed(),Me(this.gl,()=>this.gl.finish())}getQueryTimerExtension(){return this.disjointQueryTimerExtension==null&&(this.disjointQueryTimerExtension=rC(this.gl,Y().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension}getQueryTimerExtensionWebGL2(){return this.getQueryTimerExtension()}getQueryTimerExtensionWebGL1(){return this.getQueryTimerExtension()}beginQuery(){if(Y().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){let r=this.gl,o=this.getQueryTimerExtensionWebGL2(),s=r.createQuery();return r.beginQuery(o.TIME_ELAPSED_EXT,s),s}let t=this.getQueryTimerExtensionWebGL1(),e=t.createQueryEXT();return t.beginQueryEXT(t.TIME_ELAPSED_EXT,e),e}endQuery(){if(Y().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){let e=this.gl,r=this.getQueryTimerExtensionWebGL2();e.endQuery(r.TIME_ELAPSED_EXT);return}let t=this.getQueryTimerExtensionWebGL1();t.endQueryEXT(t.TIME_ELAPSED_EXT)}waitForQueryAndGetTime(t){return ee(this,null,function*(){return yield C.repeatedTry(()=>this.disposed||this.isQueryAvailable(t,Y().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))),this.getQueryTime(t,Y().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))})}getQueryTime(t,e){if(e===0)return null;if(e===2){let r=this.gl;return r.getQueryParameter(t,r.QUERY_RESULT)/1e6}else{let r=this.getQueryTimerExtensionWebGL1();return r.getQueryObjectEXT(t,r.QUERY_RESULT_EXT)/1e6}}isQueryAvailable(t,e){if(e===0)return!0;if(e===2){let r=this.gl,o=this.getQueryTimerExtensionWebGL2(),s=r.getQueryParameter(t,r.QUERY_RESULT_AVAILABLE);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(o.GPU_DISJOINT_EXT)),s&&!this.disjoint}else{let r=this.getQueryTimerExtensionWebGL1(),o=r.getQueryObjectEXT(t,r.QUERY_RESULT_AVAILABLE_EXT);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(r.GPU_DISJOINT_EXT)),o&&!this.disjoint}}pollFence(t){return new Promise(e=>{this.addItemToPoll(()=>t.isFencePassed(),()=>e())})}pollItems(){let t=LLe(this.itemsToPoll.map(e=>e.isDoneFn));for(let e=0;e<=t;++e){let{resolveFn:r}=this.itemsToPoll[e];r()}this.itemsToPoll=this.itemsToPoll.slice(t+1)}addItemToPoll(t,e){if(this.itemsToPoll.push({isDoneFn:t,resolveFn:e}),this.itemsToPoll.length>1)return;let r;"setTimeoutCustom"in Y().platform&&(r=Y().platform.setTimeoutCustom.bind(Y().platform)),C.repeatedTry(()=>(this.pollItems(),this.itemsToPoll.length===0),()=>0,null,r)}bindTextureToFrameBuffer(t){this.throwIfDisposed(),AN(this.gl,t,this.framebuffer),this.debug&&oC(this.gl)}unbindTextureToFrameBuffer(){this.outputTexture!=null?(AN(this.gl,this.outputTexture,this.framebuffer),this.debug&&oC(this.gl)):_L(this.gl,this.framebuffer)}downloadMatrixDriver(t,e){this.bindTextureToFrameBuffer(t);let r=e();return this.unbindTextureToFrameBuffer(),r}setOutputMatrixTextureDriver(t,e,r){this.throwIfDisposed();let o=this.gl;AN(o,t,this.framebuffer),this.debug&&oC(o),this.outputTexture=t,Me(o,()=>o.viewport(0,0,e,r)),Me(o,()=>o.scissor(0,0,e,r))}setOutputMatrixWriteRegionDriver(t,e,r,o){this.throwIfDisposed(),Me(this.gl,()=>this.gl.scissor(t,e,r,o))}throwIfDisposed(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")}throwIfNoProgram(){if(this.program==null)throw new Error("No GPU program is currently set.")}};function LLe(n){let t=0;for(;t<n.length&&n[t]();++t);return t-1}var{addImpl:roe,bincountImpl:zN,bincountReduceImpl:ooe,bitwiseAndImpl:soe,castImpl:ioe,ceilImpl:aoe,concatImpl:loe,equalImpl:coe,expImpl:uoe,expm1Impl:poe,floorImpl:foe,gatherNdImpl:doe,gatherV2Impl:hoe,greaterImpl:moe,greaterEqualImpl:goe,lessImpl:xoe,lessEqualImpl:yoe,linSpaceImpl:boe,logImpl:voe,maxImpl:woe,maximumImpl:Coe,minimumImpl:Ioe,multiplyImpl:Soe,negImpl:Toe,notEqualImpl:Eoe,prodImpl:Noe,raggedGatherImpl:Doe,raggedRangeImpl:koe,raggedTensorToTensorImpl:_oe,rangeImpl:Aoe,rsqrtImpl:Roe,scatterImpl:Moe,sigmoidImpl:Ooe,simpleAbsImpl:VN,sliceImpl:Foe,sparseFillEmptyRowsImpl:Poe,sparseReshapeImpl:$oe,sparseSegmentReductionImpl:UN,sqrtImpl:Loe,staticRegexReplaceImpl:Boe,stridedSliceImpl:zoe,stringNGramsImpl:Voe,stringSplitImpl:Uoe,stringToHashBucketFastImpl:joe,subImpl:Goe,tileImpl:Woe,topKImpl:Hoe,transposeImpl:og,uniqueImpl:qoe}=pL;function LL(n,t){return["x","y","z","w","u","v"].slice(0,t).map(e=>`${n}.${e}`)}function or(n,t){return t===1?[n]:LL(n,t)}function Koe(n,t){if(n===1)return"rc";let e="";for(let r=0;r<n;r++)e+=t[r],r<n-1&&(e+=",");return e}var jN=class{constructor(t){if(this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=t,this.rank=t.length,this.enableShapeUniforms=Yt(this.outputShape.length),this.rank===0)this.userCode=`
        void main() {
          setOutput(vec4(getA(), 0., 0., 0.));
        }
      `;else{let e=or("rc",this.rank),r=at(this.rank),o=this.getOutOfBoundsCondition(e),s=this.getSetup(e),i=this.getOutput(e);this.userCode=`
        void main() {
          ${r} rc = getOutputCoords();

          if(${o}) {
            setOutput(vec4(0));
          } else {
            ${s}

            setOutput(vec4(${i}));
          }
        }
      `}}getSourceCoordsArr(t){let e=[];for(let r=0;r<=1;r++)for(let o=0;o<=1;o++){let s=`${r===0?"r":"rp1"}, ${o===0?"c":"cp1"}`;for(let i=2;i<this.rank;i++)s=`${t[t.length-1-i]},`+s;e.push(s)}return e}getOutOfBoundsCondition(t){if(this.rank===1)return`rc > ${this.enableShapeUniforms?"outShape":this.outputShape[0]}`;let e="";for(let r=this.rank-2;r<this.rank;r++)e+=`${t[r]} >= ${this.enableShapeUniforms?`outShape[${r}]`:this.outputShape[r]}`,r<this.rank-1&&(e+="||");return e}getSetup(t){if(this.rank===1)return"";let e=t.slice(-2),r=this.enableShapeUniforms?`outShape[${this.rank} - 1]`:this.outputShape[this.rank-1],o=this.enableShapeUniforms?`outShape[${this.rank} - 2]`:this.outputShape[this.rank-2];return`
      int r = ${e[0]};
      int c = ${e[1]};
      int rp1 = r + 1;
      int cp1 = c + 1;

      bool cEdge = cp1 >= ${r};
      bool rEdge = rp1 >= ${o};
    `}getOutput(t){let e=this.getSourceCoordsArr(t);return this.rank===1?`getA(rc), (rc + 1 >= ${this.enableShapeUniforms?"outShape":this.outputShape[0]} ? 0. : getA(rc + 1)), 0, 0`:`getA(${e[0]}),
            cEdge ? 0. : getA(${e[1]}),
            rEdge ? 0. : getA(${e[2]}),
            rEdge || cEdge ? 0. : getA(${e[3]})`}};var eb=class{constructor(t,e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec3"}],this.outputShape=t,this.enableShapeUniforms=Yt(this.outputShape.length);let r="";for(let o=0;o<4;o++){let s="thisRC = rc;";o%2===1&&(s+="thisRC.z += 1;"),o>1&&(s+="thisRC.y += 1;"),r+=`
        ${s}
        ${o>0?"if(thisRC.y < rows && thisRC.z < cols){":""}
          int flatIndex = getFlatIndex(thisRC);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);
          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[${o}] =
            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);
        ${o>0?"}":""}
      `}this.userCode=`
      ${BLe(e,this.enableShapeUniforms)}
      ${this.enableShapeUniforms?qy():Hy(t)}

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.);

        ivec3 thisRC;
        int rows = ${this.enableShapeUniforms?"outShape[1]":t[1]};
        int cols = ${this.enableShapeUniforms?"outShape[2]":t[2]};

        ${r}

        setOutput(result);
      }
    `}};function BLe(n,t){return`
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      ${t?Rre(["r","c","d"],"inputShape"):ka(["r","c","d"],n)}
      return ivec3(r, c, d);
    }
  `}N();var GN=class{constructor(t){this.gpgpu=t,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0,this.freeTextures={},this.usedTextures={},this.logEnabled=!1}acquireTexture(t,e,r){let o=Yoe(e,r),s=Zoe(t,o,r);s in this.freeTextures||(this.freeTextures[s]=[]),s in this.usedTextures||(this.usedTextures[s]=[]);let i=Xoe(t,o,this.gpgpu.gl,this.gpgpu.textureConfig,r);if(this.freeTextures[s].length>0){this.numFreeTextures--,this.numUsedTextures++,this._numBytesFree-=i,this.log();let l=this.freeTextures[s].pop();return this.usedTextures[s].push(l),l}let a;return o===po.PACKED_2X2_FLOAT32?a=this.gpgpu.createPackedMatrixTexture(t[0],t[1]):o===po.PACKED_2X2_FLOAT16?a=this.gpgpu.createFloat16PackedMatrixTexture(t[0],t[1]):o===po.UNPACKED_FLOAT32?a=this.gpgpu.createFloat32MatrixTexture(t[0],t[1]):o===po.UNPACKED_FLOAT16?a=this.gpgpu.createFloat16MatrixTexture(t[0],t[1]):o===po.PACKED_4X1_UNSIGNED_BYTE&&(a=this.gpgpu.createUnsignedBytesMatrixTexture(t[0],t[1])),this.usedTextures[s].push(a),this.numUsedTextures++,this._numBytesAllocated+=i,this.log(),a}releaseTexture(t,e,r,o){if(this.freeTextures==null)return;let s=Yoe(r,o),i=Zoe(e,s,o);i in this.freeTextures||(this.freeTextures[i]=[]);let a=Xoe(e,s,this.gpgpu.gl,this.gpgpu.textureConfig,o),l=Y().getNumber("WEBGL_DELETE_TEXTURE_THRESHOLD");l!==-1&&this._numBytesAllocated>l?(this.gpgpu.deleteMatrixTexture(t.texture),this._numBytesAllocated-=a):(this.freeTextures[i].push(t),this.numFreeTextures++,this._numBytesFree+=a),this.numUsedTextures--;let c=this.usedTextures[i],u=c&&c.indexOf(t);if(u==null||u<0)throw new Error("Cannot release a texture that was never provided by this texture manager");c[u]=c[c.length-1],c.pop(),this.log()}log(){if(!this.logEnabled)return;let t=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",`${this.numFreeTextures} / ${this.numUsedTextures}`,`(${t})`);let e=this._numBytesFree/this._numBytesAllocated;console.log(`Bytes allocated: ${this._numBytesAllocated}`),console.log(`Bytes unused: ${this._numBytesFree} (${Math.round(100*e)}%)`)}get numBytesAllocated(){return this._numBytesAllocated}get numBytesFree(){return this._numBytesFree}getNumUsedTextures(){return this.numUsedTextures}getNumFreeTextures(){return this.numFreeTextures}dispose(){if(this.freeTextures!=null){for(let t in this.freeTextures)this.freeTextures[t].forEach(e=>{this.gpgpu.deleteMatrixTexture(e.texture)});for(let t in this.usedTextures)this.usedTextures[t].forEach(e=>{this.gpgpu.deleteMatrixTexture(e.texture)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0}}};function zLe(n,t){let e=n;if(t===e.R32F)return 4;if(t===e.R16F)return 2;if(t===e.RGBA32F)return 16;if(t===n.RGBA)return 16;if(t===e.RGBA16F)return 8;if(t===e.RGBA8)return 4;throw new Error(`Unknown internal format ${t}`)}function Xoe(n,t,e,r,o){let s=VLe(t,r),i;if(o){let[l,c]=Cc(n[0],n[1]);i=l*c}else{let[l,c]=eg(n[0],n[1]);i=l*c}let a=zLe(e,s);return i*a}function VLe(n,t){switch(n){case po.PACKED_2X2_FLOAT32:return PL(t);case po.PACKED_2X2_FLOAT16:return $L(t);case po.UNPACKED_FLOAT32:return ML(t);case po.UNPACKED_FLOAT16:return OL(t);case po.PACKED_4X1_UNSIGNED_BYTE:return FL(t);default:throw new Error(`Unknown physical texture type ${n}`)}}function ULe(n){return Y().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?n?po.PACKED_2X2_FLOAT32:po.UNPACKED_FLOAT32:n?po.PACKED_2X2_FLOAT16:po.UNPACKED_FLOAT16}function Yoe(n,t){if(n===No.UPLOAD)return po.PACKED_2X2_FLOAT32;if(n===No.RENDER||n==null)return ULe(t);if(n===No.DOWNLOAD||n===No.PIXELS)return po.PACKED_4X1_UNSIGNED_BYTE;throw new Error(`Unknown logical texture type ${n}`)}function Zoe(n,t,e){return`${n[0]}_${n[1]}_${t}_${e}`}var to=class{constructor(t,e){this.variableNames=["A"],this.outputShape=t,this.enableShapeUniforms=Yt(this.outputShape.length),this.userCode=`
      float unaryOperation(float x) {
        ${e}
      }

      void main() {
        float x = getAAtOutCoords();
        float y = unaryOperation(x);

        setOutput(y);
      }
    `}},Cr="if (isnan(x)) return x;",Qoe="return x;",BL="return abs(x);";var Joe="return (x >= 0.0) ? x : (exp(x) - 1.0);",ese=Cr+`
  return (x < 0.0) ? 0.0 : x;
`,tse=Cr+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,Sc="return x;",nse="return 1.0 / (1.0 + exp(-1.0 * x));";var ose="return x;",sse=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,ise=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,ase=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,lse="return 1.0 / (1.0 + exp(-1.0 * x));",cs=class{constructor(t,e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.enableShapeUniforms=Yt(this.outputShape.length),this.userCode=`
      vec4 unaryOperation(vec4 x) {
        ${e}
      }

      void main() {
        vec4 x = getAAtOutCoords();
        vec4 y = unaryOperation(x);

        setOutput(y);
      }
    `}};var WN=class{constructor(t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=t,this.enableShapeUniforms=Yt(this.outputShape.length);let e=t.length,r=or("rc",e),o=at(e),s=Koe(e,r),i=r.slice(-2),a=e<=1?"rc":`vec2(${i.join(",")})`;this.userCode=`
      void main() {
        ${o} rc = getOutputCoords();
        vec4 packedInput = getA(${s});

        setOutput(getChannel(packedInput, ${a}));
      }
    `}};var GLe=Jr.whereImpl,WLe=1e-7,HLe=1e-4,HN={};function qLe(n){return n in HN||(HN[n]={}),HN[n]}var KLe=Y().getNumber("CPU_HANDOFF_SIZE_THRESHOLD"),XLe=600;function YLe(){return Y().global.screen==null?1024:Y().global.screen.height*Y().global.screen.width*window.devicePixelRatio*XLe/1024/1024}var cse=(()=>{class n extends cl{nextDataId(){return n.nextDataId++}constructor(e){if(super(),this.pendingRead=new WeakMap,this.pendingDisposal=new WeakSet,this.dataRefCount=new WeakMap,this.numBytesInGPU=0,this.uploadWaitMs=0,this.downloadWaitMs=0,this.lastGlFlushTime=0,this.warnedAboutMemory=!1,this.pendingDeletes=0,this.disposed=!1,!Y().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");let r;if(e!=null){if(e instanceof Jy)r=e;else{let o=Rs(Y().getNumber("WEBGL_VERSION"),e);r=new Jy(o)}this.binaryCache={},this.gpgpuCreatedLocally=!1}else{let o=Rs(Y().getNumber("WEBGL_VERSION"));r=new Jy(o),this.binaryCache=qLe(Y().getNumber("WEBGL_VERSION")),this.gpgpuCreatedLocally=!0}this.gpgpu=r,this.canvas=this.gpgpu.gl.canvas,this.textureManager=new GN(this.gpgpu),this.numMBBeforeWarning=YLe(),this.texData=new ef(this,Ks())}numDataIds(){return this.texData.numDataIds()-this.pendingDeletes}writeTexture(e,r,o,s,i,a){let l=this.makeTensorInfo(r,o),c=this.texData.get(l.dataId);c.isPacked=!1,c.texture={texture:e,texShape:[s,i]},c.texShape=[s,i];let u=sC(r),p=new iC(u,!1,a),f=this.runWebGLProgram(p,[l],o,[[s,i]]);return f.shape=r,c.texture=null,this.disposeIntermediateTensorInfo(l),f.dataId}write(e,r,o){if((Y().getBool("WEBGL_CHECK_NUMERICAL_PROBLEMS")||Y().getBool("DEBUG"))&&this.checkNumericalProblems(e),o==="complex64"&&e!=null)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");let s={id:this.nextDataId()};return this.texData.set(s,{shape:r,dtype:o,values:e,usage:No.UPLOAD,refCount:1}),s}refCount(e){return this.texData.has(e)?this.texData.get(e).refCount:0}incRef(e){let r=this.texData.get(e);r.refCount++}decRef(e){if(this.texData.has(e)){let r=this.texData.get(e);r.refCount--}}move(e,r,o,s,i){if(Y().getBool("DEBUG")&&this.checkNumericalProblems(r),s==="complex64")throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(e,{shape:o,dtype:s,values:r,usage:No.UPLOAD,refCount:i})}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}readSync(e){let r=this.texData.get(e),{values:o,dtype:s,complexTensorInfos:i,slice:a,shape:l,isPacked:c}=r;if(a!=null){let d;c?d=new cs(l,Sc):d=new to(l,Sc);let h=this.runWebGLProgram(d,[{dataId:e,shape:l,dtype:s}],s),m=this.readSync(h.dataId);return this.disposeIntermediateTensorInfo(h),m}if(o!=null)return this.convertAndCacheOnCPU(e);if(s==="string")return o;let u=this.activeTimers!=null,p;u&&(p=C.now());let f;if(s==="complex64"){let d=this.readSync(i.real.dataId),h=this.readSync(i.imag.dataId);f=M.mergeRealAndImagArrays(d,h)}else f=this.getValuesFromTexture(e);return u&&(this.downloadWaitMs+=C.now()-p),this.convertAndCacheOnCPU(e,f)}read(e){return ee(this,null,function*(){if(this.pendingRead.has(e)){let m=this.pendingRead.get(e);return new Promise(g=>m.push(g))}let r=this.texData.get(e),{values:o,shape:s,slice:i,dtype:a,complexTensorInfos:l,isPacked:c}=r;if(i!=null){let m;c?m=new cs(s,Sc):m=new to(s,Sc);let g=this.runWebGLProgram(m,[{dataId:e,shape:s,dtype:a}],a),x=this.read(g.dataId);return this.disposeIntermediateTensorInfo(g),x}if(o!=null)return this.convertAndCacheOnCPU(e);if(Y().getBool("DEBUG")&&!Y().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&Y().getNumber("WEBGL_VERSION")===2)throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");let u=null,p;if(a!=="complex64"&&Y().get("WEBGL_BUFFER_SUPPORTED")){p=this.decode(e);let m=this.texData.get(p.dataId);u=this.gpgpu.createBufferFromTexture(m.texture.texture,...tC(s))}this.pendingRead.set(e,[]),a!=="complex64"&&(yield this.gpgpu.createAndWaitForFence());let f;if(a==="complex64"){let m=yield Promise.all([this.read(l.real.dataId),this.read(l.imag.dataId)]),g=m[0],x=m[1];f=M.mergeRealAndImagArrays(g,x)}else if(u==null)f=this.getValuesFromTexture(e);else{let m=C.sizeFromShape(s);f=this.gpgpu.downloadFloat32MatrixFromBuffer(u,m)}if(p!=null&&this.disposeIntermediateTensorInfo(p),u!=null){let m=this.gpgpu.gl;Me(m,()=>m.deleteBuffer(u))}let d=this.convertAndCacheOnCPU(e,f),h=this.pendingRead.get(e);return this.pendingRead.delete(e),h.forEach(m=>m(d)),this.pendingDisposal.has(e)&&(this.pendingDisposal.delete(e),this.disposeData(e)&&Ks().removeDataId(e,this),this.pendingDeletes--),d})}readToGPU(e,r={}){let o=this.texData.get(e),{values:s,shape:i,slice:a,dtype:l,isPacked:c,texture:u}=o;if(l==="complex64")throw new Error("Does not support reading texture for complex64 dtype.");if(a!=null){let h;c?h=new cs(i,Sc):h=new to(i,Sc);let m=this.runWebGLProgram(h,[{dataId:e,shape:i,dtype:l}],l),g=this.readToGPU(m,r);return this.disposeIntermediateTensorInfo(m),g}if(u==null)throw s!=null?new Error("Data is not on GPU but on CPU."):new Error("There is no data on GPU or CPU.");let p=this.decode(e,r.customTexShape),f=Ks().makeTensorFromTensorInfo(p),d=this.texData.get(p.dataId);return Object.assign({tensorRef:f},d.texture)}bufferSync(e){let r=this.readSync(e.dataId);if(e.dtype==="string")try{let o=r.map(s=>C.decodeString(s));return Pe(e.shape,e.dtype,o)}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return Pe(e.shape,e.dtype,r)}checkNumericalProblems(e){if(e!=null)for(let r=0;r<e.length;r++){let o=e[r];if(!fre(o))throw Y().getBool("WEBGL_RENDER_FLOAT32_CAPABLE")?Error(`The value ${o} cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'`):Error(`The value ${o} cannot be represented on this device.`)}}getValuesFromTexture(e){let{shape:r,dtype:o,isPacked:s}=this.texData.get(e),i=C.sizeFromShape(r);if(Y().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){let d=this.decode(e),h=this.texData.get(d.dataId),m=this.gpgpu.downloadMatrixFromPackedTexture(h.texture.texture,...tC(r)).subarray(0,i);return this.disposeIntermediateTensorInfo(d),m}let a=Y().getBool("WEBGL_PACK")&&s===!0,l=a?sC(r):r,c=a?new LN(l):new $N(l),u=this.runWebGLProgram(c,[{shape:l,dtype:o,dataId:e}],"float32"),p=this.texData.get(u.dataId),f=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(p.texture.texture,p.texShape[0],p.texShape[1]).subarray(0,i);return this.disposeIntermediateTensorInfo(u),f}timerAvailable(){return Y().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0}time(e){let r=this.activeTimers,o=[],s=!1;this.programTimersStack==null?(this.programTimersStack=o,s=!0):this.activeTimers.push(o),this.activeTimers=o,e();let i=C.flatten(this.activeTimers.map(c=>c.query)).filter(c=>c!=null),a=C.flatten(this.activeTimers.map(c=>c.name)).filter(c=>c!=null);this.activeTimers=r,s&&(this.programTimersStack=null);let l={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null};return ee(this,null,function*(){if(Y().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0){let c=yield Promise.all(i);l.kernelMs=C.sum(c),l.getExtraProfileInfo=()=>c.map((u,p)=>({name:a[p],ms:u})).map(u=>`${u.name}: ${u.ms}`).join(", ")}else l.kernelMs={error:"WebGL query timers are not supported in this environment."};return this.uploadWaitMs=0,this.downloadWaitMs=0,l})}memory(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU,numBytesInGPUAllocated:this.textureManager.numBytesAllocated,numBytesInGPUFree:this.textureManager.numBytesFree}}startTimer(){return Y().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:C.now(),endMs:null}}endTimer(e){return Y().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),e):(e.endMs=C.now(),e)}getQueryTime(e){return ee(this,null,function*(){if(Y().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)return this.gpgpu.waitForQueryAndGetTime(e);let r=e;return r.endMs-r.startMs})}disposeData(e,r=!1){if(this.pendingDisposal.has(e))return!1;if(!this.texData.has(e))return!0;if(r?this.texData.get(e).refCount=0:this.texData.get(e).refCount--,!r&&this.texData.get(e).refCount>0)return!1;if(this.pendingRead.has(e))return this.pendingDisposal.add(e),this.pendingDeletes++,!1;this.releaseGPUData(e);let{complexTensorInfos:o}=this.texData.get(e);return o!=null&&(this.disposeData(o.real.dataId,r),this.disposeData(o.imag.dataId,r)),this.texData.delete(e),!0}releaseGPUData(e){let{texture:r,dtype:o,texShape:s,usage:i,isPacked:a,slice:l}=this.texData.get(e),c=l&&l.origDataId||e,u=this.dataRefCount.get(c);u>1?this.dataRefCount.set(c,u-1):(this.dataRefCount.delete(c),r!=null&&(this.numBytesInGPU-=this.computeBytes(s,o),this.textureManager.releaseTexture(r,s,i,a)));let p=this.texData.get(e);p.texture=null,p.texShape=null,p.isPacked=!1,p.slice=null}getTexture(e){return this.uploadToGPU(e),this.texData.get(e).texture.texture}getDataInfo(e){return this.texData.get(e)}shouldExecuteOnCPU(e,r=KLe){return Y().getBool("WEBGL_CPU_FORWARD")&&e.every(o=>this.texData.get(o.dataId).texture==null&&C.sizeFromShape(o.shape)<r)}getGPGPUContext(){return this.gpgpu}where(e){M.warn("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");let r=e.dataSync();return GLe(e.shape,r)}packedUnaryOp(e,r,o){let s=new cs(e.shape,r),i=this.compileAndRun(s,[e],o);return Ks().makeTensorFromTensorInfo(i)}abs(e){if(this.shouldExecuteOnCPU([e])&&e.dtype!=="complex64"){let s=VN(this.texData.get(e.dataId).values);return this.makeOutput(e.shape,e.dtype,s)}if(Y().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,BL,e.dtype);let r=new to(e.shape,BL),o=this.compileAndRun(r,[e]);return Ks().makeTensorFromTensorInfo(o)}makeTensorInfo(e,r,o){let s;if(r==="string"&&o!=null&&o.length>0&&C.isString(o[0])){let i=o.map(a=>C.encodeString(a));s=this.write(i,e,r)}else s=this.write(o,e,r);return this.texData.get(s).usage=null,{dataId:s,shape:e,dtype:r}}makeOutput(e,r,o){return Ks().makeTensorFromTensorInfo(this.makeTensorInfo(e,r,o),this)}unpackTensor(e){let r=new WN(e.shape);return this.runWebGLProgram(r,[e],e.dtype)}packTensor(e){let r=new jN(e.shape);return this.runWebGLProgram(r,[e],e.dtype,null,!0)}packedReshape(e,r){let o=[Qf(e.shape),...Jf(e.shape)],s={dtype:e.dtype,shape:o,dataId:e.dataId},i=[Qf(r),...Jf(r)],a=new eb(i,o),l=!0,c=[o],u=this.runWebGLProgram(a,[s],e.dtype,c,l);return{dataId:u.dataId,shape:r,dtype:u.dtype}}decode(e,r){let o=this.texData.get(e),{isPacked:s,shape:i,dtype:a}=o;if(r!=null){let d=C.sizeFromShape(i),h=r[0]*r[1]*4;C.assert(d<=h,()=>"customTexShape is too small. Row * Column * 4 should be equal or larger than the size of the tensor data.")}let l=sC(i),c;s?c=new PN(l):c=new FN(l);let u=!0,p=[r??tC(l)],f=this.runWebGLProgram(c,[{shape:l,dtype:a,dataId:e}],a,p,u,r);return{dtype:a,shape:i,dataId:f.dataId}}runWebGLProgram(e,r,o,s,i=!1,a){let l=this.makeTensorInfo(e.outputShape,o),c=this.texData.get(l.dataId);if(e.packedOutput&&(c.isPacked=!0),e.outPackingScheme===Jm.DENSE){let b=a??tC(e.outputShape);c.texShape=b.map(w=>w*2)}if(e.outTexUsage!=null&&(c.usage=e.outTexUsage),C.sizeFromShape(l.shape)===0)return c.values=C.getTypedArrayFromDType(l.dtype,0),l;let u=[],p=r.map(b=>{if(b.dtype==="complex64")throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");let w=this.texData.get(b.dataId);if(w.texture==null){if(!e.packedInputs&&C.sizeFromShape(b.shape)<=Y().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:b.shape,texData:null,isUniform:!0,uniformValues:w.values};e.packedInputs&&(w.isPacked=!0,w.shape=b.shape)}if(this.uploadToGPU(b.dataId),!!w.isPacked!=!!e.packedInputs)b=w.isPacked?this.unpackTensor(b):this.packTensor(b),u.push(b),w=this.texData.get(b.dataId);else if(w.isPacked&&!tg(w.shape,b.shape)){let v=b,S=b.shape;b.shape=w.shape,b=this.packedReshape(b,S),u.push(b),w=this.texData.get(b.dataId),v.shape=S}return{shape:b.shape,texData:w,isUniform:!1}});this.uploadToGPU(l.dataId);let f={shape:l.shape,texData:c,isUniform:!1},d=zre(e,p,f),h=this.getAndSaveBinary(d,()=>Lre(this.gpgpu,e,p,f)),m=this.activeTimers!=null,g;m&&(g=this.startTimer()),Y().get("ENGINE_COMPILE_ONLY")||Bre(this.gpgpu,h,p,f,s),u.forEach(b=>this.disposeIntermediateTensorInfo(b)),m&&(g=this.endTimer(g),this.activeTimers.push({name:e.constructor.name,query:this.getQueryTime(g)}));let x=Y().getNumber("WEBGL_FLUSH_THRESHOLD");if(x>0){let b=C.now();b-this.lastGlFlushTime>x&&(this.gpgpu.gl.flush(),this.lastGlFlushTime=b)}if(!Y().getBool("WEBGL_LAZILY_UNPACK")&&c.isPacked&&i===!1){let b=this.unpackTensor(l);return this.disposeIntermediateTensorInfo(l),b}return l}compileAndRun(e,r,o,s,i=!1){return o=o||r[0].dtype,this.runWebGLProgram(e,r,o,s,i)}getAndSaveBinary(e,r){return e in this.binaryCache||(this.binaryCache[e]=r()),this.binaryCache[e]}getTextureManager(){return this.textureManager}dispose(){this.disposed||(Y().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach(r=>{this.gpgpu.deleteProgram(this.binaryCache[r].webGLProgram),delete this.binaryCache[r]}),this.textureManager.dispose(),this.canvas!=null&&typeof HTMLCanvasElement<"u"&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)}floatPrecision(){return this.floatPrecisionValue==null&&(this.floatPrecisionValue=K(()=>{if(!Y().get("WEBGL_RENDER_FLOAT32_ENABLED")){let e=Y().getBool("DEBUG");Y().set("DEBUG",!1);let r=this.abs(Ie(1e-8)).dataSync()[0];if(Y().set("DEBUG",e),r>0)return 32}return 16})),this.floatPrecisionValue}epsilon(){return this.floatPrecision()===32?WLe:HLe}uploadToGPU(e){let r=this.texData.get(e),{shape:o,dtype:s,values:i,texture:a,usage:l,isPacked:c}=r;if(a!=null)return;let u=this.activeTimers!=null,p;u&&(p=C.now());let f=r.texShape;if(f==null&&(f=Tre(o,c),r.texShape=f),i!=null){let d=sC(o),h,m=f[1],g=f[0],x=i instanceof Uint8Array||i instanceof Uint8ClampedArray;(c||!x)&&([m,g]=Cc(f[0],f[1])),c?h=new BN(d,x):h=new iC(d,x);let b=x?[g,m]:f,w=this.makeTensorInfo(b,s),v=this.texData.get(w.dataId);x?v.usage=No.PIXELS:v.usage=No.UPLOAD,v.texShape=b,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(w.dataId),m,g,i);let S=[[g,m]],A=this.runWebGLProgram(h,[w],s,S,!0),$=this.texData.get(A.dataId);r.texShape=$.texShape,r.isPacked=$.isPacked,r.usage=$.usage,Y().get("ENGINE_COMPILE_ONLY")?this.disposeData(A.dataId):(r.texture=$.texture,r.values=null,this.texData.delete(A.dataId)),this.disposeIntermediateTensorInfo(w),u&&(this.uploadWaitMs+=C.now()-p)}else{let d=this.acquireTexture(f,l,s,c);r.texture=d}}convertAndCacheOnCPU(e,r){let o=this.texData.get(e),{dtype:s}=o;return r!=null&&(o.values=ZLe(r,s)),o.values}acquireTexture(e,r,o,s){if(this.numBytesInGPU+=this.computeBytes(e,o),!this.warnedAboutMemory&&this.numBytesInGPU>this.numMBBeforeWarning*1024*1024){let i=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn(`High memory usage in GPU: ${i} MB, most likely due to a memory leak`)}return this.textureManager.acquireTexture(e,r,s)}computeBytes(e,r){return e[0]*e[1]*C.bytesPerElement(r)}checkCompileCompletion(){for(let[,e]of Object.entries(this.binaryCache))this.checkCompletion_(e)}checkCompileCompletionAsync(){return ee(this,null,function*(){let e=[];if(this.gpgpu.parallelCompilationExtension){for(let[,r]of Object.entries(this.binaryCache))e.push(this.checkCompletionAsync_(r));return Promise.all(e)}else{for(let[,r]of Object.entries(this.binaryCache)){let o=new Promise(s=>{try{this.checkCompletion_(r),s(!0)}catch(i){throw i}});e.push(o)}return Promise.all(e)}})}checkCompletionAsync_(e){return ee(this,null,function*(){return this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.parallelCompilationExtension.COMPLETION_STATUS_KHR)?this.checkCompletion_(e):(yield wy(),this.checkCompletionAsync_(e))})}checkCompletion_(e){if(this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.gl.LINK_STATUS)===!1)throw console.log(this.gpgpu.gl.getProgramInfoLog(e.webGLProgram)),this.gpgpu.gl.getShaderParameter(e.fragmentShader,this.gpgpu.gl.COMPILE_STATUS)===!1?(DL(e.source,this.gpgpu.gl.getShaderInfoLog(e.fragmentShader)),new Error("Failed to compile fragment shader.")):new Error("Failed to link vertex and fragment shaders.");return!0}getUniformLocations(){for(let e of Object.values(this.binaryCache)){this.gpgpu.buildVao(e.webGLProgram);let{variablesLocations:r,customUniformLocations:o,infLoc:s,nanLoc:i,outShapeLocation:a,outShapeStridesLocation:l,outTexShapeLocation:c}=RL(this.gpgpu,e.program,e.webGLProgram);e.variablesLocations=r,e.customUniformLocations=o,e.infLoc=s,e.nanLoc=i,e.outShapeLocation=a,e.outShapeStridesLocation=l,e.outTexShapeLocation=c}}createTensorFromGPUData(e,r,o){e.channels=e.channels||"RGBA";let{texture:s,height:i,width:a,channels:l}=e,c=Ks().backend;if(!c.gpgpu.gl.isTexture(s))throw new Error("The texture is invalid. Also, please make sure the texture and the TFJS WebGL backend are using the same canvas. If you want to use your own custom canvas, you have to create and use the custom TFJS WebGL backend created from the canvas through 'new tf.MathBackendWebGL(customCanvas)'.");let u=c.writeTexture(s,r,o,i,a,l);return Ks().makeTensorFromDataId(u,r,o,c)}}return n.nextDataId=0,n})();function ZLe(n,t){if(t==="float32"||t==="complex64")return n;if(t==="int32"||t==="bool"){let e=t==="int32"?new Int32Array(n.length):new Uint8Array(n.length);for(let r=0;r<e.length;++r)e[r]=Math.round(n[r]);return e}else throw new Error(`Unknown dtype ${t}`)}Lu.isBrowser()&&r0("webgl",()=>new cse,2);N();N();N();N();N();var tb=`
  if (isnan(a)) return a;
  if (isnan(b)) return b;
`;var us=class{constructor(t,e,r){this.variableNames=["A","B"],this.outputShape=M.assertAndGetBroadcastShape(e,r),this.enableShapeUniforms=Yt(this.outputShape.length),this.userCode=`
      float binaryOperation(float a, float b) {
        ${t}
      }

      void main() {
        float a = getAAtOutCoords();
        float b = getBAtOutCoords();
        setOutput(binaryOperation(a, b));
      }
    `}};N();var Os=`
  result.r = isNaN.r ? NAN : result.r;
  result.g = isNaN.g ? NAN : result.g;
  result.b = isNaN.b ? NAN : result.b;
  result.a = isNaN.a ? NAN : result.a;
`;var Ms=class{constructor(t,e,r,o=!1){this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=M.assertAndGetBroadcastShape(e,r);let s=this.outputShape.length;this.enableShapeUniforms=Yt(s);let i="";if(o)if(s===0||C.sizeFromShape(this.outputShape)===1)i=`
          result.y = 0.;
          result.z = 0.;
          result.w = 0.;
        `;else if(i=`
          ${at(s)} coords = getOutputCoords();
        `,s===1)this.enableShapeUniforms?i+=`
            result.y = (coords + 1) >= outShape ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `:i+=`
            result.y = (coords + 1) >= ${this.outputShape[0]} ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `;else{let l=or("coords",s);this.enableShapeUniforms?i+=`
            bool nextRowOutOfBounds =
              (${l[s-2]} + 1) >= outShape[${s} - 2];
            bool nextColOutOfBounds =
              (${l[s-1]} + 1) >= outShape[${s} - 1];
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `:i+=`
            bool nextRowOutOfBounds =
              (${l[s-2]} + 1) >= ${this.outputShape[s-2]};
            bool nextColOutOfBounds =
              (${l[s-1]} + 1) >= ${this.outputShape[s-1]};
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `}this.userCode=`
      vec4 binaryOperation(vec4 a, vec4 b) {
        ${t}
      }

      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();

        vec4 result = binaryOperation(a, b);
        ${i}

        setOutput(result);
      }
    `}};N();N();function sr(n){let{inputs:t,backend:e}=n,{x:r}=t;return e.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}var use={kernelName:Qi,backendName:"webgl",kernelFunc:sr};function ps(n){let{inputs:t,backend:e}=n,{real:r,imag:o}=t,s=e.makeTensorInfo(r.shape,"complex64"),i=e.texData.get(s.dataId),a=sr({inputs:{x:r},backend:e}),l=sr({inputs:{x:o},backend:e});return i.complexTensorInfos={real:a,imag:l},s}var pse={kernelName:Zd,backendName:"webgl",kernelFunc:ps};N();var zL="return (a < 0.) ? b * a : a;",VL=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function QLe(n){let{inputs:t,backend:e,attrs:r}=n,{x:o}=t,{alpha:s}=r,i=e.makeTensorInfo([],"float32",C.createScalarValue(s,"float32")),a=Y().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Ms(VL,o.shape,i.shape):new us(zL,o.shape,i.shape),l=e.runWebGLProgram(a,[o,i],"float32");return e.disposeIntermediateTensorInfo(i),l}var fse={kernelName:uu,backendName:"webgl",kernelFunc:QLe};N();var UL="return (a < 0.) ? b * a : a;",jL=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function JLe(n){let{inputs:t,backend:e}=n,{x:r,alpha:o}=t,s=Y().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Ms(jL,r.shape,o.shape):new us(UL,r.shape,o.shape);return e.runWebGLProgram(s,[r,o],"float32")}var dse={kernelName:Iu,backendName:"webgl",kernelFunc:JLe};var Pi="if (isnan(x)) return x;";function Le({opSnippet:n,packedOpSnippet:t,cpuKernelImpl:e,dtype:r}){return({inputs:o,backend:s})=>{let{x:i}=o,a=s,l=r||i.dtype;if(a.shouldExecuteOnCPU([i])&&e!=null){let p=a.texData.get(i.dataId),f=e(p.values,l);return a.makeTensorInfo(i.shape,l,f)}let c=Y().getBool("WEBGL_PACK_UNARY_OPERATIONS")&&t!=null,u;return c?u=new cs(i.shape,t):u=new to(i.shape,n),a.runWebGLProgram(u,[i],l)}}function Ut({opSnippet:n,packedOpSnippet:t,checkOutOfBounds:e=!1,supportsComplex:r=!1,cpuKernelImpl:o,dtype:s}){return({inputs:i,backend:a})=>{let{a:l,b:c}=i,u=a;if(r&&l.dtype==="complex64"){let h=u.texData.get(l.dataId),m=u.texData.get(c.dataId),[g,x]=[[h.complexTensorInfos.real,m.complexTensorInfos.real],[h.complexTensorInfos.imag,m.complexTensorInfos.imag]].map(w=>{let[v,S]=w,k={dataId:v.dataId,dtype:v.dtype,shape:l.shape},A={dataId:S.dataId,dtype:S.dtype,shape:c.shape},$=new us(n,l.shape,c.shape);return u.runWebGLProgram($,[k,A],ar(v.dtype,S.dtype))}),b=ps({inputs:{real:g,imag:x},backend:u});return u.disposeIntermediateTensorInfo(g),u.disposeIntermediateTensorInfo(x),b}let p=s||ar(l.dtype,c.dtype);if((l.dtype==="string"||c.dtype==="string"||u.shouldExecuteOnCPU([l,c]))&&o!=null){let h=u.texData.get(l.dataId).values,m=u.texData.get(c.dataId).values,g=l.dtype==="string"?M.fromUint8ToStringArray(h):h,x=l.dtype==="string"?M.fromUint8ToStringArray(m):m,[b,w]=o(l.shape,c.shape,g,x,p),v=u.makeTensorInfo(w,p),S=u.texData.get(v.dataId);return S.values=b,v}let f=Y().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&t!=null,d;return f?d=new Ms(t,l.shape,c.shape,e):d=new us(n,l.shape,c.shape),u.runWebGLProgram(d,[l,c],p)}}function bp(n,t=!1){if(n==="linear")return t?ose:Qoe;if(n==="relu")return t?ise:ese;if(n==="elu")return t?sse:Joe;if(n==="relu6")return t?ase:tse;if(n==="prelu")return t?jL:UL;if(n==="leakyrelu")return t?VL:zL;if(n==="sigmoid")return t?lse:nse;throw new Error(`Activation ${n} has not been implemented for the WebGL backend.`)}var nb=class{constructor(t,e,r,o=!1,s=!1,i=!1,a=null,l=!1,c=!1){this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=r,this.enableShapeUniforms=Yt(this.outputShape.length);let u=o?t[1]:t[2],p=Math.ceil(u/2),f=o?"i * 2, rc.y":"rc.y, i * 2",d=s?"rc.z, i * 2":"i * 2, rc.z",h=o?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],m=s?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"],g="",x="";a&&(l?g=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${a}
        }`:c?g=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${a}
        }`:g=`vec4 activation(vec4 x) {
          ${a}
        }`,x="result = activation(result);");let b=i?"result += getBiasAtOutCoords();":"";i&&this.variableNames.push("bias"),l&&this.variableNames.push("preluActivationWeights"),c&&this.variableNames.push("leakyreluAlpha");let w="rc.x",v="rc.x";t[0]<e[0]?w=`imod(rc.x, ${t[0]})`:e[0]<t[0]&&(v=`imod(rc.x, ${e[0]})`),this.userCode=`
      ${g}
      // Don't use uniform for sharedDimensionPacked for performance.
      const float sharedDimension = ${p}.0;

      vec4 dot2x2ARowBCol(ivec3 rc) {
        vec4 result = vec4(0);
        int batchA = ${w};
        int batchB = ${v};
        for (int i = 0; i < ${p}; i++) {
          vec4 a = getMatrixA(batchA, ${f});
          vec4 b = getMatrixB(batchB, ${d});

          // These swizzled products need to be separately added.
          // See: https://github.com/tensorflow/tfjs/issues/1735
          result += (${h[0]} * ${m[0]});
          result += (${h[1]} * ${m[1]});
        }
        return result;
      }

      void main() {
        ivec3 rc = getOutputCoords();
        vec4 result = dot2x2ARowBCol(rc);

        ${b}

        ${x}

        setOutput(result);
      }
    `}};N();N();var GL={REAL:"return areal * breal - aimag * bimag;",IMAG:"return areal * bimag + aimag * breal;"},lC=class{constructor(t,e,r){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=M.assertAndGetBroadcastShape(e,r),this.userCode=`
      float binaryOpComplex(
          float areal, float aimag, float breal, float bimag) {
        ${t}
      }

      void main() {
        float areal = getARealAtOutCoords();
        float aimag = getAImagAtOutCoords();
        float breal = getBRealAtOutCoords();
        float bimag = getBImagAtOutCoords();
        setOutput(binaryOpComplex(areal, aimag, breal, bimag));
      }
    `}};var hse="return a * b;";function cC(n){let{inputs:t,backend:e}=n,{a:r,b:o}=t,s=M.upcastType(r.dtype,o.dtype);if(r.dtype==="complex64"){let a=e.texData.get(r.dataId),l=e.texData.get(o.dataId),c=new lC(GL.REAL,r.shape,o.shape),u=new lC(GL.IMAG,r.shape,o.shape),p=[{dataId:a.complexTensorInfos.real.dataId,dtype:a.complexTensorInfos.real.dtype,shape:r.shape},{dataId:a.complexTensorInfos.imag.dataId,dtype:a.complexTensorInfos.imag.dtype,shape:r.shape},{dataId:l.complexTensorInfos.real.dataId,dtype:l.complexTensorInfos.real.dtype,shape:o.shape},{dataId:l.complexTensorInfos.imag.dataId,dtype:l.complexTensorInfos.imag.dtype,shape:o.shape}],f=e.runWebGLProgram(c,p,"float32"),d=e.runWebGLProgram(u,p,"float32"),h=ps({inputs:{real:f,imag:d},backend:e});return e.disposeIntermediateTensorInfo(f),e.disposeIntermediateTensorInfo(d),h}if(e.shouldExecuteOnCPU([r,o])){let a=e.texData.get(r.dataId),l=e.texData.get(o.dataId),[c,u]=Soe(r.shape,o.shape,a.values,l.values,s),p=e.makeTensorInfo(u,s),f=e.texData.get(p.dataId);return f.values=c,p}let i;return Y().getBool("WEBGL_PACK_BINARY_OPERATIONS")?i=new Ms(hse,r.shape,o.shape):i=new us(hse,r.shape,o.shape),e.runWebGLProgram(i,[r,o],s)}var mse={kernelName:Bl,backendName:"webgl",kernelFunc:cC};N();function gse(n,t,e){let r=[Qf(n.shape),...Jf(n.shape)],o={dtype:n.dtype,shape:r,dataId:n.dataId},s=[Qf(t),...Jf(t)],i=new eb(s,r),a=!0,l=[r],c=e.runWebGLProgram(i,[o],n.dtype,l,a);return{dataId:c.dataId,shape:t,dtype:c.dtype}}function ye(n){let{inputs:t,backend:e,attrs:r}=n,{x:o}=t,{shape:s}=r,i=e,a=C.sizeFromShape(o.shape),l=C.inferFromImplicitShape(s,a),c=C.sizeFromShape(l);C.assert(a===c,()=>`The new shape (${l}) has ${c} elements and the old shape (${o.shape}) has ${a} elements. The new shape and old shape must have the same number of elements.`);let u=i.texData.get(o.dataId);return u.isPacked&&!tg(o.shape,l)&&!(u.texture!==null&&tg(u.shape,l))?gse(o,l,i):(i.incRef(o.dataId),{dataId:o.dataId,shape:l,dtype:o.dtype})}var xse={kernelName:Tu,backendName:"webgl",kernelFunc:ye};N();N();N();N();var uC=class{constructor(t,e){this.variableNames=["x"];let{windowSize:r,batchSize:o,inSize:s,outSize:i}=t;this.outputShape=[o,i];let a=Math.floor(r/4)*4,l=r%4,c="sumValue += dot(values, ones);";if(e!=null){let p=1/e;c=`sumValue += dot(values * ${C.isInt(p)?p.toPrecision(2):p}, ones);`}let u="";s%r>0&&(u=`
        if (inIdx < 0 || inIdx >= ${s}) {
          return 0.0;
        }
      `),this.userCode=`
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${u}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${r};

        float sumValue = 0.0;

        for (int i = 0; i < ${a}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${c}
        }

        int inIdx = inOffset + ${a};
        if (${l===1}) {
          vec4 values = vec4(getValue(batch, inIdx), 0.0, 0.0, 0.0);

          ${c}
        } else if (${l===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1), 0.0, 0.0);

          ${c}
        } else if (${l===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2), 0.0);

          ${c}
        }
        setOutput(sumValue);
      }
    `}};var qN=class{constructor(t,e){this.variableNames=["x"];let{windowSize:r,batchSize:o,inSize:s,outSize:i}=t;this.outputShape=[o,i];let a="0.0",l="";e==="prod"?a="1.0":e==="min"?(a="1.0 / 1e-20",l="min"):e==="max"&&(a="-1.0 / 1e-20",l="max");let c=`${e}(${e}(${e}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;e==="sum"?c="sumValue":e==="prod"?c="prodValue":e==="all"?c="allValue":e==="any"&&(c="anyValue");let u=Math.floor(r/4)*4,p=r%4,f=`
      if (${e==="sum"}) {
        sumValue += dot(values, ones);
      } else if (${e==="prod"}) {
        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);
        prodValue *= tmp[0] * tmp[1];
      } else {
        minMaxValue = ${l}(values, minMaxValue);
        if (${e==="min"} || ${e==="max"}) {
          minMaxValue = ${l}(values, minMaxValue);
          bvec4 isNaN = isnan(values);
          if (isNaN.r || isNaN.g || isNaN.b || isNaN.a) {
            minMaxValue = vec4(NAN);
          }
        }
      }
    `,d="vec4";e==="all"?(a="1.0",f=`
        bool reducedAllValue = all(values);
        float floatedReducedAllValue = float(reducedAllValue);
        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);
      `,d="bvec4"):e==="any"&&(a="0.0",f=`
        bool reducedAnyValue = any(values);
        float floatedReducedAnyValue = float(reducedAnyValue);
        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);
      `,d="bvec4");let h="";s%r>0&&(h=`
        if (inIdx < 0 || inIdx >= ${s}) {
          return initializationValue;
        }
      `),this.userCode=`
      const float initializationValue = ${a};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${h}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${r};

        vec4 minMaxValue = vec4(${a});
        float prodValue = 1.0;
        float sumValue = 0.0;
        float allValue = 1.0;
        float anyValue = 0.0;

        for (int i = 0; i < ${u}; i += 4) {
          int inIdx = inOffset + i;
          ${d} values = ${d}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${f}
        }

        int inIdx = inOffset + ${u};
        if (${p===1}) {
          ${d} values = ${d}(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          ${f}
        } else if (${p===2}) {
          ${d} values = ${d}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          ${f}
        } else if (${p===3}) {
          ${d} values = ${d}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          ${f}
        }
        setOutput(${c});
      }
    `}};function tBe(n){let t=[];for(;t.length===0||t[t.length-1].outSize!==1;){let e=t.length?t[t.length-1].outSize:n[1],r=M.computeOptimalWindowSize(e);t.push({inSize:e,windowSize:r,outSize:Math.ceil(e/r)})}return t}function Fs(n,t,e,r){let o=tBe(n.shape),s=n;for(let i=0;i<o.length;i++){let{inSize:a,windowSize:l,outSize:c}=o[i],u,p;e==="mean"?u=i===0?new uC({windowSize:l,inSize:a,batchSize:n.shape[0],outSize:c},a):new uC({windowSize:l,inSize:a,batchSize:n.shape[0],outSize:c}):u=new qN({windowSize:l,inSize:a,batchSize:n.shape[0],outSize:c},e),p=s,s=r.runWebGLProgram(u,[s],t),p.dataId!==n.dataId&&r.disposeIntermediateTensorInfo(p)}return s}N();var KN=class{constructor(t,e){this.variableNames=["A"];let r=new Array(t.length);for(let i=0;i<r.length;i++)r[i]=t[e[i]];this.outputShape=r,this.rank=r.length;let o=at(this.rank),s=nBe(e);this.userCode=`
    void main() {
      ${o} resRC = getOutputCoords();
      setOutput(getA(${s}));
    }
    `}};function nBe(n){let t=n.length;if(t>6)throw Error(`Transpose for rank ${t} is not yet supported`);let e=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],r=new Array(t);for(let o=0;o<n.length;o++)r[n[o]]=e[o];return r.join()}var XN=class{constructor(t,e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;let r=new Array(t.length);for(let u=0;u<r.length;u++)r[u]=t[e[u]];if(this.outputShape=r,this.rank=r.length,this.rank>6)throw Error(`Packed transpose for rank ${this.rank} is not yet supported.`);let o=at(this.rank),s=LL("rc",this.rank),i=new Array(this.rank);for(let u=0;u<e.length;u++)i[e[u]]=s[u];let a=`vec2(${i.slice(-2).join()})`,l=`++${s[this.rank-1]} < ${r[this.rank-1]}`,c=`getChannel(getA(${i.join()}), ${a})`;this.userCode=`
    void main() {
      ${o} rc = getOutputCoords();
      vec4 result = vec4(0.);
      result[0] = ${c};
      if(${l}) {
        result[1] = ${c};
      }
      --${s[this.rank-1]};
      if(++${s[this.rank-2]} < ${r[this.rank-2]}) {
        result[2] = ${c};
        if(${l}) {
          result[3] = ${c};
        }
      }
      setOutput(result);
    }
    `}};function ed(n,t,e){let r=Y().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new XN(n.shape,t):new KN(n.shape,t);return e.runWebGLProgram(r,[n],n.dtype)}function yse(n,t,e,r){let o=t,s=n.shape.length,i=C.parseAxisParam(o,n.shape),a=i,l=M.getAxesPermutation(a,s),c=l!=null,u=n;c&&(u=ed(n,l,r),a=M.getInnerMostAxes(a.length,s)),M.assertAxesAreInnerMostDims("sum",a,s);let[p,f]=M.computeOutAndReduceShapes(u.shape,a),d=p;e&&(d=M.expandShapeToKeepDim(p,i));let h=C.sizeFromShape(f),g=C.sizeFromShape(n.shape)/h,x=ye({inputs:{x:u},attrs:{shape:[g,h]},backend:r}),b=yf(n.dtype),w=Fs(x,b,"sum",r),v=ye({inputs:{x:w},attrs:{shape:d},backend:r});return r.disposeIntermediateTensorInfo(x),r.disposeIntermediateTensorInfo(w),c&&r.disposeIntermediateTensorInfo(u),v}function sg(n){let{inputs:t,backend:e,attrs:r}=n,{x:o}=t,{axis:s,keepDims:i}=r;return yse(o,s,i,e)}var bse={kernelName:Au,backendName:"webgl",kernelFunc:sg};N();function Mn(n){let{inputs:t,backend:e,attrs:r}=n,{x:o}=t,{perm:s}=r,i=e,a=o.shape.length,l=new Array(a);for(let u=0;u<l.length;u++)l[u]=o.shape[s[u]];let c;if(i.shouldExecuteOnCPU([o])){let p=i.texData.get(o.dataId).values,f=og(p,o.shape,o.dtype,s,l);c=i.makeTensorInfo(l,o.dtype);let d=i.texData.get(c.dataId);d.values=f}else c=ed(o,s,i);return c}var vse={kernelName:ea,backendName:"webgl",kernelFunc:Mn};var WL=1e3;function ig({a:n,b:t,transposeA:e,transposeB:r,backend:o,bias:s=null,preluActivationWeights:i=null,leakyreluAlpha:a=0,activation:l=null}){let c=n.shape.length,u=t.shape.length,p=e?n.shape[c-2]:n.shape[c-1],f=r?t.shape[u-1]:t.shape[u-2],d=e?n.shape[c-1]:n.shape[c-2],h=r?t.shape[u-2]:t.shape[u-1],m=n.shape.slice(0,-2),g=t.shape.slice(0,-2),x=C.sizeFromShape(m),b=C.sizeFromShape(g),v=os.assertAndGetBroadcastShape(n.shape.slice(0,-2),t.shape.slice(0,-2)).concat([d,h]);C.assert(p===f,()=>`Error in matMul: inner shapes (${p}) and (${f}) of Tensors with shapes ${n.shape} and ${t.shape} and transposeA=${e} and transposeB=${r} must match.`);let S=e?[x,p,d]:[x,d,p],k=r?[b,h,f]:[b,f,h],A=ye({inputs:{x:n},backend:o,attrs:{shape:S}}),$=ye({inputs:{x:t},backend:o,attrs:{shape:k}}),L=[A,$],z=Math.max(x,b),W=e?A.shape[1]:A.shape[2],Q=s!=null,ne=i!=null,se=l==="leakyrelu",te=l!=null?bp(l,!0):null,ie=Q||ne||se||te!=null,le;if((d===1||h===1)&&W>WL&&ie===!1){let me=A,ve=$;e&&(me=Mn({inputs:{x:A},backend:o,attrs:{perm:[0,2,1]}}),L.push(me)),r&&(ve=Mn({inputs:{x:$},backend:o,attrs:{perm:[0,2,1]}}),L.push(ve));let we=h!==1,Se=h===1,Ce=me;we&&(Ce=ye({inputs:{x:me},backend:o,attrs:{shape:[z,W,1]}}),L.push(Ce));let De=h===1?2:1,Ne=ve;Se&&(Ne=ye({inputs:{x:ve},backend:o,attrs:{shape:[z,1,W]}}),L.push(Ne));let Re=cC({inputs:{a:Ce,b:Ne},backend:o});le=sg({inputs:{x:Re},backend:o,attrs:{axis:De,keepDims:!0}}),L.push(Re)}else{let me=ar(n.dtype,t.dtype),ve=new nb(S,k,[z,d,h],e,r,Q,te,ne,se),we=[A,$];if(s!=null&&we.push(s),ne&&we.push(i),se){let Se=o.makeTensorInfo([],"float32",C.createScalarValue(a,"float32"));we.push(Se),L.push(Se)}le=o.runWebGLProgram(ve,we,me)}let pe=ye({inputs:{x:le},backend:o,attrs:{shape:v}});L.push(le);for(let me of L)o.disposeIntermediateTensorInfo(me);return pe}function rBe(n){let{inputs:t,backend:e,attrs:r}=n,{a:o,b:s,bias:i,preluActivationWeights:a}=t,{transposeA:l,transposeB:c,activation:u,leakyreluAlpha:p}=r;return ig({a:o,b:s,transposeA:l,transposeB:c,backend:e,bias:i,preluActivationWeights:a,leakyreluAlpha:p,activation:u})}var wse={kernelName:df,backendName:"webgl",kernelFunc:rBe};N();var Cse="return abs(x);";function oBe(n){let{inputs:t,backend:e}=n,{x:r}=t;if(e.shouldExecuteOnCPU([r])&&r.dtype!=="complex64"){let s=e.texData.get(r.dataId),i=VN(s.values);return e.makeTensorInfo(r.shape,r.dtype,i)}let o;return Y().getBool("WEBGL_PACK_UNARY_OPERATIONS")?o=new cs(r.shape,Cse):o=new to(r.shape,Cse),e.runWebGLProgram(o,[r],r.dtype)}var Ise={kernelName:Wc,backendName:"webgl",kernelFunc:oBe};N();var sBe=Cr+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return acos(x);
`,iBe=Le({opSnippet:sBe}),Sse={kernelName:fl,backendName:"webgl",kernelFunc:iBe};N();var aBe=Cr+`
  if (x < 1.0) return NAN;
return log(x + sqrt(x * x - 1.0));`,lBe=Le({opSnippet:aBe}),Tse={kernelName:dl,backendName:"webgl",kernelFunc:lBe};N();var Ese="return a + b;",cBe=Ut({opSnippet:Ese,packedOpSnippet:Ese,supportsComplex:!0,cpuKernelImpl:roe}),Nse={kernelName:gi,backendName:"webgl",kernelFunc:cBe};N();var YN=class{constructor(t,e){this.outputShape=[],this.outputShape=t,this.variableNames=e.map((s,i)=>`T${i}`);let r=[];this.variableNames.forEach(s=>{r.push(`float v${s} = get${s}AtOutCoords();`)});let o=this.variableNames.map(s=>`v${s}`).join(" + ");this.userCode=`
      void main() {
        ${r.join(`
        `)}

        float result = ${o};
        setOutput(result);
      }
    `}};var ZN=class{constructor(t,e){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.variableNames=e.map((s,i)=>`T${i}`);let r=[];this.variableNames.forEach(s=>{r.push(`vec4 v${s} = get${s}AtOutCoords();`)});let o=this.variableNames.map(s=>`v${s}`).join(" + ");this.userCode=`
      void main() {
        ${r.join(`
        `)}

        vec4 result = ${o};
        setOutput(result);
      }
    `}};function QN(n){let{inputs:t,backend:e}=n,r=t;if(r.length===1)return sr({inputs:{x:r[0]},backend:e});if(r.length>Y().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){let l=Math.floor(r.length/2),c=QN({inputs:r.slice(0,l),backend:e}),u=QN({inputs:r.slice(l),backend:e});return QN({inputs:[c,u],backend:e})}let o=r.map(l=>l.dtype).reduce((l,c)=>ar(l,c)),s=r.map(l=>l.shape),a=Y().getBool("WEBGL_PACK")?new ZN(r[0].shape,s):new YN(r[0].shape,s);return e.runWebGLProgram(a,r,o)}var Dse={kernelName:Hc,backendName:"webgl",kernelFunc:QN};N();function uBe(n){let{inputs:t,backend:e,attrs:r}=n,{x:o}=t,{axis:s,keepDims:i}=r,a=o.shape.length,l=C.parseAxisParam(s,o.shape),c=l,u=M.getAxesPermutation(c,a),p=o;u!=null&&(p=Mn({inputs:{x:o},backend:e,attrs:{perm:u}}),c=M.getInnerMostAxes(c.length,a)),M.assertAxesAreInnerMostDims("all",c,a);let[f,d]=M.computeOutAndReduceShapes(p.shape,c),h=C.sizeFromShape(d),m=ye({inputs:{x:p},backend:e,attrs:{shape:[-1,h]}}),g=Fs(m,m.dtype,"all",e),x;if(i){let b=M.expandShapeToKeepDim(f,l);x=ye({inputs:{x:g},backend:e,attrs:{shape:b}})}else x=ye({inputs:{x:g},backend:e,attrs:{shape:f}});return e.disposeIntermediateTensorInfo(m),e.disposeIntermediateTensorInfo(g),u!=null&&e.disposeIntermediateTensorInfo(p),x}var kse={kernelName:Wd,backendName:"webgl",kernelFunc:uBe};N();function pBe(n){let{inputs:t,backend:e,attrs:r}=n,{x:o}=t,{axis:s,keepDims:i}=r,a=o.shape.length,l=C.parseAxisParam(s,o.shape),c=l,u=M.getAxesPermutation(c,a),p=o;u!=null&&(p=Mn({inputs:{x:o},backend:e,attrs:{perm:u}}),c=M.getInnerMostAxes(c.length,a)),M.assertAxesAreInnerMostDims("any",c,a);let[f,d]=M.computeOutAndReduceShapes(p.shape,c),h=C.sizeFromShape(d),m=ye({inputs:{x:p},backend:e,attrs:{shape:[-1,h]}}),g=Fs(m,m.dtype,"any",e),x;if(i){let b=M.expandShapeToKeepDim(f,l);x=ye({inputs:{x:g},backend:e,attrs:{shape:b}})}else x=ye({inputs:{x:g},backend:e,attrs:{shape:f}});return e.disposeIntermediateTensorInfo(m),e.disposeIntermediateTensorInfo(g),u!=null&&e.disposeIntermediateTensorInfo(p),x}var _se={kernelName:Hd,backendName:"webgl",kernelFunc:pBe};N();N();var JN=class{constructor(t,e,r){this.variableNames=["A"];let{windowSize:o,batchSize:s,outSize:i}=t;r||this.variableNames.push("bestIndicesA"),this.outputShape=[s,i];let a=e==="max"?">":"<",l=r?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${o};

        int bestIndex = inOffset;
        float bestValue = getA(batch, bestIndex);

        for (int i = 0; i < ${o}; i++) {
          int inIdx = ${l};
          float candidate = getA(batch, inIdx);
          if (candidate ${a} bestValue) {
            bestValue = candidate;
            bestIndex = inIdx;
          }
        }
        setOutput(float(bestIndex));
      }
    `}};N();var eD=class{constructor(t,e,r,o){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,C.assert(t.length>2,()=>`Packed arg${r.charAt(0).toUpperCase()+r.slice(1)} supports only inputs with rank above 2.`);let s=t[t.length-1],i=Math.ceil(s/e);this.outputShape=t.slice(0,-1),i>1&&this.outputShape.push(i),o||this.variableNames.push("bestIndicesA");let a=this.outputShape,l=a.length,c=at(l),u=or("coords",l),p,f;if(i===1){f=l+1;let $=at(f);p=`
        ${$} sourceLocR = ${$}(${u.join()}, 0);
        ++${u[l-1]};
        ${$} sourceLocG = ${$}(${u.join()}, 0);
        ++${u[l-2]};
        ${$} sourceLocA = ${$}(${u.join()}, 0);
        --${u[l-1]};
        ${$} sourceLocB = ${$}(${u.join()}, 0);
        --${u[l-2]};`}else f=l,p=`
        ${c} sourceLocR = coords;
        ++${u[l-1]};
        ${c} sourceLocG = coords;
        ++${u[l-2]};
        ${c} sourceLocA = coords;
        --${u[l-1]};
        ${c} sourceLocB = coords;
        --${u[l-2]};`;let d=["x","y","z","w","u","v"].slice(0,f),h="."+d[f-1],m=d.map($=>"int "+$),g=or("sourceLocR",f-1).concat("inIdx.r"),x=or("sourceLocG",f-1).concat("inIdx.g"),b=or("sourceLocB",f-1).concat("inIdx.b"),w=or("sourceLocA",f-1).concat("inIdx.a"),v=r==="max"?"greaterThan":"lessThan",S=o?"":`
          inIdx = round(vec4(getBestIndicesAChannel(${g.join()}),
                             getBestIndicesAChannel(${x.join()}),
                             getBestIndicesAChannel(${b.join()}),
                             getBestIndicesAChannel(${w.join()})));`,k=`vec4(
            getAChannel(${g.join()}),
            hasNextCol ? getAChannel(${x.join()}) : 0.,
            hasNextRow ? getAChannel(${b.join()}) : 0.,
            hasNextRow && hasNextCol ? getAChannel(${w.join()}) : 0.)`,A=o?"":`
      float getBestIndicesAChannel(${m.join()}) {
        return getChannel(getBestIndicesA(${d.join()}),
                                          vec2(${d.slice(-2).join()}));
      }`;this.userCode=`
      float getAChannel(${m.join()}) {
        return getChannel(getA(${d.join()}),
                               vec2(${d.slice(-2).join()}));
      }
      ${A}
      void main() {
        ${c} coords = getOutputCoords();
        bool hasNextCol = ${u[l-1]} < ${a[l-1]-1};
        bool hasNextRow = ${u[l-2]} < ${a[l-2]-1};
        ${p}
        ivec4 srcIdx = ivec4(sourceLocR${h}, sourceLocG${h},
          sourceLocB${h}, sourceLocA${h}) * ${e};
        ivec4 inIdx = srcIdx;
        vec4 bestIndex = vec4(inIdx);
        vec4 bestValue = ${k};

        for (int i = 0; i < ${e}; i++) {
          inIdx = srcIdx;
          ${S}
          vec4 candidate = ${k};
          bvec4 nan = isnan(candidate);
          bvec4 replace = bvec4(
            vec4(${v}(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));

          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,
                           replace.y  ? candidate.y : bestValue.y,
                           replace.z  ? candidate.z : bestValue.z,
                           replace.w  ? candidate.w : bestValue.w);
          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));
          srcIdx++;
        }
        setOutput(bestIndex);
      }
    `}};function Ase(n,t,e,r=null){let o=t.shape[0],s=t.shape[1];r!=null&&(o=r.shape[0],s=r.shape[1]);let i=M.computeOptimalWindowSize(s),a={windowSize:i,inSize:s,batchSize:o,outSize:Math.ceil(s/i)},l=new JN(a,e,r==null),c=[t];r!=null&&c.push(r);let u=n.runWebGLProgram(l,c,"int32");if(u.shape[1]===1)return u;let p=Ase(n,t,e,u);return n.disposeIntermediateTensorInfo(u),p}function Rse(n,t,e,r=null){let o=r!=null?r.shape:t.shape,s=o[o.length-1],i=M.computeOptimalWindowSize(s),a=new eD(o,i,e,r==null),l=r==null?[t]:[t,r],c=n.runWebGLProgram(a,l,"int32");if(c.shape.length===t.shape.length){let u=Rse(n,t,e,c);return n.disposeIntermediateTensorInfo(c),u}return c}function tD(n,t,e,r){let o=[e];if(M.assertAxesAreInnerMostDims("arg"+r.charAt(0).toUpperCase()+r.slice(1),o,t.shape.length),!Y().getBool("WEBGL_PACK_REDUCE")||t.shape.length<=2){let s=[],i=n.texData.get(t.dataId),a=i!==null&&i.isPacked,l=t;a&&(l=n.unpackTensor(t),s.push(l));let[c,u]=M.computeOutAndReduceShapes(l.shape,o),p=C.sizeFromShape(u),f=ye({inputs:{x:l},backend:n,attrs:{shape:[-1,p]}});s.push(f);let d=Ase(n,f,r);s.push(d);let h=ye({inputs:{x:d},backend:n,attrs:{shape:c}});return s.forEach(m=>n.disposeIntermediateTensorInfo(m)),h}return Rse(n,t,r)}function fBe(n){let{inputs:t,backend:e,attrs:r}=n,{x:o}=t,{axis:s}=r,i=C.parseAxisParam(s,o.shape),a=M.getAxesPermutation(i,o.shape.length),l=o,c=[];a!=null&&(l=Mn({inputs:{x:o},backend:e,attrs:{perm:a}}),c.push(l),i=M.getInnerMostAxes(i.length,l.shape.length)),M.assertAxesAreInnerMostDims("argMax",[i[0]],l.shape.length);let u=tD(e,l,i[0],"max");return c.forEach(p=>e.disposeIntermediateTensorInfo(p)),u}var Mse={kernelName:qc,backendName:"webgl",kernelFunc:fBe};N();function dBe(n){let{inputs:t,backend:e,attrs:r}=n,{x:o}=t,{axis:s}=r,i=C.parseAxisParam(s,o.shape),a=M.getAxesPermutation(i,o.shape.length),l=o,c=[];a!=null&&(l=Mn({inputs:{x:o},backend:e,attrs:{perm:a}}),c.push(l),i=M.getInnerMostAxes(i.length,l.shape.length)),M.assertAxesAreInnerMostDims("argMin",[i[0]],l.shape.length);let u=tD(e,l,i[0],"min");return c.forEach(p=>e.disposeIntermediateTensorInfo(p)),u}var Ose={kernelName:Kc,backendName:"webgl",kernelFunc:dBe};N();var hBe=Cr+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return asin(x);
`,mBe=Le({opSnippet:hBe}),Fse={kernelName:hl,backendName:"webgl",kernelFunc:mBe};N();var gBe=Cr+"return log(x + sqrt(x * x + 1.0));",xBe=Le({opSnippet:gBe}),Pse={kernelName:ml,backendName:"webgl",kernelFunc:xBe};N();var yBe=Cr+`
  return atan(x);
`,bBe=Le({opSnippet:yBe}),$se={kernelName:gl,backendName:"webgl",kernelFunc:bBe};N();var vBe=tb+`
  return atan(a, b);
`,wBe=`
  vec4 result = atan(a, b);
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+Os+`
  return result;
`,CBe=Ut({opSnippet:vBe,packedOpSnippet:wBe}),Lse={kernelName:yl,backendName:"webgl",kernelFunc:CBe};N();var IBe=Cr+`
  if ((x < -1.0) || (x > 1.0)) return NAN;
return (log(1.0 + x) - log(1.0 - x)) / 2.0;`,SBe=Le({opSnippet:IBe}),Bse={kernelName:xl,backendName:"webgl",kernelFunc:SBe};N();var _a=class{constructor(t,e,r,o=!1,s=!1){if(this.variableNames=["x"],e==="avg"&&r)throw new Error("Cannot compute positions for average pool.");let i=t.filterWidth,a=t.strideHeight,l=t.strideWidth,c=t.dilationHeight,u=t.dilationWidth,p=t.effectiveFilterHeight,f=t.effectiveFilterWidth,d=t.padInfo.top,h=t.padInfo.left;this.outputShape=t.outShape;let m=e==="avg",g=`((batch  * ${t.inHeight} + xR) * ${t.inWidth} + xC) * ${t.inChannels} + d`,x=`(xR * ${t.inWidth} + xC) * ${t.inChannels} + d`,b="0.0";if(m||(b="-1.0 / 1e-20"),r){let $=">=";this.userCode=`
        const ivec2 strides = ivec2(${a}, ${l});
        const ivec2 pads = ivec2(${d}, ${h});

        void main() {
          ivec4 coords = getOutputCoords();
          int batch = coords[0];
          int d = coords[3];

          ivec2 xRCCorner = coords.yz * strides - pads;
          int xRCorner = xRCCorner.x;
          int xCCorner = xRCCorner.y;

          // max/min x(?, ?, d) to get y(yR, yC, d).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;
          float avgValue = 0.0;

          for (int wR = 0; wR < ${p};
              wR += ${c}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${t.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${f};
                wC += ${u}) {
              int xC = xCCorner + wC;

              if (xC < 0 || xC >= ${t.inWidth}) {
                continue;
              }

              float value = getX(batch, xR, xC, d);

              // If a min / max value has already been found, use it. If not,
              // use the current value.
              float currMinMaxValue = mix(
                  value, minMaxValue, minMaxValueFound);
              if (value ${$} currMinMaxValue) {
                minMaxValue = value;
                minMaxValueFound = 1.0;
                minMaxPosition = ${o?s?g:x:`wR * ${f} + wC`};
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}let w="max",v=`${e}(${e}(${e}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;e==="avg"&&(v="avgValue / max(count, 1.0)");let S=Math.floor(i/4)*4,k=i%4,A=`
      if (${m}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${w}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec2 strides = ivec2(${a}, ${l});
      const ivec2 pads = ivec2(${d}, ${h});
      const float initializationValue = ${b};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xR, int xC, int d) {
        if (xC < 0 || xC >= ${t.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xR, xC, d);
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d = coords[3];

        ivec2 xRCCorner = coords.yz * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // max/min x(?, ?, d) to get y(yR, yC, d).
        // ? = to be determined
        vec4 minMaxValue = vec4(${b});
        float avgValue = 0.0;
        count = 0.0;

        for (int wR = 0; wR < ${p};
            wR += ${c}) {
          int xR = xRCorner + wR;

          if (xR < 0 || xR >= ${t.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${S}; wC += 4) {
            int xC = xCCorner + wC * ${u};

            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${u}, d),
              getValue(batch, xR, xC + 2 * ${u}, d),
              getValue(batch, xR, xC + 3 * ${u}, d)
            );

            ${A}
          }

          int xC = xCCorner + ${S};
          if (${k===1}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              initializationValue,
              initializationValue,
              initializationValue
            );

            ${A}
          } else if (${k===2}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${u}, d),
              initializationValue,
              initializationValue
            );

            ${A}
          } else if (${k===3}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${u}, d),
              getValue(batch, xR, xC + 2 * ${u}, d),
              initializationValue
            );

            ${A}
          }
        }
        setOutput(${v});
      }
    `}},td=class{constructor(t,e,r,o=!1,s=!1){if(this.variableNames=["x"],e==="avg"&&r)throw new Error("Cannot compute positions for average pool.");let i=t.filterWidth,a=t.strideDepth,l=t.strideHeight,c=t.strideWidth,u=t.dilationDepth,p=t.dilationHeight,f=t.dilationWidth,d=t.effectiveFilterDepth,h=t.effectiveFilterHeight,m=t.effectiveFilterWidth,g=t.padInfo.front,x=t.padInfo.top,b=t.padInfo.left;this.outputShape=t.outShape;let w=e==="avg",v="0.0";if(w||(v="-1.0 / 1e-20"),r){let z=">=";this.userCode=`
        const ivec3 strides =
            ivec3(${a}, ${l}, ${c});
        const ivec3 pads = ivec3(${g}, ${x}, ${b});

        void main() {
          ivec5 coords = getOutputCoords();
          int batch = coords.x;
          int ch = coords.u;

          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
          int xDCorner = xCorner.x;
          int xRCorner = xCorner.y;
          int xCCorner = xCorner.z;

          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;

          for (int wD = 0; wD < ${d};
              wD += ${u}) {
            int xD = xDCorner + wD;

            if (xD < 0 || xD >= ${t.inDepth}) {
              continue;
            }

            for (int wR = 0; wR < ${h};
                wR += ${p}) {
              int xR = xRCorner + wR;

              if (xR < 0 || xR >= ${t.inHeight}) {
                continue;
              }

              for (int wC = 0; wC < ${m};
                  wC += ${f}) {
                int xC = xCCorner + wC;

                if (xC < 0 || xC >= ${t.inWidth}) {
                  continue;
                }

                float value = getX(batch, xD, xR, xC, ch);

                // If a min / max value has already been found, use it. If not,
                // use the current value.
                float currMinMaxValue = mix(
                    value, minMaxValue, minMaxValueFound);
                if (value ${z} currMinMaxValue) {
                  minMaxValue = value;
                  minMaxValueFound = 1.0;
                  minMaxPosition = ${o?s?`(((batch * ${t.inDepth} + xD) * ${t.inHeight} + xR) * ${t.inWidth} + xC) * ${t.inChannels} + ch`:`((xD * ${t.inHeight} + xR) * ${t.inWidth} + xC) * ${t.inChannels} + ch`:`wD * ${h} * ${m} +
                      wR * ${m} + wC`};
                }
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}let S="max",k=`${e}(${e}(${e}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;e==="avg"&&(k="avgValue / max(count, 1.0)");let A=Math.floor(i/4)*4,$=i%4,L=`
      if (${w}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${S}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec3 strides =
        ivec3(${a}, ${l}, ${c});
      const ivec3 pads = ivec3(${g}, ${x}, ${b});
      const float initializationValue = ${v};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xD, int xR, int xC, int ch) {
        if (xC < 0 || xC >= ${t.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xD, xR, xC, ch);
      }

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xDCorner = xCorner.x;
        int xRCorner = xCorner.y;
        int xCCorner = xCorner.z;

        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).
        // ? = to be determined
        vec4 minMaxValue = vec4(${v});
        float avgValue = 0.0;
        count = 0.0;

        for (int wD = 0; wD < ${d};
            wD += ${u}) {
          int xD = xDCorner + wD;

          if (xD < 0 || xD >= ${t.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${h};
            wR += ${p}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${t.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${A}; wC += 4) {
              int xC = xCCorner + wC * ${f};

              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${f}, ch),
                getValue(batch, xD, xR, xC + 2 * ${f}, ch),
                getValue(batch, xD, xR, xC + 3 * ${f}, ch)
              );

              ${L}
            }

            int xC = xCCorner + ${A};
            if (${$===1}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                initializationValue,
                initializationValue,
                initializationValue
              );

              ${L}
            } else if (${$===2}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${f}, ch),
                initializationValue,
                initializationValue
              );

              ${L}
            } else if (${$===3}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${f}, ch),
                getValue(batch, xD, xR, xC + 2 * ${f}, ch),
                initializationValue
              );

              ${L}
            }
          }
        }
        setOutput(${k});
      }
    `}};function TBe(n){let{inputs:t,backend:e,attrs:r}=n,{x:o}=t;Ic(o,"avgPool");let{filterSize:s,strides:i,pad:a,dimRoundingMode:l}=r,c=1;C.assert(M.eitherStridesOrDilationsAreOne(i,c),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${i} and dilations '${c}'`);let u=M.computePool2DInfo(o.shape,s,i,c,a,l);if(u.filterWidth===1&&u.filterHeight===1&&C.arraysEqual(u.inShape,u.outShape))return sr({inputs:{x:o},backend:e});let p=new _a(u,"avg",!1);return e.runWebGLProgram(p,[o],"float32")}var zse={kernelName:Xc,backendName:"webgl",kernelFunc:TBe};N();function EBe(n){let{inputs:t,backend:e,attrs:r}=n,{x:o}=t,{filterSize:s,strides:i,pad:a,dimRoundingMode:l,dataFormat:c}=r,u=[1,1,1],p=M.computePool3DInfo(o.shape,s,i,u,a,l,c),f=new td(p,"avg",!1);return e.runWebGLProgram(f,[o],"float32")}var Vse={kernelName:Yc,backendName:"webgl",kernelFunc:EBe};N();var nD=class{constructor(t){this.variableNames=["dy"],this.outputShape=t.inShape;let e=t.filterHeight,r=t.filterWidth,o=t.strideHeight,s=t.strideWidth,i=t.dilationHeight,a=t.dilationWidth,l=t.effectiveFilterHeight,c=t.effectiveFilterWidth,u=l-1-t.padInfo.top,p=c-1-t.padInfo.left,f=1/(e*r);this.userCode=`
      const ivec2 pads = ivec2(${u}, ${p});
      const float avgMultiplier = float(${f});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${l};
            wR += ${i}) {
          float dyR = float(dyRCorner + wR) / ${o}.0;

          if (dyR < 0.0 || dyR >= ${t.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${c};
            wC+= ${a}) {
            float dyC = float(dyCCorner + wC) / ${s}.0;

            if (dyC < 0.0 || dyC >= ${t.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);

            dotProd += dyValue * avgMultiplier;
          }
        }
        setOutput(dotProd);
      }
    `}},rD=class{constructor(t){this.variableNames=["dy"],this.outputShape=t.inShape;let e=t.filterDepth,r=t.filterHeight,o=t.filterWidth,s=t.strideDepth,i=t.strideHeight,a=t.strideWidth,l=t.dilationDepth,c=t.dilationHeight,u=t.dilationWidth,p=t.effectiveFilterDepth,f=t.effectiveFilterHeight,d=t.effectiveFilterWidth,h=p-1-t.padInfo.front,m=f-1-t.padInfo.top,g=d-1-t.padInfo.left,x=1/(e*r*o);this.userCode=`
      const ivec3 pads = ivec3(${h}, ${m}, ${g});
      const float avgMultiplier = float(${x});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${p};
            wD += ${l}) {
          float dyD = float(dyDCorner + wD) / ${s}.0;

          if (dyD < 0.0 || dyD >= ${t.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${f};
              wR += ${c}) {
            float dyR = float(dyRCorner + wR) / ${i}.0;

            if (dyR < 0.0 || dyR >= ${t.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${d};
                wC += ${u}) {
              float dyC = float(dyCCorner + wC) / ${a}.0;

              if (dyC < 0.0 || dyC >= ${t.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);

              dotProd += dyValue * avgMultiplier;
            }
          }
        }
        setOutput(dotProd);
      }
    `}};function NBe(n){let{inputs:t,backend:e,attrs:r}=n,{dy:o,input:s}=t,i=s,{filterSize:a,strides:l,pad:c,dimRoundingMode:u}=r,p=[1,1,1],f=M.computePool3DInfo(i.shape,a,l,p,c,u),d=new rD(f);return e.runWebGLProgram(d,[o],i.dtype)}var Use={kernelName:Kd,backendName:"webgl",kernelFunc:NBe};N();function DBe(n){let{inputs:t,backend:e,attrs:r}=n,{dy:o,input:s}=t,i=s;Ic([o,s],"avgPoolGrad");let{filterSize:a,strides:l,pad:c}=r,u=M.computePool2DInfo(i.shape,a,l,1,c),p=new nD(u);return e.runWebGLProgram(p,[o],i.dtype)}var jse={kernelName:qd,backendName:"webgl",kernelFunc:DBe};N();function kBe(n){let{inputs:t,backend:e,attrs:r}=n,{a:o,b:s}=t,{transposeA:i,transposeB:a}=r;return ig({a:o,b:s,transposeA:i,transposeB:a,backend:e})}var Gse={kernelName:Zc,backendName:"webgl",kernelFunc:kBe};N();N();var oD=class{constructor(t,e,r,o,s,i){this.outputShape=[],this.variableNames=["x","mean","variance"],M.assertAndGetBroadcastShape(t,e),M.assertAndGetBroadcastShape(t,r);let a="0.0";o!=null&&(M.assertAndGetBroadcastShape(t,o),this.variableNames.push("offset"),a="getOffsetAtOutCoords()");let l="1.0";s!=null&&(M.assertAndGetBroadcastShape(t,s),this.variableNames.push("scale"),l="getScaleAtOutCoords()"),this.outputShape=t,this.userCode=`
      void main() {
        float x = getXAtOutCoords();
        float mean = getMeanAtOutCoords();
        float variance = getVarianceAtOutCoords();
        float offset = ${a};
        float scale = ${l};
        float inv = scale * inversesqrt(variance + float(${i}));
        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));
      }
    `}};N();var sD=class{constructor(t,e,r,o,s,i){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],M.assertAndGetBroadcastShape(t,e),M.assertAndGetBroadcastShape(t,r);let a="vec4(0.0)";o!=null&&(M.assertAndGetBroadcastShape(t,o),this.variableNames.push("offset"),a="getOffsetAtOutCoords()");let l="vec4(1.0)";s!=null&&(M.assertAndGetBroadcastShape(t,s),this.variableNames.push("scale"),l="getScaleAtOutCoords()"),this.outputShape=t,this.userCode=`
      void main() {
        vec4 offset = ${a};
        vec4 scale = ${l};

        vec4 x = getXAtOutCoords();
        vec4 mean = getMeanAtOutCoords();
        vec4 variance = getVarianceAtOutCoords();

        vec4 inv = scale * inversesqrt(variance + vec4(${i}));

        setOutput((x - mean) * inv + offset);
      }
    `}};var _Be=({inputs:n,backend:t,attrs:e})=>{let{x:r,mean:o,variance:s,offset:i,scale:a}=n;C.assert(o.shape.length===s.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),C.assert(i==null||o.shape.length===i.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),C.assert(a==null||o.shape.length===a.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");let{varianceEpsilon:l}=e;l==null&&(l=.001);let c=[r,o,s],u=null;i!=null&&(u=i.shape,c.push(i));let p=null;a!=null&&(p=a.shape,c.push(a));let f=Y().getBool("WEBGL_PACK_NORMALIZATION")?new sD(r.shape,o.shape,s.shape,u,p,l):new oD(r.shape,o.shape,s.shape,u,p,l);return t.runWebGLProgram(f,c,c[0].dtype)},Wse={kernelName:lu,backendName:"webgl",kernelFunc:_Be};N();N();var iD=class{constructor(t){this.variableNames=["source"],this.outputShape=t,this.rank=t.length;let e=at(this.rank);this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];let r=ABe(this.rank),o,s=t.map((i,a)=>`sourceLoc.${HL[a]} = start[${a}] + coords.${HL[a]};`);o=`
        ${e} sourceLoc;
        ${e} coords = getOutputCoords();
        ${s.join(`
`)}
      `,this.userCode=`
      void main() {
        ${o}
        setOutput(getSource(${r}));
      }
    `}},HL=["x","y","z","w","u","v"];function ABe(n){if(n===1)return"sourceLoc";if(n<=6)return HL.slice(0,n).map(t=>"sourceLoc."+t).join(",");throw Error(`Slicing for rank ${n} is not yet supported`)}var aD=class{constructor(t){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.rank=t.length,this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];let e=at(this.rank),r=or("coords",this.rank),o=or("sourceLoc",this.rank),s=this.rank===1?"sourceLoc":`vec2(${o.slice(-2).join()})`,i=`getChannel(getSource(${o.join()}), ${s})`,a=`
      result.x = ${i};
      if (++${r[this.rank-1]} < ${t[this.rank-1]}) {
        ++${o[this.rank-1]};
        result.y = ${i};
        --${o[this.rank-1]};
      }
    `,l=this.rank===1?"":`
      --${r[this.rank-1]};
      if (++${r[this.rank-2]} < ${t[this.rank-2]}) {
        ++${o[this.rank-2]};
        result.z = ${i};
        if (++${r[this.rank-1]} < ${t[this.rank-1]}) {
          ++${o[this.rank-1]};
          result.w = ${i};
        }
      }
    `,c=this.rank<=4?`sourceLoc = coords +
            ${e}(${t.map((u,p)=>`start[${p}]`).join()});`:t.map((u,p)=>`${o[p]} = ${r[p]} + start[${p}];`).join(`
`);this.userCode=`
      void main() {
        ${e} coords = getOutputCoords();
        ${e} sourceLoc;
        ${c}
        vec4 result = vec4(0.);
        ${a}
        ${l}
        setOutput(result);
      }
    `}};function RBe(n,t,e,r){let o=r.texData.get(n.dataId),s=r.makeTensorInfo(e,n.dtype),i=r.texData.get(s.dataId);Object.assign(i,o),i.refCount=1,i.shape=e,i.dtype=n.dtype;let a=_r.computeFlatOffset(t,C.computeStrides(n.shape));o.slice&&(a+=o.slice.flatOffset),i.slice={flatOffset:a,origDataId:o.slice&&o.slice.origDataId||n.dataId};let l=r.dataRefCount.get(i.slice.origDataId)||1;return r.dataRefCount.set(i.slice.origDataId,l+1),s}function Aa(n){let{inputs:t,backend:e,attrs:r}=n,{x:o}=t,{begin:s,size:i}=r,[a,l]=_r.parseSliceParams(o,s,i);if(_r.assertParamsValid(o,a,l),C.sizeFromShape(l)===0)return e.makeTensorInfo(l,o.dtype,[]);if(e.shouldExecuteOnCPU([o])||o.dtype==="string"){let p=e.texData.get(o.dataId),f=Foe(p.values,a,l,o.shape,o.dtype);return e.makeTensorInfo(l,o.dtype,f)}let{isPacked:c}=e.texData.get(o.dataId),u=_r.isSliceContinous(o.shape,a,l);if(c||!u){let p=Y().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new aD(l):new iD(l),f=[a];return e.runWebGLProgram(p,[o],o.dtype,f)}return e.uploadToGPU(o.dataId),RBe(o,a,l,e)}var Hse={kernelName:_u,backendName:"webgl",kernelFunc:Aa};var MBe=n=>{let{inputs:t,backend:e,attrs:r}=n,{x:o}=t,{blockShape:s,crops:i}=r;C.assert(o.shape.length<=4,()=>"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet");let a=s.reduce((b,w)=>b*w),l=M.getReshaped(o.shape,s,a),c=M.getPermuted(l.length,s.length),u=M.getReshapedPermuted(o.shape,s,a),p=M.getSliceBeginCoords(i,s.length),f=M.getSliceSize(u,i,s.length),d=[],h=ye({inputs:{x:o},backend:e,attrs:{shape:l}}),m=Mn({inputs:{x:h},backend:e,attrs:{perm:c}}),g=ye({inputs:{x:m},backend:e,attrs:{shape:u}}),x=Aa({inputs:{x:g},backend:e,attrs:{begin:p,size:f}});return d.push(h),d.push(m),d.push(g),d.forEach(b=>e.disposeIntermediateTensorInfo(b)),x},qse={kernelName:Qc,backendName:"webgl",kernelFunc:MBe};N();function OBe(n){let{inputs:t,backend:e,attrs:r}=n,{x:o,weights:s}=t,{size:i}=r,a=e.readSync(o.dataId),l=e.readSync(s.dataId),c=zN(a,l,s.dtype,s.shape,i);return e.makeTensorInfo([i],s.dtype,c)}var Kse={kernelName:Xd,backendName:"webgl",kernelFunc:OBe};N();var FBe=`
  int r = int(a.r) & int(b.r);
  int g = int(a.g) & int(b.g);
  int rb = int(a.b) & int(b.b);
  int ra = int(a.a) & int(b.a);
  return vec4(r, g, rb, ra);
`,PBe=`
  return float(int(a.r) & int(b.r));
`;function $Be(n){let{inputs:t,backend:e}=n,{a:r,b:o}=t,s=Y().getBool("WEBGL_PACK_BINARY_OPERATIONS"),i=Y().getNumber("WEBGL_VERSION");if(e.shouldExecuteOnCPU([r,o])||i===1){let l=e.texData.get(r.dataId).values,c=e.texData.get(o.dataId).values,[u,p]=soe(r.shape,o.shape,l,c,r.dtype),f=e.makeTensorInfo(p,r.dtype),d=e.texData.get(f.dataId);return d.values=u,f}let a;return s?a=new Ms(FBe,r.shape,o.shape,!1):a=new us(PBe,r.shape,o.shape),e.runWebGLProgram(a,[r,o],r.dtype)}var Xse={kernelName:nf,backendName:"webgl",kernelFunc:$Be};N();function LBe(n){let{inputs:t,backend:e}=n,{s0:r,s1:o}=t,s=e.readSync(r.dataId),i=e.readSync(o.dataId),a=M.assertAndGetBroadcastShape(Array.from(s),Array.from(i));return e.makeTensorInfo([a.length],"int32",Int32Array.from(a))}var Yse={kernelName:Yd,backendName:"webgl",kernelFunc:LBe};N();N();N();var BBe="return float(a != b);",qL=Ut({opSnippet:BBe,cpuKernelImpl:Eoe,dtype:"bool"}),Zse={kernelName:pf,backendName:"webgl",kernelFunc:qL};N();function vp(n){let{inputs:t,backend:e}=n,{input:r}=t,o=e.texData.get(r.dataId);return sr({inputs:{x:o.complexTensorInfos.real},backend:e})}var Qse={kernelName:kh,backendName:"webgl",kernelFunc:vp};var zBe="return float(int(x));";function Jse(n,t){let e=new to(n.shape,zBe),r=t.runWebGLProgram(e,[n],"int32");return{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}function KL(n){let{inputs:t,backend:e,attrs:r}=n,{x:o}=t,{dtype:s}=r;if(s==="complex64"){if(o.dtype==="complex64")return sr({inputs:{x:o},backend:e});let i=Kt(o.shape),a=KL({inputs:{x:o},backend:e,attrs:{dtype:"float32"}}),l=ps({inputs:{real:a,imag:i},backend:e});return i.dispose(),e.disposeIntermediateTensorInfo(a),l}if(o.dtype==="complex64"){let i=vp({inputs:{input:o},backend:e}),a=KL({inputs:{x:i},backend:e,attrs:{dtype:s}});return e.disposeIntermediateTensorInfo(i),a}if(!C.hasEncodingLoss(o.dtype,s)){let i=sr({inputs:{x:o},backend:e});return{dataId:i.dataId,shape:i.shape,dtype:s}}if(e.shouldExecuteOnCPU([o])){let i=e.texData.get(o.dataId).values,[a,l,c]=ioe(i,o.shape,o.dtype,s);return e.makeTensorInfo(a,l,c)}if(s==="int32")return Jse(o,e);if(s==="bool"){let i=e.makeTensorInfo([],"bool",C.getTypedArrayFromDType("bool",1)),l=qL({inputs:{a:o,b:i},backend:e});return e.disposeIntermediateTensorInfo(i),l}throw new Error(`Error in Cast: failed to cast ${o.dtype} to ${s}`)}var eie={kernelName:Zi,backendName:"webgl",kernelFunc:KL};N();var tie="return ceil(x);",VBe=Le({opSnippet:tie,packedOpSnippet:tie,cpuKernelImpl:aoe}),nie={kernelName:bl,backendName:"webgl",kernelFunc:VBe};N();var lD=class{constructor(t){this.variableNames=["A"],this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=t,this.userCode=`

      void main() {
        float value = getAAtOutCoords();
        if (isnan(value)) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, minVal, maxVal));
      }
    `}};var cD=class{constructor(t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=t,this.userCode=`
      void main() {
        vec4 value = getAAtOutCoords();

        if (any(isnan(value))) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));
      }
    `}};function UBe(n){let{inputs:t,backend:e,attrs:r}=n,{x:o}=t,{clipValueMin:s,clipValueMax:i}=r,a;Y().getBool("WEBGL_PACK_CLIP")?a=new cD(o.shape):a=new lD(o.shape);let l=[[s],[i]];return e.runWebGLProgram(a,[o],o.dtype,l)}var rie={kernelName:vl,backendName:"webgl",kernelFunc:UBe};N();var uD=class{constructor(t){this.variableNames=["real","imag"],this.outputShape=t,this.userCode=`
      void main() {
        float re = abs(getRealAtOutCoords());
        float im = abs(getImagAtOutCoords());
        float mx = max(re, im);

        // sadly the length function in glsl is not underflow-safe
        // (at least not on Intel GPUs). So the safe solution is
        // to ensure underflow-safety in all cases.
        setOutput(
          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))
        );
      }
    `}};function oie(n,t){return{dataId:t.dataId,dtype:t.dtype,shape:n.shape}}function jBe(n){let{inputs:t,backend:e}=n,{x:r}=t,o=e.texData.get(r.dataId),s=new uD(r.shape),i=[oie(r,o.complexTensorInfos.real),oie(r,o.complexTensorInfos.imag)];return e.runWebGLProgram(s,i,i[0].dtype)}var sie={kernelName:Jc,backendName:"webgl",kernelFunc:jBe};N();N();N();var pD=class{constructor(t){this.outputShape=[],this.outputShape=M.computeOutShape(t,1),this.variableNames=t.map((i,a)=>`T${a}`);let e=new Array(t.length-1);e[0]=t[0][1];for(let i=1;i<e.length;i++)e[i]=e[i-1]+t[i][1];let r=[`if (yC < ${e[0]}) setOutput(getT0(yR, yC));`];for(let i=1;i<e.length;i++){let a=e[i-1];r.push(`else if (yC < ${e[i]}) setOutput(getT${i}(yR, yC-${a}));`)}let o=e.length,s=e[e.length-1];r.push(`else setOutput(getT${o}(yR, yC-${s}));`),this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int yR = coords.x;
        int yC = coords.y;

        ${r.join(`
        `)}
      }
    `}};N();var dD=class{constructor(t,e){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=M.computeOutShape(t,e);let r=this.outputShape,o=r.length,s=at(o),i=or("coords",o),a=["x","y","z","w","u","v"].slice(0,o);this.variableNames=t.map((m,g)=>`T${g}`);let l=new Array(t.length-1);l[0]=t[0][e];for(let m=1;m<l.length;m++)l[m]=l[m-1]+t[m][e];let c=a[e],u=a.slice(-2),p=a.join(),f=`if (${c} < ${l[0]}) {
        return getChannel(
            getT0(${p}), vec2(${u.join()}));
        }`;for(let m=1;m<l.length;m++){let g=l[m-1];f+=`
        if (${c} < ${l[m]}  && ${c} >= ${l[m-1]}) {
          return getChannel(
            getT${m}(${fD(a,c,g)}),
            vec2(${fD(u,c,g)}));
        }`}let d=l.length,h=l[l.length-1];f+=`
        return getChannel(
          getT${d}(${fD(a,c,h)}),
          vec2(${fD(u,c,h)}));`,this.userCode=`
      float getValue(${a.map(m=>"int "+m)}) {
        ${f}
      }

      void main() {
        ${s} coords = getOutputCoords();
        vec4 result = vec4(getValue(${i}), 0., 0., 0.);

        ${i[o-1]} = ${i[o-1]} + 1;
        if (${i[o-1]} < ${r[o-1]}) {
          result.g = getValue(${i});
        }

        ${i[o-2]} = ${i[o-2]} + 1;
        if (${i[o-2]} < ${r[o-2]}) {
          result.a = getValue(${i});
        }

        ${i[o-1]} = ${i[o-1]} - 1;
        if (${i[o-2]} < ${r[o-2]} &&
            ${i[o-1]} < ${r[o-1]}) {
          result.b = getValue(${i});
        }
        setOutput(result);
      }
    `}};function fD(n,t,e){let r=n.indexOf(t);return n.map((s,i)=>i===r?`${s} - ${e}`:s).join()}N();function ag(n){let{inputs:t,backend:e}=n,{input:r}=t,o=e.texData.get(r.dataId);return sr({inputs:{x:o.complexTensorInfos.imag},backend:e})}var iie={kernelName:mh,backendName:"webgl",kernelFunc:ag};function rb(n,t,e){let r=n[0].dtype;if(r==="complex64"){let d=n.map(b=>vp({inputs:{input:b},backend:e})),h=n.map(b=>ag({inputs:{input:b},backend:e})),m=rb(d,t,e),g=rb(h,t,e),x=ps({inputs:{real:m,imag:g},backend:e});return d.forEach(b=>e.disposeIntermediateTensorInfo(b)),h.forEach(b=>e.disposeIntermediateTensorInfo(b)),e.disposeIntermediateTensorInfo(m),e.disposeIntermediateTensorInfo(g),x}let o=e.shouldExecuteOnCPU(n);if(r==="string"&&(o=!0),o){let d=n.map(v=>{let k=[-1,C.sizeFromShape(v.shape.slice(t))];return ye({inputs:{x:v},backend:e,attrs:{shape:k}})}),h=d.map(v=>({vals:e.readSync(v.dataId),shape:v.shape})),m=M.computeOutShape(d.map(v=>v.shape),1),g=d[0].shape[0]===1,x=loe(h,m,r,g),b=M.computeOutShape(n.map(v=>v.shape),t),w=e.makeTensorInfo(b,r,x);return d.forEach(v=>e.disposeIntermediateTensorInfo(v)),w}let s=n.filter(d=>C.sizeFromShape(d.shape)>0),i=Y().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&s[0].shape.length>1;if(s.length===1){let d=i?new to(n[0].shape,Sc):new cs(n[0].shape,Sc);return e.runWebGLProgram(d,n,r)}let a=Y().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER");if(s.length>a){let d=[];for(let m=0;m<s.length;m+=a){let g=s.slice(m,m+a);d.push(rb(g,t,e))}let h=rb(d,t,e);for(let m of d)e.disposeIntermediateTensorInfo(m);return h}if(i){let d=new dD(s.map(h=>h.shape),t);return e.runWebGLProgram(d,s,r)}let{tensors2D:l,outShape:c}=GBe(s,t,e),u=new pD(l.map(d=>d.shape)),p=e.runWebGLProgram(u,l,r);l.forEach(d=>e.disposeIntermediateTensorInfo(d));let f=ye({inputs:{x:p},attrs:{shape:c},backend:e});return e.disposeIntermediateTensorInfo(p),f}function GBe(n,t,e){let r=M.computeOutShape(n.map(s=>s.shape),t);return{tensors2D:n.map(s=>ye({inputs:{x:s},attrs:{shape:[-1,C.sizeFromShape(s.shape.slice(t))]},backend:e})),outShape:r}}function XL(n){let{inputs:t,backend:e,attrs:r}=n,{axis:o}=r,s=C.parseAxisParam(o,t[0].shape)[0],i=t.map(c=>c.shape);M.assertParamsConsistent(i,s);let a=M.computeOutShape(t.map(c=>c.shape),s);if(C.sizeFromShape(a)===0)return e.makeTensorInfo(a,t[0].dtype,[]);let l=t.filter(c=>C.sizeFromShape(c.shape)>0);return l.length===1?sr({inputs:{x:l[0]},backend:e}):rb(l,s,e)}var aie={kernelName:eu,backendName:"webgl",kernelFunc:XL};N();var ob=class{constructor(t,e=!1,r=null,o=!1,s=!1){this.variableNames=["x","W"],this.outputShape=t.outShape;let i=t.padInfo.top,a=t.padInfo.left,l=t.strideHeight,c=t.strideWidth,u=t.dilationHeight,p=t.dilationWidth,f=t.filterHeight,d=t.filterWidth,h=Math.floor(t.inChannels/4)*4,m=t.inChannels%4,g=t.dataFormat==="channelsLast",x=g?1:2,b=g?2:3,w=g?3:1,v="",S="";r&&(o?v=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:s?v=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:v=`
          float activation(float x) {
            ${r}
          }
        `,S="result = activation(result);");let k=e?"result += getBiasAtOutCoords();":"";e&&this.variableNames.push("bias"),o&&this.variableNames.push("preluActivationWeights"),s&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${v}

      const ivec2 strides = ivec2(${l}, ${c});
      const ivec2 pads = ivec2(${i}, ${a});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d2 = coords[${w}];

        ivec2 xRCCorner =
            ivec2(coords[${x}], coords[${b}]) * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${f}; wR++) {
          int xR = xRCorner + wR * ${u};

          if (xR < 0 || xR >= ${t.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${d}; wC++) {
            int xC = xCCorner + wC * ${p};

            if (xC < 0 || xC >= ${t.inWidth}) {
              continue;
            }

            for (int d1 = 0; d1 < ${h}; d1 += 4) {
              vec4 wValues = vec4(
                getW(wR, wC, d1, d2),
                getW(wR, wC, d1 + 1, d2),
                getW(wR, wC, d1 + 2, d2),
                getW(wR, wC, d1 + 3, d2)
              );

              if (${g}) {
                vec4 xValues = vec4(
                  getX(batch, xR, xC, d1),
                  getX(batch, xR, xC, d1 + 1),
                  getX(batch, xR, xC, d1 + 2),
                  getX(batch, xR, xC, d1 + 3)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec4 xValues = vec4(
                  getX(batch, d1, xR, xC),
                  getX(batch, d1 + 1, xR, xC),
                  getX(batch, d1 + 2, xR, xC),
                  getX(batch, d1 + 3, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }
            }

            if (${m===1}) {

              if (${g}) {
                dotProd +=
                    getX(batch, xR, xC, ${h}) *
                    getW(wR, wC, ${h}, d2);
              } else {
                dotProd +=
                    getX(batch, ${h}, xR, xC) *
                    getW(wR, wC, ${h}, d2);
              }

            } else if (${m===2}) {
              vec2 wValues = vec2(
                getW(wR, wC, ${h}, d2),
                getW(wR, wC, ${h} + 1, d2)
              );

              if (${g}) {
                vec2 xValues = vec2(
                  getX(batch, xR, xC, ${h}),
                  getX(batch, xR, xC, ${h} + 1)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec2 xValues = vec2(
                  getX(batch, ${h}, xR, xC),
                  getX(batch, ${h} + 1, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            } else if (${m===3}) {
              vec3 wValues = vec3(
                getW(wR, wC, ${h}, d2),
                getW(wR, wC, ${h} + 1, d2),
                getW(wR, wC, ${h} + 2, d2)
              );

              if (${g}) {
                vec3 xValues = vec3(
                  getX(batch, xR, xC, ${h}),
                  getX(batch, xR, xC, ${h} + 1),
                  getX(batch, xR, xC, ${h} + 2)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec3 xValues = vec3(
                  getX(batch, ${h}, xR, xC),
                  getX(batch, ${h} + 1, xR, xC),
                  getX(batch, ${h} + 2, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            }
          }
        }

        float result = dotProd;
        ${k}
        ${S}
        setOutput(result);
      }
    `}},hD=class{constructor(t){this.variableNames=["x","W"],this.outputShape=t.outShape;let e=t.padInfo.front,r=t.padInfo.top,o=t.padInfo.left,s=t.strideDepth,i=t.strideHeight,a=t.strideWidth,l=t.dilationDepth,c=t.dilationHeight,u=t.dilationWidth,p=t.filterDepth,f=t.filterHeight,d=t.filterWidth,h=Math.floor(t.inChannels/4)*4,m=t.inChannels%4;this.userCode=`
      const ivec3 strides = ivec3(${s}, ${i}, ${a});
      const ivec3 pads = ivec3(${e}, ${r}, ${o});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d2 = coords.u;

        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xFCorner = xFRCCorner.x;
        int xRCorner = xFRCCorner.y;
        int xCCorner = xFRCCorner.z;

        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get
        // y(yF, yR, yC, d2). ? = to be determined. : = across all
        // values in that axis.
        float dotProd = 0.0;
        for (int wF = 0; wF < ${p}; wF++) {
          int xF = xFCorner + wF * ${l};

          if (xF < 0 || xF >= ${t.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${f}; wR++) {
            int xR = xRCorner + wR * ${c};

            if (xR < 0 || xR >= ${t.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${d}; wC++) {
              int xC = xCCorner + wC * ${u};

              if (xC < 0 || xC >= ${t.inWidth}) {
                continue;
              }

              for (int d1 = 0; d1 < ${h}; d1 += 4) {
                vec4 xValues = vec4(
                  getX(batch, xF, xR, xC, d1),
                  getX(batch, xF, xR, xC, d1 + 1),
                  getX(batch, xF, xR, xC, d1 + 2),
                  getX(batch, xF, xR, xC, d1 + 3)
                );
                vec4 wValues = vec4(
                  getW(wF, wR, wC, d1, d2),
                  getW(wF, wR, wC, d1 + 1, d2),
                  getW(wF, wR, wC, d1 + 2, d2),
                  getW(wF, wR, wC, d1 + 3, d2)
                );

                dotProd += dot(xValues, wValues);
              }

              if (${m===1}) {
                dotProd +=
                  getX(batch, xF, xR, xC, ${h}) *
                  getW(wF, wR, wC, ${h}, d2);
              } else if (${m===2}) {
                vec2 xValues = vec2(
                  getX(batch, xF, xR, xC, ${h}),
                  getX(batch, xF, xR, xC, ${h} + 1)
                );
                vec2 wValues = vec2(
                  getW(wF, wR, wC, ${h}, d2),
                  getW(wF, wR, wC, ${h} + 1, d2)
                );
                dotProd += dot(xValues, wValues);
              } else if (${m===3}) {
                vec3 xValues = vec3(
                  getX(batch, xF, xR, xC, ${h}),
                  getX(batch, xF, xR, xC, ${h} + 1),
                  getX(batch, xF, xR, xC, ${h} + 2)
                );
                vec3 wValues = vec3(
                  getW(wF, wR, wC, ${h}, d2),
                  getW(wF, wR, wC, ${h} + 1, d2),
                  getW(wF, wR, wC, ${h} + 2, d2)
                );
                dotProd += dot(xValues, wValues);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}};N();var sb=class{constructor(t,e=!1,r=null,o=!1,s=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=t.outShape,this.enableShapeUniforms=Yt(this.outputShape.length);let i=t.padInfo.left,a=t.strideWidth,l=t.dilationWidth,c=t.filterHeight,u=t.filterWidth,p=u,f=`
       int xR; int xC; int xCOffset;
       vec4 wTexel; vec4 previous; vec4 final;`;for(let g=0;g<u;g++)f+=`
           vec4 xTexelC${g*2};
           int xTexelC${g*2}Ready;
           vec4 xTexelC${g*2+1};
           int xTexelC${g*2+1}Ready;
           vec4 xC${g};`;f+=`
     for (int r = 0; r < ${c}; r++) {
      for (int d1 = 0; d1 < ${t.inChannels}; d1 += 2) {
       `;for(let g=0;g<u;g++)f+=`
           xTexelC${g*2} = vec4(0.0);
           xTexelC${g*2}Ready = 0;
           xTexelC${g*2+1} = vec4(0.0);
           xTexelC${g*2+1}Ready = 0;
           xC${g} = vec4(0.0);`;f+=`
         xR = xRCorner + r * dilations[0];
         if (xR >=0 && xR < inDims[0]) {
       `;for(let g=0;g<(p+1)/2;g++){let x=g*2;if(f+=`
           xC = xCCorner + ${x*l};
           `,a===1){if(x<u&&(i%2===1?(f+=`
                 xCOffset = xC + 1;
                 if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${x}Ready == 0) {
                   xTexelC${x} = getX(batch, xR, xCOffset, d1);

                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${x}.zw = vec2(0.0);
                   }
                   xTexelC${x}Ready = 1;
                 }
               `,l===1&&x>0?f+=`
                 xC${x} = vec4(xTexelC${x-2}.zw, xTexelC${x}.xy);
                 `:f+=`
                   xCOffset = xC + 1 - 2;

                   if (xCOffset >= 0 && xCOffset < inDims[1]) {
                     previous = getX(batch, xR, xCOffset, d1);

                     // Need to manually clear unused channels in case
                     // we're reading from recycled texture.
                     if (xCOffset + 1 >= inDims[1]) {
                       previous.zw = vec2(0.0);
                     }

                     xC${x} = vec4(previous.zw, xTexelC${x}.xy);
                   } else {
                     xC${x} = vec4(0.0, 0.0, xTexelC${x}.xy);
                   }
                   `):f+=`
                 if (xC >= 0 && xC < inDims[1] && xTexelC${x}Ready == 0) {
                   xTexelC${x} = getX(batch, xR, xC, d1);
                   if (xC + 1 >= inDims[1]) {
                     xTexelC${x}.zw = vec2(0.0);
                   }
                   xTexelC${x}Ready = 1;
                 }

                 xC${x} = xTexelC${x};
                 `,x+1<u)){let b=i%2===0?C.nearestLargerEven(l):l;l%2===0&&i%2===1||l%2!==0&&i%2!==1?(f+=`
                   xCOffset = xC + imod(pads[1], 2) + ${b};

                   if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${x+1}Ready == 0) {
                     xTexelC${x+1} = getX(batch, xR, xCOffset, d1);

                     // Need to manually clear unused channels in case
                     // we're reading from recycled texture.
                     if (xCOffset + 1 >= inDims[1]) {
                       xTexelC${x+1}.zw = vec2(0.0);
                     }
                     xTexelC${x+1}Ready = 1;
                   }
                   `,l>1?f+=`
                     xCOffset -= 2;
                     if (xCOffset >= 0 && xCOffset < inDims[1]) {
                      previous = getX(batch, xR, xCOffset, d1);
                      xC${x+1} = vec4(previous.zw, xTexelC${x+1}.xy);
                     } else {
                      xC${x+1} = vec4(0.0, 0.0, xTexelC${x+1}.xy);
                     }
                     `:f+=`
                     xC${x+1} = vec4(xTexelC${x}.zw, xTexelC${x+1}.xy);
                     `):b===1?f+=`
                     xC${x+1} = xTexelC${x};
                     `:f+=`
                     xCOffset = xC + ${b};

                     if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${x+1}Ready == 0) {
                       xTexelC${x+1} = getX(batch, xR, xCOffset, d1);
                       if (xCOffset + 1 >= inDims[1]) {
                         xTexelC${x+1}.zw = vec2(0.0);
                       }
                       xTexelC${x+1}Ready = 1;
                     }

                     xC${x+1} = xTexelC${x+1};
                     `}}else x<u&&(i%2===1?(f+=`
                 xCOffset = xC + 1 - strides[1];
                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${x}Ready == 0) {
                   xTexelC${x} = getX(batch, xR, xCOffset, d1);
                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${x}.zw = vec2(0.0);
                   }
                   xTexelC${x}Ready = 1;
                 }

                 if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${x+1}Ready == 0) {
                   xTexelC${x+1} = getX(batch, xR, xC + 1, d1);
                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xC + 2 >= inDims[1]) {
                     xTexelC${x+1}.zw = vec2(0.0);
                   }
                   xTexelC${x+1}Ready = 1;
                 }

                 xC${x} = vec4(xTexelC${x}.zw, xTexelC${x+1}.zw);
               `,x+1<u&&(f+=`
                   final = vec4(0.0);
                   xCOffset = xC + 1 + strides[1];
                   if(xCOffset >= 0 && xCOffset < inDims[1]) {
                     final = getX(batch, xR, xCOffset, d1);
                   }
                   xC${x+1} = vec4(xTexelC${x+1}.xy, final.xy);
                 `)):(f+=`
                 if(xC >= 0 && xC < inDims[1] && xTexelC${x}Ready == 0) {
                   xTexelC${x} = getX(batch, xR, xC, d1);
                   if (xC + 1 >= inDims[1]) {
                     xTexelC${x}.zw = vec2(0.0);
                   }
                   xTexelC${x}Ready = 1;
                 }

                 xCOffset = xC + strides[1];
                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${x+1}Ready == 0) {
                   xTexelC${x+1} = getX(batch, xR, xCOffset, d1);
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${x+1}.zw = vec2(0.);
                   }
                   xTexelC${x+1}Ready = 1;
                 }

                 xC${x} = vec4(
                   xTexelC${x}.xy, xTexelC${x+1}.xy);
               `,x+1<u&&(f+=`
                   xC${x+1} = vec4(xTexelC${x}.zw, xTexelC${x+1}.zw);
                 `)));x<u&&(f+=`
             wTexel = getW(r, ${x}, d1, d2);
             dotProd += xC${x}.xxzz * vec4(wTexel.xy, wTexel.xy);
             if(d1 + 1 < ${t.inChannels}) {
               dotProd += xC${x}.yyww * vec4(wTexel.zw, wTexel.zw);
             }
           `,x+1<u&&(f+=`
               wTexel = getW(r, ${x+1}, d1, d2);
               dotProd += xC${x+1}.xxzz * vec4(wTexel.xy, wTexel.xy);
               if(d1 + 1 < ${t.inChannels}) {
                 dotProd += xC${x+1}.yyww * vec4(wTexel.zw, wTexel.zw);
               }
             `))}f+=`
     }
   `,f+=`
     }
   `,f+=`
     }
   `;let d="",h="";r&&(o?d=`vec4 activation(vec4 a) {
           vec4 b = getPreluActivationWeightsAtOutCoords();
           ${r}
         }`:s?d=`vec4 activation(vec4 a) {
           vec4 b = getLeakyreluAlphaAtOutCoords();
           ${r}
         }`:d=`vec4 activation(vec4 x) {
           ${r}
         }`,h="result = activation(result);");let m=e?"result += getBiasAtOutCoords();":"";e&&this.variableNames.push("bias"),o&&this.variableNames.push("preluActivationWeights"),s&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
       ${d}

       void main() {
         ivec4 coords = getOutputCoords();
         int batch = coords.x;
         ivec2 xRCCorner = coords.yz * strides - pads;
         int d2 = coords.w;
         int xRCorner = xRCCorner.x;
         int xCCorner = xRCCorner.y;

         //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.
         vec4 dotProd = vec4(0.000000000000001);

         ${f}

         vec4 result = dotProd - vec4(0.000000000000001);
         ${m}
         ${h}
         setOutput(result);
       }
     `}};N();var mD=class{constructor(t,e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec4"},{name:"pad",type:"ivec2"},{name:"stride",type:"ivec2"},{name:"dilation",type:"ivec2"},{name:"inChannels",type:"int"},{name:"itemsPerBlockRow",type:"int"},{name:"outWidth",type:"int"}],this.outputShape=t,this.enableShapeUniforms=Yt(this.outputShape.length);let{dataFormat:r}=e,o=Wn(),s=r==="channelsLast",i=s?1:2,a=s?2:3,l=this.enableShapeUniforms?"if(blockIndex < outShape[2] && pos < outShape[1]) {":`if(blockIndex < ${t[2]} && pos < ${t[1]}) {`,c="";for(let u=0;u<=1;u++)for(let p=0;p<=1;p++)c+=`
          blockIndex = rc.z + ${p};
          pos = rc.y + ${u};

          ${l}
            offsetY = int(blockIndex / outWidth) * stride[0] - pad[0];
            d0 = offsetY + dilation[0] * (pos / itemsPerBlockRow);

            if(d0 < inputShape[${i}] && d0 >= 0) {
              // Use custom imod instead mod. On Intel GPU, mod may generate
              // unexpected value.
              // https://github.com/tensorflow/tfjs/issues/5447
              offsetX = imod(blockIndex, outWidth) * stride[1] - pad[1];
              d1 = offsetX + dilation[1] * (imod(pos, itemsPerBlockRow) /
                  inChannels);

              if(d1 < inputShape[${a}] && d1 >= 0) {

                ch = imod(pos, inChannels);

                if (${s}) {
                  innerDims = vec2(d1, ch);
                  result[${u*2+p}] = getChannel(
                    getA(rc.x, d0, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                } else {
                  innerDims = vec2(d0, d1);
                  result[${u*2+p}] = getChannel(
                    getA(rc.x, ch, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                }
              }
            }
          }
        `;this.userCode=`
      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0);

        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
        vec2 innerDims;

        ${c}

        ${o.output} = result;
      }
    `}};function gD(n,t){let e=n.length;return e>=3?t?[...n.slice(0,-3),n[e-3]*n[e-2],n[e-1]]:[...n.slice(0,-3),n[e-3],n[e-2]*n[e-1]]:!t&&e===1&&n[0]>1?[n[0],1]:null}function xD({x:n,filter:t,convInfo:e,backend:r,bias:o=null,preluActivationWeights:s=null,leakyreluAlpha:i=0,activation:a=null}){let l=n.shape,c=r.texData.get(n.dataId),u=e.inChannels,p=l[0]*l[1]*l[2],f=e.outChannels,d=e.dataFormat==="channelsLast",h=!1,m=!1,g,x=[];if(s!=null){let v=gD(s.shape,d);v!=null&&(s=ye({inputs:{x:s},backend:r,attrs:{shape:v}}),x.push(s))}if(o!=null){let v=gD(o.shape,d);v!=null&&(o=ye({inputs:{x:o},backend:r,attrs:{shape:v}}),x.push(o))}if(!((p===1||f===1)&&u>WL)&&c.isPacked&&d&&c.texture!=null&&l[2]%2!==0&&C.arraysEqual(c.shape.slice(-3),l.slice(-3))){let v=l[0]*l[1]*(l[2]+1),S={dataId:n.dataId,shape:[1,v,e.inChannels],dtype:n.dtype},k=c.shape;c.shape=c.shape.slice(),c.shape[c.shape.length-2]++,C.assert(tg(c.shape,S.shape),()=>`packed reshape ${c.shape} to ${S.shape} isn't free`);let A=ye({inputs:{x:t},backend:r,attrs:{shape:[1,e.inChannels,e.outChannels]}});x.push(A);let $=ig({a:S,b:A,backend:r,transposeA:h,transposeB:m,bias:o,activation:a,preluActivationWeights:s,leakyreluAlpha:i}),L=r.texData.get($.dataId);C.assert(L.isPacked,()=>"batchMatMul result is expected to be packed"),c.shape=k,L.shape=e.outShape,g=sr({inputs:{x:$},backend:r}),g.shape=e.outShape,x.push($)}else{let v=e.outHeight*e.outWidth,S=ye({inputs:{x:n},backend:r,attrs:{shape:d?[e.batchSize,v,e.inChannels]:[e.batchSize,e.inChannels,v]}}),k=ye({inputs:{x:t},backend:r,attrs:{shape:[1,e.inChannels,e.outChannels]}}),A=ig({a:d?S:k,b:d?k:S,transposeA:!d,transposeB:m,backend:r,bias:o,activation:a,preluActivationWeights:s,leakyreluAlpha:i});g=ye({inputs:{x:A},backend:r,attrs:{shape:e.outShape}}),x.push(S),x.push(k),x.push(A)}for(let v of x)r.disposeIntermediateTensorInfo(v);return g}function yD({x:n,filter:t,convInfo:e,backend:r,bias:o=null,preluActivationWeights:s=null,leakyreluAlpha:i=0,activation:a=null}){let{filterWidth:l,filterHeight:c,inChannels:u,outWidth:p,outHeight:f,dataFormat:d}=e,h=d==="channelsLast",m=l*c*u,g=f*p,x=[e.batchSize,m,g],b=!0,w=!1,v=[];if(s!=null){let pe=gD(s.shape,h);pe!=null&&(s=ye({inputs:{x:s},backend:r,attrs:{shape:pe}}),v.push(s))}if(o!=null){let pe=gD(o.shape,h);pe!=null&&(o=ye({inputs:{x:o},backend:r,attrs:{shape:pe}}),v.push(o))}let S=ye({inputs:{x:t},backend:r,attrs:{shape:[1,m,C.sizeFromShape(t.shape)/m]}});v.push(S);let k=new mD(x,e),A=[n.shape,[e.padInfo.top,e.padInfo.left],[e.strideHeight,e.strideWidth],[e.dilationHeight,e.dilationWidth],[e.inChannels],[e.filterWidth*e.inChannels],[e.outWidth]],$=r.runWebGLProgram(k,[n],"float32",A),L=ye({inputs:{x:$},backend:r,attrs:{shape:x}});v.push($),v.push(L);let z=o!=null,W=s!=null,Q=a==="leakyrelu",ne=a?bp(a,!0):null,se=new nb(h?L.shape:S.shape,h?S.shape:L.shape,h?[e.batchSize,g,e.outChannels]:[e.batchSize,e.outChannels,g],b,w,z,ne,W,Q),te=h?[L,S]:[S,L];if(o&&te.push(o),W&&te.push(s),Q){let pe=r.makeTensorInfo([],"float32",C.createScalarValue(i,"float32"));te.push(pe),v.push(pe)}let ie=r.runWebGLProgram(se,te,"float32"),le=ye({inputs:{x:ie},backend:r,attrs:{shape:e.outShape}});v.push(ie);for(let pe of v)r.disposeIntermediateTensorInfo(pe);return le}function WBe(n){let{inputs:t,backend:e,attrs:r}=n,{x:o,filter:s}=t,{strides:i,pad:a,dataFormat:l,dilations:c,dimRoundingMode:u}=r,p=M.convertConv2DDataFormat(l),f=M.computeConv2DInfo(o.shape,s.shape,i,c,a,u,!1,p),d;if(f.filterHeight===1&&f.filterWidth===1&&f.dilationHeight===1&&f.dilationWidth===1&&f.strideHeight===1&&f.strideWidth===1&&(f.padInfo.type==="SAME"||f.padInfo.type==="VALID"))d=xD({x:o,filter:s,convInfo:f,backend:e});else if(f.strideWidth<=2&&p==="channelsLast"&&Y().getBool("WEBGL_EXP_CONV")){let m=new sb(f),g=[[f.padInfo.top,f.padInfo.left],[f.strideHeight,f.strideWidth],[f.dilationHeight,f.dilationWidth],[f.inHeight,f.inWidth]];d=e.runWebGLProgram(m,[o,s],"float32",g)}else if(Y().getBool("WEBGL_CONV_IM2COL"))d=yD({x:o,filter:s,convInfo:f,backend:e});else{let m=new ob(f);d=e.runWebGLProgram(m,[o,s],"float32")}let h=ye({inputs:{x:d},backend:e,attrs:{shape:f.outShape}});return e.disposeIntermediateTensorInfo(d),h}var lie={kernelName:tu,backendName:"webgl",kernelFunc:WBe};N();var bD=class{constructor(t){this.variableNames=["x","dy"],this.outputShape=t.filterShape;let e=t.strideHeight,r=t.strideWidth,o=t.padInfo.top,s=t.padInfo.left,i=t.dataFormat==="channelsLast";this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int d2 = coords.w;

        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int b = 0; b < ${t.batchSize}; b++) {
          for (int yR = 0; yR < ${t.outHeight}; yR++) {
            int xR = wR + yR * ${e} - ${o};

            if (xR < 0 || xR >= ${t.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${t.outWidth}; yC++) {
              int xC = wC + yC * ${r} - ${s};

              if (xC < 0 || xC >= ${t.inWidth}) {
                continue;
              }

              ${i?`float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);`:`float dyValue = getDy(b, d2, yR, yC);
              float xValue = getX(b, d1, xR, xC);
              dotProd += (xValue * dyValue);`}
            }
          }
        }
        setOutput(dotProd);
      }
    `}},vD=class{constructor(t){this.variableNames=["dy","W"],this.outputShape=t.inShape;let e=t.filterHeight,r=t.filterWidth,o=t.strideHeight,s=t.strideWidth,i=t.dataFormat==="channelsLast",a=e-1-t.padInfo.top,l=r-1-t.padInfo.left,c=i?1:2,u=i?2:3,p=i?3:1;this.userCode=`
      const ivec2 pads = ivec2(${a}, ${l});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[${p}];

        ivec2 dyCorner = ivec2(coords[${c}], coords[${u}]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${e}; wR++) {
          float dyR = float(dyRCorner + wR) / ${o}.0;

          if (dyR < 0.0 || dyR >= ${t.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${e} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            float dyC = float(dyCCorner + wC) / ${s}.0;

            if (dyC < 0.0 || dyC >= ${t.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${r} - 1 - wC;

            for (int d2 = 0; d2 < ${t.outChannels}; d2++) {

              if (${i}) {
                float xValue = getDy(batch, idyR, idyC, d2);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              } else {
                float xValue = getDy(batch, d2, idyR, idyC);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `}},wD=class{constructor(t){this.variableNames=["x","dy"],this.outputShape=t.filterShape;let e=t.strideDepth,r=t.strideHeight,o=t.strideWidth,s=t.padInfo.front,i=t.padInfo.top,a=t.padInfo.left;this.userCode=`
      void main() {
        ivec5 coords = getOutputCoords();
        int wF = coords.x;
        int wR = coords.y;
        int wC = coords.z;
        int d1 = coords.w;
        int d2 = coords.u;

        float dotProd = 0.0;

        for (int b = 0; b < ${t.batchSize}; b++) {
          for (int yF = 0; yF < ${t.outDepth}; yF++) {
            int xF = wF + yF * ${e} - ${s};

            if (xF < 0 || xF >= ${t.inDepth}) {
              continue;
            }

            for (int yR = 0; yR < ${t.outHeight}; yR++) {
              int xR = wR + yR * ${r} - ${i};

              if (xR < 0 || xR >= ${t.inHeight}) {
                continue;
              }

              for (int yC = 0; yC < ${t.outWidth}; yC++) {
                int xC = wC + yC * ${o} - ${a};

                if (xC < 0 || xC >= ${t.inWidth}) {
                  continue;
                }

                float dyValue = getDy(b, yF, yR, yC, d2);
                float xValue = getX(b, xF, xR, xC, d1);
                dotProd += (xValue * dyValue);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}},CD=class{constructor(t){this.variableNames=["dy","W"],this.outputShape=t.inShape;let e=t.filterDepth,r=t.filterHeight,o=t.filterWidth,s=t.strideDepth,i=t.strideHeight,a=t.strideWidth,l=e-1-t.padInfo.front,c=r-1-t.padInfo.top,u=o-1-t.padInfo.left;this.userCode=`
      const ivec3 pads = ivec3(${l}, ${c}, ${u});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.u;


        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyFCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        float dotProd = 0.0;
        for (int wF = 0; wF < ${e}; wF++) {
          float dyF = float(dyFCorner + wF) / ${s}.0;

          if (dyF < 0.0 || dyF >= ${t.outDepth}.0 || fract(dyF) > 0.0) {
            continue;
          }
          int idyF = int(dyF);

          int wFPerm = ${e} - 1 - wF;

          for (int wR = 0; wR < ${r}; wR++) {
            float dyR = float(dyRCorner + wR) / ${i}.0;

            if (dyR < 0.0 || dyR >= ${t.outHeight}.0 ||
              fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            int wRPerm = ${r} - 1 - wR;

            for (int wC = 0; wC < ${o}; wC++) {
              float dyC = float(dyCCorner + wC) / ${a}.0;

              if (dyC < 0.0 || dyC >= ${t.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              int wCPerm = ${o} - 1 - wC;

              for (int d2 = 0; d2 < ${t.outChannels}; d2++) {
                float xValue = getDy(batch, idyF, idyR, idyC, d2);
                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}};function HBe(n){let{inputs:t,backend:e,attrs:r}=n,{x:o,dy:s}=t,{strides:i,pad:a,dataFormat:l,dimRoundingMode:c,filterShape:u}=r,p=M.convertConv2DDataFormat(l),f=M.computeConv2DInfo(o.shape,u,i,1,a,c,!1,p),d=new bD(f);return e.runWebGLProgram(d,[o,s],"float32")}var cie={kernelName:Qd,backendName:"webgl",kernelFunc:HBe};N();var ID=class{constructor(t){this.variableNames=["dy","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"strides",type:"vec2"}],this.outputShape=t.inShape,this.enableShapeUniforms=Yt(this.outputShape.length);let e=t.filterHeight,r=t.filterWidth,o=e-1-t.padInfo.top,s=r-1-t.padInfo.left;this.userCode=`
      const ivec2 pads = ivec2(${o}, ${s});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];

        ivec2 dyCorner = ivec2(coords[1], coords[2]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        vec4 result = vec4(0.);
        for (int wR = 0; wR < ${e}; wR++) {
          float dyR = float(dyRCorner + wR) / strides[0];
          if (dyR < 0.0 || dyR >= ${t.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);
          int wRPerm = ${e} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            int wCPerm = ${r} - 1 - wC;

            float dyC = float(dyCCorner + wC) / strides[1];
            bool idyCVal = (dyC >= 0.0) && (dyC < ${t.outWidth}.0)
              && (fract(dyC) == 0.0);
            int idyC = int(dyC);

            float dyC2 = float(dyCCorner + wC + 1) / strides[1];
            bool idyCVal2 = (dyC2 >= 0.0) && (dyC2 < ${t.outWidth}.0)
              && (fract(dyC2) == 0.0);
            int idyC2 = int(dyC2);

            if (idyCVal && idyCVal2) {
              for (int d2 = 0; d2 < ${t.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC, d2);
                vec4 dySample2 = (idyC / 2 == idyC2 / 2) ?
                  dySample : getDy(batch, idyR, idyC2, d2);

                vec2 dyValue = mod(float(idyC), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.xy += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));

                dyValue = mod(float(idyC2), 2.) == 0. ?
                  dySample2.xy : dySample2.zw;
                result.zw += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            } else if (idyCVal) {
              for (int d2 = 0; d2 < ${t.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC, d2);
                vec2 dyValue = mod(float(idyC), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.xy += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            } else if (idyCVal2) {
              for (int d2 = 0; d2 < ${t.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC2, d2);
                vec2 dyValue = mod(float(idyC2), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.zw += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            }
          }
        }
        setOutput(result);
      }
    `}};function qBe(n){let{inputs:t,backend:e,attrs:r}=n,{dy:o,filter:s}=t,{inputShape:i,strides:a,pad:l,dataFormat:c,dimRoundingMode:u}=r,p=M.convertConv2DDataFormat(c),f=M.computeConv2DInfo(i,s.shape,a,1,l,u,!1,p);if(Y().getBool("WEBGL_PACK_CONV2DTRANSPOSE")&&p==="channelsLast"){let d=[[f.strideHeight,f.strideWidth]],h=new ID(f);return e.runWebGLProgram(h,[o,s],"float32",d)}else{let d=new vD(f);return e.runWebGLProgram(d,[o,s],"float32")}}var uie={kernelName:nu,backendName:"webgl",kernelFunc:qBe};N();function KBe(n){let{inputs:t,backend:e,attrs:r}=n,{x:o,filter:s}=t,{strides:i,pad:a,dilations:l}=r,c=M.computeConv3DInfo(o.shape,s.shape,i,l,a),u=new hD(c);return e.runWebGLProgram(u,[o,s],"float32")}var pie={kernelName:ru,backendName:"webgl",kernelFunc:KBe};N();function XBe(n){let{inputs:t,backend:e,attrs:r}=n,{x:o,dy:s}=t,{strides:i,pad:a,filterShape:l}=r,c=M.computeConv3DInfo(o.shape,l,i,1,a),u=new wD(c);return e.runWebGLProgram(u,[o,s],"float32")}var fie={kernelName:Jd,backendName:"webgl",kernelFunc:XBe};N();function YBe(n){let{inputs:t,backend:e,attrs:r}=n,{dy:o,filter:s}=t,{pad:i,strides:a,inputShape:l}=r,c=M.computeConv3DInfo(l,s.shape,a,1,i),u=new CD(c);return e.runWebGLProgram(u,[o,s],"float32")}var die={kernelName:eh,backendName:"webgl",kernelFunc:YBe};N();var ZBe=Pi+`
  return cos(x);
`,QBe=`
  vec4 result = cos(x);
  bvec4 isNaN = isnan(x);
  ${Os}
  return result;
`,JBe=Le({opSnippet:ZBe,packedOpSnippet:QBe}),hie={kernelName:wl,backendName:"webgl",kernelFunc:JBe};N();var eze=`
  float e2x = exp(-x);
  return (e2x + 1.0 / e2x) / 2.0;
`,tze=Le({opSnippet:eze}),mie={kernelName:Cl,backendName:"webgl",kernelFunc:tze};N();var SD=class{constructor(t,e,r,o,s){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];let[i,a,l,c]=t,[u]=e,[p,f]=r;this.outputShape=[u,p,f,c];let d=o==="bilinear"?1:0,[h,m]=[`${a-1}.0`,`${l-1}.0`],[g,x,b]=p>1?[`${(a-1)/(p-1)}`,"(y2-y1) * height_ratio",`y1*${h} + float(y)*(height_scale)`]:["0.0","0.0",`0.5 * (y1+y2) * ${h}`],[w,v,S]=f>1?[`${(l-1)/(f-1)}`,"(x2-x1) * width_ratio",`x1*${m} + float(x)*(width_scale)`]:["0.0","0.0",`0.5 * (x1+x2) * ${m}`];this.userCode=`
      const float height_ratio = float(${g});
      const float width_ratio = float(${w});
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int y = coords[1];
        int x = coords[2];
        int d = coords[3];

        // get box vals
        float y1 = getBoxes(b,0);
        float x1 = getBoxes(b,1);
        float y2 = getBoxes(b,2);
        float x2 = getBoxes(b,3);

        // get image in batch index
        int bInd = round(getBoxInd(b));
        if(bInd < 0 || bInd >= ${i}) {
          return;
        }

        float height_scale = ${x};
        float width_scale = ${v};

        float in_y = ${b};
        if( in_y < 0.0 || in_y > ${h} ) {
          setOutput(float(${s}));
          return;
        }
        float in_x = ${S};
        if( in_x < 0.0 || in_x > ${m} ) {
          setOutput(float(${s}));
          return;
        }

        vec2 sourceFracIndexCR = vec2(in_x,in_y);
        if(${d} == 1) {
          // Compute the four integer indices.
          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);
          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));

          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);
          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);
          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);
          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);

          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);

          float top = topLeft + (topRight - topLeft) * fracCR.x;
          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;
          float newValue = top + (bottom - top) * fracCR.y;
          setOutput(newValue);
        } else {
          // Compute the coordinators of nearest neighbor point.
          ivec2 sourceNearestCR = ivec2(floor(
            sourceFracIndexCR + vec2(0.5,0.5)));
          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);
          setOutput(newValue);
        }
      }
    `}};var nze=n=>{let{inputs:t,backend:e,attrs:r}=n,{image:o,boxes:s,boxInd:i}=t,{cropSize:a,method:l,extrapolationValue:c}=r,u=new SD(o.shape,s.shape,a,l,c);return e.runWebGLProgram(u,[o,s,i],"float32")},gie={kernelName:nh,backendName:"webgl",kernelFunc:nze};N();var ib=function(n){return n.Prod="*",n.Sum="+",n}(ib||{}),pC=class{constructor(t,e,r,o){this.op=t,this.outputShape=e,this.variableNames=["x"],this.customUniforms=[{name:"index",type:"float"}];let s=this.outputShape.length,i=this.op===ib.Prod?"1.0":"0.0",a=r?i:`getX(${xie(s,"coords",this.op)})`,l=this.outputShape[this.outputShape.length-1],c="",u="";r?(c=o?`end != ${l-1}`:"end != 0",u=o?"end + 1":"end - 1"):(c=o?`end + pow2 < ${l}`:"end >= pow2",u=o?"end + pow2":"end - pow2"),this.userCode=`
      void main() {
        ${at(s)} coords = getOutputCoords();
        int end = ${yie(s,"coords",this.op)};
        float val = ${a};
        int pow2 = int(pow(2.0, index));
        if (${c}) {
          int idx = ${u};
          ${yie(s,"coords",this.op)} = idx;
          val ${this.op}= getX(${xie(s,"coords",this.op)});
        }
        setOutput(val);
      }
    `}};function xie(n,t,e){if(n===1)return`${t}`;if(n===2)return`${t}.x, ${t}.y`;if(n===3)return`${t}.x, ${t}.y, ${t}.z`;if(n===4)return`${t}.x, ${t}.y, ${t}.z, ${t}.w`;throw new Error(`Cumulative ${e} for rank ${n} is not yet supported`)}function yie(n,t,e){if(n===1)return`${t}`;if(n===2)return`${t}.y`;if(n===3)return`${t}.z`;if(n===4)return`${t}.w`;throw new Error(`Cumulative ${e} for rank ${n} is not yet supported`)}N();function TD(n,t,e,r,o,s){let i=t.shape.length,a=M.getAxesPermutation([r],i),l=t;a!=null&&(l=Mn({inputs:{x:t},backend:e,attrs:{perm:a}}));let c=M.getInnerMostAxes(1,i)[0];if(c!==i-1)throw new Error(`WebGL cumprod shader expects an inner-most axis=${t.shape.length-1} but got axis=${r}`);let u=l.shape[c],p=sr({inputs:{x:l},backend:e});for(let f=0;f<=Math.ceil(Math.log2(u))-1;f++){let d=new pC(n,l.shape,!1,s),h=[[f]],m=p;p=e.runWebGLProgram(d,[p],p.dtype,h),e.disposeIntermediateTensorInfo(m)}if(o){let f=new pC(n,l.shape,o,s),d=p;p=e.runWebGLProgram(f,[p],p.dtype),e.disposeIntermediateTensorInfo(d)}if(a!=null){let f=M.getUndoAxesPermutation(a),d=Mn({inputs:{x:p},backend:e,attrs:{perm:f}});return e.disposeIntermediateTensorInfo(p),e.disposeIntermediateTensorInfo(l),d}return p}function rze(n){let{inputs:t,backend:e,attrs:r}=n,{x:o}=t,{axis:s,exclusive:i,reverse:a}=r;return TD(ib.Prod,o,e,s,i,a)}var bie={kernelName:th,backendName:"webgl",kernelFunc:rze};N();function oze(n){let{inputs:t,backend:e,attrs:r}=n,{x:o}=t,{axis:s,exclusive:i,reverse:a}=r;return TD(ib.Sum,o,e,s,i,a)}var vie={kernelName:ou,backendName:"webgl",kernelFunc:oze};N();function sze(n){let{inputs:t,backend:e,attrs:r}=n,{x:o,weights:s}=t,{size:i,binaryOutput:a}=r;if(o.shape.length===1){let l=e.readSync(o.dataId),c=e.readSync(s.dataId),u=zN(l,c,s.dtype,s.shape,i);return e.makeTensorInfo([i],s.dtype,u)}else if(o.shape.length===2){let l=e.bufferSync(o),c=e.bufferSync(s),u=ooe(l,c,i,a);return e.makeTensorInfo(u.shape,s.dtype,u.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${o.shape.length}.`)}var wie={kernelName:rh,backendName:"webgl",kernelFunc:sze};N();var ED=class{constructor(t,e,r){this.variableNames=["x"],this.outputShape=[],this.outputShape=t,this.blockSize=e,this.dataFormat=r,this.userCode=`
    void main() {
      ivec4 coords = getOutputCoords();
      int b = coords[0];
      int h = ${this.getHeightCoordString()};
      int w = ${this.getWidthCoordString()};
      int d = ${this.getDepthCoordString()};

      int in_h = h / ${e};
      int offset_h = imod(h, ${e});
      int in_w = w / ${e};
      int offset_w = imod(w, ${e});
      int offset_d = (offset_h * ${e} + offset_w) *
        ${this.getOutputDepthSize()};
      int in_d = d + offset_d;

      float result = ${this.getInputSamplingString()};
      setOutput(result);
    }
  `}getHeightCoordString(){return this.dataFormat==="NHWC"?"coords[1]":"coords[2]"}getWidthCoordString(){return this.dataFormat==="NHWC"?"coords[2]":"coords[3]"}getDepthCoordString(){return this.dataFormat==="NHWC"?"coords[3]":"coords[1]"}getOutputDepthSize(){return this.dataFormat==="NHWC"?this.outputShape[3]:this.outputShape[1]}getInputSamplingString(){return this.dataFormat==="NHWC"?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"}};function ize(n){let{inputs:t,backend:e,attrs:r}=n,{x:o}=t,{blockSize:s,dataFormat:i}=r,a=o.shape[0],l=i==="NHWC"?o.shape[1]:o.shape[2],c=i==="NHWC"?o.shape[2]:o.shape[3],u=i==="NHWC"?o.shape[3]:o.shape[1],p=l*s,f=c*s,d=u/(s*s),h=i==="NHWC"?[a,p,f,d]:[a,d,p,f],m=new ED(h,s,i);return e.runWebGLProgram(m,[o],o.dtype)}var Cie={kernelName:oh,backendName:"webgl",kernelFunc:ize};N();var ab=class{constructor(t,e=!1,r=null,o=!1,s=!1){this.variableNames=["x","W"],this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=t.outShape,this.enableShapeUniforms=Yt(this.outputShape.length);let i=t.filterHeight,a=t.filterWidth,l=t.outChannels/t.inChannels,c="",u="";r&&(o?c=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:s?c=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:c=`
          float activation(float x) {
            ${r}
          }
        `,u="result = activation(result);");let p=e?"result += getBiasAtOutCoords();":"";e&&this.variableNames.push("bias"),o&&this.variableNames.push("preluActivationWeights"),s&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${c}

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${l};
        int q = d2 - d1 * ${l};

        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.
        for (int wR = 0; wR < ${i}; wR++) {
          int xR = xRCorner + wR * dilations[0];

          if (xR < 0 || xR >= inDims[0]) {
            continue;
          }

          for (int wC = 0; wC < ${a}; wC++) {
            int xC = xCCorner + wC * dilations[1];

            if (xC < 0 || xC >= inDims[1]) {
              continue;
            }

            float xVal = getX(batch, xR, xC, d1);
            float wVal = getW(wR, wC, d1, q);
            dotProd += xVal * wVal;
          }
        }

        float result = dotProd;
        ${p}
        ${u}
        setOutput(result);
      }
    `}};N();var lb=class{constructor(t,e=!1,r=null,o=!1,s=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=t.outShape,this.enableShapeUniforms=Yt(this.outputShape.length);let i=t.outChannels/t.inChannels,a=t.padInfo.left,l=t.strideWidth,c=t.dilationWidth,u=t.filterHeight,p=t.filterWidth,f=p,d=`
      int xR; int xC; int xCOffset;
      vec4 wTexel; vec4 previous; vec4 final;`;for(let x=0;x<p;x++)d+=`
          vec4 xTexelC${x*2};
          int xTexelC${x*2}Ready;
          vec4 xTexelC${x*2+1};
          int xTexelC${x*2+1}Ready;
          vec4 xC${x};`;d+=`
    for (int r = 0; r < ${u}; r++) {
      `;for(let x=0;x<p;x++)d+=`
          xTexelC${x*2} = vec4(0.0);
          xTexelC${x*2}Ready = 0;
          xTexelC${x*2+1} = vec4(0.0);
          xTexelC${x*2+1}Ready = 0;
          xC${x} = vec4(0.0);`;d+=`
        xR = xRCorner + r * dilations[0];
        if (xR >=0 && xR < inDims[0]) {
      `;for(let x=0;x<(f+1)/2;x++){let b=x*2;if(d+=`
          xC = xCCorner + ${b*c};
          `,l===1){if(b<p&&(a%2===1?(d+=`
                xCOffset = xC + 1;
                if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${b}Ready == 0) {
                  xTexelC${b} = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${b}.zw = vec2(0.0);
                  }
                  xTexelC${b}Ready = 1;
                }
              `,c===1&&b>0?d+=`
                xC${b} = vec4(xTexelC${b-2}.zw, xTexelC${b}.xy);
                `:d+=`
                  xCOffset = xC + 1 - 2;

                  if (xCOffset >= 0 && xCOffset < inDims[1]) {
                    previous = getX(batch, xR, xCOffset, d1);

                    // Need to manually clear unused channels in case
                    // we're reading from recycled texture.
                    if (xCOffset + 1 >= inDims[1]) {
                      previous.zw = vec2(0.0);
                    }

                    xC${b} = vec4(previous.zw, xTexelC${b}.xy);
                  } else {
                    xC${b} = vec4(0.0, 0.0, xTexelC${b}.xy);
                  }
                  `):d+=`
                if (xC >= 0 && xC < inDims[1] && xTexelC${b}Ready == 0) {
                  xTexelC${b} = getX(batch, xR, xC, d1);
                  if (xC + 1 >= inDims[1]) {
                    xTexelC${b}.zw = vec2(0.0);
                  }
                  xTexelC${b}Ready = 1;
                }

                xC${b} = xTexelC${b};
                `,b+1<p)){let w=a%2===0?C.nearestLargerEven(c):c;c%2===0&&a%2===1||c%2!==0&&a%2!==1?(d+=`
                  xCOffset = xC + imod(pads[1], 2) + ${w};

                  if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${b+1}Ready == 0) {
                    xTexelC${b+1} = getX(batch, xR, xCOffset, d1);

                    // Need to manually clear unused channels in case
                    // we're reading from recycled texture.
                    if (xCOffset + 1 >= inDims[1]) {
                      xTexelC${b+1}.zw = vec2(0.0);
                    }
                    xTexelC${b+1}Ready = 1;
                  }
                  `,c>1?d+=`
                    xCOffset -= 2;
                    if (xCOffset >= 0 && xCOffset < inDims[1]) {
                     previous = getX(batch, xR, xCOffset, d1);
                     xC${b+1} = vec4(previous.zw, xTexelC${b+1}.xy);
                    } else {
                     xC${b+1} = vec4(0.0, 0.0, xTexelC${b+1}.xy);
                    }
                    `:d+=`
                    xC${b+1} = vec4(xTexelC${b}.zw, xTexelC${b+1}.xy);
                    `):w===1?d+=`
                    xC${b+1} = xTexelC${b};
                    `:d+=`
                    xCOffset = xC + ${w};

                    if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${b+1}Ready == 0) {
                      xTexelC${b+1} = getX(batch, xR, xCOffset, d1);
                      if (xCOffset + 1 >= inDims[1]) {
                        xTexelC${b+1}.zw = vec2(0.0);
                      }
                      xTexelC${b+1}Ready = 1;
                    }

                    xC${b+1} = xTexelC${b+1};
                    `}}else b<p&&(a%2===1?(d+=`
                xCOffset = xC + 1 - strides[1];
                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${b}Ready == 0) {
                  xTexelC${b} = getX(batch, xR, xCOffset, d1);
                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${b}.zw = vec2(0.0);
                  }
                  xTexelC${b}Ready = 1;
                }

                if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${b+1}Ready == 0) {
                  xTexelC${b+1} = getX(batch, xR, xC + 1, d1);
                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xC + 2 >= inDims[1]) {
                    xTexelC${b+1}.zw = vec2(0.0);
                  }
                  xTexelC${b+1}Ready = 1;
                }

                xC${b} = vec4(xTexelC${b}.zw, xTexelC${b+1}.zw);
              `,b+1<p&&(d+=`
                  final = vec4(0.0);
                  xCOffset = xC + 1 + strides[1];
                  if(xCOffset >= 0 && xCOffset < inDims[1]) {
                    final = getX(batch, xR, xCOffset, d1);
                  }
                  xC${b+1} = vec4(xTexelC${b+1}.xy, final.xy);
                `)):(d+=`
                if(xC >= 0 && xC < inDims[1] && xTexelC${b}Ready == 0) {
                  xTexelC${b} = getX(batch, xR, xC, d1);
                  if (xC + 1 >= inDims[1]) {
                    xTexelC${b}.zw = vec2(0.0);
                  }
                  xTexelC${b}Ready = 1;
                }

                xCOffset = xC + strides[1];
                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${b+1}Ready == 0) {
                  xTexelC${b+1} = getX(batch, xR, xCOffset, d1);
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${b+1}.zw = vec2(0.);
                  }
                  xTexelC${b+1}Ready = 1;
                }

                xC${b} = vec4(
                  xTexelC${b}.xy, xTexelC${b+1}.xy);
              `,b+1<p&&(d+=`
                  xC${b+1} = vec4(xTexelC${b}.zw, xTexelC${b+1}.zw);
                `)));b<p&&(d+=`
            wTexel = getW(r, ${b}, d1, q);
            dotProd += xC${b} * vec4(wTexel.xz, wTexel.xz);
          `,b+1<p&&(d+=`
              wTexel = getW(r, ${b+1}, d1, q);
              dotProd += xC${b+1} * vec4(wTexel.xz, wTexel.xz);
            `))}d+=`
    }
  `,d+=`
      }
    `;let h="",m="";r&&(o?h=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:s?h=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:h=`vec4 activation(vec4 x) {
          ${r}
        }`,m="result = activation(result);");let g=e?"result += getBiasAtOutCoords();":"";e&&this.variableNames.push("bias"),o&&this.variableNames.push("preluActivationWeights"),s&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${h}

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${i};
        int q = d2 - d1 * ${i};
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.
        vec4 dotProd = vec4(0.000000000000001);

        ${d}

        vec4 result = dotProd - vec4(0.000000000000001);
        ${g}
        ${m}
        setOutput(result);
      }
    `}};function aze(n){let{inputs:t,backend:e,attrs:r}=n,{x:o,filter:s}=t,{strides:i,pad:a,dilations:l,dimRoundingMode:c}=r,u=l;u==null&&(u=[1,1]),C.assert(M.eitherStridesOrDilationsAreOne(i,u),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${i} and dilations '${u}'`);let p=M.computeConv2DInfo(o.shape,s.shape,i,u,a,c,!0),f;Y().getBool("WEBGL_PACK_DEPTHWISECONV")&&p.strideWidth<=2&&p.outChannels/p.inChannels===1?f=new lb(p):f=new ab(p);let d=[[p.padInfo.top,p.padInfo.left],[p.strideHeight,p.strideWidth],[p.dilationHeight,p.dilationWidth],[p.inHeight,p.inWidth]];return e.runWebGLProgram(f,[o,s],"float32",d)}var Iie={kernelName:su,backendName:"webgl",kernelFunc:aze};N();var ND=class{constructor(t){this.variableNames=["x","dy"],this.outputShape=t.filterShape;let e=t.strideHeight,r=t.strideWidth,o=t.padInfo.top,s=t.padInfo.left,i=t.outChannels/t.inChannels;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int dm = coords.w;
        int d2 = d1 * ${i} + dm;

        float dotProd = 0.0;

        // TO DO: Vec4 over the batch size
        for (int b = 0; b < ${t.batchSize}; b++) {
          for (int yR = 0; yR < ${t.outHeight}; yR++) {
            int xR = wR + yR * ${e} - ${o};

            if (xR < 0 || xR >= ${t.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${t.outWidth}; yC++) {
              int xC = wC + yC * ${r} - ${s};

              if (xC < 0 || xC >= ${t.inWidth}) {
                continue;
              }

              float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);
            }
          }
        }
        setOutput(dotProd);
      }
    `}},DD=class{constructor(t){this.variableNames=["dy","W"],this.outputShape=t.inShape;let e=t.filterHeight,r=t.filterWidth,o=t.strideHeight,s=t.strideWidth,i=e-1-t.padInfo.top,a=r-1-t.padInfo.left,l=t.outChannels/t.inChannels;this.userCode=`
      const ivec2 pads = ivec2(${i}, ${a});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];
        ivec2 dyCorner = coords.yz - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        float dotProd = 0.0;

        for (int wR = 0; wR < ${e}; wR++) {
          float dyR = float(dyRCorner + wR) / ${o}.0;

          if (dyR < 0.0 || dyR >= ${t.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${e} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            float dyC = float(dyCCorner + wC) / ${s}.0;

            if (dyC < 0.0 || dyC >= ${t.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${r} - 1 - wC;

            // TO DO: Vec4 over the channelMul
            for (int dm = 0; dm < ${l}; dm++) {
              int d2 = d1 * ${l} + dm;
              float xValue = getDy(batch, idyR, idyC, d2);
              float wValue = getW(wRPerm, wCPerm, d1, dm);
              dotProd += xValue * wValue;
            }
          }
        }
        setOutput(dotProd);
      }
    `}};function lze(n){let{inputs:t,backend:e,attrs:r}=n,{x:o,dy:s}=t,{strides:i,dilations:a,pad:l,dimRoundingMode:c,filterShape:u}=r,p=M.computeConv2DInfo(o.shape,u,i,a,l,c,!0),f=new ND(p);return e.runWebGLProgram(f,[o,s],"float32")}var Sie={kernelName:sh,backendName:"webgl",kernelFunc:lze};N();function cze(n){let{inputs:t,backend:e,attrs:r}=n,{dy:o,filter:s}=t,{strides:i,dilations:a,pad:l,dimRoundingMode:c,inputShape:u}=r,p=M.computeConv2DInfo(u,s.shape,i,a,l,c,!0),f=new DD(p);return e.runWebGLProgram(f,[o,s],"float32")}var Tie={kernelName:ih,backendName:"webgl",kernelFunc:cze};N();var kD=class{constructor(t){this.variableNames=["X"],this.outputShape=[t,t],this.userCode=`
      void main() {
          ivec2 coords = getOutputCoords();
          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;
          setOutput(val);
      }
    `}};function uze(n){let{inputs:t,backend:e}=n,{x:r}=t,o=[...r.shape,...r.shape],s=C.sizeFromShape(r.shape),i=ye({inputs:{x:r},backend:e,attrs:{shape:[s]}}),a=new kD(s),l=e.runWebGLProgram(a,[i],i.dtype),c=ye({inputs:{x:l},backend:e,attrs:{shape:o}});return e.disposeIntermediateTensorInfo(i),e.disposeIntermediateTensorInfo(l),c}var Eie={kernelName:ah,backendName:"webgl",kernelFunc:uze};N();var _D=class{constructor(t){this.variableNames=["x","W"],this.outputShape=t.outShape;let{inHeight:e,inWidth:r,padInfo:o,strideHeight:s,strideWidth:i,filterHeight:a,filterWidth:l,dilationHeight:c,dilationWidth:u}=t,{top:p,left:f}=o;this.userCode=`
      const ivec2 strides = ivec2(${s}, ${i});
      const ivec2 pads = ivec2(${p}, ${f});
      const float neg_infinity = -3.4e38;

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.w;
        ivec2 outTopLeftCorner =
            coords.yz * strides - pads;
        int hBeg = outTopLeftCorner.x;
        int wBeg = outTopLeftCorner.y;

        float curVal = neg_infinity;
        for (int h = 0; h < ${a}; h++) {
          int hIn = hBeg + h * ${c};

          if (hIn >= 0 && hIn < ${e}) {
            for (int w = 0; w < ${l}; w++) {
              int wIn = wBeg + w * ${u};

              if (wIn >= 0 && wIn < ${r}) {
                float xVal = getX(batch, hIn, wIn, d1);
                float wVal = getW(h, w, d1);

                float val = xVal + wVal;
                if (val > curVal) {
                  curVal = val;
                }
              }
            }
          }
        }

        float result = curVal;
        setOutput(result);
      }
    `}};function pze(n){let{inputs:t,backend:e,attrs:r}=n,{x:o,filter:s}=t,{strides:i,pad:a,dilations:l}=r,c=M.computeDilation2DInfo(o.shape,s.shape,i,a,"NHWC",l),u,p=new _D(c);u=e.runWebGLProgram(p,[o,s],"float32");let f=ye({inputs:{x:u},backend:e,attrs:{shape:c.outShape}});return e.disposeIntermediateTensorInfo(u),f}var Nie={kernelName:iu,backendName:"webgl",kernelFunc:pze};N();function fze(n){let{inputs:t,backend:e,attrs:r}=n,{equation:o}=r,s=t,{allDims:i,summedDims:a,idDims:l}=M.decodeEinsumEquation(o,s.length);M.checkEinsumDimSizes(i.length,l,s);let{path:c,steps:u}=M.getEinsumComputePath(a,l),p=u.length,f=null,d=i.length,h=[];for(let m=0;m<p;++m){for(let g of u[m]){let{permutationIndices:x,expandDims:b}=M.getEinsumPermutation(d,l[g]),w;M.isIdentityPermutation(x)?w=s[g]:(w=Mn({inputs:{x:s[g]},backend:e,attrs:{perm:x}}),h.push(w));let v=w.shape.slice();for(let S=0;S<b.length;++S)v.splice(b[S],0,1);C.arraysEqual(w.shape,v)||(w=ye({inputs:{x:w},backend:e,attrs:{shape:v}}),h.push(w)),f===null?f=w:(f=cC({inputs:{a:w,b:f},backend:e}),h.push(f))}m<p-1&&(c[m]>=0&&(f=sg({inputs:{x:f},backend:e,attrs:{axis:c[m]-(i.length-d),keepDims:!1}}),h.push(f)),d--)}for(let m of h)m!==f&&e.disposeIntermediateTensorInfo(m);return f}var Die={kernelName:lh,backendName:"webgl",kernelFunc:fze};N();var dze="return (x >= 0.0) ? x : (exp(x) - 1.0);",hze=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,mze=Le({opSnippet:dze,packedOpSnippet:hze}),kie={kernelName:Sl,backendName:"webgl",kernelFunc:mze};N();var gze="return (b >= 0.0) ? a : a * (b + 1.0);",xze=`
  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));
  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));
`,yze=n=>{let{inputs:t,backend:e}=n,{dy:r,y:o}=t,s=Y().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Ms(xze,r.shape,o.shape):new us(gze,r.shape,o.shape);return e.runWebGLProgram(s,[r,o],r.dtype)},_ie={kernelName:ch,backendName:"webgl",kernelFunc:yze};N();var bze=`
  return vec4(equal(a, b));
`,vze="return float(a == b);",wze=Ut({opSnippet:vze,packedOpSnippet:bze,dtype:"bool",cpuKernelImpl:coe}),Aie={kernelName:rf,backendName:"webgl",kernelFunc:wze};N();var Cze=`
  // Error function is calculated approximately with elementary function.
  // See "Handbook of Mathematical Functions with Formulas,
  // Graphs, and Mathematical Tables", Abramowitz and Stegun.
  float p = ${M.ERF_P};
  float a1 = ${M.ERF_A1};
  float a2 = ${M.ERF_A2};
  float a3 = ${M.ERF_A3};
  float a4 = ${M.ERF_A4};
  float a5 = ${M.ERF_A5};

  float sign = sign(x);
  x = abs(x);
  float t = 1.0 / (1.0 + p * x);
  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));
`,Ize=Le({opSnippet:Cze}),Rie={kernelName:Tl,backendName:"webgl",kernelFunc:Ize};N();var Sze=Pi+`
  return exp(x);
`,Tze=`
  vec4 result = exp(x);
  bvec4 isNaN = isnan(x);
  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,YL=Le({opSnippet:Sze,packedOpSnippet:Tze,cpuKernelImpl:uoe,dtype:"float32"}),Mie={kernelName:El,backendName:"webgl",kernelFunc:YL};N();function AD(n){let{inputs:t,attrs:e,backend:r}=n,{dim:o}=e,{input:s}=t,i=s.shape.length,a=s.shape.slice(),l=o;return o<0&&(C.assert(-(i+1)<=o,()=>`Axis must be in the interval [${-(i+1)}, ${i}]`),l=i+o+1),a.splice(l,0,1),ye({inputs:{x:s},backend:r,attrs:{shape:a}})}var Oie={kernelName:au,backendName:"webgl",kernelFunc:AD};N();var Fie="return exp(x) - 1.0;",Eze=Le({opSnippet:Fie,packedOpSnippet:Fie,cpuKernelImpl:poe}),Pie={kernelName:Nl,backendName:"webgl",kernelFunc:Eze};N();N();var fC=class{constructor(t,e,r){this.variableNames=["real","imag"];let o=e[1];this.outputShape=e;let s=r?`2.0 * ${Math.PI}`:`-2.0 * ${Math.PI}`,i=r?`${o}.0`:"1.0",a;if(t==="real")a="return real * expR - imag * expI;";else if(t==="imag")a="return real * expI + imag * expR;";else throw new Error(`FFT component must be either "real" or "imag", got ${t}.`);this.userCode=`
      const float exponentMultiplier = ${s};

      float unaryOpComplex(float real, float expR, float imag, float expI) {
        ${a}
      }

      float mulMatDFT(int batch, int index) {
        float indexRatio = float(index) / float(${o});
        float exponentMultiplierTimesIndexRatio =
            exponentMultiplier * indexRatio;

        float result = 0.0;

        for (int i = 0; i < ${o}; i++) {
          // x = (-2|2 * PI / N) * index * i;
          float x = exponentMultiplierTimesIndexRatio * float(i);
          float expR = cos(x);
          float expI = sin(x);
          float real = getReal(batch, i);
          float imag = getImag(batch, i);

          result +=
              unaryOpComplex(real, expR, imag, expI) / ${i};
        }

        return result;
      }

      void main() {
        ivec2 coords = getOutputCoords();
        setOutput(mulMatDFT(coords[0], coords[1]));
      }
    `}};function RD(n,t,e){let r=e.texData.get(n.dataId),o=C.sizeFromShape(n.shape),s=n.shape[n.shape.length-1],i=o/s,a=ye({inputs:{x:n},backend:e,attrs:{shape:[i,s]}}),l=a.shape,c=new fC("real",l,t),u=new fC("imag",l,t),p=[{dataId:r.complexTensorInfos.real.dataId,dtype:r.complexTensorInfos.real.dtype,shape:l},{dataId:r.complexTensorInfos.imag.dataId,dtype:r.complexTensorInfos.imag.dtype,shape:l}],f=e.runWebGLProgram(c,p,"float32"),d=e.runWebGLProgram(u,p,"float32"),h=ps({inputs:{real:f,imag:d},backend:e});e.disposeIntermediateTensorInfo(f),e.disposeIntermediateTensorInfo(d);let m=ye({inputs:{x:h},backend:e,attrs:{shape:n.shape}});return e.disposeIntermediateTensorInfo(a),e.disposeIntermediateTensorInfo(h),m}function Nze(n){let{inputs:t,backend:e}=n,{input:r}=t;return RD(r,!1,e)}var $ie={kernelName:uh,backendName:"webgl",kernelFunc:Nze};N();var MD=class{constructor(t,e){this.outputShape=[],this.customUniforms=[{name:"value",type:"float"}],this.variableNames=["x"],this.outputShape=t,this.userCode=`
      void main() {
        // Input can be obtained from uniform value.
        setOutput(value);
      }
    `}};function wp(n){let{backend:t,attrs:e}=n,{shape:r,value:o}=e,{dtype:s}=e;if(s=s||C.inferDtype(o),s==="string"){let i=C.getArrayFromDType(s,C.sizeFromShape(r));return i.fill(o),t.makeTensorInfo(r,s,i)}else{let i=new MD(r,o),a=[[o]];return t.runWebGLProgram(i,[],s,a)}}var Lie={kernelName:ph,backendName:"webgl",kernelFunc:wp};N();var OD=class{constructor(t){this.variableNames=["Image"],this.outputShape=[];let e=t[2];this.outputShape=t,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];

          int coordX = ${e} - x - 1;
          float outputValue;
          if(coordX >= 0 && coordX < ${e}) {
            outputValue = getImage(coords[0], coords[1], coordX, coords[3]);
          } else {
            outputValue = getImage(coords[0], coords[1], coords[2], coords[3]);
          }
          setOutput(outputValue);
        }
    `}};var Bie={kernelName:fh,backendName:"webgl",kernelFunc:({inputs:n,backend:t})=>{let{image:e}=n,r=t,o=new OD(e.shape);return r.runWebGLProgram(o,[e],e.dtype)}};N();var zie="return floor(x);",Dze=Le({opSnippet:zie,packedOpSnippet:zie,cpuKernelImpl:foe}),Vie={kernelName:Dl,backendName:"webgl",kernelFunc:Dze};N();var kze=`
  float s = sign(a) * sign(b);
  int ia = round(a);
  int ib = round(b);
  if (ib != 0) {
    // Windows (D3D) wants guaranteed non-zero int division at compile-time.
    return float(idiv(ia, ib, s));
  } else {
    return NAN;
  }
`,_ze=`
  ivec4 ia = round(a);
  ivec4 ib = round(b);
  bvec4 cond = notEqual(ib, ivec4(0));
  ivec4 result = ivec4(0);
  vec4 s = sign(a) * sign(b);

  // Windows (D3D) wants guaranteed non-zero int division at compile-time.
  if (cond[0]) {
    result[0] = idiv(ia[0], ib[0], s[0]);
  }
  if (cond[1]) {
    result[1] = idiv(ia[1], ib[1], s[1]);
  }
  if (cond[2]) {
    result[2] = idiv(ia[2], ib[2], s[2]);
  }
  if (cond[3]) {
    result[3] = idiv(ia[3], ib[3], s[3]);
  }
  return vec4(result);
`,Aze=Ut({opSnippet:kze,packedOpSnippet:_ze,dtype:"int32"}),Uie={kernelName:kl,backendName:"webgl",kernelFunc:Aze};N();N();var FD=class{constructor(t){this.variableNames=["A"];let e=Wn(),[r,o]=t;this.outputShape=t,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${o}.0, ${r}.0);

        vec4 values = ${e.texture2D}(A, uv);
        float value;
        if (depth == 0) {
          value = values.r;
        } else if (depth == 1) {
          value = values.g;
        } else if (depth == 2) {
          value = values.b;
        } else if (depth == 3) {
          value = values.a;
        }

        setOutput(floor(value * 255.0 + 0.5));
      }
    `}};var PD=class{constructor(t){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;let e=Wn(),[r,o]=t;this.outputShape=t,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];

        vec4 result = vec4(0.);

        for(int row=0; row<=1; row++) {
          for(int col=0; col<=1; col++) {
            texC = coords[1] + row;
            depth = coords[2] + col;

            vec2 uv = (vec2(texC, texR) + halfCR) /
                       vec2(${o}.0, ${r}.0);
            vec4 values = ${e.texture2D}(A, uv);
            float value;
            if (depth == 0) {
              value = values.r;
            } else if (depth == 1) {
              value = values.g;
            } else if (depth == 2) {
              value = values.b;
            } else if (depth == 3) {
              value = values.a;
            }

            result[row * 2 + col] = floor(value * 255.0 + 0.5);
          }
        }

        ${e.output} = result;
      }
    `}};var jie={kernelName:Lx,backendName:"webgl",kernelFunc:Rze},cb,ZL=Y().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");function Rze(n){let{inputs:t,backend:e,attrs:r}=n,{pixels:o}=t,{numChannels:s}=r,i=typeof HTMLVideoElement<"u"&&o instanceof HTMLVideoElement,a=typeof HTMLImageElement<"u"&&o instanceof HTMLImageElement,[l,c]=i?[o.videoWidth,o.videoHeight]:[o.width,o.height],u=[c,l],p=[c,l,s];if(a||i){let m=Y().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");(cb==null||m!==ZL)&&(ZL=m,cb=document.createElement("canvas").getContext("2d",{willReadFrequently:ZL})),cb.canvas.width=l,cb.canvas.height=c,cb.drawImage(o,0,0,l,c),o=cb.canvas}let f=e.makeTensorInfo(u,"int32");e.texData.get(f.dataId).usage=No.PIXELS,e.gpgpu.uploadPixelDataToTexture(e.getTexture(f.dataId),o);let d=Y().getBool("WEBGL_PACK")?new PD(p):new FD(p),h=e.runWebGLProgram(d,[f],"int32");return e.disposeData(f.dataId),h}N();function Mze(n){let{inputs:t,backend:e,attrs:r}=n,{x:o,filter:s,bias:i,preluActivationWeights:a}=t,{strides:l,pad:c,dataFormat:u,dilations:p,dimRoundingMode:f,activation:d,leakyreluAlpha:h}=r,m=M.convertConv2DDataFormat(u),g=M.computeConv2DInfo(o.shape,s.shape,l,p,c,f,!1,m),x,b=[],w=i!=null,v=a!=null,S=d==="leakyrelu",k=()=>{let $=[o,s],L=(z,W)=>{if(W==="NCHW"&&z.shape.length===1&&z.shape[0]!==1){let Q=ye({inputs:{x:z},backend:e,attrs:{shape:[z.shape[0],1,1]}});return b.push(Q),Q}return z};if(w&&$.push(L(i,u)),v&&$.push(L(a,u)),S){let z=e.makeTensorInfo([],"float32",C.createScalarValue(h,"float32"));$.push(z),b.push(z)}return $};if(g.filterHeight===1&&g.filterWidth===1&&g.dilationHeight===1&&g.dilationWidth===1&&g.strideHeight===1&&g.strideWidth===1&&(g.padInfo.type==="SAME"||g.padInfo.type==="VALID"))x=xD({x:o,filter:s,convInfo:g,backend:e,bias:i,activation:d,preluActivationWeights:a,leakyreluAlpha:h});else if(g.strideWidth<=2&&m==="channelsLast"&&Y().getBool("WEBGL_EXP_CONV")){let $=d?bp(d,!0):null,L=new sb(g,w,$,v,S),z=[[g.padInfo.top,g.padInfo.left],[g.strideHeight,g.strideWidth],[g.dilationHeight,g.dilationWidth],[g.inHeight,g.inWidth]],W=k();x=e.runWebGLProgram(L,W,"float32",z)}else if(Y().getBool("WEBGL_CONV_IM2COL"))x=yD({x:o,filter:s,convInfo:g,backend:e,bias:i,activation:d,preluActivationWeights:a,leakyreluAlpha:h});else{let $=d?bp(d,!1):null,L=new ob(g,w,$,v,S),z=k();x=e.runWebGLProgram(L,z,"float32")}let A=ye({inputs:{x},backend:e,attrs:{shape:g.outShape}});return b.push(x),b.forEach($=>e.disposeIntermediateTensorInfo($)),A}var Gie={kernelName:hf,backendName:"webgl",kernelFunc:Mze};N();function Oze(n){let{inputs:t,backend:e,attrs:r}=n,{x:o,filter:s,bias:i,preluActivationWeights:a}=t,{strides:l,pad:c,dilations:u,dimRoundingMode:p,activation:f,leakyreluAlpha:d}=r,h=[],m=u;m==null&&(m=[1,1]),C.assert(M.eitherStridesOrDilationsAreOne(l,m),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${l} and dilations '${m}'`);let g=M.computeConv2DInfo(o.shape,s.shape,l,m,c,p,!0),x=Y().getBool("WEBGL_PACK_DEPTHWISECONV")&&g.strideWidth<=2&&g.outChannels/g.inChannels===1,b=f?bp(f,x):null,w=[o,s],v=i!=null,S=a!=null,k=f==="leakyrelu";if(v&&w.push(i),S&&w.push(a),k){let z=e.makeTensorInfo([],"float32",C.createScalarValue(d,"float32"));w.push(z),h.push(z)}let A;x?A=new lb(g,v,b,S,k):A=new ab(g,v,b,S,k);let $=[[g.padInfo.top,g.padInfo.left],[g.strideHeight,g.strideWidth],[g.dilationHeight,g.dilationWidth],[g.inHeight,g.inWidth]],L=e.runWebGLProgram(A,w,"float32",$);return h.forEach(z=>e.disposeIntermediateTensorInfo(z)),L}var Wie={kernelName:mf,backendName:"webgl",kernelFunc:Oze};N();var $D=class{constructor(t,e,r,o){this.sliceDim=t,this.strides=e,this.paramsShape=o,this.variableNames=["x","indices"],this.outputShape=r;let s=at(r.length),i=`
    int index;`;for(let a=0;a<this.sliceDim;a++)i+=`
          index = round(getIndices(coords[0], ${a}));
          out_of_bounds = out_of_bounds || index < 0;
          out_of_bounds = out_of_bounds || index >= ${this.paramsShape[a]};
          flattenIndex += index * ${this.strides[a]};`;this.userCode=`
         void main() {
          ${s} coords = getOutputCoords();
          int flattenIndex = 0;
          bool out_of_bounds = false;

          ${i}

          setOutput(out_of_bounds ? 0.0 : getX(flattenIndex, coords[1]));
        }
      `}};function Fze(n){let{inputs:t,backend:e}=n,{params:r,indices:o}=t,s=o.shape,i=s[s.length-1],a=C.sizeFromShape(r.shape),[l,c,u,p]=M.prepareAndValidate(r,o),f=ye({inputs:{x:o},backend:e,attrs:{shape:[c,i]}}),d=ye({inputs:{x:r},backend:e,attrs:{shape:[C.sizeFromShape(r.shape)/u,u]}});if(e.shouldExecuteOnCPU([r,o])||r.dtype==="string"){let x=e.readSync(o.dataId),b=e.bufferSync(r),w=doe(x,b,r.dtype,c,i,u,p,r.shape,a);return e.makeTensorInfo(l,r.dtype,w.values)}let h=new $D(i,p,[c,u],r.shape),m=e.runWebGLProgram(h,[d,f],d.dtype),g=ye({inputs:{x:m},backend:e,attrs:{shape:l}});return e.disposeIntermediateTensorInfo(f),e.disposeIntermediateTensorInfo(d),e.disposeIntermediateTensorInfo(m),g}var Hie={kernelName:dh,backendName:"webgl",kernelFunc:Fze};N();var LD=class{constructor(t,e){this.variableNames=["A","indices"],this.outputShape=e,this.rank=e.length;let r=at(this.rank),o=Pze(t,2);this.userCode=`
      void main() {
        ${r} resRC = getOutputCoords();
        int index = int(getIndices(resRC.x, resRC.z));
        float inBounds = (index >= 0) && (index < ${t[2]}) ? 1.0 : 0.0;
        setOutput(inBounds * getA(${o}));
      }
    `}};function Pze(n,t){let e=["resRC.x","resRC.y","resRC.z","resRC.w"],r=[];for(let o=0;o<n.length;o++)o===2?r.push("index"):r.push(`${e[o]}`);return r.join()}function QL(n){let{inputs:t,backend:e,attrs:r}=n,{x:o,indices:s}=t,{axis:i,batchDims:a}=r,l=C.parseAxisParam(i,o.shape)[0];if(Y().get("DEBUG")){let b=e.readSync(s.dataId),w=o.shape[l];for(let v=0;v<b.length;++v){let S=b[v];C.assert(S<=w-1&&S>=0,()=>`GatherV2: the index value ${S} is not in [0, ${w-1}]`)}}let c=M.segment_util.collectGatherOpShapeInfo(o,s,l,a),u=C.sizeFromShape(s.shape),p=[],f=ye({inputs:{x:o},backend:e,attrs:{shape:[c.batchSize,c.outerSize,c.dimSize,c.sliceSize]}}),d=ye({inputs:{x:s},backend:e,attrs:{shape:[c.batchSize,u/c.batchSize]}});p.push(f),p.push(d);let h=[c.batchSize,c.outerSize,u/c.batchSize,c.sliceSize];if(e.shouldExecuteOnCPU([o,s])||o.dtype==="string"){let b=e.bufferSync(d),w=e.bufferSync(f),v=hoe(w,b,h);return p.forEach(S=>e.disposeIntermediateTensorInfo(S)),e.makeTensorInfo(c.outputShape,v.dtype,v.values)}let m=new LD(f.shape,h),g=e.runWebGLProgram(m,[f,d],f.dtype);p.push(g);let x=ye({inputs:{x:g},backend:e,attrs:{shape:c.outputShape}});return p.forEach(b=>e.disposeIntermediateTensorInfo(b)),x}var qie={kernelName:cu,backendName:"webgl",kernelFunc:QL};N();var $ze="return float(a > b);",Lze=`
  return vec4(greaterThan(a, b));
`,Bze=Ut({opSnippet:$ze,packedOpSnippet:Lze,cpuKernelImpl:moe,dtype:"bool"}),Kie={kernelName:of,backendName:"webgl",kernelFunc:Bze};N();var zze="return float(a >= b);",Vze=`
  return vec4(greaterThanEqual(a, b));
`,Uze=Ut({opSnippet:zze,packedOpSnippet:Vze,dtype:"bool",cpuKernelImpl:goe}),Xie={kernelName:_l,backendName:"webgl",kernelFunc:Uze};N();function jze(n){let{inputs:t,backend:e}=n,{input:r}=t;return RD(r,!0,e)}var Yie={kernelName:hh,backendName:"webgl",kernelFunc:jze};N();var Gze="return float(!isnan(x) && !isinf(x));",Wze=Le({opSnippet:Gze,dtype:"bool"}),Zie={kernelName:Al,backendName:"webgl",kernelFunc:Wze};N();var Hze="return float(isinf(x));",qze=Le({opSnippet:Hze,dtype:"bool"}),Qie={kernelName:Rl,backendName:"webgl",kernelFunc:qze};N();var Kze="return float(isnan(x));",Xze=Le({opSnippet:Kze,dtype:"bool"}),Jie={kernelName:Ml,backendName:"webgl",kernelFunc:Xze};N();var Yze="return float(a < b);",Zze=`
  return vec4(lessThan(a, b));
`,Qze=Ut({opSnippet:Yze,packedOpSnippet:Zze,cpuKernelImpl:xoe,dtype:"bool"}),eae={kernelName:sf,backendName:"webgl",kernelFunc:Qze};N();var Jze="return float(a <= b);",e3e=`
  return vec4(lessThanEqual(a, b));
`,t3e=Ut({opSnippet:Jze,packedOpSnippet:e3e,cpuKernelImpl:yoe,dtype:"bool"}),tae={kernelName:af,backendName:"webgl",kernelFunc:t3e};N();function n3e(n){let{backend:t,attrs:e}=n,{start:r,stop:o,num:s}=e,i=boe(r,o,s);return t.makeTensorInfo([i.length],"float32",i)}var nae={kernelName:gh,backendName:"webgl",kernelFunc:n3e};N();var r3e=Pi+`
  return x < 0.0 ? 0./0. : log(x);
`,o3e=`
  vec4 result = log(x);
  bvec4 isNaN = isnan(x);
  result.r = isNaN.r ? x.r : (x.r < 0.0 ? 0./0. : result.r);
  result.g = isNaN.g ? x.g : (x.g < 0.0 ? 0./0. : result.g);
  result.b = isNaN.b ? x.b : (x.b < 0.0 ? 0./0. : result.b);
  result.a = isNaN.a ? x.a : (x.a < 0.0 ? 0./0. : result.a);
  return result;
`,s3e=Le({opSnippet:r3e,packedOpSnippet:o3e,cpuKernelImpl:voe}),rae={kernelName:Ol,backendName:"webgl",kernelFunc:s3e};N();var i3e=Pi+`
  return log(1.0 + x);
`,a3e=Le({opSnippet:i3e}),oae={kernelName:Fl,backendName:"webgl",kernelFunc:a3e};N();var l3e="return float(a >= 1.0 && b >= 1.0);",c3e=`
  return vec4(
    vec4(greaterThanEqual(a, vec4(1.0))) *
    vec4(greaterThanEqual(b, vec4(1.0))));
`,u3e=Ut({opSnippet:l3e,packedOpSnippet:c3e,dtype:"bool"}),sae={kernelName:lf,backendName:"webgl",kernelFunc:u3e};N();var p3e="return float(!(x >= 1.0));",f3e=Le({opSnippet:p3e}),iae={kernelName:cf,backendName:"webgl",kernelFunc:f3e};N();var d3e="return float(a >= 1.0 || b >= 1.0);",h3e=`
  return min(
    vec4(greaterThanEqual(a, vec4(1.0))) +
    vec4(greaterThanEqual(b, vec4(1.0))),
    vec4(1.0));
`,m3e=Ut({opSnippet:d3e,packedOpSnippet:h3e,dtype:"bool"}),aae={kernelName:uf,backendName:"webgl",kernelFunc:m3e};N();var BD=class{constructor(t,e,r,o,s){this.variableNames=["x"],this.outputShape=[];let i=e,a=t[3]-1;this.outputShape=t;let l,c=`float(${r}) + float(${o}) * sum`;s===.5?l=`inversesqrt(${c})`:s===1?l=`1.0/(${c})`:l=`exp(log(${c}) * float(-${s}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];
        int d = coords[3];
        float x = getX(b, r, c, d);
        float sum = 0.0;
        for (int j = -${i}; j <= ${i}; j++) {
          int idx = d + j;
          if (idx >= 0 && idx <=  ${a}) {
            float z = getX(b, r, c, idx);
            sum += z * z;
          }
        }
        float val = x * ${l};
        setOutput(val);
      }
    `}};var zD=class{constructor(t,e,r,o,s){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;let i=e,a=t[3]-1;this.outputShape=t;let l,c=`float(${r}) + float(${o}) * sum`;s===.5?l=`inversesqrt(${c})`:s===1?l=`1.0/(${c})`:l=`exp(log(${c}) * float(-${s}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords.x;
        int r = coords.y;
        int c = coords.z;
        int d = coords.w;

        bool hasNextCol = d < ${this.outputShape[3]};
        bool hasNextRow = c < ${this.outputShape[2]};

        vec4 sum = vec4(0.);
        vec4 xFragAtOutputCoords = getX(b, r, c, d);

        vec4 xAtOutputCoords = vec4(
          getChannel(xFragAtOutputCoords, vec2(c, d)),
          hasNextCol ?
            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,
          hasNextRow ?
            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,
          (hasNextRow && hasNextCol) ?
            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0
        );

        int firstChannel = d - ${i};
        vec2 cache = vec2(0.);
        if(firstChannel >= 0){
          vec4 firstChannelFrag = getX(b, r, c, firstChannel);
          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));
            if(hasNextRow){
              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));
            }
        }

        ivec2 depth = ivec2(d, d + 1);
        for (int j = - ${i}; j <= ${i}; j++) {
          ivec2 idx = depth + j;
          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));
          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(${a}));

          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;
          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;

          if(depthInRange || depthPlusOneInRange){
            vec4 z = vec4(0.);
            vec4 xFragAtCurrentDepth;
            z.xz = cache.xy;
            if(depthPlusOneInRange && hasNextCol){
              xFragAtCurrentDepth = idx.y != d ?
                getX(b, r, c, idx.y) : xFragAtOutputCoords;
              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));
              if(hasNextRow){
                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));
              }
            }
            cache.xy = z.yw;
            sum += z * z;
          }
        }
        vec4 result = xAtOutputCoords * ${l};
        setOutput(result);
      }
    `}};var g3e=n=>{let{inputs:t,backend:e,attrs:r}=n,{x:o}=t,{depthRadius:s,bias:i,alpha:a,beta:l}=r,c=Y().getBool("WEBGL_PACK_NORMALIZATION")?new zD(o.shape,s,i,a,l):new BD(o.shape,s,i,a,l);return e.runWebGLProgram(c,[o],o.dtype)},lae={kernelName:pu,backendName:"webgl",kernelFunc:g3e};N();var VD=class{constructor(t,e,r,o,s){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=t,this.depth=t[3],this.depthRadius=e,this.bias=r,this.alpha=o,this.beta=s,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];

        float result = 0.0;
        for (int d = 0; d < ${this.depth}; ++d) {
          int depthBegin = int(max(0.0, float(d - ${e})));
          int depthEnd = int(min(float(${this.depth}),
              float(d + ${e} + 1)));

          const int MIN_DEPTH_BEGIN = 0;
          const int MAX_DEPTH_END = ${this.depth};

          float norm = 0.0;
          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd) {
              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);
            }
            else {
              break;
            }
          }

          norm = float(${o}) * norm + float(${r});

          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd){
              float dyi = -2.0 * float(${o})
                * float(${s})
                * getInputImage(b, r, c, k) * getOutputImage(b, r, c, d)
                / norm;
              if (k == d) {
                dyi += pow(norm, -1.0 * ${s});
              }
              if (k == coords[3]) {
                dyi *= getDy(b, r, c, d);
                result += dyi;
              }
            }
            else {
              break;
            }
          }
      }
      setOutput(result);
      }
    `}};var x3e=n=>{let{inputs:t,backend:e,attrs:r}=n,{x:o,y:s,dy:i}=t,{depthRadius:a,bias:l,alpha:c,beta:u}=r,p=new VD(o.shape,a,l,c,u);return e.runWebGLProgram(p,[o,s,i],o.dtype)},cae={kernelName:xh,backendName:"webgl",kernelFunc:x3e};N();N();N();function uae(n,t,e,r){let o=C.sizeFromShape(t),i=C.sizeFromShape(n.shape)/o,a=ye({inputs:{x:n},attrs:{shape:[i,o]},backend:r}),l=Fs(a,n.dtype,"max",r),c=ye({inputs:{x:l},attrs:{shape:e},backend:r});return r.disposeIntermediateTensorInfo(a),r.disposeIntermediateTensorInfo(l),c}function JL(n){let{inputs:t,backend:e,attrs:r}=n,{x:o}=t,{reductionIndices:s,keepDims:i}=r,a=o.shape.length,l=C.parseAxisParam(s,o.shape),c=l,u=M.getAxesPermutation(c,a),p=u!=null,f=e.shouldExecuteOnCPU([o]),d=o;if(p){if(f){let w=e.texData.get(d.dataId).values,v=new Array(a);for(let A=0;A<v.length;A++)v[A]=o.shape[u[A]];let S=og(w,o.shape,o.dtype,u,v);d=e.makeTensorInfo(v,o.dtype);let k=e.texData.get(d.dataId);k.values=S}else d=ed(o,u,e);c=M.getInnerMostAxes(c.length,a)}M.assertAxesAreInnerMostDims("max",c,a);let[h,m]=M.computeOutAndReduceShapes(d.shape,c),g=h;i&&(g=M.expandShapeToKeepDim(h,l));let x;if(f){let w=e.texData.get(d.dataId).values,v=woe(w,C.sizeFromShape(m),g,o.dtype);x=e.makeTensorInfo(g,o.dtype);let S=e.texData.get(x.dataId);S.values=v}else x=uae(d,m,g,e);return p&&e.disposeIntermediateTensorInfo(d),x}var pae={kernelName:fu,backendName:"webgl",kernelFunc:JL};N();var y3e=tb+`
  return max(a, b);
`,b3e=`
  vec4 result = vec4(max(a, b));
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+Os+`
  return result;
`,v3e=Ut({opSnippet:y3e,packedOpSnippet:b3e,cpuKernelImpl:Coe}),fae={kernelName:Pl,backendName:"webgl",kernelFunc:v3e};N();function w3e(n){let{inputs:t,backend:e,attrs:r}=n,{x:o}=t;Ic(o,"maxPool");let{filterSize:s,strides:i,pad:a,dimRoundingMode:l}=r,c=1;C.assert(M.eitherStridesOrDilationsAreOne(i,c),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${i} and dilations '${c}'`);let u=M.computePool2DInfo(o.shape,s,i,c,a,l);if(u.filterWidth===1&&u.filterHeight===1&&C.arraysEqual(u.inShape,u.outShape))return sr({inputs:{x:o},backend:e});let p=new _a(u,"max",!1);return e.runWebGLProgram(p,[o],o.dtype)}var dae={kernelName:du,backendName:"webgl",kernelFunc:w3e};N();function C3e(n){let{inputs:t,backend:e,attrs:r}=n,{x:o}=t,{filterSize:s,strides:i,pad:a,dataFormat:l,dimRoundingMode:c}=r,u=[1,1,1],p=M.computePool3DInfo(o.shape,s,i,u,a,c,l),f=new td(p,"max",!1);return e.runWebGLProgram(f,[o],o.dtype)}var hae={kernelName:hu,backendName:"webgl",kernelFunc:C3e};N();var UD=class{constructor(t){this.variableNames=["dy","maxPos"],this.outputShape=t.inShape;let e=t.strideHeight,r=t.strideWidth,o=t.dilationHeight,s=t.effectiveFilterHeight,i=t.effectiveFilterWidth,a=s-1-t.padInfo.top,l=i-1-t.padInfo.left,c=s*i-1;this.userCode=`
      const ivec2 pads = ivec2(${a}, ${l});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${s};
          wR += ${o}) {
          float dyR = float(dyRCorner + wR) / ${e}.0;

          if (dyR < 0.0 || dyR >= ${t.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${i}; wC++) {
            float dyC = float(dyCCorner + wC) / ${r}.0;

            if (dyC < 0.0 || dyC >= ${t.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);
            int maxPosValue = ${c} - int(getMaxPos(b, idyR, idyC, d));

            // Get the current value, check it against the value from the
            // position matrix.
            int curPosValue = wR * ${i} + wC;
            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

            dotProd += dyValue * mask;
          }
        }
        setOutput(dotProd);
      }
    `}},jD=class{constructor(t){this.variableNames=["dy","maxPos"],this.outputShape=t.inShape;let e=t.strideDepth,r=t.strideHeight,o=t.strideWidth,s=t.dilationDepth,i=t.dilationHeight,a=t.dilationWidth,l=t.effectiveFilterDepth,c=t.effectiveFilterHeight,u=t.effectiveFilterWidth,p=l-1-t.padInfo.front,f=c-1-t.padInfo.top,d=u-1-t.padInfo.left,h=l*c*u-1;this.userCode=`
      const ivec3 pads = ivec3(${p}, ${f}, ${d});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${l};
           wD += ${s}) {
          float dyD = float(dyDCorner + wD) / ${e}.0;

          if (dyD < 0.0 || dyD >= ${t.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${c};
              wR += ${i}) {
            float dyR = float(dyRCorner + wR) / ${r}.0;

            if (dyR < 0.0 || dyR >= ${t.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${u};
                wC += ${a}) {
              float dyC = float(dyCCorner + wC) / ${o}.0;

              if (dyC < 0.0 || dyC >= ${t.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);
              int maxPosValue = ${h} -
                  int(getMaxPos(batch, idyD, idyR, idyC, ch));

              // Get the current value, check it against the value from the
              // position matrix.
              int curPosValue =
                  wD * ${c} * ${u} +
                  wR * ${u} + wC;
              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

              dotProd += dyValue * mask;
            }
          }
        }
        setOutput(dotProd);
      }
    `}};function I3e(n){let{inputs:t,backend:e,attrs:r}=n,{dy:o,input:s}=t,i=s,{filterSize:a,strides:l,pad:c,dimRoundingMode:u}=r,p=[1,1,1],f=M.computePool3DInfo(i.shape,a,l,p,c,u),d=new td(f,"max",!0),h=e.runWebGLProgram(d,[i],i.dtype),m=new jD(f),g=e.runWebGLProgram(m,[o,h],i.dtype);return e.disposeIntermediateTensorInfo(h),g}var mae={kernelName:bh,backendName:"webgl",kernelFunc:I3e};N();function S3e(n){let{inputs:t,backend:e,attrs:r}=n,{dy:o,input:s,output:i}=t,a=s;Ic([s,i],"maxPoolGrad");let{filterSize:l,strides:c,pad:u,dimRoundingMode:p}=r,f=M.computePool2DInfo(a.shape,l,c,1,u,p),d=!0,h=new _a(f,"max",d),m=e.runWebGLProgram(h,[a],a.dtype),g=new UD(f),x=e.runWebGLProgram(g,[o,m],a.dtype);return e.disposeIntermediateTensorInfo(m),x}var gae={kernelName:yh,backendName:"webgl",kernelFunc:S3e};N();N();function xae(n,t,e,r){let o=new _a(e,"max",!1),s=r.runWebGLProgram(o,[n],"float32");o=new _a(e,"max",!0,!0,t);let i=r.runWebGLProgram(o,[n],"float32");return[s,i]}var yae={kernelName:vh,backendName:"webgl",kernelFunc:({inputs:n,attrs:t,backend:e})=>{let{x:r}=n,{filterSize:o,strides:s,pad:i,includeBatchInIndex:a}=t,l=e;C.assert(r.shape.length===4,()=>`Error in maxPool: input must be rank 4 but got rank ${r.shape.length}.`);let c=[1,1];C.assert(M.eitherStridesOrDilationsAreOne(s,c),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${s} and dilations '${c}'`);let u=M.computePool2DInfo(r.shape,o,s,c,i),[p,f]=xae(r,a,u,l);return[p,f]}};N();N();function bae(n,t,e,r){let o=C.sizeFromShape(t),i=C.sizeFromShape(n.shape)/o,a=ye({inputs:{x:n},attrs:{shape:[i,o]},backend:r}),l=Fs(a,"float32","mean",r),c=ye({inputs:{x:l},attrs:{shape:e},backend:r});return r.disposeIntermediateTensorInfo(a),r.disposeIntermediateTensorInfo(l),c}var vae={kernelName:mu,backendName:"webgl",kernelFunc:({inputs:n,attrs:t,backend:e})=>{let{x:r}=n,{keepDims:o,axis:s}=t,i=e,a=r.shape.length,l=C.parseAxisParam(s,r.shape),c=l,u=M.getAxesPermutation(c,a),p=u!=null,f=i.shouldExecuteOnCPU([r]),d=[],h=r;if(p){if(f){let v=i.texData.get(h.dataId).values,S=new Array(a);for(let $=0;$<S.length;$++)S[$]=r.shape[u[$]];let k=og(v,r.shape,r.dtype,u,S);h=i.makeTensorInfo(S,r.dtype);let A=i.texData.get(h.dataId);A.values=k}else h=ed(r,u,i);d.push(h),c=M.getInnerMostAxes(c.length,a)}M.assertAxesAreInnerMostDims("sum",c,a);let[m,g]=M.computeOutAndReduceShapes(h.shape,c),x=m;o&&(x=M.expandShapeToKeepDim(m,l));let b=bae(h,g,x,i);for(let w of d)i.disposeIntermediateTensorInfo(w);return b}};N();function T3e(n){let{inputs:t,backend:e,attrs:r}=n,{x:o}=t,{axis:s,keepDims:i}=r,a=o.shape.length,l=C.parseAxisParam(s,o.shape),c=l,u=M.getAxesPermutation(c,a),p=o;u!=null&&(p=Mn({inputs:{x:o},backend:e,attrs:{perm:u}}),c=M.getInnerMostAxes(c.length,o.shape.length)),M.assertAxesAreInnerMostDims("min",c,a);let[f,d]=M.computeOutAndReduceShapes(p.shape,c),h=C.sizeFromShape(d),m=ye({inputs:{x:p},backend:e,attrs:{shape:[-1,h]}}),g=Fs(m,m.dtype,"min",e),x;if(i){let b=M.expandShapeToKeepDim(f,l);x=ye({inputs:{x:g},backend:e,attrs:{shape:b}})}else x=ye({inputs:{x:g},backend:e,attrs:{shape:f}});return e.disposeIntermediateTensorInfo(m),e.disposeIntermediateTensorInfo(g),u!=null&&e.disposeIntermediateTensorInfo(p),x}var wae={kernelName:gu,backendName:"webgl",kernelFunc:T3e};N();var E3e=tb+`
  return min(a, b);
`,N3e=`
  vec4 result = vec4(min(a, b));
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+Os+`
  return result;
`,D3e=Ut({opSnippet:E3e,packedOpSnippet:N3e,cpuKernelImpl:Ioe}),Cae={kernelName:$l,backendName:"webgl",kernelFunc:D3e};N();var GD=class{constructor(t,e,r){this.variableNames=["x"],this.outputShape=e.map((u,p)=>u[0]+t[p]+u[1]);let o=t.length,s=at(o),i=e.map(u=>u[0]).join(","),a=e.map((u,p)=>u[0]+t[p]).join(","),l=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,o),c=r==="reflect"?0:1;if(o===1){this.userCode=`
        int start = ${i};
        int end = ${a};

        void main() {
          int outC = getOutputCoords();
          if (outC < start) {
            outC = start * 2 - outC - ${c};
          } else if(outC >= end) {
            outC = (end - 1) * 2 - outC + ${c};
          }
          setOutput(getX(outC - start));
        }
      `;return}this.userCode=`
      ${s} start = ${s}(${i});
      ${s} end = ${s}(${a});

      void main() {
        ${s} outC = getOutputCoords();
        for (int i = 0; i < ${o}; i++) {
          if (outC[i] < start[i]) {
            outC[i] = start[i] * 2 - outC[i] - ${c};
          } else if(outC[i] >= end[i]) {
            outC[i] = (end[i] - 1) * 2 - outC[i] + ${c};
          }
        }
        ${s} coords = outC - start;
        setOutput(getX(${l}));
      }
    `}};var WD=class{constructor(t,e,r){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e.map((h,m)=>h[0]+t[m]+h[1]);let o=t.length,s=at(o),i=e.map(h=>h[0]).join(","),a=e.map((h,m)=>h[0]+t[m]).join(","),l=or("rc",o),c=or("source",o),u=`${l[o-1]} < ${this.outputShape[o-1]}`,p=o===1?"source":`vec2(${c.slice(-2).join()})`,f=r==="reflect"?0:1,d="";if(o===1){let h=`
        ${s} source = rc;
        if (source < start) {
          source = start * 2 - source - ${f};
        } else if (source >= end) {
          source = (end - 1) * 2 - source + ${f};
        }
        source -= start;
      `;d=`
        ${s} rc = outputLoc;
        ${h}
        result[0] = getChannel(getX(${c.join()}), ${p});
        ${l[o-1]} += 1;
        if(${u}) {
          ${h}
          result[1] = getChannel(getX(${c.join()}), ${p});
        }
      `}else{let h=`
        ${s} source = rc;
        ${s} lt = ${s}(lessThan(source, start));
        ${s} gte = ${s}(greaterThanEqual(source, end));
        ${s} orig = 1 - (lt + gte);
        source = orig * source +
                lt * (start * 2 - source - ${f}) +
                gte * ((end - 1) * 2 - source + ${f});
        source -= start;
      `;d=`
        ${s} rc = outputLoc;
        ${h}
        result[0] = getChannel(getX(${c.join()}), ${p});
        ${l[o-1]} += 1;
        if(${u}) {
          ${h}
          result[1] = getChannel(getX(${c.join()}), ${p});
        }
        rc = outputLoc;
        ${l[o-2]} += 1;
        if(${l[o-2]} < ${this.outputShape[o-2]}) {
          ${h}
          result[2] = getChannel(getX(${c.join()}), ${p});
          ${l[o-1]} += 1;
          if(${u}) {
            ${h}
            result[3] = getChannel(getX(${c.join()}), ${p});
          }
        }
      `}this.userCode=`
      const ${s} start = ${s}(${i});
      const ${s} end = ${s}(${a});

      void main() {
        ${s} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${d}
        setOutput(result);
      }
    `}};var k3e=({inputs:n,backend:t,attrs:e})=>{let{x:r}=n,{paddings:o,mode:s}=e,i=Y().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new WD(r.shape,o,s):new GD(r.shape,o,s);return t.runWebGLProgram(i,[r],r.dtype)},Iae={kernelName:xu,backendName:"webgl",kernelFunc:k3e};N();var _3e=`if (b == 0.0) return NAN;
  return mod(a, b);`,A3e=`
  vec4 result = mod(a, b);
  bvec4 isNaN = equal(b, vec4(0.0));
  `+Os+`
  return result;
`,R3e=Ut({opSnippet:_3e,packedOpSnippet:A3e}),Sae={kernelName:Ll,backendName:"webgl",kernelFunc:R3e};N();var HD=class{constructor(t,e,r){this.variableNames=["probs"],this.customUniforms=[{name:"seed",type:"float"}],this.outputShape=[t,r],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];

        float r = random(seed);
        float cdf = 0.0;

        for (int i = 0; i < ${e-1}; i++) {
          cdf += getProbs(batch, i);

          if (r < cdf) {
            setOutput(float(i));
            return;
          }
        }

        // If no other event happened, last event happened.
        setOutput(float(${e-1}));
      }
    `}};N();N();var M3e=`
if (a == b) {
  return 1.0;
};
return a / b;`,O3e=`
  // vec4 one = vec4(equal(a, b));
  // return one + (vec4(1.0) - one) * a / b;
  vec4 result = a / b;
  if(a.x == b.x) {
    result.x = 1.;
  }
  if(a.y == b.y) {
    result.y = 1.;
  }
  if(a.z == b.z) {
    result.z = 1.;
  }
  if(a.w == b.w) {
    result.w = 1.;
  }

  return result;
`,eB=Ut({opSnippet:M3e,packedOpSnippet:O3e,checkOutOfBounds:!0}),Tae={kernelName:Il,backendName:"webgl",kernelFunc:eB};N();var Eae="return a - b;",tB=Ut({opSnippet:Eae,packedOpSnippet:Eae,supportsComplex:!0,cpuKernelImpl:Goe}),Nae={kernelName:ec,backendName:"webgl",kernelFunc:tB};function nB(n){let{inputs:t,backend:e,attrs:r}=n,{logits:o}=t,{dim:s}=r,i=C.parseAxisParam([s],o.shape),a=JL({inputs:{x:o},backend:e,attrs:{reductionIndices:i,keepDims:!1}}),l=M.expandShapeToKeepDim(a.shape,i),c=ye({inputs:{x:a},backend:e,attrs:{shape:l}}),u=tB({inputs:{a:o,b:c},backend:e}),p=YL({inputs:{x:u},backend:e}),f=sg({inputs:{x:p},backend:e,attrs:{axis:i,keepDims:!1}}),d=ye({inputs:{x:f},backend:e,attrs:{shape:l}}),h=eB({inputs:{a:p,b:d},backend:e});return e.disposeIntermediateTensorInfo(a),e.disposeIntermediateTensorInfo(c),e.disposeIntermediateTensorInfo(u),e.disposeIntermediateTensorInfo(p),e.disposeIntermediateTensorInfo(f),e.disposeIntermediateTensorInfo(d),h}var Dae={kernelName:Ou,backendName:"webgl",kernelFunc:nB};function F3e(n){let{inputs:t,backend:e,attrs:r}=n,{logits:o}=t,{numSamples:s,seed:i,normalized:a}=r,l=a?o:nB({inputs:{logits:o},backend:e,attrs:{dim:o.shape.length-1}}),c=l.shape[0],u=l.shape[1],p=new HD(c,u,s),f=[[i]],d=e.runWebGLProgram(p,[l],"int32",f);return a||e.disposeIntermediateTensorInfo(l),d}var kae={kernelName:wh,backendName:"webgl",kernelFunc:F3e};N();var P3e=Cr+`
  return -x;
`,$3e=`
  vec4 result = -x;
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`;function L3e(n){let{inputs:t,backend:e}=n,{x:r}=t;if(e.shouldExecuteOnCPU([r])){let s=e.texData.get(r.dataId),[i,a]=Toe(s.values,r.shape,r.dtype);return e.makeTensorInfo(a,r.dtype,i)}let o;return Y().getBool("WEBGL_PACK_UNARY_OPERATIONS")?o=new cs(r.shape,$3e):o=new to(r.shape,P3e),e.runWebGLProgram(o,[r],r.dtype)}var _ae={kernelName:yu,backendName:"webgl",kernelFunc:L3e};N();var B3e=Jr.nonMaxSuppressionV3Impl;function z3e(n){M.warn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");let{inputs:t,backend:e,attrs:r}=n,{boxes:o,scores:s}=t,{maxOutputSize:i,iouThreshold:a,scoreThreshold:l}=r,c=e.readSync(o.dataId),u=e.readSync(s.dataId),{selectedIndices:p}=B3e(c,u,i,a,l);return e.makeTensorInfo([p.length],"int32",new Int32Array(p))}var Aae={kernelName:Ch,backendName:"webgl",kernelFunc:z3e};N();var V3e=Jr.nonMaxSuppressionV4Impl;function U3e(n){M.warn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");let{inputs:t,backend:e,attrs:r}=n,{boxes:o,scores:s}=t,{maxOutputSize:i,iouThreshold:a,scoreThreshold:l,padToMaxOutputSize:c}=r,u=e.readSync(o.dataId),p=e.readSync(s.dataId),{selectedIndices:f,validOutputs:d}=V3e(u,p,i,a,l,c);return[e.makeTensorInfo([f.length],"int32",new Int32Array(f)),e.makeTensorInfo([],"int32",new Int32Array([d]))]}var Rae={kernelName:Ih,backendName:"webgl",kernelFunc:U3e};N();var j3e=Jr.nonMaxSuppressionV5Impl;function G3e(n){M.warn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");let{inputs:t,backend:e,attrs:r}=n,{boxes:o,scores:s}=t,{maxOutputSize:i,iouThreshold:a,scoreThreshold:l,softNmsSigma:c}=r,u=e.readSync(o.dataId),p=e.readSync(s.dataId),f=i,d=a,h=l,m=c,{selectedIndices:g,selectedScores:x}=j3e(u,p,f,d,h,m);return[e.makeTensorInfo([g.length],"int32",new Int32Array(g)),e.makeTensorInfo([x.length],"float32",new Float32Array(x))]}var Mae={kernelName:Sh,backendName:"webgl",kernelFunc:G3e};N();var qD=class{constructor(t,e,r,o){this.variableNames=["indices"],this.outputShape=[t,e],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int index = round(getIndices(coords.x));
        setOutput(mix(float(${o}), float(${r}),
                      float(index == coords.y)));
      }
    `}};var W3e=n=>{let{inputs:t,backend:e,attrs:r}=n,{indices:o}=t,{dtype:s,depth:i,onValue:a,offValue:l}=r,c=C.sizeFromShape(o.shape),u=new qD(c,i,a,l),p=ye({inputs:{x:o},backend:e,attrs:{shape:[c]}}),f=e.runWebGLProgram(u,[p],s);e.disposeIntermediateTensorInfo(p);let d=[...o.shape,i],h=ye({inputs:{x:f},backend:e,attrs:{shape:d}});return e.disposeIntermediateTensorInfo(f),h},Oae={kernelName:vu,backendName:"webgl",kernelFunc:W3e};N();N();function dC(n){let{inputs:t,backend:e}=n,{x:r}=t;if(r.dtype==="complex64"){let o=vp({inputs:{input:r},backend:e}),s=dC({inputs:{x:o},backend:e}),i=ag({inputs:{input:r},backend:e}),a=dC({inputs:{x:i},backend:e}),l=ps({inputs:{real:s,imag:a},backend:e});return e.disposeIntermediateTensorInfo(o),e.disposeIntermediateTensorInfo(s),e.disposeIntermediateTensorInfo(i),e.disposeIntermediateTensorInfo(a),l}else return wp({attrs:{shape:r.shape,dtype:r.dtype,value:r.dtype==="string"?"":0},backend:e})}var Fae={kernelName:$u,backendName:"webgl",kernelFunc:dC};function Pae(n){let{inputs:t,backend:e}=n,{x:r}=t;if(r.dtype==="string")throw new Error("onesLike is not supported under string dtype");if(r.dtype==="complex64"){let o=vp({inputs:{input:r},backend:e}),s=Pae({inputs:{x:o},backend:e}),i=ag({inputs:{input:r},backend:e}),a=dC({inputs:{x:i},backend:e}),l=ps({inputs:{real:s,imag:a},backend:e});return e.disposeIntermediateTensorInfo(o),e.disposeIntermediateTensorInfo(s),e.disposeIntermediateTensorInfo(i),e.disposeIntermediateTensorInfo(a),l}else return wp({attrs:{shape:r.shape,dtype:r.dtype,value:1},backend:e})}var $ae={kernelName:bu,backendName:"webgl",kernelFunc:Pae};N();function H3e(n){let{inputs:t,backend:e,attrs:r}=n,{axis:o}=r;if(t.length===1)return AD({inputs:{input:t[0]},backend:e,attrs:{dim:o}});let s=t[0].shape,i=t[0].dtype;t.forEach(u=>{C.assertShapesMatch(s,u.shape,"All tensors passed to stack must have matching shapes"),C.assert(i===u.dtype,()=>"All tensors passed to stack must have matching dtypes")});let a=[],l=t.map(u=>{let p=AD({inputs:{input:u},backend:e,attrs:{dim:o}});return a.push(p),p}),c=XL({inputs:l,backend:e,attrs:{axis:o}});return a.forEach(u=>e.disposeIntermediateTensorInfo(u)),c}var Lae={kernelName:wu,backendName:"webgl",kernelFunc:H3e};N();var KD=class{constructor(t,e,r){this.variableNames=["x"],this.customUniforms=[{name:"value",type:"float"}],this.outputShape=e.map((c,u)=>c[0]+t[u]+c[1]);let o=t.length,s=at(o),i=e.map(c=>c[0]).join(","),a=e.map((c,u)=>c[0]+t[u]).join(","),l=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,o);if(o===1){this.userCode=`
        int start = ${i};
        int end = ${a};

        void main() {
          int outC = getOutputCoords();
          if (outC < start || outC >= end) {
            setOutput(value);
          } else {
            setOutput(getX(outC - start));
          }
        }
      `;return}this.userCode=`
      ${s} start = ${s}(${i});
      ${s} end = ${s}(${a});

      void main() {
        ${s} outC = getOutputCoords();
        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {
          setOutput(value);
        } else {
          ${s} coords = outC - start;
          setOutput(getX(${l}));
        }
      }
    `}};var XD=class{constructor(t,e,r){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"value",type:"float"}],this.outputShape=e.map((m,g)=>m[0]+t[g]+m[1]);let o=t.length,s=at(o),i=e.map(m=>m[0]).join(","),a=e.map((m,g)=>m[0]+t[g]).join(","),l=or("rc",o),c=or("source",o),u=`${l[o-1]} < ${this.outputShape[o-1]}`,p=o===1?"source":`vec2(${c.slice(-2).join()})`,f=[`${s} rc = outputLoc;`,`${l[o-1]} += 1;
       if(${u}) {
      `,o===1?"":`}
       rc = outputLoc;
       ${l[o-2]} += 1;
       if(${l[o-2]} < ${this.outputShape[o-2]}) {`,o===1?"":`  ${l[o-1]} += 1;
         if(${u}) {`],d=o===1?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))",h="";for(let m=0,g=o===1?2:4;m<g;m++)h+=`
        ${f[m]}
        if (${d}) {
          result[${m}] = float(value);
        } else {
          ${s} source = rc - start;
          result[${m}] = getChannel(getX(${c.join()}), ${p});
        }
      `;h+=o===1?"} ":"}}",this.userCode=`
      const ${s} start = ${s}(${i});
      const ${s} end = ${s}(${a});

      void main() {
        ${s} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${h}
        setOutput(result);
      }
    `}};var rB=n=>{let{inputs:t,backend:e,attrs:r}=n,{x:o}=t,{paddings:s,constantValue:i}=r;if(C.sizeFromShape(o.shape)===0){let c=s.map((u,p)=>u[0]+o.shape[p]+u[1]);return wp({backend:e,attrs:{shape:c,value:i,dtype:o.dtype}})}let a=Y().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new XD(o.shape,s,i):new KD(o.shape,s,i),l=[[i]];return e.runWebGLProgram(a,[o],o.dtype,l)},Bae={kernelName:Cu,backendName:"webgl",kernelFunc:rB};N();var q3e=`
  if(a < 0.0 && floor(b) < b){
    return NAN;
  }
  if (b == 0.0) {
    return 1.0;
  }
  return (round(mod(b, 2.0)) != 1) ?
      pow(abs(a), b) : sign(a) * pow(abs(a), b);
`,K3e=`
  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.
  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));
  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);
  vec4 result = multiplier * pow(abs(a), b);

  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS
  bvec4 isExpZero = equal(b, vec4(0.0));
  result.r = isExpZero.r ? 1.0 : result.r;
  result.g = isExpZero.g ? 1.0 : result.g;
  result.b = isExpZero.b ? 1.0 : result.b;
  result.a = isExpZero.a ? 1.0 : result.a;

  bvec4 isNaN1 = lessThan(a, vec4(0.0));
  bvec4 isNaN2 = lessThan(floor(b), b);
  bvec4 isNaN = bvec4(isNaN1.x && isNaN2.x, isNaN1.y && isNaN2.y, isNaN1.z && isNaN2.z, isNaN1.w && isNaN2.w);
  `+Os+`
  return result;
`,X3e=Ut({opSnippet:q3e,packedOpSnippet:K3e}),zae={kernelName:zl,backendName:"webgl",kernelFunc:X3e};N();function Y3e(n){let{inputs:t,backend:e,attrs:r}=n,{x:o}=t,{axis:s,keepDims:i}=r,a=o.shape.length,l=[],c=C.parseAxisParam(s,o.shape),u=c,p=M.getAxesPermutation(u,a),f=o;p!=null&&(f=Mn({inputs:{x:o},backend:e,attrs:{perm:p}}),u=M.getInnerMostAxes(u.length,a),l.push(f)),M.assertAxesAreInnerMostDims("prod",u,a);let d;if(e.shouldExecuteOnCPU([f])){let h=e.texData.get(f.dataId).values,{outVals:m,outShape:g,outDtype:x}=Noe(f.shape,f.dtype,h,u);d=e.makeTensorInfo(g,x,m)}else{let[h,m]=M.computeOutAndReduceShapes(f.shape,u),g=C.sizeFromShape(m),x=ye({inputs:{x:f},backend:e,attrs:{shape:[-1,g]}}),b=yf(o.dtype),w=Fs(x,b,"prod",e);d=ye({inputs:{x:w},backend:e,attrs:{shape:h}}),l.push(x),l.push(w)}if(i){l.push(d);let h=M.expandShapeToKeepDim(d.shape,c);d=ye({inputs:{x:d},backend:e,attrs:{shape:h}})}return l.forEach(h=>e.disposeIntermediateTensorInfo(h)),d}var Vae={kernelName:Su,backendName:"webgl",kernelFunc:Y3e};N();function Z3e(n){let{inputs:t,backend:e,attrs:r}=n,{paramsNestedSplits:o,paramsDenseValues:s,indices:i}=t,{outputRaggedRank:a}=r,l=o.map(x=>e.readSync(x.dataId)),c=o.map(x=>x.shape),u=e.readSync(s.dataId),p=e.readSync(i.dataId),[f,d,h]=Doe(l,c,u,s.shape,s.dtype,p,i.shape,a),m=f.map(x=>e.makeTensorInfo([x.length],"int32",x)),g=e.makeTensorInfo(h,s.dtype,d);return m.concat([g])}var Uae={kernelName:Th,backendName:"webgl",kernelFunc:Z3e};N();function Q3e(n){let{inputs:t,backend:e}=n,{starts:r,limits:o,deltas:s}=t,i=e.readSync(r.dataId),a=e.readSync(o.dataId),l=e.readSync(s.dataId),[c,u]=koe(i,r.shape,r.dtype,a,o.shape,l,s.shape),p=e.makeTensorInfo([c.length],"int32",c),f=e.makeTensorInfo([u.length],r.dtype,u);return[p,f]}var jae={kernelName:Eh,backendName:"webgl",kernelFunc:Q3e};N();function J3e(n){let{inputs:t,backend:e,attrs:r}=n,{shape:o,values:s,defaultValue:i,rowPartitionTensors:a}=t,{rowPartitionTypes:l}=r,c=e.readSync(o.dataId),u=e.readSync(s.dataId),p=e.readSync(i.dataId),f=a.map(g=>e.readSync(g.dataId)),d=a.map(g=>g.shape),[h,m]=_oe(c,o.shape,u,s.shape,s.dtype,p,i.shape,f,d,l);return e.makeTensorInfo(h,s.dtype,m)}var Gae={kernelName:Nh,backendName:"webgl",kernelFunc:J3e};N();var oB=n=>{let{backend:t,attrs:e}=n,{start:r,stop:o,step:s,dtype:i}=e,a=Aoe(r,o,s,i);return t.makeTensorInfo([a.length],i,a)},Wae={kernelName:Dh,backendName:"webgl",kernelFunc:oB};N();var eVe="return 1.0 / x;",tVe=Le({opSnippet:eVe}),Hae={kernelName:Vl,backendName:"webgl",kernelFunc:tVe};N();var nVe=Cr+`
  return (x < 0.0) ? 0.0 : x;
`,rVe=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,oVe=Le({opSnippet:nVe,packedOpSnippet:rVe}),qae={kernelName:Ul,backendName:"webgl",kernelFunc:oVe};N();var sVe=Cr+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,iVe=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,aVe=Le({opSnippet:sVe,packedOpSnippet:iVe}),Kae={kernelName:jl,backendName:"webgl",kernelFunc:aVe};N();var YD=class{constructor(t,e,r,o,s){this.variableNames=["A"],this.outputShape=[];let[i,a,l,c]=t;this.outputShape=[i,e,r,c];let u=[o&&e>1?a-1:a,o&&r>1?l-1:l],p=[o&&e>1?e-1:e,o&&r>1?r-1:r],f;s?f="(vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC - vec2(0.5)":f="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${u[0]/p[0]},
          ${u[1]/p[1]});
      const vec2 inputShapeRC = vec2(${a}.0, ${l}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${f};

        // Compute the four integer indices.
        ivec2 sourceFloorRC = ivec2(max(sourceFracIndexRC, vec2(0.0)));
        ivec2 sourceCeilRC = ivec2(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);
        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);
        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);
        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);

        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);

        float top = topLeft + (topRight - topLeft) * fracRC.y;
        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;
        float newValue = top + (bottom - top) * fracRC.x;

        setOutput(newValue);
      }
    `}};var ZD=class{constructor(t,e,r,o,s){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];let[i,a,l,c]=t;this.outputShape=[i,e,r,c];let u=[o&&e>1?a-1:a,o&&r>1?l-1:l],p=[o&&e>1?e-1:e,o&&r>1?r-1:r],f;s?f="(vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC - vec3(0.5)":f="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${u[0]/p[0]},
          ${u[1]/p[1]},
          ${u[1]/p[1]});
      const vec3 inputShapeRC = vec3(${a}.0, ${l}.0,
                                     ${l}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${f};

        // Compute the four integer indices.
        ivec3 sourceFloorRC = ivec3(max(sourceFracIndexRC, vec3(0.0)));
        ivec3 sourceCeilRC = ivec3(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${c-1};
        bool hasNextRow = coords.z < ${r-1};

        // In parallel, construct four corners for all four components in
        // packed 2x2 cell.
        vec4 topLeft = vec4(
          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 bottomLeft = vec4(
          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 topRight = vec4(
          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec4 bottomRight = vec4(
          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);

        vec4 top = mix(topLeft, topRight, fracRC.yyzz);
        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);
        vec4 newValue = mix(top, bottom, fracRC.x);

        setOutput(newValue);
      }
    `}};function lVe(n){let{inputs:t,backend:e,attrs:r}=n,{images:o}=t,{alignCorners:s,halfPixelCenters:i,size:a}=r,[l,c]=a,u=Y().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new ZD(o.shape,l,c,s,i):new YD(o.shape,l,c,s,i);return e.runWebGLProgram(u,[o],"float32")}var Xae={kernelName:Nu,backendName:"webgl",kernelFunc:lVe};N();var QD=class{constructor(t,e,r){this.variableNames=["dy"],this.outputShape=[],this.outputShape=e;let[,o,s]=e,[,i,a]=t,l=[r&&i>1?o-1:o,r&&a>1?s-1:s],c=[r&&i>1?i-1:i,r&&a>1?a-1:a],u=l[0]/c[0],p=l[1]/c[1],f=1/u,d=1/p,h=Math.ceil(f)*2+2,m=Math.ceil(d)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${u});
        const float widthScale = float(${p});

        const float invHeightScale = float(${f});
        const float invWidthScale = float(${d});

        const int winHeight = int(${h});
        const int winWidth = int(${m});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(startRLerp - float(winHeight / 2));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(startCLerp - float(winWidth / 2));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${i}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${a}) {
              continue;
            }

            float dxR = float(dyR) * heightScale;
            int topDxRIndex = int(floor(dxR));
            int bottomDxRIndex = int(min(ceil(dxR), ${o-1}.0));
            float dxRLerp = dxR - float(topDxRIndex);
            float inverseDxRLerp = 1.0 - dxRLerp;

            float dxC = float(dyC) * widthScale;
            int leftDxCIndex = int(floor(dxC));
            int rightDxCIndex = int(min(ceil(dxC), ${s-1}.0));
            float dxCLerp = dxC - float(leftDxCIndex);
            float inverseDxCLerp = 1.0 - dxCLerp;

            if (r == topDxRIndex && c == leftDxCIndex) {
              // topLeft
              accumulator +=
                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;
            }

            if (r == topDxRIndex && c == rightDxCIndex) {
              // topRight
              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;
            }

            if (r == bottomDxRIndex && c == leftDxCIndex) {
              // bottomLeft
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;
            }

            if (r == bottomDxRIndex && c == rightDxCIndex) {
              // bottomRight
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}};function cVe(n){let{inputs:t,backend:e,attrs:r}=n,{images:o,dy:s}=t,{alignCorners:i}=r,a=new QD(s.shape,o.shape,i);return e.runWebGLProgram(a,[s],s.dtype)}var Yae={kernelName:Ah,backendName:"webgl",kernelFunc:cVe};N();var JD=class{constructor(t,e,r,o,s){this.variableNames=["A"],this.outputShape=[];let[i,a,l,c]=t;this.outputShape=[i,e,r,c];let u=[o&&e>1?a-1:a,o&&r>1?l-1:l],p=[o&&e>1?e-1:e,o&&r>1?r-1:r],f=o?"0.5":"0.0",d;s?d="max((vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC, vec2(0.0))":d="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${u[0]/p[0]},
          ${u[1]/p[1]});
      const vec2 inputShapeRC = vec2(${a}.0, ${l}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${d};

        // Compute the coordinators of nearest neighbor point.
        ivec2 sourceNearestRC = ivec2(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${f})));
        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);

        setOutput(newValue);
      }
    `}};var ek=class{constructor(t,e,r,o,s){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];let[i,a,l,c]=t;this.outputShape=[i,e,r,c];let u=[o&&e>1?a-1:a,o&&r>1?l-1:l],p=[o&&e>1?e-1:e,o&&r>1?r-1:r],f=o?"0.5":"0.0",d;s?d="max((vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC, vec3(0.0))":d="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${u[0]/p[0]},
          ${u[1]/p[1]},
          ${u[1]/p[1]});
      const vec3 inputShapeRC = vec3(${a}.0, ${l}.0,
                                     ${l}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${d};

        // Compute the coordinators of nearest neighbor point.
        ivec3 sourceNearestRC = ivec3(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${f})));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${c-1};
        bool hasNextRow = coords.z < ${r-1};

        vec4 newValue = vec4(
          getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d),
          hasNextCol ? getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d + 1) : 0.0);

        setOutput(newValue);
      }
    `}};function uVe(n){let{inputs:t,backend:e,attrs:r}=n,{images:o}=t,{alignCorners:s,halfPixelCenters:i,size:a}=r,[l,c]=a,u=Y().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new ek(o.shape,l,c,s,i):new JD(o.shape,l,c,s,i);return e.runWebGLProgram(u,[o],o.dtype)}var Zae={kernelName:Eu,backendName:"webgl",kernelFunc:uVe};N();var tk=class{constructor(t,e,r){this.variableNames=["dy"],this.outputShape=[],this.outputShape=e;let[,o,s]=e,[,i,a]=t,l=[r&&i>1?o-1:o,r&&a>1?s-1:s],c=[r&&i>1?i-1:i,r&&a>1?a-1:a],u=l[0]/c[0],p=l[1]/c[1],f=1/u,d=1/p,h=Math.ceil(f)*2+2,m=Math.ceil(d)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${u});
        const float widthScale = float(${p});

        const float invHeightScale = float(${f});
        const float invWidthScale = float(${d});

        const int winHeight = int(${h});
        const int winWidth = int(${m});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(floor(startRLerp - float(winHeight / 2)));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(floor(startCLerp - float(winWidth / 2)));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${i}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${a}) {
              continue;
            }

            float sourceFracRow =
              float(${l[0]}) *
                (float(dyR) / float(${c[0]}));

            float sourceFracCol =
                float(${l[1]}) *
                  (float(dyC) / float(${c[1]}));

            int sourceNearestRow = int(min(
                float(int(${o}) - 1),
                ${r} ? float(round(sourceFracRow)) :
                                  float(floor(sourceFracRow))));

            int sourceNearestCol = int(min(
                float(int(${s}) - 1),
                ${r} ? float(round(sourceFracCol)) :
                                  float(floor(sourceFracCol))));

            if (r == sourceNearestRow && c == sourceNearestCol) {
              accumulator += getDy(b, dyR, dyC, d);
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}};function pVe(n){let{inputs:t,backend:e,attrs:r}=n,{images:o,dy:s}=t,{alignCorners:i}=r,a=new tk(s.shape,o.shape,i);return e.runWebGLProgram(a,[s],s.dtype)}var Qae={kernelName:_h,backendName:"webgl",kernelFunc:pVe};N();var nk=class{constructor(t,e){this.variableNames=["x"];let r=t.length;if(r>4)throw new Error(`WebGL backend: Reverse of rank-${r} tensor is not yet supported`);if(this.outputShape=t,r===1){this.userCode=`
        void main() {
          int coord = getOutputCoords();
          setOutput(getX(${t[0]} - coord - 1));
        }
      `;return}let o=a=>e.indexOf(a)!==-1&&t[a]!==1?`${t[a]} - coords[${a}] - 1`:`coords[${a}]`,s=t.map((a,l)=>o(l)).join(","),i=at(r);this.userCode=`
      void main() {
        ${i} coords = getOutputCoords();
        setOutput(getX(${s}));
      }
    `}};var rk=class{constructor(t,e){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;let r=t.length;if(r>4)throw new Error(`WebGL backend: Reverse of rank-${r} tensor is not yet supported`);this.outputShape=t;let o=or("rc",r),s=`${o[r-1]} + 1 < ${this.outputShape[r-1]}`,i=`${o[r-2]} + 1 < ${this.outputShape[r-2]}`,a=at(r);r===1?this.userCode=`
        void main(){
          int rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = getChannel(getX(${t[0]} - rc - 1),
            ${t[0]} - rc - 1);
          if(${s}){
              result.g = getChannel(getX(${t[0]} - (rc  + 1) - 1),
                ${t[0]} - (rc  + 1) - 1);
          }
          setOutput(result);
        }
      `:this.userCode=`
        void main() {
          ${a} rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = ${l(o.slice())};
          if(${s}){
            result.g = ${c(o.slice())};
          }
          if(${i}) {
            result.b = ${u(o.slice())};
            if(${s}) {
              result.a = ${p(o.slice())};
            }
          }
          setOutput(result);
        }
    `;function l(h){return f(h)}function c(h){return h[r-1]="("+h[r-1]+" + 1)",f(h)}function u(h){return h[r-2]="("+h[r-2]+" + 1)",f(h)}function p(h){return h[r-1]="("+h[r-1]+" + 1)",h[r-2]="("+h[r-2]+" + 1)",f(h)}function f(h){let m=t.map((b,w)=>d(w,h)),g=m.join(","),x=m.slice(-2).join(",");return`getChannel(getX(${g}), vec2(${x}))`}function d(h,m){return e.indexOf(h)!==-1&&t[h]!==1?`${t[h]} - ${m[h]} - 1`:`${m[h]}`}}};function fVe(n){let{inputs:t,backend:e,attrs:r}=n,{x:o}=t,{dims:s}=r,i=o.shape.length,a=C.parseAxisParam(s,o.shape);if(i===0)return sr({inputs:{x:o},backend:e});let l=Y().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new rk(o.shape,a):new nk(o.shape,a);return e.runWebGLProgram(l,[o],o.dtype)}var Jae={kernelName:Du,backendName:"webgl",kernelFunc:fVe};N();N();var ok=class{constructor(t,e){this.variableNames=["Image"],this.outputShape=[],this.customUniforms=[{name:"params",type:"vec4"}];let r=t[1],o=t[2];this.outputShape=t;let s="";typeof e=="number"?s=`float outputValue = ${e.toFixed(2)};`:s=`
        vec3 fill = vec3(${e.join(",")});
        float outputValue = fill[coords[3]];`,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];
          int y = coords[1];
          float coordXFloat = (float(x) - params[0]) * params[3] -
            (float(y) - params[1]) * params[2];
          float coordYFloat = (float(x) - params[0]) * params[2] +
            (float(y) - params[1]) * params[3];
          int coordX = int(round(coordXFloat + params[0]));
          int coordY = int(round(coordYFloat + params[1]));
          ${s}
          if(coordX >= 0 && coordX < ${o} && coordY >= 0 && coordY < ${r}) {
            outputValue = getImage(coords[0], coordY, coordX, coords[3]);
          }
          setOutput(outputValue);
        }
    `}};var ele={kernelName:Kh,backendName:"webgl",kernelFunc:({inputs:n,attrs:t,backend:e})=>{let{image:r}=n,{radians:o,fillValue:s,center:i}=t,a=e,l=new ok(r.shape,s),[c,u]=M.getImageCenter(i,r.shape[1],r.shape[2]),p=[[c,u,Math.sin(o),Math.cos(o)]];return a.runWebGLProgram(l,[r],r.dtype,p)}};N();var dVe=`
  // OpenGL ES does not support round function.
  // The algorithm is based on banker's rounding.
  float base = floor(x);
  if ((x - base) < 0.5) {
    return floor(x);
  } else if ((x - base) > 0.5) {
    return ceil(x);
  } else {
    if (mod(base, 2.0) == 0.0) {
      return base;
    } else {
      return base + 1.0;
    }
  }
`,hVe=Le({opSnippet:dVe}),tle={kernelName:Gl,backendName:"webgl",kernelFunc:hVe};N();var mVe="return inversesqrt(x);",gVe=Le({opSnippet:mVe,cpuKernelImpl:Roe}),nle={kernelName:Wl,backendName:"webgl",kernelFunc:gVe};N();var nd=class{constructor(t,e,r,o,s,i,a=!0,l=!1){this.variableNames=["updates","indices","defaultValue"],this.outputShape=i;let c=at(s.length),u=at(i.length),p="";r===1?p="i":r===2&&(p="i, j");let f=`getIndices(${p})`,d="";o===1?d="i":o===2&&(d="i, coords[1]");let h=`getUpdates(${d})`,m="";l&&(m="coords[0], coords[1]");let g=`getDefaultValue(${m})`,x=e>1?"strides[j]":"strides";this.userCode=`
        ${c} strides = ${c}(${s});

        void main() {
          ${u} coords = getOutputCoords();
          float sum = 0.0;
          bool found = false;
          for (int i = 0; i < ${t}; i++) {
            int flattenedIndex = 0;
            for (int j = 0; j < ${e}; j++) {
              int index = round(${f});
              flattenedIndex += index * ${x};
            }
            if (flattenedIndex == coords[0]) {
              sum += ${h};
              found = true;
            }
          }
          setOutput(mix(${g}, sum, float(found)));
        }
      `}};var sk=class{constructor(t,e,r,o,s,i,a=!0,l=!1){this.variableNames=["updates","indices","defaultValue"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=i;let c=at(s.length),u=at(i.length),p="";r===1?p="i":r===2&&(p="i, j");let f=`getIndices(${p})`,d="";o===1?d="i":o===2&&(d="i, coords[1]");let h=`getUpdates(${d})`,m="";l&&(m="coords[0], coords[1]");let g=`getDefaultValue(${m})`,x=e>1?"strides[j]":"strides",b=e>1?"strides[j + 1]":"strides";this.userCode=`
        ${c} strides = ${c}(${s});

        void main() {
          ${u} coords = getOutputCoords();
          vec4 sum = vec4(0.);
          vec4 found = vec4(0.);
          for (int i = 0; i < ${t}; i+=2) {
            ivec2 flattenedIndex = ivec2(0);
            for (int j = 0; j < ${e}; j+=2) {
              ivec4 index = round(${f});
              flattenedIndex += index.xz * ${x};
              if (j + 1 < ${e}) {
                flattenedIndex += index.yw * ${b};
              }
            }
            if (flattenedIndex[0] == coords[0] || flattenedIndex[1] == coords[0] ||
                flattenedIndex[0] == coords[0] + 1 || flattenedIndex[1] == coords[0] + 1) {
              vec4 updVals = ${h};
              if (flattenedIndex[0] == coords[0]) {
                sum.xy += updVals.xy;
                found.xy = vec2(1.);
              } else if (flattenedIndex[0] == coords[0] + 1) {
                sum.zw += updVals.xy;
                found.zw = vec2(1.);
              }
              if (flattenedIndex[1] == coords[0]) {
                sum.xy += updVals.zw;
                found.xy = vec2(1.);
              } else if (flattenedIndex[1] == coords[0] + 1) {
                sum.zw += updVals.zw;
                found.zw = vec2(1.);
              }
            }
          }
          setOutput(mix(${g}, sum, found));
        }
      `}};function xVe(n){let{inputs:t,backend:e,attrs:r}=n,{indices:o,updates:s}=t,{shape:i}=r,{sliceRank:a,numUpdates:l,sliceSize:c,strides:u,outputSize:p}=M.calculateShapes(s,o,i),f=[p/c,c];if(p===0)return e.makeTensorInfo(i,o.dtype);let d=ye({inputs:{x:o},backend:e,attrs:{shape:[l,a]}}),h=ye({inputs:{x:s},backend:e,attrs:{shape:[l,c]}}),m=e.makeTensorInfo([],"float32",new Float32Array([0])),g;Y().getBool("WEBGL_PACK")?g=new sk(l,a,d.shape.length,h.shape.length,u,f):g=new nd(l,a,d.shape.length,h.shape.length,u,f);let x=e.runWebGLProgram(g,[h,d,m],h.dtype),b=ye({inputs:{x},backend:e,attrs:{shape:i}});return e.disposeIntermediateTensorInfo(d),e.disposeIntermediateTensorInfo(h),e.disposeIntermediateTensorInfo(x),e.disposeIntermediateTensorInfo(m),b}var rle={kernelName:Rh,backendName:"webgl",kernelFunc:xVe};N();N();var ik=class{constructor(t,e,r,o){this.variableNames=["sortedSequence","values"],this.customUniforms=[{name:"numInputs",type:"int"}],this.outputShape=[t,r];let s="while (left < right) {",i=`for (int i = 0; i < ${Math.ceil(Math.log2(e+1))}; ++i) { if (left >= right) break;`,a=Y().getNumber("WEBGL_VERSION")===2?s:i,l=o==="left"?"<":"<=";this.userCode=`
       int findBound(int batch, float value) {
         int left = 0;
         int right = numInputs;
         int mid;
         ${a}
           mid = (left + right) / 2;
           if (getSortedSequence(batch, mid) ${l} value) {
             left = mid + 1;
           } else {
             right = mid;
           }
         }
         return right;
       }

       void main() {
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int valueIndex = coords[1];

         float value = getValues(batch, valueIndex);

         setOutput(float(findBound(batch, value)));
       }
     `}};function yVe(n){let{inputs:t,backend:e,attrs:r}=n,{sortedSequence:o,values:s}=t,{side:i}=r,a=new ik(o.shape[0],o.shape[1],s.shape[1],i),l=[[o.shape[1]]];return e.runWebGLProgram(a,[o,s],"int32",l)}var ole={kernelName:Oh,backendName:"webgl",kernelFunc:yVe};N();var ak=class{constructor(t,e,r){this.variableNames=["c","a","b"],this.outputShape=e;let o,s;if(r>4)throw Error(`Where for rank ${r} is not yet supported`);if(r===1)s="resRC",o="resRC";else{let a=["resRC.x","resRC.y","resRC.z","resRC.w"],l=[],c=[];for(let u=0;u<e.length;u++)c.push(`${a[u]}`),u<t&&l.push(`${a[u]}`);o=l.join(),s=c.join()}let i=at(r);this.userCode=`
      void main() {
        ${i} resRC = getOutputCoords();
        float cVal = getC(${o});
        if (cVal >= 1.0) {
          setOutput(getA(${s}));
        } else {
          setOutput(getB(${s}));
        }
      }
    `}};function bVe(n){let{inputs:t,backend:e}=n,{condition:r,t:o,e:s}=t,i=new ak(r.shape.length,o.shape,o.shape.length);return e.runWebGLProgram(i,[r,o,s],ar(o.dtype,s.dtype))}var sle={kernelName:ku,backendName:"webgl",kernelFunc:bVe};N();var vVe=`
  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.
  // see: https://arxiv.org/abs/1706.02515
  float scaleAlpha = ${M.SELU_SCALEALPHA};
  float scale = ${M.SELU_SCALE};
  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);
`,wVe=Le({opSnippet:vVe}),ile={kernelName:Hl,backendName:"webgl",kernelFunc:wVe};N();var CVe=Pi+`
  return 1.0 / (1.0 + exp(-1.0 * x));
`,IVe=`
  vec4 result = 1.0 / (1.0 + exp(-1.0 * x));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,SVe=Le({opSnippet:CVe,packedOpSnippet:IVe,cpuKernelImpl:Ooe}),ale={kernelName:Yl,backendName:"webgl",kernelFunc:SVe};N();var TVe=`
  if (isnan(x)) { return 0.0; }
  return sign(x);
`,EVe=Le({opSnippet:TVe}),lle={kernelName:Xl,backendName:"webgl",kernelFunc:EVe};N();var NVe=Pi+`
  return sin(x);
`,DVe=`
  vec4 result = sin(x);
  bvec4 isNaN = isnan(x);
  ${Os}
  return result;
`,kVe=Le({opSnippet:NVe,packedOpSnippet:DVe}),cle={kernelName:ql,backendName:"webgl",kernelFunc:kVe};N();var _Ve=`
  float e2x = exp(x);
  return (e2x - 1.0 / e2x) / 2.0;
`,AVe=Le({opSnippet:_Ve}),ule={kernelName:Kl,backendName:"webgl",kernelFunc:AVe};N();var RVe=`
  float epsilon = 1.1920928955078125e-7;
  float threshold = log(epsilon) + 2.0;

  bool too_large = x > -threshold;
  bool too_small = x < threshold;

  float result;
  float exp_x = exp(x);

  if (too_large){
    result = x;
  }
  else if (too_small){
    result = exp_x;
  }
  else{
    result = log(exp_x + 1.0);
  }
  return result;
`,MVe=Le({opSnippet:RVe}),ple={kernelName:Zl,backendName:"webgl",kernelFunc:MVe};N();var OVe=n=>{let{inputs:t,backend:e,attrs:r}=n,{x:o}=t,{blockShape:s,paddings:i}=r;C.assert(o.shape.length<=4,()=>"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet");let a=s.reduce((x,b)=>x*b),l=[[0,0]];l.push(...i);for(let x=1+s.length;x<o.shape.length;++x)l.push([0,0]);let c=[],u=rB({inputs:{x:o},backend:e,attrs:{paddings:l,constantValue:0}}),p=M.getReshaped(u.shape,s,a,!1),f=M.getPermuted(p.length,s.length,!1),d=M.getReshapedPermuted(u.shape,s,a,!1),h=ye({inputs:{x:u},backend:e,attrs:{shape:p}}),m=Mn({inputs:{x:h},backend:e,attrs:{perm:f}}),g=ye({inputs:{x:m},backend:e,attrs:{shape:d}});return c.push(u),c.push(h),c.push(m),c.forEach(x=>e.disposeIntermediateTensorInfo(x)),g},fle={kernelName:Ru,backendName:"webgl",kernelFunc:OVe};N();function FVe(n){let{inputs:t,backend:e}=n,{indices:r,values:o,denseShape:s,defaultValue:i}=t;if(s.shape.length!==1)throw new Error(`Dense shape must be a vector, saw:
         ${s.shape}`);if(r.shape.length!==2)throw new Error(`Indices must be a matrix, saw:
         ${r.shape}`);if(o.shape.length!==1)throw new Error(`Values must be a vector, saw:
         ${o.shape}`);if(i.shape.length!==0)throw new Error(`Default value must be a scalar, saw:
        ${i.shape}`);let a=e.readSync(r.dataId),l=e.readSync(o.dataId),c=e.readSync(s.dataId),u=e.readSync(i.dataId)[0],[p,f,d,h,m]=Poe(a,r.shape,r.dtype,l,o.dtype,c,u);return[e.makeTensorInfo(f,r.dtype,p),e.makeTensorInfo([f[0]],o.dtype,d),e.makeTensorInfo([h.length],"bool",new Uint8Array(h.map(g=>Number(g)))),e.makeTensorInfo([m.length],r.dtype,new Int32Array(m))]}var dle={kernelName:Fh,backendName:"webgl",kernelFunc:FVe};N();function PVe(n){let{inputs:t,backend:e}=n,{inputIndices:r,inputShape:o,newShape:s}=t;if(r.shape.length!==2)throw new Error(`Input indices should be a matrix but received shape ${r.shape}`);if(o.shape.length!==1)throw new Error(`Input shape should be a vector but received shape ${o.shape}`);if(s.shape.length!==1)throw new Error(`Target shape should be a vector but received shape ${s.shape}`);let i=Array.from(e.readSync(o.dataId)),a=e.readSync(r.dataId),l=Array.from(e.readSync(s.dataId)),[c,u,p]=$oe(a,r.shape,r.dtype,i,l);return[e.makeTensorInfo(u,r.dtype,c),e.makeTensorInfo([p.length],s.dtype,new Int32Array(p))]}var hle={kernelName:Ph,backendName:"webgl",kernelFunc:PVe};N();function $Ve(n){let{inputs:t,backend:e}=n,{data:r,indices:o,segmentIds:s}=t;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(o.shape.length!==1)throw new Error(`Indices should be a vector but received shape
              ${o.shape}`);if(s.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
              ${s.shape}`);let i=e.readSync(r.dataId),a=e.readSync(o.dataId),l=e.readSync(s.dataId),[c,u]=UN(i,r.shape,r.dtype,a,l,!0);return e.makeTensorInfo(u,r.dtype,c)}var mle={kernelName:$h,backendName:"webgl",kernelFunc:$Ve};N();function LVe(n){let{inputs:t,backend:e}=n,{data:r,indices:o,segmentIds:s}=t;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(o.shape.length!==1)throw new Error(`Indices should be a vector but received shape
             ${o.shape}`);if(s.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
             ${s.shape}`);let i=e.readSync(r.dataId),a=e.readSync(o.dataId),l=e.readSync(s.dataId),[c,u]=UN(i,r.shape,r.dtype,a,l);return e.makeTensorInfo(u,r.dtype,c)}var gle={kernelName:Lh,backendName:"webgl",kernelFunc:LVe};N();function BVe(n){let{inputs:t,backend:e,attrs:r}=n,{sparseIndices:o,sparseValues:s,defaultValue:i}=t,{outputShape:a}=r,{sliceRank:l,numUpdates:c,sliceSize:u,strides:p,outputSize:f}=M.calculateShapes(s,o,a),d=!1;if(s.dtype==="string"){let x=e.bufferSync(o),b=e.bufferSync(s),w=C.decodeString(e.readSync(i.dataId)[0]),v=Moe(x,b,a,f,u,c,l,p,w,d);return e.makeTensorInfo(a,v.dtype,v.values)}let h=new nd(c,l,o.shape.length,s.shape.length,p,[f,1],d),m=e.runWebGLProgram(h,[s,o,i],s.dtype),g=ye({inputs:{x:m},backend:e,attrs:{shape:a}});return e.disposeIntermediateTensorInfo(m),g}var xle={kernelName:Bh,backendName:"webgl",kernelFunc:BVe};N();function zVe(n){let{inputs:t,backend:e,attrs:r}=n,{x:o}=t,{numOrSizeSplits:s,axis:i}=r,a=C.parseAxisParam(i,o.shape)[0],l=M.prepareSplitSize(o,s,a),c=o.shape.length,u=new Array(c).fill(0),p=o.shape.slice();return l.map(f=>{let d=[...p];d[a]=f;let h=Aa({inputs:{x:o},backend:e,attrs:{begin:u,size:d}});return u[a]+=f,h})}var yle={kernelName:Mu,backendName:"webgl",kernelFunc:zVe};N();var ble="return sqrt(x);",VVe=Le({opSnippet:ble,packedOpSnippet:ble,cpuKernelImpl:Loe}),vle={kernelName:Ql,backendName:"webgl",kernelFunc:VVe};N();var UVe="return x * x;",jVe=Le({opSnippet:UVe}),wle={kernelName:zh,backendName:"webgl",kernelFunc:jVe};N();var Cle="return (a - b) * (a - b);",GVe=Ut({opSnippet:Cle,packedOpSnippet:Cle}),Ile={kernelName:Jl,backendName:"webgl",kernelFunc:GVe};N();function WVe(n){let{inputs:t,backend:e,attrs:r}=n,{x:o}=t;if(o.dtype!=="string")throw new Error("Input must be of datatype string");let s=e.readSync(o.dataId),i=M.fromUint8ToStringArray(s),a=Boe(i,"string",r);return e.makeTensorInfo(o.shape,"string",a)}var Sle={kernelName:ff,backendName:"webgl",kernelFunc:WVe};N();function HVe({inputs:n,attrs:t,backend:e}){let{x:r}=n,o=Cr+`
    return x > 0.0 ? 1.0 : float(${t.alpha});
  `,s=new to(r.shape,o);return e.runWebGLProgram(s,[r],r.dtype)}var Tle={kernelName:rc,backendName:"webgl",kernelFunc:HVe};N();var lk=class{constructor(t,e,r){this.variableNames=["x"],this.outputShape=r;let o=r.length,s=at(r.length),i=at(r.length),a="";if(o===1)a="coords * strides + begin";else{let l=0;a=r.map((c,u)=>(l++,r.length===1?`coords * strides[${u}] + begin[${u}]`:`coords[${l-1}] * strides[${u}] + begin[${u}]`)).join(",")}this.userCode=`
      ${s} begin = ${s}(${t});
      ${s} strides = ${s}(${e});

      void main() {
        ${i} coords = getOutputCoords();
        setOutput(getX(${a}));
      }
    `}};function qVe(n){let{inputs:t,backend:e,attrs:r}=n,{x:o}=t,{begin:s,end:i,strides:a,beginMask:l,endMask:c,ellipsisMask:u,newAxisMask:p,shrinkAxisMask:f}=r,{finalShapeSparse:d,finalShape:h,isIdentity:m,sliceDim0:g,isSimpleSlice:x,begin:b,end:w,strides:v}=_r.sliceInfo(o.shape,s,i,a,l,c,u,p,f),S;if(m)S=ye({inputs:{x:o},backend:e,attrs:{shape:h}});else if(g||x){C.assert(o.shape.length>=1,()=>`Input must have rank at least 1, got: ${o.shape.length}`);let A=_r.computeOutShape(b,w,v),$=Aa({inputs:{x:o},backend:e,attrs:{begin:b,size:A}});S=ye({inputs:{x:$},backend:e,attrs:{shape:h}}),e.disposeIntermediateTensorInfo($)}else if(e.shouldExecuteOnCPU([o])){let $=e.readSync(o.dataId),L=Pe(o.shape,o.dtype,$),z=zoe(d,L,v,b);S=e.makeTensorInfo(h,o.dtype,z.values)}else{let $=new lk(b,v,d);S=e.runWebGLProgram($,[o],o.dtype)}let k=ye({inputs:{x:S},backend:e,attrs:{shape:h}});return e.disposeIntermediateTensorInfo(S),k}var Ele={kernelName:Vh,backendName:"webgl",kernelFunc:qVe};N();function KVe(n){let{inputs:t,backend:e,attrs:r}=n,{separator:o,nGramWidths:s,leftPad:i,rightPad:a,padWidth:l,preserveShortSequences:c}=r,{data:u,dataSplits:p}=t,f=e.readSync(u.dataId),d=e.readSync(p.dataId),[h,m]=Voe(f,d,o,s,i,a,l,c);return[e.makeTensorInfo([h.length],"string",h),e.makeTensorInfo(p.shape,"int32",m)]}var Nle={kernelName:Uh,backendName:"webgl",kernelFunc:KVe};N();function XVe(n){let{inputs:t,backend:e,attrs:r}=n,{skipEmpty:o}=r,{input:s,delimiter:i}=t;if(s.dtype!=="string")throw new Error("Input must be of datatype string");if(s.shape.length!==1)throw new Error(`Input must be a vector, got shape: ${s.shape}`);if(i.shape.length!==0)throw new Error(`Delimiter must be a scalar, got shape: ${i.shape}`);let a=e.readSync(s.dataId),l=e.readSync(i.dataId)[0],[c,u,p]=Uoe(a,l,o),f=u.length;return[e.makeTensorInfo([f,2],"int32",c),e.makeTensorInfo([f],"string",u),e.makeTensorInfo([2],"int32",new Int32Array(p))]}var Dle={kernelName:jh,backendName:"webgl",kernelFunc:XVe};N();function YVe(n){let{inputs:t,backend:e,attrs:r}=n,{numBuckets:o}=r,{input:s}=t;if(s.dtype!=="string")throw new Error("Input must be of datatype string");if(o<=0)throw new Error("Number of buckets must be at least 1");let i=e.readSync(s.dataId),a=joe(i,o);return e.makeTensorInfo(s.shape,"int32",a)}var kle={kernelName:Gh,backendName:"webgl",kernelFunc:YVe};N();var ZVe="return tan(x);",QVe=Le({opSnippet:ZVe}),_le={kernelName:tc,backendName:"webgl",kernelFunc:QVe};N();var JVe=`
  float e2x = exp(-2.0 * abs(x));
  return sign(x) * (1.0 - e2x) / (1.0 + e2x);
`,eUe=Le({opSnippet:JVe}),Ale={kernelName:nc,backendName:"webgl",kernelFunc:eUe};N();function tUe(n){let{inputs:t,backend:e,attrs:r}=n,{tensor:o,indices:s,updates:i}=t,{}=r,{sliceRank:a,numUpdates:l,sliceSize:c,strides:u,outputSize:p}=M.calculateShapes(i,s,o.shape),f=[p/c,c];if(p===0)return e.makeTensorInfo(o.shape,s.dtype);let d=ye({inputs:{x:s},backend:e,attrs:{shape:[l,a]}}),h=ye({inputs:{x:i},backend:e,attrs:{shape:[l,c]}}),m=ye({inputs:{x:o},backend:e,attrs:{shape:f}}),g=new nd(l,a,d.shape.length,h.shape.length,u,f,!1,!0),x=e.runWebGLProgram(g,[h,d,m],m.dtype),b=ye({inputs:{x},backend:e,attrs:{shape:o.shape}});return e.disposeIntermediateTensorInfo(d),e.disposeIntermediateTensorInfo(h),e.disposeIntermediateTensorInfo(m),e.disposeIntermediateTensorInfo(x),b}var Rle={kernelName:Mh,backendName:"webgl",kernelFunc:tUe};N();var ck=class{constructor(t,e){this.variableNames=["A"];let r=new Array(t.length);for(let i=0;i<r.length;i++)r[i]=t[i]*e[i];this.outputShape=r,this.rank=r.length;let o=at(this.rank),s=nUe(t);this.userCode=`
      void main() {
        ${o} resRC = getOutputCoords();
        setOutput(getA(${s}));
      }
    `}};function nUe(n){let t=n.length;if(t>5)throw Error(`Tile for rank ${t} is not yet supported`);if(t===1)return`imod(resRC, ${n[0]})`;let e=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],r=[];for(let o=0;o<n.length;o++)r.push(`imod(${e[o]}, ${n[o]})`);return r.join()}function sB(n){let{inputs:t,backend:e,attrs:r}=n,{x:o}=t,{reps:s}=r;if(o.dtype==="string"||o.shape.length>5){let l=e.readSync(o.dataId),c=o.dtype==="string"?l.map(f=>C.decodeString(f)):l,u=Pe(o.shape,o.dtype,c),p=Woe(u,s);return e.makeTensorInfo(p.shape,p.dtype,p.values)}let i=new ck(o.shape,s);return e.runWebGLProgram(i,[o],o.dtype)}var Mle={kernelName:Ji,backendName:"webgl",kernelFunc:sB};N();var uk=class{constructor(t){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"negativeInf",type:"float"},{name:"dir",type:"int"},{name:"inc",type:"int"}],this.outputShape=t,this.userCode=`
       void main() {
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int elemIdx = coords[1];

         // We compare elements pair-wise within a group of size 2 * inc.
         // The comparing rule for each group alternates between ascending
         // and descending. Within each group, we compare each pair at
         // positions i and i+inc. To decide whether an element at position i
         // is x0 or x1, we mod it by 2 * inc, if the result is smaller than
         // inc, it is in the first half of the group, we denote it as x0,
         // otherwise we denote it as x1.
         // For example, as shown in the Bitonic top K paper referenced above,
         // Figure5(a) shows that element[1] is in the
         // second half of the group when group size is 2, but it is in the
         // first half of the group when group size is 4.

         bool isFirstInPair = imod(elemIdx, 2 * inc) < inc;
         int i = isFirstInPair ? elemIdx : elemIdx - inc;

         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));
         int i1 = firstPass == 1 ? i + inc : int(getIndices(batch, i + inc));
         float x0 = i0 < n ? getX(batch, i0) : negativeInf;
         float x1 = i1 < n ? getX(batch, i1) : negativeInf;

         // Denotes which direction indices are in (ascending or descending).
         bool reverse = imod(elemIdx, 2 * dir) >= dir;
         bool isGreater = x0 > x1 || (x0 == x1 && i1 > i0);
         if (reverse == isGreater) { // Elements in opposite order of direction
           int iTemp = i0;
           i0 = i1;
           i1 = iTemp;
         }
         if (isFirstInPair) {
            setOutput(float(i0));
         } else {
            setOutput(float(i1));
         }
       }
     `}},pk=class{constructor(t){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"k",type:"int"}],this.outputShape=t,this.userCode=`
    void main() {
         // Takes max of indices (0, k), (1, k + 1), (2, k + 2) ...
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int elemIdx = coords[1];

         // The output size is half of the previous size.
         // If the previous sequence is | | | | _ _ _ _  | | | |  _ _ _ _ (k=4),
         // we only need to output the indices at positions |, the indices at
         // positions _ can be thrown away, see Figure5(b) After Phase 2
         // (Merge phase) in the Bitonic Top K paper referenced above.
         // For example, the paper shows we only need to output the orange bars.
         // The output sequence should look like this | | | | | | | |.
         // Because the sequence is halved, to map the output index back
         // to the previous sequence to find the corresponding value,
         // we need to double the index. When we double the index,
         // we basically interpolate a position, so 2i looks like
         // | _ | _ | _ | _ | _ | _ | _. We move the | to the first k position
         // of each 2k positions by - elemIdx % k. E.g. for output at
         // index 4,5,6,7, we want to get the corresponding element at
         // original index 8,9,10,11, for output at index 8,9,10,11,
         // we want to get the corresponding element at original index
         // 16,17,18,19, so on and so forth.

         int i = elemIdx < k ? elemIdx : (elemIdx * 2 - imod(elemIdx, k));
         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));
         int i1 = firstPass == 1 ? i + k : int(getIndices(batch, i + k));

         float x0 = getX(batch, i0);
         float x1 = i1 < n ? getX(batch, i1) : x0;

         setOutput(x0 >= x1 ? float(i0) : float(i1));
       }
     `}};function lg(n,t){t!==null&&n.disposeIntermediateTensorInfo(t)}function Ole(n){let t=1;for(;t<n;)t*=2;return t}function rUe(n){let{inputs:t,backend:e,attrs:r}=n,{x:o}=t,{k:s,sorted:i}=r,a=Y().getNumber("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD"),l=Y().getNumber("TOPK_K_CPU_HANDOFF_THRESHOLD"),c=o.shape,u=c[c.length-1];if(e.shouldExecuteOnCPU([o])||u<a||s>l){let z=e.readSync(o.dataId),[W,Q]=Hoe(z,c,o.dtype,s,i);return[e.makeTensorInfo(W.shape,W.dtype,W.values),e.makeTensorInfo(Q.shape,Q.dtype,Q.values)]}if(s===0)return c[c.length-1]=0,[e.makeTensorInfo(c,o.dtype,[]),e.makeTensorInfo(c,"int32",[])];if(u===1)return[o,wp({attrs:{shape:c,dtype:"int32",value:0},backend:e})];let p=e.texData.get(o.dataId),f=p!==null&&p.isPacked,d=f?e.unpackTensor(o):o,m=C.sizeFromShape(c)/u,g=ye({inputs:{x:d},attrs:{shape:[m,u]},backend:e});f&&lg(e,d);let x=Ole(s),b=Ole(u),w=null,v=()=>w===null?[g,g]:[g,w],S=(z,W,Q)=>{let ne=v(),se=new uk(Q),ie=[[u],[w===null?1:0],[Number.NEGATIVE_INFINITY],[z],[W]],le=w;w=e.runWebGLProgram(se,ne,"int32",ie),lg(e,le)};for(let z=1;z<x;z*=2){let W=z*2;for(let Q=z;Q>=1;Q/=2)S(W,Q,[m,b])}for(let z=b;z>x;z/=2){let W=v(),Q=new pk([m,z/2]),se=[[u],[w===null?1:0],[x]],te=w;w=e.runWebGLProgram(Q,W,"int32",se),lg(e,te);let ie=x/2,le=ie*2;for(let pe=ie;pe>=1;pe/=2)S(le,pe,w.shape)}let k=w;w=Aa({inputs:{x:w},backend:e,attrs:{begin:0,size:[m,s]}}),lg(e,k);let A=QL({inputs:{x:g,indices:w},backend:e,attrs:{axis:1,batchDims:1}});lg(e,g);let $=c.slice(0,-1);$.push(s),k=w,w=ye({inputs:{x:w},attrs:{shape:$},backend:e}),lg(e,k);let L=A;return A=ye({inputs:{x:A},attrs:{shape:$},backend:e}),lg(e,L),[A,w]}var Fle={kernelName:Wh,backendName:"webgl",kernelFunc:rUe};N();var fk=class{constructor(t,e,r,o,s,i){this.variableNames=["Image","Transforms"],this.outputShape=i;let a=r==="nearest"?1:2,l;switch(o){case"constant":l=1;break;case"reflect":l=2;break;case"wrap":l=3;break;case"nearest":l=4;break;default:l=1;break}this.userCode=`
            float mapCoord(float outCoord, float len) {
              float inCoord = outCoord;
              if(${l} == 2) {
                if (inCoord < 0.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz2 = 2.0 * len;
                    if (inCoord < sz2) {
                      inCoord = sz2 * float(int(float(-inCoord / sz2))) +
                      inCoord;
                    }
                    inCoord = inCoord < -len ? inCoord + sz2 : -inCoord - 1.0;
                  }
                } else if (inCoord > len - 1.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz2 = 2.0 * len;
                    inCoord -= sz2 * float(int(float(inCoord / sz2)));
                    if (inCoord >= len) {
                      inCoord = sz2 - inCoord - 1.0;
                    }
                  }
                }
                return clamp(inCoord, 0.0, len - 1.0);
              } else if (${l} == 3) {
                if (inCoord < 0.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz = len - 1.0;
                    inCoord += len * (float(int(float(-inCoord / sz))) + 1.0);
                  }
                } else if (inCoord > len - 1.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz = len - 1.0;
                    inCoord -= len * float(int(float(inCoord / sz)));
                  }
                }
                return clamp(inCoord, 0.0, len - 1.0);
              } else if (${l} == 4) {
                return clamp(outCoord, 0.0, len - 1.0);
              } else {
                return outCoord;
              }
            }

            float readWithFillValue(int batch, int coordY, int coordX,
              int channel) {
              float outputValue;
              if (0 <= coordY && coordY < ${t} && 0 <= coordX && coordX < ${e}) {
                  outputValue = getImage(batch, coordY, coordX, channel);
              } else {
                outputValue = float(${s});
              }
              return outputValue;
            }

            void main() {
              ivec4 coords = getOutputCoords();
              float outputValue;
              int batch = coords[0];
              int x = coords[2];
              int y = coords[1];
              int channel = coords[3];
              float xf = float(x);
              float yf = float(y);
              float a1 = getTransforms(batch, 0);
              float a2 = getTransforms(batch, 1);
              float a3 = getTransforms(batch, 2);
              float b1 = getTransforms(batch, 3);
              float b2 = getTransforms(batch, 4);
              float b3 = getTransforms(batch, 5);
              float c1 = getTransforms(batch, 6);
              float c2 = getTransforms(batch, 7);
              float projection = c1 * xf + c2 * yf + 1.0;
              if (projection == 0.0) {
                outputValue = float(${s});
              } else {
                float inX = (a1 * xf + a2 * yf + a3) / projection;
                float inY = (b1 * xf + b2 * yf + b3) / projection;
                float mapX = mapCoord(inX, float(${e}));
                float mapY = mapCoord(inY, float(${t}));

                if (${a} == 1) {
                  int coordY = int(round(mapY));
                  int coordX = int(round(mapX));
                  outputValue = readWithFillValue(batch, coordY, coordX,
                    channel);
                } else {
                  float yFloor = floor(mapY);
                  float xFloor = floor(mapX);
                  float yCeil = yFloor + 1.0;
                  float xCeil = xFloor + 1.0;
                  float valueYFloor = (xCeil - mapX) *
                  readWithFillValue(batch, int(yFloor), int(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, int(yFloor), int(xCeil), channel);
                  float valueYCeil = (xCeil - mapX) *
                  readWithFillValue(batch, int(yCeil), int(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, int(yCeil), int(xCeil), channel);
                  outputValue = (yCeil - mapY) * valueYFloor +
                  (mapY - yFloor) * valueYCeil;
                }
              }
              setOutput(outputValue);
            }
        `}};function oUe(n){let{inputs:t,backend:e,attrs:r}=n,{image:o,transforms:s}=t,{interpolation:i,fillMode:a,fillValue:l,outputShape:c}=r,[u,p,f,d]=o.shape,[h,m]=c??[p,f],g=[u,h,m,d],x=new fk(p,f,i,a,l,g);return e.runWebGLProgram(x,[o,s],"float32")}var Ple={kernelName:Hh,backendName:"webgl",kernelFunc:oUe};N();function sUe(n){let{inputs:t,attrs:e,backend:r}=n,{axis:o}=e,{x:s}=t;Ic(s,"unique"),console.warn("WARNING: ","UI might be locked temporarily as data is being downloaded");let i=r.readSync(s.dataId),{outputValues:a,outputShape:l,indices:c}=qoe(i,o,s.shape,s.dtype);return[r.makeTensorInfo(l,s.dtype,a),r.makeTensorInfo([c.length],"int32",c)]}var $le={kernelName:qh,backendName:"webgl",kernelFunc:sUe};N();function iUe(n){let{inputs:t,backend:e,attrs:r}=n,{value:o}=t,{axis:s}=r;s<0&&(s+=o.shape.length);let i=o,a=i.shape.length,l=o.shape[s],c=new Array(a-1),u=0;for(let m=0;m<a;m++)m!==s&&(c[u++]=i.shape[m]);let p=[],f=new Array(a).fill(0),d=i.shape.slice();d[s]=1;let h=new Array(l);for(let m=0;m<h.length;m++){f[s]=m;let g=Aa({inputs:{x:i},backend:e,attrs:{begin:f,size:d}}),x=ye({inputs:{x:g},backend:e,attrs:{shape:c}});h[m]=x,p.push(g)}return p.forEach(m=>e.disposeIntermediateTensorInfo(m)),h}var Lle={kernelName:Fu,backendName:"webgl",kernelFunc:iUe};N();var dk=class{constructor(t,e){this.variableNames=["x","segmentIds"];let r=t.windowSize,o=t.batchSize,s=t.inSize,i=t.numSegments,a=i*Math.ceil(s/r);this.outputShape=[o,a];let l="0.0",c="sumValue",u=Math.floor(r/4)*4,p=r%4,f=`
        sumValue += dot(values, segFilter);
    `,d="";s%r>0&&(d=`
        if (inIdx < 0 || inIdx >= ${s}) {
          return initializationValue;
        }
      `);let h="";s%r>0&&(h=`
        if (inIdx < 0 || inIdx >= ${s}) {
          return -1.0;
        }
      `),this.userCode=`
      const float initializationValue = ${l};

      float getValue(int batch, int inIdx) {
        ${d}
        return getX(batch, inIdx);
      }

      float getSegmentIdAtIndex(int inIdx) {
        ${h}
        return getSegmentIds(inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = int(floor(float(outIdx) / float(
          ${i})) * float(${r}));
        int currentSeg = int(mod(float(outIdx), float(${i})));

        float sumValue = 0.0;

        for (int i = 0; i < ${u}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0
          );

          ${f}
        }

        int inIdx = inOffset + ${u};
        if (${p===1}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            0,
            0,
            0
          );

          ${f}
        } else if (${p===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
              0,
              0
          );

          ${f}
        } else if (${p===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            0
          );

          ${f}
        }
        setOutput(${c});
      }
    `}};function aUe(n){let{inputs:t,backend:e,attrs:r}=n,{x:o,segmentIds:s}=t,{numSegments:i}=r,a=o.shape.length,l=[],c=0,u=M.getAxesPermutation([c],a),p=o;u!=null&&(p=Mn({inputs:{x:o},backend:e,attrs:{perm:u}}),l.push(p),c=M.getInnerMostAxes(1,a)[0]);let f=M.segment_util.computeOutShape(p.shape,c,i),d=C.sizeFromShape([p.shape[c]]),h=ye({inputs:{x:p},backend:e,attrs:{shape:[-1,d]}});l.push(h);let m=yf(o.dtype),g=(v,S,k,A,$)=>{let L=v.shape[0],z=v.shape[1],W=M.segment_util.segOpComputeOptimalWindowSize(z,$),Q={windowSize:W,inSize:z,batchSize:L,numSegments:$},ne=new dk(Q,S),se=e.compileAndRun(ne,[v,k],A);if(l.push(se),se.shape[1]===$)return se;let te=oB({backend:e,attrs:{start:0,stop:$,step:1,dtype:"float32"}}),ie=sB({inputs:{x:te},backend:e,attrs:{reps:[z/W]}});return l.push(te),l.push(ie),g(se,S,ie,A,$)},x=g(h,"unsortedSegmentSum",s,m,i),b=ye({inputs:{x},backend:e,attrs:{shape:f}}),w=b;if(u!=null){l.push(b);let v=M.getUndoAxesPermutation(u);w=Mn({inputs:{x:w},backend:e,attrs:{perm:v}})}return l.forEach(v=>e.disposeIntermediateTensorInfo(v)),w}var Ble={kernelName:Pu,backendName:"webgl",kernelFunc:aUe};var lUe=[wse,Ise,Sse,Tse,Nse,Dse,kse,_se,Mse,Ose,Fse,Pse,$se,Lse,Bse,zse,Vse,Use,jse,Gse,Wse,qse,Kse,Xse,Yse,eie,nie,rie,pse,sie,aie,lie,cie,uie,pie,fie,die,hie,mie,gie,bie,vie,wie,Cie,Iie,Sie,Tie,Eie,Nie,Die,kie,_ie,Aie,Rie,Mie,Oie,Pie,$ie,Lie,Bie,Vie,Uie,jie,Gie,Wie,Hie,qie,Kie,Xie,use,Yie,iie,Zie,Qie,Jie,fse,eae,tae,nae,rae,oae,sae,iae,aae,lae,cae,pae,fae,dae,hae,mae,gae,yae,vae,wae,Cae,Iae,Sae,kae,mse,_ae,Aae,Rae,Mae,Zse,Oae,$ae,Lae,Bae,zae,dse,Vae,Uae,jae,Gae,Wae,Qse,Tae,Hae,qae,Kae,xse,Xae,Yae,Zae,Qae,Jae,ele,tle,nle,rle,ole,sle,ile,ale,lle,cle,ule,Hse,Dae,ple,fle,dle,hle,mle,gle,xle,yle,vle,wle,Ile,Sle,Tle,Ele,Nle,Dle,kle,Nae,bse,_le,Ale,Rle,Mle,Fle,Ple,vse,$le,Lle,Ble,Fae];for(let n of lUe)zx(n);N();Ey();var cUe=["videoElement"],uUe=["canvas"],pUe=n=>({hidden:n});function fUe(n,t){if(n&1&&(Ft(0,"div",9)(1,"p"),Pn(2),zt()()),n&2){let e=Sd();oo(2),Nd("Starting camera in ",e.countdown," seconds...")}}function dUe(n,t){if(n&1&&(Ft(0,"li"),Pn(1),zt()),n&2){let e=t.$implicit;oo(),VA(e)}}function hUe(n,t){if(n&1&&(Ft(0,"div",10)(1,"h3"),Pn(2,"Detected Objects"),zt(),Ft(3,"ul"),Oc(4,dUe,2,1,"li",11),zt()()),n&2){let e=Sd();oo(4),Zo("ngForOf",e.detectedObjects)}}var Ule=(()=>{let t=class t{constructor(r){this.router=r,this.detectedObject="",this.detectedObjects=[],this.isSpeaking=!1,this.countdown=3,this.isCameraStarted=!1}ngOnInit(){return ee(this,null,function*(){yield FT("webgl"),yield GM(),this.model=yield Vle.load(),console.log("COCO SSD Model loaded.")})}ngAfterViewInit(){this.startCountdown()}goBack(){this.router.navigate(["/dashboard"])}startWebcam(){let r=this.videoElement.nativeElement;navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?navigator.mediaDevices.getUserMedia({video:!0}).then(o=>{r.srcObject=o,r.play(),r.onloadeddata=()=>{this.detectFrame()}}).catch(o=>{console.error("Error accessing webcam: ",o)}):console.error("getUserMedia not supported in this browser.")}detectFrame(){return ee(this,null,function*(){let r=this.videoElement.nativeElement,o=this.canvasElement.nativeElement,s=o.getContext("2d");o.width=r.clientWidth,o.height=r.clientHeight,this.model.detect(r).then(i=>{this.renderPredictions(i,s,r),i.forEach(a=>{let l=a.class;this.detectedObjects.includes(l)||(this.detectedObjects.push(l),this.detectedObject=`This is a ${l}`,this.isSpeaking||this.speakDetectedObject(l))}),requestAnimationFrame(()=>{this.detectFrame()})})})}renderPredictions(r,o,s){if(!o){console.error("Unable to get canvas context");return}o.clearRect(0,0,this.canvasElement.nativeElement.width,this.canvasElement.nativeElement.height);let i=s.videoWidth,a=s.videoHeight;this.canvasElement.nativeElement.width=i,this.canvasElement.nativeElement.height=a;let l=this.canvasElement.nativeElement.width/i,c=this.canvasElement.nativeElement.height/a;r.forEach(u=>{let[p,f,d,h]=u.bbox,m=p*l,g=f*c,x=d*l,b=h*c;o.strokeStyle="#00FF00",o.lineWidth=4,o.strokeRect(m,g,x,b),o.fillStyle="#00FF00",o.font="18px Arial",o.fillText(`${u.class} (${Math.round(u.score*100)}%)`,m,g>10?g-5:10)})}speakDetectedObject(r){let o=window.speechSynthesis,s=new SpeechSynthesisUtterance(`This is a ${r}`);this.isSpeaking=!0,s.onend=()=>{this.isSpeaking=!1},o.speak(s)}startCountdown(){let r=setInterval(()=>{this.countdown--,this.countdown<=0&&(clearInterval(r),this.startWebcam(),this.isCameraStarted=!0)},1e3)}};t.\u0275fac=function(o){return new(o||t)(Tr(ts))},t.\u0275cmp=ui({type:t,selectors:[["app-object-detector"]],viewQuery:function(o,s){if(o&1&&(Vg(cUe,5),Vg(uUe,5)),o&2){let i;Td(i=Ed())&&(s.videoElement=i.first),Td(i=Ed())&&(s.canvasElement=i.first)}},decls:12,vars:5,consts:[["videoElement",""],["canvas",""],[1,"object-detection-container"],["class","countdown-timer",4,"ngIf"],[1,"video-container",3,"ngClass"],["width","640","height","480","autoplay",""],["id","canvas"],["class","object-list",4,"ngIf"],[1,"back-button",3,"click"],[1,"countdown-timer"],[1,"object-list"],[4,"ngFor","ngForOf"]],template:function(o,s){if(o&1){let i=Bg();Ft(0,"div",2)(1,"h2"),Pn(2,"Object Detection"),zt(),Oc(3,fUe,3,1,"div",3),Ft(4,"div",4),Qo(5,"video",5,0)(7,"canvas",6,1),zt(),Oc(9,hUe,5,1,"div",7),Ft(10,"button",8),zs("click",function(){return Pg(i),$g(s.goBack())}),Pn(11,"Back to Dashboard"),zt()()}o&2&&(oo(3),Zo("ngIf",!s.isCameraStarted),oo(),Zo("ngClass",wU(3,pUe,!s.isCameraStarted)),oo(5),Zo("ngIf",s.isCameraStarted))},dependencies:[KU,XU,Wg],styles:[".object-detection-container[_ngcontent-%COMP%]{padding:20px;max-width:800px;margin:0 auto;display:flex;flex-direction:column;align-items:center;color:#0fc}h1[_ngcontent-%COMP%]{text-align:center;font-size:2.5rem;color:#0fc;text-transform:uppercase;margin-bottom:30px;letter-spacing:2px;text-shadow:0 0 15px rgba(0,255,204,.7)}.countdown-timer[_ngcontent-%COMP%]{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);font-size:36px;font-weight:700;color:red;text-align:center;background-color:#fffc;padding:20px;border-radius:10px;z-index:9999}.video-container[_ngcontent-%COMP%]{position:relative;margin-bottom:20px}.video-container[_ngcontent-%COMP%]   video[_ngcontent-%COMP%], .video-container[_ngcontent-%COMP%]   canvas[_ngcontent-%COMP%]{display:block;width:100%;height:auto;border:1px solid #ddd;border-radius:8px}.video-container[_ngcontent-%COMP%]   canvas[_ngcontent-%COMP%]{position:absolute;top:0;left:0;pointer-events:none;z-index:1}.hidden[_ngcontent-%COMP%]{display:none}.object-list[_ngcontent-%COMP%]{margin-top:20px;padding:10px;border:1px solid #ddd;border-radius:8px;background-color:#0d0d0d;box-shadow:0 0 10px 2px #00ffcc80}.object-list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;padding:0}.object-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:8px;margin-bottom:5px;background-color:#1a1a1a;border-radius:4px;font-size:20px;font-weight:700;color:#0fc}canvas[_ngcontent-%COMP%]{border-color:#fff;background-color:transparent}.back-button[_ngcontent-%COMP%]{margin-top:20px;padding:10px 20px;font-size:1.2rem;color:#0fc;background-color:transparent;border:2px solid #00ffcc;border-radius:5px;cursor:pointer;text-transform:uppercase;letter-spacing:1px;text-shadow:0 0 10px rgba(0,255,204,.7);transition:background-color .3s,box-shadow .3s;position:relative;display:inline-block}.back-button[_ngcontent-%COMP%]:hover{background-color:#0fc;color:#1a1a1a;box-shadow:0 0 20px #00ffccb3}"]});let n=t;return n})();Ey();N();N();function hk(n,t,e,r){return new(e||(e=Promise))(function(o,s){function i(c){try{l(r.next(c))}catch(u){s(u)}}function a(c){try{l(r.throw(c))}catch(u){s(u)}}function l(c){var u;c.done?o(c.value):(u=c.value,u instanceof e?u:new e(function(p){p(u)})).then(i,a)}l((r=r.apply(n,t||[])).next())})}function mk(n,t){var e,r,o,s,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(l){return function(c){return function(u){if(e)throw new TypeError("Generator is already executing.");for(;i;)try{if(e=1,r&&(o=2&u[0]?r.return:u[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,u[1])).done)return o;switch(r=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return i.label++,{value:u[1],done:!1};case 5:i.label++,r=u[1],u=[0];continue;case 7:u=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){i=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){i.label=u[1];break}if(u[0]===6&&i.label<o[1]){i.label=o[1],o=u;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(u);break}o[2]&&i.ops.pop(),i.trys.pop();continue}u=t.call(n,i)}catch(p){u=[6,p],r=0}finally{e=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([l,c])}}}var mUe={0:"tench, Tinca tinca",1:"goldfish, Carassius auratus",2:"great white shark, white shark, man-eater, man-eating shark, Carcharodon carcharias",3:"tiger shark, Galeocerdo cuvieri",4:"hammerhead, hammerhead shark",5:"electric ray, crampfish, numbfish, torpedo",6:"stingray",7:"cock",8:"hen",9:"ostrich, Struthio camelus",10:"brambling, Fringilla montifringilla",11:"goldfinch, Carduelis carduelis",12:"house finch, linnet, Carpodacus mexicanus",13:"junco, snowbird",14:"indigo bunting, indigo finch, indigo bird, Passerina cyanea",15:"robin, American robin, Turdus migratorius",16:"bulbul",17:"jay",18:"magpie",19:"chickadee",20:"water ouzel, dipper",21:"kite",22:"bald eagle, American eagle, Haliaeetus leucocephalus",23:"vulture",24:"great grey owl, great gray owl, Strix nebulosa",25:"European fire salamander, Salamandra salamandra",26:"common newt, Triturus vulgaris",27:"eft",28:"spotted salamander, Ambystoma maculatum",29:"axolotl, mud puppy, Ambystoma mexicanum",30:"bullfrog, Rana catesbeiana",31:"tree frog, tree-frog",32:"tailed frog, bell toad, ribbed toad, tailed toad, Ascaphus trui",33:"loggerhead, loggerhead turtle, Caretta caretta",34:"leatherback turtle, leatherback, leathery turtle, Dermochelys coriacea",35:"mud turtle",36:"terrapin",37:"box turtle, box tortoise",38:"banded gecko",39:"common iguana, iguana, Iguana iguana",40:"American chameleon, anole, Anolis carolinensis",41:"whiptail, whiptail lizard",42:"agama",43:"frilled lizard, Chlamydosaurus kingi",44:"alligator lizard",45:"Gila monster, Heloderma suspectum",46:"green lizard, Lacerta viridis",47:"African chameleon, Chamaeleo chamaeleon",48:"Komodo dragon, Komodo lizard, dragon lizard, giant lizard, Varanus komodoensis",49:"African crocodile, Nile crocodile, Crocodylus niloticus",50:"American alligator, Alligator mississipiensis",51:"triceratops",52:"thunder snake, worm snake, Carphophis amoenus",53:"ringneck snake, ring-necked snake, ring snake",54:"hognose snake, puff adder, sand viper",55:"green snake, grass snake",56:"king snake, kingsnake",57:"garter snake, grass snake",58:"water snake",59:"vine snake",60:"night snake, Hypsiglena torquata",61:"boa constrictor, Constrictor constrictor",62:"rock python, rock snake, Python sebae",63:"Indian cobra, Naja naja",64:"green mamba",65:"sea snake",66:"horned viper, cerastes, sand viper, horned asp, Cerastes cornutus",67:"diamondback, diamondback rattlesnake, Crotalus adamanteus",68:"sidewinder, horned rattlesnake, Crotalus cerastes",69:"trilobite",70:"harvestman, daddy longlegs, Phalangium opilio",71:"scorpion",72:"black and gold garden spider, Argiope aurantia",73:"barn spider, Araneus cavaticus",74:"garden spider, Aranea diademata",75:"black widow, Latrodectus mactans",76:"tarantula",77:"wolf spider, hunting spider",78:"tick",79:"centipede",80:"black grouse",81:"ptarmigan",82:"ruffed grouse, partridge, Bonasa umbellus",83:"prairie chicken, prairie grouse, prairie fowl",84:"peacock",85:"quail",86:"partridge",87:"African grey, African gray, Psittacus erithacus",88:"macaw",89:"sulphur-crested cockatoo, Kakatoe galerita, Cacatua galerita",90:"lorikeet",91:"coucal",92:"bee eater",93:"hornbill",94:"hummingbird",95:"jacamar",96:"toucan",97:"drake",98:"red-breasted merganser, Mergus serrator",99:"goose",100:"black swan, Cygnus atratus",101:"tusker",102:"echidna, spiny anteater, anteater",103:"platypus, duckbill, duckbilled platypus, duck-billed platypus, Ornithorhynchus anatinus",104:"wallaby, brush kangaroo",105:"koala, koala bear, kangaroo bear, native bear, Phascolarctos cinereus",106:"wombat",107:"jelly fish",108:"sea anemone, anemone",109:"brain coral",110:"flatworm, platyhelminth",111:"nematode, nematode worm, roundworm",112:"conch",113:"snail",114:"slug",115:"sea slug, nudibranch",116:"chiton, coat-of-mail shell, sea cradle, polyplacophore",117:"chambered nautilus, pearly nautilus, nautilus",118:"Dungeness crab, Cancer magister",119:"rock crab, Cancer irroratus",120:"fiddler crab",121:"king crab, Alaska crab, Alaskan king crab, Alaska king crab, Paralithodes camtschatica",122:"American lobster, Northern lobster, Maine lobster, Homarus americanus",123:"spiny lobster, langouste, rock lobster, crawfish, crayfish, sea crawfish",124:"crayfish, crawfish, crawdad, crawdaddy",125:"hermit crab",126:"isopod",127:"white stork, Ciconia ciconia",128:"black stork, Ciconia nigra",129:"spoonbill",130:"flamingo",131:"little blue heron, Egretta caerulea",132:"American egret, great white heron, Egretta albus",133:"bittern",134:"crane",135:"limpkin, Aramus pictus",136:"European gallinule, Porphyrio porphyrio",137:"American coot, marsh hen, mud hen, water hen, Fulica americana",138:"bustard",139:"ruddy turnstone, Arenaria interpres",140:"red-backed sandpiper, dunlin, Erolia alpina",141:"redshank, Tringa totanus",142:"dowitcher",143:"oystercatcher, oyster catcher",144:"pelican",145:"king penguin, Aptenodytes patagonica",146:"albatross, mollymawk",147:"grey whale, gray whale, devilfish, Eschrichtius gibbosus, Eschrichtius robustus",148:"killer whale, killer, orca, grampus, sea wolf, Orcinus orca",149:"dugong, Dugong dugon",150:"sea lion",151:"Chihuahua",152:"Japanese spaniel",153:"Maltese dog, Maltese terrier, Maltese",154:"Pekinese, Pekingese, Peke",155:"Shih-Tzu",156:"Blenheim spaniel",157:"papillon",158:"toy terrier",159:"Rhodesian ridgeback",160:"Afghan hound, Afghan",161:"basset, basset hound",162:"beagle",163:"bloodhound, sleuthhound",164:"bluetick",165:"black-and-tan coonhound",166:"Walker hound, Walker foxhound",167:"English foxhound",168:"redbone",169:"borzoi, Russian wolfhound",170:"Irish wolfhound",171:"Italian greyhound",172:"whippet",173:"Ibizan hound, Ibizan Podenco",174:"Norwegian elkhound, elkhound",175:"otterhound, otter hound",176:"Saluki, gazelle hound",177:"Scottish deerhound, deerhound",178:"Weimaraner",179:"Staffordshire bullterrier, Staffordshire bull terrier",180:"American Staffordshire terrier, Staffordshire terrier, American pit bull terrier, pit bull terrier",181:"Bedlington terrier",182:"Border terrier",183:"Kerry blue terrier",184:"Irish terrier",185:"Norfolk terrier",186:"Norwich terrier",187:"Yorkshire terrier",188:"wire-haired fox terrier",189:"Lakeland terrier",190:"Sealyham terrier, Sealyham",191:"Airedale, Airedale terrier",192:"cairn, cairn terrier",193:"Australian terrier",194:"Dandie Dinmont, Dandie Dinmont terrier",195:"Boston bull, Boston terrier",196:"miniature schnauzer",197:"giant schnauzer",198:"standard schnauzer",199:"Scotch terrier, Scottish terrier, Scottie",200:"Tibetan terrier, chrysanthemum dog",201:"silky terrier, Sydney silky",202:"soft-coated wheaten terrier",203:"West Highland white terrier",204:"Lhasa, Lhasa apso",205:"flat-coated retriever",206:"curly-coated retriever",207:"golden retriever",208:"Labrador retriever",209:"Chesapeake Bay retriever",210:"German short-haired pointer",211:"vizsla, Hungarian pointer",212:"English setter",213:"Irish setter, red setter",214:"Gordon setter",215:"Brittany spaniel",216:"clumber, clumber spaniel",217:"English springer, English springer spaniel",218:"Welsh springer spaniel",219:"cocker spaniel, English cocker spaniel, cocker",220:"Sussex spaniel",221:"Irish water spaniel",222:"kuvasz",223:"schipperke",224:"groenendael",225:"malinois",226:"briard",227:"kelpie",228:"komondor",229:"Old English sheepdog, bobtail",230:"Shetland sheepdog, Shetland sheep dog, Shetland",231:"collie",232:"Border collie",233:"Bouvier des Flandres, Bouviers des Flandres",234:"Rottweiler",235:"German shepherd, German shepherd dog, German police dog, alsatian",236:"Doberman, Doberman pinscher",237:"miniature pinscher",238:"Greater Swiss Mountain dog",239:"Bernese mountain dog",240:"Appenzeller",241:"EntleBucher",242:"boxer",243:"bull mastiff",244:"Tibetan mastiff",245:"French bulldog",246:"Great Dane",247:"Saint Bernard, St Bernard",248:"Eskimo dog, husky",249:"malamute, malemute, Alaskan malamute",250:"Siberian husky",251:"dalmatian, coach dog, carriage dog",252:"affenpinscher, monkey pinscher, monkey dog",253:"basenji",254:"pug, pug-dog",255:"Leonberg",256:"Newfoundland, Newfoundland dog",257:"Great Pyrenees",258:"Samoyed, Samoyede",259:"Pomeranian",260:"chow, chow chow",261:"keeshond",262:"Brabancon griffon",263:"Pembroke, Pembroke Welsh corgi",264:"Cardigan, Cardigan Welsh corgi",265:"toy poodle",266:"miniature poodle",267:"standard poodle",268:"Mexican hairless",269:"timber wolf, grey wolf, gray wolf, Canis lupus",270:"white wolf, Arctic wolf, Canis lupus tundrarum",271:"red wolf, maned wolf, Canis rufus, Canis niger",272:"coyote, prairie wolf, brush wolf, Canis latrans",273:"dingo, warrigal, warragal, Canis dingo",274:"dhole, Cuon alpinus",275:"African hunting dog, hyena dog, Cape hunting dog, Lycaon pictus",276:"hyena, hyaena",277:"red fox, Vulpes vulpes",278:"kit fox, Vulpes macrotis",279:"Arctic fox, white fox, Alopex lagopus",280:"grey fox, gray fox, Urocyon cinereoargenteus",281:"tabby, tabby cat",282:"tiger cat",283:"Persian cat",284:"Siamese cat, Siamese",285:"Egyptian cat",286:"cougar, puma, catamount, mountain lion, painter, panther, Felis concolor",287:"lynx, catamount",288:"leopard, Panthera pardus",289:"snow leopard, ounce, Panthera uncia",290:"jaguar, panther, Panthera onca, Felis onca",291:"lion, king of beasts, Panthera leo",292:"tiger, Panthera tigris",293:"cheetah, chetah, Acinonyx jubatus",294:"brown bear, bruin, Ursus arctos",295:"American black bear, black bear, Ursus americanus, Euarctos americanus",296:"ice bear, polar bear, Ursus Maritimus, Thalarctos maritimus",297:"sloth bear, Melursus ursinus, Ursus ursinus",298:"mongoose",299:"meerkat, mierkat",300:"tiger beetle",301:"ladybug, ladybeetle, lady beetle, ladybird, ladybird beetle",302:"ground beetle, carabid beetle",303:"long-horned beetle, longicorn, longicorn beetle",304:"leaf beetle, chrysomelid",305:"dung beetle",306:"rhinoceros beetle",307:"weevil",308:"fly",309:"bee",310:"ant, emmet, pismire",311:"grasshopper, hopper",312:"cricket",313:"walking stick, walkingstick, stick insect",314:"cockroach, roach",315:"mantis, mantid",316:"cicada, cicala",317:"leafhopper",318:"lacewing, lacewing fly",319:"dragonfly, darning needle, devil's darning needle, sewing needle, snake feeder, snake doctor, mosquito hawk, skeeter hawk",320:"damselfly",321:"admiral",322:"ringlet, ringlet butterfly",323:"monarch, monarch butterfly, milkweed butterfly, Danaus plexippus",324:"cabbage butterfly",325:"sulphur butterfly, sulfur butterfly",326:"lycaenid, lycaenid butterfly",327:"starfish, sea star",328:"sea urchin",329:"sea cucumber, holothurian",330:"wood rabbit, cottontail, cottontail rabbit",331:"hare",332:"Angora, Angora rabbit",333:"hamster",334:"porcupine, hedgehog",335:"fox squirrel, eastern fox squirrel, Sciurus niger",336:"marmot",337:"beaver",338:"guinea pig, Cavia cobaya",339:"sorrel",340:"zebra",341:"hog, pig, grunter, squealer, Sus scrofa",342:"wild boar, boar, Sus scrofa",343:"warthog",344:"hippopotamus, hippo, river horse, Hippopotamus amphibius",345:"ox",346:"water buffalo, water ox, Asiatic buffalo, Bubalus bubalis",347:"bison",348:"ram, tup",349:"bighorn, bighorn sheep, cimarron, Rocky Mountain bighorn, Rocky Mountain sheep, Ovis canadensis",350:"ibex, Capra ibex",351:"hartebeest",352:"impala, Aepyceros melampus",353:"gazelle",354:"Arabian camel, dromedary, Camelus dromedarius",355:"llama",356:"weasel",357:"mink",358:"polecat, fitch, foulmart, foumart, Mustela putorius",359:"black-footed ferret, ferret, Mustela nigripes",360:"otter",361:"skunk, polecat, wood pussy",362:"badger",363:"armadillo",364:"three-toed sloth, ai, Bradypus tridactylus",365:"orangutan, orang, orangutang, Pongo pygmaeus",366:"gorilla, Gorilla gorilla",367:"chimpanzee, chimp, Pan troglodytes",368:"gibbon, Hylobates lar",369:"siamang, Hylobates syndactylus, Symphalangus syndactylus",370:"guenon, guenon monkey",371:"patas, hussar monkey, Erythrocebus patas",372:"baboon",373:"macaque",374:"langur",375:"colobus, colobus monkey",376:"proboscis monkey, Nasalis larvatus",377:"marmoset",378:"capuchin, ringtail, Cebus capucinus",379:"howler monkey, howler",380:"titi, titi monkey",381:"spider monkey, Ateles geoffroyi",382:"squirrel monkey, Saimiri sciureus",383:"Madagascar cat, ring-tailed lemur, Lemur catta",384:"indri, indris, Indri indri, Indri brevicaudatus",385:"Indian elephant, Elephas maximus",386:"African elephant, Loxodonta africana",387:"lesser panda, red panda, panda, bear cat, cat bear, Ailurus fulgens",388:"giant panda, panda, panda bear, coon bear, Ailuropoda melanoleuca",389:"barracouta, snoek",390:"eel",391:"coho, cohoe, coho salmon, blue jack, silver salmon, Oncorhynchus kisutch",392:"rock beauty, Holocanthus tricolor",393:"anemone fish",394:"sturgeon",395:"gar, garfish, garpike, billfish, Lepisosteus osseus",396:"lionfish",397:"puffer, pufferfish, blowfish, globefish",398:"abacus",399:"abaya",400:"academic gown, academic robe, judge's robe",401:"accordion, piano accordion, squeeze box",402:"acoustic guitar",403:"aircraft carrier, carrier, flattop, attack aircraft carrier",404:"airliner",405:"airship, dirigible",406:"altar",407:"ambulance",408:"amphibian, amphibious vehicle",409:"analog clock",410:"apiary, bee house",411:"apron",412:"ashcan, trash can, garbage can, wastebin, ash bin, ash-bin, ashbin, dustbin, trash barrel, trash bin",413:"assault rifle, assault gun",414:"backpack, back pack, knapsack, packsack, rucksack, haversack",415:"bakery, bakeshop, bakehouse",416:"balance beam, beam",417:"balloon",418:"ballpoint, ballpoint pen, ballpen, Biro",419:"Band Aid",420:"banjo",421:"bannister, banister, balustrade, balusters, handrail",422:"barbell",423:"barber chair",424:"barbershop",425:"barn",426:"barometer",427:"barrel, cask",428:"barrow, garden cart, lawn cart, wheelbarrow",429:"baseball",430:"basketball",431:"bassinet",432:"bassoon",433:"bathing cap, swimming cap",434:"bath towel",435:"bathtub, bathing tub, bath, tub",436:"beach wagon, station wagon, wagon, estate car, beach waggon, station waggon, waggon",437:"beacon, lighthouse, beacon light, pharos",438:"beaker",439:"bearskin, busby, shako",440:"beer bottle",441:"beer glass",442:"bell cote, bell cot",443:"bib",444:"bicycle-built-for-two, tandem bicycle, tandem",445:"bikini, two-piece",446:"binder, ring-binder",447:"binoculars, field glasses, opera glasses",448:"birdhouse",449:"boathouse",450:"bobsled, bobsleigh, bob",451:"bolo tie, bolo, bola tie, bola",452:"bonnet, poke bonnet",453:"bookcase",454:"bookshop, bookstore, bookstall",455:"bottlecap",456:"bow",457:"bow tie, bow-tie, bowtie",458:"brass, memorial tablet, plaque",459:"brassiere, bra, bandeau",460:"breakwater, groin, groyne, mole, bulwark, seawall, jetty",461:"breastplate, aegis, egis",462:"broom",463:"bucket, pail",464:"buckle",465:"bulletproof vest",466:"bullet train, bullet",467:"butcher shop, meat market",468:"cab, hack, taxi, taxicab",469:"caldron, cauldron",470:"candle, taper, wax light",471:"cannon",472:"canoe",473:"can opener, tin opener",474:"cardigan",475:"car mirror",476:"carousel, carrousel, merry-go-round, roundabout, whirligig",477:"carpenter's kit, tool kit",478:"carton",479:"car wheel",480:"cash machine, cash dispenser, automated teller machine, automatic teller machine, automated teller, automatic teller, ATM",481:"cassette",482:"cassette player",483:"castle",484:"catamaran",485:"CD player",486:"cello, violoncello",487:"cellular telephone, cellular phone, cellphone, cell, mobile phone",488:"chain",489:"chainlink fence",490:"chain mail, ring mail, mail, chain armor, chain armour, ring armor, ring armour",491:"chain saw, chainsaw",492:"chest",493:"chiffonier, commode",494:"chime, bell, gong",495:"china cabinet, china closet",496:"Christmas stocking",497:"church, church building",498:"cinema, movie theater, movie theatre, movie house, picture palace",499:"cleaver, meat cleaver, chopper",500:"cliff dwelling",501:"cloak",502:"clog, geta, patten, sabot",503:"cocktail shaker",504:"coffee mug",505:"coffeepot",506:"coil, spiral, volute, whorl, helix",507:"combination lock",508:"computer keyboard, keypad",509:"confectionery, confectionary, candy store",510:"container ship, containership, container vessel",511:"convertible",512:"corkscrew, bottle screw",513:"cornet, horn, trumpet, trump",514:"cowboy boot",515:"cowboy hat, ten-gallon hat",516:"cradle",517:"crane",518:"crash helmet",519:"crate",520:"crib, cot",521:"Crock Pot",522:"croquet ball",523:"crutch",524:"cuirass",525:"dam, dike, dyke",526:"desk",527:"desktop computer",528:"dial telephone, dial phone",529:"diaper, nappy, napkin",530:"digital clock",531:"digital watch",532:"dining table, board",533:"dishrag, dishcloth",534:"dishwasher, dish washer, dishwashing machine",535:"disk brake, disc brake",536:"dock, dockage, docking facility",537:"dogsled, dog sled, dog sleigh",538:"dome",539:"doormat, welcome mat",540:"drilling platform, offshore rig",541:"drum, membranophone, tympan",542:"drumstick",543:"dumbbell",544:"Dutch oven",545:"electric fan, blower",546:"electric guitar",547:"electric locomotive",548:"entertainment center",549:"envelope",550:"espresso maker",551:"face powder",552:"feather boa, boa",553:"file, file cabinet, filing cabinet",554:"fireboat",555:"fire engine, fire truck",556:"fire screen, fireguard",557:"flagpole, flagstaff",558:"flute, transverse flute",559:"folding chair",560:"football helmet",561:"forklift",562:"fountain",563:"fountain pen",564:"four-poster",565:"freight car",566:"French horn, horn",567:"frying pan, frypan, skillet",568:"fur coat",569:"garbage truck, dustcart",570:"gasmask, respirator, gas helmet",571:"gas pump, gasoline pump, petrol pump, island dispenser",572:"goblet",573:"go-kart",574:"golf ball",575:"golfcart, golf cart",576:"gondola",577:"gong, tam-tam",578:"gown",579:"grand piano, grand",580:"greenhouse, nursery, glasshouse",581:"grille, radiator grille",582:"grocery store, grocery, food market, market",583:"guillotine",584:"hair slide",585:"hair spray",586:"half track",587:"hammer",588:"hamper",589:"hand blower, blow dryer, blow drier, hair dryer, hair drier",590:"hand-held computer, hand-held microcomputer",591:"handkerchief, hankie, hanky, hankey",592:"hard disc, hard disk, fixed disk",593:"harmonica, mouth organ, harp, mouth harp",594:"harp",595:"harvester, reaper",596:"hatchet",597:"holster",598:"home theater, home theatre",599:"honeycomb",600:"hook, claw",601:"hoopskirt, crinoline",602:"horizontal bar, high bar",603:"horse cart, horse-cart",604:"hourglass",605:"iPod",606:"iron, smoothing iron",607:"jack-o'-lantern",608:"jean, blue jean, denim",609:"jeep, landrover",610:"jersey, T-shirt, tee shirt",611:"jigsaw puzzle",612:"jinrikisha, ricksha, rickshaw",613:"joystick",614:"kimono",615:"knee pad",616:"knot",617:"lab coat, laboratory coat",618:"ladle",619:"lampshade, lamp shade",620:"laptop, laptop computer",621:"lawn mower, mower",622:"lens cap, lens cover",623:"letter opener, paper knife, paperknife",624:"library",625:"lifeboat",626:"lighter, light, igniter, ignitor",627:"limousine, limo",628:"liner, ocean liner",629:"lipstick, lip rouge",630:"Loafer",631:"lotion",632:"loudspeaker, speaker, speaker unit, loudspeaker system, speaker system",633:"loupe, jeweler's loupe",634:"lumbermill, sawmill",635:"magnetic compass",636:"mailbag, postbag",637:"mailbox, letter box",638:"maillot",639:"maillot, tank suit",640:"manhole cover",641:"maraca",642:"marimba, xylophone",643:"mask",644:"matchstick",645:"maypole",646:"maze, labyrinth",647:"measuring cup",648:"medicine chest, medicine cabinet",649:"megalith, megalithic structure",650:"microphone, mike",651:"microwave, microwave oven",652:"military uniform",653:"milk can",654:"minibus",655:"miniskirt, mini",656:"minivan",657:"missile",658:"mitten",659:"mixing bowl",660:"mobile home, manufactured home",661:"Model T",662:"modem",663:"monastery",664:"monitor",665:"moped",666:"mortar",667:"mortarboard",668:"mosque",669:"mosquito net",670:"motor scooter, scooter",671:"mountain bike, all-terrain bike, off-roader",672:"mountain tent",673:"mouse, computer mouse",674:"mousetrap",675:"moving van",676:"muzzle",677:"nail",678:"neck brace",679:"necklace",680:"nipple",681:"notebook, notebook computer",682:"obelisk",683:"oboe, hautboy, hautbois",684:"ocarina, sweet potato",685:"odometer, hodometer, mileometer, milometer",686:"oil filter",687:"organ, pipe organ",688:"oscilloscope, scope, cathode-ray oscilloscope, CRO",689:"overskirt",690:"oxcart",691:"oxygen mask",692:"packet",693:"paddle, boat paddle",694:"paddlewheel, paddle wheel",695:"padlock",696:"paintbrush",697:"pajama, pyjama, pj's, jammies",698:"palace",699:"panpipe, pandean pipe, syrinx",700:"paper towel",701:"parachute, chute",702:"parallel bars, bars",703:"park bench",704:"parking meter",705:"passenger car, coach, carriage",706:"patio, terrace",707:"pay-phone, pay-station",708:"pedestal, plinth, footstall",709:"pencil box, pencil case",710:"pencil sharpener",711:"perfume, essence",712:"Petri dish",713:"photocopier",714:"pick, plectrum, plectron",715:"pickelhaube",716:"picket fence, paling",717:"pickup, pickup truck",718:"pier",719:"piggy bank, penny bank",720:"pill bottle",721:"pillow",722:"ping-pong ball",723:"pinwheel",724:"pirate, pirate ship",725:"pitcher, ewer",726:"plane, carpenter's plane, woodworking plane",727:"planetarium",728:"plastic bag",729:"plate rack",730:"plow, plough",731:"plunger, plumber's helper",732:"Polaroid camera, Polaroid Land camera",733:"pole",734:"police van, police wagon, paddy wagon, patrol wagon, wagon, black Maria",735:"poncho",736:"pool table, billiard table, snooker table",737:"pop bottle, soda bottle",738:"pot, flowerpot",739:"potter's wheel",740:"power drill",741:"prayer rug, prayer mat",742:"printer",743:"prison, prison house",744:"projectile, missile",745:"projector",746:"puck, hockey puck",747:"punching bag, punch bag, punching ball, punchball",748:"purse",749:"quill, quill pen",750:"quilt, comforter, comfort, puff",751:"racer, race car, racing car",752:"racket, racquet",753:"radiator",754:"radio, wireless",755:"radio telescope, radio reflector",756:"rain barrel",757:"recreational vehicle, RV, R.V.",758:"reel",759:"reflex camera",760:"refrigerator, icebox",761:"remote control, remote",762:"restaurant, eating house, eating place, eatery",763:"revolver, six-gun, six-shooter",764:"rifle",765:"rocking chair, rocker",766:"rotisserie",767:"rubber eraser, rubber, pencil eraser",768:"rugby ball",769:"rule, ruler",770:"running shoe",771:"safe",772:"safety pin",773:"saltshaker, salt shaker",774:"sandal",775:"sarong",776:"sax, saxophone",777:"scabbard",778:"scale, weighing machine",779:"school bus",780:"schooner",781:"scoreboard",782:"screen, CRT screen",783:"screw",784:"screwdriver",785:"seat belt, seatbelt",786:"sewing machine",787:"shield, buckler",788:"shoe shop, shoe-shop, shoe store",789:"shoji",790:"shopping basket",791:"shopping cart",792:"shovel",793:"shower cap",794:"shower curtain",795:"ski",796:"ski mask",797:"sleeping bag",798:"slide rule, slipstick",799:"sliding door",800:"slot, one-armed bandit",801:"snorkel",802:"snowmobile",803:"snowplow, snowplough",804:"soap dispenser",805:"soccer ball",806:"sock",807:"solar dish, solar collector, solar furnace",808:"sombrero",809:"soup bowl",810:"space bar",811:"space heater",812:"space shuttle",813:"spatula",814:"speedboat",815:"spider web, spider's web",816:"spindle",817:"sports car, sport car",818:"spotlight, spot",819:"stage",820:"steam locomotive",821:"steel arch bridge",822:"steel drum",823:"stethoscope",824:"stole",825:"stone wall",826:"stopwatch, stop watch",827:"stove",828:"strainer",829:"streetcar, tram, tramcar, trolley, trolley car",830:"stretcher",831:"studio couch, day bed",832:"stupa, tope",833:"submarine, pigboat, sub, U-boat",834:"suit, suit of clothes",835:"sundial",836:"sunglass",837:"sunglasses, dark glasses, shades",838:"sunscreen, sunblock, sun blocker",839:"suspension bridge",840:"swab, swob, mop",841:"sweatshirt",842:"swimming trunks, bathing trunks",843:"swing",844:"switch, electric switch, electrical switch",845:"syringe",846:"table lamp",847:"tank, army tank, armored combat vehicle, armoured combat vehicle",848:"tape player",849:"teapot",850:"teddy, teddy bear",851:"television, television system",852:"tennis ball",853:"thatch, thatched roof",854:"theater curtain, theatre curtain",855:"thimble",856:"thresher, thrasher, threshing machine",857:"throne",858:"tile roof",859:"toaster",860:"tobacco shop, tobacconist shop, tobacconist",861:"toilet seat",862:"torch",863:"totem pole",864:"tow truck, tow car, wrecker",865:"toyshop",866:"tractor",867:"trailer truck, tractor trailer, trucking rig, rig, articulated lorry, semi",868:"tray",869:"trench coat",870:"tricycle, trike, velocipede",871:"trimaran",872:"tripod",873:"triumphal arch",874:"trolleybus, trolley coach, trackless trolley",875:"trombone",876:"tub, vat",877:"turnstile",878:"typewriter keyboard",879:"umbrella",880:"unicycle, monocycle",881:"upright, upright piano",882:"vacuum, vacuum cleaner",883:"vase",884:"vault",885:"velvet",886:"vending machine",887:"vestment",888:"viaduct",889:"violin, fiddle",890:"volleyball",891:"waffle iron",892:"wall clock",893:"wallet, billfold, notecase, pocketbook",894:"wardrobe, closet, press",895:"warplane, military plane",896:"washbasin, handbasin, washbowl, lavabo, wash-hand basin",897:"washer, automatic washer, washing machine",898:"water bottle",899:"water jug",900:"water tower",901:"whiskey jug",902:"whistle",903:"wig",904:"window screen",905:"window shade",906:"Windsor tie",907:"wine bottle",908:"wing",909:"wok",910:"wooden spoon",911:"wool, woolen, woollen",912:"worm fence, snake fence, snake-rail fence, Virginia fence",913:"wreck",914:"yawl",915:"yurt",916:"web site, website, internet site, site",917:"comic book",918:"crossword puzzle, crossword",919:"street sign",920:"traffic light, traffic signal, stoplight",921:"book jacket, dust cover, dust jacket, dust wrapper",922:"menu",923:"plate",924:"guacamole",925:"consomme",926:"hot pot, hotpot",927:"trifle",928:"ice cream, icecream",929:"ice lolly, lolly, lollipop, popsicle",930:"French loaf",931:"bagel, beigel",932:"pretzel",933:"cheeseburger",934:"hotdog, hot dog, red hot",935:"mashed potato",936:"head cabbage",937:"broccoli",938:"cauliflower",939:"zucchini, courgette",940:"spaghetti squash",941:"acorn squash",942:"butternut squash",943:"cucumber, cuke",944:"artichoke, globe artichoke",945:"bell pepper",946:"cardoon",947:"mushroom",948:"Granny Smith",949:"strawberry",950:"orange",951:"lemon",952:"fig",953:"pineapple, ananas",954:"banana",955:"jackfruit, jak, jack",956:"custard apple",957:"pomegranate",958:"hay",959:"carbonara",960:"chocolate sauce, chocolate syrup",961:"dough",962:"meat loaf, meatloaf",963:"pizza, pizza pie",964:"potpie",965:"burrito",966:"red wine",967:"espresso",968:"cup",969:"eggnog",970:"alp",971:"bubble",972:"cliff, drop, drop-off",973:"coral reef",974:"geyser",975:"lakeside, lakeshore",976:"promontory, headland, head, foreland",977:"sandbar, sand bar",978:"seashore, coast, seacoast, sea-coast",979:"valley, vale",980:"volcano",981:"ballplayer, baseball player",982:"groom, bridegroom",983:"scuba diver",984:"rapeseed",985:"daisy",986:"yellow lady's slipper, yellow lady-slipper, Cypripedium calceolus, Cypripedium parviflorum",987:"corn",988:"acorn",989:"hip, rose hip, rosehip",990:"buckeye, horse chestnut, conker",991:"coral fungus",992:"agaric",993:"gyromitra",994:"stinkhorn, carrion fungus",995:"earthstar",996:"hen-of-the-woods, hen of the woods, Polyporus frondosus, Grifola frondosa",997:"bolete",998:"ear, spike, capitulum",999:"toilet tissue, toilet paper, bathroom tissue"};var rd=224,gUe={"1.00":"module_apply_default/MobilenetV1/Logits/global_pool","2.00":"module_apply_default/MobilenetV2/Logits/AvgPool"},ub={"1.00":{.25:{url:"https://tfhub.dev/google/imagenet/mobilenet_v1_025_224/classification/1",inputRange:[0,1]},"0.50":{url:"https://tfhub.dev/google/imagenet/mobilenet_v1_050_224/classification/1",inputRange:[0,1]},.75:{url:"https://tfhub.dev/google/imagenet/mobilenet_v1_075_224/classification/1",inputRange:[0,1]},"1.00":{url:"https://tfhub.dev/google/imagenet/mobilenet_v1_100_224/classification/1",inputRange:[0,1]}},"2.00":{"0.50":{url:"https://tfhub.dev/google/imagenet/mobilenet_v2_050_224/classification/2",inputRange:[0,1]},.75:{url:"https://tfhub.dev/google/imagenet/mobilenet_v2_075_224/classification/2",inputRange:[0,1]},"1.00":{url:"https://tfhub.dev/google/imagenet/mobilenet_v2_100_224/classification/2",inputRange:[0,1]}}};function jle(n){return n===void 0&&(n={version:1,alpha:1}),hk(this,void 0,void 0,function(){var t,e,r,o,s,i,a;return mk(this,function(l){switch(l.label){case 0:if(In==null)throw new Error("Cannot find TensorFlow.js. If you are using a <script> tag, please also include @tensorflow/tfjs on the page before using this model.");if(t=n.version.toFixed(2),e=n.alpha?n.alpha.toFixed(2):"",r=-1,o=1,n.modelUrl==null){if(!(t in ub))throw new Error("Invalid version of MobileNet. Valid versions are: "+Object.keys(ub));if(!(e in ub[t]))throw new Error("MobileNet constructed with invalid alpha "+n.alpha+". Valid multipliers for this version are: "+Object.keys(ub[t])+".");i=ub[t][e].inputRange,r=i[0],o=i[1]}return n.inputRange!=null&&(a=n.inputRange,r=a[0],o=a[1]),[4,(s=new xUe(t,e,n.modelUrl,r,o)).load()];case 1:return l.sent(),[2,s]}})})}var xUe=function(){function n(t,e,r,o,s){o===void 0&&(o=-1),s===void 0&&(s=1),this.version=t,this.alpha=e,this.modelUrl=r,this.inputMin=o,this.inputMax=s,this.normalizationConstant=(s-o)/255}return n.prototype.load=function(){return hk(this,void 0,void 0,function(){var t,e,r,o,s=this;return mk(this,function(i){switch(i.label){case 0:return this.modelUrl?(t=this,[4,Gf(this.modelUrl)]):[3,2];case 1:return t.model=i.sent(),[3,4];case 2:return e=ub[this.version][this.alpha].url,r=this,[4,Gf(e,{fromTFHub:!0})];case 3:r.model=i.sent(),i.label=4;case 4:return[4,(o=K(function(){return s.model.predict(Kt([1,rd,rd,3]))})).data()];case 5:return i.sent(),o.dispose(),[2]}})})},n.prototype.infer=function(t,e){var r=this;return e===void 0&&(e=!1),K(function(){t instanceof tt||(t=ba.fromPixels(t));var o=ae(B(fe(t,"float32"),r.normalizationConstant),r.inputMin),s=o;(t.shape[0]!==rd||t.shape[1]!==rd)&&(s=wr.resizeBilinear(o,[rd,rd],!0));var i,a=V(s,[-1,rd,rd,3]);if(e){var l=gUe[r.version],c=r.model.execute(a,l);i=Qt(c,[1,2])}else{var u=r.model.predict(a);i=$e(u,[0,1],[-1,1e3])}return i})},n.prototype.classify=function(t,e){return e===void 0&&(e=3),hk(this,void 0,void 0,function(){var r,o;return mk(this,function(s){switch(s.label){case 0:return[4,yUe(r=this.infer(t),e)];case 1:return o=s.sent(),r.dispose(),[2,o]}})})},n}();function yUe(n,t){return hk(this,void 0,void 0,function(){var e,r,o,s,i,a,l;return mk(this,function(c){switch(c.label){case 0:return[4,(e=xa(n)).data()];case 1:for(r=c.sent(),e.dispose(),o=[],l=0;l<r.length;l++)o.push({value:r[l],index:l});for(o.sort(function(u,p){return p.value-u.value}),s=new Float32Array(t),i=new Int32Array(t),l=0;l<t;l++)s[l]=o[l].value,i[l]=o[l].index;for(a=[],l=0;l<i.length;l++)a.push({className:mUe[i[l]],probability:s[l]});return[2,a]}})})}function vUe(n,t){n&1&&(Ft(0,"p"),Pn(1,"Loading model, please wait..."),zt())}function wUe(n,t){n&1&&(Ft(0,"p"),Pn(1,"Select an image to classify:"),zt())}function CUe(n,t){if(n&1){let e=Bg();Ft(0,"label",6)(1,"input",7),zs("change",function(o){Pg(e);let s=Sd();return $g(s.onImageUpload(o))}),zt(),Pn(2," Choose Image "),zt()}}function IUe(n,t){if(n&1&&(Ft(0,"div",8),Qo(1,"img",9),zt()),n&2){let e=Sd();oo(),Zo("src",e.imageSrc,$V)}}function SUe(n,t){if(n&1&&(Ft(0,"div",10)(1,"h2"),Pn(2),zt(),Ft(3,"p"),Pn(4),IU(5,"percent"),zt()()),n&2){let e=Sd();oo(2),Nd("Prediction: ",e.prediction.className,""),oo(2),Nd("Confidence: ",SU(5,2,e.prediction.probability),"")}}var Gle=(()=>{let t=class t{constructor(r){this.router=r,this.imageSrc=null,this.prediction=null,this.isModelLoaded=!1,jle().then(o=>{this.model=o,this.isModelLoaded=!0,console.log("MobileNet model loaded.")}).catch(o=>{console.error("Error loading MobileNet model:",o)})}onImageUpload(r){let o=r.target.files[0];if(o){let s=new FileReader;s.onload=()=>{this.imageSrc=s.result,this.classifyImage(s.result)},s.readAsDataURL(o)}}classifyImage(r){return ee(this,null,function*(){if(!this.model){console.error("Model is not loaded yet.");return}let o=new Image;o.src=r,o.onload=()=>ee(this,null,function*(){let s=ba.fromPixels(o).resizeBilinear([224,224]).expandDims(0).toFloat(),i=yield this.model.classify(s);this.prediction=i[0],console.log("Prediction:",this.prediction)})})}goBack(){this.router.navigate(["/dashboard"])}};t.\u0275fac=function(o){return new(o||t)(Tr(ts))},t.\u0275cmp=ui({type:t,selectors:[["app-image-classification"]],decls:10,vars:5,consts:[[1,"image-classification"],[4,"ngIf"],["class","custom-file-upload",4,"ngIf"],["class","preview",4,"ngIf"],["class","prediction",4,"ngIf"],[1,"back-button",3,"click"],[1,"custom-file-upload"],["type","file","accept","image/*",3,"change"],[1,"preview"],["alt","Uploaded Image",3,"src"],[1,"prediction"]],template:function(o,s){o&1&&(Ft(0,"div",0)(1,"h1"),Pn(2,"Image Classification"),zt(),Oc(3,vUe,2,0,"p",1)(4,wUe,2,0,"p",1)(5,CUe,3,0,"label",2)(6,IUe,2,1,"div",3)(7,SUe,6,4,"div",4),Ft(8,"button",5),zs("click",function(){return s.goBack()}),Pn(9,"Back to Dashboard"),zt()()),o&2&&(oo(3),Zo("ngIf",!s.isModelLoaded),oo(),Zo("ngIf",s.isModelLoaded),oo(),Zo("ngIf",s.isModelLoaded),oo(),Zo("ngIf",s.imageSrc),oo(),Zo("ngIf",s.prediction))},dependencies:[Wg,YU],styles:[".image-classification[_ngcontent-%COMP%]{text-align:center;padding:40px;background-color:#1a1a1a;max-width:600px;margin:0 auto;border-radius:10px;box-shadow:0 6px 12px #0fc3;font-family:Roboto,sans-serif;color:#0fc}.image-classification[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2.5rem;margin-bottom:20px;color:#0fc;text-transform:uppercase;letter-spacing:2px;text-shadow:0 0 15px rgba(0,255,204,.7)}.image-classification[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.2rem;margin-bottom:20px;color:#b0b0b0;text-shadow:0 0 10px rgba(0,255,204,.4)}.custom-file-upload[_ngcontent-%COMP%]{display:inline-block;padding:10px 20px;cursor:pointer;background-color:#0fc;color:#1a1a1a;border-radius:5px;font-size:1.2rem;transition:background-color .3s ease,box-shadow .3s ease;text-shadow:0 0 10px rgba(0,255,204,.7);border:2px solid #00ffcc}.custom-file-upload[_ngcontent-%COMP%]   input[type=file][_ngcontent-%COMP%]{display:none}.custom-file-upload[_ngcontent-%COMP%]:hover{background-color:#0ca;box-shadow:0 0 20px #00ffccb3}.preview[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;max-width:100%;height:auto;margin:20px 0;border:2px solid #00ffcc;border-radius:10px;box-shadow:0 6px 12px #0fc3;filter:drop-shadow(0 0 10px #00ffcc)}.preview[_ngcontent-%COMP%]{max-width:400px;margin:0 auto}.prediction[_ngcontent-%COMP%]{margin-top:20px;background-color:#262626;padding:20px;border-radius:10px;box-shadow:0 6px 12px #0fc3}.prediction[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.8rem;color:#0fc;text-shadow:0 0 10px rgba(0,255,204,.7)}.prediction[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.4rem;color:#b0b0b0;text-shadow:0 0 10px rgba(0,255,204,.4)}.back-button[_ngcontent-%COMP%]{margin-top:20px;padding:10px 20px;font-size:1.2rem;color:#0fc;background-color:transparent;border:2px solid #00ffcc;border-radius:5px;cursor:pointer;text-transform:uppercase;letter-spacing:1px;text-shadow:0 0 10px rgba(0,255,204,.7);transition:background-color .3s,box-shadow .3s;position:relative;display:inline-block}.back-button[_ngcontent-%COMP%]:hover{background-color:#0fc;color:#1a1a1a;box-shadow:0 0 20px #00ffccb3}@media (max-width: 768px){.image-classification[_ngcontent-%COMP%]{padding:20px}h1[_ngcontent-%COMP%]{font-size:2rem}p[_ngcontent-%COMP%], .custom-file-upload[_ngcontent-%COMP%]{font-size:1rem}.prediction[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem}.prediction[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.2rem}.preview[_ngcontent-%COMP%]{max-width:100%}}"]});let n=t;return n})();var ece=ad(Hle());N();Ey();var Ho=function(){return Ho=Object.assign||function(n){for(var t,e=1,r=arguments.length;e<r;e++)for(var o in t=arguments[e])Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o]);return n},Ho.apply(this,arguments)};function Ra(n,t,e,r){return new(e||(e=Promise))(function(o,s){function i(c){try{l(r.next(c))}catch(u){s(u)}}function a(c){try{l(r.throw(c))}catch(u){s(u)}}function l(c){var u;c.done?o(c.value):(u=c.value,u instanceof e?u:new e(function(p){p(u)})).then(i,a)}l((r=r.apply(n,t||[])).next())})}function Ma(n,t){var e,r,o,s,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(l){return function(c){return function(u){if(e)throw new TypeError("Generator is already executing.");for(;s&&(s=0,u[0]&&(i=0)),i;)try{if(e=1,r&&(o=2&u[0]?r.return:u[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,u[1])).done)return o;switch(r=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return i.label++,{value:u[1],done:!1};case 5:i.label++,r=u[1],u=[0];continue;case 7:u=i.ops.pop(),i.trys.pop();continue;default:if(o=i.trys,!((o=o.length>0&&o[o.length-1])||u[0]!==6&&u[0]!==2)){i=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){i.label=u[1];break}if(u[0]===6&&i.label<o[1]){i.label=o[1],o=u;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(u);break}o[2]&&i.ops.pop(),i.trys.pop();continue}u=t.call(n,i)}catch(p){u=[6,p],r=0}finally{e=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([l,c])}}}var gk=["wrist","thumb_cmc","thumb_mcp","thumb_ip","thumb_tip","index_finger_mcp","index_finger_pip","index_finger_dip","index_finger_tip","middle_finger_mcp","middle_finger_pip","middle_finger_dip","middle_finger_tip","ring_finger_mcp","ring_finger_pip","ring_finger_dip","ring_finger_tip","pinky_finger_mcp","pinky_finger_pip","pinky_finger_dip","pinky_finger_tip"],iB={runtime:"mediapipe",maxHands:2,modelType:"full"},TUe=function(){function n(t){var e,r=this;this.width=0,this.height=0,this.selfieMode=!1,this.handsSolution=new ece.Hands({locateFile:function(o,s){return t.solutionPath?t.solutionPath.replace(/\/+$/,"")+"/"+o:s+"/"+o}}),t.modelType==="lite"?e=0:e=1,this.handsSolution.setOptions({modelComplexity:e,selfieMode:this.selfieMode,maxNumHands:t.maxHands}),this.handsSolution.onResults(function(o){if(r.height=o.image.height,r.width=o.image.width,r.hands=[],o.multiHandLandmarks!==null)for(var s=o.multiHandedness,i=o.multiHandLandmarks,a=o.multiHandWorldLandmarks,l=0;l<s.length;l++)r.hands.push(Ho(Ho({},r.translateOutput(i[l],a[l])),{score:s[l].score,handedness:s[l].label}))})}return n.prototype.translateOutput=function(t,e){var r=this;return{keypoints:t.map(function(o,s){return{x:o.x*r.width,y:o.y*r.height,score:o.visibility,name:gk[s]}}),keypoints3D:e.map(function(o,s){return{x:o.x,y:o.y,z:o.z,score:o.visibility,name:gk[s]}})}},n.prototype.estimateHands=function(t,e){return Ra(this,void 0,void 0,function(){var r,o;return Ma(this,function(s){switch(s.label){case 0:return e&&e.flipHorizontal&&e.flipHorizontal!==this.selfieMode&&(this.selfieMode=e.flipHorizontal,this.handsSolution.setOptions({selfieMode:this.selfieMode})),t instanceof tt?(o=ImageData.bind,[4,ba.toPixels(t)]):[3,2];case 1:return r=new(o.apply(ImageData,[void 0,s.sent(),t.shape[1],t.shape[0]])),[3,3];case 2:r=t,s.label=3;case 3:return t=r,[4,this.handsSolution.send({image:t})];case 4:return s.sent(),[2,this.hands]}})})},n.prototype.dispose=function(){this.handsSolution.close()},n.prototype.reset=function(){this.handsSolution.reset(),this.width=0,this.height=0,this.hands=null,this.selfieMode=!1},n.prototype.initialize=function(){return this.handsSolution.initialize()},n}();function EUe(n){return Ra(this,void 0,void 0,function(){var t,e;return Ma(this,function(r){switch(r.label){case 0:return t=function(o){if(o==null)return Ho({},iB);var s=Ho({},o);return s.runtime="mediapipe",s.maxHands==null&&(s.maxHands=iB.maxHands),s.modelType==null&&(s.modelType=iB.modelType),s}(n),[4,(e=new TUe(t)).initialize()];case 1:return r.sent(),[2,e]}})})}function aB(n){return n.width*n.height}function qle(n){var t=n.xCenter-n.width/2,e=t+n.width,r=n.yCenter-n.height/2;return{xMin:t,xMax:e,yMin:r,yMax:r+n.height,width:n.width,height:n.height}}function NUe(n,t){var e=qle(n),r=qle(t);if(!function(i,a){return!(i.xMax<a.xMin||a.xMax<i.xMin||i.yMax<a.yMin||a.yMax<i.yMin)}(e,r))return 0;var o=aB(function(i,a){var l=Math.max(i.xMin,a.xMin),c=Math.min(i.xMax,a.xMax),u=Math.max(i.yMin,a.yMin),p=Math.min(i.yMax,a.yMax);return{xMin:l,xMax:c,yMin:u,yMax:p,width:Math.max(c-l,0),height:Math.max(p-u,0)}}(e,r)),s=aB(e)+aB(r)-o;return s>0?o/s:0}function DUe(n,t,e,r){var o=n.width,s=n.height,i=r?-1:1,a=Math.cos(n.rotation),l=Math.sin(n.rotation),c=n.xCenter,u=n.yCenter,p=1/t,f=1/e,d=new Array(16);return d[0]=o*a*i*p,d[1]=-s*l*p,d[2]=0,d[3]=(-.5*o*a*i+.5*s*l+c)*p,d[4]=o*l*i*f,d[5]=s*a*f,d[6]=0,d[7]=(-.5*s*a-.5*o*l*i+u)*f,d[8]=0,d[9]=0,d[10]=o*p,d[11]=0,d[12]=0,d[13]=0,d[14]=0,d[15]=1,function(h){if(h.length!==16)throw new Error("Array length must be 16 but got "+h.length);return[[h[0],h[1],h[2],h[3]],[h[4],h[5],h[6],h[7]],[h[8],h[9],h[10],h[11]],[h[12],h[13],h[14],h[15]]]}(d)}function tce(n){return n instanceof tt?{height:n.shape[0],width:n.shape[1]}:{height:n.height,width:n.width}}function xk(n){return n-2*Math.PI*Math.floor((n+Math.PI)/(2*Math.PI))}function nce(n){return n instanceof tt?n:ba.fromPixels(n)}function lB(n,t){C.assert(n.width!==0,function(){return t+" width cannot be 0."}),C.assert(n.height!==0,function(){return t+" height cannot be 0."})}function kUe(n,t){var e=function(r,o,s,i){var a=o-r,l=i-s;if(a===0)throw new Error("Original min and max are both "+r+", range cannot be 0.");var c=l/a;return{scale:c,offset:s-r*c}}(0,255,t[0],t[1]);return K(function(){return ae(B(n,e.scale),e.offset)})}function Kle(n,t,e){var r=t.outputTensorSize,o=t.keepAspectRatio,s=t.borderMode,i=t.outputTensorFloatRange,a=tce(n),l=function(f,d){return d?{xCenter:d.xCenter*f.width,yCenter:d.yCenter*f.height,width:d.width*f.width,height:d.height*f.height,rotation:d.rotation}:{xCenter:.5*f.width,yCenter:.5*f.height,width:f.width,height:f.height,rotation:0}}(a,e),c=function(f,d,h){if(h===void 0&&(h=!1),!h)return{top:0,left:0,right:0,bottom:0};var m=d.height,g=d.width;lB(d,"targetSize"),lB(f,"roi");var x,b,w=m/g,v=f.height/f.width,S=0,k=0;return w>v?(x=f.width,b=f.width*w,k=(1-v/w)/2):(x=f.height/w,b=f.height,S=(1-w/v)/2),f.width=x,f.height=b,{top:k,left:S,right:S,bottom:k}}(l,r,o),u=DUe(l,a.width,a.height,!1),p=K(function(){var f=nce(n),d=ti(function(g,x,b){return lB(b,"inputResolution"),[1/b.width*g[0][0]*x.width,1/b.height*g[0][1]*x.width,g[0][3]*x.width,1/b.width*g[1][0]*x.height,1/b.height*g[1][1]*x.height,g[1][3]*x.height,0,0]}(u,a,r),[1,8]),h=s==="zero"?"constant":"nearest",m=wr.transform(Cn(fe(f,"float32")),d,"bilinear",h,0,[r.height,r.width]);return i!=null?kUe(m,i):m});return{imageTensor:p,padding:c,transformationMatrix:u}}function Xle(n,t,e,r){return r===1?.5*(n+t):n+(t-n)*e/(r-1)}function Yle(n){return{xCenter:n.xMin+n.width/2,yCenter:n.yMin+n.height/2,width:n.width,height:n.height}}function Zle(n){var t=n.relativeKeypoints;if(t.length<=1)throw new Error("2 or more keypoints required to calculate a rect.");var e=Number.MAX_VALUE,r=Number.MAX_VALUE,o=Number.MIN_VALUE,s=Number.MIN_VALUE;return t.forEach(function(i){e=Math.min(e,i.x),o=Math.max(o,i.x),r=Math.min(r,i.y),s=Math.max(s,i.y)}),{xCenter:(e+o)/2,yCenter:(r+s)/2,width:o-e,height:s-r}}function _Ue(n,t,e,r,o){var s=e==="rect"?function(i,a,l){var c,u=i.locationData;if(a==="boundingbox")c=Yle(u.boundingBox);else{c=Zle(u);var p=l.width,f=l.height;c.xCenter=Math.round(c.xCenter*p),c.yCenter=Math.round(c.yCenter*f),c.width=Math.round(c.width*p),c.height=Math.round(c.height*f)}return c}(n,t,r):function(i,a){var l=i.locationData;return a==="boundingbox"?Yle(l.relativeBoundingBox):Zle(l)}(n,t);return o&&(s.rotation=function(i,a,l){var c,u=i.locationData,p=l.rotationVectorStartKeypointIndex,f=l.rotationVectorEndKeypointIndex;c=l.rotationVectorTargetAngle?l.rotationVectorTargetAngle:Math.PI*l.rotationVectorTargetAngleDegree/180;var d=u.relativeKeypoints[p].x*a.width,h=u.relativeKeypoints[p].y*a.height,m=u.relativeKeypoints[f].x*a.width,g=u.relativeKeypoints[f].y*a.height;return xk(c-Math.atan2(-(g-h),m-d))}(n,r,o)),s}function AUe(n){return K(function(){var t=function(o){return K(function(){return[$e(o,[0,0,0],[1,-1,1]),$e(o,[0,0,1],[1,-1,-1])]})}(n),e=t[0],r=t[1];return{boxes:Qt(r),logits:Qt(e)}})}function RUe(n,t,e,r){return Ra(this,void 0,void 0,function(){var o,s,i,a,l;return Ma(this,function(c){switch(c.label){case 0:return n.sort(function(u,p){return Math.max.apply(Math,p.score)-Math.max.apply(Math,u.score)}),o=ti(n.map(function(u){return[u.locationData.relativeBoundingBox.yMin,u.locationData.relativeBoundingBox.xMin,u.locationData.relativeBoundingBox.yMax,u.locationData.relativeBoundingBox.xMax]})),s=Xt(n.map(function(u){return u.score[0]})),[4,wr.nonMaxSuppressionAsync(o,s,t,e)];case 1:return[4,(i=c.sent()).array()];case 2:return a=c.sent(),l=n.filter(function(u,p){return a.indexOf(p)>-1}),Be([o,s,i]),[2,l]}})})}function MUe(n,t){return n.map(function(e){var r=Ho(Ho({},e),{x:e.x*t.width,y:e.y*t.height});return e.z!=null&&(r.z=e.z*t.width),r})}function OUe(n,t,e){return Ra(this,void 0,void 0,function(){var r,o,s,i,a;return Ma(this,function(l){switch(l.label){case 0:return r=n[0],o=n[1],s=function(c,u,p){return K(function(){var f,d,h,m;p.reverseOutputOrder?(d=Qt($e(c,[0,p.boxCoordOffset+0],[-1,1])),f=Qt($e(c,[0,p.boxCoordOffset+1],[-1,1])),m=Qt($e(c,[0,p.boxCoordOffset+2],[-1,1])),h=Qt($e(c,[0,p.boxCoordOffset+3],[-1,1]))):(f=Qt($e(c,[0,p.boxCoordOffset+0],[-1,1])),d=Qt($e(c,[0,p.boxCoordOffset+1],[-1,1])),h=Qt($e(c,[0,p.boxCoordOffset+2],[-1,1])),m=Qt($e(c,[0,p.boxCoordOffset+3],[-1,1]))),d=ae(B(xe(d,p.xScale),u.w),u.x),f=ae(B(xe(f,p.yScale),u.h),u.y),p.applyExponentialOnBoxSize?(h=B(vn(xe(h,p.hScale)),u.h),m=B(vn(xe(m,p.wScale)),u.w)):(h=B(xe(h,p.hScale),u.h),m=B(xe(m,p.wScale),u.h));var g=be(f,xe(h,2)),x=be(d,xe(m,2)),b=ae(f,xe(h,2)),w=ae(d,xe(m,2)),v=Tt([V(g,[p.numBoxes,1]),V(x,[p.numBoxes,1]),V(b,[p.numBoxes,1]),V(w,[p.numBoxes,1])],1);if(p.numKeypoints)for(var S=0;S<p.numKeypoints;++S){var k=p.keypointCoordOffset+S*p.numValuesPerKeypoint,A=void 0,$=void 0;p.reverseOutputOrder?(A=Qt($e(c,[0,k],[-1,1])),$=Qt($e(c,[0,k+1],[-1,1]))):($=Qt($e(c,[0,k],[-1,1])),A=Qt($e(c,[0,k+1],[-1,1])));var L=ae(B(xe(A,p.xScale),u.w),u.x),z=ae(B(xe($,p.yScale),u.h),u.y);v=Tt([v,V(L,[p.numBoxes,1]),V(z,[p.numBoxes,1])],1)}return v})}(o,t,e),i=K(function(){var c=r;return e.sigmoidScore?(e.scoreClippingThresh!=null&&(c=pr(r,-e.scoreClippingThresh,e.scoreClippingThresh)),c=Pr(c)):c}),[4,FUe(s,i,e)];case 1:return a=l.sent(),Be([s,i]),[2,a]}})})}function FUe(n,t,e){return Ra(this,void 0,void 0,function(){var r,o,s,i,a,l,c,u,p,f,d,h;return Ma(this,function(m){switch(m.label){case 0:return r=[],[4,n.data()];case 1:return o=m.sent(),[4,t.data()];case 2:for(s=m.sent(),i=0;i<e.numBoxes;++i)if(!(e.minScoreThresh!=null&&s[i]<e.minScoreThresh||(a=i*e.numCoords,l=PUe(o[a+0],o[a+1],o[a+2],o[a+3],s[i],e.flipVertically,i),(c=l.locationData.relativeBoundingBox).width<0||c.height<0))){if(e.numKeypoints>0)for((u=l.locationData).relativeKeypoints=[],p=e.numKeypoints*e.numValuesPerKeypoint,f=0;f<p;f+=e.numValuesPerKeypoint)d=a+e.keypointCoordOffset+f,h={x:o[d+0],y:e.flipVertically?1-o[d+1]:o[d+1]},u.relativeKeypoints.push(h);r.push(l)}return[2,r]}})})}function PUe(n,t,e,r,o,s,i){return{score:[o],ind:i,locationData:{relativeBoundingBox:{xMin:t,yMin:s?1-e:n,xMax:r,yMax:s?1-n:e,width:r-t,height:e-n}}}}function $Ue(n,t){return n==="none"?t:function(e){return 1/(1+Math.exp(-e))}(t)}function Qle(n,t,e,r){return Ra(this,void 0,void 0,function(){var o,s,i,a,l,c,u,p;return Ma(this,function(f){switch(f.label){case 0:return e=e||t.flipHorizontally||!1,r=r||t.flipVertically||!1,o=n.size,s=o/t.numLandmarks,[4,n.data()];case 1:for(i=f.sent(),a=[],l=0;l<t.numLandmarks;++l)c=l*s,(p={x:0,y:0}).x=e?t.inputImageWidth-i[c]:i[c],s>1&&(p.y=r?t.inputImageHeight-i[c+1]:i[c+1]),s>2&&(p.z=i[c+2]),s>3&&(p.score=$Ue(t.visibilityActivation,i[c+3])),a.push(p);for(u=0;u<a.length;++u)(p=a[u]).x=p.x/t.inputImageWidth,p.y=p.y/t.inputImageHeight,p.z=p.z/t.inputImageWidth/(t.normalizeZ||1);return[2,a]}})})}function Jle(n,t,e){var r=n.width,o=n.height,s=n.rotation;if(e.rotation==null&&e.rotationDegree==null||(s=function(u,p){return p.rotation!=null?u+=p.rotation:p.rotationDegree!=null&&(u+=Math.PI*p.rotationDegree/180),xk(u)}(s,e)),s===0)n.xCenter=n.xCenter+r*e.shiftX,n.yCenter=n.yCenter+o*e.shiftY;else{var i=(t.width*r*e.shiftX*Math.cos(s)-t.height*o*e.shiftY*Math.sin(s))/t.width,a=(t.width*r*e.shiftX*Math.sin(s)+t.height*o*e.shiftY*Math.cos(s))/t.height;n.xCenter=n.xCenter+i,n.yCenter=n.yCenter+a}if(e.squareLong){var l=Math.max(r*t.width,o*t.height);r=l/t.width,o=l/t.height}else if(e.squareShort){var c=Math.min(r*t.width,o*t.height);r=c/t.width,o=c/t.height}return n.width=r*e.scaleX,n.height=o*e.scaleY,n}function LUe(n,t){for(var e=function(W,Q){var ne=W[0].x*Q.width,se=W[0].y*Q.height,te=(W[4].x+W[8].x)/2,ie=(W[4].y+W[8].y)/2;return te=(te+W[6].x)/2*Q.width,ie=(ie+W[6].y)/2*Q.height,xk(Math.PI/2-Math.atan2(-(ie-se),te-ne))}(n,t),r=xk(-e),o=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY,i=Number.POSITIVE_INFINITY,a=Number.NEGATIVE_INFINITY,l=0,c=n;l<c.length;l++){var u=(g=c[l]).x,p=g.y;o=Math.min(o,u),s=Math.max(s,u),i=Math.min(i,p),a=Math.max(a,p)}var f=(s+o)/2,d=(a+i)/2;o=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY,i=Number.POSITIVE_INFINITY,a=Number.NEGATIVE_INFINITY;for(var h=0,m=n;h<m.length;h++){var g,x=((g=m[h]).x-f)*t.width,b=(g.y-d)*t.height,w=x*Math.cos(r)-b*Math.sin(r),v=x*Math.sin(r)+b*Math.cos(r);o=Math.min(o,w),s=Math.max(s,w),i=Math.min(i,v),a=Math.max(a,v)}var S=(s+o)/2,k=(a+i)/2,A=S*Math.cos(e)-k*Math.sin(e)+t.width*f,$=S*Math.sin(e)+k*Math.cos(e)+t.height*d,L=(s-o)/t.width,z=(a-i)/t.height;return{xCenter:A/t.width,yCenter:$/t.height,width:L,height:z,rotation:e}}var BUe={reduceBoxesInLowestLayer:!1,interpolatedScaleAspectRatio:1,featureMapHeight:[],featureMapWidth:[],numLayers:4,minScale:.1484375,maxScale:.75,inputSizeHeight:192,inputSizeWidth:192,anchorOffsetX:.5,anchorOffsetY:.5,strides:[8,16,16,16],aspectRatios:[1],fixedAnchorSize:!0},cB={runtime:"tfjs",modelType:"full",maxHands:2,detectorModelUrl:"https://tfhub.dev/mediapipe/tfjs-model/handpose_3d/detector/full/1",landmarkModelUrl:"https://tfhub.dev/mediapipe/tfjs-model/handpose_3d/landmark/full/1"},uB={flipHorizontal:!1,staticImageMode:!1},zUe={applyExponentialOnBoxSize:!1,flipVertically:!1,ignoreClasses:[],numClasses:1,numBoxes:2016,numCoords:18,boxCoordOffset:0,keypointCoordOffset:4,numKeypoints:7,numValuesPerKeypoint:2,sigmoidScore:!0,scoreClippingThresh:100,reverseOutputOrder:!0,xScale:192,yScale:192,hScale:192,wScale:192,minScoreThresh:.5},VUe=.3,UUe={shiftX:0,shiftY:-.5,scaleX:2.6,scaleY:2.6,squareLong:!0},jUe={shiftX:0,shiftY:-.1,scaleX:2,scaleY:2,squareLong:!0},GUe={outputTensorSize:{width:192,height:192},keepAspectRatio:!0,outputTensorFloatRange:[0,1],borderMode:"zero"},WUe={outputTensorSize:{width:224,height:224},keepAspectRatio:!0,outputTensorFloatRange:[0,1],borderMode:"zero"},HUe={numLandmarks:21,inputImageWidth:224,inputImageHeight:224,normalizeZ:.4,visibilityActivation:"none",flipHorizontally:!1,flipVertically:!1},qUe={numLandmarks:21,inputImageWidth:1,inputImageHeight:1,visibilityActivation:"none",flipHorizontally:!1,flipVertically:!1},hC,KUe=function(){function n(t,e,r){this.detectorModel=t,this.landmarkModel=e,this.maxHands=r,this.prevHandRectsFromLandmarks=null,this.anchors=function(l){l.reduceBoxesInLowestLayer==null&&(l.reduceBoxesInLowestLayer=!1),l.interpolatedScaleAspectRatio==null&&(l.interpolatedScaleAspectRatio=1),l.fixedAnchorSize==null&&(l.fixedAnchorSize=!1);for(var c=[],u=0;u<l.numLayers;){for(var p=[],f=[],d=[],h=[],m=u;m<l.strides.length&&l.strides[m]===l.strides[u];){var g=Xle(l.minScale,l.maxScale,m,l.strides.length);if(m===0&&l.reduceBoxesInLowestLayer)d.push(1),d.push(2),d.push(.5),h.push(.1),h.push(g),h.push(g);else{for(var x=0;x<l.aspectRatios.length;++x)d.push(l.aspectRatios[x]),h.push(g);if(l.interpolatedScaleAspectRatio>0){var b=m===l.strides.length-1?1:Xle(l.minScale,l.maxScale,m+1,l.strides.length);h.push(Math.sqrt(g*b)),d.push(l.interpolatedScaleAspectRatio)}}m++}for(var w=0;w<d.length;++w){var v=Math.sqrt(d[w]);p.push(h[w]/v),f.push(h[w]*v)}var S=0,k=0;if(l.featureMapHeight.length>0)S=l.featureMapHeight[u],k=l.featureMapWidth[u];else{var A=l.strides[u];S=Math.ceil(l.inputSizeHeight/A),k=Math.ceil(l.inputSizeWidth/A)}for(var $=0;$<S;++$)for(var L=0;L<k;++L)for(var z=0;z<p.length;++z){var W={xCenter:(L+l.anchorOffsetX)/k,yCenter:($+l.anchorOffsetY)/S,width:0,height:0};l.fixedAnchorSize?(W.width=1,W.height=1):(W.width=f[z],W.height=p[z]),c.push(W)}u=m}return c}(BUe);var o=Xt(this.anchors.map(function(l){return l.width})),s=Xt(this.anchors.map(function(l){return l.height})),i=Xt(this.anchors.map(function(l){return l.xCenter})),a=Xt(this.anchors.map(function(l){return l.yCenter}));this.anchorTensor={x:i,y:a,w:o,h:s}}return n.prototype.estimateHands=function(t,e){return Ra(this,void 0,void 0,function(){var r,o,s,i,a,l,c,u,p,f,d,h,m,g,x,b,w,v,S=this;return Ma(this,function(k){switch(k.label){case 0:return r=function(L){if(L==null)return Ho({},uB);var z=Ho({},L);return z.flipHorizontal==null&&(z.flipHorizontal=uB.flipHorizontal),z.staticImageMode==null&&(z.staticImageMode=uB.staticImageMode),z}(e),t==null?(this.reset(),[2,[]]):(o=tce(t),s=K(function(){var L=fe(nce(t),"float32");return r.flipHorizontal&&(L=Qt(wr.flipLeftRight(Cn(L,0)),[0])),L}),i=this.prevHandRectsFromLandmarks,r.staticImageMode||i==null||i.length<this.maxHands?[4,this.detectPalm(s)]:[3,2]);case 1:return(l=k.sent()).length===0?(this.reset(),s.dispose(),[2,[]]):(c=l.map(function(L){return S.palmDetectionToRoi(L,o)}),a=c,[3,3]);case 2:a=i,k.label=3;case 3:return A=.5,$=[],[a].forEach(function(L){return L.forEach(function(z){($=$.filter(function(W){return NUe(z,W)<=A})).push(z)})}),a=$,[4,Promise.all(a.map(function(L){return S.handLandmarks(L,s)}))];case 4:for(u=k.sent(),p=[],this.prevHandRectsFromLandmarks=[],f=0,d=u;f<d.length;f++)(h=d[f])!=null&&(m=h.landmarks,g=h.worldLandmarks,x=h.handScore,b=h.handedness,this.prevHandRectsFromLandmarks.push(this.handLandmarksToRoi(m,o)),(w=MUe(m,o))!=null&&w.forEach(function(L,z){delete L.z,L.name=gk[z]}),(v=g)!=null&&v.forEach(function(L,z){L.name=gk[z]}),p.push({keypoints:w,keypoints3D:v,handedness:b,score:x}));return s.dispose(),[2,p]}var A,$})})},n.prototype.dispose=function(){this.detectorModel.dispose(),this.landmarkModel.dispose(),Be([this.anchorTensor.x,this.anchorTensor.y,this.anchorTensor.w,this.anchorTensor.h])},n.prototype.reset=function(){this.prevHandRectsFromLandmarks=null},n.prototype.detectPalm=function(t){return Ra(this,void 0,void 0,function(){var e,r,o,s,i,a,l,c,u,p;return Ma(this,function(f){switch(f.label){case 0:return e=Kle(t,GUe),r=e.imageTensor,o=e.padding,s=this.detectorModel.predict(r),i=AUe(s),a=i.boxes,[4,OUe([l=i.logits,a],this.anchorTensor,zUe)];case 1:return(c=f.sent()).length===0?(Be([r,s,l,a]),[2,c]):[4,RUe(c,this.maxHands,VUe)];case 2:return u=f.sent(),p=function(d,h){d===void 0&&(d=[]);for(var m=h.left,g=h.top,x=h.left+h.right,b=h.top+h.bottom,w=0;w<d.length;w++){var v=d[w],S=v.locationData.relativeBoundingBox,k=(S.xMin-m)/(1-x),A=(S.yMin-g)/(1-b),$=S.width/(1-x),L=S.height/(1-b);S.xMin=k,S.yMin=A,S.width=$,S.height=L,S.xMax=k+$,S.yMax=A+L;var z=v.locationData.relativeKeypoints;z&&z.forEach(function(W){var Q=(W.x-m)/(1-x),ne=(W.y-g)/(1-b);W.x=Q,W.y=ne})}return d}(u,o),Be([r,s,l,a]),[2,p]}})})},n.prototype.palmDetectionToRoi=function(t,e){return Jle(_Ue(t,"boundingbox","normRect",e,{rotationVectorStartKeypointIndex:0,rotationVectorEndKeypointIndex:2,rotationVectorTargetAngleDegree:90}),e,UUe)},n.prototype.handLandmarks=function(t,e){return Ra(this,void 0,void 0,function(){var r,o,s,i,a,l,c,u,p,f,d,h,m,g,x,b;return Ma(this,function(w){switch(w.label){case 0:return r=Kle(e,WUe,t),o=r.imageTensor,s=r.padding,i=this.landmarkModel.execute(o,["Identity_2:0","Identity_1:0","Identity:0","Identity_3:0"]),a=i[0],l=i[1],c=i[2],u=i[3],[4,l.data()];case 1:return(p=w.sent()[0])<.5?(Be(i),Be(o),[2,null]):[4,c.data()];case 2:return f=w.sent()[0],d=f>=.5?"Left":"Right",[4,Qle(a,HUe)];case 3:return h=w.sent(),[4,Qle(u,qUe)];case 4:return m=w.sent(),g=function(v,S){var k=S.left,A=S.top,$=S.left+S.right,L=S.top+S.bottom;return v.map(function(z){return Ho(Ho({},z),{x:(z.x-k)/(1-$),y:(z.y-A)/(1-L),z:z.z/(1-$)})})}(h,s),x=function(v,S,k){k===void 0&&(k={ignoreRotation:!1});for(var A=[],$=0,L=v;$<L.length;$++){var z=L[$],W=z.x-.5,Q=z.y-.5,ne=k.ignoreRotation?0:S.rotation,se=Math.cos(ne)*W-Math.sin(ne)*Q,te=Math.sin(ne)*W+Math.cos(ne)*Q;se=se*S.width+S.xCenter,te=te*S.height+S.yCenter;var ie=z.z*S.width,le=Ho({},z);le.x=se,le.y=te,le.z=ie,A.push(le)}return A}(g,t),b=function(v,S){for(var k=[],A=0,$=v;A<$.length;A++){var L=$[A],z=L.x,W=L.y,Q=S.rotation,ne=Math.cos(Q)*z-Math.sin(Q)*W,se=Math.sin(Q)*z+Math.cos(Q)*W,te=Ho({},L);te.x=ne,te.y=se,k.push(te)}return k}(m,t),Be(i),Be(o),[2,{landmarks:x,worldLandmarks:b,handScore:p,handedness:d}]}})})},n.prototype.handLandmarksToRoi=function(t,e){return Jle(LUe([].concat(t.slice(0,4),t.slice(5,7),t.slice(9,11),t.slice(13,15),t.slice(17,19)),e),e,jUe)},n}();function XUe(n){return Ra(this,void 0,void 0,function(){var t,e,r,o,s,i;return Ma(this,function(a){switch(a.label){case 0:return t=function(l){if(l==null)return Ho({},cB);var c=Ho({},l);if(c.runtime="tfjs",c.maxHands==null&&(c.maxHands=cB.maxHands),c.modelType==null&&(c.modelType=cB.modelType),c.modelType!=="lite"&&c.modelType!=="full")throw new Error("Model type must be one of lite or full, but got "+c.modelType);return c.detectorModelUrl==null&&(c.modelType==="lite"?c.detectorModelUrl="https://tfhub.dev/mediapipe/tfjs-model/handpose_3d/detector/lite/1":c.detectorModelUrl="https://tfhub.dev/mediapipe/tfjs-model/handpose_3d/detector/full/1"),c.landmarkModelUrl==null&&(c.modelType==="lite"?c.landmarkModelUrl="https://tfhub.dev/mediapipe/tfjs-model/handpose_3d/landmark/lite/1":c.landmarkModelUrl="https://tfhub.dev/mediapipe/tfjs-model/handpose_3d/landmark/full/1"),c}(n),e=t.detectorModelUrl.indexOf("https://tfhub.dev")>-1,r=t.landmarkModelUrl.indexOf("https://tfhub.dev")>-1,[4,Promise.all([Gf(t.detectorModelUrl,{fromTFHub:e}),Gf(t.landmarkModelUrl,{fromTFHub:r})])];case 1:return o=a.sent(),s=o[0],i=o[1],[2,new KUe(s,i,t.maxHands)]}})})}function rce(n,t){return Ra(this,void 0,void 0,function(){var e,r;return Ma(this,function(o){if(n===hC.MediaPipeHands){if(r=void 0,(e=t)!=null){if(e.runtime==="tfjs")return[2,XUe(e)];if(e.runtime==="mediapipe")return[2,EUe(e)];r=e.runtime}throw new Error("Expect modelConfig.runtime to be either 'tfjs' or 'mediapipe', but got "+r)}throw new Error(n+" is not a supported model name.")})})}(function(n){n.MediaPipeHands="MediaPipeHands"})(hC||(hC={}));var ZUe=["videoElement"],QUe=["canvas"];function JUe(n,t){n&1&&(Ft(0,"p"),Pn(1,"Loading hand gesture detection model, please wait..."),zt())}var oce=(()=>{let t=class t{constructor(r){this.router=r,this.model=null,this.isModelLoaded=!1,this.stream=null}ngOnInit(){return ee(this,null,function*(){yield this.loadModel(),this.startVideoStream()})}ngOnDestroy(){this.stopVideoStream()}loadModel(){return ee(this,null,function*(){let r={runtime:"tfjs"};this.model=yield rce(hC.MediaPipeHands,r),this.isModelLoaded=!0,console.log("Hand Gesture model loaded.")})}startVideoStream(){let r=this.videoElement.nativeElement;navigator.mediaDevices&&navigator.mediaDevices.getUserMedia&&navigator.mediaDevices.getUserMedia({video:!0}).then(o=>{this.stream=o,r.srcObject=o,r.play(),r.onloadeddata=()=>{this.detectHands()}})}stopVideoStream(){this.stream&&(this.stream.getTracks().forEach(o=>o.stop()),this.stream=null)}detectHands(){return ee(this,null,function*(){let r=this.videoElement.nativeElement,o=this.canvasElement.nativeElement,s=o.getContext("2d");o.width=r.clientWidth,o.height=r.clientHeight,setInterval(()=>ee(this,null,function*(){if(this.isModelLoaded&&this.model){let i=yield this.model.estimateHands(r);s?.clearRect(0,0,o.width,o.height),i.length>0&&i.forEach(a=>{this.drawKeypoints(a.keypoints,s)})}}),100)})}drawKeypoints(r,o){o&&r.forEach(s=>{let{x:i,y:a}=s;o.beginPath(),o.arc(i,a,5,0,2*Math.PI),o.fillStyle="red",o.fill()})}goBack(){this.stopVideoStream(),this.router.navigate(["/dashboard"])}};t.\u0275fac=function(o){return new(o||t)(Tr(ts))},t.\u0275cmp=ui({type:t,selectors:[["app-hand-gesture-detection"]],viewQuery:function(o,s){if(o&1&&(Vg(ZUe,5),Vg(QUe,5)),o&2){let i;Td(i=Ed())&&(s.videoElement=i.first),Td(i=Ed())&&(s.canvasElement=i.first)}},decls:11,vars:1,consts:[["videoElement",""],["canvas",""],[1,"hand-gesture-detection-container"],[1,"video-container"],["width","640","height","480","autoplay",""],[4,"ngIf"],[1,"back-button",3,"click"]],template:function(o,s){if(o&1){let i=Bg();Ft(0,"div",2)(1,"h1"),Pn(2,"Real-time Hand Gesture Detection"),zt(),Ft(3,"div",3),Qo(4,"video",4,0)(6,"canvas",null,1),zt(),Oc(8,JUe,2,0,"p",5),Ft(9,"button",6),zs("click",function(){return Pg(i),$g(s.goBack())}),Pn(10,"Back to Dashboard"),zt()()}o&2&&(oo(8),Zo("ngIf",!s.isModelLoaded))},dependencies:[Wg],styles:[".hand-gesture-detection-container[_ngcontent-%COMP%]{text-align:center;padding:40px;color:#0fc;position:relative;display:flex;flex-direction:column;align-items:center}.hand-gesture-detection-container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2.5rem;color:#0fc;text-transform:uppercase;margin-bottom:30px;letter-spacing:2px;text-shadow:0 0 15px rgba(0,255,204,.7)}.video-container[_ngcontent-%COMP%]{position:relative;border-radius:10px;box-shadow:0 6px 12px #0fc3;margin-bottom:20px}video[_ngcontent-%COMP%]{width:640px;height:480px;border:2px solid #00ffcc;border-radius:10px;filter:drop-shadow(0 0 10px #00ffcc)}canvas[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none}.hand-gesture-detection-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.3rem;color:#b0b0b0;text-shadow:0 0 10px rgba(0,255,204,.4);margin-top:20px;line-height:1.5;max-width:800px;margin-left:auto;margin-right:auto}.back-button[_ngcontent-%COMP%]{margin-top:20px;padding:10px 20px;font-size:1.2rem;color:#0fc;background-color:transparent;border:2px solid #00ffcc;border-radius:5px;cursor:pointer;text-transform:uppercase;letter-spacing:1px;text-shadow:0 0 10px rgba(0,255,204,.7);transition:background-color .3s,box-shadow .3s;position:relative;display:inline-block}.back-button[_ngcontent-%COMP%]:hover{background-color:#0fc;color:#1a1a1a;box-shadow:0 0 20px #00ffccb3}@media (max-width: 768px){.video-container[_ngcontent-%COMP%]{width:90%}video[_ngcontent-%COMP%]{width:100%;height:auto}}"]});let n=t;return n})();var e4e=[{path:"",redirectTo:"dashboard",pathMatch:"full"},{path:"dashboard",component:VH},{path:"object-detection",component:Ule},{path:"image-classification",component:Gle},{path:"hand-gesture",component:oce}],sce=(()=>{let t=class t{};t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=Yo({type:t}),t.\u0275inj=Xo({imports:[mM.forRoot(e4e),mM]});let n=t;return n})();var ice=(()=>{let t=class t{constructor(){this.title="object-detection-angular-tensorflow"}};t.\u0275fac=function(o){return new(o||t)},t.\u0275cmp=ui({type:t,selectors:[["app-root"]],decls:2,vars:0,consts:[[1,"container"]],template:function(o,s){o&1&&(Ft(0,"div",0),Qo(1,"router-outlet"),zt())},dependencies:[lM]});let n=t;return n})();var ace=(()=>{let t=class t{};t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=Yo({type:t,bootstrap:[ice]}),t.\u0275inj=Xo({imports:[y4,c4,sce,QW]});let n=t;return n})();x4().bootstrapModule(ace).catch(n=>console.error(n));
